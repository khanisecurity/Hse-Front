!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TelerikBlazor=e():t.TelerikBlazor=e()}(self,(()=>(()=>{var __webpack_modules__={840:(t,e,i)=>{var r;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */!function(n,o,s,a){"use strict";var l,c=["","webkit","Moz","MS","ms","o"],h=o.createElement("div"),u=Math.round,p=Math.abs,d=Date.now;function f(t,e,i){return setTimeout(x(t,i),e)}function g(t,e,i){return!!Array.isArray(t)&&(m(t,i[e],i),!0)}function m(t,e,i){var r;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==a)for(r=0;r<t.length;)e.call(i,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(i,t[r],r,t)}function y(t,e,i){var r="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=n.console&&(n.console.warn||n.console.log);return o&&o.call(n.console,r,i),t.apply(this,arguments)}}l="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var r=arguments[i];if(r!==a&&null!==r)for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}return e}:Object.assign;var v=y((function(t,e,i){for(var r=Object.keys(e),n=0;n<r.length;)(!i||i&&t[r[n]]===a)&&(t[r[n]]=e[r[n]]),n++;return t}),"extend","Use `assign`."),b=y((function(t,e){return v(t,e,!0)}),"merge","Use `assign`.");function w(t,e,i){var r,n=e.prototype;(r=t.prototype=Object.create(n)).constructor=t,r._super=n,i&&l(r,i)}function x(t,e){return function(){return t.apply(e,arguments)}}function S(t,e){return"function"==typeof t?t.apply(e&&e[0]||a,e):t}function k(t,e){return t===a?e:t}function C(t,e,i){m(O(e),(function(e){t.addEventListener(e,i,!1)}))}function A(t,e,i){m(O(e),(function(e){t.removeEventListener(e,i,!1)}))}function _(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function T(t,e){return t.indexOf(e)>-1}function O(t){return t.trim().split(/\s+/g)}function E(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var r=0;r<t.length;){if(i&&t[r][i]==e||!i&&t[r]===e)return r;r++}return-1}function M(t){return Array.prototype.slice.call(t,0)}function P(t,e,i){for(var r=[],n=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];E(n,s)<0&&r.push(t[o]),n[o]=s,o++}return i&&(r=e?r.sort((function(t,i){return t[e]>i[e]})):r.sort()),r}function I(t,e){for(var i,r,n=e[0].toUpperCase()+e.slice(1),o=0;o<c.length;){if((r=(i=c[o])?i+n:e)in t)return r;o++}return a}var D=1;function F(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||n}var R="ontouchstart"in n,L=I(n,"PointerEvent")!==a,N=R&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),B="touch",j="mouse",z=24,U=["x","y"],$=["clientX","clientY"];function H(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){S(t.options.enable,[t])&&i.handler(e)},this.init()}function V(t,e,i){var r=i.pointers.length,n=i.changedPointers.length,o=1&e&&r-n==0,s=12&e&&r-n==0;i.isFirst=!!o,i.isFinal=!!s,o&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,r=e.pointers,n=r.length;i.firstInput||(i.firstInput=q(e));n>1&&!i.firstMultiple?i.firstMultiple=q(e):1===n&&(i.firstMultiple=!1);var o=i.firstInput,s=i.firstMultiple,l=s?s.center:o.center,c=e.center=W(r);e.timeStamp=d(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=Y(l,c),e.distance=K(l,c),function(t,e){var i=e.center,r=t.offsetDelta||{},n=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(n=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:i.x,y:i.y});e.deltaX=n.x+(i.x-r.x),e.deltaY=n.y+(i.y-r.y)}(i,e),e.offsetDirection=G(e.deltaX,e.deltaY);var h=X(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=h.x,e.overallVelocityY=h.y,e.overallVelocity=p(h.x)>p(h.y)?h.x:h.y,e.scale=s?(u=s.pointers,f=r,K(f[0],f[1],$)/K(u[0],u[1],$)):1,e.rotation=s?function(t,e){return Y(e[1],e[0],$)+Y(t[1],t[0],$)}(s.pointers,r):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,r,n,o,s=t.lastInterval||e,l=e.timeStamp-s.timeStamp;if(8!=e.eventType&&(l>25||s.velocity===a)){var c=e.deltaX-s.deltaX,h=e.deltaY-s.deltaY,u=X(l,c,h);r=u.x,n=u.y,i=p(u.x)>p(u.y)?u.x:u.y,o=G(c,h),t.lastInterval=e}else i=s.velocity,r=s.velocityX,n=s.velocityY,o=s.direction;e.velocity=i,e.velocityX=r,e.velocityY=n,e.direction=o}(i,e);var u,f;var g=t.element;_(e.srcEvent.target,g)&&(g=e.srcEvent.target);e.target=g}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function q(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:u(t.pointers[i].clientX),clientY:u(t.pointers[i].clientY)},i++;return{timeStamp:d(),pointers:e,center:W(e),deltaX:t.deltaX,deltaY:t.deltaY}}function W(t){var e=t.length;if(1===e)return{x:u(t[0].clientX),y:u(t[0].clientY)};for(var i=0,r=0,n=0;n<e;)i+=t[n].clientX,r+=t[n].clientY,n++;return{x:u(i/e),y:u(r/e)}}function X(t,e,i){return{x:e/t||0,y:i/t||0}}function G(t,e){return t===e?1:p(t)>=p(e)?t<0?2:4:e<0?8:16}function K(t,e,i){i||(i=U);var r=e[i[0]]-t[i[0]],n=e[i[1]]-t[i[1]];return Math.sqrt(r*r+n*n)}function Y(t,e,i){i||(i=U);var r=e[i[0]]-t[i[0]],n=e[i[1]]-t[i[1]];return 180*Math.atan2(n,r)/Math.PI}H.prototype={handler:function(){},init:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(F(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(F(this.element),this.evWin,this.domHandler)}};var J={mousedown:1,mousemove:2,mouseup:4},Z="mousedown",Q="mousemove mouseup";function tt(){this.evEl=Z,this.evWin=Q,this.pressed=!1,H.apply(this,arguments)}w(tt,H,{handler:function(t){var e=J[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:j,srcEvent:t}))}});var et={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},it={2:B,3:"pen",4:j,5:"kinect"},rt="pointerdown",nt="pointermove pointerup pointercancel";function ot(){this.evEl=rt,this.evWin=nt,H.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}n.MSPointerEvent&&!n.PointerEvent&&(rt="MSPointerDown",nt="MSPointerMove MSPointerUp MSPointerCancel"),w(ot,H,{handler:function(t){var e=this.store,i=!1,r=t.type.toLowerCase().replace("ms",""),n=et[r],o=it[t.pointerType]||t.pointerType,s=o==B,a=E(e,t.pointerId,"pointerId");1&n&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):12&n&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,n,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(a,1))}});var st={touchstart:1,touchmove:2,touchend:4,touchcancel:8},at="touchstart",lt="touchstart touchmove touchend touchcancel";function ct(){this.evTarget=at,this.evWin=lt,this.started=!1,H.apply(this,arguments)}function ht(t,e){var i=M(t.touches),r=M(t.changedTouches);return 12&e&&(i=P(i.concat(r),"identifier",!0)),[i,r]}w(ct,H,{handler:function(t){var e=st[t.type];if(1===e&&(this.started=!0),this.started){var i=ht.call(this,t,e);12&e&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:B,srcEvent:t})}}});var ut={touchstart:1,touchmove:2,touchend:4,touchcancel:8},pt="touchstart touchmove touchend touchcancel";function dt(){this.evTarget=pt,this.targetIds={},H.apply(this,arguments)}function ft(t,e){var i=M(t.touches),r=this.targetIds;if(3&e&&1===i.length)return r[i[0].identifier]=!0,[i,i];var n,o,s=M(t.changedTouches),a=[],l=this.target;if(o=i.filter((function(t){return _(t.target,l)})),1===e)for(n=0;n<o.length;)r[o[n].identifier]=!0,n++;for(n=0;n<s.length;)r[s[n].identifier]&&a.push(s[n]),12&e&&delete r[s[n].identifier],n++;return a.length?[P(o.concat(a),"identifier",!0),a]:void 0}w(dt,H,{handler:function(t){var e=ut[t.type],i=ft.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:B,srcEvent:t})}});function gt(){H.apply(this,arguments);var t=x(this.handler,this);this.touch=new dt(this.manager,t),this.mouse=new tt(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function mt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,yt.call(this,e)):12&t&&yt.call(this,e)}function yt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(i);t>-1&&r.splice(t,1)}),2500)}}function vt(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var n=this.lastTouches[r],o=Math.abs(e-n.x),s=Math.abs(i-n.y);if(o<=25&&s<=25)return!0}return!1}w(gt,H,{handler:function(t,e,i){var r=i.pointerType==B,n=i.pointerType==j;if(!(n&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(r)mt.call(this,e,i);else if(n&&vt.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var bt=I(h.style,"touchAction"),wt=bt!==a,xt="compute",St="auto",kt="manipulation",Ct="none",At="pan-x",_t="pan-y",Tt=function(){if(!wt)return!1;var t={},e=n.CSS&&n.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){t[i]=!e||n.CSS.supports("touch-action",i)})),t}();function Ot(t,e){this.manager=t,this.set(e)}Ot.prototype={set:function(t){t==xt&&(t=this.compute()),wt&&this.manager.element.style&&Tt[t]&&(this.manager.element.style[bt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return m(this.manager.recognizers,(function(e){S(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(T(t,Ct))return Ct;var e=T(t,At),i=T(t,_t);if(e&&i)return Ct;if(e||i)return e?At:_t;if(T(t,kt))return kt;return St}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,n=T(r,Ct)&&!Tt.none,o=T(r,_t)&&!Tt["pan-y"],s=T(r,At)&&!Tt["pan-x"];if(n){var a=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(a&&l&&c)return}if(!s||!o)return n||o&&6&i||s&&i&z?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Et=32;function Mt(t){this.options=l({},this.defaults,t||{}),this.id=D++,this.manager=null,this.options.enable=k(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Pt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function It(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function Dt(t,e){var i=e.manager;return i?i.get(t):t}function Ft(){Mt.apply(this,arguments)}function Rt(){Ft.apply(this,arguments),this.pX=null,this.pY=null}function Lt(){Ft.apply(this,arguments)}function Nt(){Mt.apply(this,arguments),this._timer=null,this._input=null}function Bt(){Ft.apply(this,arguments)}function jt(){Ft.apply(this,arguments)}function zt(){Mt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ut(t,e){return(e=e||{}).recognizers=k(e.recognizers,Ut.defaults.preset),new $t(t,e)}Mt.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(g(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Dt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return g(t,"dropRecognizeWith",this)||(t=Dt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(g(t,"requireFailure",this))return this;var e=this.requireFail;return-1===E(e,t=Dt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(g(t,"dropRequireFailure",this))return this;t=Dt(t,this);var e=E(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function r(i){e.manager.emit(i,t)}i<8&&r(e.options.event+Pt(i)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),i>=8&&r(e.options.event+Pt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Et},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!S(this.options.enable,[this,e]))return this.reset(),void(this.state=Et);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},w(Ft,Mt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,r=6&e,n=this.attrTest(t);return r&&(8&i||!n)?16|e:r||n?4&i?8|e:2&e?4|e:2:Et}}),w(Rt,Ft,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(_t),t&z&&e.push(At),e},directionTest:function(t){var e=this.options,i=!0,r=t.distance,n=t.direction,o=t.deltaX,s=t.deltaY;return n&e.direction||(6&e.direction?(n=0===o?1:o<0?2:4,i=o!=this.pX,r=Math.abs(t.deltaX)):(n=0===s?1:s<0?8:16,i=s!=this.pY,r=Math.abs(t.deltaY))),t.direction=n,i&&r>e.threshold&&n&e.direction},attrTest:function(t){return Ft.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=It(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),w(Lt,Ft,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ct]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),w(Nt,Mt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[St]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,r=t.distance<e.threshold,n=t.deltaTime>e.time;if(this._input=t,!r||!i||12&t.eventType&&!n)this.reset();else if(1&t.eventType)this.reset(),this._timer=f((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return Et},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}}),w(Bt,Ft,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ct]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),w(jt,Ft,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Rt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return 30&i?e=t.overallVelocity:6&i?e=t.overallVelocityX:i&z&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&p(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=It(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),w(zt,Mt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[kt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,r=t.distance<e.threshold,n=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&n&&i){if(4!=t.eventType)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||K(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=f((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Et},failTimeout:function(){return this._timer=f((function(){this.state=Et}),this.options.interval,this),Et},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ut.VERSION="2.0.7",Ut.defaults={domEvents:!1,touchAction:xt,enable:!0,inputTarget:null,inputClass:null,preset:[[Bt,{enable:!1}],[Lt,{enable:!1},["rotate"]],[jt,{direction:6}],[Rt,{direction:6},["swipe"]],[zt],[zt,{event:"doubletap",taps:2},["tap"]],[Nt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function $t(t,e){var i;this.options=l({},Ut.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(L?ot:N?dt:R?gt:tt))(i,V),this.touchAction=new Ot(this,this.options.touchAction),Ht(this,!0),m(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Ht(t,e){var i,r=t.element;r.style&&(m(t.options.cssProps,(function(n,o){i=I(r.style,o),e?(t.oldCssProps[i]=r.style[i],r.style[i]=n):r.style[i]=t.oldCssProps[i]||""})),e||(t.oldCssProps={}))}$t.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var r=this.recognizers,n=e.curRecognizer;(!n||n&&8&n.state)&&(n=e.curRecognizer=null);for(var o=0;o<r.length;)i=r[o],2===e.stopped||n&&i!=n&&!i.canRecognizeWith(n)?i.reset():i.recognize(t),!n&&14&i.state&&(n=e.curRecognizer=i),o++}},get:function(t){if(t instanceof Mt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(g(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(g(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=E(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var i=this.handlers;return m(O(t),(function(t){i[t]=i[t]||[],i[t].push(e)})),this}},off:function(t,e){if(t!==a){var i=this.handlers;return m(O(t),(function(t){e?i[t]&&i[t].splice(E(i[t],e),1):delete i[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var i=o.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<i.length;)i[r](e),r++}},destroy:function(){this.element&&Ht(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Ut,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Et,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:z,DIRECTION_ALL:30,Manager:$t,Input:H,TouchAction:Ot,TouchInput:dt,MouseInput:tt,PointerEventInput:ot,TouchMouseInput:gt,SingleTouchInput:ct,Recognizer:Mt,AttrRecognizer:Ft,Tap:zt,Pan:Rt,Swipe:jt,Pinch:Lt,Rotate:Bt,Press:Nt,on:C,off:A,each:m,merge:b,extend:v,assign:l,inherit:w,bindFn:x,prefixed:I}),(void 0!==n?n:"undefined"!=typeof self?self:{}).Hammer=Ut,(r=function(){return Ut}.call(e,i,e,t))===a||(t.exports=r)}(window,document)},299:function(module,__unused_webpack_exports,__webpack_require__){
/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2022 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */
var factory;factory=()=>(()=>{"use strict";var __webpack_modules__=[,(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.arrayByteLength=h,e.arraysToBytes=function(t){const e=t.length;if(1===e&&t[0]instanceof Uint8Array)return t[0];let i=0;for(let r=0;r<e;r++)i+=h(t[r]);let r=0;const n=new Uint8Array(i);for(let i=0;i<e;i++){let e=t[i];e instanceof Uint8Array||(e="string"==typeof e?c(e):new Uint8Array(e));const o=e.byteLength;n.set(e,r),r+=o}return n},e.assert=function(t,e){t||s(e)},e.bytesToString=function(t){"object"==typeof t&&null!==t&&void 0!==t.length||s("Invalid argument for bytesToString");const e=t.length,i=8192;if(e<i)return String.fromCharCode.apply(null,t);const r=[];for(let n=0;n<e;n+=i){const o=Math.min(n+i,e),s=t.subarray(n,o);r.push(String.fromCharCode.apply(null,s))}return r.join("")},e.createPromiseCapability=function(){const t=Object.create(null);let e=!1;return Object.defineProperty(t,"settled",{get:()=>e}),t.promise=new Promise((function(i,r){t.resolve=function(t){e=!0,i(t)},t.reject=function(t){e=!0,r(t)}})),t},e.createValidAbsoluteUrl=function(t,e=null,i=null){if(!t)return null;try{if(i&&"string"==typeof t){if(i.addDefaultProtocol&&t.startsWith("www.")){const e=t.match(/\./g);e&&e.length>=2&&(t=`http://${t}`)}if(i.tryConvertEncoding)try{t=f(t)}catch(t){}}const r=e?new URL(t,e):new URL(t);if(function(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(r))return r}catch(t){}return null},e.escapeString=function(t){return t.replace(/([()\\\n\r])/g,(t=>"\n"===t?"\\n":"\r"===t?"\\r":`\\${t}`))},e.getModificationDate=function(t=new Date){return[t.getUTCFullYear().toString(),(t.getUTCMonth()+1).toString().padStart(2,"0"),t.getUTCDate().toString().padStart(2,"0"),t.getUTCHours().toString().padStart(2,"0"),t.getUTCMinutes().toString().padStart(2,"0"),t.getUTCSeconds().toString().padStart(2,"0")].join("")},e.getVerbosityLevel=function(){return n},e.info=function(t){n>=r.INFOS&&console.log(`Info: ${t}`)},e.isArrayBuffer=function(t){return"object"==typeof t&&null!==t&&void 0!==t.byteLength},e.isArrayEqual=function(t,e){if(t.length!==e.length)return!1;for(let i=0,r=t.length;i<r;i++)if(t[i]!==e[i])return!1;return!0},e.isAscii=function(t){return/^[\x00-\x7F]*$/.test(t)},e.objectFromMap=function(t){const e=Object.create(null);for(const[i,r]of t)e[i]=r;return e},e.objectSize=function(t){return Object.keys(t).length},e.setVerbosityLevel=function(t){Number.isInteger(t)&&(n=t)},e.shadow=a,e.string32=function(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)},e.stringToBytes=c,e.stringToPDFString=function(t){if(t[0]>="ï"){let e;if("þ"===t[0]&&"ÿ"===t[1]?e="utf-16be":"ÿ"===t[0]&&"þ"===t[1]?e="utf-16le":"ï"===t[0]&&"»"===t[1]&&"¿"===t[2]&&(e="utf-8"),e)try{const i=new TextDecoder(e,{fatal:!0}),r=c(t);return i.decode(r)}catch(t){o(`stringToPDFString: "${t}".`)}}const e=[];for(let i=0,r=t.length;i<r;i++){const r=d[t.charCodeAt(i)];e.push(r?String.fromCharCode(r):t.charAt(i))}return e.join("")},e.stringToUTF16BEString=function(t){const e=["þÿ"];for(let i=0,r=t.length;i<r;i++){const r=t.charCodeAt(i);e.push(String.fromCharCode(r>>8&255),String.fromCharCode(255&r))}return e.join("")},e.stringToUTF8String=f,e.unreachable=s,e.utf8StringToString=function(t){return unescape(encodeURIComponent(t))},e.warn=o,i(2),e.IDENTITY_MATRIX=[1,0,0,1,0,0],e.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],e.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},e.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},e.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},e.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},e.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},e.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},e.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},e.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},e.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},e.AnnotationReplyType={GROUP:"Group",REPLY:"R"},e.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},e.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},e.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},e.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},e.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},e.PageActionEventType={O:"PageOpen",C:"PageClose"},e.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},e.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const r={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=r,e.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},e.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},e.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},e.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let n=r.WARNINGS;function o(t){n>=r.WARNINGS&&console.log(`Warning: ${t}`)}function s(t){throw new Error(t)}function a(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!1}),i}const l=function(){function t(e,i){this.constructor===t&&s("Cannot initialize BaseException."),this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();function c(t){"string"!=typeof t&&s("Invalid argument for stringToBytes");const e=t.length,i=new Uint8Array(e);for(let r=0;r<e;++r)i[r]=255&t.charCodeAt(r);return i}function h(t){return void 0!==t.length?t.length:void 0!==t.byteLength?t.byteLength:void s("Invalid argument for arrayByteLength")}e.BaseException=l,e.PasswordException=class extends l{constructor(t,e){super(t,"PasswordException"),this.code=e}},e.UnknownErrorException=class extends l{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}},e.InvalidPDFException=class extends l{constructor(t){super(t,"InvalidPDFException")}},e.MissingPDFException=class extends l{constructor(t){super(t,"MissingPDFException")}},e.UnexpectedResponseException=class extends l{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}},e.FormatError=class extends l{constructor(t){super(t,"FormatError")}},e.AbortException=class extends l{constructor(t){super(t,"AbortException")}},e.FeatureTest=class{static get isLittleEndian(){return a(this,"isLittleEndian",function(){const t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}static get isEvalSupported(){return a(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(t){return!1}}())}static get isOffscreenCanvasSupported(){return a(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}};const u=[...Array(256).keys()].map((t=>t.toString(16).padStart(2,"0")));class p{static makeHexColor(t,e,i){return`#${u[t]}${u[e]}${u[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[1],e[1]=i),e[0]*=t[0],e[1]*=t[0],t[3]<0&&(i=e[2],e[2]=e[3],e[3]=i),e[2]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[2],e[2]=i,i=e[1],e[1]=e[3],e[3]=i,t[1]<0&&(i=e[2],e[2]=e[3],e[3]=i),e[2]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[1],e[1]=i),e[0]*=t[2],e[1]*=t[2]),e[0]+=t[4],e[1]+=t[4],e[2]+=t[5],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i]}static getAxialAlignedBoundingBox(t,e){const i=p.applyTransform(t,e),r=p.applyTransform(t.slice(2,4),e),n=p.applyTransform([t[0],t[3]],e),o=p.applyTransform([t[2],t[1]],e);return[Math.min(i[0],r[0],n[0],o[0]),Math.min(i[1],r[1],n[1],o[1]),Math.max(i[0],r[0],n[0],o[0]),Math.max(i[1],r[1],n[1],o[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static apply3dTransform(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],r=t[0]*e[1]+t[1]*e[3],n=t[2]*e[0]+t[3]*e[2],o=t[2]*e[1]+t[3]*e[3],s=(i+o)/2,a=Math.sqrt((i+o)**2-4*(i*o-n*r))/2,l=s+a||1,c=s-a||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>r)return null;const n=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return n>o?null:[i,n,r,o]}static bezierBoundingBox(t,e,i,r,n,o,s,a){const l=[],c=[[],[]];let h,u,p,d,f,g,m,y;for(let c=0;c<2;++c)if(0===c?(u=6*t-12*i+6*n,h=-3*t+9*i-9*n+3*s,p=3*i-3*t):(u=6*e-12*r+6*o,h=-3*e+9*r-9*o+3*a,p=3*r-3*e),Math.abs(h)<1e-12){if(Math.abs(u)<1e-12)continue;d=-p/u,0<d&&d<1&&l.push(d)}else m=u*u-4*p*h,y=Math.sqrt(m),m<0||(f=(-u+y)/(2*h),0<f&&f<1&&l.push(f),g=(-u-y)/(2*h),0<g&&g<1&&l.push(g));let v,b=l.length;const w=b;for(;b--;)d=l[b],v=1-d,c[0][b]=v*v*v*t+3*v*v*d*i+3*v*d*d*n+d*d*d*s,c[1][b]=v*v*v*e+3*v*v*d*r+3*v*d*d*o+d*d*d*a;return c[0][w]=t,c[1][w]=e,c[0][w+1]=s,c[1][w+1]=a,c[0].length=c[1].length=w+2,[Math.min(...c[0]),Math.min(...c[1]),Math.max(...c[0]),Math.max(...c[1])]}}e.Util=p;const d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function f(t){return decodeURIComponent(escape(t))}},(t,e,i)=>{i(3)},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;const i=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);e.isNodeJS=i},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(13),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(14),_metadata=__w_pdfjs_require__(15),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_xfa_text=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:t,NodeCMapReaderFactory:e,NodeStandardFontDataFactory:i}=__w_pdfjs_require__(19);exports.DefaultCanvasFactory=DefaultCanvasFactory=t,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=e,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=i}function setPDFNetworkStreamFactory(t){createPDFNetworkStream=t}function getDocument(t){const e=new PDFDocumentLoadingTask;let i;if("string"==typeof t||t instanceof URL)i={url:t};else if((0,_util.isArrayBuffer)(t))i={data:t};else if(t instanceof PDFDataRangeTransport)i={range:t};else{if("object"!=typeof t)throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");i=t}const r=Object.create(null);let n=null,o=null;for(const t in i){const e=i[t];switch(t){case"url":if("undefined"!=typeof window)try{r[t]=new URL(e,window.location).href;continue}catch(t){(0,_util.warn)(`Cannot create valid URL: "${t}".`)}else if("string"==typeof e||e instanceof URL){r[t]=e.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":n=e;continue;case"worker":o=e;continue;case"data":if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&e instanceof Buffer)r[t]=new Uint8Array(e);else{if(e instanceof Uint8Array)break;if("string"==typeof e)r[t]=(0,_util.stringToBytes)(e);else if("object"!=typeof e||null===e||isNaN(e.length)){if(!(0,_util.isArrayBuffer)(e))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");r[t]=new Uint8Array(e)}else r[t]=new Uint8Array(e)}continue}r[t]=e}if(r.CMapReaderFactory=r.CMapReaderFactory||DefaultCMapReaderFactory,r.StandardFontDataFactory=r.StandardFontDataFactory||DefaultStandardFontDataFactory,r.ignoreErrors=!0!==r.stopAtErrors,r.fontExtraProperties=!0===r.fontExtraProperties,r.pdfBug=!0===r.pdfBug,r.enableXfa=!0===r.enableXfa,(!Number.isInteger(r.rangeChunkSize)||r.rangeChunkSize<1)&&(r.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof r.docBaseUrl||(0,_display_utils.isDataScheme)(r.docBaseUrl))&&(r.docBaseUrl=null),(!Number.isInteger(r.maxImageSize)||r.maxImageSize<-1)&&(r.maxImageSize=-1),"string"!=typeof r.cMapUrl&&(r.cMapUrl=null),"string"!=typeof r.standardFontDataUrl&&(r.standardFontDataUrl=null),"boolean"!=typeof r.useWorkerFetch&&(r.useWorkerFetch=r.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&r.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof r.isEvalSupported&&(r.isEvalSupported=!0),"boolean"!=typeof r.disableFontFace&&(r.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof r.useSystemFonts&&(r.useSystemFonts=!_is_node.isNodeJS&&!r.disableFontFace),"object"==typeof r.ownerDocument&&null!==r.ownerDocument||(r.ownerDocument=globalThis.document),"boolean"!=typeof r.disableRange&&(r.disableRange=!1),"boolean"!=typeof r.disableStream&&(r.disableStream=!1),"boolean"!=typeof r.disableAutoFetch&&(r.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(r.verbosity),!o){const t={verbosity:r.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};o=t.port?PDFWorker.fromPort(t):new PDFWorker(t),e._worker=o}const s=e.docId;return o.promise.then((function(){if(e.destroyed)throw new Error("Loading aborted");const t=_fetchDocument(o,r,n,s),i=new Promise((function(t){let e;n?e=new _transport_stream.PDFDataTransportStream({length:r.length,initialData:r.initialData,progressiveDone:r.progressiveDone,contentDispositionFilename:r.contentDispositionFilename,disableRange:r.disableRange,disableStream:r.disableStream},n):r.data||(e=createPDFNetworkStream({url:r.url,length:r.length,httpHeaders:r.httpHeaders,withCredentials:r.withCredentials,rangeChunkSize:r.rangeChunkSize,disableRange:r.disableRange,disableStream:r.disableStream})),t(e)}));return Promise.all([t,i]).then((function([t,i]){if(e.destroyed)throw new Error("Loading aborted");const n=new _message_handler.MessageHandler(s,t,o.port),a=new WorkerTransport(n,e,i,r);e._transport=a,n.send("Ready",null)}))})).catch(e._capability.reject),e}async function _fetchDocument(t,e,i,r){if(t.destroyed)throw new Error("Worker was destroyed");i&&(e.length=i.length,e.initialData=i.initialData,e.progressiveDone=i.progressiveDone,e.contentDispositionFilename=i.contentDispositionFilename);const n=await t.messageHandler.sendWithPromise("GetDocRequest",{docId:r,apiVersion:"2.14.305",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,docBaseUrl:e.docBaseUrl,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties,enableXfa:e.enableXfa,useSystemFonts:e.useSystemFonts,cMapUrl:e.useWorkerFetch?e.cMapUrl:null,standardFontDataUrl:e.useWorkerFetch?e.standardFontDataUrl:null});if(t.destroyed)throw new Error("Worker was destroyed");return n}class PDFDocumentLoadingTask{static#t=0;constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+PDFDocumentLoadingTask.#t++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0,await(this._transport?.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(t,e,i=!1,r=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then((()=>{for(const i of this._progressListeners)i(t,e)}))}onDataProgressiveRead(t){this._readyCapability.promise.then((()=>{for(const e of this._progressiveReadListeners)e(t)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const t of this._progressiveDoneListeners)t()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,e){this._pdfInfo=t,this._transport=e,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(t,e,i,r,n=!1){this._pageIndex=t,this._pageInfo=e,this._ownerDocument=r,this._transport=i,this._stats=n?new _display_utils.StatTimer:null,this._pdfBug=n,this.commonObjs=i.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:n=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:n})}getAnnotations({intent:t="display"}={}){const e=this._transport.getRenderingIntent(t);let i=this._annotationPromises.get(e.cacheKey);return i||(i=this._transport.getAnnotations(this._pageIndex,e.renderingIntent),this._annotationPromises.set(e.cacheKey,i),i=i.then((t=>{for(const e of t)void 0!==e.titleObj&&Object.defineProperty(e,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),e.titleObj.str)}),void 0!==e.contentsObj&&Object.defineProperty(e,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),e.contentsObj.str)});return t}))),i}getJSActions(){return this._jsActionsPromise||=this._transport.getPageJSActions(this._pageIndex)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:r=_util.AnnotationMode.ENABLE,transform:n=null,imageLayer:o=null,canvasFactory:s=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:h=null}){void 0!==arguments[0]?.renderInteractiveForms&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&r===_util.AnnotationMode.ENABLE&&(r=_util.AnnotationMode.ENABLE_FORMS)),void 0!==arguments[0]?.includeAnnotationStorage&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&r===_util.AnnotationMode.ENABLE&&(r=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const u=this._transport.getRenderingIntent(i,r);this.pendingCleanup=!1,l||(l=this._transport.getOptionalContentConfig());let p=this._intentStates.get(u.cacheKey);p||(p=Object.create(null),this._intentStates.set(u.cacheKey,p)),p.streamReaderCancelTimeout&&(clearTimeout(p.streamReaderCancelTimeout),p.streamReaderCancelTimeout=null);const d=s||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),f=!!(u.renderingIntent&_util.RenderingIntentFlag.PRINT);p.displayReadyCapability||(p.displayReadyCapability=(0,_util.createPromiseCapability)(),p.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(u));const g=t=>{p.renderTasks.delete(m),(this.cleanupAfterRender||f)&&(this.pendingCleanup=!0),this._tryCleanup(),t?(m.capability.reject(t),this._abortOperatorList({intentState:p,reason:t instanceof Error?t:new Error(t)})):m.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},m=new InternalRenderTask({callback:g,params:{canvasContext:t,viewport:e,transform:n,imageLayer:o,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:p.operatorList,pageIndex:this._pageIndex,canvasFactory:d,useRequestAnimationFrame:!f,pdfBug:this._pdfBug,pageColors:h});(p.renderTasks||=new Set).add(m);const y=m.task;return Promise.all([p.displayReadyCapability.promise,l]).then((([t,e])=>{this.pendingCleanup?g():(this._stats&&this._stats.time("Rendering"),m.initializeGraphics({transparency:t,optionalContentConfig:e}),m.operatorListChanged())})).catch(g),y}getOperatorList({intent:t="display",annotationMode:e=_util.AnnotationMode.ENABLE}={}){const i=this._transport.getRenderingIntent(t,e,!0);let r,n=this._intentStates.get(i.cacheKey);return n||(n=Object.create(null),this._intentStates.set(i.cacheKey,n)),n.opListReadCapability||(r=Object.create(null),r.operatorListChanged=function(){n.operatorList.lastChunk&&(n.opListReadCapability.resolve(n.operatorList),n.renderTasks.delete(r))},n.opListReadCapability=(0,_util.createPromiseCapability)(),(n.renderTasks||=new Set).add(r),n.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(i)),n.opListReadCapability.promise}streamTextContent({disableCombineTextItems:t=!1,includeMarkedContent:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==t,includeMarkedContent:!0===e},{highWaterMark:100,size:t=>t.items.length})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then((t=>_xfa_text.XfaText.textContent(t)));const e=this.streamTextContent(t);return new Promise((function(t,i){const r=e.getReader(),n={items:[],styles:Object.create(null)};!function e(){r.read().then((function({value:i,done:r}){r?t(n):(Object.assign(n.styles,i.styles),n.items.push(...i.items),e())}),i)}()}))}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();this.objs.clear();for(const t of this._bitmaps)t.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(t)}cleanup(t=!1){return this.pendingCleanup=!0,this._tryCleanup(t)}_tryCleanup(t=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,t&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const t of this._bitmaps)t.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats&&this._stats.timeEnd("Page Request"),i.displayReadyCapability&&i.displayReadyCapability.resolve(t))}_renderPageChunk(t,e){for(let i=0,r=t.length;i<r;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk;for(const t of e.renderTasks)t.operatorListChanged();t.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:t,cacheKey:e}){const i=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:t&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),r=this._intentStates.get(e);r.streamReader=i;const n=()=>{i.read().then((({value:t,done:e})=>{e?r.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,r),n())}),(t=>{if(r.streamReader=null,!this._transport.destroyed){if(r.operatorList){r.operatorList.lastChunk=!0;for(const t of r.renderTasks)t.operatorListChanged();this._tryCleanup()}if(r.displayReadyCapability)r.displayReadyCapability.reject(t);else{if(!r.opListReadCapability)throw t;r.opListReadCapability.reject(t)}}}))};n()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(!i){if(t.renderTasks.size>0)return;if(e instanceof _display_utils.RenderingCancelledException)return void(t.streamReaderCancelTimeout=setTimeout((()=>{this._abortOperatorList({intentState:t,reason:e,force:!0}),t.streamReaderCancelTimeout=null}),RENDERING_CANCELLED_TIMEOUT))}if(t.streamReader.cancel(new _util.AbortException(e.message)).catch((()=>{})),t.streamReader=null,!this._transport.destroyed){for(const[e,i]of this._intentStates)if(i===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(t,e){const i={data:structuredClone(t,e)};this._deferred.then((()=>{for(const t of this._listeners)t.call(this,i)}))}addEventListener(t,e){this._listeners.push(e)}removeEventListener(t,e){const i=this._listeners.indexOf(e);this._listeners.splice(i,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const t=document?.currentScript?.src;t&&(PDFWorkerUtil.fallbackWorkerSrc=t.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(t,e){let i;try{if(i=new URL(t),!i.origin||"null"===i.origin)return!1}catch(t){return!1}const r=new URL(e,i);return i.origin===r.origin},PDFWorkerUtil.createCDNWrapper=function(t){const e=`importScripts("${t}");`;return URL.createObjectURL(new Blob([e]))};class PDFWorker{static#e=new WeakMap;constructor({name:t=null,port:e=null,verbosity:i=(0,_util.getVerbosityLevel)()}={}){if(e&&PDFWorker.#e.has(e))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,e)return PDFWorker.#e.set(e,this),void this._initializeFromPort(e);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new _message_handler.MessageHandler("main","worker",t),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve()}_initialize(){if("undefined"!=typeof Worker&&!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let t=PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,t)||(t=PDFWorkerUtil.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t),i=new _message_handler.MessageHandler("main","worker",e),r=()=>{e.removeEventListener("error",n),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},n=()=>{this._webWorker||r()};e.addEventListener("error",n),i.on("test",(t=>{e.removeEventListener("error",n),this.destroyed?r():t?(this._messageHandler=i,this._port=e,this._webWorker=e,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),i.destroy(),e.terminate())})),i.on("ready",(t=>{if(e.removeEventListener("error",n),this.destroyed)r();else try{o()}catch(t){this._setupFakeWorker()}}));const o=()=>{const t=new Uint8Array;i.send("test",t,[t.buffer])};return void o()}catch(t){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then((t=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const e=new LoopbackPort;this._port=e;const i="fake"+PDFWorkerUtil.fakeWorkerId++,r=new _message_handler.MessageHandler(i+"_worker",i,e);t.setup(r,e);const n=new _message_handler.MessageHandler(i,i+"_worker",e);this._messageHandler=n,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})})).catch((t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))}))}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this.#e.has(t.port)?this.#e.get(t.port):new PDFWorker(t)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch(t){return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{#i=null;#r=new Map;#n=new Map;#o=null;constructor(t,e,i,r){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:e.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this._params=r,r.useWorkerFetch||(this.CMapReaderFactory=new r.CMapReaderFactory({baseUrl:r.cMapUrl,isCompressed:r.cMapPacked}),this.StandardFontDataFactory=new r.StandardFontDataFactory({baseUrl:r.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return this.#i}getRenderingIntent(t,e=_util.AnnotationMode.ENABLE,i=!1){let r=_util.RenderingIntentFlag.DISPLAY,n="";switch(t){case"any":r=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":r=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${t}`)}switch(e){case _util.AnnotationMode.DISABLE:r+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:r+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:r+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,n=this.annotationStorage.hash;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${e}`)}return i&&(r+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:r,cacheKey:`${r}_${n}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const e of this.#r.values())t.push(e._destroy());this.#r.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then((()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#o=null,this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",((t,e)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=()=>{this._fullReader.read().then((function({value:t,done:i}){i?e.close():((0,_util.assert)((0,_util.isArrayBuffer)(t),"GetReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{this._fullReader.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}})),t.on("ReaderHeadersReady",(t=>{const i=(0,_util.createPromiseCapability)(),r=this._fullReader;return r.headersReady.then((()=>{r.isStreamingSupported&&r.isRangeSupported||(this._lastProgress&&e.onProgress?.(this._lastProgress),r.onProgress=t=>{e.onProgress?.({loaded:t.loaded,total:t.total})}),i.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})}),i.reject),i.promise})),t.on("GetRangeReader",((t,e)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(t.begin,t.end);i?(e.onPull=()=>{i.read().then((function({value:t,done:i}){i?e.close():((0,_util.assert)((0,_util.isArrayBuffer)(t),"GetRangeReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{i.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}):e.close()})),t.on("GetDoc",(({pdfInfo:t})=>{this._numPages=t.numPages,this._htmlForXfa=t.htmlForXfa,delete t.htmlForXfa,e._capability.resolve(new PDFDocumentProxy(t,this))})),t.on("DocException",(function(t){let i;switch(t.name){case"PasswordException":i=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":i=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":i=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":i=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":i=new _util.UnknownErrorException(t.message,t.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}e._capability.reject(i)})),t.on("PasswordRequest",(t=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),e.onPassword){const i=t=>{t instanceof Error?this._passwordCapability.reject(t):this._passwordCapability.resolve({password:t})};try{e.onPassword(i,t.code)}catch(t){this._passwordCapability.reject(t)}}else this._passwordCapability.reject(new _util.PasswordException(t.message,t.code));return this._passwordCapability.promise})),t.on("DataLoaded",(t=>{e.onProgress?.({loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)})),t.on("StartRenderPage",(t=>{this.destroyed||this.#r.get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)})),t.on("commonobj",(([e,i,r])=>{if(!this.destroyed&&!this.commonObjs.has(e))switch(i){case"Font":const n=this._params;if("error"in r){const t=r.error;(0,_util.warn)(`Error during font loading: ${t}`),this.commonObjs.resolve(e,t);break}let o=null;n.pdfBug&&globalThis.FontInspector?.enabled&&(o={registerFont(t,e){globalThis.FontInspector.fontAdded(t,e)}});const s=new _font_loader.FontFaceObject(r,{isEvalSupported:n.isEvalSupported,disableFontFace:n.disableFontFace,ignoreErrors:n.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:o});this.fontLoader.bind(s).catch((i=>t.sendWithPromise("FontFallback",{id:e}))).finally((()=>{!n.fontExtraProperties&&s.data&&(s.data=null),this.commonObjs.resolve(e,s)}));break;case"FontPath":case"Image":this.commonObjs.resolve(e,r);break;default:throw new Error(`Got unknown common object type ${i}`)}})),t.on("obj",(([t,e,i,r])=>{if(this.destroyed)return;const n=this.#r.get(e);if(!n.objs.has(t))switch(i){case"Image":n.objs.resolve(t,r);const e=8e6;if(r){let t;if(r.bitmap){const{bitmap:e,width:i,height:o}=r;t=i*o*4,n._bitmaps.add(e)}else t=r.data?.length||0;t>e&&(n.cleanupAfterRender=!0)}break;case"Pattern":n.objs.resolve(t,r);break;default:throw new Error(`Got unknown object type ${i}`)}})),t.on("DocProgress",(t=>{this.destroyed||e.onProgress?.({loaded:t.loaded,total:t.total})})),t.on("DocStats",(t=>{this.destroyed||(this.#i=Object.freeze({streamTypes:Object.freeze(t.streamTypes),fontTypes:Object.freeze(t.fontTypes)}))})),t.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),t.on("FetchBuiltInCMap",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(t):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.")))),t.on("FetchStandardFontData",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(t):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}_onUnsupportedFeature({featureId:t}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(t)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#n.get(e);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then((t=>{if(this.destroyed)throw new Error("Transport destroyed");const i=new PDFPageProxy(e,t,this,this._params.ownerDocument,this._params.pdfBug);return this.#r.set(e,i),i}));return this.#n.set(e,r),r}getPageIndex(t){return"object"!=typeof t||null===t||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}saveDocument(){return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally((()=>{this.annotationStorage.resetModified()}))}getFieldObjects(){return this._getFieldObjectsPromise||=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((t=>new _optional_content_config.OptionalContentConfig(t)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.#o||=this.messageHandler.sendWithPromise("GetMetadata",null).then((t=>({info:t[0],metadata:t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const t of this.#r.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#o=null,this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const t=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,enableXfa:t.enableXfa})}}class PDFObjects{#s=Object.create(null);#a(t){const e=this.#s[t];return e||(this.#s[t]={capability:(0,_util.createPromiseCapability)(),data:null})}get(t,e=null){if(e){const i=this.#a(t);return i.capability.promise.then((()=>e(i.data))),null}const i=this.#s[t];if(!i?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){return this.#s[t]?.capability.settled||!1}resolve(t,e=null){const i=this.#a(t);i.data=e,i.capability.resolve()}clear(){this.#s=Object.create(null)}}class RenderTask{constructor(t){this._internalRenderTask=t,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;class InternalRenderTask{static#l=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:r,annotationCanvasMap:n,operatorList:o,pageIndex:s,canvasFactory:a,useRequestAnimationFrame:l=!1,pdfBug:c=!1,pageColors:h=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=n,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=s,this.canvasFactory=a,this._pdfBug=c,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===l&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#l.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#l.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:r,transform:n,imageLayer:o,background:s}=this.params;this.gfx=new _canvas.CanvasGraphics(i,this.commonObjs,this.objs,this.canvasFactory,o,e,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:n,viewport:r,transparency:t,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(t=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&InternalRenderTask.#l.delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame((()=>{this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&InternalRenderTask.#l.delete(this._canvas),this.callback())))}}const version="2.14.305";exports.version=version;const build="eaaa8b4ad";exports.build=build},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=function(t){console.log("Deprecated API usage: "+t)},e.getFilenameFromUrl=function(t){const e=t.indexOf("#"),i=t.indexOf("?"),r=Math.min(e>0?e:t.length,i>0?i:t.length);return t.substring(t.lastIndexOf("/",r)+1,r)},e.getPdfFilenameFromUrl=function(t,e="document.pdf"){if("string"!=typeof t)return e;if(d(t))return(0,n.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t);let o=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(o&&(o=o[0],o.includes("%")))try{o=i.exec(decodeURIComponent(o))[0]}catch(t){}return o||e},e.getXfaPageViewport=function(t,{scale:e=1,rotation:i=0}){const{width:r,height:n}=t.attributes.style,o=[0,0,parseInt(r),parseInt(n)];return new u({viewBox:o,scale:e,rotation:i})},e.isDataScheme=d,e.isPdfFile=function(t){return"string"==typeof t&&/\.pdf$/i.test(t)},e.isValidFetchUrl=f,e.loadScript=function(t,e=!1){return new Promise(((i,r)=>{const n=document.createElement("script");n.src=t,n.onload=function(t){e&&n.remove(),i(t)},n.onerror=function(){r(new Error(`Cannot load script at: ${n.src}`))},(document.head||document.documentElement).appendChild(n)}))};var r=i(6),n=i(1);class o{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}e.PixelsPerInch=o;class s extends r.BaseCanvasFactory{constructor({ownerDocument:t=globalThis.document}={}){super(),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}async function a(t,e=!1){if(f(t,document.baseURI)){const i=await fetch(t);if(!i.ok)throw new Error(i.statusText);return e?new Uint8Array(await i.arrayBuffer()):(0,n.stringToBytes)(await i.text())}return new Promise(((i,r)=>{const o=new XMLHttpRequest;o.open("GET",t,!0),e&&(o.responseType="arraybuffer"),o.onreadystatechange=()=>{if(o.readyState===XMLHttpRequest.DONE){if(200===o.status||0===o.status){let t;if(e&&o.response?t=new Uint8Array(o.response):!e&&o.responseText&&(t=(0,n.stringToBytes)(o.responseText)),t)return void i(t)}r(new Error(o.statusText))}},o.send(null)}))}e.DOMCanvasFactory=s;class l extends r.BaseCMapReaderFactory{_fetchData(t,e){return a(t,this.isCompressed).then((t=>({cMapData:t,compressionType:e})))}}e.DOMCMapReaderFactory=l;class c extends r.BaseStandardFontDataFactory{_fetchData(t){return a(t,!0)}}e.DOMStandardFontDataFactory=c;class h extends r.BaseSVGFactory{_createSVG(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}}e.DOMSVGFactory=h;class u{constructor({viewBox:t,scale:e,rotation:i,offsetX:r=0,offsetY:n=0,dontFlip:o=!1}){this.viewBox=t,this.scale=e,this.rotation=i,this.offsetX=r,this.offsetY=n;const s=(t[2]+t[0])/2,a=(t[3]+t[1])/2;let l,c,h,u,p,d,f,g;switch((i%=360)<0&&(i+=360),i){case 180:l=-1,c=0,h=0,u=1;break;case 90:l=0,c=1,h=1,u=0;break;case 270:l=0,c=-1,h=-1,u=0;break;case 0:l=1,c=0,h=0,u=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(h=-h,u=-u),0===l?(p=Math.abs(a-t[1])*e+r,d=Math.abs(s-t[0])*e+n,f=Math.abs(t[3]-t[1])*e,g=Math.abs(t[2]-t[0])*e):(p=Math.abs(s-t[0])*e+r,d=Math.abs(a-t[1])*e+n,f=Math.abs(t[2]-t[0])*e,g=Math.abs(t[3]-t[1])*e),this.transform=[l*e,c*e,h*e,u*e,p-l*e*s-h*e*a,d-c*e*s-u*e*a],this.width=f,this.height=g}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:n=!1}={}){return new u({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:n})}convertToViewportPoint(t,e){return n.Util.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=n.Util.applyTransform([t[0],t[1]],this.transform),i=n.Util.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return n.Util.applyInverseTransform([t,e],this.transform)}}e.PageViewport=u;class p extends n.BaseException{constructor(t,e){super(t,"RenderingCancelledException"),this.type=e}}function d(t){const e=t.length;let i=0;for(;i<e&&""===t[i].trim();)i++;return"data:"===t.substring(i,i+5).toLowerCase()}function f(t,e){try{const{protocol:i}=e?new URL(t,e):new URL(t);return"http:"===i||"https:"===i}catch(t){return!1}}let g;e.RenderingCancelledException=p,e.StatTimer=class{constructor(){this.started=Object.create(null),this.times=[]}time(t){t in this.started&&(0,n.warn)(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||(0,n.warn)(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const t of this.times){const i=t.name;i.length>e&&(e=i.length)}for(const i of this.times){const r=i.end-i.start;t.push(`${i.name.padEnd(e)} ${r}ms\n`)}return t.join("")}},e.PDFDateString=class{static toDateObject(t){if(!t||"string"!=typeof t)return null;g||(g=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=g.exec(t);if(!e)return null;const i=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let n=parseInt(e[3],10);n=n>=1&&n<=31?n:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let s=parseInt(e[5],10);s=s>=0&&s<=59?s:0;let a=parseInt(e[6],10);a=a>=0&&a<=59?a:0;const l=e[7]||"Z";let c=parseInt(e[8],10);c=c>=0&&c<=23?c:0;let h=parseInt(e[9],10)||0;return h=h>=0&&h<=59?h:0,"-"===l?(o+=c,s+=h):"+"===l&&(o-=c,s-=h),new Date(Date.UTC(i,r,n,o,s,a))}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var r=i(1);class n{constructor(){this.constructor===n&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d")}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=n;class o{constructor({baseUrl:t=null,isCompressed:e=!1}){this.constructor===o&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),i=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(e,i).catch((t=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)}))}_fetchData(t,e){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=o;class s{constructor({baseUrl:t=null}){this.constructor===s&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetchData(e).catch((t=>{throw new Error(`Unable to load font data at: ${e}`)}))}_fetchData(t){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=s;class a{constructor(){this.constructor===a&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(t,e){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if("string"!=typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){(0,r.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=a},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var r=i(1);class n{constructor({docId:t,onUnsupportedFeature:e,ownerDocument:i=globalThis.document,styleElement:o=null}){this.constructor===n&&(0,r.unreachable)("Cannot initialize BaseFontLoader."),this.docId=t,this._onUnsupportedFeature=e,this._document=i,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(t){this.nativeFontFaces.push(t),this._document.fonts.add(t)}insertRule(t){let e=this.styleElement;e||(e=this.styleElement=this._document.createElement("style"),e.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(e));const i=e.sheet;i.insertRule(t,i.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(t){if(t.attached||t.missingFile)return;if(t.attached=!0,this.isFontLoadingAPISupported){const e=t.createNativeFontFace();if(e){this.addNativeFontFace(e);try{await e.loaded}catch(i){throw this._onUnsupportedFeature({featureId:r.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,r.warn)(`Failed to load font '${e.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise((i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent([e],[t],r)}))}}_queueLoadingCallback(t){(0,r.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return(0,r.shadow)(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){(0,r.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,r.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(t,e,i){(0,r.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let o;e.FontLoader=o,e.FontLoader=o=class extends n{constructor(t){super(t),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let t=!1;return("undefined"==typeof navigator||/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent)?.[1]>=14)&&(t=!0),(0,r.shadow)(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){const e=this.loadingContext,i={id:"pdfjs-font-loading-"+e.nextRequestId++,done:!1,complete:function(){for((0,r.assert)(!i.done,"completeRequest() cannot be called twice."),i.done=!0;e.requests.length>0&&e.requests[0].done;){const t=e.requests.shift();setTimeout(t.callback,0)}},callback:t};return e.requests.push(i),i}get _loadTestFont(){return(0,r.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(t,e,i){function n(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function o(t,e,i,r){return t.substring(0,e)+r+t.substring(e+i)}let s,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let h=0;const u=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=o(p,976,u.length,u);const d=1482184792;let f=n(p,16);for(s=0,a=u.length-3;s<a;s+=4)f=f-d+n(u,s)|0;s<u.length&&(f=f-d+n(u+"XXX",s)|0),p=o(p,16,4,(0,r.string32)(f));const g=`@font-face {font-family:"${u}";src:url(data:font/opentype;base64,${btoa(p)});}`;this.insertRule(g);const m=[];for(const t of e)m.push(t.loadedName);m.push(u);const y=this._document.createElement("div");y.style.visibility="hidden",y.style.width=y.style.height="10px",y.style.position="absolute",y.style.top=y.style.left="0px";for(const t of m){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=t,y.appendChild(e)}this._document.body.appendChild(y),function t(e,i){if(h++,h>30)return(0,r.warn)("Load test font never loaded."),void i();c.font="30px "+e,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0?i():setTimeout(t.bind(null,e,i))}(u,(()=>{y.remove(),i.complete()}))}},e.FontFaceObject=class{constructor(t,{isEvalSupported:e=!0,disableFontFace:i=!1,ignoreErrors:r=!1,onUnsupportedFeature:n,fontRegistry:o=null}){this.compiledGlyphs=Object.create(null);for(const e in t)this[e]=t[e];this.isEvalSupported=!1!==e,this.disableFontFace=!0===i,this.ignoreErrors=!0===r,this._onUnsupportedFeature=n,this.fontRegistry=o}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=(0,r.bytesToString)(this.data),e=`url(data:${this.mimetype};base64,${btoa(t)});`;let i;if(this.cssFontInfo){let t=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(t+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${t}src:${e}}`}else i=`@font-face {font-family:"${this.loadedName}";src:${e}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,e),i}getPathGenerator(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];let i;try{i=t.get(this.loadedName+"_path_"+e)}catch(t){if(!this.ignoreErrors)throw t;return this._onUnsupportedFeature({featureId:r.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,r.warn)(`getPathGenerator - ignoring character: "${t}".`),this.compiledGlyphs[e]=function(t,e){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){const t=[];for(const e of i){const i=void 0!==e.args?e.args.join(","):"";t.push("c.",e.cmd,"(",i,");\n")}return this.compiledGlyphs[e]=new Function("c","size",t.join(""))}return this.compiledGlyphs[e]=function(t,e){for(const r of i)"scale"===r.cmd&&(r.args=[e,-e]),t[r.cmd].apply(t,r.args)}}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationStorage=void 0;var r=i(9),n=i(1);e.AnnotationStorage=class{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(t,e){const i=this._storage.get(t);return void 0===i?e:Object.assign(e,i)}getRawValue(t){return this._storage.get(t)}setValue(t,e){const i=this._storage.get(t);let r=!1;if(void 0!==i)for(const[t,n]of Object.entries(e))i[t]!==n&&(r=!0,i[t]=n);else r=!0,this._storage.set(t,e);r&&this._setModified()}getAll(){return this._storage.size>0?(0,n.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get hash(){const t=new r.MurmurHash3_64;for(const[e,i]of this._storage)t.update(`${e}:${JSON.stringify(i)}`);return t.hexdigest()}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var r=i(1);const n=3285377520,o=4294901760,s=65535;e.MurmurHash3_64=class{constructor(t){this.h1=t?4294967295&t:n,this.h2=t?4294967295&t:n}update(t){let e,i;if("string"==typeof t){e=new Uint8Array(2*t.length),i=0;for(let r=0,n=t.length;r<n;r++){const n=t.charCodeAt(r);n<=255?e[i++]=n:(e[i++]=n>>>8,e[i++]=255&n)}}else{if(!(0,r.isArrayBuffer)(t))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");e=t.slice(),i=e.byteLength}const n=i>>2,a=i-4*n,l=new Uint32Array(e.buffer,0,n);let c=0,h=0,u=this.h1,p=this.h2;const d=3432918353,f=461845907,g=11601,m=13715;for(let t=0;t<n;t++)1&t?(c=l[t],c=c*d&o|c*g&s,c=c<<15|c>>>17,c=c*f&o|c*m&s,u^=c,u=u<<13|u>>>19,u=5*u+3864292196):(h=l[t],h=h*d&o|h*g&s,h=h<<15|h>>>17,h=h*f&o|h*m&s,p^=h,p=p<<13|p>>>19,p=5*p+3864292196);switch(c=0,a){case 3:c^=e[4*n+2]<<16;case 2:c^=e[4*n+1]<<8;case 1:c^=e[4*n],c=c*d&o|c*g&s,c=c<<15|c>>>17,c=c*f&o|c*m&s,1&n?u^=c:p^=c}this.h1=u,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;t^=e>>>1,t=3981806797*t&o|36045*t&s,e=4283543511*e&o|(2950163797*(e<<16|t>>>16)&o)>>>16,t^=e>>>1,t=444984403*t&o|60499*t&s,e=3301882366*e&o|(3120437893*(e<<16|t>>>16)&o)>>>16,t^=e>>>1;const i=(t>>>0).toString(16),r=(e>>>0).toString(16);return i.padStart(8,"0")+r.padStart(8,"0")}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var r=i(1),n=i(11),o=i(12),s=i(3),a=i(5);const l=4096,c=16;function h(t){if(t._transformStack&&(t._transformStack=[]),!t.mozCurrentTransform){t._originalSave=t.save,t._originalRestore=t.restore,t._originalRotate=t.rotate,t._originalScale=t.scale,t._originalTranslate=t.translate,t._originalTransform=t.transform,t._originalSetTransform=t.setTransform,t._originalResetTransform=t.resetTransform,t._transformMatrix=t._transformMatrix||[1,0,0,1,0,0],t._transformStack=[];try{const e=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t),"lineWidth");t._setLineWidth=e.set,t._getLineWidth=e.get,Object.defineProperty(t,"lineWidth",{set:function(t){this._setLineWidth(1.000001*t)},get:function(){return this._getLineWidth()}})}catch(t){}Object.defineProperty(t,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(t,"mozCurrentTransformInverse",{get:function(){const[t,e,i,r,n,o]=this._transformMatrix,s=t*r-e*i,a=e*i-t*r;return[r/s,e/a,i/a,t/s,(r*n-i*o)/a,(e*n-t*o)/s]}}),t.save=function(){const t=this._transformMatrix;this._transformStack.push(t),this._transformMatrix=t.slice(0,6),this._originalSave()},t.restore=function(){0===this._transformStack.length&&(0,r.warn)("Tried to restore a ctx when the stack was already empty.");const t=this._transformStack.pop();t&&(this._transformMatrix=t,this._originalRestore())},t.translate=function(t,e){const i=this._transformMatrix;i[4]=i[0]*t+i[2]*e+i[4],i[5]=i[1]*t+i[3]*e+i[5],this._originalTranslate(t,e)},t.scale=function(t,e){const i=this._transformMatrix;i[0]*=t,i[1]*=t,i[2]*=e,i[3]*=e,this._originalScale(t,e)},t.transform=function(e,i,r,n,o,s){const a=this._transformMatrix;this._transformMatrix=[a[0]*e+a[2]*i,a[1]*e+a[3]*i,a[0]*r+a[2]*n,a[1]*r+a[3]*n,a[0]*o+a[2]*s+a[4],a[1]*o+a[3]*s+a[5]],t._originalTransform(e,i,r,n,o,s)},t.setTransform=function(e,i,r,n,o,s){this._transformMatrix=[e,i,r,n,o,s],t._originalSetTransform(e,i,r,n,o,s)},t.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],t._originalResetTransform()},t.rotate=function(t){const e=Math.cos(t),i=Math.sin(t),r=this._transformMatrix;this._transformMatrix=[r[0]*e+r[2]*i,r[1]*e+r[3]*i,r[0]*-i+r[2]*e,r[1]*-i+r[3]*e,r[4],r[5]],this._originalRotate(t)}}}class u{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i,r){let n;return void 0!==this.cache[t]?(n=this.cache[t],this.canvasFactory.reset(n,e,i),n.context.setTransform(1,0,0,1,0,0)):(n=this.canvasFactory.create(e,i),this.cache[t]=n),r&&h(n.context),n}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function p(t,e,i,r,n,o,s,a,l,c){const[h,u,p,d,f,g]=t.mozCurrentTransform;if(0===u&&0===p){const m=s*h+f,y=Math.round(m),v=a*d+g,b=Math.round(v),w=(s+l)*h+f,x=Math.abs(Math.round(w)-y)||1,S=(a+c)*d+g,k=Math.abs(Math.round(S)-b)||1;return t.setTransform(Math.sign(h),0,0,Math.sign(d),y,b),t.drawImage(e,i,r,n,o,0,0,x,k),t.setTransform(h,u,p,d,f,g),[x,k]}if(0===h&&0===d){const m=a*p+f,y=Math.round(m),v=s*u+g,b=Math.round(v),w=(a+c)*p+f,x=Math.abs(Math.round(w)-y)||1,S=(s+l)*u+g,k=Math.abs(Math.round(S)-b)||1;return t.setTransform(0,Math.sign(u),Math.sign(p),0,y,b),t.drawImage(e,i,r,n,o,0,0,k,x),t.setTransform(h,u,p,d,f,g),[k,x]}return t.drawImage(e,i,r,n,o,s,a,l,c),[Math.hypot(h,u)*l,Math.hypot(p,d)*c]}class d{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=r.Util.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){const i=r.Util.applyTransform(e,t),n=r.Util.applyTransform(e.slice(2),t);this.minX=Math.min(this.minX,i[0],n[0]),this.minY=Math.min(this.minY,i[1],n[1]),this.maxX=Math.max(this.maxX,i[0],n[0]),this.maxY=Math.max(this.maxY,i[1],n[1])}updateScalingPathMinMax(t,e){r.Util.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.maxX=Math.max(this.maxX,e[1]),this.minY=Math.min(this.minY,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,n,o,s,a,l,c,h){const u=r.Util.bezierBoundingBox(e,i,n,o,s,a,l,c);if(h)return h[0]=Math.min(h[0],u[0],u[2]),h[1]=Math.max(h[1],u[0],u[2]),h[2]=Math.min(h[2],u[1],u[3]),void(h[3]=Math.max(h[3],u[1],u[3]));this.updateRectMinMax(t,u)}getPathBoundingBox(t=n.PathType.FILL,e=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===n.PathType.STROKE){e||(0,r.unreachable)("Stroke bounding box must include transform.");const t=r.Util.singularValueDecompose2dScale(e),n=t[0]*this.lineWidth/2,o=t[1]*this.lineWidth/2;i[0]-=n,i[1]-=o,i[2]+=n,i[3]+=o}return i}updateClipFromPath(){const t=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=n.PathType.FILL,e=null){return r.Util.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function f(t,e,i=null){if("undefined"!=typeof ImageData&&e instanceof ImageData)return void t.putImageData(e,0,0);const n=e.height,o=e.width,s=n%c,a=(n-s)/c,l=0===s?a:a+1,h=t.createImageData(o,c);let u,p=0;const d=e.data,f=h.data;let g,m,y,v,b,w,x,S;if(i)switch(i.length){case 1:b=i[0],w=i[0],x=i[0],S=i[0];break;case 4:b=i[0],w=i[1],x=i[2],S=i[3]}if(e.kind===r.ImageKind.GRAYSCALE_1BPP){const e=d.byteLength,i=new Uint32Array(f.buffer,0,f.byteLength>>2),n=i.length,v=o+7>>3;let b=4294967295,w=r.FeatureTest.isLittleEndian?4278190080:255;for(S&&255===S[0]&&0===S[255]&&([b,w]=[w,b]),g=0;g<l;g++){for(y=g<a?c:s,u=0,m=0;m<y;m++){const t=e-p;let r=0;const n=t>v?o:8*t-7,s=-8&n;let a=0,l=0;for(;r<s;r+=8)l=d[p++],i[u++]=128&l?b:w,i[u++]=64&l?b:w,i[u++]=32&l?b:w,i[u++]=16&l?b:w,i[u++]=8&l?b:w,i[u++]=4&l?b:w,i[u++]=2&l?b:w,i[u++]=1&l?b:w;for(;r<n;r++)0===a&&(l=d[p++],a=128),i[u++]=l&a?b:w,a>>=1}for(;u<n;)i[u++]=0;t.putImageData(h,0,g*c)}}else if(e.kind===r.ImageKind.RGBA_32BPP){const e=!!(b||w||x);for(m=0,v=o*c*4,g=0;g<a;g++){if(f.set(d.subarray(p,p+v)),p+=v,e)for(let t=0;t<v;t+=4)b&&(f[t+0]=b[f[t+0]]),w&&(f[t+1]=w[f[t+1]]),x&&(f[t+2]=x[f[t+2]]);t.putImageData(h,0,m),m+=c}if(g<l){if(v=o*s*4,f.set(d.subarray(p,p+v)),e)for(let t=0;t<v;t+=4)b&&(f[t+0]=b[f[t+0]]),w&&(f[t+1]=w[f[t+1]]),x&&(f[t+2]=x[f[t+2]]);t.putImageData(h,0,m)}}else{if(e.kind!==r.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${e.kind}`);{const e=!!(b||w||x);for(y=c,v=o*y,g=0;g<l;g++){for(g>=a&&(y=s,v=o*y),u=0,m=v;m--;)f[u++]=d[p++],f[u++]=d[p++],f[u++]=d[p++],f[u++]=255;if(e)for(let t=0;t<u;t+=4)b&&(f[t+0]=b[f[t+0]]),w&&(f[t+1]=w[f[t+1]]),x&&(f[t+2]=x[f[t+2]]);t.putImageData(h,0,g*c)}}}}function g(t,e){if(e.bitmap)return void t.drawImage(e.bitmap,0,0);const i=e.height,r=e.width,n=i%c,s=(i-n)/c,a=0===n?s:s+1,l=t.createImageData(r,c);let h=0;const u=e.data,p=l.data;for(let e=0;e<a;e++){const i=e<s?c:n;({srcPos:h}=(0,o.applyMaskImageData)({src:u,srcPos:h,dest:p,width:r,height:i})),t.putImageData(l,0,e*c)}}function m(t,e){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let r=0,n=i.length;r<n;r++){const n=i[r];void 0!==t[n]&&(e[n]=t[n])}void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function y(t,e){t.strokeStyle=t.fillStyle=e||"#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0)}function v(t,e,i,r){const n=t.length;for(let o=3;o<n;o+=4){const n=t[o];if(0===n)t[o-3]=e,t[o-2]=i,t[o-1]=r;else if(n<255){const s=255-n;t[o-3]=t[o-3]*n+e*s>>8,t[o-2]=t[o-2]*n+i*s>>8,t[o-1]=t[o-1]*n+r*s>>8}}}function b(t,e,i){const r=t.length;for(let n=3;n<r;n+=4){const r=i?i[t[n]]:t[n];e[n]=e[n]*r*.00392156862745098|0}}function w(t,e,i){const r=t.length;for(let n=3;n<r;n+=4){const r=77*t[n-3]+152*t[n-2]+28*t[n-1];e[n]=i?e[n]*i[r>>8]>>8:e[n]*r>>16}}function x(t,e,i,r){const n=r[0],o=r[1],s=r[2]-n,a=r[3]-o;0!==s&&0!==a&&(function(t,e,i,r,n,o,s,a,l,c,h){const u=!!o,p=u?o[0]:0,d=u?o[1]:0,f=u?o[2]:0;let g;g="Luminosity"===n?w:b;const m=Math.min(r,Math.ceil(1048576/i));for(let n=0;n<r;n+=m){const o=Math.min(m,r-n),y=t.getImageData(a-c,n+(l-h),i,o),b=e.getImageData(a,n+l,i,o);u&&v(y.data,p,d,f),g(y.data,b.data,s),e.putImageData(b,a,n+l)}}(e.context,i,s,a,e.subtype,e.backdrop,e.transferMap,n,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}function S(t,e){const i=r.Util.singularValueDecompose2dScale(t);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*a.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==e?e:i[0]<=n||i[1]<=n}const k=["butt","round","square"],C=["miter","round","bevel"],A={},_={};class T{constructor(t,e,i,r,n,o,s,a){this.ctx=t,this.current=new d(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=r,this.imageLayer=n,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=o,this.cachedCanvases=new u(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=s,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=a?.background||null,this.foregroundColor=a?.foreground||null,t&&h(t),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return"string"==typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:r=null}){const n=this.ctx.canvas.width,o=this.ctx.canvas.height,s=r||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const t=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const e=this.backgroundColor=this.ctx.fillStyle;let i=!0,r=s;if(this.ctx.fillStyle=s,r=this.ctx.fillStyle,i="string"==typeof r&&/^#[0-9A-Fa-f]{6}$/.test(r),"#000000"===t&&"#ffffff"===e||t===e||!i)this.foregroundColor=this.backgroundColor=null;else{const i=parseInt(r.slice(1),16),n=(i&&16711680)>>16,o=(i&&65280)>>8,s=i&&255,a=t=>(t/=255)<=.03928?t/12.92:((t+.055)/1.055)**2.4,l=Math.round(.2126*a(n)+.7152*a(o)+.0722*a(s));this.selectColor=(i,r,n)=>{const o=.2126*a(i)+.7152*a(r)+.0722*a(n);return Math.round(o)===l?e:t}}}if(this.ctx.fillStyle=this.backgroundColor||s,this.ctx.fillRect(0,0,n,o),this.ctx.restore(),i){const t=this.cachedCanvases.getCanvas("transparent",n,o,!0);this.compositeCtx=this.ctx,this.transparentCanvas=t.canvas,this.ctx=t.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),y(this.ctx,this.foregroundColor),t&&(this.ctx.transform.apply(this.ctx,t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform.apply(this.ctx,e.transform),this.viewportScale=e.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(t,e,i,n){const o=t.argsArray,s=t.fnArray;let a=e||0;const l=o.length;if(l===a)return a;const c=l-a>10&&"function"==typeof i,h=c?Date.now()+15:0;let u=0;const p=this.commonObjs,d=this.objs;let f;for(;;){if(void 0!==n&&a===n.nextBreakPoint)return n.breakIt(a,i),a;if(f=s[a],f!==r.OPS.dependency)this[f].apply(this,o[a]);else for(const t of o[a]){const e=t.startsWith("g_")?p:d;if(!e.has(t))return e.get(t,i),a}if(a++,a===l)return a;if(c&&++u>10){if(Date.now()>h)return i(),a;u=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(t,e){const i=t.width,r=t.height;let n,o,s=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),l=i,c=r,h="prescale1";for(;s>2&&l>1||a>2&&c>1;){let e=l,i=c;s>2&&l>1&&(e=Math.ceil(l/2),s/=l/e),a>2&&c>1&&(i=Math.ceil(c/2),a/=c/i),n=this.cachedCanvases.getCanvas(h,e,i,!1),o=n.context,o.clearRect(0,0,e,i),o.drawImage(t,0,0,l,c,0,0,e,i),t=n.canvas,l=e,c=i,h="prescale1"===h?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:o}=t,s=this.current.fillColor,a=this.current.patternFill,l=e.mozCurrentTransform;let c,h,u,d;if((t.bitmap||t.data)&&t.count>1){const e=t.bitmap||t.data.buffer,i=l.slice(0,4);h=JSON.stringify(a?i:[i,s]),c=this._cachedBitmapsMap.get(e),c||(c=new Map,this._cachedBitmapsMap.set(e,c));const r=c.get(h);if(r&&!a)return{canvas:r,offsetX:Math.round(Math.min(l[0],l[2])+l[4]),offsetY:Math.round(Math.min(l[1],l[3])+l[5])};u=r}u||(d=this.cachedCanvases.getCanvas("maskCanvas",i,o,!1),g(d.context,t));let f=r.Util.transform(l,[1/i,0,0,-1/o,0,0]);f=r.Util.transform(f,[1,0,0,1,0,-o]);const m=r.Util.applyTransform([0,0],f),y=r.Util.applyTransform([i,o],f),v=r.Util.normalizeRect([m[0],m[1],y[0],y[1]]),b=Math.round(v[2]-v[0])||1,w=Math.round(v[3]-v[1])||1,x=this.cachedCanvases.getCanvas("fillCanvas",b,w,!0),k=x.context,C=Math.min(m[0],y[0]),A=Math.min(m[1],y[1]);k.translate(-C,-A),k.transform.apply(k,f),u||(u=this._scaleImage(d.canvas,k.mozCurrentTransformInverse),u=u.img,c&&a&&c.set(h,u)),k.imageSmoothingEnabled=S(k.mozCurrentTransform,t.interpolate),p(k,u,0,0,u.width,u.height,0,0,i,o),k.globalCompositeOperation="source-in";const _=r.Util.transform(k.mozCurrentTransformInverse,[1,0,0,1,-C,-A]);return k.fillStyle=a?s.getPattern(e,this,_,n.PathType.FILL):s,k.fillRect(0,0,i,o),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(h,x.canvas)),{canvas:x.canvas,offsetX:Math.round(C),offsetY:Math.round(A)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=k[t]}setLineJoin(t){this.ctx.lineJoin=C[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(let e=0,i=t.length;e<i;e++){const i=t[e],r=i[0],n=i[1];switch(r){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=i[1];break;case"ca":this.current.fillAlpha=i[1],this.ctx.globalAlpha=i[1];break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=n}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,t,e,!0);this.suspendedCtx=this.ctx,this.ctx=r.context;const n=this.ctx;n.setTransform.apply(n,this.suspendedCtx.mozCurrentTransform),m(this.suspendedCtx,n),function(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,i){e.translate(t,i),this.__originalTranslate(t,i)},t.scale=function(t,i){e.scale(t,i),this.__originalScale(t,i)},t.transform=function(t,i,r,n,o,s){e.transform(t,i,r,n,o,s),this.__originalTransform(t,i,r,n,o,s)},t.setTransform=function(t,i,r,n,o,s){e.setTransform(t,i,r,n,o,s),this.__originalSetTransform(t,i,r,n,o,s)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},t.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},t.bezierCurveTo=function(t,i,r,n,o,s){e.bezierCurveTo(t,i,r,n,o,s),this.__originalBezierCurveTo(t,i,r,n,o,s)},t.rect=function(t,i,r,n){e.rect(t,i,r,n),this.__originalRect(t,i,r,n)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(n,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),m(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask;x(this.suspendedCtx,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(m(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),m(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,r,n,o){this.ctx.transform(t,e,i,r,n,o),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){const n=this.ctx,o=this.current;let s,a,l=o.x,c=o.y;const h=n.mozCurrentTransform,u=0===h[0]&&0===h[3]||0===h[1]&&0===h[2],p=u?i.slice(0):null;for(let i=0,d=0,f=t.length;i<f;i++)switch(0|t[i]){case r.OPS.rectangle:l=e[d++],c=e[d++];const t=e[d++],i=e[d++],f=l+t,g=c+i;n.moveTo(l,c),0===t||0===i?n.lineTo(f,g):(n.lineTo(f,c),n.lineTo(f,g),n.lineTo(l,g)),u||o.updateRectMinMax(h,[l,c,f,g]),n.closePath();break;case r.OPS.moveTo:l=e[d++],c=e[d++],n.moveTo(l,c),u||o.updatePathMinMax(h,l,c);break;case r.OPS.lineTo:l=e[d++],c=e[d++],n.lineTo(l,c),u||o.updatePathMinMax(h,l,c);break;case r.OPS.curveTo:s=l,a=c,l=e[d+4],c=e[d+5],n.bezierCurveTo(e[d],e[d+1],e[d+2],e[d+3],l,c),o.updateCurvePathMinMax(h,s,a,e[d],e[d+1],e[d+2],e[d+3],l,c,p),d+=6;break;case r.OPS.curveTo2:s=l,a=c,n.bezierCurveTo(l,c,e[d],e[d+1],e[d+2],e[d+3]),o.updateCurvePathMinMax(h,s,a,l,c,e[d],e[d+1],e[d+2],e[d+3],p),l=e[d+2],c=e[d+3],d+=4;break;case r.OPS.curveTo3:s=l,a=c,l=e[d+2],c=e[d+3],n.bezierCurveTo(e[d],e[d+1],l,c,l,c),o.updateCurvePathMinMax(h,s,a,e[d],e[d+1],l,c,l,c,p),d+=4;break;case r.OPS.closePath:n.closePath()}u&&o.updateScalingPathMinMax(h,p),o.setCurrentPoint(l,c)}closePath(){this.ctx.closePath()}stroke(t){t=void 0===t||t;const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof i&&i?.getPattern?(e.save(),e.strokeStyle=i.getPattern(e,this,e.mozCurrentTransformInverse,n.PathType.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t){t=void 0===t||t;const e=this.ctx,i=this.current.fillColor;let r=!1;this.current.patternFill&&(e.save(),e.fillStyle=i.getPattern(e,this,e.mozCurrentTransformInverse,n.PathType.FILL),r=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==o&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=A}eoClip(){this.pendingClip=_}beginText(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){e.save(),e.beginPath();for(let i=0;i<t.length;i++){const r=t[i];e.setTransform.apply(e,r.transform),e.translate(r.x,r.y),r.addToPath(e,r.fontSize)}e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const i=this.commonObjs.get(t),n=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(n.fontMatrix=i.fontMatrix||r.FONT_IDENTITY_MATRIX,0!==n.fontMatrix[0]&&0!==n.fontMatrix[3]||(0,r.warn)("Invalid font matrix for font "+t),e<0?(e=-e,n.fontDirection=-1):n.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const o=i.loadedName||"sans-serif";let s="normal";i.black?s="900":i.bold&&(s="bold");const a=i.italic?"italic":"normal",l=`"${o}", ${i.fallbackName}`;let c=e;e<16?c=16:e>100&&(c=100),this.current.fontSizeScale=e/c,this.ctx.font=`${a} ${s} ${c}px ${l}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,r,n,o){this.current.textMatrix=[t,e,i,r,n,o],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,n){const o=this.ctx,s=this.current,a=s.font,l=s.textRenderingMode,c=s.fontSize/s.fontSizeScale,h=l&r.TextRenderingMode.FILL_STROKE_MASK,u=!!(l&r.TextRenderingMode.ADD_TO_PATH_FLAG),p=s.patternFill&&!a.missingFile;let d;(a.disableFontFace||u||p)&&(d=a.getPathGenerator(this.commonObjs,t)),a.disableFontFace||p?(o.save(),o.translate(e,i),o.beginPath(),d(o,c),n&&o.setTransform.apply(o,n),h!==r.TextRenderingMode.FILL&&h!==r.TextRenderingMode.FILL_STROKE||o.fill(),h!==r.TextRenderingMode.STROKE&&h!==r.TextRenderingMode.FILL_STROKE||o.stroke(),o.restore()):(h!==r.TextRenderingMode.FILL&&h!==r.TextRenderingMode.FILL_STROKE||o.fillText(t,e,i),h!==r.TextRenderingMode.STROKE&&h!==r.TextRenderingMode.FILL_STROKE||o.strokeText(t,e,i)),u&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:o.mozCurrentTransform,x:e,y:i,fontSize:c,addToPath:d})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let t=3;t<e.length;t+=4)if(e[t]>0&&e[t]<255){i=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const o=e.fontSize;if(0===o)return;const s=this.ctx,a=e.fontSizeScale,l=e.charSpacing,c=e.wordSpacing,h=e.fontDirection,u=e.textHScale*h,p=t.length,d=i.vertical,f=d?1:-1,g=i.defaultVMetrics,m=o*e.fontMatrix[0],y=e.textRenderingMode===r.TextRenderingMode.FILL&&!i.disableFontFace&&!e.patternFill;let v;if(s.save(),s.transform.apply(s,e.textMatrix),s.translate(e.x,e.y+e.textRise),h>0?s.scale(u,-1):s.scale(u,1),e.patternFill){s.save();const t=e.fillColor.getPattern(s,this,s.mozCurrentTransformInverse,n.PathType.FILL);v=s.mozCurrentTransform,s.restore(),s.fillStyle=t}let b=e.lineWidth;const w=e.textMatrixScale;if(0===w||0===b){const t=e.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;t!==r.TextRenderingMode.STROKE&&t!==r.TextRenderingMode.FILL_STROKE||(b=this.getSinglePixelWidth())}else b/=w;1!==a&&(s.scale(a,a),b/=a),s.lineWidth=b;let x,S=0;for(x=0;x<p;++x){const e=t[x];if("number"==typeof e){S+=f*e*o/1e3;continue}let r=!1;const n=(e.isSpace?c:0)+l,u=e.fontChar,p=e.accent;let b,w,k,C=e.width;if(d){const t=e.vmetric||g,i=-(e.vmetric?t[1]:.5*C)*m,r=t[2]*m;C=t?-t[0]:C,b=i/a,w=(S+r)/a}else b=S/a,w=0;if(i.remeasure&&C>0){const t=1e3*s.measureText(u).width/o*a;if(C<t&&this.isFontSubpixelAAEnabled){const e=C/t;r=!0,s.save(),s.scale(e,1),b/=e}else C!==t&&(b+=(C-t)/2e3*o/a)}if(this.contentVisible&&(e.isInFont||i.missingFile))if(y&&!p)s.fillText(u,b,w);else if(this.paintChar(u,b,w,v),p){const t=b+o*p.offset.x/a,e=w-o*p.offset.y/a;this.paintChar(p.fontChar,t,e,v)}k=d?C*m-n*h:C*m+n*h,S+=k,r&&s.restore()}d?e.y-=S:e.x+=S*u,s.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,n=i.font,o=i.fontSize,s=i.fontDirection,a=n.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,h=i.textHScale*s,u=i.fontMatrix||r.FONT_IDENTITY_MATRIX,p=t.length;let d,f,g,m;if(i.textRenderingMode!==r.TextRenderingMode.INVISIBLE&&0!==o){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,e.save(),e.transform.apply(e,i.textMatrix),e.translate(i.x,i.y),e.scale(h,s),d=0;d<p;++d){if(f=t[d],"number"==typeof f){m=a*f*o/1e3,this.ctx.translate(m,0),i.x+=m*h;continue}const s=(f.isSpace?c:0)+l,p=n.charProcOperatorList[f.operatorListId];p?(this.contentVisible&&(this.processingType3=f,this.save(),e.scale(o,o),e.transform.apply(e,u),this.executeOperatorList(p),this.restore()),g=r.Util.applyTransform([f.width,0],u)[0]*o+s,e.translate(g,0),i.x+=g*h):(0,r.warn)(`Type3 character "${f.operatorListId}" is not available.`)}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,r,n,o){this.ctx.rect(i,r,n-i,o-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if("TilingPattern"===t[0]){const i=t[1],r=this.baseTransform||this.ctx.mozCurrentTransform.slice(),o={createCanvasGraphics:t=>new T(t,this.commonObjs,this.objs,this.canvasFactory)};e=new n.TilingPattern(t,i,this.ctx,o,r)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){const n=this.selectColor?.(t,e,i)||r.Util.makeHexColor(t,e,i);this.ctx.strokeStyle=n,this.current.strokeColor=n}setFillRGBColor(t,e,i){const n=this.selectColor?.(t,e,i)||r.Util.makeHexColor(t,e,i);this.ctx.fillStyle=n,this.current.fillColor=n,this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=(0,n.getShadingPattern)(this.objs.get(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,e.mozCurrentTransformInverse,n.PathType.SHADING);const o=e.mozCurrentTransformInverse;if(o){const t=e.canvas,i=t.width,n=t.height,s=r.Util.applyTransform([0,0],o),a=r.Util.applyTransform([0,n],o),l=r.Util.applyTransform([i,0],o),c=r.Util.applyTransform([i,n],o),h=Math.min(s[0],a[0],l[0],c[0]),u=Math.min(s[1],a[1],l[1],c[1]),p=Math.max(s[0],a[0],l[0],c[0]),d=Math.max(s[1],a[1],l[1],c[1]);this.ctx.fillRect(h,u,p-h,d-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,r.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,r.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(t)&&6===t.length&&this.transform.apply(this,t),this.baseTransform=this.ctx.mozCurrentTransform,e)){const t=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],t,i),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||(0,r.info)("TODO: Support non-isolated groups."),t.knockout&&(0,r.warn)("Knockout groups not supported.");const i=e.mozCurrentTransform;if(t.matrix&&e.transform.apply(e,t.matrix),!t.bbox)throw new Error("Bounding box is required.");let n=r.Util.getAxialAlignedBoundingBox(t.bbox,e.mozCurrentTransform);const o=[0,0,e.canvas.width,e.canvas.height];n=r.Util.intersect(n,o)||[0,0,0,0];const s=Math.floor(n[0]),a=Math.floor(n[1]);let c=Math.max(Math.ceil(n[2])-s,1),h=Math.max(Math.ceil(n[3])-a,1),u=1,p=1;c>l&&(u=c/l,c=l),h>l&&(p=h/l,h=l),this.current.startNewPathAndClipBox([0,0,c,h]);let d="groupAt"+this.groupLevel;t.smask&&(d+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(d,c,h,!0),g=f.context;g.scale(1/u,1/p),g.translate(-s,-a),g.transform.apply(g,i),t.smask?this.smaskStack.push({canvas:f.canvas,context:g,offsetX:s,offsetY:a,scaleX:u,scaleY:p,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(s,a),e.scale(u,p),e.save()),m(e,g),this.ctx=g,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const t=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,t);const i=r.Util.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],t);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(t,e,i,n,o){if(this.save(),Array.isArray(e)&&4===e.length){const n=e[2]-e[0],s=e[3]-e[1];if(o&&this.annotationCanvasMap){(i=i.slice())[4]-=e[0],i[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=n,e[3]=s;const[o,l]=r.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:c}=this,u=Math.ceil(n*this.outputScaleX*c),p=Math.ceil(s*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(u,p);const{canvas:d,context:f}=this.annotationCanvas,g=`var(--zoom-factor) * ${a.PixelsPerInch.PDF_TO_CSS_UNITS}`;d.style.width=`calc(${n}px * ${g})`,d.style.height=`calc(${s}px * ${g})`,this.annotationCanvasMap.set(t,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.setTransform(o,0,0,-l,0,s*l),h(this.ctx),y(this.ctx,this.foregroundColor)}else y(this.ctx,this.foregroundColor),this.ctx.rect(e[0],e[1],n,s),this.ctx.clip(),this.endPath()}this.current=new d(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,i),this.transform.apply(this,n)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;(t=this.getObject(t.data,t)).count=e;const i=this.ctx,r=this.processingType3;if(r&&(void 0===r.compiled&&(r.compiled=function(t){const{width:e,height:i}=t;if(e>1e3||i>1e3)return null;const r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),n=e+1;let o,a,l,c=new Uint8Array(n*(i+1));const h=e+7&-8;let u=new Uint8Array(h*i),p=0;for(const e of t.data){let t=128;for(;t>0;)u[p++]=e&t?0:255,t>>=1}let d=0;for(p=0,0!==u[p]&&(c[0]=1,++d),a=1;a<e;a++)u[p]!==u[p+1]&&(c[a]=u[p]?2:1,++d),p++;for(0!==u[p]&&(c[a]=2,++d),o=1;o<i;o++){p=o*h,l=o*n,u[p-h]!==u[p]&&(c[l]=u[p]?1:8,++d);let t=(u[p]?4:0)+(u[p-h]?8:0);for(a=1;a<e;a++)t=(t>>2)+(u[p+1]?4:0)+(u[p-h+1]?8:0),r[t]&&(c[l+a]=r[t],++d),p++;if(u[p-h]!==u[p]&&(c[l+a]=u[p]?2:4,++d),d>1e3)return null}for(p=h*(i-1),l=o*n,0!==u[p]&&(c[l]=8,++d),a=1;a<e;a++)u[p]!==u[p+1]&&(c[l+a]=u[p]?4:8,++d),p++;if(0!==u[p]&&(c[l+a]=4,++d),d>1e3)return null;const f=new Int32Array([0,n,-1,0,-n,0,0,0,1]);let g,m,y;for(s.isNodeJS?m=[]:g=new Path2D,o=0;d&&o<=i;o++){let t=o*n;const i=t+e;for(;t<i&&!c[t];)t++;if(t===i)continue;g?g.moveTo(t%n,o):y=[t%n,o];const r=t;let s=c[t];do{const e=f[s];do{t+=e}while(!c[t]);const i=c[t];5!==i&&10!==i?(s=i,c[t]=0):(s=i&51*s>>4,c[t]&=s>>2|s<<2),g?g.lineTo(t%n,t/n|0):y.push(t%n,t/n|0),c[t]||--d}while(r!==t);g||m.push(y),--o}return u=null,c=null,function(t){if(t.save(),t.scale(1/e,-1/i),t.translate(0,-i),g)t.fill(g);else{t.beginPath();for(const e of m){t.moveTo(e[0],e[1]);for(let i=2,r=e.length;i<r;i+=2)t.lineTo(e[i],e[i+1])}t.fill()}t.beginPath(),t.restore()}}(t)),r.compiled))return void r.compiled(i);const n=this._createMaskCanvas(t),o=n.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,n.offsetX,n.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,n=0,o,s){if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const l=a.mozCurrentTransform;a.transform(e,i,n,o,0,0);const c=this._createMaskCanvas(t);a.setTransform(1,0,0,1,0,0);for(let t=0,h=s.length;t<h;t+=2){const h=r.Util.transform(l,[e,i,n,o,s[t],s[t+1]]),[u,p]=r.Util.applyTransform([0,0],h);a.drawImage(c.canvas,u,p)}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(let o=0,s=t.length;o<s;o++){const s=t[o],a=s.width,l=s.height,c=this.cachedCanvases.getCanvas("maskCanvas",a,l,!1),h=c.context;h.save(),g(h,s),h.globalCompositeOperation="source-in",h.fillStyle=r?i.getPattern(h,this,e.mozCurrentTransformInverse,n.PathType.FILL):i,h.fillRect(0,0,a,l),h.restore(),e.save(),e.transform.apply(e,s.transform),e.scale(1,-1),p(e,c.canvas,0,0,a,l,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);e?this.paintInlineImageXObject(e):(0,r.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(t,e,i,n){if(!this.contentVisible)return;const o=this.getObject(t);if(!o)return void(0,r.warn)("Dependent image isn't ready yet");const s=o.width,a=o.height,l=[];for(let t=0,r=n.length;t<r;t+=2)l.push({transform:[e,0,0,i,n[t],n[t+1]],x:0,y:0,w:s,h:a});this.paintInlineImageXObjectGroup(o,l)}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,r=this.ctx;let n;if(this.save(),r.scale(1/e,-1/i),"function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)n=t;else{const r=this.cachedCanvases.getCanvas("inlineImage",e,i,!1);f(r.context,t,this.current.transferMaps),n=r.canvas}const o=this._scaleImage(n,r.mozCurrentTransformInverse);r.imageSmoothingEnabled=S(r.mozCurrentTransform,t.interpolate);const[s,a]=p(r,o.img,0,0,o.paintWidth,o.paintHeight,0,-i,e,i);if(this.imageLayer){const e=this.getCanvasPosition(0,-i);this.imageLayer.appendImage({imgData:t,left:e[0],top:e[1],width:s,height:a})}this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx,r=t.width,n=t.height,o=this.cachedCanvases.getCanvas("inlineImage",r,n,!1);f(o.context,t,this.current.transferMaps);for(let s=0,a=e.length;s<a;s++){const a=e[s];if(i.save(),i.transform.apply(i,a.transform),i.scale(1,-1),p(i,o.canvas,a.x,a.y,a.w,a.h,0,-1,1,1),this.imageLayer){const e=this.getCanvasPosition(a.x,a.y);this.imageLayer.appendImage({imgData:t,left:e[0],top:e[1],width:r,height:n})}i.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===_?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=this.ctx.mozCurrentTransform;if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:t}=this.current,e=this.ctx.mozCurrentTransform;let i,r;if(0===e[1]&&0===e[2]){const n=Math.abs(e[0]),o=Math.abs(e[3]);if(0===t)i=1/n,r=1/o;else{const e=n*t,s=o*t;i=e<1?1/e:1,r=s<1?1/s:1}}else{const n=Math.abs(e[0]*e[3]-e[2]*e[1]),o=Math.hypot(e[0],e[1]),s=Math.hypot(e[2],e[3]);if(0===t)i=s/n,r=o/n;else{const e=t*n;i=s>e?s/e:1,r=o>e?o/e:1}}this._cachedScaleForStroking=[i,r]}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:i}=this.current,[r,n]=this.getScaleForStroking();if(e.lineWidth=i||1,1===r&&1===n)return void e.stroke();let o,s,a;t&&(o=e.mozCurrentTransform.slice(),s=e.getLineDash().slice(),a=e.lineDashOffset),e.scale(r,n);const l=Math.max(r,n);e.setLineDash(e.getLineDash().map((t=>t/l))),e.lineDashOffset/=l,e.stroke(),t&&(e.setTransform(...o),e.setLineDash(s),e.lineDashOffset=a)}getCanvasPosition(t,e){const i=this.ctx.mozCurrentTransform;return[i[0]*t+i[2]*e+i[4],i[1]*t+i[3]*e+i[5]]}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}e.CanvasGraphics=T;for(const t in r.OPS)void 0!==T.prototype[t]&&(T.prototype[r.OPS[t]]=T.prototype[t])},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=function(t){switch(t[0]){case"RadialAxial":return new l(t);case"Mesh":return new u(t);case"Dummy":return new p}throw new Error(`Unknown IR type: ${t[0]}`)};var r=i(1),n=i(3);const o={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function s(t,e){if(!e||n.isNodeJS)return;const i=e[2]-e[0],r=e[3]-e[1],o=new Path2D;o.rect(e[0],e[1],i,r),t.clip(o)}e.PathType=o;class a{constructor(){this.constructor===a&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class l extends a{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const t of this._colorStops)e.addColorStop(t[0],t[1]);return e}getPattern(t,e,i,n){let a;if(n===o.STROKE||n===o.FILL){const o=e.current.getClippedPathBoundingBox(n,t.mozCurrentTransform)||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,h=e.cachedCanvases.getCanvas("pattern",l,c,!0),u=h.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),i=r.Util.transform(i,[1,0,0,1,o[0],o[1]]),u.transform.apply(u,e.baseTransform),this.matrix&&u.transform.apply(u,this.matrix),s(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),a=t.createPattern(h.canvas,"no-repeat");const p=new DOMMatrix(i);try{a.setTransform(p)}catch(t){(0,r.warn)(`RadialAxialShadingPattern.getPattern: "${t?.message}".`)}}else s(t,this._bbox),a=this._createGradient(t);return a}}function c(t,e,i,r,n,o,s,a){const l=e.coords,c=e.colors,h=t.data,u=4*t.width;let p;l[i+1]>l[r+1]&&(p=i,i=r,r=p,p=o,o=s,s=p),l[r+1]>l[n+1]&&(p=r,r=n,n=p,p=s,s=a,a=p),l[i+1]>l[r+1]&&(p=i,i=r,r=p,p=o,o=s,s=p);const d=(l[i]+e.offsetX)*e.scaleX,f=(l[i+1]+e.offsetY)*e.scaleY,g=(l[r]+e.offsetX)*e.scaleX,m=(l[r+1]+e.offsetY)*e.scaleY,y=(l[n]+e.offsetX)*e.scaleX,v=(l[n+1]+e.offsetY)*e.scaleY;if(f>=v)return;const b=c[o],w=c[o+1],x=c[o+2],S=c[s],k=c[s+1],C=c[s+2],A=c[a],_=c[a+1],T=c[a+2],O=Math.round(f),E=Math.round(v);let M,P,I,D,F,R,L,N;for(let t=O;t<=E;t++){if(t<m){let e;e=t<f?0:(f-t)/(f-m),M=d-(d-g)*e,P=b-(b-S)*e,I=w-(w-k)*e,D=x-(x-C)*e}else{let e;e=t>v?1:m===v?0:(m-t)/(m-v),M=g-(g-y)*e,P=S-(S-A)*e,I=k-(k-_)*e,D=C-(C-T)*e}let e;e=t<f?0:t>v?1:(f-t)/(f-v),F=d-(d-y)*e,R=b-(b-A)*e,L=w-(w-_)*e,N=x-(x-T)*e;const i=Math.round(Math.min(M,F)),r=Math.round(Math.max(M,F));let n=u*t+4*i;for(let t=i;t<=r;t++)e=(M-t)/(M-F),e<0?e=0:e>1&&(e=1),h[n++]=P-(P-R)*e|0,h[n++]=I-(I-L)*e|0,h[n++]=D-(D-N)*e|0,h[n++]=255}}function h(t,e,i){const r=e.coords,n=e.colors;let o,s;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(r.length/a)-1,h=a-1;for(o=0;o<l;o++){let e=o*a;for(let o=0;o<h;o++,e++)c(t,i,r[e],r[e+1],r[e+a],n[e],n[e+1],n[e+a]),c(t,i,r[e+a+1],r[e+1],r[e+a],n[e+a+1],n[e+1],n[e+a])}break;case"triangles":for(o=0,s=r.length;o<s;o+=3)c(t,i,r[o],r[o+1],r[o+2],n[o],n[o+1],n[o+2]);break;default:throw new Error("illegal figure")}}class u extends a{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){const r=Math.floor(this._bounds[0]),n=Math.floor(this._bounds[1]),o=Math.ceil(this._bounds[2])-r,s=Math.ceil(this._bounds[3])-n,a=Math.min(Math.ceil(Math.abs(o*t[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(s*t[1]*1.1)),3e3),c=o/a,u=s/l,p={coords:this._coords,colors:this._colors,offsetX:-r,offsetY:-n,scaleX:1/c,scaleY:1/u},d=a+4,f=l+4,g=i.getCanvas("mesh",d,f,!1),m=g.context,y=m.createImageData(a,l);if(e){const t=y.data;for(let i=0,r=t.length;i<r;i+=4)t[i]=e[0],t[i+1]=e[1],t[i+2]=e[2],t[i+3]=255}for(const t of this._figures)h(y,t,p);return m.putImageData(y,2,2),{canvas:g.canvas,offsetX:r-2*c,offsetY:n-2*u,scaleX:c,scaleY:u}}getPattern(t,e,i,n){let a;if(s(t,this._bbox),n===o.SHADING)a=r.Util.singularValueDecompose2dScale(t.mozCurrentTransform);else if(a=r.Util.singularValueDecompose2dScale(e.baseTransform),this.matrix){const t=r.Util.singularValueDecompose2dScale(this.matrix);a=[a[0]*t[0],a[1]*t[1]]}const l=this._createMeshCanvas(a,n===o.SHADING?null:this._background,e.cachedCanvases);return n!==o.SHADING&&(t.setTransform.apply(t,e.baseTransform),this.matrix&&t.transform.apply(t,this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class p extends a{getPattern(){return"hotpink"}}const d=1,f=2;class g{static get MAX_PATTERN_SIZE(){return(0,r.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(t,e,i,r,n){this.operatorList=t[2],this.matrix=t[3]||[1,0,0,1,0,0],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=r,this.baseTransform=n}createPatternCanvas(t){const e=this.operatorList,i=this.bbox,n=this.xstep,o=this.ystep,s=this.paintType,a=this.tilingType,l=this.color,c=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+a);const h=i[0],u=i[1],p=i[2],d=i[3],f=r.Util.singularValueDecompose2dScale(this.matrix),g=r.Util.singularValueDecompose2dScale(this.baseTransform),m=[f[0]*g[0],f[1]*g[1]],y=this.getSizeAndScale(n,this.ctx.canvas.width,m[0]),v=this.getSizeAndScale(o,this.ctx.canvas.height,m[1]),b=t.cachedCanvases.getCanvas("pattern",y.size,v.size,!0),w=b.context,x=c.createCanvasGraphics(w);x.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(x,s,l);let S=h,k=u,C=p,A=d;return h<0&&(S=0,C+=Math.abs(h)),u<0&&(k=0,A+=Math.abs(u)),w.translate(-y.scale*S,-v.scale*k),x.transform(y.scale,0,0,v.scale,0,0),w.save(),this.clipBbox(x,S,k,C,A),x.baseTransform=x.ctx.mozCurrentTransform.slice(),x.executeOperatorList(e),x.endDrawing(),{canvas:b.canvas,scaleX:y.scale,scaleY:v.scale,offsetX:S,offsetY:k}}getSizeAndScale(t,e,i){t=Math.abs(t);const r=Math.max(g.MAX_PATTERN_SIZE,e);let n=Math.ceil(t*i);return n>=r?n=r:i=n/t,{scale:i,size:n}}clipBbox(t,e,i,r,n){const o=r-e,s=n-i;t.ctx.rect(e,i,o,s),t.current.updateRectMinMax(t.ctx.mozCurrentTransform,[e,i,r,n]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const n=t.ctx,o=t.current;switch(e){case d:const t=this.ctx;n.fillStyle=t.fillStyle,n.strokeStyle=t.strokeStyle,o.fillColor=t.fillStyle,o.strokeColor=t.strokeStyle;break;case f:const s=r.Util.makeHexColor(i[0],i[1],i[2]);n.fillStyle=s,n.strokeStyle=s,o.fillColor=s,o.strokeColor=s;break;default:throw new r.FormatError(`Unsupported paint type: ${e}`)}}getPattern(t,e,i,n){let s=i;n!==o.SHADING&&(s=r.Util.transform(s,e.baseTransform),this.matrix&&(s=r.Util.transform(s,this.matrix)));const a=this.createPatternCanvas(e);let l=new DOMMatrix(s);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const c=t.createPattern(a.canvas,"repeat");try{c.setTransform(l)}catch(t){(0,r.warn)(`TilingPattern.getPattern: "${t?.message}".`)}return c}}e.TilingPattern=g},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.applyMaskImageData=function({src:t,srcPos:e=0,dest:i,destPos:n=0,width:o,height:s,inverseDecode:a=!1}){const l=r.FeatureTest.isLittleEndian?4278190080:255,[c,h]=a?[0,l]:[l,0],u=o>>3,p=7&o,d=t.length;i=new Uint32Array(i.buffer);for(let r=0;r<s;r++){for(const r=e+u;e<r;e++){const r=e<d?t[e]:255;i[n++]=128&r?h:c,i[n++]=64&r?h:c,i[n++]=32&r?h:c,i[n++]=16&r?h:c,i[n++]=8&r?h:c,i[n++]=4&r?h:c,i[n++]=2&r?h:c,i[n++]=1&r?h:c}if(0===p)continue;const r=e<d?t[e++]:255;for(let t=0;t<p;t++)i[n++]=r&1<<7-t?h:c}return{srcPos:e,destPos:n}};var r=i(1)},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const i=Object.create(null);e.GlobalWorkerOptions=i,i.workerPort=void 0===i.workerPort?null:i.workerPort,i.workerSrc=void 0===i.workerSrc?"":i.workerSrc},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var r=i(1);const n=1,o=2,s=1,a=2,l=3,c=4,h=5,u=6,p=7,d=8;function f(t){switch(t instanceof Error||"object"==typeof t&&null!==t||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new r.AbortException(t.message);case"MissingPDFException":return new r.MissingPDFException(t.message);case"PasswordException":return new r.PasswordException(t.message,t.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new r.UnknownErrorException(t.message,t.details);default:return new r.UnknownErrorException(t.message,t.toString())}}e.MessageHandler=class{constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=t=>{const e=t.data;if(e.targetName!==this.sourceName)return;if(e.stream)return void this._processStreamMessage(e);if(e.callback){const t=e.callbackId,i=this.callbackCapabilities[t];if(!i)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],e.callback===n)i.resolve(e.data);else{if(e.callback!==o)throw new Error("Unexpected callback case");i.reject(f(e.reason))}return}const r=this.actionHandler[e.action];if(!r)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const t=this.sourceName,s=e.sourceName;new Promise((function(t){t(r(e.data))})).then((function(r){i.postMessage({sourceName:t,targetName:s,callback:n,callbackId:e.callbackId,data:r})}),(function(r){i.postMessage({sourceName:t,targetName:s,callback:o,callbackId:e.callbackId,reason:f(r)})}))}else e.streamId?this._createStreamSink(e):r(e.data)},i.addEventListener("message",this._onComObjOnMessage)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const n=this.callbackId++,o=(0,r.createPromiseCapability)();this.callbackCapabilities[n]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:e},i)}catch(t){o.reject(t)}return o.promise}sendWithStream(t,e,i,n){const o=this.streamId++,a=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:i=>{const s=(0,r.createPromiseCapability)();return this.streamControllers[o]={controller:i,startCall:s,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:l,action:t,streamId:o,data:e,desiredSize:i.desiredSize},n),s.promise},pull:t=>{const e=(0,r.createPromiseCapability)();return this.streamControllers[o].pullCall=e,c.postMessage({sourceName:a,targetName:l,stream:u,streamId:o,desiredSize:t.desiredSize}),e.promise},cancel:t=>{(0,r.assert)(t instanceof Error,"cancel must have a valid reason");const e=(0,r.createPromiseCapability)();return this.streamControllers[o].cancelCall=e,this.streamControllers[o].isClosed=!0,c.postMessage({sourceName:a,targetName:l,stream:s,streamId:o,reason:f(t)}),e.promise}},i)}_createStreamSink(t){const e=t.streamId,i=this.sourceName,n=t.sourceName,o=this.comObj,s=this,a=this.actionHandler[t.action],u={enqueue(t,s=1,a){if(this.isCancelled)return;const l=this.desiredSize;this.desiredSize-=s,l>0&&this.desiredSize<=0&&(this.sinkCapability=(0,r.createPromiseCapability)(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:i,targetName:n,stream:c,streamId:e,chunk:t},a)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:n,stream:l,streamId:e}),delete s.streamSinks[e])},error(t){(0,r.assert)(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:n,stream:h,streamId:e,reason:f(t)}))},sinkCapability:(0,r.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[e]=u,new Promise((function(e){e(a(t.data,u))})).then((function(){o.postMessage({sourceName:i,targetName:n,stream:d,streamId:e,success:!0})}),(function(t){o.postMessage({sourceName:i,targetName:n,stream:d,streamId:e,reason:f(t)})}))}_processStreamMessage(t){const e=t.streamId,i=this.sourceName,n=t.sourceName,o=this.comObj,g=this.streamControllers[e],m=this.streamSinks[e];switch(t.stream){case d:t.success?g.startCall.resolve():g.startCall.reject(f(t.reason));break;case p:t.success?g.pullCall.resolve():g.pullCall.reject(f(t.reason));break;case u:if(!m){o.postMessage({sourceName:i,targetName:n,stream:p,streamId:e,success:!0});break}m.desiredSize<=0&&t.desiredSize>0&&m.sinkCapability.resolve(),m.desiredSize=t.desiredSize,new Promise((function(t){t(m.onPull&&m.onPull())})).then((function(){o.postMessage({sourceName:i,targetName:n,stream:p,streamId:e,success:!0})}),(function(t){o.postMessage({sourceName:i,targetName:n,stream:p,streamId:e,reason:f(t)})}));break;case c:if((0,r.assert)(g,"enqueue should have stream controller"),g.isClosed)break;g.controller.enqueue(t.chunk);break;case l:if((0,r.assert)(g,"close should have stream controller"),g.isClosed)break;g.isClosed=!0,g.controller.close(),this._deleteStreamController(g,e);break;case h:(0,r.assert)(g,"error should have stream controller"),g.controller.error(f(t.reason)),this._deleteStreamController(g,e);break;case a:t.success?g.cancelCall.resolve():g.cancelCall.reject(f(t.reason)),this._deleteStreamController(g,e);break;case s:if(!m)break;new Promise((function(e){e(m.onCancel&&m.onCancel(f(t.reason)))})).then((function(){o.postMessage({sourceName:i,targetName:n,stream:a,streamId:e,success:!0})}),(function(t){o.postMessage({sourceName:i,targetName:n,stream:a,streamId:e,reason:f(t)})})),m.sinkCapability.reject(f(t.reason)),m.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(t,e){await Promise.allSettled([t.startCall&&t.startCall.promise,t.pullCall&&t.pullCall.promise,t.cancelCall&&t.cancelCall.promise]),delete this.streamControllers[e]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=i(1);e.Metadata=class{#c;#h;constructor({parsedData:t,rawData:e}){this.#c=t,this.#h=e}getRaw(){return this.#h}get(t){return this.#c.get(t)??null}getAll(){return(0,r.objectFromMap)(this.#c)}has(t){return this.#c.has(t)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var r=i(1);class n{constructor(t,e){this.visible=!0,this.name=t,this.intent=e}}e.OptionalContentConfig=class{constructor(t){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==t){this.name=t.name,this.creator=t.creator,this._order=t.order;for(const e of t.groups)this._groups.set(e.id,new n(e.name,e.intent));if("OFF"===t.baseState)for(const t of this._groups)t.visible=!1;for(const e of t.on)this._groups.get(e).visible=!0;for(const e of t.off)this._groups.get(e).visible=!1}}_evaluateVisibilityExpression(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let n=1;n<e;n++){const e=t[n];let o;if(Array.isArray(e))o=this._evaluateVisibilityExpression(e);else{if(!this._groups.has(e))return(0,r.warn)(`Optional content group not found: ${e}`),!0;o=this._groups.get(e).visible}switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return"And"===i}isVisible(t){if(0===this._groups.size)return!0;if(!t)return(0,r.warn)("Optional content group not defined."),!0;if("OCG"===t.type)return this._groups.has(t.id)?this._groups.get(t.id).visible:((0,r.warn)(`Optional content group not found: ${t.id}`),!0);if("OCMD"===t.type){if(t.expression)return this._evaluateVisibilityExpression(t.expression);if(!t.policy||"AnyOn"===t.policy){for(const e of t.ids){if(!this._groups.has(e))return(0,r.warn)(`Optional content group not found: ${e}`),!0;if(this._groups.get(e).visible)return!0}return!1}if("AllOn"===t.policy){for(const e of t.ids){if(!this._groups.has(e))return(0,r.warn)(`Optional content group not found: ${e}`),!0;if(!this._groups.get(e).visible)return!1}return!0}if("AnyOff"===t.policy){for(const e of t.ids){if(!this._groups.has(e))return(0,r.warn)(`Optional content group not found: ${e}`),!0;if(!this._groups.get(e).visible)return!0}return!1}if("AllOff"===t.policy){for(const e of t.ids){if(!this._groups.has(e))return(0,r.warn)(`Optional content group not found: ${e}`),!0;if(this._groups.get(e).visible)return!1}return!0}return(0,r.warn)(`Unknown optional content policy ${t.policy}.`),!0}return(0,r.warn)(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0){this._groups.has(t)?this._groups.get(t).visible=!!e:(0,r.warn)(`Optional content group not found: ${t}`)}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,r.objectFromMap)(this._groups):null}getGroup(t){return this._groups.get(t)||null}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var r=i(1),n=i(5);e.PDFDataTransportStream=class{constructor(t,e){(0,r.assert)(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=t.progressiveDone||!1,this._contentDispositionFilename=t.contentDispositionFilename||null;const i=t.initialData;if(i?.length>0){const t=new Uint8Array(i).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._contentLength=t.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(((t,e)=>{this._onReceiveData({begin:t,chunk:e})})),this._pdfDataRangeTransport.addProgressListener(((t,e)=>{this._onProgress({loaded:t,total:e})})),this._pdfDataRangeTransport.addProgressiveReadListener((t=>{this._onReceiveData({chunk:t})})),this._pdfDataRangeTransport.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}_onReceiveData(t){const e=new Uint8Array(t.chunk).buffer;if(void 0===t.begin)this._fullRequestReader?this._fullRequestReader._enqueue(e):this._queuedChunks.push(e);else{const i=this._rangeReaders.some((function(i){return i._begin===t.begin&&(i._enqueue(e),!0)}));(0,r.assert)(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){if(void 0===t.total){const e=this._rangeReaders[0];e?.onProgress&&e.onProgress({loaded:t.loaded})}else{const e=this._fullRequestReader;e?.onProgress&&e.onProgress({loaded:t.loaded,total:t.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new o(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new s(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}};class o{constructor(t,e,i=!1,r=null){this._stream=t,this._done=i||!1,this._filename=(0,n.isPdfFile)(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const t of this._queuedChunks)this._loaded+=t.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=(0,r.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class s{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=(0,r.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class i{static textContent(t){const e=[],r={items:e,styles:Object.create(null)};return function t(r){if(!r)return;let n=null;const o=r.name;if("#text"===o)n=r.value;else{if(!i.shouldBuildText(o))return;r?.attributes?.textContent?n=r.attributes.textContent:r.value&&(n=r.value)}if(null!==n&&e.push({str:n}),r.children)for(const e of r.children)t(e)}(t),r}static shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}e.XfaText=i},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var r=i(6);const n=function(t){return new Promise(((e,i)=>{__webpack_require__(172).readFile(t,((t,r)=>{!t&&r?e(new Uint8Array(r)):i(new Error(t))}))}))};class o extends r.BaseCanvasFactory{_createCanvas(t,e){return __webpack_require__(414).createCanvas(t,e)}}e.NodeCanvasFactory=o;class s extends r.BaseCMapReaderFactory{_fetchData(t,e){return n(t).then((t=>({cMapData:t,compressionType:e})))}}e.NodeCMapReaderFactory=s;class a extends r.BaseStandardFontDataFactory{_fetchData(t){return n(t)}}e.NodeStandardFontDataFactory=a},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var r=i(1),n=i(5),o=i(8),s=i(21),a=i(22);const l=1e3,c=new WeakSet;function h(t){return{width:t[2]-t[0],height:t[3]-t[1]}}class u{static create(t){switch(t.data.annotationType){case r.AnnotationType.LINK:return new d(t);case r.AnnotationType.TEXT:return new f(t);case r.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new m(t);case"Btn":return t.data.radioButton?new v(t):t.data.checkBox?new y(t):new b(t);case"Ch":return new w(t)}return new g(t);case r.AnnotationType.POPUP:return new x(t);case r.AnnotationType.FREETEXT:return new k(t);case r.AnnotationType.LINE:return new C(t);case r.AnnotationType.SQUARE:return new A(t);case r.AnnotationType.CIRCLE:return new _(t);case r.AnnotationType.POLYLINE:return new T(t);case r.AnnotationType.CARET:return new E(t);case r.AnnotationType.INK:return new M(t);case r.AnnotationType.POLYGON:return new O(t);case r.AnnotationType.HIGHLIGHT:return new P(t);case r.AnnotationType.UNDERLINE:return new I(t);case r.AnnotationType.SQUIGGLY:return new D(t);case r.AnnotationType.STRIKEOUT:return new F(t);case r.AnnotationType.STAMP:return new R(t);case r.AnnotationType.FILEATTACHMENT:return new L(t);default:return new p(t)}}}class p{constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this._mouseState=t.mouseState,e&&(this.container=this._createContainer(i)),r&&(this.quadrilaterals=this._createQuadrilaterals(i))}_createContainer(t=!1){const e=this.data,i=this.page,n=this.viewport,o=document.createElement("section");let{width:s,height:a}=h(e.rect);o.setAttribute("data-annotation-id",e.id);const l=r.Util.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]);if(e.hasOwnCanvas){const t=n.transform.slice(),[e,i]=r.Util.singularValueDecompose2dScale(t);s=Math.ceil(s*e),a=Math.ceil(a*i),l[0]*=e,l[1]*=i;for(let e=0;e<4;e++)t[e]=Math.sign(t[e]);o.style.transform=`matrix(${t.join(",")})`}else o.style.transform=`matrix(${n.transform.join(",")})`;if(o.style.transformOrigin=`${-l[0]}px ${-l[1]}px`,!t&&e.borderStyle.width>0){o.style.borderWidth=`${e.borderStyle.width}px`,e.borderStyle.style!==r.AnnotationBorderStyleType.UNDERLINE&&(s-=2*e.borderStyle.width,a-=2*e.borderStyle.width);const t=e.borderStyle.horizontalCornerRadius,i=e.borderStyle.verticalCornerRadius;if(t>0||i>0){const e=`${t}px / ${i}px`;o.style.borderRadius=e}switch(e.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:o.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:o.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:o.style.borderBottomStyle="solid"}e.borderColor||e.color?o.style.borderColor=r.Util.makeHexColor(0|e.color[0],0|e.color[1],0|e.color[2]):o.style.borderWidth=0}return o.style.left=`${l[0]}px`,o.style.top=`${l[1]}px`,e.hasOwnCanvas?o.style.width=o.style.height="auto":(o.style.width=`${s}px`,o.style.height=`${a}px`),o}get _commonActions(){const t=(t,e,i)=>{const r=i.detail[t];i.target.style[e]=s.ColorConverters[`${r[0]}_HTML`](r.slice(1))};return(0,r.shadow)(this,"_commonActions",{display:t=>{const e=t.detail.display%2==1;t.target.style.visibility=e?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:e,print:0===t.detail.display||3===t.detail.display})},print:t=>{this.annotationStorage.setValue(this.data.id,{print:t.detail.print})},hidden:t=>{t.target.style.visibility=t.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:t.detail.hidden})},focus:t=>{setTimeout((()=>t.target.focus({preventScroll:!1})),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.detail.readonly?t.target.setAttribute("readonly",""):t.target.removeAttribute("readonly")},required:t=>{t.detail.required?t.target.setAttribute("required",""):t.target.removeAttribute("required")},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const r of Object.keys(e.detail)){const n=t[r]||i[r];n&&n(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[r,n]of Object.entries(e)){const o=i[r];o&&(o({detail:n,target:t}),delete e[r])}}_createQuadrilaterals(t=!1){if(!this.data.quadPoints)return null;const e=[],i=this.data.rect;for(const i of this.data.quadPoints)this.data.rect=[i[2].x,i[2].y,i[1].x,i[1].y],e.push(this._createContainer(t));return this.data.rect=i,e}_createPopup(t,e){let i=this.container;this.quadrilaterals&&(t=t||this.quadrilaterals,i=this.quadrilaterals[0]),t||((t=document.createElement("div")).style.height=i.style.height,t.style.width=i.style.width,i.appendChild(t));const r=new S({container:i,trigger:t,color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,hideWrapper:!0}).render();r.style.left=i.style.width,i.appendChild(r)}_renderQuadrilaterals(t){for(const e of this.quadrilaterals)e.className=t;return this.quadrilaterals}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const n=this._fieldObjects[t];if(n)for(const{page:t,id:o,exportValues:s}of n){if(-1===t)continue;if(o===e)continue;const n="string"==typeof s?s:null,a=document.getElementById(o);!a||c.has(a)?i.push({id:o,exportValue:n,domElement:a}):(0,r.warn)(`_getElementsByName - element not allowed: ${o}`)}return i}for(const r of document.getElementsByName(t)){const{id:t,exportValue:n}=r;t!==e&&c.has(r)&&i.push({id:t,exportValue:n,domElement:r})}return i}static get platform(){const t="undefined"!=typeof navigator?navigator.platform:"";return(0,r.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}class d extends p{constructor(t,e=null){super(t,{isRenderable:!!(t.data.url||t.data.dest||t.data.action||t.data.isTooltipOnly||t.data.resetForm||t.data.actions&&(t.data.actions.Action||t.data.actions["Mouse Up"]||t.data.actions["Mouse Down"])),ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0})}render(){const{data:t,linkService:e}=this,i=document.createElement("a");if(t.url)e.addLinkAttributes(i,t.url,t.newWindow);else if(t.action)this._bindNamedAction(i,t.action);else if(t.dest)this._bindLink(i,t.dest);else{let e=!1;t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(e=!0,this._bindJSAction(i,t)),t.resetForm?this._bindResetFormAction(i,t.resetForm):e||this._bindLink(i,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map(((t,e)=>{const r=0===e?i:i.cloneNode();return t.appendChild(r),t})):(this.container.className="linkAnnotation",this.container.appendChild(i),this.container)}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||""===e)&&(t.className="internalLink")}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),t.className="internalLink"}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(e.actions)){const n=i.get(r);n&&(t[n]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:r}}),!1))}t.onclick||(t.onclick=()=>!1),t.className="internalLink"}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),t.className="internalLink",!this._fieldObjects)return(0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(i||(t.onclick=()=>!1));t.onclick=()=>{i&&i();const{fields:t,refs:r,include:n}=e,o=[];if(0!==t.length||0!==r.length){const e=new Set(r);for(const i of t){const t=this._fieldObjects[i]||[];for(const{id:i}of t)e.add(i)}for(const t of Object.values(this._fieldObjects))for(const i of t)e.has(i.id)===n&&o.push(i)}else for(const t of Object.values(this._fieldObjects))o.push(...t);const s=this.annotationStorage,a=[];for(const t of o){const{id:e}=t;switch(a.push(e),t.type){case"text":{const i=t.defaultValue||"";s.setValue(e,{value:i});break}case"checkbox":case"radiobutton":{const i=t.defaultValue===t.exportValues;s.setValue(e,{value:i});break}case"combobox":case"listbox":{const i=t.defaultValue||"";s.setValue(e,{value:i});break}default:continue}const i=document.getElementById(e);i&&c.has(i)&&i.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:a,name:"ResetForm"}}),!1}}}class f extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str)})}render(){this.container.className="textAnnotation";const t=document.createElement("img");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(t,this.data),this.container.appendChild(t),this.container}}class g extends p{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(t){const{isWin:e,isMac:i}=p.platform;return e&&t.ctrlKey||i&&t.metaKey}_setEventListener(t,e,i,r){e.includes("mouse")?t.addEventListener(e,(t=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}})})):t.addEventListener(e,(t=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(t)}})}))}_setEventListeners(t,e,i){for(const[r,n]of e)("Action"===n||this.data.actions?.[n])&&this._setEventListener(t,r,n,i)}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":r.Util.makeHexColor(e[0],e[1],e[2])}}class m extends g{constructor(t){super(t,{isRenderable:t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,e,i,r){const n=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=i),n.setValue(o.id,{[r]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.className="textWidgetAnnotation";let i=null;if(this.renderForms){const r=t.getValue(e,{value:this.data.fieldValue}),n=r.formattedValue||r.value||"",o={userValue:null,formattedValue:null,valueOnFocus:""};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=n):(i=document.createElement("input"),i.type="text",i.setAttribute("value",n)),c.add(i),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=l,o.userValue=n,i.setAttribute("id",e),i.addEventListener("input",(r=>{t.setValue(e,{value:r.target.value}),this.setPropertyOnSiblings(i,"value",r.target.value,"value")})),i.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue??"";i.value=o.userValue=e,o.formattedValue=null}));let s=t=>{const{formattedValue:e}=o;null!=e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",(t=>{o.userValue&&(t.target.value=o.userValue),o.valueOnFocus=t.target.value})),i.addEventListener("updatefromsandbox",(i=>{const r={value(i){o.userValue=i.detail.value??"",t.setValue(e,{value:o.userValue.toString()}),i.target.value=o.userValue},formattedValue(i){const{formattedValue:r}=i.detail;o.formattedValue=r,null!=r&&i.target!==document.activeElement&&(i.target.value=r),t.setValue(e,{formattedValue:r})},selRange(t){t.target.setSelectionRange(...t.detail.selRange)}};this._dispatchEventFromSandbox(r,i)})),i.addEventListener("keydown",(t=>{let i=-1;if("Escape"===t.key?i=0:"Enter"===t.key?i=2:"Tab"===t.key&&(i=3),-1===i)return;const{value:r}=t.target;o.valueOnFocus!==r&&(o.userValue=r,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:r,willCommit:!0,commitKey:i,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}))}));const r=s;s=null,i.addEventListener("blur",(t=>{const{value:i}=t.target;o.userValue=i,this._mouseState.isDown&&o.valueOnFocus!==i&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:i,willCommit:!0,commitKey:1,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}),r(t)})),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",(t=>{const{data:i,target:r}=t,{value:n,selectionStart:o,selectionEnd:s}=r;let a=o,l=s;switch(t.inputType){case"deleteWordBackward":{const t=n.substring(0,o).match(/\w*[^\w]*$/);t&&(a-=t[0].length);break}case"deleteWordForward":{const t=n.substring(o).match(/^[^\w]*\w*/);t&&(l+=t[0].length);break}case"deleteContentBackward":o===s&&(a-=1);break;case"deleteContentForward":o===s&&(l+=1)}t.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:n,change:i||"",willCommit:!1,selStart:a,selEnd:l}})})),this._setEventListeners(i,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.value))}if(s&&i.addEventListener("blur",s),null!==this.data.maxLen&&(i.maxLength=this.data.maxLen),this.data.comb){const t=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;i.classList.add("comb"),i.style.letterSpacing=`calc(${t}px - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell";return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.appendChild(i),this.container}_setTextStyle(t){const e=["left","center","right"],{fontSize:i,fontColor:n}=this.data.defaultAppearanceData,o=t.style;i&&(o.fontSize=`${i}px`),o.color=r.Util.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(o.textAlign=e[this.data.textAlignment])}}class y extends g{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;"string"==typeof r&&(r="Off"!==r,t.setValue(i,{value:r})),this.container.className="buttonWidgetAnnotation checkBox";const n=document.createElement("input");return c.add(n),n.disabled=e.readOnly,n.type="checkbox",n.name=e.fieldName,r&&n.setAttribute("checked",!0),n.setAttribute("id",i),n.setAttribute("exportValue",e.exportValue),n.tabIndex=l,n.addEventListener("change",(r=>{const{name:n,checked:o}=r.target;for(const r of this._getElementsByName(n,i)){const i=o&&r.exportValue===e.exportValue;r.domElement&&(r.domElement.checked=i),t.setValue(r.id,{value:i})}t.setValue(i,{value:o})})),n.addEventListener("resetform",(t=>{const i=e.defaultFieldValue||"Off";t.target.checked=i===e.exportValue})),this.enableScripting&&this.hasJSActions&&(n.addEventListener("updatefromsandbox",(e=>{const r={value(e){e.target.checked="Off"!==e.detail.value,t.setValue(i,{value:e.target.checked})}};this._dispatchEventFromSandbox(r,e)})),this._setEventListeners(n,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.appendChild(n),this.container}}class v extends g{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;"string"==typeof r&&(r=r!==e.buttonValue,t.setValue(i,{value:r}));const n=document.createElement("input");if(c.add(n),n.disabled=e.readOnly,n.type="radio",n.name=e.fieldName,r&&n.setAttribute("checked",!0),n.setAttribute("id",i),n.tabIndex=l,n.addEventListener("change",(e=>{const{name:r,checked:n}=e.target;for(const e of this._getElementsByName(r,i))t.setValue(e.id,{value:!1});t.setValue(i,{value:n})})),n.addEventListener("resetform",(t=>{const i=e.defaultFieldValue;t.target.checked=null!=i&&i===e.buttonValue})),this.enableScripting&&this.hasJSActions){const r=e.buttonValue;n.addEventListener("updatefromsandbox",(e=>{const n={value:e=>{const n=r===e.detail.value;for(const r of this._getElementsByName(e.target.name)){const e=n&&r.id===i;r.domElement&&(r.domElement.checked=e),t.setValue(r.id,{value:e})}}};this._dispatchEventFromSandbox(n,e)})),this._setEventListeners(n,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))}return this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.appendChild(n),this.container}}class b extends d{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();return t.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(t.title=this.data.alternativeText),this._setDefaultPropertiesFromJS(t),t}}class w extends g{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue});let{fontSize:r}=this.data.defaultAppearanceData;r||(r=9);const n=`calc(${r}px * var(--zoom-factor))`,o=document.createElement("select");c.add(o),o.disabled=this.data.readOnly,o.name=this.data.fieldName,o.setAttribute("id",e),o.tabIndex=l,o.style.fontSize=`${r}px`,this.data.combo||(o.size=this.data.options.length,this.data.multiSelect&&(o.multiple=!0)),o.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue;for(const t of o.options)t.selected=t.value===e}));for(const t of this.data.options){const e=document.createElement("option");e.textContent=t.displayValue,e.value=t.exportValue,this.data.combo&&(e.style.fontSize=n),i.value.includes(t.exportValue)&&e.setAttribute("selected",!0),o.appendChild(e)}const s=(t,e)=>{const i=e?"value":"textContent",r=t.target.options;return t.target.multiple?Array.prototype.filter.call(r,(t=>t.selected)).map((t=>t[i])):-1===r.selectedIndex?null:r[r.selectedIndex][i]},a=t=>{const e=t.target.options;return Array.prototype.map.call(e,(t=>({displayValue:t.textContent,exportValue:t.value})))};return this.enableScripting&&this.hasJSActions?(o.addEventListener("updatefromsandbox",(i=>{const r={value(i){const r=i.detail.value,n=new Set(Array.isArray(r)?r:[r]);for(const t of o.options)t.selected=n.has(t.value);t.setValue(e,{value:s(i,!0)})},multipleSelection(t){o.multiple=!0},remove(i){const r=o.options,n=i.detail.remove;r[n].selected=!1,o.remove(n),r.length>0&&-1===Array.prototype.findIndex.call(r,(t=>t.selected))&&(r[0].selected=!0),t.setValue(e,{value:s(i,!0),items:a(i)})},clear(i){for(;0!==o.length;)o.remove(0);t.setValue(e,{value:null,items:[]})},insert(i){const{index:r,displayValue:n,exportValue:l}=i.detail.insert,c=document.createElement("option");c.textContent=n,c.value=l,o.insertBefore(c,o.children[r]),t.setValue(e,{value:s(i,!0),items:a(i)})},items(i){const{items:r}=i.detail;for(;0!==o.length;)o.remove(0);for(const t of r){const{displayValue:e,exportValue:i}=t,r=document.createElement("option");r.textContent=e,r.value=i,o.appendChild(r)}o.options.length>0&&(o.options[0].selected=!0),t.setValue(e,{value:s(i,!0),items:a(i)})},indices(i){const r=new Set(i.detail.indices);for(const t of i.target.options)t.selected=r.has(t.index);t.setValue(e,{value:s(i,!0)})},editable(t){t.target.disabled=!t.detail.editable}};this._dispatchEventFromSandbox(r,i)})),o.addEventListener("input",(i=>{const r=s(i,!0),n=s(i,!1);t.setValue(e,{value:r}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:n,changeEx:r,willCommit:!0,commitKey:1,keyDown:!1}})})),this._setEventListeners(o,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],(t=>t.target.checked))):o.addEventListener("input",(function(i){t.setValue(e,{value:s(i,!0)})})),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.appendChild(o),this.container}}class x extends p{constructor(t){super(t,{isRenderable:!!(t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str)})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const t=`[data-annotation-id="${this.data.parentId}"]`,e=this.layer.querySelectorAll(t);if(0===e.length)return this.container;const i=new S({container:this.container,trigger:Array.from(e),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),n=this.page,o=r.Util.normalizeRect([this.data.parentRect[0],n.view[3]-this.data.parentRect[1]+n.view[1],this.data.parentRect[2],n.view[3]-this.data.parentRect[3]+n.view[1]]),s=o[0]+this.data.parentRect[2]-this.data.parentRect[0],a=o[1];return this.container.style.transformOrigin=`${-s}px ${-a}px`,this.container.style.left=`${s}px`,this.container.style.top=`${a}px`,this.container.appendChild(i.render()),this.container}}class S{constructor(t){this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.titleObj=t.titleObj,this.modificationDate=t.modificationDate,this.contentsObj=t.contentsObj,this.richText=t.richText,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}render(){const t=document.createElement("div");t.className="popupWrapper",this.hideElement=this.hideWrapper?t:this.container,this.hideElement.hidden=!0;const e=document.createElement("div");e.className="popup";const i=this.color;if(i){const t=.7*(255-i[0])+i[0],n=.7*(255-i[1])+i[1],o=.7*(255-i[2])+i[2];e.style.backgroundColor=r.Util.makeHexColor(0|t,0|n,0|o)}const o=document.createElement("h1");o.dir=this.titleObj.dir,o.textContent=this.titleObj.str,e.appendChild(o);const s=n.PDFDateString.toDateObject(this.modificationDate);if(s){const t=document.createElement("span");t.className="popupDate",t.textContent="{{date}}, {{time}}",t.dataset.l10nId="annotation_date_string",t.dataset.l10nArgs=JSON.stringify({date:s.toLocaleDateString(),time:s.toLocaleTimeString()}),e.appendChild(t)}if(!this.richText?.str||this.contentsObj?.str&&this.contentsObj.str!==this.richText.str){const t=this._formatContents(this.contentsObj);e.appendChild(t)}else a.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:e}),e.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const t of this.trigger)t.addEventListener("click",this._toggle.bind(this)),t.addEventListener("mouseover",this._show.bind(this,!1)),t.addEventListener("mouseout",this._hide.bind(this,!1));return e.addEventListener("click",this._hide.bind(this,!0)),t.appendChild(e),t}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.className="popupContent",i.dir=e;const r=t.split(/(?:\r\n?|\n)/);for(let t=0,e=r.length;t<e;++t){const n=r[t];i.appendChild(document.createTextNode(n)),t<e-1&&i.appendChild(document.createElement("br"))}return i}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(t=!1){t&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(t=!0){t&&(this.pinned=!1),this.hideElement.hidden||this.pinned||(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class k extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class C extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const t=this.data,{width:e,height:i}=h(t.rect),r=this.svgFactory.create(e,i),n=this.svgFactory.createElement("svg:line");return n.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),n.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),n.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),n.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),n.setAttribute("stroke-width",t.borderStyle.width||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),r.appendChild(n),this.container.append(r),this._createPopup(n,t),this.container}}class A extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const t=this.data,{width:e,height:i}=h(t.rect),r=this.svgFactory.create(e,i),n=t.borderStyle.width,o=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",n/2),o.setAttribute("y",n/2),o.setAttribute("width",e-n),o.setAttribute("height",i-n),o.setAttribute("stroke-width",n||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.appendChild(o),this.container.append(r),this._createPopup(o,t),this.container}}class _ extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const t=this.data,{width:e,height:i}=h(t.rect),r=this.svgFactory.create(e,i),n=t.borderStyle.width,o=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",e/2),o.setAttribute("cy",i/2),o.setAttribute("rx",e/2-n/2),o.setAttribute("ry",i/2-n/2),o.setAttribute("stroke-width",n||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.appendChild(o),this.container.append(r),this._createPopup(o,t),this.container}}class T extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:e,height:i}=h(t.rect),r=this.svgFactory.create(e,i);let n=[];for(const e of t.vertices){const i=e.x-t.rect[0],r=t.rect[3]-e.y;n.push(i+","+r)}n=n.join(" ");const o=this.svgFactory.createElement(this.svgElementName);return o.setAttribute("points",n),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.appendChild(o),this.container.append(r),this._createPopup(o,t),this.container}}class O extends T{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class E extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class M extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:e,height:i}=h(t.rect),r=this.svgFactory.create(e,i);for(const e of t.inkLists){let i=[];for(const r of e){const e=r.x-t.rect[0],n=t.rect[3]-r.y;i.push(`${e},${n}`)}i=i.join(" ");const n=this.svgFactory.createElement(this.svgElementName);n.setAttribute("points",i),n.setAttribute("stroke-width",t.borderStyle.width||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),this._createPopup(n,t),r.appendChild(n)}return this.container.append(r),this.container}}class P extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class I extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class D extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class F extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class R extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class L extends p{constructor(t){super(t,{isRenderable:!0});const{filename:e,content:i}=this.data.file;this.filename=(0,n.getFilenameFromUrl)(e),this.content=i,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:e,content:i})}render(){this.container.className="fileAttachmentAnnotation";const t=document.createElement("div");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(t,this.data),this.container.appendChild(t),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}e.AnnotationLayer=class{static render(t){const e=[],i=[];for(const n of t.annotations){if(!n)continue;const{width:t,height:o}=h(n.rect);t<=0||o<=0||(n.annotationType!==r.AnnotationType.POPUP?e.push(n):i.push(n))}i.length&&e.push(...i);const s=t.div;for(const i of e){const e=u.create({data:i,layer:s,page:t.page,viewport:t.viewport,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new n.DOMSVGFactory,annotationStorage:t.annotationStorage||new o.AnnotationStorage,enableScripting:t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,mouseState:t.mouseState||{isDown:!1}});if(e.isRenderable){const t=e.render();if(i.hidden&&(t.style.visibility="hidden"),Array.isArray(t))for(const e of t)s.appendChild(e);else e instanceof x?s.prepend(t):s.appendChild(t)}}this.#u(s,t.annotationCanvasMap)}static update(t){const{page:e,viewport:i,annotations:n,annotationCanvasMap:o,div:s}=t,a=i.transform,l=`matrix(${a.join(",")})`;let c,h;for(const t of n){const i=s.querySelectorAll(`[data-annotation-id="${t.id}"]`);if(i)for(const n of i)if(t.hasOwnCanvas){const i=r.Util.normalizeRect([t.rect[0],e.view[3]-t.rect[1]+e.view[1],t.rect[2],e.view[3]-t.rect[3]+e.view[1]]);if(!h){c=Math.abs(a[0]||a[1]);const t=a.slice();for(let e=0;e<4;e++)t[e]=Math.sign(t[e]);h=`matrix(${t.join(",")})`}const o=i[0]*c,s=i[1]*c;n.style.left=`${o}px`,n.style.top=`${s}px`,n.style.transformOrigin=`${-o}px ${-s}px`,n.style.transform=h}else n.style.transform=l}this.#u(s,o),s.hidden=!1}static#u(t,e){if(e){for(const[i,r]of e){const e=t.querySelector(`[data-annotation-id="${i}"]`);if(!e)continue;const{firstChild:n}=e;"CANVAS"===n.nodeName?e.replaceChild(r,n):e.insertBefore(r,n)}e.clear()}}}},(t,e)=>{function i(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0,e.ColorConverters=class{static CMYK_G([t,e,i,r]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_HTML([t]){const e=i(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_HTML([t,e,r]){return`#${i(t)}${i(e)}${i(r)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([t,e,i,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,i+r),1-Math.min(1,e+r)]}static CMYK_HTML(t){return this.RGB_HTML(this.CMYK_RGB(t))}static RGB_CMYK([t,e,i]){const r=1-t,n=1-e,o=1-i;return["CMYK",r,n,o,Math.min(r,n,o)]}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var r=i(18);e.XfaLayer=class{static setupStorage(t,e,i,r,n){const o=r.getValue(e,{value:null});switch(i.name){case"textarea":if(null!==o.value&&(t.textContent=o.value),"print"===n)break;t.addEventListener("input",(t=>{r.setValue(e,{value:t.target.value})}));break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){if(o.value===i.attributes.xfaOn?t.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&t.removeAttribute("checked"),"print"===n)break;t.addEventListener("change",(t=>{r.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})}))}else{if(null!==o.value&&t.setAttribute("value",o.value),"print"===n)break;t.addEventListener("input",(t=>{r.setValue(e,{value:t.target.value})}))}break;case"select":if(null!==o.value)for(const t of i.children)t.attributes.value===o.value&&(t.attributes.selected=!0);t.addEventListener("input",(t=>{const i=t.target.options,n=-1===i.selectedIndex?"":i[i.selectedIndex].value;r.setValue(e,{value:n})}))}}static setAttributes({html:t,element:e,storage:i=null,intent:r,linkService:n}){const{attributes:o}=e,s=t instanceof HTMLAnchorElement;"radio"===o.type&&(o.name=`${o.name}-${r}`);for(const[e,i]of Object.entries(o))if(null!=i&&"dataId"!==e)if("style"!==e)if("textContent"===e)t.textContent=i;else if("class"===e)i.length&&t.setAttribute(e,i.join(" "));else{if(s&&("href"===e||"newWindow"===e))continue;t.setAttribute(e,i)}else Object.assign(t.style,i);s&&n.addLinkAttributes(t,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(t,o.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,n=t.xfaHtml,o=t.intent||"display",s=document.createElement(n.name);n.attributes&&this.setAttributes({html:s,element:n,intent:o,linkService:i});const a=[[n,-1,s]],l=t.div;if(l.appendChild(s),t.viewport){const e=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=e}"richText"!==o&&l.setAttribute("class","xfaLayer xfaFont");const c=[];for(;a.length>0;){const[t,n,s]=a[a.length-1];if(n+1===t.children.length){a.pop();continue}const l=t.children[++a[a.length-1][1]];if(null===l)continue;const{name:h}=l;if("#text"===h){const t=document.createTextNode(l.value);c.push(t),s.appendChild(t);continue}let u;if(u=l?.attributes?.xmlns?document.createElementNS(l.attributes.xmlns,h):document.createElement(h),s.appendChild(u),l.attributes&&this.setAttributes({html:u,element:l,storage:e,intent:o,linkService:i}),l.children&&l.children.length>0)a.push([l,-1,u]);else if(l.value){const t=document.createTextNode(l.value);r.XfaText.shouldBuildText(h)&&c.push(t),u.appendChild(t)}}for(const t of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))t.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.renderTextLayer=function(t){const e=new p({textContent:t.textContent,textContentStream:t.textContentStream,container:t.container,viewport:t.viewport,textDivs:t.textDivs,textContentItemsStr:t.textContentItemsStr,enhanceTextSelection:t.enhanceTextSelection});return e._render(t.timeout),e};var r=i(1);const n=30,o=new Map,s=/^\s+$/g;function a(t,e,i,a){const l=document.createElement("span"),c=t._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL};t._textDivs.push(l);const h=r.Util.transform(t._viewport.transform,e.transform);let u=Math.atan2(h[1],h[0]);const p=i[e.fontName];p.vertical&&(u+=Math.PI/2);const d=Math.hypot(h[2],h[3]),f=d*function(t,e){const i=o.get(t);if(i)return i;e.save(),e.font=`30px ${t}`;const r=e.measureText("");let s=r.fontBoundingBoxAscent,a=Math.abs(r.fontBoundingBoxDescent);if(s){e.restore();const i=s/(s+a);return o.set(t,i),i}e.strokeStyle="red",e.clearRect(0,0,n,n),e.strokeText("g",0,0);let l=e.getImageData(0,0,n,n).data;a=0;for(let t=l.length-1-3;t>=0;t-=4)if(l[t]>0){a=Math.ceil(t/4/n);break}e.clearRect(0,0,n,n),e.strokeText("A",0,n),l=e.getImageData(0,0,n,n).data,s=0;for(let t=0,e=l.length;t<e;t+=4)if(l[t]>0){s=n-Math.floor(t/4/n);break}if(e.restore(),s){const e=s/(s+a);return o.set(t,e),e}return o.set(t,.8),.8}(p.fontFamily,a);let g,m;0===u?(g=h[4],m=h[5]-f):(g=h[4]+f*Math.sin(u),m=h[5]-f*Math.cos(u)),l.style.left=`${g}px`,l.style.top=`${m}px`,l.style.fontSize=`${d}px`,l.style.fontFamily=p.fontFamily,l.setAttribute("role","presentation"),l.textContent=e.str,l.dir=e.dir,t._fontInspectorEnabled&&(l.dataset.fontName=e.fontName),0!==u&&(c.angle=u*(180/Math.PI));let y=!1;if(e.str.length>1||t._enhanceTextSelection&&s.test(e.str))y=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),i=Math.abs(e.transform[3]);t!==i&&Math.max(t,i)/Math.min(t,i)>1.5&&(y=!0)}if(y&&(p.vertical?c.canvasWidth=e.height*t._viewport.scale:c.canvasWidth=e.width*t._viewport.scale),t._textDivProperties.set(l,c),t._textContentStream&&t._layoutText(l),t._enhanceTextSelection&&c.hasText){let i=1,n=0;0!==u&&(i=Math.cos(u),n=Math.sin(u));const o=(p.vertical?e.height:e.width)*t._viewport.scale,s=d;let a,c;0!==u?(a=[i,n,-n,i,g,m],c=r.Util.getAxialAlignedBoundingBox([0,0,o,s],a)):c=[g,m,g+o,m+s],t._bounds.push({left:c[0],top:c[1],right:c[2],bottom:c[3],div:l,size:[o,s],m:a})}}function l(t){if(t._canceled)return;const e=t._textDivs,i=t._capability,r=e.length;if(r>1e5)return t._renderingDone=!0,void i.resolve();if(!t._textContentStream)for(let i=0;i<r;i++)t._layoutText(e[i]);t._renderingDone=!0,i.resolve()}function c(t,e,i){let r=0;for(let n=0;n<i;n++){const i=t[e++];i>0&&(r=r?Math.min(i,r):i)}return r}function h(t){const e=t._bounds,i=t._viewport,n=function(t,e,i){const r=i.map((function(t,e){return{x1:t.left,y1:t.top,x2:t.right,y2:t.bottom,index:e,x1New:void 0,x2New:void 0}}));u(t,r);const n=new Array(i.length);for(const t of r){const e=t.index;n[e]={left:t.x1New,top:0,right:t.x2New,bottom:0}}i.map((function(e,i){const o=n[i],s=r[i];s.x1=e.top,s.y1=t-o.right,s.x2=e.bottom,s.y2=t-o.left,s.index=i,s.x1New=void 0,s.x2New=void 0})),u(e,r);for(const t of r){const e=t.index;n[e].top=t.x1New,n[e].bottom=t.x2New}return n}(i.width,i.height,e);for(let i=0;i<n.length;i++){const o=e[i].div,s=t._textDivProperties.get(o);if(0===s.angle){s.paddingLeft=e[i].left-n[i].left,s.paddingTop=e[i].top-n[i].top,s.paddingRight=n[i].right-e[i].right,s.paddingBottom=n[i].bottom-e[i].bottom,t._textDivProperties.set(o,s);continue}const a=n[i],l=e[i],h=l.m,u=h[0],p=h[1],d=[[0,0],[0,l.size[1]],[l.size[0],0],l.size],f=new Float64Array(64);for(let t=0,e=d.length;t<e;t++){const e=r.Util.applyTransform(d[t],h);f[t+0]=u&&(a.left-e[0])/u,f[t+4]=p&&(a.top-e[1])/p,f[t+8]=u&&(a.right-e[0])/u,f[t+12]=p&&(a.bottom-e[1])/p,f[t+16]=p&&(a.left-e[0])/-p,f[t+20]=u&&(a.top-e[1])/u,f[t+24]=p&&(a.right-e[0])/-p,f[t+28]=u&&(a.bottom-e[1])/u,f[t+32]=u&&(a.left-e[0])/-u,f[t+36]=p&&(a.top-e[1])/-p,f[t+40]=u&&(a.right-e[0])/-u,f[t+44]=p&&(a.bottom-e[1])/-p,f[t+48]=p&&(a.left-e[0])/p,f[t+52]=u&&(a.top-e[1])/-u,f[t+56]=p&&(a.right-e[0])/p,f[t+60]=u&&(a.bottom-e[1])/-u}const g=1+Math.min(Math.abs(u),Math.abs(p));s.paddingLeft=c(f,32,16)/g,s.paddingTop=c(f,48,16)/g,s.paddingRight=c(f,0,16)/g,s.paddingBottom=c(f,16,16)/g,t._textDivProperties.set(o,s)}}function u(t,e){e.sort((function(t,e){return t.x1-e.x1||t.index-e.index}));const i=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const t of e){let e=0;for(;e<i.length&&i[e].end<=t.y1;)e++;let r,n,o=i.length-1;for(;o>=0&&i[o].start>=t.y2;)o--;let s,a,l=-1/0;for(s=e;s<=o;s++){let e;r=i[s],n=r.boundary,e=n.x2>t.x1?n.index>t.index?n.x1New:t.x1:void 0===n.x2New?(n.x2+t.x1)/2:n.x2New,e>l&&(l=e)}for(t.x1New=l,s=e;s<=o;s++)r=i[s],n=r.boundary,void 0===n.x2New?n.x2>t.x1?n.index>t.index&&(n.x2New=n.x2):n.x2New=l:n.x2New>l&&(n.x2New=Math.max(l,n.x2));const c=[];let h=null;for(s=e;s<=o;s++){r=i[s],n=r.boundary;const e=n.x2>t.x2?n:t;h===e?c[c.length-1].end=r.end:(c.push({start:r.start,end:r.end,boundary:e}),h=e)}for(i[e].start<t.y1&&(c[0].start=t.y1,c.unshift({start:i[e].start,end:t.y1,boundary:i[e].boundary})),t.y2<i[o].end&&(c[c.length-1].end=t.y2,c.push({start:t.y2,end:i[o].end,boundary:i[o].boundary})),s=e;s<=o;s++){if(r=i[s],n=r.boundary,void 0!==n.x2New)continue;let t=!1;for(a=e-1;!t&&a>=0&&i[a].start>=n.y1;a--)t=i[a].boundary===n;for(a=o+1;!t&&a<i.length&&i[a].end<=n.y2;a++)t=i[a].boundary===n;for(a=0;!t&&a<c.length;a++)t=c[a].boundary===n;t||(n.x2New=l)}Array.prototype.splice.apply(i,[e,o-e+1].concat(c))}for(const e of i){const i=e.boundary;void 0===i.x2New&&(i.x2New=Math.max(t,i.x2))}}class p{constructor({textContent:t,textContentStream:e,container:i,viewport:n,textDivs:o,textContentItemsStr:s,enhanceTextSelection:a}){this._textContent=t,this._textContentStream=e,this._container=i,this._document=i.ownerDocument,this._viewport=n,this._textDivs=o||[],this._textContentItemsStr=s||[],this._enhanceTextSelection=!!a,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,r.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally((()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)})).catch((()=>{}))}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch((()=>{})),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(t,e){for(let i=0,r=t.length;i<r;i++)if(void 0!==t[i].str)this._textContentItemsStr.push(t[i].str),a(this,t[i],e,this._layoutTextCtx);else if("beginMarkedContentProps"===t[i].type||"beginMarkedContent"===t[i].type){const e=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==t[i].id&&this._container.setAttribute("id",`${t[i].id}`),e.appendChild(this._container)}else"endMarkedContent"===t[i].type&&(this._container=this._container.parentNode)}_layoutText(t){const e=this._textDivProperties.get(t);let i="";if(0!==e.canvasWidth&&e.hasText){const{fontSize:r,fontFamily:n}=t.style;r===this._layoutTextLastFontSize&&n===this._layoutTextLastFontFamily||(this._layoutTextCtx.font=`${r} ${n}`,this._layoutTextLastFontSize=r,this._layoutTextLastFontFamily=n);const{width:o}=this._layoutTextCtx.measureText(t.textContent);if(o>0){const t=e.canvasWidth/o;this._enhanceTextSelection&&(e.scale=t),i=`scaleX(${t})`}}if(0!==e.angle&&(i=`rotate(${e.angle}deg) ${i}`),i.length>0&&(this._enhanceTextSelection&&(e.originalTransform=i),t.style.transform=i),e.hasText&&this._container.appendChild(t),e.hasEOL){const t=document.createElement("br");t.setAttribute("role","presentation"),this._container.appendChild(t)}}_render(t=0){const e=(0,r.createPromiseCapability)();let i=Object.create(null);const o=this._document.createElement("canvas");if(o.height=o.width=n,this._layoutTextCtx=o.getContext("2d",{alpha:!1}),this._textContent){const t=this._textContent.items,i=this._textContent.styles;this._processItems(t,i),e.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const t=()=>{this._reader.read().then((({value:r,done:n})=>{n?e.resolve():(Object.assign(i,r.styles),this._processItems(r.items,i),t())}),e.reject)};this._reader=this._textContentStream.getReader(),t()}}e.promise.then((()=>{i=null,t?this._renderTimer=setTimeout((()=>{l(this),this._renderTimer=null}),t):l(this)}),this._capability.reject)}expandTextDivs(t=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(h(this),this._bounds=null);const e=[],i=[];for(let r=0,n=this._textDivs.length;r<n;r++){const n=this._textDivs[r],o=this._textDivProperties.get(n);o.hasText&&(t?(e.length=0,i.length=0,o.originalTransform&&e.push(o.originalTransform),o.paddingTop>0?(i.push(`${o.paddingTop}px`),e.push(`translateY(${-o.paddingTop}px)`)):i.push(0),o.paddingRight>0?i.push(o.paddingRight/o.scale+"px"):i.push(0),o.paddingBottom>0?i.push(`${o.paddingBottom}px`):i.push(0),o.paddingLeft>0?(i.push(o.paddingLeft/o.scale+"px"),e.push(`translateX(${-o.paddingLeft/o.scale}px)`)):i.push(0),n.style.padding=i.join(" "),e.length&&(n.style.transform=e.join(" "))):(n.style.padding=null,n.style.transform=o.originalTransform))}}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var r=i(1),n=i(5),o=i(3);let s=class{constructor(){(0,r.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=s;{const a={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},l="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/1999/xlink",h=["butt","round","square"],u=["miter","round","bevel"],p=function(t,e="",i=!1){if(URL.createObjectURL&&"undefined"!=typeof Blob&&!i)return URL.createObjectURL(new Blob([t],{type:e}));const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n=`data:${e};base64,`;for(let e=0,i=t.length;e<i;e+=3){const o=255&t[e],s=255&t[e+1],a=255&t[e+2];n+=r[o>>2]+r[(3&o)<<4|s>>4]+r[e+1<i?(15&s)<<2|a>>6:64]+r[e+2<i?63&a:64]}return n},d=function(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),e=new Int32Array(256);for(let t=0;t<256;t++){let i=t;for(let t=0;t<8;t++)i=1&i?3988292384^i>>1&2147483647:i>>1&2147483647;e[t]=i}function i(t,i,r,n){let o=n;const s=i.length;r[o]=s>>24&255,r[o+1]=s>>16&255,r[o+2]=s>>8&255,r[o+3]=255&s,o+=4,r[o]=255&t.charCodeAt(0),r[o+1]=255&t.charCodeAt(1),r[o+2]=255&t.charCodeAt(2),r[o+3]=255&t.charCodeAt(3),o+=4,r.set(i,o),o+=i.length;const a=function(t,i,r){let n=-1;for(let o=i;o<r;o++){const i=255&(n^t[o]);n=n>>>8^e[i]}return-1^n}(r,n+4,o);r[o]=a>>24&255,r[o+1]=a>>16&255,r[o+2]=a>>8&255,r[o+3]=255&a}function n(t){let e=t.length;const i=65535,r=Math.ceil(e/i),n=new Uint8Array(2+e+5*r+4);let o=0;n[o++]=120,n[o++]=156;let s=0;for(;e>i;)n[o++]=0,n[o++]=255,n[o++]=255,n[o++]=0,n[o++]=0,n.set(t.subarray(s,s+i),o),o+=i,s+=i,e-=i;n[o++]=1,n[o++]=255&e,n[o++]=e>>8&255,n[o++]=255&~e,n[o++]=(65535&~e)>>8&255,n.set(t.subarray(s),o),o+=t.length-s;const a=function(t,e,i){let r=1,n=0;for(let o=e;o<i;++o)r=(r+(255&t[o]))%65521,n=(n+r)%65521;return n<<16|r}(t,0,t.length);return n[o++]=a>>24&255,n[o++]=a>>16&255,n[o++]=a>>8&255,n[o++]=255&a,n}function s(e,s,a,l){const c=e.width,h=e.height;let u,d,f;const g=e.data;switch(s){case r.ImageKind.GRAYSCALE_1BPP:d=0,u=1,f=c+7>>3;break;case r.ImageKind.RGB_24BPP:d=2,u=8,f=3*c;break;case r.ImageKind.RGBA_32BPP:d=6,u=8,f=4*c;break;default:throw new Error("invalid format")}const m=new Uint8Array((1+f)*h);let y=0,v=0;for(let t=0;t<h;++t)m[y++]=0,m.set(g.subarray(v,v+f),y),v+=f,y+=f;if(s===r.ImageKind.GRAYSCALE_1BPP&&l){y=0;for(let t=0;t<h;t++){y++;for(let t=0;t<f;t++)m[y++]^=255}}const b=new Uint8Array([c>>24&255,c>>16&255,c>>8&255,255&c,h>>24&255,h>>16&255,h>>8&255,255&h,u,d,0,0,0]),w=function(t){if(!o.isNodeJS)return n(t);try{let e;e=parseInt(process.versions.node)>=8?t:Buffer.from(t);const i=__webpack_require__(258).deflateSync(e,{level:9});return i instanceof Uint8Array?i:new Uint8Array(i)}catch(t){(0,r.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return n(t)}(m),x=t.length+36+b.length+w.length,S=new Uint8Array(x);let k=0;return S.set(t,k),k+=t.length,i("IHDR",b,S,k),k+=12+b.length,i("IDATA",w,S,k),k+=12+w.length,i("IEND",new Uint8Array(0),S,k),p(S,"image/png",a)}return function(t,e,i){return s(t,void 0===t.kind?r.ImageKind.GRAYSCALE_1BPP:t.kind,e,i)}}();class f{constructor(){this.fontSizeScale=1,this.fontWeight=a.fontWeight,this.fontSize=0,this.textMatrix=r.IDENTITY_MATRIX,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=r.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=a.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(t,e){this.x=t,this.y=e}}function g(t){let e=[];const i=[];for(const r of t)"save"!==r.fn?"restore"===r.fn?e=i.pop():e.push(r):(e.push({fnId:92,fn:"group",items:[]}),i.push(e),e=e[e.length-1].items);return e}function m(t){if(Number.isInteger(t))return t.toString();const e=t.toFixed(10);let i=e.length-1;if("0"!==e[i])return e;do{i--}while("0"===e[i]);return e.substring(0,"."===e[i]?i:i+1)}function y(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":`scale(${m(t[0])} ${m(t[3])})`;if(t[0]===t[3]&&t[1]===-t[2])return`rotate(${m(180*Math.acos(t[0])/Math.PI)})`}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return`translate(${m(t[4])} ${m(t[5])})`;return`matrix(${m(t[0])} ${m(t[1])} ${m(t[2])} ${m(t[3])} ${m(t[4])} ${m(t[5])})`}let v=0,b=0,w=0;e.SVGGraphics=s=class{constructor(t,e,i=!1){this.svgFactory=new n.DOMSVGFactory,this.current=new f,this.transformMatrix=r.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=e,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!i,this._operatorIdMapping=[];for(const t in r.OPS)this._operatorIdMapping[r.OPS[t]]=t}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t),this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(t){this.save(),this.executeOpTree(t),this.restore()}loadDependencies(t){const e=t.fnArray,i=t.argsArray;for(let t=0,n=e.length;t<n;t++)if(e[t]===r.OPS.dependency)for(const e of i[t]){const t=e.startsWith("g_")?this.commonObjs:this.objs,i=new Promise((i=>{t.get(e,i)}));this.current.dependencies.push(i)}return Promise.all(this.current.dependencies)}transform(t,e,i,n,o,s){const a=[t,e,i,n,o,s];this.transformMatrix=r.Util.transform(this.transformMatrix,a),this.tgrp=null}getSVG(t,e){this.viewport=e;const i=this._initialize(e);return this.loadDependencies(t).then((()=>(this.transformMatrix=r.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(t)),i)))}convertOpList(t){const e=this._operatorIdMapping,i=t.argsArray,r=t.fnArray,n=[];for(let t=0,o=r.length;t<o;t++){const o=r[t];n.push({fnId:o,fn:e[o],args:i[t]})}return g(n)}executeOpTree(t){for(const e of t){const t=e.fn,i=e.fnId,n=e.args;switch(0|i){case r.OPS.beginText:this.beginText();break;case r.OPS.dependency:break;case r.OPS.setLeading:this.setLeading(n);break;case r.OPS.setLeadingMoveText:this.setLeadingMoveText(n[0],n[1]);break;case r.OPS.setFont:this.setFont(n);break;case r.OPS.showText:case r.OPS.showSpacedText:this.showText(n[0]);break;case r.OPS.endText:this.endText();break;case r.OPS.moveText:this.moveText(n[0],n[1]);break;case r.OPS.setCharSpacing:this.setCharSpacing(n[0]);break;case r.OPS.setWordSpacing:this.setWordSpacing(n[0]);break;case r.OPS.setHScale:this.setHScale(n[0]);break;case r.OPS.setTextMatrix:this.setTextMatrix(n[0],n[1],n[2],n[3],n[4],n[5]);break;case r.OPS.setTextRise:this.setTextRise(n[0]);break;case r.OPS.setTextRenderingMode:this.setTextRenderingMode(n[0]);break;case r.OPS.setLineWidth:this.setLineWidth(n[0]);break;case r.OPS.setLineJoin:this.setLineJoin(n[0]);break;case r.OPS.setLineCap:this.setLineCap(n[0]);break;case r.OPS.setMiterLimit:this.setMiterLimit(n[0]);break;case r.OPS.setFillRGBColor:this.setFillRGBColor(n[0],n[1],n[2]);break;case r.OPS.setStrokeRGBColor:this.setStrokeRGBColor(n[0],n[1],n[2]);break;case r.OPS.setStrokeColorN:this.setStrokeColorN(n);break;case r.OPS.setFillColorN:this.setFillColorN(n);break;case r.OPS.shadingFill:this.shadingFill(n[0]);break;case r.OPS.setDash:this.setDash(n[0],n[1]);break;case r.OPS.setRenderingIntent:this.setRenderingIntent(n[0]);break;case r.OPS.setFlatness:this.setFlatness(n[0]);break;case r.OPS.setGState:this.setGState(n[0]);break;case r.OPS.fill:this.fill();break;case r.OPS.eoFill:this.eoFill();break;case r.OPS.stroke:this.stroke();break;case r.OPS.fillStroke:this.fillStroke();break;case r.OPS.eoFillStroke:this.eoFillStroke();break;case r.OPS.clip:this.clip("nonzero");break;case r.OPS.eoClip:this.clip("evenodd");break;case r.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case r.OPS.paintImageXObject:this.paintImageXObject(n[0]);break;case r.OPS.paintInlineImageXObject:this.paintInlineImageXObject(n[0]);break;case r.OPS.paintImageMaskXObject:this.paintImageMaskXObject(n[0]);break;case r.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(n[0],n[1]);break;case r.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case r.OPS.closePath:this.closePath();break;case r.OPS.closeStroke:this.closeStroke();break;case r.OPS.closeFillStroke:this.closeFillStroke();break;case r.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case r.OPS.nextLine:this.nextLine();break;case r.OPS.transform:this.transform(n[0],n[1],n[2],n[3],n[4],n[5]);break;case r.OPS.constructPath:this.constructPath(n[0],n[1]);break;case r.OPS.endPath:this.endPath();break;case 92:this.group(e.items);break;default:(0,r.warn)(`Unimplemented operator ${t}`)}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,e,i,r,n,o){const s=this.current;s.textMatrix=s.lineMatrix=[t,e,i,r,n,o],s.textMatrixScale=Math.hypot(t,e),s.x=s.lineX=0,s.y=s.lineY=0,s.xcoords=[],s.ycoords=[],s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${m(s.fontSize)}px`),s.tspan.setAttributeNS(null,"y",m(-s.y)),s.txtElement=this.svgFactory.createElement("svg:text"),s.txtElement.appendChild(s.tspan)}beginText(){const t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=r.IDENTITY_MATRIX,t.lineMatrix=r.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}moveText(t,e){const i=this.current;i.x=i.lineX+=t,i.y=i.lineY+=e,i.xcoords=[],i.ycoords=[],i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",`${m(i.fontSize)}px`),i.tspan.setAttributeNS(null,"y",m(-i.y))}showText(t){const e=this.current,i=e.font,n=e.fontSize;if(0===n)return;const o=e.fontSizeScale,s=e.charSpacing,c=e.wordSpacing,h=e.fontDirection,u=e.textHScale*h,p=i.vertical,d=p?1:-1,f=i.defaultVMetrics,g=n*e.fontMatrix[0];let v=0;for(const r of t){if(null===r){v+=h*c;continue}if("number"==typeof r){v+=d*r*n/1e3;continue}const t=(r.isSpace?c:0)+s,a=r.fontChar;let l,u,m,y=r.width;if(p){let t;const e=r.vmetric||f;t=r.vmetric?e[1]:.5*y,t=-t*g;const i=e[2]*g;y=e?-e[0]:y,l=t/o,u=(v+i)/o}else l=v/o,u=0;(r.isInFont||i.missingFile)&&(e.xcoords.push(e.x+l),p&&e.ycoords.push(-e.y+u),e.tspan.textContent+=a),m=p?y*g-t*h:y*g+t*h,v+=m}e.tspan.setAttributeNS(null,"x",e.xcoords.map(m).join(" ")),p?e.tspan.setAttributeNS(null,"y",e.ycoords.map(m).join(" ")):e.tspan.setAttributeNS(null,"y",m(-e.y)),p?e.y-=v:e.x+=v*u,e.tspan.setAttributeNS(null,"font-family",e.fontFamily),e.tspan.setAttributeNS(null,"font-size",`${m(e.fontSize)}px`),e.fontStyle!==a.fontStyle&&e.tspan.setAttributeNS(null,"font-style",e.fontStyle),e.fontWeight!==a.fontWeight&&e.tspan.setAttributeNS(null,"font-weight",e.fontWeight);const b=e.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;if(b===r.TextRenderingMode.FILL||b===r.TextRenderingMode.FILL_STROKE?(e.fillColor!==a.fillColor&&e.tspan.setAttributeNS(null,"fill",e.fillColor),e.fillAlpha<1&&e.tspan.setAttributeNS(null,"fill-opacity",e.fillAlpha)):e.textRenderingMode===r.TextRenderingMode.ADD_TO_PATH?e.tspan.setAttributeNS(null,"fill","transparent"):e.tspan.setAttributeNS(null,"fill","none"),b===r.TextRenderingMode.STROKE||b===r.TextRenderingMode.FILL_STROKE){const t=1/(e.textMatrixScale||1);this._setStrokeAttributes(e.tspan,t)}let w=e.textMatrix;0!==e.textRise&&(w=w.slice(),w[5]+=e.textRise),e.txtElement.setAttributeNS(null,"transform",`${y(w)} scale(${m(u)}, -1)`),e.txtElement.setAttributeNS(l,"xml:space","preserve"),e.txtElement.appendChild(e.tspan),e.txtgrp.appendChild(e.txtElement),this._ensureTransformGroup().appendChild(e.txtElement)}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const e=p(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}"; src: url(${e}); }\n`}setFont(t){const e=this.current,i=this.commonObjs.get(t[0]);let n=t[1];e.font=i,!this.embedFonts||i.missingFile||this.embeddedFonts[i.loadedName]||(this.addFontStyle(i),this.embeddedFonts[i.loadedName]=i),e.fontMatrix=i.fontMatrix||r.FONT_IDENTITY_MATRIX;let o="normal";i.black?o="900":i.bold&&(o="bold");const s=i.italic?"italic":"normal";n<0?(n=-n,e.fontDirection=-1):e.fontDirection=1,e.fontSize=n,e.fontFamily=i.loadedName,e.fontWeight=o,e.fontStyle=s,e.tspan=this.svgFactory.createElement("svg:tspan"),e.tspan.setAttributeNS(null,"y",m(-e.y)),e.xcoords=[],e.ycoords=[]}endText(){const t=this.current;t.textRenderingMode&r.TextRenderingMode.ADD_TO_PATH_FLAG&&t.txtElement?.hasChildNodes()&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=h[t]}setLineJoin(t){this.current.lineJoin=u[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,e,i){this.current.strokeColor=r.Util.makeHexColor(t,e,i)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,e,i){this.current.fillColor=r.Util.makeHexColor(t,e,i),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const e=this.viewport.width,i=this.viewport.height,n=r.Util.inverseTransform(this.transformMatrix),o=r.Util.applyTransform([0,0],n),s=r.Util.applyTransform([0,i],n),a=r.Util.applyTransform([e,0],n),l=r.Util.applyTransform([e,i],n),c=Math.min(o[0],s[0],a[0],l[0]),h=Math.min(o[1],s[1],a[1],l[1]),u=Math.max(o[0],s[0],a[0],l[0]),p=Math.max(o[1],s[1],a[1],l[1]),d=this.svgFactory.createElement("svg:rect");d.setAttributeNS(null,"x",c),d.setAttributeNS(null,"y",h),d.setAttributeNS(null,"width",u-c),d.setAttributeNS(null,"height",p-h),d.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&d.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(d)}_makeColorN_Pattern(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){const e=t[1],i=t[2],n=t[3]||r.IDENTITY_MATRIX,[o,s,a,l]=t[4],c=t[5],h=t[6],u=t[7],p="shading"+w++,[d,f,g,m]=r.Util.normalizeRect([...r.Util.applyTransform([o,s],n),...r.Util.applyTransform([a,l],n)]),[y,v]=r.Util.singularValueDecompose2dScale(n),b=c*y,x=h*v,S=this.svgFactory.createElement("svg:pattern");S.setAttributeNS(null,"id",p),S.setAttributeNS(null,"patternUnits","userSpaceOnUse"),S.setAttributeNS(null,"width",b),S.setAttributeNS(null,"height",x),S.setAttributeNS(null,"x",`${d}`),S.setAttributeNS(null,"y",`${f}`);const k=this.svg,C=this.transformMatrix,A=this.current.fillColor,_=this.current.strokeColor,T=this.svgFactory.create(g-d,m-f);if(this.svg=T,this.transformMatrix=n,2===u){const t=r.Util.makeHexColor(...e);this.current.fillColor=t,this.current.strokeColor=t}return this.executeOpTree(this.convertOpList(i)),this.svg=k,this.transformMatrix=C,this.current.fillColor=A,this.current.strokeColor=_,S.appendChild(T.childNodes[0]),this.defs.appendChild(S),`url(#${p})`}_makeShadingPattern(t){switch("string"==typeof t&&(t=this.objs.get(t)),t[0]){case"RadialAxial":const e="shading"+w++,i=t[3];let n;switch(t[1]){case"axial":const i=t[4],r=t[5];n=this.svgFactory.createElement("svg:linearGradient"),n.setAttributeNS(null,"id",e),n.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),n.setAttributeNS(null,"x1",i[0]),n.setAttributeNS(null,"y1",i[1]),n.setAttributeNS(null,"x2",r[0]),n.setAttributeNS(null,"y2",r[1]);break;case"radial":const o=t[4],s=t[5],a=t[6],l=t[7];n=this.svgFactory.createElement("svg:radialGradient"),n.setAttributeNS(null,"id",e),n.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),n.setAttributeNS(null,"cx",s[0]),n.setAttributeNS(null,"cy",s[1]),n.setAttributeNS(null,"r",l),n.setAttributeNS(null,"fx",o[0]),n.setAttributeNS(null,"fy",o[1]),n.setAttributeNS(null,"fr",a);break;default:throw new Error(`Unknown RadialAxial type: ${t[1]}`)}for(const t of i){const e=this.svgFactory.createElement("svg:stop");e.setAttributeNS(null,"offset",t[0]),e.setAttributeNS(null,"stop-color",t[1]),n.appendChild(e)}return this.defs.appendChild(n),`url(#${e})`;case"Mesh":return(0,r.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${t[0]}`)}}setDash(t,e){this.current.dashArray=t,this.current.dashPhase=e}constructPath(t,e){const i=this.current;let n=i.x,o=i.y,s=[],a=0;for(const i of t)switch(0|i){case r.OPS.rectangle:n=e[a++],o=e[a++];const t=n+e[a++],i=o+e[a++];s.push("M",m(n),m(o),"L",m(t),m(o),"L",m(t),m(i),"L",m(n),m(i),"Z");break;case r.OPS.moveTo:n=e[a++],o=e[a++],s.push("M",m(n),m(o));break;case r.OPS.lineTo:n=e[a++],o=e[a++],s.push("L",m(n),m(o));break;case r.OPS.curveTo:n=e[a+4],o=e[a+5],s.push("C",m(e[a]),m(e[a+1]),m(e[a+2]),m(e[a+3]),m(n),m(o)),a+=6;break;case r.OPS.curveTo2:s.push("C",m(n),m(o),m(e[a]),m(e[a+1]),m(e[a+2]),m(e[a+3])),n=e[a+2],o=e[a+3],a+=4;break;case r.OPS.curveTo3:n=e[a+2],o=e[a+3],s.push("C",m(e[a]),m(e[a+1]),m(n),m(o),m(n),m(o)),a+=4;break;case r.OPS.closePath:s.push("Z")}s=s.join(" "),i.path&&t.length>0&&t[0]!==r.OPS.rectangle&&t[0]!==r.OPS.moveTo?s=i.path.getAttributeNS(null,"d")+s:(i.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(i.path)),i.path.setAttributeNS(null,"d",s),i.path.setAttributeNS(null,"fill","none"),i.element=i.path,i.setCurrentPoint(n,o)}endPath(){const t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element)return void(this.pendingClip=null);const e="clippath"+v++,i=this.svgFactory.createElement("svg:clipPath");i.setAttributeNS(null,"id",e),i.setAttributeNS(null,"transform",y(this.transformMatrix));const r=t.element.cloneNode(!0);if("evenodd"===this.pendingClip?r.setAttributeNS(null,"clip-rule","evenodd"):r.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,i.appendChild(r),this.defs.appendChild(i),t.activeClipUrl){t.clipGroup=null;for(const t of this.extraStack)t.clipGroup=null;i.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl=`url(#${e})`,this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const e=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",e)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i);break;case"CA":this.setStrokeAlpha(i);break;case"ca":this.setFillAlpha(i);break;default:(0,r.warn)(`Unimplemented graphic state operator ${e}`)}}fill(){const t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}stroke(){const t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(t,e=1){const i=this.current;let r=i.dashArray;1!==e&&r.length>0&&(r=r.map((function(t){return e*t}))),t.setAttributeNS(null,"stroke",i.strokeColor),t.setAttributeNS(null,"stroke-opacity",i.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",m(i.miterLimit)),t.setAttributeNS(null,"stroke-linecap",i.lineCap),t.setAttributeNS(null,"stroke-linejoin",i.lineJoin),t.setAttributeNS(null,"stroke-width",m(e*i.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",r.map(m).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",m(e*i.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(t)}paintImageXObject(t){const e=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);e?this.paintInlineImageXObject(e):(0,r.warn)(`Dependent image with object ID ${t} is not ready yet`)}paintInlineImageXObject(t,e){const i=t.width,r=t.height,n=d(t,this.forceDataSchema,!!e),o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width",m(i)),o.setAttributeNS(null,"height",m(r)),this.current.element=o,this.clip("nonzero");const s=this.svgFactory.createElement("svg:image");s.setAttributeNS(c,"xlink:href",n),s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y",m(-r)),s.setAttributeNS(null,"width",m(i)+"px"),s.setAttributeNS(null,"height",m(r)+"px"),s.setAttributeNS(null,"transform",`scale(${m(1/i)} ${m(-1/r)})`),e?e.appendChild(s):this._ensureTransformGroup().appendChild(s)}paintImageMaskXObject(t){const e=this.current,i=t.width,r=t.height,n=e.fillColor;e.maskId="mask"+b++;const o=this.svgFactory.createElement("svg:mask");o.setAttributeNS(null,"id",e.maskId);const s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y","0"),s.setAttributeNS(null,"width",m(i)),s.setAttributeNS(null,"height",m(r)),s.setAttributeNS(null,"fill",n),s.setAttributeNS(null,"mask",`url(#${e.maskId})`),this.defs.appendChild(o),this._ensureTransformGroup().appendChild(s),this.paintInlineImageXObject(t,o)}paintFormXObjectBegin(t,e){if(Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e){const t=e[2]-e[0],i=e[3]-e[1],r=this.svgFactory.createElement("svg:rect");r.setAttributeNS(null,"x",e[0]),r.setAttributeNS(null,"y",e[1]),r.setAttributeNS(null,"width",m(t)),r.setAttributeNS(null,"height",m(i)),this.current.element=r,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const e=this.svgFactory.create(t.width,t.height),i=this.svgFactory.createElement("svg:defs");e.appendChild(i),this.defs=i;const r=this.svgFactory.createElement("svg:g");return r.setAttributeNS(null,"transform",y(t.transform)),e.appendChild(r),this.svg=r,e}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(t),this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",y(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var r=i(1),n=i(26);const o=__webpack_require__(172),s=__webpack_require__(1),a=__webpack_require__(779),l=__webpack_require__(558),c=/^file:\/\/\/[a-zA-Z]:\//;e.PDFNodeStream=class{constructor(t){this.source=t,this.url=function(t){const e=l.parse(t);return"file:"===e.protocol||e.host?e:/^[a-z]:[/\\]/i.test(t)?l.parse(`file:///${t}`):(e.host||(e.protocol="file:"),e)}(t.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new g(this):new d(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=this.isFsUrl?new m(this,t,e):new f(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}};class h{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)(),this._headersCapability=(0,r.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return null===t?(this._readCapability=(0,r.createPromiseCapability)(),this.read()):(this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class u{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return null===t?(this._readCapability=(0,r.createPromiseCapability)(),this.read()):(this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),this._storedError&&this._readableStream.destroy(this._storedError)}}function p(t,e){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:e}}class d extends h{constructor(t){super(t);const e=e=>{if(404===e.statusCode){const t=new r.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=t,void this._headersCapability.reject(t)}this._headersCapability.resolve(),this._setReadableStream(e);const i=t=>this._readableStream.headers[t.toLowerCase()],{allowRangeRequests:o,suggestedLength:s}=(0,n.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=s||this._contentLength,this._filename=(0,n.extractFilenameFromHeader)(i)};this._request=null,"http:"===this._url.protocol?this._request=s.request(p(this._url,t.httpHeaders),e):this._request=a.request(p(this._url,t.httpHeaders),e),this._request.on("error",(t=>{this._storedError=t,this._headersCapability.reject(t)})),this._request.end()}}class f extends u{constructor(t,e,i){super(t),this._httpHeaders={};for(const e in t.httpHeaders){const i=t.httpHeaders[e];void 0!==i&&(this._httpHeaders[e]=i)}this._httpHeaders.Range=`bytes=${e}-${i-1}`;const n=t=>{if(404!==t.statusCode)this._setReadableStream(t);else{const t=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=t}};this._request=null,"http:"===this._url.protocol?this._request=s.request(p(this._url,this._httpHeaders),n):this._request=a.request(p(this._url,this._httpHeaders),n),this._request.on("error",(t=>{this._storedError=t})),this._request.end()}}class g extends h{constructor(t){super(t);let e=decodeURIComponent(this._url.path);c.test(this._url.href)&&(e=e.replace(/^\//,"")),o.lstat(e,((t,i)=>{if(t)return"ENOENT"===t.code&&(t=new r.MissingPDFException(`Missing PDF "${e}".`)),this._storedError=t,void this._headersCapability.reject(t);this._contentLength=i.size,this._setReadableStream(o.createReadStream(e)),this._headersCapability.resolve()}))}}class m extends u{constructor(t,e,i){super(t);let r=decodeURIComponent(this._url.path);c.test(this._url.href)&&(r=r.replace(/^\//,"")),this._setReadableStream(o.createReadStream(r,{start:e,end:i-1}))}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=function(t,e){return 404===t||0===t&&e.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+e+'".'):new r.UnexpectedResponseException(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t)},e.extractFilenameFromHeader=function(t){const e=t("Content-Disposition");if(e){let t=(0,n.getFilenameFromContentDispositionHeader)(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch(t){}if((0,o.isPdfFile)(t))return t}return null},e.validateRangeRequestCapabilities=function({getResponseHeader:t,isHttp:e,rangeChunkSize:i,disableRange:r}){const n={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(t("Content-Length"),10);return Number.isInteger(o)?(n.suggestedLength=o,o<=2*i||r||!e||"bytes"!==t("Accept-Ranges")||"identity"!==(t("Content-Encoding")||"identity")||(n.allowRangeRequests=!0),n):n},e.validateResponseStatus=function(t){return 200===t||206===t};var r=i(1),n=i(27),o=i(5)},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=function(t){let e=!0,i=n("filename\\*","i").exec(t);if(i){i=i[1];let t=a(i);return t=unescape(t),t=l(t),t=c(t),s(t)}if(i=function(t){const e=[];let i;const r=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(i=r.exec(t));){let[,t,r,n]=i;if(t=parseInt(t,10),t in e){if(0===t)break}else e[t]=[r,n]}const o=[];for(let t=0;t<e.length&&t in e;++t){let[i,r]=e[t];r=a(r),i&&(r=unescape(r),0===t&&(r=l(r))),o.push(r)}return o.join("")}(t),i)return s(c(i));if(i=n("filename","i").exec(t),i){i=i[1];let t=a(i);return t=c(t),s(t)}function n(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function o(t,i){if(t){if(!/^[\x00-\xFF]+$/.test(i))return i;try{const n=new TextDecoder(t,{fatal:!0}),o=(0,r.stringToBytes)(i);i=n.decode(o),e=!1}catch(t){}}return i}function s(t){return e&&/[\x80-\xff]/.test(t)&&(t=o("utf-8",t),e&&(t=o("iso-8859-1",t))),t}function a(t){if(t.startsWith('"')){const e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){const i=e[t].indexOf('"');-1!==i&&(e[t]=e[t].slice(0,i),e.length=t+1),e[t]=e[t].replace(/\\(.)/g,"$1")}t=e.join('"')}return t}function l(t){const e=t.indexOf("'");return-1===e?t:o(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function c(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,e,i,r){if("q"===i||"Q"===i)return o(e,r=(r=r.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})));try{r=atob(r)}catch(t){}return o(e,r)}))}return""};var r=i(1)},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var r=i(1),n=i(26);class o{constructor(t,e={}){this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.getXhr=e.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,i){const r={begin:t,end:e};for(const t in i)r[t]=i[t];return this.request(r)}requestFull(t){return this.request(t)}request(t){const e=this.getXhr(),i=this.currXhrId++,r=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const t in this.httpHeaders){const i=this.httpHeaders[t];void 0!==i&&e.setRequestHeader(t,i)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=206):r.expectedStatus=200,e.responseType="arraybuffer",t.onError&&(e.onerror=function(i){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const n=i.xhr;if(n.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),4!==n.readyState)return;if(!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],0===n.status&&this.isHttp)return void i.onError?.(n.status);const o=n.status||200;if((200!==o||206!==i.expectedStatus)&&o!==i.expectedStatus)return void i.onError?.(n.status);const s=function(t){const e=t.response;return"string"!=typeof e?e:(0,r.stringToBytes)(e).buffer}(n);if(206===o){const t=n.getResponseHeader("Content-Range"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(t);i.onDone({begin:parseInt(e[1],10),chunk:s})}else s?i.onDone({begin:0,chunk:s}):i.onError?.(n.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}e.PDFNetworkStream=class{constructor(t){this._source=t,this._manager=new o(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new s(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new a(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}};class s{constructor(t,e){this._manager=t;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(i),this._headersReceivedCapability=(0,r.createPromiseCapability)(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),i=t=>e.getResponseHeader(t),{allowRangeRequests:r,suggestedLength:o}=(0,n.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=(0,n.extractFilenameFromHeader)(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=(0,n.createResponseStatusError)(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=(0,r.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class a{constructor(t,e,i){this._manager=t;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,i,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=(0,n.createResponseStatusError)(t,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=(0,r.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var r=i(1),n=i(26);function o(t,e,i){return{method:"GET",headers:t,signal:i?.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function s(t){const e=new Headers;for(const i in t){const r=t[i];void 0!==r&&e.append(i,r)}return e}e.PDFFetchStream=class{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new a(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new l(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}};class a{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=(0,r.createPromiseCapability)(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=s(this._stream.httpHeaders);const i=e.url;fetch(i,o(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!(0,n.validateResponseStatus)(t.status))throw(0,n.createResponseStatusError)(t.status,i);this._reader=t.body.getReader(),this._headersCapability.resolve();const e=e=>t.headers.get(e),{allowRangeRequests:o,suggestedLength:s}=(0,n.validateRangeRequestCapabilities)({getResponseHeader:e,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=s||this._contentLength,this._filename=(0,n.extractFilenameFromHeader)(e),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}}class l{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=(0,r.createPromiseCapability)(),this._isStreamingSupported=!a.disableStream,"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._headers=s(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${i-1}`);const l=a.url;fetch(l,o(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!(0,n.validateResponseStatus)(t.status))throw(0,n.createResponseStatusError)(t.status,l);this._readCapability.resolve(),this._reader=t.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var i=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](i,i.exports,__w_pdfjs_require__),i.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return n.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return o.GlobalWorkerOptions}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function(){return i.LoopbackPort}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return i.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return i.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return l.SVGGraphics}}),Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return c.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return i.build}}),Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return i.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return a.renderTextLayer}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return i.version}});var e=__w_pdfjs_require__(1),i=__w_pdfjs_require__(4),r=__w_pdfjs_require__(5),n=__w_pdfjs_require__(20),o=__w_pdfjs_require__(13),s=__w_pdfjs_require__(3),a=__w_pdfjs_require__(23),l=__w_pdfjs_require__(24),c=__w_pdfjs_require__(22);if(s.isNodeJS){const{PDFNodeStream:t}=__w_pdfjs_require__(25);(0,i.setPDFNetworkStreamFactory)((e=>new t(e)))}else{const{PDFNetworkStream:t}=__w_pdfjs_require__(28),{PDFFetchStream:e}=__w_pdfjs_require__(29);(0,i.setPDFNetworkStreamFactory)((i=>(0,r.isValidFetchUrl)(i.url)?new e(i):new t(i)))}})(),__webpack_exports__})(),module.exports=factory()},16:(t,e,i)=>{("undefined"!=typeof window?window:{}).pdfjsWorker=i(624)},624:function(t){
/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2022 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */
var e;e=()=>(()=>{"use strict";var t=[,(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WorkerTask=e.WorkerMessageHandler=void 0;var r,n=i(2),o=i(5),s=i(6),a=i(67),l=i(73),c=i(4),h=i(102),u=i(103),p=i(8);class d{constructor(t){this.name=t,this.terminated=!1,this._capability=(0,n.createPromiseCapability)()}get finished(){return this._capability.promise}finish(){this._capability.resolve()}terminate(){this.terminated=!0}ensureNotTerminated(){if(this.terminated)throw new Error("Worker task was terminated")}}e.WorkerTask=d;class f{static setup(t,e){let i=!1;t.on("test",(function(e){i||(i=!0,t.send("test",e instanceof Uint8Array))})),t.on("configure",(function(t){(0,n.setVerbosityLevel)(t.verbosity)})),t.on("GetDocRequest",(function(t){return f.createDocumentHandler(t,e)}))}static createDocumentHandler(t,e){let i,r=!1,f=null;const g=[],m=(0,n.getVerbosityLevel)(),y=t.apiVersion,v="2.14.305";if(y!==v)throw new Error(`The API version "${y}" does not match the Worker version "2.14.305".`);const b=[];for(const t in[])b.push(t);if(b.length)throw new Error("The `Array.prototype` contains unexpected enumerable properties: "+b.join(", ")+"; thus breaking e.g. `for...in` iteration of `Array`s.");if("undefined"==typeof ReadableStream){const t="The browser/environment lacks native support for critical functionality used by the PDF.js library (e.g. `ReadableStream`); ";if(c.isNodeJS)throw new Error(t+"please use a `legacy`-build instead.");throw new Error(t+"please update to a supported browser.")}const w=t.docId,x=t.docBaseUrl,S=t.docId+"_worker";let k=new h.MessageHandler(S,w,e);function C(){if(r)throw new Error("Worker was terminated")}function A(t){g.push(t)}function _(t){t.finish();const e=g.indexOf(t);g.splice(e,1)}async function T(t){await i.ensureDoc("checkHeader"),await i.ensureDoc("parseStartXRef"),await i.ensureDoc("parse",[t]),await i.ensureDoc("checkFirstPage",[t]),await i.ensureDoc("checkLastPage",[t]);const e=await i.ensureDoc("isPureXfa");if(e){const t=new d("loadXfaFonts");A(t),await Promise.all([i.loadXfaFonts(k,t).catch((t=>{})).then((()=>_(t))),i.loadXfaImages()])}const[r,n]=await Promise.all([i.ensureDoc("numPages"),i.ensureDoc("fingerprints")]);return{numPages:r,fingerprints:n,htmlForXfa:e?await i.ensureDoc("htmlForXfa"):null}}function O(t,e,i){const r=(0,n.createPromiseCapability)();let o;const a=t.source;if(a.data){try{o=new s.LocalPdfManager(w,a.data,a.password,k,e,i,x),r.resolve(o)}catch(t){r.reject(t)}return r.promise}let l,c=[];try{l=new u.PDFWorkerStream(k)}catch(t){return r.reject(t),r.promise}const h=l.getFullReader();h.headersReady.then((function(){if(!h.isRangeSupported)return;const t=a.disableAutoFetch||h.isStreamingSupported;o=new s.NetworkPdfManager(w,l,{msgHandler:k,password:a.password,length:h.contentLength,disableAutoFetch:t,rangeChunkSize:a.rangeChunkSize},e,i,x);for(let t=0;t<c.length;t++)o.sendProgressiveData(c[t]);c=[],r.resolve(o),f=null})).catch((function(t){r.reject(t),f=null}));let p=0;return new Promise((function(t,l){const u=function({value:t,done:d}){try{if(C(),d)return o||function(){const t=(0,n.arraysToBytes)(c);a.length&&t.length!==a.length&&(0,n.warn)("reported HTTP length is different from actual");try{o=new s.LocalPdfManager(w,t,a.password,k,e,i,x),r.resolve(o)}catch(t){r.reject(t)}c=[]}(),void(f=null);p+=(0,n.arrayByteLength)(t),h.isStreamingSupported||k.send("DocProgress",{loaded:p,total:Math.max(p,h.contentLength||0)}),o?o.sendProgressiveData(t):c.push(t),h.read().then(u,l)}catch(t){l(t)}};h.read().then(u,l)})).catch((function(t){r.reject(t),f=null})),f=function(t){l.cancelAllRequests(t)},r.promise}return k.on("GetPage",(function(t){return i.getPage(t.pageIndex).then((function(t){return Promise.all([i.ensure(t,"rotate"),i.ensure(t,"ref"),i.ensure(t,"userUnit"),i.ensure(t,"view")]).then((function([t,e,i,r]){return{rotate:t,ref:e,userUnit:i,view:r}}))}))})),k.on("GetPageIndex",(function(t){const e=o.Ref.get(t.num,t.gen);return i.ensureCatalog("getPageIndex",[e])})),k.on("GetDestinations",(function(t){return i.ensureCatalog("destinations")})),k.on("GetDestination",(function(t){return i.ensureCatalog("getDestination",[t.id])})),k.on("GetPageLabels",(function(t){return i.ensureCatalog("pageLabels")})),k.on("GetPageLayout",(function(t){return i.ensureCatalog("pageLayout")})),k.on("GetPageMode",(function(t){return i.ensureCatalog("pageMode")})),k.on("GetViewerPreferences",(function(t){return i.ensureCatalog("viewerPreferences")})),k.on("GetOpenAction",(function(t){return i.ensureCatalog("openAction")})),k.on("GetAttachments",(function(t){return i.ensureCatalog("attachments")})),k.on("GetJavaScript",(function(t){return i.ensureCatalog("javaScript")})),k.on("GetDocJSActions",(function(t){return i.ensureCatalog("jsActions")})),k.on("GetPageJSActions",(function({pageIndex:t}){return i.getPage(t).then((function(t){return i.ensure(t,"jsActions")}))})),k.on("GetOutline",(function(t){return i.ensureCatalog("documentOutline")})),k.on("GetOptionalContentConfig",(function(t){return i.ensureCatalog("optionalContentConfig")})),k.on("GetPermissions",(function(t){return i.ensureCatalog("permissions")})),k.on("GetMetadata",(function(t){return Promise.all([i.ensureDoc("documentInfo"),i.ensureCatalog("metadata")])})),k.on("GetMarkInfo",(function(t){return i.ensureCatalog("markInfo")})),k.on("GetData",(function(t){return i.requestLoadedStream(),i.onLoadedStream().then((function(t){return t.bytes}))})),k.on("GetAnnotations",(function({pageIndex:t,intent:e}){return i.getPage(t).then((function(t){return t.getAnnotationsData(e)}))})),k.on("GetFieldObjects",(function(t){return i.ensureDoc("fieldObjects")})),k.on("HasJSActions",(function(t){return i.ensureDoc("hasJSActions")})),k.on("GetCalculationOrderIds",(function(t){return i.ensureDoc("calculationOrderIds")})),k.on("SaveDocument",(function({isPureXfa:t,numPages:e,annotationStorage:r,filename:s}){i.requestLoadedStream();const a=[i.onLoadedStream(),i.ensureCatalog("acroForm"),i.ensureCatalog("acroFormRef"),i.ensureDoc("xref"),i.ensureDoc("startXRef")];if(t)a.push(i.serializeXfaData(r));else for(let t=0;t<e;t++)a.push(i.getPage(t).then((function(e){const i=new d(`Save: page ${t}`);return e.save(k,i,r).finally((function(){_(i)}))})));return Promise.all(a).then((function([e,i,r,a,c,...h]){let u=[],p=null;if(t){if(p=h[0],!p)return e.bytes}else{for(const t of h)u=t.filter((t=>null!==t)).reduce(((t,e)=>t.concat(e)),u);if(0===u.length)return e.bytes}const d=i instanceof o.Dict&&i.get("XFA")||null;let f=null,g=!1;if(Array.isArray(d)){for(let t=0,e=d.length;t<e;t+=2)"datasets"===d[t]&&(f=d[t+1],r=null,g=!0);null===f&&(f=a.getNewRef())}else d&&(r=null,(0,n.warn)("Unsupported XFA type."));let m=Object.create(null);if(a.trailer){const t=Object.create(null),e=a.trailer.get("Info")||null;e instanceof o.Dict&&e.forEach(((e,i)=>{"string"==typeof i&&(t[e]=(0,n.stringToPDFString)(i))})),m={rootRef:a.trailer.getRaw("Root")||null,encryptRef:a.trailer.getRaw("Encrypt")||null,newRef:a.getNewRef(),infoRef:a.trailer.getRaw("Info")||null,info:t,fileIds:a.trailer.get("ID")||null,startXRef:c,filename:s}}return a.resetNewRef(),(0,l.incrementalUpdate)({originalData:e.bytes,xrefInfo:m,newRefs:u,xref:a,hasXfa:!!d,xfaDatasetsRef:f,hasXfaDatasetsEntry:g,acroFormRef:r,acroForm:i,xfaData:p})}))})),k.on("GetOperatorList",(function(t,e){const r=t.pageIndex;i.getPage(r).then((function(i){const o=new d(`GetOperatorList: page ${r}`);A(o);const s=m>=n.VerbosityLevel.INFOS?Date.now():0;i.getOperatorList({handler:k,sink:e,task:o,intent:t.intent,cacheKey:t.cacheKey,annotationStorage:t.annotationStorage}).then((function(t){_(o),s&&(0,n.info)(`page=${r+1} - getOperatorList: time=${Date.now()-s}ms, len=${t.length}`),e.close()}),(function(t){_(o),o.terminated||(k.send("UnsupportedFeature",{featureId:n.UNSUPPORTED_FEATURES.errorOperatorList}),e.error(t))}))}))})),k.on("GetTextContent",(function(t,e){const r=t.pageIndex;i.getPage(r).then((function(i){const o=new d("GetTextContent: page "+r);A(o);const s=m>=n.VerbosityLevel.INFOS?Date.now():0;i.extractTextContent({handler:k,task:o,sink:e,includeMarkedContent:t.includeMarkedContent,combineTextItems:t.combineTextItems}).then((function(){_(o),s&&(0,n.info)(`page=${r+1} - getTextContent: time=`+(Date.now()-s)+"ms"),e.close()}),(function(t){_(o),o.terminated||e.error(t)}))}))})),k.on("GetStructTree",(function(t){return i.getPage(t.pageIndex).then((function(t){return i.ensure(t,"getStructTree")}))})),k.on("FontFallback",(function(t){return i.fontFallback(t.id,k)})),k.on("Cleanup",(function(t){return i.cleanup(!0)})),k.on("Terminate",(function(t){r=!0;const e=[];if(i){i.terminate(new n.AbortException("Worker was terminated."));const t=i.cleanup();e.push(t),i=null}else(0,a.clearGlobalCaches)();f&&f(new n.AbortException("Worker was terminated."));for(const t of g)e.push(t.finished),t.terminate();return Promise.all(e).then((function(){k.destroy(),k=null}))})),k.on("Ready",(function(e){!function(t){function e(t){C(),k.send("GetDoc",{pdfInfo:t})}function o(t){if(C(),t instanceof n.PasswordException){const e=new d(`PasswordException: response ${t.code}`);A(e),k.sendWithPromise("PasswordRequest",t).then((function({password:t}){_(e),i.updatePassword(t),s()})).catch((function(){_(e),k.send("DocException",t)}))}else t instanceof n.InvalidPDFException||t instanceof n.MissingPDFException||t instanceof n.UnexpectedResponseException||t instanceof n.UnknownErrorException?k.send("DocException",t):k.send("DocException",new n.UnknownErrorException(t.message,t.toString()))}function s(){C(),T(!1).then(e,(function(t){C(),t instanceof p.XRefParseException?(i.requestLoadedStream(),i.onLoadedStream().then((function(){C(),T(!0).then(e,o)}))):o(t)}))}C(),O(t,{maxImageSize:t.maxImageSize,disableFontFace:t.disableFontFace,ignoreErrors:t.ignoreErrors,isEvalSupported:t.isEvalSupported,fontExtraProperties:t.fontExtraProperties,useSystemFonts:t.useSystemFonts,cMapUrl:t.cMapUrl,standardFontDataUrl:t.standardFontDataUrl},t.enableXfa).then((function(t){if(r)throw t.terminate(new n.AbortException("Worker was terminated.")),new Error("Worker was terminated");i=t,i.onLoadedStream().then((function(t){k.send("DataLoaded",{length:t.bytes.byteLength})}))})).then(s,o)}(t),t=null})),S}static initializeFromPort(t){const e=new h.MessageHandler("worker","main",t);f.setup(e,t),e.send("ready",null)}}e.WorkerMessageHandler=f,"undefined"==typeof window&&!c.isNodeJS&&"undefined"!=typeof self&&"function"==typeof(r=self).postMessage&&"onmessage"in r&&f.initializeFromPort(self)},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.arrayByteLength=h,e.arraysToBytes=function(t){const e=t.length;if(1===e&&t[0]instanceof Uint8Array)return t[0];let i=0;for(let r=0;r<e;r++)i+=h(t[r]);let r=0;const n=new Uint8Array(i);for(let i=0;i<e;i++){let e=t[i];e instanceof Uint8Array||(e="string"==typeof e?c(e):new Uint8Array(e));const o=e.byteLength;n.set(e,r),r+=o}return n},e.assert=function(t,e){t||s(e)},e.bytesToString=function(t){"object"==typeof t&&null!==t&&void 0!==t.length||s("Invalid argument for bytesToString");const e=t.length,i=8192;if(e<i)return String.fromCharCode.apply(null,t);const r=[];for(let n=0;n<e;n+=i){const o=Math.min(n+i,e),s=t.subarray(n,o);r.push(String.fromCharCode.apply(null,s))}return r.join("")},e.createPromiseCapability=function(){const t=Object.create(null);let e=!1;return Object.defineProperty(t,"settled",{get:()=>e}),t.promise=new Promise((function(i,r){t.resolve=function(t){e=!0,i(t)},t.reject=function(t){e=!0,r(t)}})),t},e.createValidAbsoluteUrl=function(t,e=null,i=null){if(!t)return null;try{if(i&&"string"==typeof t){if(i.addDefaultProtocol&&t.startsWith("www.")){const e=t.match(/\./g);e&&e.length>=2&&(t=`http://${t}`)}if(i.tryConvertEncoding)try{t=f(t)}catch(t){}}const r=e?new URL(t,e):new URL(t);if(function(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(r))return r}catch(t){}return null},e.escapeString=function(t){return t.replace(/([()\\\n\r])/g,(t=>"\n"===t?"\\n":"\r"===t?"\\r":`\\${t}`))},e.getModificationDate=function(t=new Date){return[t.getUTCFullYear().toString(),(t.getUTCMonth()+1).toString().padStart(2,"0"),t.getUTCDate().toString().padStart(2,"0"),t.getUTCHours().toString().padStart(2,"0"),t.getUTCMinutes().toString().padStart(2,"0"),t.getUTCSeconds().toString().padStart(2,"0")].join("")},e.getVerbosityLevel=function(){return n},e.info=function(t){n>=r.INFOS&&console.log(`Info: ${t}`)},e.isArrayBuffer=function(t){return"object"==typeof t&&null!==t&&void 0!==t.byteLength},e.isArrayEqual=function(t,e){if(t.length!==e.length)return!1;for(let i=0,r=t.length;i<r;i++)if(t[i]!==e[i])return!1;return!0},e.isAscii=function(t){return/^[\x00-\x7F]*$/.test(t)},e.objectFromMap=function(t){const e=Object.create(null);for(const[i,r]of t)e[i]=r;return e},e.objectSize=function(t){return Object.keys(t).length},e.setVerbosityLevel=function(t){Number.isInteger(t)&&(n=t)},e.shadow=a,e.string32=function(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)},e.stringToBytes=c,e.stringToPDFString=function(t){if(t[0]>="ï"){let e;if("þ"===t[0]&&"ÿ"===t[1]?e="utf-16be":"ÿ"===t[0]&&"þ"===t[1]?e="utf-16le":"ï"===t[0]&&"»"===t[1]&&"¿"===t[2]&&(e="utf-8"),e)try{const i=new TextDecoder(e,{fatal:!0}),r=c(t);return i.decode(r)}catch(t){o(`stringToPDFString: "${t}".`)}}const e=[];for(let i=0,r=t.length;i<r;i++){const r=d[t.charCodeAt(i)];e.push(r?String.fromCharCode(r):t.charAt(i))}return e.join("")},e.stringToUTF16BEString=function(t){const e=["þÿ"];for(let i=0,r=t.length;i<r;i++){const r=t.charCodeAt(i);e.push(String.fromCharCode(r>>8&255),String.fromCharCode(255&r))}return e.join("")},e.stringToUTF8String=f,e.unreachable=s,e.utf8StringToString=function(t){return unescape(encodeURIComponent(t))},e.warn=o,i(3),e.IDENTITY_MATRIX=[1,0,0,1,0,0],e.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],e.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},e.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},e.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},e.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},e.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},e.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},e.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},e.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},e.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},e.AnnotationReplyType={GROUP:"Group",REPLY:"R"},e.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},e.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},e.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},e.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},e.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},e.PageActionEventType={O:"PageOpen",C:"PageClose"},e.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},e.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const r={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=r,e.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},e.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},e.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},e.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let n=r.WARNINGS;function o(t){n>=r.WARNINGS&&console.log(`Warning: ${t}`)}function s(t){throw new Error(t)}function a(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!1}),i}const l=function(){function t(e,i){this.constructor===t&&s("Cannot initialize BaseException."),this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();function c(t){"string"!=typeof t&&s("Invalid argument for stringToBytes");const e=t.length,i=new Uint8Array(e);for(let r=0;r<e;++r)i[r]=255&t.charCodeAt(r);return i}function h(t){return void 0!==t.length?t.length:void 0!==t.byteLength?t.byteLength:void s("Invalid argument for arrayByteLength")}e.BaseException=l,e.PasswordException=class extends l{constructor(t,e){super(t,"PasswordException"),this.code=e}},e.UnknownErrorException=class extends l{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}},e.InvalidPDFException=class extends l{constructor(t){super(t,"InvalidPDFException")}},e.MissingPDFException=class extends l{constructor(t){super(t,"MissingPDFException")}},e.UnexpectedResponseException=class extends l{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}},e.FormatError=class extends l{constructor(t){super(t,"FormatError")}},e.AbortException=class extends l{constructor(t){super(t,"AbortException")}},e.FeatureTest=class{static get isLittleEndian(){return a(this,"isLittleEndian",function(){const t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}static get isEvalSupported(){return a(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(t){return!1}}())}static get isOffscreenCanvasSupported(){return a(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}};const u=[...Array(256).keys()].map((t=>t.toString(16).padStart(2,"0")));class p{static makeHexColor(t,e,i){return`#${u[t]}${u[e]}${u[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[1],e[1]=i),e[0]*=t[0],e[1]*=t[0],t[3]<0&&(i=e[2],e[2]=e[3],e[3]=i),e[2]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[2],e[2]=i,i=e[1],e[1]=e[3],e[3]=i,t[1]<0&&(i=e[2],e[2]=e[3],e[3]=i),e[2]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[1],e[1]=i),e[0]*=t[2],e[1]*=t[2]),e[0]+=t[4],e[1]+=t[4],e[2]+=t[5],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i]}static getAxialAlignedBoundingBox(t,e){const i=p.applyTransform(t,e),r=p.applyTransform(t.slice(2,4),e),n=p.applyTransform([t[0],t[3]],e),o=p.applyTransform([t[2],t[1]],e);return[Math.min(i[0],r[0],n[0],o[0]),Math.min(i[1],r[1],n[1],o[1]),Math.max(i[0],r[0],n[0],o[0]),Math.max(i[1],r[1],n[1],o[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static apply3dTransform(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],r=t[0]*e[1]+t[1]*e[3],n=t[2]*e[0]+t[3]*e[2],o=t[2]*e[1]+t[3]*e[3],s=(i+o)/2,a=Math.sqrt((i+o)**2-4*(i*o-n*r))/2,l=s+a||1,c=s-a||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>r)return null;const n=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return n>o?null:[i,n,r,o]}static bezierBoundingBox(t,e,i,r,n,o,s,a){const l=[],c=[[],[]];let h,u,p,d,f,g,m,y;for(let c=0;c<2;++c)if(0===c?(u=6*t-12*i+6*n,h=-3*t+9*i-9*n+3*s,p=3*i-3*t):(u=6*e-12*r+6*o,h=-3*e+9*r-9*o+3*a,p=3*r-3*e),Math.abs(h)<1e-12){if(Math.abs(u)<1e-12)continue;d=-p/u,0<d&&d<1&&l.push(d)}else m=u*u-4*p*h,y=Math.sqrt(m),m<0||(f=(-u+y)/(2*h),0<f&&f<1&&l.push(f),g=(-u-y)/(2*h),0<g&&g<1&&l.push(g));let v,b=l.length;const w=b;for(;b--;)d=l[b],v=1-d,c[0][b]=v*v*v*t+3*v*v*d*i+3*v*d*d*n+d*d*d*s,c[1][b]=v*v*v*e+3*v*v*d*r+3*v*d*d*o+d*d*d*a;return c[0][w]=t,c[1][w]=e,c[0][w+1]=s,c[1][w+1]=a,c[0].length=c[1].length=w+2,[Math.min(...c[0]),Math.min(...c[1]),Math.max(...c[0]),Math.max(...c[1])]}}e.Util=p;const d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function f(t){return decodeURIComponent(escape(t))}},(t,e,i)=>{i(4)},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;const i=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);e.isNodeJS=i},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RefSetCache=e.RefSet=e.Ref=e.Name=e.EOF=e.Dict=e.Cmd=e.CIRCULAR_REF=void 0,e.clearPrimitiveCaches=function(){a._clearCache(),s._clearCache(),h._clearCache()},e.isCmd=function(t,e){return t instanceof a&&(void 0===e||t.cmd===e)},e.isDict=function(t,e){return t instanceof c&&(void 0===e||d(t.get("Type"),e))},e.isName=d,e.isRefsEqual=function(t,e){return t.num===e.num&&t.gen===e.gen};var r=i(2);const n=Symbol("CIRCULAR_REF");e.CIRCULAR_REF=n;const o=Symbol("EOF");e.EOF=o;const s=function(){let t=Object.create(null);class e{constructor(t){this.name=t}static get(i){const r=t[i];return r||(t[i]=new e(i))}static _clearCache(){t=Object.create(null)}}return e}();e.Name=s;const a=function(){let t=Object.create(null);class e{constructor(t){this.cmd=t}static get(i){const r=t[i];return r||(t[i]=new e(i))}static _clearCache(){t=Object.create(null)}}return e}();e.Cmd=a;const l=function(){return l};class c{constructor(t=null){this._map=Object.create(null),this.xref=t,this.objId=null,this.suppressEncryption=!1,this.__nonSerializable__=l}assignXref(t){this.xref=t}get size(){return Object.keys(this._map).length}get(t,e,i){let r=this._map[t];return void 0===r&&void 0!==e&&(r=this._map[e],void 0===r&&void 0!==i&&(r=this._map[i])),r instanceof h&&this.xref?this.xref.fetch(r,this.suppressEncryption):r}async getAsync(t,e,i){let r=this._map[t];return void 0===r&&void 0!==e&&(r=this._map[e],void 0===r&&void 0!==i&&(r=this._map[i])),r instanceof h&&this.xref?this.xref.fetchAsync(r,this.suppressEncryption):r}getArray(t,e,i){let r=this._map[t];if(void 0===r&&void 0!==e&&(r=this._map[e],void 0===r&&void 0!==i&&(r=this._map[i])),r instanceof h&&this.xref&&(r=this.xref.fetch(r,this.suppressEncryption)),Array.isArray(r)){r=r.slice();for(let t=0,e=r.length;t<e;t++)r[t]instanceof h&&this.xref&&(r[t]=this.xref.fetch(r[t],this.suppressEncryption))}return r}getRaw(t){return this._map[t]}getKeys(){return Object.keys(this._map)}getRawValues(){return Object.values(this._map)}set(t,e){this._map[t]=e}has(t){return void 0!==this._map[t]}forEach(t){for(const e in this._map)t(e,this.get(e))}static get empty(){const t=new c(null);return t.set=(t,e)=>{(0,r.unreachable)("Should not call `set` on the empty dictionary.")},(0,r.shadow)(this,"empty",t)}static merge({xref:t,dictArray:e,mergeSubDicts:i=!1}){const r=new c(t),n=new Map;for(const t of e)if(t instanceof c)for(const[e,r]of Object.entries(t._map)){let t=n.get(e);if(void 0===t)t=[],n.set(e,t);else if(!(i&&r instanceof c))continue;t.push(r)}for(const[e,i]of n){if(1===i.length||!(i[0]instanceof c)){r._map[e]=i[0];continue}const n=new c(t);for(const t of i)for(const[e,i]of Object.entries(t._map))void 0===n._map[e]&&(n._map[e]=i);n.size>0&&(r._map[e]=n)}return n.clear(),r.size>0?r:c.empty}}e.Dict=c;const h=function(){let t=Object.create(null);class e{constructor(t,e){this.num=t,this.gen=e}toString(){return 0===this.gen?`${this.num}R`:`${this.num}R${this.gen}`}static get(i,r){const n=0===r?`${i}R`:`${i}R${r}`,o=t[n];return o||(t[n]=new e(i,r))}static _clearCache(){t=Object.create(null)}}return e}();e.Ref=h;class u{constructor(t=null){this._set=new Set(t&&t._set)}has(t){return this._set.has(t.toString())}put(t){this._set.add(t.toString())}remove(t){this._set.delete(t.toString())}[Symbol.iterator](){return this._set.values()}clear(){this._set.clear()}}e.RefSet=u;class p{constructor(){this._map=new Map}get size(){return this._map.size}get(t){return this._map.get(t.toString())}has(t){return this._map.has(t.toString())}put(t,e){this._map.set(t.toString(),e)}putAlias(t,e){this._map.set(t.toString(),this.get(e))}[Symbol.iterator](){return this._map.values()}clear(){this._map.clear()}}function d(t,e){return t instanceof s&&(void 0===e||t.name===e)}e.RefSetCache=p},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NetworkPdfManager=e.LocalPdfManager=void 0;var r=i(2),n=i(7),o=i(8),s=i(11),a=i(10);function l(t){if(t){const e=(0,r.createValidAbsoluteUrl)(t);if(e)return e.href;(0,r.warn)(`Invalid absolute docBaseUrl: "${t}".`)}return null}class c{constructor(){this.constructor===c&&(0,r.unreachable)("Cannot initialize BasePdfManager.")}get docId(){return this._docId}get password(){return this._password}get docBaseUrl(){const t=this.pdfDocument.catalog;return(0,r.shadow)(this,"docBaseUrl",t.baseUrl||this._docBaseUrl)}onLoadedStream(){(0,r.unreachable)("Abstract method `onLoadedStream` called")}ensureDoc(t,e){return this.ensure(this.pdfDocument,t,e)}ensureXRef(t,e){return this.ensure(this.pdfDocument.xref,t,e)}ensureCatalog(t,e){return this.ensure(this.pdfDocument.catalog,t,e)}getPage(t){return this.pdfDocument.getPage(t)}fontFallback(t,e){return this.pdfDocument.fontFallback(t,e)}loadXfaFonts(t,e){return this.pdfDocument.loadXfaFonts(t,e)}loadXfaImages(){return this.pdfDocument.loadXfaImages()}serializeXfaData(t){return this.pdfDocument.serializeXfaData(t)}cleanup(t=!1){return this.pdfDocument.cleanup(t)}async ensure(t,e,i){(0,r.unreachable)("Abstract method `ensure` called")}requestRange(t,e){(0,r.unreachable)("Abstract method `requestRange` called")}requestLoadedStream(){(0,r.unreachable)("Abstract method `requestLoadedStream` called")}sendProgressiveData(t){(0,r.unreachable)("Abstract method `sendProgressiveData` called")}updatePassword(t){this._password=t}terminate(t){(0,r.unreachable)("Abstract method `terminate` called")}}e.LocalPdfManager=class extends c{constructor(t,e,i,r,n,o,c){super(),this._docId=t,this._password=i,this._docBaseUrl=l(c),this.msgHandler=r,this.evaluatorOptions=n,this.enableXfa=o;const h=new a.Stream(e);this.pdfDocument=new s.PDFDocument(this,h),this._loadedStreamPromise=Promise.resolve(h)}async ensure(t,e,i){const r=t[e];return"function"==typeof r?r.apply(t,i):r}requestRange(t,e){return Promise.resolve()}requestLoadedStream(){}onLoadedStream(){return this._loadedStreamPromise}terminate(t){}},e.NetworkPdfManager=class extends c{constructor(t,e,i,r,o,a){super(),this._docId=t,this._password=i.password,this._docBaseUrl=l(a),this.msgHandler=i.msgHandler,this.evaluatorOptions=r,this.enableXfa=o,this.streamManager=new n.ChunkedStreamManager(e,{msgHandler:i.msgHandler,length:i.length,disableAutoFetch:i.disableAutoFetch,rangeChunkSize:i.rangeChunkSize}),this.pdfDocument=new s.PDFDocument(this,this.streamManager.getStream())}async ensure(t,e,i){try{const r=t[e];return"function"==typeof r?r.apply(t,i):r}catch(r){if(!(r instanceof o.MissingDataException))throw r;return await this.requestRange(r.begin,r.end),this.ensure(t,e,i)}}requestRange(t,e){return this.streamManager.requestRange(t,e)}requestLoadedStream(){this.streamManager.requestAllChunks()}sendProgressiveData(t){this.streamManager.onReceiveData({chunk:t})}onLoadedStream(){return this.streamManager.onLoadedStream()}terminate(t){this.streamManager.abort(t)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ChunkedStreamManager=e.ChunkedStream=void 0;var r=i(2),n=i(8),o=i(10);class s extends o.Stream{constructor(t,e,i){super(new Uint8Array(t),0,t,null),this.chunkSize=e,this._loadedChunks=new Set,this.numChunks=Math.ceil(t/e),this.manager=i,this.progressiveDataLength=0,this.lastSuccessfulEnsureByteChunk=-1}getMissingChunks(){const t=[];for(let e=0,i=this.numChunks;e<i;++e)this._loadedChunks.has(e)||t.push(e);return t}get numChunksLoaded(){return this._loadedChunks.size}get isDataLoaded(){return this.numChunksLoaded===this.numChunks}onReceiveData(t,e){const i=this.chunkSize;if(t%i!=0)throw new Error(`Bad begin offset: ${t}`);const r=t+e.byteLength;if(r%i!=0&&r!==this.bytes.length)throw new Error(`Bad end offset: ${r}`);this.bytes.set(new Uint8Array(e),t);const n=Math.floor(t/i),o=Math.floor((r-1)/i)+1;for(let t=n;t<o;++t)this._loadedChunks.add(t)}onReceiveProgressiveData(t){let e=this.progressiveDataLength;const i=Math.floor(e/this.chunkSize);this.bytes.set(new Uint8Array(t),e),e+=t.byteLength,this.progressiveDataLength=e;const r=e>=this.end?this.numChunks:Math.floor(e/this.chunkSize);for(let t=i;t<r;++t)this._loadedChunks.add(t)}ensureByte(t){if(t<this.progressiveDataLength)return;const e=Math.floor(t/this.chunkSize);if(!(e>this.numChunks)&&e!==this.lastSuccessfulEnsureByteChunk){if(!this._loadedChunks.has(e))throw new n.MissingDataException(t,t+1);this.lastSuccessfulEnsureByteChunk=e}}ensureRange(t,e){if(t>=e)return;if(e<=this.progressiveDataLength)return;const i=Math.floor(t/this.chunkSize);if(i>this.numChunks)return;const r=Math.min(Math.floor((e-1)/this.chunkSize)+1,this.numChunks);for(let o=i;o<r;++o)if(!this._loadedChunks.has(o))throw new n.MissingDataException(t,e)}nextEmptyChunk(t){const e=this.numChunks;for(let i=0;i<e;++i){const r=(t+i)%e;if(!this._loadedChunks.has(r))return r}return null}hasChunk(t){return this._loadedChunks.has(t)}getByte(){const t=this.pos;return t>=this.end?-1:(t>=this.progressiveDataLength&&this.ensureByte(t),this.bytes[this.pos++])}getBytes(t){const e=this.bytes,i=this.pos,r=this.end;if(!t)return r>this.progressiveDataLength&&this.ensureRange(i,r),e.subarray(i,r);let n=i+t;return n>r&&(n=r),n>this.progressiveDataLength&&this.ensureRange(i,n),this.pos=n,e.subarray(i,n)}getByteRange(t,e){return t<0&&(t=0),e>this.end&&(e=this.end),e>this.progressiveDataLength&&this.ensureRange(t,e),this.bytes.subarray(t,e)}makeSubStream(t,e,i=null){function r(){}e?t+e>this.progressiveDataLength&&this.ensureRange(t,t+e):t>=this.progressiveDataLength&&this.ensureByte(t),r.prototype=Object.create(this),r.prototype.getMissingChunks=function(){const t=this.chunkSize,e=Math.floor(this.start/t),i=Math.floor((this.end-1)/t)+1,r=[];for(let t=e;t<i;++t)this._loadedChunks.has(t)||r.push(t);return r},Object.defineProperty(r.prototype,"isDataLoaded",{get(){return this.numChunksLoaded===this.numChunks||0===this.getMissingChunks().length},configurable:!0});const n=new r;return n.pos=n.start=t,n.end=t+e||this.end,n.dict=i,n}getBaseStreams(){return[this]}}e.ChunkedStream=s,e.ChunkedStreamManager=class{constructor(t,e){this.length=e.length,this.chunkSize=e.rangeChunkSize,this.stream=new s(this.length,this.chunkSize,this),this.pdfNetworkStream=t,this.disableAutoFetch=e.disableAutoFetch,this.msgHandler=e.msgHandler,this.currRequestId=0,this._chunksNeededByRequest=new Map,this._requestsByChunk=new Map,this._promisesByRequest=new Map,this.progressiveDataLength=0,this.aborted=!1,this._loadedStreamCapability=(0,r.createPromiseCapability)()}onLoadedStream(){return this._loadedStreamCapability.promise}sendRequest(t,e){const i=this.pdfNetworkStream.getRangeReader(t,e);i.isStreamingSupported||(i.onProgress=this.onProgress.bind(this));let n=[],o=0;return new Promise(((t,e)=>{const s=a=>{try{if(!a.done){const t=a.value;return n.push(t),o+=(0,r.arrayByteLength)(t),i.isStreamingSupported&&this.onProgress({loaded:o}),void i.read().then(s,e)}const l=(0,r.arraysToBytes)(n);n=null,t(l)}catch(t){e(t)}};i.read().then(s,e)})).then((e=>{this.aborted||this.onReceiveData({chunk:e,begin:t})}))}requestAllChunks(){const t=this.stream.getMissingChunks();return this._requestChunks(t),this._loadedStreamCapability.promise}_requestChunks(t){const e=this.currRequestId++,i=new Set;this._chunksNeededByRequest.set(e,i);for(const e of t)this.stream.hasChunk(e)||i.add(e);if(0===i.size)return Promise.resolve();const n=(0,r.createPromiseCapability)();this._promisesByRequest.set(e,n);const o=[];for(const t of i){let i=this._requestsByChunk.get(t);i||(i=[],this._requestsByChunk.set(t,i),o.push(t)),i.push(e)}if(o.length>0){const t=this.groupChunks(o);for(const e of t){const t=e.beginChunk*this.chunkSize,i=Math.min(e.endChunk*this.chunkSize,this.length);this.sendRequest(t,i).catch(n.reject)}}return n.promise.catch((t=>{if(!this.aborted)throw t}))}getStream(){return this.stream}requestRange(t,e){e=Math.min(e,this.length);const i=this.getBeginChunk(t),r=this.getEndChunk(e),n=[];for(let t=i;t<r;++t)n.push(t);return this._requestChunks(n)}requestRanges(t=[]){const e=[];for(const i of t){const t=this.getBeginChunk(i.begin),r=this.getEndChunk(i.end);for(let i=t;i<r;++i)e.includes(i)||e.push(i)}return e.sort((function(t,e){return t-e})),this._requestChunks(e)}groupChunks(t){const e=[];let i=-1,r=-1;for(let n=0,o=t.length;n<o;++n){const o=t[n];i<0&&(i=o),r>=0&&r+1!==o&&(e.push({beginChunk:i,endChunk:r+1}),i=o),n+1===t.length&&e.push({beginChunk:i,endChunk:o+1}),r=o}return e}onProgress(t){this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize+t.loaded,total:this.length})}onReceiveData(t){const e=t.chunk,i=void 0===t.begin,r=i?this.progressiveDataLength:t.begin,n=r+e.byteLength,o=Math.floor(r/this.chunkSize),s=n<this.length?Math.floor(n/this.chunkSize):Math.ceil(n/this.chunkSize);i?(this.stream.onReceiveProgressiveData(e),this.progressiveDataLength=n):this.stream.onReceiveData(r,e),this.stream.isDataLoaded&&this._loadedStreamCapability.resolve(this.stream);const a=[];for(let t=o;t<s;++t){const e=this._requestsByChunk.get(t);if(e){this._requestsByChunk.delete(t);for(const i of e){const e=this._chunksNeededByRequest.get(i);e.has(t)&&e.delete(t),e.size>0||a.push(i)}}}if(!this.disableAutoFetch&&0===this._requestsByChunk.size){let t;if(1===this.stream.numChunksLoaded){const e=this.stream.numChunks-1;this.stream.hasChunk(e)||(t=e)}else t=this.stream.nextEmptyChunk(s);Number.isInteger(t)&&this._requestChunks([t])}for(const t of a){const e=this._promisesByRequest.get(t);this._promisesByRequest.delete(t),e.resolve()}this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize,total:this.length})}onError(t){this._loadedStreamCapability.reject(t)}getBeginChunk(t){return Math.floor(t/this.chunkSize)}getEndChunk(t){return Math.floor((t-1)/this.chunkSize)+1}abort(t){this.aborted=!0,this.pdfNetworkStream&&this.pdfNetworkStream.cancelAllRequests(t);for(const e of this._promisesByRequest.values())e.reject(t)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XRefParseException=e.XRefEntryException=e.ParserEOFException=e.MissingDataException=e.DocStats=void 0,e.collectActions=function(t,e,i){const o=Object.create(null),s=h({dict:e,key:"AA",stopWhenFound:!1});if(s)for(let e=s.length-1;e>=0;e--){const r=s[e];if(r instanceof n.Dict)for(const e of r.getKeys()){const s=i[e];if(!s)continue;const a=r.getRaw(e),l=new n.RefSet,c=[];p(a,t,c,l),c.length>0&&(o[s]=c)}}if(e.has("A")){const i=e.get("A"),r=new n.RefSet,s=[];p(i,t,s,r),s.length>0&&(o.Action=s)}return(0,r.objectSize)(o)>0?o:null},e.encodeToXmlString=function(t){const e=[];let i=0;for(let r=0,n=t.length;r<n;r++){const n=t.codePointAt(r);if(32<=n&&n<=126){const o=d[n];o&&(i<r&&e.push(t.substring(i,r)),e.push(o),i=r+1)}else i<r&&e.push(t.substring(i,r)),e.push(`&#x${n.toString(16).toUpperCase()};`),n>55295&&(n<57344||n>65533)&&r++,i=r+1}return 0===e.length?t:(i<t.length&&e.push(t.substring(i,t.length)),e.join(""))},e.escapePDFName=function(t){const e=[];let i=0;for(let r=0,n=t.length;r<n;r++){const n=t.charCodeAt(r);(n<33||n>126||35===n||40===n||41===n||60===n||62===n||91===n||93===n||123===n||125===n||47===n||37===n)&&(i<r&&e.push(t.substring(i,r)),e.push(`#${n.toString(16)}`),i=r+1)}return 0===e.length?t:(i<t.length&&e.push(t.substring(i,t.length)),e.join(""))},e.getArrayLookupTableFactory=function(t){let e;return function(){if(t){let i=t();t=null,e=Object.create(null);for(let t=0,r=i.length;t<r;t+=2)e[i[t]]=i[t+1];i=null}return e}},e.getInheritableProperty=h,e.getLookupTableFactory=function(t){let e;return function(){return t&&(e=Object.create(null),t(e),t=null),e}},e.isWhiteSpace=function(t){return 32===t||9===t||13===t||10===t},e.log2=function(t){return t<=0?0:Math.ceil(Math.log2(t))},e.parseXFAPath=function(t){const e=/(.+)\[(\d+)\]$/;return t.split(".").map((t=>{const i=t.match(e);return i?{name:i[1],pos:parseInt(i[2],10)}:{name:t,pos:0}}))},e.readInt8=function(t,e){return t[e]<<24>>24},e.readUint16=function(t,e){return t[e]<<8|t[e+1]},e.readUint32=function(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0},e.recoverJsURL=function(t){const e=new RegExp("^\\s*("+["app.launchURL","window.open","xfa.host.gotoURL"].join("|").split(".").join("\\.")+")\\((?:'|\")([^'\"]*)(?:'|\")(?:,\\s*(\\w+)\\)|\\))","i").exec(t);if(e&&e[2]){const t=e[2];let i=!1;return"true"===e[3]&&"app.launchURL"===e[1]&&(i=!0),{url:t,newWindow:i}}return null},e.toRomanNumerals=function(t,e=!1){(0,r.assert)(Number.isInteger(t)&&t>0,"The number should be a positive integer.");const i=[];let n;for(;t>=1e3;)t-=1e3,i.push("M");n=t/100|0,t%=100,i.push(u[n]),n=t/10|0,t%=10,i.push(u[10+n]),i.push(u[20+t]);const o=i.join("");return e?o.toLowerCase():o},e.validateCSSFont=function(t){const e=new Set(["100","200","300","400","500","600","700","800","900","1000","normal","bold","bolder","lighter"]),{fontFamily:i,fontWeight:n,italicAngle:o}=t;if(/^".*"$/.test(i)){if(/[^\\]"/.test(i.slice(1,i.length-1)))return(0,r.warn)(`XFA - FontFamily contains some unescaped ": ${i}.`),!1}else if(/^'.*'$/.test(i)){if(/[^\\]'/.test(i.slice(1,i.length-1)))return(0,r.warn)(`XFA - FontFamily contains some unescaped ': ${i}.`),!1}else for(const t of i.split(/[ \t]+/))if(/^(\d|(-(\d|-)))/.test(t)||!/^[\w-\\]+$/.test(t))return(0,r.warn)(`XFA - FontFamily contains some invalid <custom-ident>: ${i}.`),!1;const s=n?n.toString():"";t.fontWeight=e.has(s)?s:"400";const a=parseFloat(o);return t.italicAngle=isNaN(a)||a<-90||a>90?"14":o.toString(),!0};var r=i(2),n=i(5),o=i(9);class s extends r.BaseException{constructor(t,e){super(`Missing data [${t}, ${e})`,"MissingDataException"),this.begin=t,this.end=e}}e.MissingDataException=s;class a extends r.BaseException{constructor(t){super(t,"ParserEOFException")}}e.ParserEOFException=a;class l extends r.BaseException{constructor(t){super(t,"XRefEntryException")}}e.XRefEntryException=l;class c extends r.BaseException{constructor(t){super(t,"XRefParseException")}}function h({dict:t,key:e,getArray:i=!1,stopWhenFound:r=!0}){let o;const s=new n.RefSet;for(;t instanceof n.Dict&&(!t.objId||!s.has(t.objId));){t.objId&&s.put(t.objId);const n=i?t.getArray(e):t.get(e);if(void 0!==n){if(r)return n;o||(o=[]),o.push(n)}t=t.get("Parent")}return o}e.XRefParseException=c,e.DocStats=class{constructor(t){this._handler=t,this._streamTypes=new Set,this._fontTypes=new Set}_send(){const t=Object.create(null),e=Object.create(null);for(const e of this._streamTypes)t[e]=!0;for(const t of this._fontTypes)e[t]=!0;this._handler.send("DocStats",{streamTypes:t,fontTypes:e})}addStreamType(t){this._streamTypes.has(t)||(this._streamTypes.add(t),this._send())}addFontType(t){this._fontTypes.has(t)||(this._fontTypes.add(t),this._send())}};const u=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];function p(t,e,i,s){if(!t)return;let a=null;if(t instanceof n.Ref){if(s.has(t))return;a=t,s.put(a),t=e.fetch(t)}if(Array.isArray(t))for(const r of t)p(r,e,i,s);else if(t instanceof n.Dict){if((0,n.isName)(t.get("S"),"JavaScript")){const e=t.get("JS");let n;e instanceof o.BaseStream?n=e.getString():"string"==typeof e&&(n=e),n=n&&(0,r.stringToPDFString)(n),n&&i.push(n)}p(t.getRaw("Next"),e,i,s)}a&&s.remove(a)}const d={60:"&lt;",62:"&gt;",38:"&amp;",34:"&quot;",39:"&apos;"}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStream=void 0;var r=i(2);class n{constructor(){this.constructor===n&&(0,r.unreachable)("Cannot initialize BaseStream.")}get length(){(0,r.unreachable)("Abstract getter `length` accessed")}get isEmpty(){(0,r.unreachable)("Abstract getter `isEmpty` accessed")}get isDataLoaded(){return(0,r.shadow)(this,"isDataLoaded",!0)}getByte(){(0,r.unreachable)("Abstract method `getByte` called")}getBytes(t){(0,r.unreachable)("Abstract method `getBytes` called")}peekByte(){const t=this.getByte();return-1!==t&&this.pos--,t}peekBytes(t){const e=this.getBytes(t);return this.pos-=e.length,e}getUint16(){const t=this.getByte(),e=this.getByte();return-1===t||-1===e?-1:(t<<8)+e}getInt32(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()}getByteRange(t,e){(0,r.unreachable)("Abstract method `getByteRange` called")}getString(t){return(0,r.bytesToString)(this.getBytes(t))}skip(t){this.pos+=t||1}reset(){(0,r.unreachable)("Abstract method `reset` called")}moveStart(){(0,r.unreachable)("Abstract method `moveStart` called")}makeSubStream(t,e,i=null){(0,r.unreachable)("Abstract method `makeSubStream` called")}getBaseStreams(){return null}}e.BaseStream=n},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StringStream=e.Stream=e.NullStream=void 0;var r=i(9),n=i(2);class o extends r.BaseStream{constructor(t,e,i,r){super(),this.bytes=t instanceof Uint8Array?t:new Uint8Array(t),this.start=e||0,this.pos=this.start,this.end=e+i||this.bytes.length,this.dict=r}get length(){return this.end-this.start}get isEmpty(){return 0===this.length}getByte(){return this.pos>=this.end?-1:this.bytes[this.pos++]}getBytes(t){const e=this.bytes,i=this.pos,r=this.end;if(!t)return e.subarray(i,r);let n=i+t;return n>r&&(n=r),this.pos=n,e.subarray(i,n)}getByteRange(t,e){return t<0&&(t=0),e>this.end&&(e=this.end),this.bytes.subarray(t,e)}reset(){this.pos=this.start}moveStart(){this.start=this.pos}makeSubStream(t,e,i=null){return new o(this.bytes.buffer,t,e,i)}}e.Stream=o,e.StringStream=class extends o{constructor(t){super((0,n.stringToBytes)(t))}},e.NullStream=class extends o{constructor(){super(new Uint8Array(0))}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Page=e.PDFDocument=void 0;var r=i(2),n=i(8),o=i(5),s=i(12),a=i(22),l=i(9),c=i(74),h=i(65),u=i(67),p=i(100),d=i(27),f=i(10),g=i(72),m=i(62),y=i(25),v=i(29),b=i(71),w=i(76),x=i(101);const S=[0,0,612,792];class k{constructor({pdfManager:t,xref:e,pageIndex:i,pageDict:r,ref:n,globalIdFactory:o,fontCache:s,builtInCMapCache:a,standardFontDataCache:l,globalImageCache:c,nonBlendModesSet:h,xfaFactory:u}){this.pdfManager=t,this.pageIndex=i,this.pageDict=r,this.xref=e,this.ref=n,this.fontCache=s,this.builtInCMapCache=a,this.standardFontDataCache=l,this.globalImageCache=c,this.nonBlendModesSet=h,this.evaluatorOptions=t.evaluatorOptions,this.resourcesPromise=null,this.xfaFactory=u;const p={obj:0};this._localIdFactory=class extends o{static createObjId(){return`p${i}_${++p.obj}`}static getPageObjId(){return`page${n.toString()}`}}}_getInheritableProperty(t,e=!1){const i=(0,n.getInheritableProperty)({dict:this.pageDict,key:t,getArray:e,stopWhenFound:!1});return Array.isArray(i)?1!==i.length&&i[0]instanceof o.Dict?o.Dict.merge({xref:this.xref,dictArray:i}):i[0]:i}get content(){return this.pageDict.getArray("Contents")}get resources(){return(0,r.shadow)(this,"resources",this._getInheritableProperty("Resources")||o.Dict.empty)}_getBoundingBox(t){if(this.xfaData)return this.xfaData.bbox;const e=this._getInheritableProperty(t,!0);if(Array.isArray(e)&&4===e.length){if(e[2]-e[0]!=0&&e[3]-e[1]!=0)return e;(0,r.warn)(`Empty /${t} entry.`)}return null}get mediaBox(){return(0,r.shadow)(this,"mediaBox",this._getBoundingBox("MediaBox")||S)}get cropBox(){return(0,r.shadow)(this,"cropBox",this._getBoundingBox("CropBox")||this.mediaBox)}get userUnit(){let t=this.pageDict.get("UserUnit");return("number"!=typeof t||t<=0)&&(t=1),(0,r.shadow)(this,"userUnit",t)}get view(){const{cropBox:t,mediaBox:e}=this;let i;if(t===e||(0,r.isArrayEqual)(t,e))i=e;else{const n=r.Util.intersect(t,e);n&&n[2]-n[0]!=0&&n[3]-n[1]!=0?i=n:(0,r.warn)("Empty /CropBox and /MediaBox intersection.")}return(0,r.shadow)(this,"view",i||e)}get rotate(){let t=this._getInheritableProperty("Rotate")||0;return t%90!=0?t=0:t>=360?t%=360:t<0&&(t=(t%360+360)%360),(0,r.shadow)(this,"rotate",t)}_onSubStreamError(t,e,i){if(this.evaluatorOptions.ignoreErrors)return t.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorContentSubStream}),void(0,r.warn)(`getContentStream - ignoring sub-stream (${i}): "${e}".`);throw e}getContentStream(t){return this.pdfManager.ensure(this,"content").then((e=>e instanceof l.BaseStream?e:Array.isArray(e)?new v.StreamsSequenceStream(e,this._onSubStreamError.bind(this,t)):new f.NullStream))}get xfaData(){return(0,r.shadow)(this,"xfaData",this.xfaFactory?{bbox:this.xfaFactory.getBoundingBox(this.pageIndex)}:null)}save(t,e,i){const n=new y.PartialEvaluator({xref:this.xref,handler:t,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions});return this._parsedAnnotations.then((function(t){const o=[];for(const s of t)s.mustBePrinted(i)&&o.push(s.save(n,e,i).catch((function(t){return(0,r.warn)(`save - ignoring annotation data during "${e.name}" task: "${t}".`),null})));return Promise.all(o)}))}loadResources(t){return this.resourcesPromise||(this.resourcesPromise=this.pdfManager.ensure(this,"resources")),this.resourcesPromise.then((()=>new g.ObjectLoader(this.resources,t,this.xref).load()))}getOperatorList({handler:t,sink:e,task:i,intent:n,cacheKey:o,annotationStorage:s=null}){const a=this.getContentStream(t),l=this.loadResources(["ColorSpace","ExtGState","Font","Pattern","Properties","Shading","XObject"]),c=new y.PartialEvaluator({xref:this.xref,handler:t,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions}),h=Promise.all([a,l]).then((([r])=>{const s=new m.OperatorList(n,e);return t.send("StartRenderPage",{transparency:c.hasBlendModes(this.resources,this.nonBlendModesSet),pageIndex:this.pageIndex,cacheKey:o}),c.getOperatorList({stream:r,task:i,resources:this.resources,operatorList:s}).then((function(){return s}))}));return Promise.all([h,this._parsedAnnotations]).then((function([t,e]){if(0===e.length||n&r.RenderingIntentFlag.ANNOTATIONS_DISABLE)return t.flush(!0),{length:t.totalLength};const o=!!(n&r.RenderingIntentFlag.ANNOTATIONS_FORMS),a=!!(n&r.RenderingIntentFlag.ANY),l=!!(n&r.RenderingIntentFlag.DISPLAY),h=!!(n&r.RenderingIntentFlag.PRINT),u=[];for(const t of e)(a||l&&t.mustBeViewed(s)||h&&t.mustBePrinted(s))&&u.push(t.getOperatorList(c,i,n,o,s).catch((function(t){return(0,r.warn)(`getOperatorList - ignoring annotation data during "${i.name}" task: "${t}".`),null})));return Promise.all(u).then((function(e){t.addOp(r.OPS.beginAnnotations,[]);for(const i of e)t.addOpList(i);return t.addOp(r.OPS.endAnnotations,[]),t.flush(!0),{length:t.totalLength}}))}))}extractTextContent({handler:t,task:e,includeMarkedContent:i,sink:r,combineTextItems:n}){const o=this.getContentStream(t),s=this.loadResources(["ExtGState","Font","Properties","XObject"]);return Promise.all([o,s]).then((([o])=>new y.PartialEvaluator({xref:this.xref,handler:t,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions}).getTextContent({stream:o,task:e,resources:this.resources,includeMarkedContent:i,combineTextItems:n,sink:r,viewBox:this.view})))}async getStructTree(){const t=await this.pdfManager.ensureCatalog("structTreeRoot");return t?(await this.pdfManager.ensure(this,"_parseStructTree",[t])).serializable:null}_parseStructTree(t){const e=new b.StructTreePage(t,this.pageDict);return e.parse(),e}getAnnotationsData(t){return this._parsedAnnotations.then((function(e){const i=[];if(0===e.length)return i;const n=!!(t&r.RenderingIntentFlag.ANY),o=!!(t&r.RenderingIntentFlag.DISPLAY),s=!!(t&r.RenderingIntentFlag.PRINT);for(const t of e)(n||o&&t.viewable||s&&t.printable)&&i.push(t.data);return i}))}get annotations(){const t=this._getInheritableProperty("Annots");return(0,r.shadow)(this,"annotations",Array.isArray(t)?t:[])}get _parsedAnnotations(){const t=this.pdfManager.ensure(this,"annotations").then((()=>{const t=[];for(const e of this.annotations)t.push(a.AnnotationFactory.create(this.xref,e,this.pdfManager,this._localIdFactory,!1).catch((function(t){return(0,r.warn)(`_parsedAnnotations: "${t}".`),null})));return Promise.all(t).then((function(t){return t.filter((t=>!!t))}))}));return(0,r.shadow)(this,"_parsedAnnotations",t)}get jsActions(){const t=(0,n.collectActions)(this.xref,this.pageDict,r.PageActionEventType);return(0,r.shadow)(this,"jsActions",t)}}e.Page=k;const C=new Uint8Array([37,80,68,70,45]),A=new Uint8Array([115,116,97,114,116,120,114,101,102]),_=new Uint8Array([101,110,100,111,98,106]),T=/^[1-9]\.\d$/;function O(t,e,i=1024,r=!1){const n=e.length,o=t.peekBytes(i),s=o.length-n;if(s<=0)return!1;if(r){const i=n-1;let r=o.length-1;for(;r>=i;){let s=0;for(;s<n&&o[r-s]===e[i-s];)s++;if(s>=n)return t.pos+=r-i,!0;r--}}else{let i=0;for(;i<=s;){let r=0;for(;r<n&&o[i+r]===e[r];)r++;if(r>=n)return t.pos+=i,!0;i++}}return!1}e.PDFDocument=class{constructor(t,e){if(e.length<=0)throw new r.InvalidPDFException("The PDF file is empty, i.e. its size is zero bytes.");this.pdfManager=t,this.stream=e,this.xref=new x.XRef(e,t),this._pagePromises=new Map,this._version=null;const i={font:0};this._globalIdFactory=class{static getDocId(){return`g_${t.docId}`}static createFontId(){return"f"+ ++i.font}static createObjId(){(0,r.unreachable)("Abstract method `createObjId` called.")}static getPageObjId(){(0,r.unreachable)("Abstract method `getPageObjId` called.")}}}parse(t){this.xref.parse(t),this.catalog=new h.Catalog(this.pdfManager,this.xref),this.catalog.version&&(this._version=this.catalog.version)}get linearization(){let t=null;try{t=d.Linearization.create(this.stream)}catch(t){if(t instanceof n.MissingDataException)throw t;(0,r.info)(t)}return(0,r.shadow)(this,"linearization",t)}get startXRef(){const t=this.stream;let e=0;if(this.linearization)t.reset(),O(t,_)&&(e=t.pos+6-t.start);else{const i=1024,r=A.length;let o=!1,s=t.end;for(;!o&&s>0;)s-=i-r,s<0&&(s=0),t.pos=s,o=O(t,A,i,!0);if(o){let i;t.skip(9);do{i=t.getByte()}while((0,n.isWhiteSpace)(i));let r="";for(;i>=32&&i<=57;)r+=String.fromCharCode(i),i=t.getByte();e=parseInt(r,10),isNaN(e)&&(e=0)}}return(0,r.shadow)(this,"startXRef",e)}checkHeader(){const t=this.stream;if(t.reset(),!O(t,C))return;t.moveStart();let e,i="";for(;(e=t.getByte())>32&&!(i.length>=12);)i+=String.fromCharCode(e);this._version||(this._version=i.substring(5))}parseStartXRef(){this.xref.setStartXRef(this.startXRef)}get numPages(){let t=0;return t=this.catalog.hasActualNumPages?this.catalog.numPages:this.xfaFactory?this.xfaFactory.getNumPages():this.linearization?this.linearization.numPages:this.catalog.numPages,(0,r.shadow)(this,"numPages",t)}_hasOnlyDocumentSignatures(t,e=0){return!!Array.isArray(t)&&t.every((t=>{if(!((t=this.xref.fetchIfRef(t))instanceof o.Dict))return!1;if(t.has("Kids"))return++e>10?((0,r.warn)("_hasOnlyDocumentSignatures: maximum recursion depth reached"),!1):this._hasOnlyDocumentSignatures(t.get("Kids"),e);const i=(0,o.isName)(t.get("FT"),"Sig"),n=t.get("Rect"),s=Array.isArray(n)&&n.every((t=>0===t));return i&&s}))}get _xfaStreams(){const t=this.catalog.acroForm;if(!t)return null;const e=t.get("XFA"),i={"xdp:xdp":"",template:"",datasets:"",config:"",connectionSet:"",localeSet:"",stylesheet:"","/xdp:xdp":""};if(e instanceof l.BaseStream&&!e.isEmpty)return i["xdp:xdp"]=e,i;if(!Array.isArray(e)||0===e.length)return null;for(let t=0,r=e.length;t<r;t+=2){let n;if(n=0===t?"xdp:xdp":t===r-2?"/xdp:xdp":e[t],!i.hasOwnProperty(n))continue;const o=this.xref.fetchIfRef(e[t+1]);o instanceof l.BaseStream&&!o.isEmpty&&(i[n]=o)}return i}get xfaDatasets(){const t=this._xfaStreams;if(!t)return(0,r.shadow)(this,"xfaDatasets",null);for(const e of["datasets","xdp:xdp"]){const i=t[e];if(i)try{const t={[e]:(0,r.stringToUTF8String)(i.getString())};return(0,r.shadow)(this,"xfaDatasets",new p.DatasetReader(t))}catch(t){(0,r.warn)("XFA - Invalid utf-8 string.");break}}return(0,r.shadow)(this,"xfaDatasets",null)}get xfaData(){const t=this._xfaStreams;if(!t)return null;const e=Object.create(null);for(const[i,n]of Object.entries(t))if(n)try{e[i]=(0,r.stringToUTF8String)(n.getString())}catch(t){return(0,r.warn)("XFA - Invalid utf-8 string."),null}return e}get xfaFactory(){let t;return this.pdfManager.enableXfa&&this.catalog.needsRendering&&this.formInfo.hasXfa&&!this.formInfo.hasAcroForm&&(t=this.xfaData),(0,r.shadow)(this,"xfaFactory",t?new w.XFAFactory(t):null)}get isPureXfa(){return!!this.xfaFactory&&this.xfaFactory.isValid()}get htmlForXfa(){return this.xfaFactory?this.xfaFactory.getPages():null}async loadXfaImages(){const t=await this.pdfManager.ensureCatalog("xfaImages");if(!t)return;const e=t.getKeys(),i=new g.ObjectLoader(t,e,this.xref);await i.load();const r=new Map;for(const i of e){const e=t.get(i);e instanceof l.BaseStream&&r.set(i,e.getBytes())}this.xfaFactory.setImages(r)}async loadXfaFonts(t,e){const i=await this.pdfManager.ensureCatalog("acroForm");if(!i)return;const a=await i.getAsync("DR");if(!(a instanceof o.Dict))return;const l=new g.ObjectLoader(a,["Font"],this.xref);await l.load();const c=a.get("Font");if(!(c instanceof o.Dict))return;const h=Object.assign(Object.create(null),this.pdfManager.evaluatorOptions);h.useSystemFonts=!1;const u=new y.PartialEvaluator({xref:this.xref,handler:t,pageIndex:-1,idFactory:this._globalIdFactory,fontCache:this.catalog.fontCache,builtInCMapCache:this.catalog.builtInCMapCache,standardFontDataCache:this.catalog.standardFontDataCache,options:h}),p=new m.OperatorList,d=[],f={get font(){return d[d.length-1]},set font(t){d.push(t)},clone(){return this}},v=new Map;c.forEach(((t,e)=>{v.set(t,e)}));const b=[];for(const[t,i]of v){const s=i.get("FontDescriptor");if(!(s instanceof o.Dict))continue;let l=s.get("FontFamily");l=l.replace(/[ ]+(\d)/g,"$1");const c={fontFamily:l,fontWeight:s.get("FontWeight"),italicAngle:-s.get("ItalicAngle")};(0,n.validateCSSFont)(c)&&b.push(u.handleSetFont(a,[o.Name.get(t),1],null,p,e,f,null,c).catch((function(t){return(0,r.warn)(`loadXfaFonts: "${t}".`),null})))}await Promise.all(b);const w=this.xfaFactory.setFonts(d);if(!w)return;h.ignoreErrors=!0,b.length=0,d.length=0;const x=new Set;for(const t of w)(0,s.getXfaFontName)(`${t}-Regular`)||x.add(t);x.size&&w.push("PdfJS-Fallback");for(const t of w)if(!x.has(t))for(const i of[{name:"Regular",fontWeight:400,italicAngle:0},{name:"Bold",fontWeight:700,italicAngle:0},{name:"Italic",fontWeight:400,italicAngle:12},{name:"BoldItalic",fontWeight:700,italicAngle:12}]){const n=`${t}-${i.name}`,l=(0,s.getXfaFontDict)(n);b.push(u.handleSetFont(a,[o.Name.get(n),1],null,p,e,f,l,{fontFamily:t,fontWeight:i.fontWeight,italicAngle:i.italicAngle}).catch((function(t){return(0,r.warn)(`loadXfaFonts: "${t}".`),null})))}await Promise.all(b),this.xfaFactory.appendFonts(d,x)}async serializeXfaData(t){return this.xfaFactory?this.xfaFactory.serializeData(t):null}get formInfo(){const t={hasFields:!1,hasAcroForm:!1,hasXfa:!1,hasSignatures:!1},e=this.catalog.acroForm;if(!e)return(0,r.shadow)(this,"formInfo",t);try{const i=e.get("Fields"),r=Array.isArray(i)&&i.length>0;t.hasFields=r;const n=e.get("XFA");t.hasXfa=Array.isArray(n)&&n.length>0||n instanceof l.BaseStream&&!n.isEmpty;const o=!!(1&e.get("SigFlags")),s=o&&this._hasOnlyDocumentSignatures(i);t.hasAcroForm=r&&!s,t.hasSignatures=o}catch(t){if(t instanceof n.MissingDataException)throw t;(0,r.warn)(`Cannot fetch form information: "${t}".`)}return(0,r.shadow)(this,"formInfo",t)}get documentInfo(){let t=this._version;"string"==typeof t&&T.test(t)||((0,r.warn)(`Invalid PDF header version number: ${t}`),t=null);const e={PDFFormatVersion:t,Language:this.catalog.lang,EncryptFilterName:this.xref.encrypt?this.xref.encrypt.filterName:null,IsLinearized:!!this.linearization,IsAcroFormPresent:this.formInfo.hasAcroForm,IsXFAPresent:this.formInfo.hasXfa,IsCollectionPresent:!!this.catalog.collection,IsSignaturesPresent:this.formInfo.hasSignatures};let i;try{i=this.xref.trailer.get("Info")}catch(t){if(t instanceof n.MissingDataException)throw t;(0,r.info)("The document information dictionary is invalid.")}if(!(i instanceof o.Dict))return(0,r.shadow)(this,"documentInfo",e);for(const t of i.getKeys()){const n=i.get(t);switch(t){case"Title":case"Author":case"Subject":case"Keywords":case"Creator":case"Producer":case"CreationDate":case"ModDate":if("string"==typeof n){e[t]=(0,r.stringToPDFString)(n);continue}break;case"Trapped":if(n instanceof o.Name){e[t]=n;continue}break;default:let i;switch(typeof n){case"string":i=(0,r.stringToPDFString)(n);break;case"number":case"boolean":i=n;break;default:n instanceof o.Name&&(i=n)}if(void 0===i){(0,r.warn)(`Bad value, for custom key "${t}", in Info: ${n}.`);continue}e.Custom||(e.Custom=Object.create(null)),e.Custom[t]=i;continue}(0,r.warn)(`Bad value, for key "${t}", in Info: ${n}.`)}return(0,r.shadow)(this,"documentInfo",e)}get fingerprints(){function t(t){return"string"==typeof t&&t.length>0&&"\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"!==t}function e(t){const e=[];for(let i=0,r=t.length;i<r;i++){const r=t[i].toString(16);e.push(r.padStart(2,"0"))}return e.join("")}const i=this.xref.trailer.get("ID");let n,o;return Array.isArray(i)&&t(i[0])?(n=(0,r.stringToBytes)(i[0]),i[1]!==i[0]&&t(i[1])&&(o=(0,r.stringToBytes)(i[1]))):n=(0,c.calculateMD5)(this.stream.getByteRange(0,1024),0,1024),(0,r.shadow)(this,"fingerprints",[e(n),o?e(o):null])}async _getLinearizationPage(t){const{catalog:e,linearization:i,xref:n}=this,s=o.Ref.get(i.objectNumberFirst,0);try{const t=await n.fetchAsync(s);if(t instanceof o.Dict){let i=t.getRaw("Type");if(i instanceof o.Ref&&(i=await n.fetchAsync(i)),(0,o.isName)(i,"Page")||!t.has("Type")&&!t.has("Kids"))return e.pageKidsCountCache.has(s)||e.pageKidsCountCache.put(s,1),e.pageIndexCache.has(s)||e.pageIndexCache.put(s,0),[t,s]}throw new r.FormatError("The Linearization dictionary doesn't point to a valid Page dictionary.")}catch(i){return(0,r.warn)(`_getLinearizationPage: "${i.message}".`),e.getPageDict(t)}}getPage(t){const e=this._pagePromises.get(t);if(e)return e;const{catalog:i,linearization:r,xfaFactory:n}=this;let s;return s=n?Promise.resolve([o.Dict.empty,null]):r&&r.pageFirst===t?this._getLinearizationPage(t):i.getPageDict(t),s=s.then((([e,r])=>new k({pdfManager:this.pdfManager,xref:this.xref,pageIndex:t,pageDict:e,ref:r,globalIdFactory:this._globalIdFactory,fontCache:i.fontCache,builtInCMapCache:i.builtInCMapCache,standardFontDataCache:i.standardFontDataCache,globalImageCache:i.globalImageCache,nonBlendModesSet:i.nonBlendModesSet,xfaFactory:n}))),this._pagePromises.set(t,s),s}async checkFirstPage(t=!1){if(!t)try{await this.getPage(0)}catch(t){if(t instanceof n.XRefEntryException)throw this._pagePromises.delete(0),await this.cleanup(),new n.XRefParseException}}async checkLastPage(t=!1){const{catalog:e,pdfManager:i}=this;let o;e.setActualNumPages();try{if(await Promise.all([i.ensureDoc("xfaFactory"),i.ensureDoc("linearization"),i.ensureCatalog("numPages")]),this.xfaFactory)return;if(o=this.linearization?this.linearization.numPages:e.numPages,!Number.isInteger(o))throw new r.FormatError("Page count is not an integer.");if(o<=1)return;await this.getPage(o-1)}catch(s){if(this._pagePromises.delete(o-1),await this.cleanup(),s instanceof n.XRefEntryException&&!t)throw new n.XRefParseException;let a;(0,r.warn)(`checkLastPage - invalid /Pages tree /Count: ${o}.`);try{a=await e.getAllPageDicts(t)}catch(i){if(i instanceof n.XRefEntryException&&!t)throw new n.XRefParseException;return void e.setActualNumPages(1)}for(const[t,[r,n]]of a){let o;r instanceof Error?(o=Promise.reject(r),o.catch((()=>{}))):o=Promise.resolve(new k({pdfManager:i,xref:this.xref,pageIndex:t,pageDict:r,ref:n,globalIdFactory:this._globalIdFactory,fontCache:e.fontCache,builtInCMapCache:e.builtInCMapCache,standardFontDataCache:e.standardFontDataCache,globalImageCache:e.globalImageCache,nonBlendModesSet:e.nonBlendModesSet,xfaFactory:null})),this._pagePromises.set(t,o)}e.setActualNumPages(a.size)}}fontFallback(t,e){return this.catalog.fontFallback(t,e)}async cleanup(t=!1){return this.catalog?this.catalog.cleanup(t):(0,u.clearGlobalCaches)()}_collectFieldObjects(t,e,i){const n=this.xref.fetchIfRef(e);if(n.has("T")){const e=(0,r.stringToPDFString)(n.get("T"));t=""===t?e:`${t}.${e}`}if(i.has(t)||i.set(t,[]),i.get(t).push(a.AnnotationFactory.create(this.xref,e,this.pdfManager,this._localIdFactory,!0).then((t=>t&&t.getFieldObject())).catch((function(t){return(0,r.warn)(`_collectFieldObjects: "${t}".`),null}))),n.has("Kids")){const e=n.get("Kids");for(const r of e)this._collectFieldObjects(t,r,i)}}get fieldObjects(){if(!this.formInfo.hasFields)return(0,r.shadow)(this,"fieldObjects",Promise.resolve(null));const t=Object.create(null),e=new Map;for(const t of this.catalog.acroForm.get("Fields"))this._collectFieldObjects("",t,e);const i=[];for(const[r,n]of e)i.push(Promise.all(n).then((e=>{(e=e.filter((t=>!!t))).length>0&&(t[r]=e)})));return(0,r.shadow)(this,"fieldObjects",Promise.all(i).then((()=>t)))}get hasJSActions(){const t=this.pdfManager.ensureDoc("_parseHasJSActions");return(0,r.shadow)(this,"hasJSActions",t)}async _parseHasJSActions(){const[t,e]=await Promise.all([this.pdfManager.ensureCatalog("jsActions"),this.pdfManager.ensureDoc("fieldObjects")]);return!!t||!!e&&Object.values(e).some((t=>t.some((t=>null!==t.actions))))}get calculationOrderIds(){const t=this.catalog.acroForm;if(!t||!t.has("CO"))return(0,r.shadow)(this,"calculationOrderIds",null);const e=t.get("CO");if(!Array.isArray(e)||0===e.length)return(0,r.shadow)(this,"calculationOrderIds",null);const i=[];for(const t of e)t instanceof o.Ref&&i.push(t.toString());return 0===i.length?(0,r.shadow)(this,"calculationOrderIds",null):(0,r.shadow)(this,"calculationOrderIds",i)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getXfaFontDict=function(t){const e=function(t){const e=p(t);if(!e)return null;const{baseWidths:i,baseMapping:r,factors:n}=e;let o;o=n?i.map(((t,e)=>t*n[e])):i;let s,a=-2;const l=[];for(const[t,e]of r.map(((t,e)=>[t,e])).sort((([t],[e])=>t-e)))-1!==t&&(t===a+1?(s.push(o[e]),a+=1):(a=t,s=[o[e]],l.push(t,s)));return l}(t),i=new n.Dict(null);i.set("BaseFont",n.Name.get(t)),i.set("Type",n.Name.get("Font")),i.set("Subtype",n.Name.get("CIDFontType2")),i.set("Encoding",n.Name.get("Identity-H")),i.set("CIDToGIDMap",n.Name.get("Identity")),i.set("W",e),i.set("FirstChar",e[0]),i.set("LastChar",e[e.length-2]+e[e.length-1].length-1);const r=new n.Dict(null);i.set("FontDescriptor",r);const o=new n.Dict(null);return o.set("Ordering","Identity"),o.set("Registry","Adobe"),o.set("Supplement",0),i.set("CIDSystemInfo",o),i},e.getXfaFontName=p;var r=i(13),n=i(5),o=i(14),s=i(15),a=i(16),l=i(17),c=i(8),h=i(18);const u=(0,c.getLookupTableFactory)((function(t){t["MyriadPro-Regular"]=t["PdfJS-Fallback-Regular"]={name:"LiberationSans-Regular",factors:a.MyriadProRegularFactors,baseWidths:s.LiberationSansRegularWidths,baseMapping:s.LiberationSansRegularMapping,metrics:a.MyriadProRegularMetrics},t["MyriadPro-Bold"]=t["PdfJS-Fallback-Bold"]={name:"LiberationSans-Bold",factors:a.MyriadProBoldFactors,baseWidths:s.LiberationSansBoldWidths,baseMapping:s.LiberationSansBoldMapping,metrics:a.MyriadProBoldMetrics},t["MyriadPro-It"]=t["MyriadPro-Italic"]=t["PdfJS-Fallback-Italic"]={name:"LiberationSans-Italic",factors:a.MyriadProItalicFactors,baseWidths:s.LiberationSansItalicWidths,baseMapping:s.LiberationSansItalicMapping,metrics:a.MyriadProItalicMetrics},t["MyriadPro-BoldIt"]=t["MyriadPro-BoldItalic"]=t["PdfJS-Fallback-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:a.MyriadProBoldItalicFactors,baseWidths:s.LiberationSansBoldItalicWidths,baseMapping:s.LiberationSansBoldItalicMapping,metrics:a.MyriadProBoldItalicMetrics},t.ArialMT=t.Arial=t["Arial-Regular"]={name:"LiberationSans-Regular",baseWidths:s.LiberationSansRegularWidths,baseMapping:s.LiberationSansRegularMapping},t["Arial-BoldMT"]=t["Arial-Bold"]={name:"LiberationSans-Bold",baseWidths:s.LiberationSansBoldWidths,baseMapping:s.LiberationSansBoldMapping},t["Arial-ItalicMT"]=t["Arial-Italic"]={name:"LiberationSans-Italic",baseWidths:s.LiberationSansItalicWidths,baseMapping:s.LiberationSansItalicMapping},t["Arial-BoldItalicMT"]=t["Arial-BoldItalic"]={name:"LiberationSans-BoldItalic",baseWidths:s.LiberationSansBoldItalicWidths,baseMapping:s.LiberationSansBoldItalicMapping},t["Calibri-Regular"]={name:"LiberationSans-Regular",factors:r.CalibriRegularFactors,baseWidths:s.LiberationSansRegularWidths,baseMapping:s.LiberationSansRegularMapping,metrics:r.CalibriRegularMetrics},t["Calibri-Bold"]={name:"LiberationSans-Bold",factors:r.CalibriBoldFactors,baseWidths:s.LiberationSansBoldWidths,baseMapping:s.LiberationSansBoldMapping,metrics:r.CalibriBoldMetrics},t["Calibri-Italic"]={name:"LiberationSans-Italic",factors:r.CalibriItalicFactors,baseWidths:s.LiberationSansItalicWidths,baseMapping:s.LiberationSansItalicMapping,metrics:r.CalibriItalicMetrics},t["Calibri-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:r.CalibriBoldItalicFactors,baseWidths:s.LiberationSansBoldItalicWidths,baseMapping:s.LiberationSansBoldItalicMapping,metrics:r.CalibriBoldItalicMetrics},t["Segoeui-Regular"]={name:"LiberationSans-Regular",factors:l.SegoeuiRegularFactors,baseWidths:s.LiberationSansRegularWidths,baseMapping:s.LiberationSansRegularMapping,metrics:l.SegoeuiRegularMetrics},t["Segoeui-Bold"]={name:"LiberationSans-Bold",factors:l.SegoeuiBoldFactors,baseWidths:s.LiberationSansBoldWidths,baseMapping:s.LiberationSansBoldMapping,metrics:l.SegoeuiBoldMetrics},t["Segoeui-Italic"]={name:"LiberationSans-Italic",factors:l.SegoeuiItalicFactors,baseWidths:s.LiberationSansItalicWidths,baseMapping:s.LiberationSansItalicMapping,metrics:l.SegoeuiItalicMetrics},t["Segoeui-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:l.SegoeuiBoldItalicFactors,baseWidths:s.LiberationSansBoldItalicWidths,baseMapping:s.LiberationSansBoldItalicMapping,metrics:l.SegoeuiBoldItalicMetrics},t["Helvetica-Regular"]=t.Helvetica={name:"LiberationSans-Regular",factors:o.HelveticaRegularFactors,baseWidths:s.LiberationSansRegularWidths,baseMapping:s.LiberationSansRegularMapping,metrics:o.HelveticaRegularMetrics},t["Helvetica-Bold"]={name:"LiberationSans-Bold",factors:o.HelveticaBoldFactors,baseWidths:s.LiberationSansBoldWidths,baseMapping:s.LiberationSansBoldMapping,metrics:o.HelveticaBoldMetrics},t["Helvetica-Italic"]={name:"LiberationSans-Italic",factors:o.HelveticaItalicFactors,baseWidths:s.LiberationSansItalicWidths,baseMapping:s.LiberationSansItalicMapping,metrics:o.HelveticaItalicMetrics},t["Helvetica-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:o.HelveticaBoldItalicFactors,baseWidths:s.LiberationSansBoldItalicWidths,baseMapping:s.LiberationSansBoldItalicMapping,metrics:o.HelveticaBoldItalicMetrics}}));function p(t){const e=(0,h.normalizeFontName)(t);return u()[e]}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CalibriRegularMetrics=e.CalibriRegularFactors=e.CalibriItalicMetrics=e.CalibriItalicFactors=e.CalibriBoldMetrics=e.CalibriBoldItalicMetrics=e.CalibriBoldItalicFactors=e.CalibriBoldFactors=void 0,e.CalibriBoldFactors=[1.3877,1,1,1,.97801,.92482,.89552,.91133,.81988,.97566,.98152,.93548,.93548,1.2798,.85284,.92794,1,.96134,1.54657,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.82845,.82845,.85284,.85284,.85284,.75859,.92138,.83908,.7762,.73293,.87289,.73133,.7514,.81921,.87356,.95958,.59526,.75727,.69225,1.04924,.9121,.86943,.79795,.88198,.77958,.70864,.81055,.90399,.88653,.96017,.82577,.77892,.78257,.97507,1.54657,.97507,.85284,.89552,.90176,.88762,.8785,.75241,.8785,.90518,.95015,.77618,.8785,.88401,.91916,.86304,.88401,.91488,.8785,.8801,.8785,.8785,.91343,.7173,1.04106,.8785,.85075,.95794,.82616,.85162,.79492,.88331,1.69808,.88331,.85284,.97801,.89552,.91133,.89552,.91133,1.7801,.89552,1.24487,1.13254,1.12401,.96839,.85284,.68787,.70645,.85592,.90747,1.01466,1.0088,.90323,1,1.07463,1,.91056,.75806,1.19118,.96839,.78864,.82845,.84133,.75859,.83908,.83908,.83908,.83908,.83908,.83908,.77539,.73293,.73133,.73133,.73133,.73133,.95958,.95958,.95958,.95958,.88506,.9121,.86943,.86943,.86943,.86943,.86943,.85284,.87508,.90399,.90399,.90399,.90399,.77892,.79795,.90807,.88762,.88762,.88762,.88762,.88762,.88762,.8715,.75241,.90518,.90518,.90518,.90518,.88401,.88401,.88401,.88401,.8785,.8785,.8801,.8801,.8801,.8801,.8801,.90747,.89049,.8785,.8785,.8785,.8785,.85162,.8785,.85162,.83908,.88762,.83908,.88762,.83908,.88762,.73293,.75241,.73293,.75241,.73293,.75241,.73293,.75241,.87289,.83016,.88506,.93125,.73133,.90518,.73133,.90518,.73133,.90518,.73133,.90518,.73133,.90518,.81921,.77618,.81921,.77618,.81921,.77618,1,1,.87356,.8785,.91075,.89608,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.76229,.90167,.59526,.91916,1,1,.86304,.69225,.88401,1,1,.70424,.79468,.91926,.88175,.70823,.94903,.9121,.8785,1,1,.9121,.8785,.87802,.88656,.8785,.86943,.8801,.86943,.8801,.86943,.8801,.87402,.89291,.77958,.91343,1,1,.77958,.91343,.70864,.7173,.70864,.7173,.70864,.7173,.70864,.7173,1,1,.81055,.75841,.81055,1.06452,.90399,.8785,.90399,.8785,.90399,.8785,.90399,.8785,.90399,.8785,.90399,.8785,.96017,.95794,.77892,.85162,.77892,.78257,.79492,.78257,.79492,.78257,.79492,.9297,.56892,.83908,.88762,.77539,.8715,.87508,.89049,1,1,.81055,1.04106,1.20528,1.20528,1,1.15543,.70674,.98387,.94721,1.33431,1.45894,.95161,1.06303,.83908,.80352,.57184,.6965,.56289,.82001,.56029,.81235,1.02988,.83908,.7762,.68156,.80367,.73133,.78257,.87356,.86943,.95958,.75727,.89019,1.04924,.9121,.7648,.86943,.87356,.79795,.78275,.81055,.77892,.9762,.82577,.99819,.84896,.95958,.77892,.96108,1.01407,.89049,1.02988,.94211,.96108,.8936,.84021,.87842,.96399,.79109,.89049,1.00813,1.02988,.86077,.87445,.92099,.84723,.86513,.8801,.75638,.85714,.78216,.79586,.87965,.94211,.97747,.78287,.97926,.84971,1.02988,.94211,.8801,.94211,.84971,.73133,1,1,1,1,1,1,1,1,1,1,1,1,.90264,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.90518,1,1,1,1,1,1,1,1,1,1,1,1,.90548,1,1,1,1,1,1,.96017,.95794,.96017,.95794,.96017,.95794,.77892,.85162,1,1,.89552,.90527,1,.90363,.92794,.92794,.92794,.92794,.87012,.87012,.87012,.89552,.89552,1.42259,.71143,1.06152,1,1,1.03372,1.03372,.97171,1.4956,2.2807,.93835,.83406,.91133,.84107,.91133,1,1,1,.72021,1,1.23108,.83489,.88525,.88525,.81499,.90527,1.81055,.90527,1.81055,1.31006,1.53711,.94434,1.08696,1,.95018,.77192,.85284,.90747,1.17534,.69825,.9716,1.37077,.90747,.90747,.85356,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.08004,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,.90727,.90727,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.CalibriBoldMetrics={lineHeight:1.2207,lineGap:.2207},e.CalibriBoldItalicFactors=[1.3877,1,1,1,.97801,.92482,.89552,.91133,.81988,.97566,.98152,.93548,.93548,1.2798,.85284,.92794,1,.96134,1.56239,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.82845,.82845,.85284,.85284,.85284,.75859,.92138,.83908,.7762,.71805,.87289,.73133,.7514,.81921,.87356,.95958,.59526,.75727,.69225,1.04924,.90872,.85938,.79795,.87068,.77958,.69766,.81055,.90399,.88653,.96068,.82577,.77892,.78257,.97507,1.529,.97507,.85284,.89552,.90176,.94908,.86411,.74012,.86411,.88323,.95015,.86411,.86331,.88401,.91916,.86304,.88401,.9039,.86331,.86331,.86411,.86411,.90464,.70852,1.04106,.86331,.84372,.95794,.82616,.84548,.79492,.88331,1.69808,.88331,.85284,.97801,.89552,.91133,.89552,.91133,1.7801,.89552,1.24487,1.13254,1.19129,.96839,.85284,.68787,.70645,.85592,.90747,1.01466,1.0088,.90323,1,1.07463,1,.91056,.75806,1.19118,.96839,.78864,.82845,.84133,.75859,.83908,.83908,.83908,.83908,.83908,.83908,.77539,.71805,.73133,.73133,.73133,.73133,.95958,.95958,.95958,.95958,.88506,.90872,.85938,.85938,.85938,.85938,.85938,.85284,.87068,.90399,.90399,.90399,.90399,.77892,.79795,.90807,.94908,.94908,.94908,.94908,.94908,.94908,.85887,.74012,.88323,.88323,.88323,.88323,.88401,.88401,.88401,.88401,.8785,.86331,.86331,.86331,.86331,.86331,.86331,.90747,.89049,.86331,.86331,.86331,.86331,.84548,.86411,.84548,.83908,.94908,.83908,.94908,.83908,.94908,.71805,.74012,.71805,.74012,.71805,.74012,.71805,.74012,.87289,.79538,.88506,.92726,.73133,.88323,.73133,.88323,.73133,.88323,.73133,.88323,.73133,.88323,.81921,.86411,.81921,.86411,.81921,.86411,1,1,.87356,.86331,.91075,.8777,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.76467,.90167,.59526,.91916,1,1,.86304,.69225,.88401,1,1,.70424,.77312,.91926,.88175,.70823,.94903,.90872,.86331,1,1,.90872,.86331,.86906,.88116,.86331,.85938,.86331,.85938,.86331,.85938,.86331,.87402,.86549,.77958,.90464,1,1,.77958,.90464,.69766,.70852,.69766,.70852,.69766,.70852,.69766,.70852,1,1,.81055,.75841,.81055,1.06452,.90399,.86331,.90399,.86331,.90399,.86331,.90399,.86331,.90399,.86331,.90399,.86331,.96068,.95794,.77892,.84548,.77892,.78257,.79492,.78257,.79492,.78257,.79492,.9297,.56892,.83908,.94908,.77539,.85887,.87068,.89049,1,1,.81055,1.04106,1.20528,1.20528,1,1.15543,.70088,.98387,.94721,1.33431,1.45894,.95161,1.48387,.83908,.80352,.57118,.6965,.56347,.79179,.55853,.80346,1.02988,.83908,.7762,.67174,.86036,.73133,.78257,.87356,.86441,.95958,.75727,.89019,1.04924,.90872,.74889,.85938,.87891,.79795,.7957,.81055,.77892,.97447,.82577,.97466,.87179,.95958,.77892,.94252,.95612,.8753,1.02988,.92733,.94252,.87411,.84021,.8728,.95612,.74081,.8753,1.02189,1.02988,.84814,.87445,.91822,.84723,.85668,.86331,.81344,.87581,.76422,.82046,.96057,.92733,.99375,.78022,.95452,.86015,1.02988,.92733,.86331,.92733,.86015,.73133,1,1,1,1,1,1,1,1,1,1,1,1,.90631,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.88323,1,1,1,1,1,1,1,1,1,1,1,1,.85174,1,1,1,1,1,1,.96068,.95794,.96068,.95794,.96068,.95794,.77892,.84548,1,1,.89552,.90527,1,.90363,.92794,.92794,.92794,.89807,.87012,.87012,.87012,.89552,.89552,1.42259,.71094,1.06152,1,1,1.03372,1.03372,.97171,1.4956,2.2807,.92972,.83406,.91133,.83326,.91133,1,1,1,.72021,1,1.23108,.83489,.88525,.88525,.81499,.90616,1.81055,.90527,1.81055,1.3107,1.53711,.94434,1.08696,1,.95018,.77192,.85284,.90747,1.17534,.69825,.9716,1.37077,.90747,.90747,.85356,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.08004,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,.90727,.90727,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.CalibriBoldItalicMetrics={lineHeight:1.2207,lineGap:.2207},e.CalibriItalicFactors=[1.3877,1,1,1,1.17223,1.1293,.89552,.91133,.80395,1.02269,1.15601,.91056,.91056,1.2798,.85284,.89807,1,.90861,1.39543,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.96309,.96309,.85284,.85284,.85284,.83319,.88071,.8675,.81552,.72346,.85193,.73206,.7522,.81105,.86275,.90685,.6377,.77892,.75593,1.02638,.89249,.84118,.77452,.85374,.75186,.67789,.79776,.88844,.85066,.94309,.77818,.7306,.76659,1.10369,1.38313,1.10369,1.06139,.89552,.8739,.9245,.9245,.83203,.9245,.85865,1.09842,.9245,.9245,1.03297,1.07692,.90918,1.03297,.94959,.9245,.92274,.9245,.9245,1.02933,.77832,1.20562,.9245,.8916,.98986,.86621,.89453,.79004,.94152,1.77256,.94152,.85284,.97801,.89552,.91133,.89552,.91133,1.91729,.89552,1.17889,1.13254,1.16359,.92098,.85284,.68787,.71353,.84737,.90747,1.0088,1.0044,.87683,1,1.09091,1,.92229,.739,1.15642,.92098,.76288,.80504,.80972,.75859,.8675,.8675,.8675,.8675,.8675,.8675,.76318,.72346,.73206,.73206,.73206,.73206,.90685,.90685,.90685,.90685,.86477,.89249,.84118,.84118,.84118,.84118,.84118,.85284,.84557,.88844,.88844,.88844,.88844,.7306,.77452,.86331,.9245,.9245,.9245,.9245,.9245,.9245,.84843,.83203,.85865,.85865,.85865,.85865,.82601,.82601,.82601,.82601,.94469,.9245,.92274,.92274,.92274,.92274,.92274,.90747,.86651,.9245,.9245,.9245,.9245,.89453,.9245,.89453,.8675,.9245,.8675,.9245,.8675,.9245,.72346,.83203,.72346,.83203,.72346,.83203,.72346,.83203,.85193,.8875,.86477,.99034,.73206,.85865,.73206,.85865,.73206,.85865,.73206,.85865,.73206,.85865,.81105,.9245,.81105,.9245,.81105,.9245,1,1,.86275,.9245,.90872,.93591,.90685,.82601,.90685,.82601,.90685,.82601,.90685,1.03297,.90685,.82601,.77896,1.05611,.6377,1.07692,1,1,.90918,.75593,1.03297,1,1,.76032,.9375,.98156,.93407,.77261,1.11429,.89249,.9245,1,1,.89249,.9245,.92534,.86698,.9245,.84118,.92274,.84118,.92274,.84118,.92274,.8667,.86291,.75186,1.02933,1,1,.75186,1.02933,.67789,.77832,.67789,.77832,.67789,.77832,.67789,.77832,1,1,.79776,.97655,.79776,1.23023,.88844,.9245,.88844,.9245,.88844,.9245,.88844,.9245,.88844,.9245,.88844,.9245,.94309,.98986,.7306,.89453,.7306,.76659,.79004,.76659,.79004,.76659,.79004,1.09231,.54873,.8675,.9245,.76318,.84843,.84557,.86651,1,1,.79776,1.20562,1.18622,1.18622,1,1.1437,.67009,.96334,.93695,1.35191,1.40909,.95161,1.48387,.8675,.90861,.6192,.7363,.64824,.82411,.56321,.85696,1.23516,.8675,.81552,.7286,.84134,.73206,.76659,.86275,.84369,.90685,.77892,.85871,1.02638,.89249,.75828,.84118,.85984,.77452,.76466,.79776,.7306,.90782,.77818,.903,.87291,.90685,.7306,.99058,1.03667,.94635,1.23516,.9849,.99058,.92393,.8916,.942,1.03667,.75026,.94635,1.0297,1.23516,.90918,.94048,.98217,.89746,.84153,.92274,.82507,.88832,.84438,.88178,1.03525,.9849,1.00225,.78086,.97248,.89404,1.23516,.9849,.92274,.9849,.89404,.73206,1,1,1,1,1,1,1,1,1,1,1,1,.89693,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.85865,1,1,1,1,1,1,1,1,1,1,1,1,.90933,1,1,1,1,1,1,.94309,.98986,.94309,.98986,.94309,.98986,.7306,.89453,1,1,.89552,.90527,1,.90186,1.12308,1.12308,1.12308,1.12308,1.2566,1.2566,1.2566,.89552,.89552,1.42259,.68994,1.03809,1,1,1.0176,1.0176,1.11523,1.4956,2.01462,.97858,.82616,.91133,.83437,.91133,1,1,1,.70508,1,1.23108,.79801,.84426,.84426,.774,.90572,1.81055,.90749,1.81055,1.28809,1.55469,.94434,1.07806,1,.97094,.7589,.85284,.90747,1.19658,.69825,.97622,1.33512,.90747,.90747,.85284,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.0336,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,1.05859,1.05859,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.CalibriItalicMetrics={lineHeight:1.2207,lineGap:.2207},e.CalibriRegularFactors=[1.3877,1,1,1,1.17223,1.1293,.89552,.91133,.80395,1.02269,1.15601,.91056,.91056,1.2798,.85284,.89807,1,.90861,1.39016,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.96309,.96309,.85284,.85284,.85284,.83319,.88071,.8675,.81552,.73834,.85193,.73206,.7522,.81105,.86275,.90685,.6377,.77892,.75593,1.02638,.89385,.85122,.77452,.86503,.75186,.68887,.79776,.88844,.85066,.94258,.77818,.7306,.76659,1.10369,1.39016,1.10369,1.06139,.89552,.8739,.86128,.94469,.8457,.94469,.89464,1.09842,.84636,.94469,1.03297,1.07692,.90918,1.03297,.95897,.94469,.9482,.94469,.94469,1.04692,.78223,1.20562,.94469,.90332,.98986,.86621,.90527,.79004,.94152,1.77256,.94152,.85284,.97801,.89552,.91133,.89552,.91133,1.91729,.89552,1.17889,1.13254,1.08707,.92098,.85284,.68787,.71353,.84737,.90747,1.0088,1.0044,.87683,1,1.09091,1,.92229,.739,1.15642,.92098,.76288,.80504,.80972,.75859,.8675,.8675,.8675,.8675,.8675,.8675,.76318,.73834,.73206,.73206,.73206,.73206,.90685,.90685,.90685,.90685,.86477,.89385,.85122,.85122,.85122,.85122,.85122,.85284,.85311,.88844,.88844,.88844,.88844,.7306,.77452,.86331,.86128,.86128,.86128,.86128,.86128,.86128,.8693,.8457,.89464,.89464,.89464,.89464,.82601,.82601,.82601,.82601,.94469,.94469,.9482,.9482,.9482,.9482,.9482,.90747,.86651,.94469,.94469,.94469,.94469,.90527,.94469,.90527,.8675,.86128,.8675,.86128,.8675,.86128,.73834,.8457,.73834,.8457,.73834,.8457,.73834,.8457,.85193,.92454,.86477,.9921,.73206,.89464,.73206,.89464,.73206,.89464,.73206,.89464,.73206,.89464,.81105,.84636,.81105,.84636,.81105,.84636,1,1,.86275,.94469,.90872,.95786,.90685,.82601,.90685,.82601,.90685,.82601,.90685,1.03297,.90685,.82601,.77741,1.05611,.6377,1.07692,1,1,.90918,.75593,1.03297,1,1,.76032,.90452,.98156,1.11842,.77261,1.11429,.89385,.94469,1,1,.89385,.94469,.95877,.86901,.94469,.85122,.9482,.85122,.9482,.85122,.9482,.8667,.90016,.75186,1.04692,1,1,.75186,1.04692,.68887,.78223,.68887,.78223,.68887,.78223,.68887,.78223,1,1,.79776,.92188,.79776,1.23023,.88844,.94469,.88844,.94469,.88844,.94469,.88844,.94469,.88844,.94469,.88844,.94469,.94258,.98986,.7306,.90527,.7306,.76659,.79004,.76659,.79004,.76659,.79004,1.09231,.54873,.8675,.86128,.76318,.8693,.85311,.86651,1,1,.79776,1.20562,1.18622,1.18622,1,1.1437,.67742,.96334,.93695,1.35191,1.40909,.95161,1.48387,.86686,.90861,.62267,.74359,.65649,.85498,.56963,.88254,1.23516,.8675,.81552,.75443,.84503,.73206,.76659,.86275,.85122,.90685,.77892,.85746,1.02638,.89385,.75657,.85122,.86275,.77452,.74171,.79776,.7306,.95165,.77818,.89772,.88831,.90685,.7306,.98142,1.02191,.96576,1.23516,.99018,.98142,.9236,.89258,.94035,1.02191,.78848,.96576,.9561,1.23516,.90918,.92578,.95424,.89746,.83969,.9482,.80113,.89442,.85208,.86155,.98022,.99018,1.00452,.81209,.99247,.89181,1.23516,.99018,.9482,.99018,.89181,.73206,1,1,1,1,1,1,1,1,1,1,1,1,.88844,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.89464,1,1,1,1,1,1,1,1,1,1,1,1,.96766,1,1,1,1,1,1,.94258,.98986,.94258,.98986,.94258,.98986,.7306,.90527,1,1,.89552,.90527,1,.90186,1.12308,1.12308,1.12308,1.12308,1.2566,1.2566,1.2566,.89552,.89552,1.42259,.69043,1.03809,1,1,1.0176,1.0176,1.11523,1.4956,2.01462,.99331,.82616,.91133,.84286,.91133,1,1,1,.70508,1,1.23108,.79801,.84426,.84426,.774,.90527,1.81055,.90527,1.81055,1.28809,1.55469,.94434,1.07806,1,.97094,.7589,.85284,.90747,1.19658,.69825,.97622,1.33512,.90747,.90747,.85356,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.0336,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,1.05859,1.05859,1,1,1,1.07185,.99413,.96334,1.08065,1,1,1,1,1,1,1,1,1,1,1],e.CalibriRegularMetrics={lineHeight:1.2207,lineGap:.2207}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.HelveticaRegularMetrics=e.HelveticaRegularFactors=e.HelveticaItalicMetrics=e.HelveticaItalicFactors=e.HelveticaBoldMetrics=e.HelveticaBoldItalicMetrics=e.HelveticaBoldItalicFactors=e.HelveticaBoldFactors=void 0,e.HelveticaBoldFactors=[.76116,1,1,1.0006,.99998,.99974,.99973,.99973,.99982,.99977,1.00087,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99998,1,1.00003,1.00003,1.00003,1.00026,.9999,.99977,.99977,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,.99973,.99977,1.00026,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,.99998,1.0006,.99998,1.00003,.99973,.99998,.99973,1.00026,.99973,1.00026,.99973,.99998,1.00026,1.00026,1.0006,1.0006,.99973,1.0006,.99982,1.00026,1.00026,1.00026,1.00026,.99959,.99973,.99998,1.00026,.99973,1.00022,.99973,.99973,1,.99959,1.00077,.99959,1.00003,.99998,.99973,.99973,.99973,.99973,1.00077,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.99973,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,.99977,.99977,.99977,.99977,.99977,.99977,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,.99973,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.06409,1.00026,1.00026,1.00026,1.00026,1.00026,.99973,1.00026,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,1.03374,.99977,1.00026,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,.99977,1.00026,.99977,1.00026,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.00042,.99973,.99973,1.0006,.99977,.99973,.99973,1.00026,1.0006,1.00026,1.0006,1.00026,1.03828,1.00026,.99999,1.00026,1.0006,.99977,1.00026,.99977,1.00026,.99977,1.00026,.9993,.9998,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1,1.00016,.99977,.99959,.99977,.99959,.99977,.99959,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00026,.99998,1.00026,.8121,1.00026,.99998,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,1.00016,1.00022,1.00001,.99973,1.00001,1.00026,1,1.00026,1,1.00026,1,1.0006,.99973,.99977,.99973,1,.99982,1.00022,1.00026,1.00001,.99973,1.00026,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,1.00034,.99977,1,.99997,1.00026,1.00078,1.00036,.99973,1.00013,1.0006,.99977,.99977,.99988,.85148,1.00001,1.00026,.99977,1.00022,1.0006,.99977,1.00001,.99999,.99977,1.00069,1.00022,.99977,1.00001,.99984,1.00026,1.00001,1.00024,1.00001,.9999,1,1.0006,1.00001,1.00041,.99962,1.00026,1.0006,.99995,1.00041,.99942,.99973,.99927,1.00082,.99902,1.00026,1.00087,1.0006,1.00069,.99973,.99867,.99973,.9993,1.00026,1.00049,1.00056,1,.99988,.99935,.99995,.99954,1.00055,.99945,1.00032,1.0006,.99995,1.00026,.99995,1.00032,1.00001,1.00008,.99971,1.00019,.9994,1.00001,1.0006,1.00044,.99973,1.00023,1.00047,1,.99942,.99561,.99989,1.00035,.99977,1.00035,.99977,1.00019,.99944,1.00001,1.00021,.99926,1.00035,1.00035,.99942,1.00048,.99999,.99977,1.00022,1.00035,1.00001,.99977,1.00026,.99989,1.00057,1.00001,.99936,1.00052,1.00012,.99996,1.00043,1,1.00035,.9994,.99976,1.00035,.99973,1.00052,1.00041,1.00119,1.00037,.99973,1.00002,.99986,1.00041,1.00041,.99902,.9996,1.00034,.99999,1.00026,.99999,1.00026,.99973,1.00052,.99973,1,.99973,1.00041,1.00075,.9994,1.0003,.99999,1,1.00041,.99955,1,.99915,.99973,.99973,1.00026,1.00119,.99955,.99973,1.0006,.99911,1.0006,1.00026,.99972,1.00026,.99902,1.00041,.99973,.99999,1,1,1.00038,1.0005,1.00016,1.00022,1.00016,1.00022,1.00016,1.00022,1.00001,.99973,1,1,.99973,1,1,.99955,1.0006,1.0006,1.0006,1.0006,1,1,1,.99973,.99973,.99972,1,1,1.00106,.99999,.99998,.99998,.99999,.99998,1.66475,1,.99973,.99973,1.00023,.99973,.99971,1.00047,1.00023,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1,1,1,1,1,1,1,.99972,1,1.20985,1.39713,1.00003,1.00031,1.00015,1,.99561,1.00027,1.00031,1.00031,.99915,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.99972,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,.99998,.99998,.99998,.99998,1,1,1,1,1,1,1,1,1,1,1],e.HelveticaBoldMetrics={lineHeight:1.2,lineGap:.2},e.HelveticaBoldItalicFactors=[.76116,1,1,1.0006,.99998,.99974,.99973,.99973,.99982,.99977,1.00087,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99998,1,1.00003,1.00003,1.00003,1.00026,.9999,.99977,.99977,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,.99973,.99977,1.00026,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,.99998,1.0006,.99998,1.00003,.99973,.99998,.99973,1.00026,.99973,1.00026,.99973,.99998,1.00026,1.00026,1.0006,1.0006,.99973,1.0006,.99982,1.00026,1.00026,1.00026,1.00026,.99959,.99973,.99998,1.00026,.99973,1.00022,.99973,.99973,1,.99959,1.00077,.99959,1.00003,.99998,.99973,.99973,.99973,.99973,1.00077,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.99973,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,.99977,.99977,.99977,.99977,.99977,.99977,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,.99973,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.06409,1.00026,1.00026,1.00026,1.00026,1.00026,.99973,1.00026,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,1.0044,.99977,1.00026,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,.99977,1.00026,.99977,1.00026,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,.99971,.99973,.99973,1.0006,.99977,.99973,.99973,1.00026,1.0006,1.00026,1.0006,1.00026,1.01011,1.00026,.99999,1.00026,1.0006,.99977,1.00026,.99977,1.00026,.99977,1.00026,.9993,.9998,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1,1.00016,.99977,.99959,.99977,.99959,.99977,.99959,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00026,.99998,1.00026,.8121,1.00026,.99998,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,1.00016,1.00022,1.00001,.99973,1.00001,1.00026,1,1.00026,1,1.00026,1,1.0006,.99973,.99977,.99973,1,.99982,1.00022,1.00026,1.00001,.99973,1.00026,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99977,1,1,1.00026,.99969,.99972,.99981,.9998,1.0006,.99977,.99977,1.00022,.91155,1.00001,1.00026,.99977,1.00022,1.0006,.99977,1.00001,.99999,.99977,.99966,1.00022,1.00032,1.00001,.99944,1.00026,1.00001,.99968,1.00001,1.00047,1,1.0006,1.00001,.99981,1.00101,1.00026,1.0006,.99948,.99981,1.00064,.99973,.99942,1.00101,1.00061,1.00026,1.00069,1.0006,1.00014,.99973,1.01322,.99973,1.00065,1.00026,1.00012,.99923,1,1.00064,1.00076,.99948,1.00055,1.00063,1.00007,.99943,1.0006,.99948,1.00026,.99948,.99943,1.00001,1.00001,1.00029,1.00038,1.00035,1.00001,1.0006,1.0006,.99973,.99978,1.00001,1.00057,.99989,.99967,.99964,.99967,.99977,.99999,.99977,1.00038,.99977,1.00001,.99973,1.00066,.99967,.99967,1.00041,.99998,.99999,.99977,1.00022,.99967,1.00001,.99977,1.00026,.99964,1.00031,1.00001,.99999,.99999,1,1.00023,1,1,.99999,1.00035,1.00001,.99999,.99973,.99977,.99999,1.00058,.99973,.99973,.99955,.9995,1.00026,1.00026,1.00032,.99989,1.00034,.99999,1.00026,1.00026,1.00026,.99973,.45998,.99973,1.00026,.99973,1.00001,.99999,.99982,.99994,.99996,1,1.00042,1.00044,1.00029,1.00023,.99973,.99973,1.00026,.99949,1.00002,.99973,1.0006,1.0006,1.0006,.99975,1.00026,1.00026,1.00032,.98685,.99973,1.00026,1,1,.99966,1.00044,1.00016,1.00022,1.00016,1.00022,1.00016,1.00022,1.00001,.99973,1,1,.99973,1,1,.99955,1.0006,1.0006,1.0006,1.0006,1,1,1,.99973,.99973,.99972,1,1,1.00106,.99999,.99998,.99998,.99999,.99998,1.66475,1,.99973,.99973,1,.99973,.99971,.99978,1,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1.00098,1,1,1,1.00049,1,1,.99972,1,1.20985,1.39713,1.00003,1.00031,1.00015,1,.99561,1.00027,1.00031,1.00031,.99915,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.99972,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,.99998,.99998,.99998,.99998,1,1,1,1,1,1,1,1,1,1,1],e.HelveticaBoldItalicMetrics={lineHeight:1.35,lineGap:.2},e.HelveticaItalicFactors=[.76116,1,1,1.0006,1.0006,1.00006,.99973,.99973,.99982,1.00001,1.00043,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.0006,1,1.00003,1.00003,1.00003,.99973,.99987,1.00001,1.00001,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,1,1.00001,.99973,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,1.0006,1.0006,1.0006,.99949,.99973,.99998,.99973,.99973,1,.99973,.99973,1.0006,.99973,.99973,.99924,.99924,1,.99924,.99999,.99973,.99973,.99973,.99973,.99998,1,1.0006,.99973,1,.99977,1,1,1,1.00005,1.0009,1.00005,1.00003,.99998,.99973,.99973,.99973,.99973,1.0009,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.9998,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,1.00001,1.00001,1.00001,1.00001,1.00001,1.00001,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,1,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.06409,1.00026,.99973,.99973,.99973,.99973,1,.99973,1,1.00001,.99973,1.00001,.99973,1.00001,.99973,.99977,1,.99977,1,.99977,1,.99977,1,.99977,1.0288,.99977,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,.99977,.99973,.99977,.99973,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,.99924,1.0006,1.0006,.99946,1.00034,1,.99924,1.00001,1,1,.99973,.99924,.99973,.99924,.99973,1.06311,.99973,1.00024,.99973,.99924,.99977,.99973,.99977,.99973,.99977,.99973,1.00041,.9998,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1,1.00016,.99977,.99998,.99977,.99998,.99977,.99998,1.00001,1,1.00001,1,1.00001,1,1.00001,1,1.00026,1.0006,1.00026,.89547,1.00026,1.0006,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,1.00016,.99977,1.00001,1,1.00001,1.00026,1,1.00026,1,1.00026,1,.99924,.99973,1.00001,.99973,1,.99982,1.00022,1.00026,1.00001,1,1.00026,1.0006,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,1.00001,1,1.00054,.99977,1.00084,1.00007,.99973,1.00013,.99924,1.00001,1.00001,.99945,.91221,1.00001,1.00026,.99977,1.00022,1.0006,1.00001,1.00001,.99999,.99977,.99933,1.00022,1.00054,1.00001,1.00065,1.00026,1.00001,1.0001,1.00001,1.00052,1,1.0006,1.00001,.99945,.99897,.99968,.99924,1.00036,.99945,.99949,1,1.0006,.99897,.99918,.99968,.99911,.99924,1,.99962,1.01487,1,1.0005,.99973,1.00012,1.00043,1,.99995,.99994,1.00036,.99947,1.00019,1.00063,1.00025,.99924,1.00036,.99973,1.00036,1.00025,1.00001,1.00001,1.00027,1.0001,1.00068,1.00001,1.0006,1.0006,1,1.00008,.99957,.99972,.9994,.99954,.99975,1.00051,1.00001,1.00019,1.00001,1.0001,.99986,1.00001,1.00001,1.00038,.99954,.99954,.9994,1.00066,.99999,.99977,1.00022,1.00054,1.00001,.99977,1.00026,.99975,1.0001,1.00001,.99993,.9995,.99955,1.00016,.99978,.99974,1.00019,1.00022,.99955,1.00053,.99973,1.00089,1.00005,.99967,1.00048,.99973,1.00002,1.00034,.99973,.99973,.99964,1.00006,1.00066,.99947,.99973,.98894,.99973,1,.44898,1,.99946,1,1.00039,1.00082,.99991,.99991,.99985,1.00022,1.00023,1.00061,1.00006,.99966,.99973,.99973,.99973,1.00019,1.0008,1,.99924,.99924,.99924,.99983,1.00044,.99973,.99964,.98332,1,.99973,1,1,.99962,.99895,1.00016,.99977,1.00016,.99977,1.00016,.99977,1.00001,1,1,1,.99973,1,1,.99955,.99924,.99924,.99924,.99924,.99998,.99998,.99998,.99973,.99973,.99972,1,1,1.00267,.99999,.99998,.99998,1,.99998,1.66475,1,.99973,.99973,1.00023,.99973,1.00423,.99925,.99999,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1.00049,1,1.00245,1,1,1,1,.96329,1,1.20985,1.39713,1.00003,.8254,1.00015,1,1.00035,1.00027,1.00031,1.00031,1.00003,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.95317,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,.99998,.99998,.99998,.99998,1,1,1,1,1,1,1,1,1,1,1],e.HelveticaItalicMetrics={lineHeight:1.35,lineGap:.2},e.HelveticaRegularFactors=[.76116,1,1,1.0006,1.0006,1.00006,.99973,.99973,.99982,1.00001,1.00043,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.0006,1,1.00003,1.00003,1.00003,.99973,.99987,1.00001,1.00001,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,1,1.00001,.99973,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,1.0006,1.0006,1.0006,.99949,.99973,.99998,.99973,.99973,1,.99973,.99973,1.0006,.99973,.99973,.99924,.99924,1,.99924,.99999,.99973,.99973,.99973,.99973,.99998,1,1.0006,.99973,1,.99977,1,1,1,1.00005,1.0009,1.00005,1.00003,.99998,.99973,.99973,.99973,.99973,1.0009,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.9998,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,1.00001,1.00001,1.00001,1.00001,1.00001,1.00001,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,1,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.06409,1.00026,.99973,.99973,.99973,.99973,1,.99973,1,1.00001,.99973,1.00001,.99973,1.00001,.99973,.99977,1,.99977,1,.99977,1,.99977,1,.99977,1.04596,.99977,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,.99977,.99973,.99977,.99973,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,.99924,1.0006,1.0006,1.00019,1.00034,1,.99924,1.00001,1,1,.99973,.99924,.99973,.99924,.99973,1.02572,.99973,1.00005,.99973,.99924,.99977,.99973,.99977,.99973,.99977,.99973,.99999,.9998,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1,1.00016,.99977,.99998,.99977,.99998,.99977,.99998,1.00001,1,1.00001,1,1.00001,1,1.00001,1,1.00026,1.0006,1.00026,.84533,1.00026,1.0006,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,1.00016,.99977,1.00001,1,1.00001,1.00026,1,1.00026,1,1.00026,1,.99924,.99973,1.00001,.99973,1,.99982,1.00022,1.00026,1.00001,1,1.00026,1.0006,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99928,1,.99977,1.00013,1.00055,.99947,.99945,.99941,.99924,1.00001,1.00001,1.0004,.91621,1.00001,1.00026,.99977,1.00022,1.0006,1.00001,1.00005,.99999,.99977,1.00015,1.00022,.99977,1.00001,.99973,1.00026,1.00001,1.00019,1.00001,.99946,1,1.0006,1.00001,.99978,1.00045,.99973,.99924,1.00023,.99978,.99966,1,1.00065,1.00045,1.00019,.99973,.99973,.99924,1,1,.96499,1,1.00055,.99973,1.00008,1.00027,1,.9997,.99995,1.00023,.99933,1.00019,1.00015,1.00031,.99924,1.00023,.99973,1.00023,1.00031,1.00001,.99928,1.00029,1.00092,1.00035,1.00001,1.0006,1.0006,1,.99988,.99975,1,1.00082,.99561,.9996,1.00035,1.00001,.99962,1.00001,1.00092,.99964,1.00001,.99963,.99999,1.00035,1.00035,1.00082,.99962,.99999,.99977,1.00022,1.00035,1.00001,.99977,1.00026,.9996,.99967,1.00001,1.00034,1.00074,1.00054,1.00053,1.00063,.99971,.99962,1.00035,.99975,.99977,.99973,1.00043,.99953,1.0007,.99915,.99973,1.00008,.99892,1.00073,1.00073,1.00114,.99915,1.00073,.99955,.99973,1.00092,.99973,1,.99998,1,1.0003,1,1.00043,1.00001,.99969,1.0003,1,1.00035,1.00001,.9995,1,1.00092,.99973,.99973,.99973,1.0007,.9995,1,.99924,1.0006,.99924,.99972,1.00062,.99973,1.00114,1.00073,1,.99955,1,1,1.00047,.99968,1.00016,.99977,1.00016,.99977,1.00016,.99977,1.00001,1,1,1,.99973,1,1,.99955,.99924,.99924,.99924,.99924,.99998,.99998,.99998,.99973,.99973,.99972,1,1,1.00267,.99999,.99998,.99998,1,.99998,1.66475,1,.99973,.99973,1.00023,.99973,.99971,.99925,1.00023,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1,1,1,1,1,1,1,.96329,1,1.20985,1.39713,1.00003,.8254,1.00015,1,1.00035,1.00027,1.00031,1.00031,.99915,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.95317,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.HelveticaRegularMetrics={lineHeight:1.2,lineGap:.2}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LiberationSansRegularWidths=e.LiberationSansRegularMapping=e.LiberationSansItalicWidths=e.LiberationSansItalicMapping=e.LiberationSansBoldWidths=e.LiberationSansBoldMapping=e.LiberationSansBoldItalicWidths=e.LiberationSansBoldItalicMapping=void 0,e.LiberationSansBoldWidths=[365,0,333,278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,333,556,556,556,556,280,556,333,737,370,556,584,737,552,400,549,333,333,333,576,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,549,611,611,611,611,611,556,611,556,722,556,722,556,722,556,722,556,722,556,722,556,722,556,722,719,722,611,667,556,667,556,667,556,667,556,667,556,778,611,778,611,778,611,778,611,722,611,722,611,278,278,278,278,278,278,278,278,278,278,785,556,556,278,722,556,556,611,278,611,278,611,385,611,479,611,278,722,611,722,611,722,611,708,723,611,778,611,778,611,778,611,1e3,944,722,389,722,389,722,389,667,556,667,556,667,556,667,556,611,333,611,479,611,333,722,611,722,611,722,611,722,611,722,611,722,611,944,778,667,556,667,611,500,611,500,611,500,278,556,722,556,1e3,889,778,611,667,556,611,333,333,333,333,333,333,333,333,333,333,333,465,722,333,853,906,474,825,927,838,278,722,722,601,719,667,611,722,778,278,722,667,833,722,644,778,722,667,600,611,667,821,667,809,802,278,667,615,451,611,278,582,615,610,556,606,475,460,611,541,278,558,556,612,556,445,611,766,619,520,684,446,582,715,576,753,845,278,582,611,582,845,667,669,885,567,711,667,278,276,556,1094,1062,875,610,722,622,719,722,719,722,567,712,667,904,626,719,719,610,702,833,722,778,719,667,722,611,622,854,667,730,703,1005,1019,870,979,719,711,1031,719,556,618,615,417,635,556,709,497,615,615,500,635,740,604,611,604,611,556,490,556,875,556,615,581,833,844,729,854,615,552,854,583,556,556,611,417,552,556,278,281,278,969,906,611,500,615,556,604,778,611,487,447,944,778,944,778,944,778,667,556,333,333,556,1e3,1e3,552,278,278,278,278,500,500,500,556,556,350,1e3,1e3,240,479,333,333,604,333,167,396,556,556,1094,556,885,489,1115,1e3,768,600,834,834,834,834,1e3,500,1e3,500,1e3,500,500,494,612,823,713,584,549,713,979,722,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,611,611,333,333,333,333,333,333,333,333,222,222,333,333,333,333,333,333,333,333],e.LiberationSansBoldMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],e.LiberationSansBoldItalicWidths=[365,0,333,278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,333,556,556,556,556,280,556,333,737,370,556,584,737,552,400,549,333,333,333,576,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,549,611,611,611,611,611,556,611,556,722,556,722,556,722,556,722,556,722,556,722,556,722,556,722,740,722,611,667,556,667,556,667,556,667,556,667,556,778,611,778,611,778,611,778,611,722,611,722,611,278,278,278,278,278,278,278,278,278,278,782,556,556,278,722,556,556,611,278,611,278,611,396,611,479,611,278,722,611,722,611,722,611,708,723,611,778,611,778,611,778,611,1e3,944,722,389,722,389,722,389,667,556,667,556,667,556,667,556,611,333,611,479,611,333,722,611,722,611,722,611,722,611,722,611,722,611,944,778,667,556,667,611,500,611,500,611,500,278,556,722,556,1e3,889,778,611,667,556,611,333,333,333,333,333,333,333,333,333,333,333,333,722,333,854,906,473,844,930,847,278,722,722,610,671,667,611,722,778,278,722,667,833,722,657,778,718,667,590,611,667,822,667,829,781,278,667,620,479,611,278,591,620,621,556,610,479,492,611,558,278,566,556,603,556,450,611,712,605,532,664,409,591,704,578,773,834,278,591,611,591,834,667,667,886,614,719,667,278,278,556,1094,1042,854,622,719,677,719,722,708,722,614,722,667,927,643,719,719,615,687,833,722,778,719,667,722,611,677,781,667,729,708,979,989,854,1e3,708,719,1042,729,556,619,604,534,618,556,736,510,611,611,507,622,740,604,611,611,611,556,889,556,885,556,646,583,889,935,707,854,594,552,865,589,556,556,611,469,563,556,278,278,278,969,906,611,507,619,556,611,778,611,575,467,944,778,944,778,944,778,667,556,333,333,556,1e3,1e3,552,278,278,278,278,500,500,500,556,556,350,1e3,1e3,240,479,333,333,604,333,167,396,556,556,1104,556,885,516,1146,1e3,768,600,834,834,834,834,999,500,1e3,500,1e3,500,500,494,612,823,713,584,549,713,979,722,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,611,611,333,333,333,333,333,333,333,333,222,222,333,333,333,333,333,333,333,333],e.LiberationSansBoldItalicMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],e.LiberationSansItalicWidths=[365,0,333,278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,333,556,556,556,556,260,556,333,737,370,556,584,737,552,400,549,333,333,333,576,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,549,611,556,556,556,556,500,556,500,667,556,667,556,667,556,722,500,722,500,722,500,722,500,722,625,722,556,667,556,667,556,667,556,667,556,667,556,778,556,778,556,778,556,778,556,722,556,722,556,278,278,278,278,278,278,278,222,278,278,733,444,500,222,667,500,500,556,222,556,222,556,281,556,400,556,222,722,556,722,556,722,556,615,723,556,778,556,778,556,778,556,1e3,944,722,333,722,333,722,333,667,500,667,500,667,500,667,500,611,278,611,354,611,278,722,556,722,556,722,556,722,556,722,556,722,556,944,722,667,500,667,611,500,611,500,611,500,222,556,667,556,1e3,889,778,611,667,500,611,278,333,333,333,333,333,333,333,333,333,333,333,667,278,789,846,389,794,865,775,222,667,667,570,671,667,611,722,778,278,667,667,833,722,648,778,725,667,600,611,667,837,667,831,761,278,667,570,439,555,222,550,570,571,500,556,439,463,555,542,222,500,492,548,500,447,556,670,573,486,603,374,550,652,546,728,779,222,550,556,550,779,667,667,843,544,708,667,278,278,500,1066,982,844,589,715,639,724,667,651,667,544,704,667,917,614,715,715,589,686,833,722,778,725,667,722,611,639,795,667,727,673,920,923,805,886,651,694,1022,682,556,562,522,493,553,556,688,465,556,556,472,564,686,550,556,556,556,500,833,500,835,500,572,518,830,851,621,736,526,492,752,534,556,556,556,378,496,500,222,222,222,910,828,556,472,565,500,556,778,556,492,339,944,722,944,722,944,722,667,500,333,333,556,1e3,1e3,552,222,222,222,222,333,333,333,556,556,350,1e3,1e3,188,354,333,333,500,333,167,365,556,556,1094,556,885,323,1083,1e3,768,600,834,834,834,834,1e3,500,998,500,1e3,500,500,494,612,823,713,584,549,713,979,719,274,549,549,584,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,500,500,333,333,333,333,333,333,333,333,222,222,294,294,324,324,316,328,398,285],e.LiberationSansItalicMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],e.LiberationSansRegularWidths=[365,0,333,278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,333,556,556,556,556,260,556,333,737,370,556,584,737,552,400,549,333,333,333,576,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,549,611,556,556,556,556,500,556,500,667,556,667,556,667,556,722,500,722,500,722,500,722,500,722,615,722,556,667,556,667,556,667,556,667,556,667,556,778,556,778,556,778,556,778,556,722,556,722,556,278,278,278,278,278,278,278,222,278,278,735,444,500,222,667,500,500,556,222,556,222,556,292,556,334,556,222,722,556,722,556,722,556,604,723,556,778,556,778,556,778,556,1e3,944,722,333,722,333,722,333,667,500,667,500,667,500,667,500,611,278,611,375,611,278,722,556,722,556,722,556,722,556,722,556,722,556,944,722,667,500,667,611,500,611,500,611,500,222,556,667,556,1e3,889,778,611,667,500,611,278,333,333,333,333,333,333,333,333,333,333,333,667,278,784,838,384,774,855,752,222,667,667,551,668,667,611,722,778,278,667,668,833,722,650,778,722,667,618,611,667,798,667,835,748,278,667,578,446,556,222,547,578,575,500,557,446,441,556,556,222,500,500,576,500,448,556,690,569,482,617,395,547,648,525,713,781,222,547,556,547,781,667,667,865,542,719,667,278,278,500,1057,1010,854,583,722,635,719,667,656,667,542,677,667,923,604,719,719,583,656,833,722,778,719,667,722,611,635,760,667,740,667,917,938,792,885,656,719,1010,722,556,573,531,365,583,556,669,458,559,559,438,583,688,552,556,542,556,500,458,500,823,500,573,521,802,823,625,719,521,510,750,542,556,556,556,365,510,500,222,278,222,906,812,556,438,559,500,552,778,556,489,411,944,722,944,722,944,722,667,500,333,333,556,1e3,1e3,552,222,222,222,222,333,333,333,556,556,350,1e3,1e3,188,354,333,333,500,333,167,365,556,556,1094,556,885,323,1073,1e3,768,600,834,834,834,834,1e3,500,1e3,500,1e3,500,500,494,612,823,713,584,549,713,979,719,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,500,500,333,333,333,333,333,333,333,333,222,222,294,294,324,324,316,328,398,285],e.LiberationSansRegularMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MyriadProRegularMetrics=e.MyriadProRegularFactors=e.MyriadProItalicMetrics=e.MyriadProItalicFactors=e.MyriadProBoldMetrics=e.MyriadProBoldItalicMetrics=e.MyriadProBoldItalicFactors=e.MyriadProBoldFactors=void 0,e.MyriadProBoldFactors=[1.36898,1,1,.72706,.80479,.83734,.98894,.99793,.9897,.93884,.86209,.94292,.94292,1.16661,1.02058,.93582,.96694,.93582,1.19137,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.78076,.78076,1.02058,1.02058,1.02058,.72851,.78966,.90838,.83637,.82391,.96376,.80061,.86275,.8768,.95407,1.0258,.73901,.85022,.83655,1.0156,.95546,.92179,.87107,.92179,.82114,.8096,.89713,.94438,.95353,.94083,.91905,.90406,.9446,.94292,1.18777,.94292,1.02058,.89903,.90088,.94938,.97898,.81093,.97571,.94938,1.024,.9577,.95933,.98621,1.0474,.97455,.98981,.9672,.95933,.9446,.97898,.97407,.97646,.78036,1.10208,.95442,.95298,.97579,.9332,.94039,.938,.80687,1.01149,.80687,1.02058,.80479,.99793,.99793,.99793,.99793,1.01149,1.00872,.90088,.91882,1.0213,.8361,1.02058,.62295,.54324,.89022,1.08595,1,1,.90088,1,.97455,.93582,.90088,1,1.05686,.8361,.99642,.99642,.99642,.72851,.90838,.90838,.90838,.90838,.90838,.90838,.868,.82391,.80061,.80061,.80061,.80061,1.0258,1.0258,1.0258,1.0258,.97484,.95546,.92179,.92179,.92179,.92179,.92179,1.02058,.92179,.94438,.94438,.94438,.94438,.90406,.86958,.98225,.94938,.94938,.94938,.94938,.94938,.94938,.9031,.81093,.94938,.94938,.94938,.94938,.98621,.98621,.98621,.98621,.93969,.95933,.9446,.9446,.9446,.9446,.9446,1.08595,.9446,.95442,.95442,.95442,.95442,.94039,.97898,.94039,.90838,.94938,.90838,.94938,.90838,.94938,.82391,.81093,.82391,.81093,.82391,.81093,.82391,.81093,.96376,.84313,.97484,.97571,.80061,.94938,.80061,.94938,.80061,.94938,.80061,.94938,.80061,.94938,.8768,.9577,.8768,.9577,.8768,.9577,1,1,.95407,.95933,.97069,.95933,1.0258,.98621,1.0258,.98621,1.0258,.98621,1.0258,.98621,1.0258,.98621,.887,1.01591,.73901,1.0474,1,1,.97455,.83655,.98981,1,1,.83655,.73977,.83655,.73903,.84638,1.033,.95546,.95933,1,1,.95546,.95933,.8271,.95417,.95933,.92179,.9446,.92179,.9446,.92179,.9446,.936,.91964,.82114,.97646,1,1,.82114,.97646,.8096,.78036,.8096,.78036,1,1,.8096,.78036,1,1,.89713,.77452,.89713,1.10208,.94438,.95442,.94438,.95442,.94438,.95442,.94438,.95442,.94438,.95442,.94438,.95442,.94083,.97579,.90406,.94039,.90406,.9446,.938,.9446,.938,.9446,.938,1,.99793,.90838,.94938,.868,.9031,.92179,.9446,1,1,.89713,1.10208,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90989,.9358,.91945,.83181,.75261,.87992,.82976,.96034,.83689,.97268,1.0078,.90838,.83637,.8019,.90157,.80061,.9446,.95407,.92436,1.0258,.85022,.97153,1.0156,.95546,.89192,.92179,.92361,.87107,.96318,.89713,.93704,.95638,.91905,.91709,.92796,1.0258,.93704,.94836,1.0373,.95933,1.0078,.95871,.94836,.96174,.92601,.9498,.98607,.95776,.95933,1.05453,1.0078,.98275,.9314,.95617,.91701,1.05993,.9446,.78367,.9553,1,.86832,1.0128,.95871,.99394,.87548,.96361,.86774,1.0078,.95871,.9446,.95871,.86774,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.94083,.97579,.94083,.97579,.94083,.97579,.90406,.94039,.96694,1,.89903,1,1,1,.93582,.93582,.93582,1,.908,.908,.918,.94219,.94219,.96544,1,1.285,1,1,.81079,.81079,1,1,.74854,1,1,1,1,.99793,1,1,1,.65,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.17173,1,.80535,.76169,1.02058,1.0732,1.05486,1,1,1.30692,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.16161,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.MyriadProBoldMetrics={lineHeight:1.2,lineGap:.2},e.MyriadProBoldItalicFactors=[1.36898,1,1,.66227,.80779,.81625,.97276,.97276,.97733,.92222,.83266,.94292,.94292,1.16148,1.02058,.93582,.96694,.93582,1.17337,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.78076,.78076,1.02058,1.02058,1.02058,.71541,.76813,.85576,.80591,.80729,.94299,.77512,.83655,.86523,.92222,.98621,.71743,.81698,.79726,.98558,.92222,.90637,.83809,.90637,.80729,.76463,.86275,.90699,.91605,.9154,.85308,.85458,.90531,.94292,1.21296,.94292,1.02058,.89903,1.18616,.99613,.91677,.78216,.91677,.90083,.98796,.9135,.92168,.95381,.98981,.95298,.95381,.93459,.92168,.91513,.92004,.91677,.95077,.748,1.04502,.91677,.92061,.94236,.89544,.89364,.9,.80687,.8578,.80687,1.02058,.80779,.97276,.97276,.97276,.97276,.8578,.99973,1.18616,.91339,1.08074,.82891,1.02058,.55509,.71526,.89022,1.08595,1,1,1.18616,1,.96736,.93582,1.18616,1,1.04864,.82711,.99043,.99043,.99043,.71541,.85576,.85576,.85576,.85576,.85576,.85576,.845,.80729,.77512,.77512,.77512,.77512,.98621,.98621,.98621,.98621,.95961,.92222,.90637,.90637,.90637,.90637,.90637,1.02058,.90251,.90699,.90699,.90699,.90699,.85458,.83659,.94951,.99613,.99613,.99613,.99613,.99613,.99613,.85811,.78216,.90083,.90083,.90083,.90083,.95381,.95381,.95381,.95381,.9135,.92168,.91513,.91513,.91513,.91513,.91513,1.08595,.91677,.91677,.91677,.91677,.91677,.89364,.92332,.89364,.85576,.99613,.85576,.99613,.85576,.99613,.80729,.78216,.80729,.78216,.80729,.78216,.80729,.78216,.94299,.76783,.95961,.91677,.77512,.90083,.77512,.90083,.77512,.90083,.77512,.90083,.77512,.90083,.86523,.9135,.86523,.9135,.86523,.9135,1,1,.92222,.92168,.92222,.92168,.98621,.95381,.98621,.95381,.98621,.95381,.98621,.95381,.98621,.95381,.86036,.97096,.71743,.98981,1,1,.95298,.79726,.95381,1,1,.79726,.6894,.79726,.74321,.81691,1.0006,.92222,.92168,1,1,.92222,.92168,.79464,.92098,.92168,.90637,.91513,.90637,.91513,.90637,.91513,.909,.87514,.80729,.95077,1,1,.80729,.95077,.76463,.748,.76463,.748,1,1,.76463,.748,1,1,.86275,.72651,.86275,1.04502,.90699,.91677,.90699,.91677,.90699,.91677,.90699,.91677,.90699,.91677,.90699,.91677,.9154,.94236,.85458,.89364,.85458,.90531,.9,.90531,.9,.90531,.9,1,.97276,.85576,.99613,.845,.85811,.90251,.91677,1,1,.86275,1.04502,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.00899,1.30628,.85576,.80178,.66862,.7927,.69323,.88127,.72459,.89711,.95381,.85576,.80591,.7805,.94729,.77512,.90531,.92222,.90637,.98621,.81698,.92655,.98558,.92222,.85359,.90637,.90976,.83809,.94523,.86275,.83509,.93157,.85308,.83392,.92346,.98621,.83509,.92886,.91324,.92168,.95381,.90646,.92886,.90557,.86847,.90276,.91324,.86842,.92168,.99531,.95381,.9224,.85408,.92699,.86847,1.0051,.91513,.80487,.93481,1,.88159,1.05214,.90646,.97355,.81539,.89398,.85923,.95381,.90646,.91513,.90646,.85923,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.9154,.94236,.9154,.94236,.9154,.94236,.85458,.89364,.96694,1,.89903,1,1,1,.91782,.91782,.91782,1,.896,.896,.896,.9332,.9332,.95973,1,1.26,1,1,.80479,.80178,1,1,.85633,1,1,1,1,.97276,1,1,1,.698,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.14542,1,.79199,.78694,1.02058,1.03493,1.05486,1,1,1.23026,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.20006,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.MyriadProBoldItalicMetrics={lineHeight:1.2,lineGap:.2},e.MyriadProItalicFactors=[1.36898,1,1,.65507,.84943,.85639,.88465,.88465,.86936,.88307,.86948,.85283,.85283,1.06383,1.02058,.75945,.9219,.75945,1.17337,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.75945,.75945,1.02058,1.02058,1.02058,.69046,.70926,.85158,.77812,.76852,.89591,.70466,.76125,.80094,.86822,.83864,.728,.77212,.79475,.93637,.87514,.8588,.76013,.8588,.72421,.69866,.77598,.85991,.80811,.87832,.78112,.77512,.8562,1.0222,1.18417,1.0222,1.27014,.89903,1.15012,.93859,.94399,.846,.94399,.81453,1.0186,.94219,.96017,1.03075,1.02175,.912,1.03075,.96998,.96017,.93859,.94399,.94399,.95493,.746,1.12658,.94578,.91,.979,.882,.882,.83,.85034,.83537,.85034,1.02058,.70869,.88465,.88465,.88465,.88465,.83537,.90083,1.15012,.9161,.94565,.73541,1.02058,.53609,.69353,.79519,1.08595,1,1,1.15012,1,.91974,.75945,1.15012,1,.9446,.73361,.9005,.9005,.9005,.62864,.85158,.85158,.85158,.85158,.85158,.85158,.773,.76852,.70466,.70466,.70466,.70466,.83864,.83864,.83864,.83864,.90561,.87514,.8588,.8588,.8588,.8588,.8588,1.02058,.85751,.85991,.85991,.85991,.85991,.77512,.76013,.88075,.93859,.93859,.93859,.93859,.93859,.93859,.8075,.846,.81453,.81453,.81453,.81453,.82424,.82424,.82424,.82424,.9278,.96017,.93859,.93859,.93859,.93859,.93859,1.08595,.8562,.94578,.94578,.94578,.94578,.882,.94578,.882,.85158,.93859,.85158,.93859,.85158,.93859,.76852,.846,.76852,.846,.76852,.846,.76852,.846,.89591,.8544,.90561,.94399,.70466,.81453,.70466,.81453,.70466,.81453,.70466,.81453,.70466,.81453,.80094,.94219,.80094,.94219,.80094,.94219,1,1,.86822,.96017,.86822,.96017,.83864,.82424,.83864,.82424,.83864,.82424,.83864,1.03075,.83864,.82424,.81402,1.02738,.728,1.02175,1,1,.912,.79475,1.03075,1,1,.79475,.83911,.79475,.66266,.80553,1.06676,.87514,.96017,1,1,.87514,.96017,.86865,.87396,.96017,.8588,.93859,.8588,.93859,.8588,.93859,.867,.84759,.72421,.95493,1,1,.72421,.95493,.69866,.746,.69866,.746,1,1,.69866,.746,1,1,.77598,.88417,.77598,1.12658,.85991,.94578,.85991,.94578,.85991,.94578,.85991,.94578,.85991,.94578,.85991,.94578,.87832,.979,.77512,.882,.77512,.8562,.83,.8562,.83,.8562,.83,1,.88465,.85158,.93859,.773,.8075,.85751,.8562,1,1,.77598,1.12658,1.15012,1.15012,1.15012,1.15012,1.15012,1.15313,1.15012,1.15012,1.15012,1.08106,1.03901,.85158,.77025,.62264,.7646,.65351,.86026,.69461,.89947,1.03075,.85158,.77812,.76449,.88836,.70466,.8562,.86822,.8588,.83864,.77212,.85308,.93637,.87514,.82352,.8588,.85701,.76013,.89058,.77598,.8156,.82565,.78112,.77899,.89386,.83864,.8156,.9486,.92388,.96186,1.03075,.91123,.9486,.93298,.878,.93942,.92388,.84596,.96186,.95119,1.03075,.922,.88787,.95829,.88,.93559,.93859,.78815,.93758,1,.89217,1.03737,.91123,.93969,.77487,.85769,.86799,1.03075,.91123,.93859,.91123,.86799,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.87832,.979,.87832,.979,.87832,.979,.77512,.882,.9219,1,.89903,1,1,1,.87321,.87321,.87321,1,1.027,1.027,1.027,.86847,.86847,.79121,1,1.124,1,1,.73572,.73572,1,1,.85034,1,1,1,1,.88465,1,1,1,.669,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.04828,1,.74948,.75187,1.02058,.98391,1.02119,1,1,1.06233,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.05233,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.MyriadProItalicMetrics={lineHeight:1.2,lineGap:.2},e.MyriadProRegularFactors=[1.36898,1,1,.76305,.82784,.94935,.89364,.92241,.89073,.90706,.98472,.85283,.85283,1.0664,1.02058,.74505,.9219,.74505,1.23456,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.74505,.74505,1.02058,1.02058,1.02058,.73002,.72601,.91755,.8126,.80314,.92222,.73764,.79726,.83051,.90284,.86023,.74,.8126,.84869,.96518,.91115,.8858,.79761,.8858,.74498,.73914,.81363,.89591,.83659,.89633,.85608,.8111,.90531,1.0222,1.22736,1.0222,1.27014,.89903,.90088,.86667,1.0231,.896,1.01411,.90083,1.05099,1.00512,.99793,1.05326,1.09377,.938,1.06226,1.00119,.99793,.98714,1.0231,1.01231,.98196,.792,1.19137,.99074,.962,1.01915,.926,.942,.856,.85034,.92006,.85034,1.02058,.69067,.92241,.92241,.92241,.92241,.92006,.9332,.90088,.91882,.93484,.75339,1.02058,.56866,.54324,.79519,1.08595,1,1,.90088,1,.95325,.74505,.90088,1,.97198,.75339,.91009,.91009,.91009,.66466,.91755,.91755,.91755,.91755,.91755,.91755,.788,.80314,.73764,.73764,.73764,.73764,.86023,.86023,.86023,.86023,.92915,.91115,.8858,.8858,.8858,.8858,.8858,1.02058,.8858,.89591,.89591,.89591,.89591,.8111,.79611,.89713,.86667,.86667,.86667,.86667,.86667,.86667,.86936,.896,.90083,.90083,.90083,.90083,.84224,.84224,.84224,.84224,.97276,.99793,.98714,.98714,.98714,.98714,.98714,1.08595,.89876,.99074,.99074,.99074,.99074,.942,1.0231,.942,.91755,.86667,.91755,.86667,.91755,.86667,.80314,.896,.80314,.896,.80314,.896,.80314,.896,.92222,.93372,.92915,1.01411,.73764,.90083,.73764,.90083,.73764,.90083,.73764,.90083,.73764,.90083,.83051,1.00512,.83051,1.00512,.83051,1.00512,1,1,.90284,.99793,.90976,.99793,.86023,.84224,.86023,.84224,.86023,.84224,.86023,1.05326,.86023,.84224,.82873,1.07469,.74,1.09377,1,1,.938,.84869,1.06226,1,1,.84869,.83704,.84869,.81441,.85588,1.08927,.91115,.99793,1,1,.91115,.99793,.91887,.90991,.99793,.8858,.98714,.8858,.98714,.8858,.98714,.894,.91434,.74498,.98196,1,1,.74498,.98196,.73914,.792,.73914,.792,1,1,.73914,.792,1,1,.81363,.904,.81363,1.19137,.89591,.99074,.89591,.99074,.89591,.99074,.89591,.99074,.89591,.99074,.89591,.99074,.89633,1.01915,.8111,.942,.8111,.90531,.856,.90531,.856,.90531,.856,1,.92241,.91755,.86667,.788,.86936,.8858,.89876,1,1,.81363,1.19137,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90388,1.03901,.92138,.78105,.7154,.86169,.80513,.94007,.82528,.98612,1.06226,.91755,.8126,.81884,.92819,.73764,.90531,.90284,.8858,.86023,.8126,.91172,.96518,.91115,.83089,.8858,.87791,.79761,.89297,.81363,.88157,.89992,.85608,.81992,.94307,.86023,.88157,.95308,.98699,.99793,1.06226,.95817,.95308,.97358,.928,.98088,.98699,.92761,.99793,.96017,1.06226,.986,.944,.95978,.938,.96705,.98714,.80442,.98972,1,.89762,1.04552,.95817,.99007,.87064,.91879,.88888,1.06226,.95817,.98714,.95817,.88888,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.89633,1.01915,.89633,1.01915,.89633,1.01915,.8111,.942,.9219,1,.89903,1,1,1,.93173,.93173,.93173,1,1.06304,1.06304,1.06904,.89903,.89903,.80549,1,1.156,1,1,.76575,.76575,1,1,.72458,1,1,1,1,.92241,1,1,1,.619,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.07257,1,.74705,.71119,1.02058,1.024,1.02119,1,1,1.1536,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.05638,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.MyriadProRegularMetrics={lineHeight:1.2,lineGap:.2}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SegoeuiRegularMetrics=e.SegoeuiRegularFactors=e.SegoeuiItalicMetrics=e.SegoeuiItalicFactors=e.SegoeuiBoldMetrics=e.SegoeuiBoldItalicMetrics=e.SegoeuiBoldItalicFactors=e.SegoeuiBoldFactors=void 0,e.SegoeuiBoldFactors=[1.76738,1,1,.99297,.9824,1.04016,1.06497,1.03424,.97529,1.17647,1.23203,1.1085,1.1085,1.16939,1.2107,.9754,1.21408,.9754,1.59578,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,.81378,.81378,1.2107,1.2107,1.2107,.71703,.97847,.97363,.88776,.8641,1.02096,.79795,.85132,.914,1.06085,1.1406,.8007,.89858,.83693,1.14889,1.09398,.97489,.92094,.97489,.90399,.84041,.95923,1.00135,1,1.06467,.98243,.90996,.99361,1.1085,1.56942,1.1085,1.2107,.74627,.94282,.96752,1.01519,.86304,1.01359,.97278,1.15103,1.01359,.98561,1.02285,1.02285,1.00527,1.02285,1.0302,.99041,1.0008,1.01519,1.01359,1.02258,.79104,1.16862,.99041,.97454,1.02511,.99298,.96752,.95801,.94856,1.16579,.94856,1.2107,.9824,1.03424,1.03424,1,1.03424,1.16579,.8727,1.3871,1.18622,1.10818,1.04478,1.2107,1.18622,.75155,.94994,1.28826,1.21408,1.21408,.91056,1,.91572,.9754,.64663,1.18328,1.24866,1.04478,1.14169,1.15749,1.17389,.71703,.97363,.97363,.97363,.97363,.97363,.97363,.93506,.8641,.79795,.79795,.79795,.79795,1.1406,1.1406,1.1406,1.1406,1.02096,1.09398,.97426,.97426,.97426,.97426,.97426,1.2107,.97489,1.00135,1.00135,1.00135,1.00135,.90996,.92094,1.02798,.96752,.96752,.96752,.96752,.96752,.96752,.93136,.86304,.97278,.97278,.97278,.97278,1.02285,1.02285,1.02285,1.02285,.97122,.99041,1,1,1,1,1,1.28826,1.0008,.99041,.99041,.99041,.99041,.96752,1.01519,.96752,.97363,.96752,.97363,.96752,.97363,.96752,.8641,.86304,.8641,.86304,.8641,.86304,.8641,.86304,1.02096,1.03057,1.02096,1.03517,.79795,.97278,.79795,.97278,.79795,.97278,.79795,.97278,.79795,.97278,.914,1.01359,.914,1.01359,.914,1.01359,1,1,1.06085,.98561,1.06085,1.00879,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,.97138,1.08692,.8007,1.02285,1,1,1.00527,.83693,1.02285,1,1,.83693,.9455,.83693,.90418,.83693,1.13005,1.09398,.99041,1,1,1.09398,.99041,.96692,1.09251,.99041,.97489,1.0008,.97489,1.0008,.97489,1.0008,.93994,.97931,.90399,1.02258,1,1,.90399,1.02258,.84041,.79104,.84041,.79104,.84041,.79104,.84041,.79104,1,1,.95923,1.07034,.95923,1.16862,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.06467,1.02511,.90996,.96752,.90996,.99361,.95801,.99361,.95801,.99361,.95801,1.07733,1.03424,.97363,.96752,.93506,.93136,.97489,1.0008,1,1,.95923,1.16862,1.15103,1.15103,1.01173,1.03959,.75953,.81378,.79912,1.15103,1.21994,.95161,.87815,1.01149,.81525,.7676,.98167,1.01134,1.02546,.84097,1.03089,1.18102,.97363,.88776,.85134,.97826,.79795,.99361,1.06085,.97489,1.1406,.89858,1.0388,1.14889,1.09398,.86039,.97489,1.0595,.92094,.94793,.95923,.90996,.99346,.98243,1.02112,.95493,1.1406,.90996,1.03574,1.02597,1.0008,1.18102,1.06628,1.03574,1.0192,1.01932,1.00886,.97531,1.0106,1.0008,1.13189,1.18102,1.02277,.98683,1.0016,.99561,1.07237,1.0008,.90434,.99921,.93803,.8965,1.23085,1.06628,1.04983,.96268,1.0499,.98439,1.18102,1.06628,1.0008,1.06628,.98439,.79795,1,1,1,1,1,1,1,1,1,1,1,1,1.09466,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.97278,1,1,1,1,1,1,1,1,1,1,1,1,1.02065,1,1,1,1,1,1,1.06467,1.02511,1.06467,1.02511,1.06467,1.02511,.90996,.96752,1,1.21408,.89903,1,1,.75155,1.04394,1.04394,1.04394,1.04394,.98633,.98633,.98633,.73047,.73047,1.20642,.91211,1.25635,1.222,1.02956,1.03372,1.03372,.96039,1.24633,1,1.12454,.93503,1.03424,1.19687,1.03424,1,1,1,.771,1,1,1.15749,1.15749,1.15749,1.10948,.86279,.94434,.86279,.94434,.86182,1,1,1.16897,1,.96085,.90137,1.2107,1.18416,1.13973,.69825,.9716,2.10339,1.29004,1.29004,1.21172,1.29004,1.29004,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.18874,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.09193,1.09193,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.SegoeuiBoldMetrics={lineHeight:1.33008,lineGap:0},e.SegoeuiBoldItalicFactors=[1.76738,1,1,.98946,1.03959,1.04016,1.02809,1.036,.97639,1.10953,1.23203,1.11144,1.11144,1.16939,1.21237,.9754,1.21261,.9754,1.59754,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,.81378,.81378,1.21237,1.21237,1.21237,.73541,.97847,.97363,.89723,.87897,1.0426,.79429,.85292,.91149,1.05815,1.1406,.79631,.90128,.83853,1.04396,1.10615,.97552,.94436,.97552,.88641,.80527,.96083,1.00135,1,1.06777,.9817,.91142,.99361,1.11144,1.57293,1.11144,1.21237,.74627,1.31818,1.06585,.97042,.83055,.97042,.93503,1.1261,.97042,.97922,1.14236,.94552,1.01054,1.14236,1.02471,.97922,.94165,.97042,.97042,1.0276,.78929,1.1261,.97922,.95874,1.02197,.98507,.96752,.97168,.95107,1.16579,.95107,1.21237,1.03959,1.036,1.036,1,1.036,1.16579,.87357,1.31818,1.18754,1.26781,1.05356,1.21237,1.18622,.79487,.94994,1.29004,1.24047,1.24047,1.31818,1,.91484,.9754,1.31818,1.1349,1.24866,1.05356,1.13934,1.15574,1.17389,.73541,.97363,.97363,.97363,.97363,.97363,.97363,.94385,.87897,.79429,.79429,.79429,.79429,1.1406,1.1406,1.1406,1.1406,1.0426,1.10615,.97552,.97552,.97552,.97552,.97552,1.21237,.97552,1.00135,1.00135,1.00135,1.00135,.91142,.94436,.98721,1.06585,1.06585,1.06585,1.06585,1.06585,1.06585,.96705,.83055,.93503,.93503,.93503,.93503,1.14236,1.14236,1.14236,1.14236,.93125,.97922,.94165,.94165,.94165,.94165,.94165,1.29004,.94165,.97922,.97922,.97922,.97922,.96752,.97042,.96752,.97363,1.06585,.97363,1.06585,.97363,1.06585,.87897,.83055,.87897,.83055,.87897,.83055,.87897,.83055,1.0426,1.0033,1.0426,.97042,.79429,.93503,.79429,.93503,.79429,.93503,.79429,.93503,.79429,.93503,.91149,.97042,.91149,.97042,.91149,.97042,1,1,1.05815,.97922,1.05815,.97922,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,.97441,1.04302,.79631,1.01582,1,1,1.01054,.83853,1.14236,1,1,.83853,1.09125,.83853,.90418,.83853,1.19508,1.10615,.97922,1,1,1.10615,.97922,1.01034,1.10466,.97922,.97552,.94165,.97552,.94165,.97552,.94165,.91602,.91981,.88641,1.0276,1,1,.88641,1.0276,.80527,.78929,.80527,.78929,.80527,.78929,.80527,.78929,1,1,.96083,1.05403,.95923,1.16862,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.06777,1.02197,.91142,.96752,.91142,.99361,.97168,.99361,.97168,.99361,.97168,1.23199,1.036,.97363,1.06585,.94385,.96705,.97552,.94165,1,1,.96083,1.1261,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,.95161,1.27126,1.00811,.83284,.77702,.99137,.95253,1.0347,.86142,1.07205,1.14236,.97363,.89723,.86869,1.09818,.79429,.99361,1.05815,.97552,1.1406,.90128,1.06662,1.04396,1.10615,.84918,.97552,1.04694,.94436,.98015,.96083,.91142,1.00356,.9817,1.01945,.98999,1.1406,.91142,1.04961,.9898,1.00639,1.14236,1.07514,1.04961,.99607,1.02897,1.008,.9898,.95134,1.00639,1.11121,1.14236,1.00518,.97981,1.02186,1,1.08578,.94165,.99314,.98387,.93028,.93377,1.35125,1.07514,1.10687,.93491,1.04232,1.00351,1.14236,1.07514,.94165,1.07514,1.00351,.79429,1,1,1,1,1,1,1,1,1,1,1,1,1.09097,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.93503,1,1,1,1,1,1,1,1,1,1,1,1,.96609,1,1,1,1,1,1,1.06777,1.02197,1.06777,1.02197,1.06777,1.02197,.91142,.96752,1,1.21261,.89903,1,1,.75155,1.04745,1.04745,1.04745,1.04394,.98633,.98633,.98633,.72959,.72959,1.20502,.91406,1.26514,1.222,1.02956,1.03372,1.03372,.96039,1.24633,1,1.09125,.93327,1.03336,1.16541,1.036,1,1,1,.771,1,1,1.15574,1.15574,1.15574,1.15574,.86364,.94434,.86279,.94434,.86224,1,1,1.16798,1,.96085,.90068,1.21237,1.18416,1.13904,.69825,.9716,2.10339,1.29004,1.29004,1.21339,1.29004,1.29004,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.18775,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.13269,1.13269,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.SegoeuiBoldItalicMetrics={lineHeight:1.33008,lineGap:0},e.SegoeuiItalicFactors=[1.76738,1,1,.98946,1.14763,1.05365,1.06234,.96927,.92586,1.15373,1.18414,.91349,.91349,1.07403,1.17308,.78383,1.20088,.78383,1.42531,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.78383,.78383,1.17308,1.17308,1.17308,.77349,.94565,.94729,.85944,.88506,.9858,.74817,.80016,.88449,.98039,.95782,.69238,.89898,.83231,.98183,1.03989,.96924,.86237,.96924,.80595,.74524,.86091,.95402,.94143,.98448,.8858,.83089,.93285,1.0949,1.39016,1.0949,1.45994,.74627,1.04839,.97454,.97454,.87207,.97454,.87533,1.06151,.97454,1.00176,1.16484,1.08132,.98047,1.16484,1.02989,1.01054,.96225,.97454,.97454,1.06598,.79004,1.16344,1.00351,.94629,.9973,.91016,.96777,.9043,.91082,.92481,.91082,1.17308,.95748,.96927,.96927,1,.96927,.92481,.80597,1.04839,1.23393,1.1781,.9245,1.17308,1.20808,.63218,.94261,1.24822,1.09971,1.09971,1.04839,1,.85273,.78032,1.04839,1.09971,1.22326,.9245,1.09836,1.13525,1.15222,.70424,.94729,.94729,.94729,.94729,.94729,.94729,.85498,.88506,.74817,.74817,.74817,.74817,.95782,.95782,.95782,.95782,.9858,1.03989,.96924,.96924,.96924,.96924,.96924,1.17308,.96924,.95402,.95402,.95402,.95402,.83089,.86237,.88409,.97454,.97454,.97454,.97454,.97454,.97454,.92916,.87207,.87533,.87533,.87533,.87533,.93146,.93146,.93146,.93146,.93854,1.01054,.96225,.96225,.96225,.96225,.96225,1.24822,.8761,1.00351,1.00351,1.00351,1.00351,.96777,.97454,.96777,.94729,.97454,.94729,.97454,.94729,.97454,.88506,.87207,.88506,.87207,.88506,.87207,.88506,.87207,.9858,.95391,.9858,.97454,.74817,.87533,.74817,.87533,.74817,.87533,.74817,.87533,.74817,.87533,.88449,.97454,.88449,.97454,.88449,.97454,1,1,.98039,1.00176,.98039,1.00176,.95782,.93146,.95782,.93146,.95782,.93146,.95782,1.16484,.95782,.93146,.84421,1.12761,.69238,1.08132,1,1,.98047,.83231,1.16484,1,1,.84723,1.04861,.84723,.78755,.83231,1.23736,1.03989,1.01054,1,1,1.03989,1.01054,.9857,1.03849,1.01054,.96924,.96225,.96924,.96225,.96924,.96225,.92383,.90171,.80595,1.06598,1,1,.80595,1.06598,.74524,.79004,.74524,.79004,.74524,.79004,.74524,.79004,1,1,.86091,1.02759,.85771,1.16344,.95402,1.00351,.95402,1.00351,.95402,1.00351,.95402,1.00351,.95402,1.00351,.95402,1.00351,.98448,.9973,.83089,.96777,.83089,.93285,.9043,.93285,.9043,.93285,.9043,1.31868,.96927,.94729,.97454,.85498,.92916,.96924,.8761,1,1,.86091,1.16344,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,.81965,.81965,.94729,.78032,.71022,.90883,.84171,.99877,.77596,1.05734,1.2,.94729,.85944,.82791,.9607,.74817,.93285,.98039,.96924,.95782,.89898,.98316,.98183,1.03989,.78614,.96924,.97642,.86237,.86075,.86091,.83089,.90082,.8858,.97296,1.01284,.95782,.83089,1.0976,1.04,1.03342,1.2,1.0675,1.0976,.98205,1.03809,1.05097,1.04,.95364,1.03342,1.05401,1.2,1.02148,1.0119,1.04724,1.0127,1.02732,.96225,.8965,.97783,.93574,.94818,1.30679,1.0675,1.11826,.99821,1.0557,1.0326,1.2,1.0675,.96225,1.0675,1.0326,.74817,1,1,1,1,1,1,1,1,1,1,1,1,1.03754,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.87533,1,1,1,1,1,1,1,1,1,1,1,1,.98705,1,1,1,1,1,1,.98448,.9973,.98448,.9973,.98448,.9973,.83089,.96777,1,1.20088,.89903,1,1,.75155,.94945,.94945,.94945,.94945,1.12317,1.12317,1.12317,.67603,.67603,1.15621,.73584,1.21191,1.22135,1.06483,.94868,.94868,.95996,1.24633,1,1.07497,.87709,.96927,1.01473,.96927,1,1,1,.77295,1,1,1.09836,1.09836,1.09836,1.01522,.86321,.94434,.8649,.94434,.86182,1,1,1.083,1,.91578,.86438,1.17308,1.18416,1.14589,.69825,.97622,1.96791,1.24822,1.24822,1.17308,1.24822,1.24822,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.17984,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.10742,1.10742,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.SegoeuiItalicMetrics={lineHeight:1.33008,lineGap:0},e.SegoeuiRegularFactors=[1.76738,1,1,.98594,1.02285,1.10454,1.06234,.96927,.92037,1.19985,1.2046,.90616,.90616,1.07152,1.1714,.78032,1.20088,.78032,1.40246,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.78032,.78032,1.1714,1.1714,1.1714,.80597,.94084,.96706,.85944,.85734,.97093,.75842,.79936,.88198,.9831,.95782,.71387,.86969,.84636,1.07796,1.03584,.96924,.83968,.96924,.82826,.79649,.85771,.95132,.93119,.98965,.88433,.8287,.93365,1.08612,1.3638,1.08612,1.45786,.74627,.80499,.91484,1.05707,.92383,1.05882,.9403,1.12654,1.05882,1.01756,1.09011,1.09011,.99414,1.09011,1.034,1.01756,1.05356,1.05707,1.05882,1.04399,.84863,1.21968,1.01756,.95801,1.00068,.91797,.96777,.9043,.90351,.92105,.90351,1.1714,.85337,.96927,.96927,.99912,.96927,.92105,.80597,1.2434,1.20808,1.05937,.90957,1.1714,1.20808,.75155,.94261,1.24644,1.09971,1.09971,.84751,1,.85273,.78032,.61584,1.05425,1.17914,.90957,1.08665,1.11593,1.14169,.73381,.96706,.96706,.96706,.96706,.96706,.96706,.86035,.85734,.75842,.75842,.75842,.75842,.95782,.95782,.95782,.95782,.97093,1.03584,.96924,.96924,.96924,.96924,.96924,1.1714,.96924,.95132,.95132,.95132,.95132,.8287,.83968,.89049,.91484,.91484,.91484,.91484,.91484,.91484,.93575,.92383,.9403,.9403,.9403,.9403,.8717,.8717,.8717,.8717,1.00527,1.01756,1.05356,1.05356,1.05356,1.05356,1.05356,1.24644,.95923,1.01756,1.01756,1.01756,1.01756,.96777,1.05707,.96777,.96706,.91484,.96706,.91484,.96706,.91484,.85734,.92383,.85734,.92383,.85734,.92383,.85734,.92383,.97093,1.0969,.97093,1.05882,.75842,.9403,.75842,.9403,.75842,.9403,.75842,.9403,.75842,.9403,.88198,1.05882,.88198,1.05882,.88198,1.05882,1,1,.9831,1.01756,.9831,1.01756,.95782,.8717,.95782,.8717,.95782,.8717,.95782,1.09011,.95782,.8717,.84784,1.11551,.71387,1.09011,1,1,.99414,.84636,1.09011,1,1,.84636,1.0536,.84636,.94298,.84636,1.23297,1.03584,1.01756,1,1,1.03584,1.01756,1.00323,1.03444,1.01756,.96924,1.05356,.96924,1.05356,.96924,1.05356,.93066,.98293,.82826,1.04399,1,1,.82826,1.04399,.79649,.84863,.79649,.84863,.79649,.84863,.79649,.84863,1,1,.85771,1.17318,.85771,1.21968,.95132,1.01756,.95132,1.01756,.95132,1.01756,.95132,1.01756,.95132,1.01756,.95132,1.01756,.98965,1.00068,.8287,.96777,.8287,.93365,.9043,.93365,.9043,.93365,.9043,1.08571,.96927,.96706,.91484,.86035,.93575,.96924,.95923,1,1,.85771,1.21968,1.11437,1.11437,.93109,.91202,.60411,.84164,.55572,1.01173,.97361,.81818,.81818,.96635,.78032,.72727,.92366,.98601,1.03405,.77968,1.09799,1.2,.96706,.85944,.85638,.96491,.75842,.93365,.9831,.96924,.95782,.86969,.94152,1.07796,1.03584,.78437,.96924,.98715,.83968,.83491,.85771,.8287,.94492,.88433,.9287,1.0098,.95782,.8287,1.0625,.98248,1.03424,1.2,1.01071,1.0625,.95246,1.03809,1.04912,.98248,1.00221,1.03424,1.05443,1.2,1.04785,.99609,1.00169,1.05176,.99346,1.05356,.9087,1.03004,.95542,.93117,1.23362,1.01071,1.07831,1.02512,1.05205,1.03502,1.2,1.01071,1.05356,1.01071,1.03502,.75842,1,1,1,1,1,1,1,1,1,1,1,1,1.03719,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.9403,1,1,1,1,1,1,1,1,1,1,1,1,1.04021,1,1,1,1,1,1,.98965,1.00068,.98965,1.00068,.98965,1.00068,.8287,.96777,1,1.20088,.89903,1,1,.75155,1.03077,1.03077,1.03077,1.03077,1.13196,1.13196,1.13196,.67428,.67428,1.16039,.73291,1.20996,1.22135,1.06483,.94868,.94868,.95996,1.24633,1,1.07497,.87796,.96927,1.01518,.96927,1,1,1,.77295,1,1,1.10539,1.10539,1.11358,1.06967,.86279,.94434,.86279,.94434,.86182,1,1,1.083,1,.91578,.86507,1.1714,1.18416,1.14589,.69825,.97622,1.9697,1.24822,1.24822,1.17238,1.24822,1.24822,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.18083,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.10938,1.10938,1,1,1,1.05425,1.09971,1.09971,1.09971,1,1,1,1,1,1,1,1,1,1,1],e.SegoeuiRegularMetrics={lineHeight:1.33008,lineGap:0}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SEAC_ANALYSIS_ENABLED=e.MacStandardGlyphOrdering=e.FontFlags=void 0,e.getFontType=function(t,e,i=!1){switch(t){case"Type1":return i?r.FontType.TYPE1STANDARD:"Type1C"===e?r.FontType.TYPE1C:r.FontType.TYPE1;case"CIDFontType0":return"CIDFontType0C"===e?r.FontType.CIDFONTTYPE0C:r.FontType.CIDFONTTYPE0;case"OpenType":return r.FontType.OPENTYPE;case"TrueType":return r.FontType.TRUETYPE;case"CIDFontType2":return r.FontType.CIDFONTTYPE2;case"MMType1":return r.FontType.MMTYPE1;case"Type0":return r.FontType.TYPE0;default:return r.FontType.UNKNOWN}},e.normalizeFontName=function(t){return t.replace(/[,_]/g,"-").replace(/\s/g,"")},e.recoverGlyphName=l,e.type1FontGlyphMapping=function(t,e,i){const r=Object.create(null);let s,c,h;const u=!!(t.flags&a.Symbolic);if(t.isInternalFont)for(h=e,c=0;c<h.length;c++)s=i.indexOf(h[c]),r[c]=s>=0?s:0;else if(t.baseEncodingName)for(h=(0,n.getEncoding)(t.baseEncodingName),c=0;c<h.length;c++)s=i.indexOf(h[c]),r[c]=s>=0?s:0;else if(u)for(c in e)r[c]=e[c];else for(h=n.StandardEncoding,c=0;c<h.length;c++)s=i.indexOf(h[c]),r[c]=s>=0?s:0;const p=t.differences;let d;if(p)for(c in p){const t=p[c];if(s=i.indexOf(t),-1===s){d||(d=(0,o.getGlyphsUnicode)());const e=l(t,d);e!==t&&(s=i.indexOf(e))}r[c]=s>=0?s:0}return r};var r=i(2),n=i(19),o=i(20),s=i(21);e.SEAC_ANALYSIS_ENABLED=!0;const a={FixedPitch:1,Serif:2,Symbolic:4,Script:8,Nonsymbolic:32,Italic:64,AllCap:65536,SmallCap:131072,ForceBold:262144};function l(t,e){if(void 0!==e[t])return t;const i=(0,s.getUnicodeForGlyph)(t,e);if(-1!==i)for(const t in e)if(e[t]===i)return t;return(0,r.info)("Unable to recover a standard glyph name for: "+t),t}e.FontFlags=a,e.MacStandardGlyphOrdering=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"]},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ZapfDingbatsEncoding=e.WinAnsiEncoding=e.SymbolSetEncoding=e.StandardEncoding=e.MacRomanEncoding=e.ExpertEncoding=void 0,e.getEncoding=function(t){switch(t){case"WinAnsiEncoding":return s;case"StandardEncoding":return o;case"MacRomanEncoding":return n;case"SymbolSetEncoding":return a;case"ZapfDingbatsEncoding":return l;case"ExpertEncoding":return i;case"MacExpertEncoding":return r;default:return null}};const i=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"];e.ExpertEncoding=i;const r=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","centoldstyle","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","","threequartersemdash","","questionsmall","","","","","Ethsmall","","","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","","","","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hypheninferior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","asuperior","centsuperior","","","","","Aacutesmall","Agravesmall","Acircumflexsmall","Adieresissmall","Atildesmall","Aringsmall","Ccedillasmall","Eacutesmall","Egravesmall","Ecircumflexsmall","Edieresissmall","Iacutesmall","Igravesmall","Icircumflexsmall","Idieresissmall","Ntildesmall","Oacutesmall","Ogravesmall","Ocircumflexsmall","Odieresissmall","Otildesmall","Uacutesmall","Ugravesmall","Ucircumflexsmall","Udieresissmall","","eightsuperior","fourinferior","threeinferior","sixinferior","eightinferior","seveninferior","Scaronsmall","","centinferior","twoinferior","","Dieresissmall","","Caronsmall","osuperior","fiveinferior","","commainferior","periodinferior","Yacutesmall","","dollarinferior","","","Thornsmall","","nineinferior","zeroinferior","Zcaronsmall","AEsmall","Oslashsmall","questiondownsmall","oneinferior","Lslashsmall","","","","","","","Cedillasmall","","","","","","OEsmall","figuredash","hyphensuperior","","","","","exclamdownsmall","","Ydieresissmall","","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","ninesuperior","zerosuperior","","esuperior","rsuperior","tsuperior","","","isuperior","ssuperior","dsuperior","","","","","","lsuperior","Ogoneksmall","Brevesmall","Macronsmall","bsuperior","nsuperior","msuperior","commasuperior","periodsuperior","Dotaccentsmall","Ringsmall","","","",""],n=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","space","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron"];e.MacRomanEncoding=n;const o=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls","","","",""];e.StandardEncoding=o;const s=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","bullet","Euro","bullet","quotesinglbase","florin","quotedblbase","ellipsis","dagger","daggerdbl","circumflex","perthousand","Scaron","guilsinglleft","OE","bullet","Zcaron","bullet","bullet","quoteleft","quoteright","quotedblleft","quotedblright","bullet","endash","emdash","tilde","trademark","scaron","guilsinglright","oe","bullet","zcaron","Ydieresis","space","exclamdown","cent","sterling","currency","yen","brokenbar","section","dieresis","copyright","ordfeminine","guillemotleft","logicalnot","hyphen","registered","macron","degree","plusminus","twosuperior","threesuperior","acute","mu","paragraph","periodcentered","cedilla","onesuperior","ordmasculine","guillemotright","onequarter","onehalf","threequarters","questiondown","Agrave","Aacute","Acircumflex","Atilde","Adieresis","Aring","AE","Ccedilla","Egrave","Eacute","Ecircumflex","Edieresis","Igrave","Iacute","Icircumflex","Idieresis","Eth","Ntilde","Ograve","Oacute","Ocircumflex","Otilde","Odieresis","multiply","Oslash","Ugrave","Uacute","Ucircumflex","Udieresis","Yacute","Thorn","germandbls","agrave","aacute","acircumflex","atilde","adieresis","aring","ae","ccedilla","egrave","eacute","ecircumflex","edieresis","igrave","iacute","icircumflex","idieresis","eth","ntilde","ograve","oacute","ocircumflex","otilde","odieresis","divide","oslash","ugrave","uacute","ucircumflex","udieresis","yacute","thorn","ydieresis"];e.WinAnsiEncoding=s;const a=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","universal","numbersign","existential","percent","ampersand","suchthat","parenleft","parenright","asteriskmath","plus","comma","minus","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","congruent","Alpha","Beta","Chi","Delta","Epsilon","Phi","Gamma","Eta","Iota","theta1","Kappa","Lambda","Mu","Nu","Omicron","Pi","Theta","Rho","Sigma","Tau","Upsilon","sigma1","Omega","Xi","Psi","Zeta","bracketleft","therefore","bracketright","perpendicular","underscore","radicalex","alpha","beta","chi","delta","epsilon","phi","gamma","eta","iota","phi1","kappa","lambda","mu","nu","omicron","pi","theta","rho","sigma","tau","upsilon","omega1","omega","xi","psi","zeta","braceleft","bar","braceright","similar","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Euro","Upsilon1","minute","lessequal","fraction","infinity","florin","club","diamond","heart","spade","arrowboth","arrowleft","arrowup","arrowright","arrowdown","degree","plusminus","second","greaterequal","multiply","proportional","partialdiff","bullet","divide","notequal","equivalence","approxequal","ellipsis","arrowvertex","arrowhorizex","carriagereturn","aleph","Ifraktur","Rfraktur","weierstrass","circlemultiply","circleplus","emptyset","intersection","union","propersuperset","reflexsuperset","notsubset","propersubset","reflexsubset","element","notelement","angle","gradient","registerserif","copyrightserif","trademarkserif","product","radical","dotmath","logicalnot","logicaland","logicalor","arrowdblboth","arrowdblleft","arrowdblup","arrowdblright","arrowdbldown","lozenge","angleleft","registersans","copyrightsans","trademarksans","summation","parenlefttp","parenleftex","parenleftbt","bracketlefttp","bracketleftex","bracketleftbt","bracelefttp","braceleftmid","braceleftbt","braceex","","angleright","integral","integraltp","integralex","integralbt","parenrighttp","parenrightex","parenrightbt","bracketrighttp","bracketrightex","bracketrightbt","bracerighttp","bracerightmid","bracerightbt",""];e.SymbolSetEncoding=a;const l=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","a1","a2","a202","a3","a4","a5","a119","a118","a117","a11","a12","a13","a14","a15","a16","a105","a17","a18","a19","a20","a21","a22","a23","a24","a25","a26","a27","a28","a6","a7","a8","a9","a10","a29","a30","a31","a32","a33","a34","a35","a36","a37","a38","a39","a40","a41","a42","a43","a44","a45","a46","a47","a48","a49","a50","a51","a52","a53","a54","a55","a56","a57","a58","a59","a60","a61","a62","a63","a64","a65","a66","a67","a68","a69","a70","a71","a72","a73","a74","a203","a75","a204","a76","a77","a78","a79","a81","a82","a83","a84","a97","a98","a99","a100","","a89","a90","a93","a94","a91","a92","a205","a85","a206","a86","a87","a88","a95","a96","","","","","","","","","","","","","","","","","","","","a101","a102","a103","a104","a106","a107","a108","a112","a111","a110","a109","a120","a121","a122","a123","a124","a125","a126","a127","a128","a129","a130","a131","a132","a133","a134","a135","a136","a137","a138","a139","a140","a141","a142","a143","a144","a145","a146","a147","a148","a149","a150","a151","a152","a153","a154","a155","a156","a157","a158","a159","a160","a161","a163","a164","a196","a165","a192","a166","a167","a168","a169","a170","a171","a172","a173","a162","a174","a175","a176","a177","a178","a179","a193","a180","a199","a181","a200","a182","","a201","a183","a184","a197","a185","a194","a198","a186","a195","a187","a188","a189","a190","a191",""];e.ZapfDingbatsEncoding=l},(t,e,i)=>{i.r(e),i.d(e,{getDingbatsGlyphsUnicode:()=>o,getGlyphsUnicode:()=>n});var r=i(8);const n=(0,r.getArrayLookupTableFactory)((function(){return["A",65,"AE",198,"AEacute",508,"AEmacron",482,"AEsmall",63462,"Aacute",193,"Aacutesmall",63457,"Abreve",258,"Abreveacute",7854,"Abrevecyrillic",1232,"Abrevedotbelow",7862,"Abrevegrave",7856,"Abrevehookabove",7858,"Abrevetilde",7860,"Acaron",461,"Acircle",9398,"Acircumflex",194,"Acircumflexacute",7844,"Acircumflexdotbelow",7852,"Acircumflexgrave",7846,"Acircumflexhookabove",7848,"Acircumflexsmall",63458,"Acircumflextilde",7850,"Acute",63177,"Acutesmall",63412,"Acyrillic",1040,"Adblgrave",512,"Adieresis",196,"Adieresiscyrillic",1234,"Adieresismacron",478,"Adieresissmall",63460,"Adotbelow",7840,"Adotmacron",480,"Agrave",192,"Agravesmall",63456,"Ahookabove",7842,"Aiecyrillic",1236,"Ainvertedbreve",514,"Alpha",913,"Alphatonos",902,"Amacron",256,"Amonospace",65313,"Aogonek",260,"Aring",197,"Aringacute",506,"Aringbelow",7680,"Aringsmall",63461,"Asmall",63329,"Atilde",195,"Atildesmall",63459,"Aybarmenian",1329,"B",66,"Bcircle",9399,"Bdotaccent",7682,"Bdotbelow",7684,"Becyrillic",1041,"Benarmenian",1330,"Beta",914,"Bhook",385,"Blinebelow",7686,"Bmonospace",65314,"Brevesmall",63220,"Bsmall",63330,"Btopbar",386,"C",67,"Caarmenian",1342,"Cacute",262,"Caron",63178,"Caronsmall",63221,"Ccaron",268,"Ccedilla",199,"Ccedillaacute",7688,"Ccedillasmall",63463,"Ccircle",9400,"Ccircumflex",264,"Cdot",266,"Cdotaccent",266,"Cedillasmall",63416,"Chaarmenian",1353,"Cheabkhasiancyrillic",1212,"Checyrillic",1063,"Chedescenderabkhasiancyrillic",1214,"Chedescendercyrillic",1206,"Chedieresiscyrillic",1268,"Cheharmenian",1347,"Chekhakassiancyrillic",1227,"Cheverticalstrokecyrillic",1208,"Chi",935,"Chook",391,"Circumflexsmall",63222,"Cmonospace",65315,"Coarmenian",1361,"Csmall",63331,"D",68,"DZ",497,"DZcaron",452,"Daarmenian",1332,"Dafrican",393,"Dcaron",270,"Dcedilla",7696,"Dcircle",9401,"Dcircumflexbelow",7698,"Dcroat",272,"Ddotaccent",7690,"Ddotbelow",7692,"Decyrillic",1044,"Deicoptic",1006,"Delta",8710,"Deltagreek",916,"Dhook",394,"Dieresis",63179,"DieresisAcute",63180,"DieresisGrave",63181,"Dieresissmall",63400,"Digammagreek",988,"Djecyrillic",1026,"Dlinebelow",7694,"Dmonospace",65316,"Dotaccentsmall",63223,"Dslash",272,"Dsmall",63332,"Dtopbar",395,"Dz",498,"Dzcaron",453,"Dzeabkhasiancyrillic",1248,"Dzecyrillic",1029,"Dzhecyrillic",1039,"E",69,"Eacute",201,"Eacutesmall",63465,"Ebreve",276,"Ecaron",282,"Ecedillabreve",7708,"Echarmenian",1333,"Ecircle",9402,"Ecircumflex",202,"Ecircumflexacute",7870,"Ecircumflexbelow",7704,"Ecircumflexdotbelow",7878,"Ecircumflexgrave",7872,"Ecircumflexhookabove",7874,"Ecircumflexsmall",63466,"Ecircumflextilde",7876,"Ecyrillic",1028,"Edblgrave",516,"Edieresis",203,"Edieresissmall",63467,"Edot",278,"Edotaccent",278,"Edotbelow",7864,"Efcyrillic",1060,"Egrave",200,"Egravesmall",63464,"Eharmenian",1335,"Ehookabove",7866,"Eightroman",8551,"Einvertedbreve",518,"Eiotifiedcyrillic",1124,"Elcyrillic",1051,"Elevenroman",8554,"Emacron",274,"Emacronacute",7702,"Emacrongrave",7700,"Emcyrillic",1052,"Emonospace",65317,"Encyrillic",1053,"Endescendercyrillic",1186,"Eng",330,"Enghecyrillic",1188,"Enhookcyrillic",1223,"Eogonek",280,"Eopen",400,"Epsilon",917,"Epsilontonos",904,"Ercyrillic",1056,"Ereversed",398,"Ereversedcyrillic",1069,"Escyrillic",1057,"Esdescendercyrillic",1194,"Esh",425,"Esmall",63333,"Eta",919,"Etarmenian",1336,"Etatonos",905,"Eth",208,"Ethsmall",63472,"Etilde",7868,"Etildebelow",7706,"Euro",8364,"Ezh",439,"Ezhcaron",494,"Ezhreversed",440,"F",70,"Fcircle",9403,"Fdotaccent",7710,"Feharmenian",1366,"Feicoptic",996,"Fhook",401,"Fitacyrillic",1138,"Fiveroman",8548,"Fmonospace",65318,"Fourroman",8547,"Fsmall",63334,"G",71,"GBsquare",13191,"Gacute",500,"Gamma",915,"Gammaafrican",404,"Gangiacoptic",1002,"Gbreve",286,"Gcaron",486,"Gcedilla",290,"Gcircle",9404,"Gcircumflex",284,"Gcommaaccent",290,"Gdot",288,"Gdotaccent",288,"Gecyrillic",1043,"Ghadarmenian",1346,"Ghemiddlehookcyrillic",1172,"Ghestrokecyrillic",1170,"Gheupturncyrillic",1168,"Ghook",403,"Gimarmenian",1331,"Gjecyrillic",1027,"Gmacron",7712,"Gmonospace",65319,"Grave",63182,"Gravesmall",63328,"Gsmall",63335,"Gsmallhook",667,"Gstroke",484,"H",72,"H18533",9679,"H18543",9642,"H18551",9643,"H22073",9633,"HPsquare",13259,"Haabkhasiancyrillic",1192,"Hadescendercyrillic",1202,"Hardsigncyrillic",1066,"Hbar",294,"Hbrevebelow",7722,"Hcedilla",7720,"Hcircle",9405,"Hcircumflex",292,"Hdieresis",7718,"Hdotaccent",7714,"Hdotbelow",7716,"Hmonospace",65320,"Hoarmenian",1344,"Horicoptic",1e3,"Hsmall",63336,"Hungarumlaut",63183,"Hungarumlautsmall",63224,"Hzsquare",13200,"I",73,"IAcyrillic",1071,"IJ",306,"IUcyrillic",1070,"Iacute",205,"Iacutesmall",63469,"Ibreve",300,"Icaron",463,"Icircle",9406,"Icircumflex",206,"Icircumflexsmall",63470,"Icyrillic",1030,"Idblgrave",520,"Idieresis",207,"Idieresisacute",7726,"Idieresiscyrillic",1252,"Idieresissmall",63471,"Idot",304,"Idotaccent",304,"Idotbelow",7882,"Iebrevecyrillic",1238,"Iecyrillic",1045,"Ifraktur",8465,"Igrave",204,"Igravesmall",63468,"Ihookabove",7880,"Iicyrillic",1048,"Iinvertedbreve",522,"Iishortcyrillic",1049,"Imacron",298,"Imacroncyrillic",1250,"Imonospace",65321,"Iniarmenian",1339,"Iocyrillic",1025,"Iogonek",302,"Iota",921,"Iotaafrican",406,"Iotadieresis",938,"Iotatonos",906,"Ismall",63337,"Istroke",407,"Itilde",296,"Itildebelow",7724,"Izhitsacyrillic",1140,"Izhitsadblgravecyrillic",1142,"J",74,"Jaarmenian",1345,"Jcircle",9407,"Jcircumflex",308,"Jecyrillic",1032,"Jheharmenian",1355,"Jmonospace",65322,"Jsmall",63338,"K",75,"KBsquare",13189,"KKsquare",13261,"Kabashkircyrillic",1184,"Kacute",7728,"Kacyrillic",1050,"Kadescendercyrillic",1178,"Kahookcyrillic",1219,"Kappa",922,"Kastrokecyrillic",1182,"Kaverticalstrokecyrillic",1180,"Kcaron",488,"Kcedilla",310,"Kcircle",9408,"Kcommaaccent",310,"Kdotbelow",7730,"Keharmenian",1364,"Kenarmenian",1343,"Khacyrillic",1061,"Kheicoptic",998,"Khook",408,"Kjecyrillic",1036,"Klinebelow",7732,"Kmonospace",65323,"Koppacyrillic",1152,"Koppagreek",990,"Ksicyrillic",1134,"Ksmall",63339,"L",76,"LJ",455,"LL",63167,"Lacute",313,"Lambda",923,"Lcaron",317,"Lcedilla",315,"Lcircle",9409,"Lcircumflexbelow",7740,"Lcommaaccent",315,"Ldot",319,"Ldotaccent",319,"Ldotbelow",7734,"Ldotbelowmacron",7736,"Liwnarmenian",1340,"Lj",456,"Ljecyrillic",1033,"Llinebelow",7738,"Lmonospace",65324,"Lslash",321,"Lslashsmall",63225,"Lsmall",63340,"M",77,"MBsquare",13190,"Macron",63184,"Macronsmall",63407,"Macute",7742,"Mcircle",9410,"Mdotaccent",7744,"Mdotbelow",7746,"Menarmenian",1348,"Mmonospace",65325,"Msmall",63341,"Mturned",412,"Mu",924,"N",78,"NJ",458,"Nacute",323,"Ncaron",327,"Ncedilla",325,"Ncircle",9411,"Ncircumflexbelow",7754,"Ncommaaccent",325,"Ndotaccent",7748,"Ndotbelow",7750,"Nhookleft",413,"Nineroman",8552,"Nj",459,"Njecyrillic",1034,"Nlinebelow",7752,"Nmonospace",65326,"Nowarmenian",1350,"Nsmall",63342,"Ntilde",209,"Ntildesmall",63473,"Nu",925,"O",79,"OE",338,"OEsmall",63226,"Oacute",211,"Oacutesmall",63475,"Obarredcyrillic",1256,"Obarreddieresiscyrillic",1258,"Obreve",334,"Ocaron",465,"Ocenteredtilde",415,"Ocircle",9412,"Ocircumflex",212,"Ocircumflexacute",7888,"Ocircumflexdotbelow",7896,"Ocircumflexgrave",7890,"Ocircumflexhookabove",7892,"Ocircumflexsmall",63476,"Ocircumflextilde",7894,"Ocyrillic",1054,"Odblacute",336,"Odblgrave",524,"Odieresis",214,"Odieresiscyrillic",1254,"Odieresissmall",63478,"Odotbelow",7884,"Ogoneksmall",63227,"Ograve",210,"Ogravesmall",63474,"Oharmenian",1365,"Ohm",8486,"Ohookabove",7886,"Ohorn",416,"Ohornacute",7898,"Ohorndotbelow",7906,"Ohorngrave",7900,"Ohornhookabove",7902,"Ohorntilde",7904,"Ohungarumlaut",336,"Oi",418,"Oinvertedbreve",526,"Omacron",332,"Omacronacute",7762,"Omacrongrave",7760,"Omega",8486,"Omegacyrillic",1120,"Omegagreek",937,"Omegaroundcyrillic",1146,"Omegatitlocyrillic",1148,"Omegatonos",911,"Omicron",927,"Omicrontonos",908,"Omonospace",65327,"Oneroman",8544,"Oogonek",490,"Oogonekmacron",492,"Oopen",390,"Oslash",216,"Oslashacute",510,"Oslashsmall",63480,"Osmall",63343,"Ostrokeacute",510,"Otcyrillic",1150,"Otilde",213,"Otildeacute",7756,"Otildedieresis",7758,"Otildesmall",63477,"P",80,"Pacute",7764,"Pcircle",9413,"Pdotaccent",7766,"Pecyrillic",1055,"Peharmenian",1354,"Pemiddlehookcyrillic",1190,"Phi",934,"Phook",420,"Pi",928,"Piwrarmenian",1363,"Pmonospace",65328,"Psi",936,"Psicyrillic",1136,"Psmall",63344,"Q",81,"Qcircle",9414,"Qmonospace",65329,"Qsmall",63345,"R",82,"Raarmenian",1356,"Racute",340,"Rcaron",344,"Rcedilla",342,"Rcircle",9415,"Rcommaaccent",342,"Rdblgrave",528,"Rdotaccent",7768,"Rdotbelow",7770,"Rdotbelowmacron",7772,"Reharmenian",1360,"Rfraktur",8476,"Rho",929,"Ringsmall",63228,"Rinvertedbreve",530,"Rlinebelow",7774,"Rmonospace",65330,"Rsmall",63346,"Rsmallinverted",641,"Rsmallinvertedsuperior",694,"S",83,"SF010000",9484,"SF020000",9492,"SF030000",9488,"SF040000",9496,"SF050000",9532,"SF060000",9516,"SF070000",9524,"SF080000",9500,"SF090000",9508,"SF100000",9472,"SF110000",9474,"SF190000",9569,"SF200000",9570,"SF210000",9558,"SF220000",9557,"SF230000",9571,"SF240000",9553,"SF250000",9559,"SF260000",9565,"SF270000",9564,"SF280000",9563,"SF360000",9566,"SF370000",9567,"SF380000",9562,"SF390000",9556,"SF400000",9577,"SF410000",9574,"SF420000",9568,"SF430000",9552,"SF440000",9580,"SF450000",9575,"SF460000",9576,"SF470000",9572,"SF480000",9573,"SF490000",9561,"SF500000",9560,"SF510000",9554,"SF520000",9555,"SF530000",9579,"SF540000",9578,"Sacute",346,"Sacutedotaccent",7780,"Sampigreek",992,"Scaron",352,"Scarondotaccent",7782,"Scaronsmall",63229,"Scedilla",350,"Schwa",399,"Schwacyrillic",1240,"Schwadieresiscyrillic",1242,"Scircle",9416,"Scircumflex",348,"Scommaaccent",536,"Sdotaccent",7776,"Sdotbelow",7778,"Sdotbelowdotaccent",7784,"Seharmenian",1357,"Sevenroman",8550,"Shaarmenian",1351,"Shacyrillic",1064,"Shchacyrillic",1065,"Sheicoptic",994,"Shhacyrillic",1210,"Shimacoptic",1004,"Sigma",931,"Sixroman",8549,"Smonospace",65331,"Softsigncyrillic",1068,"Ssmall",63347,"Stigmagreek",986,"T",84,"Tau",932,"Tbar",358,"Tcaron",356,"Tcedilla",354,"Tcircle",9417,"Tcircumflexbelow",7792,"Tcommaaccent",354,"Tdotaccent",7786,"Tdotbelow",7788,"Tecyrillic",1058,"Tedescendercyrillic",1196,"Tenroman",8553,"Tetsecyrillic",1204,"Theta",920,"Thook",428,"Thorn",222,"Thornsmall",63486,"Threeroman",8546,"Tildesmall",63230,"Tiwnarmenian",1359,"Tlinebelow",7790,"Tmonospace",65332,"Toarmenian",1337,"Tonefive",444,"Tonesix",388,"Tonetwo",423,"Tretroflexhook",430,"Tsecyrillic",1062,"Tshecyrillic",1035,"Tsmall",63348,"Twelveroman",8555,"Tworoman",8545,"U",85,"Uacute",218,"Uacutesmall",63482,"Ubreve",364,"Ucaron",467,"Ucircle",9418,"Ucircumflex",219,"Ucircumflexbelow",7798,"Ucircumflexsmall",63483,"Ucyrillic",1059,"Udblacute",368,"Udblgrave",532,"Udieresis",220,"Udieresisacute",471,"Udieresisbelow",7794,"Udieresiscaron",473,"Udieresiscyrillic",1264,"Udieresisgrave",475,"Udieresismacron",469,"Udieresissmall",63484,"Udotbelow",7908,"Ugrave",217,"Ugravesmall",63481,"Uhookabove",7910,"Uhorn",431,"Uhornacute",7912,"Uhorndotbelow",7920,"Uhorngrave",7914,"Uhornhookabove",7916,"Uhorntilde",7918,"Uhungarumlaut",368,"Uhungarumlautcyrillic",1266,"Uinvertedbreve",534,"Ukcyrillic",1144,"Umacron",362,"Umacroncyrillic",1262,"Umacrondieresis",7802,"Umonospace",65333,"Uogonek",370,"Upsilon",933,"Upsilon1",978,"Upsilonacutehooksymbolgreek",979,"Upsilonafrican",433,"Upsilondieresis",939,"Upsilondieresishooksymbolgreek",980,"Upsilonhooksymbol",978,"Upsilontonos",910,"Uring",366,"Ushortcyrillic",1038,"Usmall",63349,"Ustraightcyrillic",1198,"Ustraightstrokecyrillic",1200,"Utilde",360,"Utildeacute",7800,"Utildebelow",7796,"V",86,"Vcircle",9419,"Vdotbelow",7806,"Vecyrillic",1042,"Vewarmenian",1358,"Vhook",434,"Vmonospace",65334,"Voarmenian",1352,"Vsmall",63350,"Vtilde",7804,"W",87,"Wacute",7810,"Wcircle",9420,"Wcircumflex",372,"Wdieresis",7812,"Wdotaccent",7814,"Wdotbelow",7816,"Wgrave",7808,"Wmonospace",65335,"Wsmall",63351,"X",88,"Xcircle",9421,"Xdieresis",7820,"Xdotaccent",7818,"Xeharmenian",1341,"Xi",926,"Xmonospace",65336,"Xsmall",63352,"Y",89,"Yacute",221,"Yacutesmall",63485,"Yatcyrillic",1122,"Ycircle",9422,"Ycircumflex",374,"Ydieresis",376,"Ydieresissmall",63487,"Ydotaccent",7822,"Ydotbelow",7924,"Yericyrillic",1067,"Yerudieresiscyrillic",1272,"Ygrave",7922,"Yhook",435,"Yhookabove",7926,"Yiarmenian",1349,"Yicyrillic",1031,"Yiwnarmenian",1362,"Ymonospace",65337,"Ysmall",63353,"Ytilde",7928,"Yusbigcyrillic",1130,"Yusbigiotifiedcyrillic",1132,"Yuslittlecyrillic",1126,"Yuslittleiotifiedcyrillic",1128,"Z",90,"Zaarmenian",1334,"Zacute",377,"Zcaron",381,"Zcaronsmall",63231,"Zcircle",9423,"Zcircumflex",7824,"Zdot",379,"Zdotaccent",379,"Zdotbelow",7826,"Zecyrillic",1047,"Zedescendercyrillic",1176,"Zedieresiscyrillic",1246,"Zeta",918,"Zhearmenian",1338,"Zhebrevecyrillic",1217,"Zhecyrillic",1046,"Zhedescendercyrillic",1174,"Zhedieresiscyrillic",1244,"Zlinebelow",7828,"Zmonospace",65338,"Zsmall",63354,"Zstroke",437,"a",97,"aabengali",2438,"aacute",225,"aadeva",2310,"aagujarati",2694,"aagurmukhi",2566,"aamatragurmukhi",2622,"aarusquare",13059,"aavowelsignbengali",2494,"aavowelsigndeva",2366,"aavowelsigngujarati",2750,"abbreviationmarkarmenian",1375,"abbreviationsigndeva",2416,"abengali",2437,"abopomofo",12570,"abreve",259,"abreveacute",7855,"abrevecyrillic",1233,"abrevedotbelow",7863,"abrevegrave",7857,"abrevehookabove",7859,"abrevetilde",7861,"acaron",462,"acircle",9424,"acircumflex",226,"acircumflexacute",7845,"acircumflexdotbelow",7853,"acircumflexgrave",7847,"acircumflexhookabove",7849,"acircumflextilde",7851,"acute",180,"acutebelowcmb",791,"acutecmb",769,"acutecomb",769,"acutedeva",2388,"acutelowmod",719,"acutetonecmb",833,"acyrillic",1072,"adblgrave",513,"addakgurmukhi",2673,"adeva",2309,"adieresis",228,"adieresiscyrillic",1235,"adieresismacron",479,"adotbelow",7841,"adotmacron",481,"ae",230,"aeacute",509,"aekorean",12624,"aemacron",483,"afii00208",8213,"afii08941",8356,"afii10017",1040,"afii10018",1041,"afii10019",1042,"afii10020",1043,"afii10021",1044,"afii10022",1045,"afii10023",1025,"afii10024",1046,"afii10025",1047,"afii10026",1048,"afii10027",1049,"afii10028",1050,"afii10029",1051,"afii10030",1052,"afii10031",1053,"afii10032",1054,"afii10033",1055,"afii10034",1056,"afii10035",1057,"afii10036",1058,"afii10037",1059,"afii10038",1060,"afii10039",1061,"afii10040",1062,"afii10041",1063,"afii10042",1064,"afii10043",1065,"afii10044",1066,"afii10045",1067,"afii10046",1068,"afii10047",1069,"afii10048",1070,"afii10049",1071,"afii10050",1168,"afii10051",1026,"afii10052",1027,"afii10053",1028,"afii10054",1029,"afii10055",1030,"afii10056",1031,"afii10057",1032,"afii10058",1033,"afii10059",1034,"afii10060",1035,"afii10061",1036,"afii10062",1038,"afii10063",63172,"afii10064",63173,"afii10065",1072,"afii10066",1073,"afii10067",1074,"afii10068",1075,"afii10069",1076,"afii10070",1077,"afii10071",1105,"afii10072",1078,"afii10073",1079,"afii10074",1080,"afii10075",1081,"afii10076",1082,"afii10077",1083,"afii10078",1084,"afii10079",1085,"afii10080",1086,"afii10081",1087,"afii10082",1088,"afii10083",1089,"afii10084",1090,"afii10085",1091,"afii10086",1092,"afii10087",1093,"afii10088",1094,"afii10089",1095,"afii10090",1096,"afii10091",1097,"afii10092",1098,"afii10093",1099,"afii10094",1100,"afii10095",1101,"afii10096",1102,"afii10097",1103,"afii10098",1169,"afii10099",1106,"afii10100",1107,"afii10101",1108,"afii10102",1109,"afii10103",1110,"afii10104",1111,"afii10105",1112,"afii10106",1113,"afii10107",1114,"afii10108",1115,"afii10109",1116,"afii10110",1118,"afii10145",1039,"afii10146",1122,"afii10147",1138,"afii10148",1140,"afii10192",63174,"afii10193",1119,"afii10194",1123,"afii10195",1139,"afii10196",1141,"afii10831",63175,"afii10832",63176,"afii10846",1241,"afii299",8206,"afii300",8207,"afii301",8205,"afii57381",1642,"afii57388",1548,"afii57392",1632,"afii57393",1633,"afii57394",1634,"afii57395",1635,"afii57396",1636,"afii57397",1637,"afii57398",1638,"afii57399",1639,"afii57400",1640,"afii57401",1641,"afii57403",1563,"afii57407",1567,"afii57409",1569,"afii57410",1570,"afii57411",1571,"afii57412",1572,"afii57413",1573,"afii57414",1574,"afii57415",1575,"afii57416",1576,"afii57417",1577,"afii57418",1578,"afii57419",1579,"afii57420",1580,"afii57421",1581,"afii57422",1582,"afii57423",1583,"afii57424",1584,"afii57425",1585,"afii57426",1586,"afii57427",1587,"afii57428",1588,"afii57429",1589,"afii57430",1590,"afii57431",1591,"afii57432",1592,"afii57433",1593,"afii57434",1594,"afii57440",1600,"afii57441",1601,"afii57442",1602,"afii57443",1603,"afii57444",1604,"afii57445",1605,"afii57446",1606,"afii57448",1608,"afii57449",1609,"afii57450",1610,"afii57451",1611,"afii57452",1612,"afii57453",1613,"afii57454",1614,"afii57455",1615,"afii57456",1616,"afii57457",1617,"afii57458",1618,"afii57470",1607,"afii57505",1700,"afii57506",1662,"afii57507",1670,"afii57508",1688,"afii57509",1711,"afii57511",1657,"afii57512",1672,"afii57513",1681,"afii57514",1722,"afii57519",1746,"afii57534",1749,"afii57636",8362,"afii57645",1470,"afii57658",1475,"afii57664",1488,"afii57665",1489,"afii57666",1490,"afii57667",1491,"afii57668",1492,"afii57669",1493,"afii57670",1494,"afii57671",1495,"afii57672",1496,"afii57673",1497,"afii57674",1498,"afii57675",1499,"afii57676",1500,"afii57677",1501,"afii57678",1502,"afii57679",1503,"afii57680",1504,"afii57681",1505,"afii57682",1506,"afii57683",1507,"afii57684",1508,"afii57685",1509,"afii57686",1510,"afii57687",1511,"afii57688",1512,"afii57689",1513,"afii57690",1514,"afii57694",64298,"afii57695",64299,"afii57700",64331,"afii57705",64287,"afii57716",1520,"afii57717",1521,"afii57718",1522,"afii57723",64309,"afii57793",1460,"afii57794",1461,"afii57795",1462,"afii57796",1467,"afii57797",1464,"afii57798",1463,"afii57799",1456,"afii57800",1458,"afii57801",1457,"afii57802",1459,"afii57803",1474,"afii57804",1473,"afii57806",1465,"afii57807",1468,"afii57839",1469,"afii57841",1471,"afii57842",1472,"afii57929",700,"afii61248",8453,"afii61289",8467,"afii61352",8470,"afii61573",8236,"afii61574",8237,"afii61575",8238,"afii61664",8204,"afii63167",1645,"afii64937",701,"agrave",224,"agujarati",2693,"agurmukhi",2565,"ahiragana",12354,"ahookabove",7843,"aibengali",2448,"aibopomofo",12574,"aideva",2320,"aiecyrillic",1237,"aigujarati",2704,"aigurmukhi",2576,"aimatragurmukhi",2632,"ainarabic",1593,"ainfinalarabic",65226,"aininitialarabic",65227,"ainmedialarabic",65228,"ainvertedbreve",515,"aivowelsignbengali",2504,"aivowelsigndeva",2376,"aivowelsigngujarati",2760,"akatakana",12450,"akatakanahalfwidth",65393,"akorean",12623,"alef",1488,"alefarabic",1575,"alefdageshhebrew",64304,"aleffinalarabic",65166,"alefhamzaabovearabic",1571,"alefhamzaabovefinalarabic",65156,"alefhamzabelowarabic",1573,"alefhamzabelowfinalarabic",65160,"alefhebrew",1488,"aleflamedhebrew",64335,"alefmaddaabovearabic",1570,"alefmaddaabovefinalarabic",65154,"alefmaksuraarabic",1609,"alefmaksurafinalarabic",65264,"alefmaksurainitialarabic",65267,"alefmaksuramedialarabic",65268,"alefpatahhebrew",64302,"alefqamatshebrew",64303,"aleph",8501,"allequal",8780,"alpha",945,"alphatonos",940,"amacron",257,"amonospace",65345,"ampersand",38,"ampersandmonospace",65286,"ampersandsmall",63270,"amsquare",13250,"anbopomofo",12578,"angbopomofo",12580,"angbracketleft",12296,"angbracketright",12297,"angkhankhuthai",3674,"angle",8736,"anglebracketleft",12296,"anglebracketleftvertical",65087,"anglebracketright",12297,"anglebracketrightvertical",65088,"angleleft",9001,"angleright",9002,"angstrom",8491,"anoteleia",903,"anudattadeva",2386,"anusvarabengali",2434,"anusvaradeva",2306,"anusvaragujarati",2690,"aogonek",261,"apaatosquare",13056,"aparen",9372,"apostrophearmenian",1370,"apostrophemod",700,"apple",63743,"approaches",8784,"approxequal",8776,"approxequalorimage",8786,"approximatelyequal",8773,"araeaekorean",12686,"araeakorean",12685,"arc",8978,"arighthalfring",7834,"aring",229,"aringacute",507,"aringbelow",7681,"arrowboth",8596,"arrowdashdown",8675,"arrowdashleft",8672,"arrowdashright",8674,"arrowdashup",8673,"arrowdblboth",8660,"arrowdbldown",8659,"arrowdblleft",8656,"arrowdblright",8658,"arrowdblup",8657,"arrowdown",8595,"arrowdownleft",8601,"arrowdownright",8600,"arrowdownwhite",8681,"arrowheaddownmod",709,"arrowheadleftmod",706,"arrowheadrightmod",707,"arrowheadupmod",708,"arrowhorizex",63719,"arrowleft",8592,"arrowleftdbl",8656,"arrowleftdblstroke",8653,"arrowleftoverright",8646,"arrowleftwhite",8678,"arrowright",8594,"arrowrightdblstroke",8655,"arrowrightheavy",10142,"arrowrightoverleft",8644,"arrowrightwhite",8680,"arrowtableft",8676,"arrowtabright",8677,"arrowup",8593,"arrowupdn",8597,"arrowupdnbse",8616,"arrowupdownbase",8616,"arrowupleft",8598,"arrowupleftofdown",8645,"arrowupright",8599,"arrowupwhite",8679,"arrowvertex",63718,"asciicircum",94,"asciicircummonospace",65342,"asciitilde",126,"asciitildemonospace",65374,"ascript",593,"ascriptturned",594,"asmallhiragana",12353,"asmallkatakana",12449,"asmallkatakanahalfwidth",65383,"asterisk",42,"asteriskaltonearabic",1645,"asteriskarabic",1645,"asteriskmath",8727,"asteriskmonospace",65290,"asterisksmall",65121,"asterism",8258,"asuperior",63209,"asymptoticallyequal",8771,"at",64,"atilde",227,"atmonospace",65312,"atsmall",65131,"aturned",592,"aubengali",2452,"aubopomofo",12576,"audeva",2324,"augujarati",2708,"augurmukhi",2580,"aulengthmarkbengali",2519,"aumatragurmukhi",2636,"auvowelsignbengali",2508,"auvowelsigndeva",2380,"auvowelsigngujarati",2764,"avagrahadeva",2365,"aybarmenian",1377,"ayin",1506,"ayinaltonehebrew",64288,"ayinhebrew",1506,"b",98,"babengali",2476,"backslash",92,"backslashmonospace",65340,"badeva",2348,"bagujarati",2732,"bagurmukhi",2604,"bahiragana",12400,"bahtthai",3647,"bakatakana",12496,"bar",124,"barmonospace",65372,"bbopomofo",12549,"bcircle",9425,"bdotaccent",7683,"bdotbelow",7685,"beamedsixteenthnotes",9836,"because",8757,"becyrillic",1073,"beharabic",1576,"behfinalarabic",65168,"behinitialarabic",65169,"behiragana",12409,"behmedialarabic",65170,"behmeeminitialarabic",64671,"behmeemisolatedarabic",64520,"behnoonfinalarabic",64621,"bekatakana",12505,"benarmenian",1378,"bet",1489,"beta",946,"betasymbolgreek",976,"betdagesh",64305,"betdageshhebrew",64305,"bethebrew",1489,"betrafehebrew",64332,"bhabengali",2477,"bhadeva",2349,"bhagujarati",2733,"bhagurmukhi",2605,"bhook",595,"bihiragana",12403,"bikatakana",12499,"bilabialclick",664,"bindigurmukhi",2562,"birusquare",13105,"blackcircle",9679,"blackdiamond",9670,"blackdownpointingtriangle",9660,"blackleftpointingpointer",9668,"blackleftpointingtriangle",9664,"blacklenticularbracketleft",12304,"blacklenticularbracketleftvertical",65083,"blacklenticularbracketright",12305,"blacklenticularbracketrightvertical",65084,"blacklowerlefttriangle",9699,"blacklowerrighttriangle",9698,"blackrectangle",9644,"blackrightpointingpointer",9658,"blackrightpointingtriangle",9654,"blacksmallsquare",9642,"blacksmilingface",9787,"blacksquare",9632,"blackstar",9733,"blackupperlefttriangle",9700,"blackupperrighttriangle",9701,"blackuppointingsmalltriangle",9652,"blackuppointingtriangle",9650,"blank",9251,"blinebelow",7687,"block",9608,"bmonospace",65346,"bobaimaithai",3610,"bohiragana",12412,"bokatakana",12508,"bparen",9373,"bqsquare",13251,"braceex",63732,"braceleft",123,"braceleftbt",63731,"braceleftmid",63730,"braceleftmonospace",65371,"braceleftsmall",65115,"bracelefttp",63729,"braceleftvertical",65079,"braceright",125,"bracerightbt",63742,"bracerightmid",63741,"bracerightmonospace",65373,"bracerightsmall",65116,"bracerighttp",63740,"bracerightvertical",65080,"bracketleft",91,"bracketleftbt",63728,"bracketleftex",63727,"bracketleftmonospace",65339,"bracketlefttp",63726,"bracketright",93,"bracketrightbt",63739,"bracketrightex",63738,"bracketrightmonospace",65341,"bracketrighttp",63737,"breve",728,"brevebelowcmb",814,"brevecmb",774,"breveinvertedbelowcmb",815,"breveinvertedcmb",785,"breveinverteddoublecmb",865,"bridgebelowcmb",810,"bridgeinvertedbelowcmb",826,"brokenbar",166,"bstroke",384,"bsuperior",63210,"btopbar",387,"buhiragana",12406,"bukatakana",12502,"bullet",8226,"bulletinverse",9688,"bulletoperator",8729,"bullseye",9678,"c",99,"caarmenian",1390,"cabengali",2458,"cacute",263,"cadeva",2330,"cagujarati",2714,"cagurmukhi",2586,"calsquare",13192,"candrabindubengali",2433,"candrabinducmb",784,"candrabindudeva",2305,"candrabindugujarati",2689,"capslock",8682,"careof",8453,"caron",711,"caronbelowcmb",812,"caroncmb",780,"carriagereturn",8629,"cbopomofo",12568,"ccaron",269,"ccedilla",231,"ccedillaacute",7689,"ccircle",9426,"ccircumflex",265,"ccurl",597,"cdot",267,"cdotaccent",267,"cdsquare",13253,"cedilla",184,"cedillacmb",807,"cent",162,"centigrade",8451,"centinferior",63199,"centmonospace",65504,"centoldstyle",63394,"centsuperior",63200,"chaarmenian",1401,"chabengali",2459,"chadeva",2331,"chagujarati",2715,"chagurmukhi",2587,"chbopomofo",12564,"cheabkhasiancyrillic",1213,"checkmark",10003,"checyrillic",1095,"chedescenderabkhasiancyrillic",1215,"chedescendercyrillic",1207,"chedieresiscyrillic",1269,"cheharmenian",1395,"chekhakassiancyrillic",1228,"cheverticalstrokecyrillic",1209,"chi",967,"chieuchacirclekorean",12919,"chieuchaparenkorean",12823,"chieuchcirclekorean",12905,"chieuchkorean",12618,"chieuchparenkorean",12809,"chochangthai",3594,"chochanthai",3592,"chochingthai",3593,"chochoethai",3596,"chook",392,"cieucacirclekorean",12918,"cieucaparenkorean",12822,"cieuccirclekorean",12904,"cieuckorean",12616,"cieucparenkorean",12808,"cieucuparenkorean",12828,"circle",9675,"circlecopyrt",169,"circlemultiply",8855,"circleot",8857,"circleplus",8853,"circlepostalmark",12342,"circlewithlefthalfblack",9680,"circlewithrighthalfblack",9681,"circumflex",710,"circumflexbelowcmb",813,"circumflexcmb",770,"clear",8999,"clickalveolar",450,"clickdental",448,"clicklateral",449,"clickretroflex",451,"club",9827,"clubsuitblack",9827,"clubsuitwhite",9831,"cmcubedsquare",13220,"cmonospace",65347,"cmsquaredsquare",13216,"coarmenian",1409,"colon",58,"colonmonetary",8353,"colonmonospace",65306,"colonsign",8353,"colonsmall",65109,"colontriangularhalfmod",721,"colontriangularmod",720,"comma",44,"commaabovecmb",787,"commaaboverightcmb",789,"commaaccent",63171,"commaarabic",1548,"commaarmenian",1373,"commainferior",63201,"commamonospace",65292,"commareversedabovecmb",788,"commareversedmod",701,"commasmall",65104,"commasuperior",63202,"commaturnedabovecmb",786,"commaturnedmod",699,"compass",9788,"congruent",8773,"contourintegral",8750,"control",8963,"controlACK",6,"controlBEL",7,"controlBS",8,"controlCAN",24,"controlCR",13,"controlDC1",17,"controlDC2",18,"controlDC3",19,"controlDC4",20,"controlDEL",127,"controlDLE",16,"controlEM",25,"controlENQ",5,"controlEOT",4,"controlESC",27,"controlETB",23,"controlETX",3,"controlFF",12,"controlFS",28,"controlGS",29,"controlHT",9,"controlLF",10,"controlNAK",21,"controlNULL",0,"controlRS",30,"controlSI",15,"controlSO",14,"controlSOT",2,"controlSTX",1,"controlSUB",26,"controlSYN",22,"controlUS",31,"controlVT",11,"copyright",169,"copyrightsans",63721,"copyrightserif",63193,"cornerbracketleft",12300,"cornerbracketlefthalfwidth",65378,"cornerbracketleftvertical",65089,"cornerbracketright",12301,"cornerbracketrighthalfwidth",65379,"cornerbracketrightvertical",65090,"corporationsquare",13183,"cosquare",13255,"coverkgsquare",13254,"cparen",9374,"cruzeiro",8354,"cstretched",663,"curlyand",8911,"curlyor",8910,"currency",164,"cyrBreve",63185,"cyrFlex",63186,"cyrbreve",63188,"cyrflex",63189,"d",100,"daarmenian",1380,"dabengali",2470,"dadarabic",1590,"dadeva",2342,"dadfinalarabic",65214,"dadinitialarabic",65215,"dadmedialarabic",65216,"dagesh",1468,"dageshhebrew",1468,"dagger",8224,"daggerdbl",8225,"dagujarati",2726,"dagurmukhi",2598,"dahiragana",12384,"dakatakana",12480,"dalarabic",1583,"dalet",1491,"daletdagesh",64307,"daletdageshhebrew",64307,"dalethebrew",1491,"dalfinalarabic",65194,"dammaarabic",1615,"dammalowarabic",1615,"dammatanaltonearabic",1612,"dammatanarabic",1612,"danda",2404,"dargahebrew",1447,"dargalefthebrew",1447,"dasiapneumatacyrilliccmb",1157,"dblGrave",63187,"dblanglebracketleft",12298,"dblanglebracketleftvertical",65085,"dblanglebracketright",12299,"dblanglebracketrightvertical",65086,"dblarchinvertedbelowcmb",811,"dblarrowleft",8660,"dblarrowright",8658,"dbldanda",2405,"dblgrave",63190,"dblgravecmb",783,"dblintegral",8748,"dbllowline",8215,"dbllowlinecmb",819,"dbloverlinecmb",831,"dblprimemod",698,"dblverticalbar",8214,"dblverticallineabovecmb",782,"dbopomofo",12553,"dbsquare",13256,"dcaron",271,"dcedilla",7697,"dcircle",9427,"dcircumflexbelow",7699,"dcroat",273,"ddabengali",2465,"ddadeva",2337,"ddagujarati",2721,"ddagurmukhi",2593,"ddalarabic",1672,"ddalfinalarabic",64393,"dddhadeva",2396,"ddhabengali",2466,"ddhadeva",2338,"ddhagujarati",2722,"ddhagurmukhi",2594,"ddotaccent",7691,"ddotbelow",7693,"decimalseparatorarabic",1643,"decimalseparatorpersian",1643,"decyrillic",1076,"degree",176,"dehihebrew",1453,"dehiragana",12391,"deicoptic",1007,"dekatakana",12487,"deleteleft",9003,"deleteright",8998,"delta",948,"deltaturned",397,"denominatorminusonenumeratorbengali",2552,"dezh",676,"dhabengali",2471,"dhadeva",2343,"dhagujarati",2727,"dhagurmukhi",2599,"dhook",599,"dialytikatonos",901,"dialytikatonoscmb",836,"diamond",9830,"diamondsuitwhite",9826,"dieresis",168,"dieresisacute",63191,"dieresisbelowcmb",804,"dieresiscmb",776,"dieresisgrave",63192,"dieresistonos",901,"dihiragana",12386,"dikatakana",12482,"dittomark",12291,"divide",247,"divides",8739,"divisionslash",8725,"djecyrillic",1106,"dkshade",9619,"dlinebelow",7695,"dlsquare",13207,"dmacron",273,"dmonospace",65348,"dnblock",9604,"dochadathai",3598,"dodekthai",3604,"dohiragana",12393,"dokatakana",12489,"dollar",36,"dollarinferior",63203,"dollarmonospace",65284,"dollaroldstyle",63268,"dollarsmall",65129,"dollarsuperior",63204,"dong",8363,"dorusquare",13094,"dotaccent",729,"dotaccentcmb",775,"dotbelowcmb",803,"dotbelowcomb",803,"dotkatakana",12539,"dotlessi",305,"dotlessj",63166,"dotlessjstrokehook",644,"dotmath",8901,"dottedcircle",9676,"doubleyodpatah",64287,"doubleyodpatahhebrew",64287,"downtackbelowcmb",798,"downtackmod",725,"dparen",9375,"dsuperior",63211,"dtail",598,"dtopbar",396,"duhiragana",12389,"dukatakana",12485,"dz",499,"dzaltone",675,"dzcaron",454,"dzcurl",677,"dzeabkhasiancyrillic",1249,"dzecyrillic",1109,"dzhecyrillic",1119,"e",101,"eacute",233,"earth",9793,"ebengali",2447,"ebopomofo",12572,"ebreve",277,"ecandradeva",2317,"ecandragujarati",2701,"ecandravowelsigndeva",2373,"ecandravowelsigngujarati",2757,"ecaron",283,"ecedillabreve",7709,"echarmenian",1381,"echyiwnarmenian",1415,"ecircle",9428,"ecircumflex",234,"ecircumflexacute",7871,"ecircumflexbelow",7705,"ecircumflexdotbelow",7879,"ecircumflexgrave",7873,"ecircumflexhookabove",7875,"ecircumflextilde",7877,"ecyrillic",1108,"edblgrave",517,"edeva",2319,"edieresis",235,"edot",279,"edotaccent",279,"edotbelow",7865,"eegurmukhi",2575,"eematragurmukhi",2631,"efcyrillic",1092,"egrave",232,"egujarati",2703,"eharmenian",1383,"ehbopomofo",12573,"ehiragana",12360,"ehookabove",7867,"eibopomofo",12575,"eight",56,"eightarabic",1640,"eightbengali",2542,"eightcircle",9319,"eightcircleinversesansserif",10129,"eightdeva",2414,"eighteencircle",9329,"eighteenparen",9349,"eighteenperiod",9369,"eightgujarati",2798,"eightgurmukhi",2670,"eighthackarabic",1640,"eighthangzhou",12328,"eighthnotebeamed",9835,"eightideographicparen",12839,"eightinferior",8328,"eightmonospace",65304,"eightoldstyle",63288,"eightparen",9339,"eightperiod",9359,"eightpersian",1784,"eightroman",8567,"eightsuperior",8312,"eightthai",3672,"einvertedbreve",519,"eiotifiedcyrillic",1125,"ekatakana",12456,"ekatakanahalfwidth",65396,"ekonkargurmukhi",2676,"ekorean",12628,"elcyrillic",1083,"element",8712,"elevencircle",9322,"elevenparen",9342,"elevenperiod",9362,"elevenroman",8570,"ellipsis",8230,"ellipsisvertical",8942,"emacron",275,"emacronacute",7703,"emacrongrave",7701,"emcyrillic",1084,"emdash",8212,"emdashvertical",65073,"emonospace",65349,"emphasismarkarmenian",1371,"emptyset",8709,"enbopomofo",12579,"encyrillic",1085,"endash",8211,"endashvertical",65074,"endescendercyrillic",1187,"eng",331,"engbopomofo",12581,"enghecyrillic",1189,"enhookcyrillic",1224,"enspace",8194,"eogonek",281,"eokorean",12627,"eopen",603,"eopenclosed",666,"eopenreversed",604,"eopenreversedclosed",606,"eopenreversedhook",605,"eparen",9376,"epsilon",949,"epsilontonos",941,"equal",61,"equalmonospace",65309,"equalsmall",65126,"equalsuperior",8316,"equivalence",8801,"erbopomofo",12582,"ercyrillic",1088,"ereversed",600,"ereversedcyrillic",1101,"escyrillic",1089,"esdescendercyrillic",1195,"esh",643,"eshcurl",646,"eshortdeva",2318,"eshortvowelsigndeva",2374,"eshreversedloop",426,"eshsquatreversed",645,"esmallhiragana",12359,"esmallkatakana",12455,"esmallkatakanahalfwidth",65386,"estimated",8494,"esuperior",63212,"eta",951,"etarmenian",1384,"etatonos",942,"eth",240,"etilde",7869,"etildebelow",7707,"etnahtafoukhhebrew",1425,"etnahtafoukhlefthebrew",1425,"etnahtahebrew",1425,"etnahtalefthebrew",1425,"eturned",477,"eukorean",12641,"euro",8364,"evowelsignbengali",2503,"evowelsigndeva",2375,"evowelsigngujarati",2759,"exclam",33,"exclamarmenian",1372,"exclamdbl",8252,"exclamdown",161,"exclamdownsmall",63393,"exclammonospace",65281,"exclamsmall",63265,"existential",8707,"ezh",658,"ezhcaron",495,"ezhcurl",659,"ezhreversed",441,"ezhtail",442,"f",102,"fadeva",2398,"fagurmukhi",2654,"fahrenheit",8457,"fathaarabic",1614,"fathalowarabic",1614,"fathatanarabic",1611,"fbopomofo",12552,"fcircle",9429,"fdotaccent",7711,"feharabic",1601,"feharmenian",1414,"fehfinalarabic",65234,"fehinitialarabic",65235,"fehmedialarabic",65236,"feicoptic",997,"female",9792,"ff",64256,"f_f",64256,"ffi",64259,"ffl",64260,"fi",64257,"fifteencircle",9326,"fifteenparen",9346,"fifteenperiod",9366,"figuredash",8210,"filledbox",9632,"filledrect",9644,"finalkaf",1498,"finalkafdagesh",64314,"finalkafdageshhebrew",64314,"finalkafhebrew",1498,"finalmem",1501,"finalmemhebrew",1501,"finalnun",1503,"finalnunhebrew",1503,"finalpe",1507,"finalpehebrew",1507,"finaltsadi",1509,"finaltsadihebrew",1509,"firsttonechinese",713,"fisheye",9673,"fitacyrillic",1139,"five",53,"fivearabic",1637,"fivebengali",2539,"fivecircle",9316,"fivecircleinversesansserif",10126,"fivedeva",2411,"fiveeighths",8541,"fivegujarati",2795,"fivegurmukhi",2667,"fivehackarabic",1637,"fivehangzhou",12325,"fiveideographicparen",12836,"fiveinferior",8325,"fivemonospace",65301,"fiveoldstyle",63285,"fiveparen",9336,"fiveperiod",9356,"fivepersian",1781,"fiveroman",8564,"fivesuperior",8309,"fivethai",3669,"fl",64258,"florin",402,"fmonospace",65350,"fmsquare",13209,"fofanthai",3615,"fofathai",3613,"fongmanthai",3663,"forall",8704,"four",52,"fourarabic",1636,"fourbengali",2538,"fourcircle",9315,"fourcircleinversesansserif",10125,"fourdeva",2410,"fourgujarati",2794,"fourgurmukhi",2666,"fourhackarabic",1636,"fourhangzhou",12324,"fourideographicparen",12835,"fourinferior",8324,"fourmonospace",65300,"fournumeratorbengali",2551,"fouroldstyle",63284,"fourparen",9335,"fourperiod",9355,"fourpersian",1780,"fourroman",8563,"foursuperior",8308,"fourteencircle",9325,"fourteenparen",9345,"fourteenperiod",9365,"fourthai",3668,"fourthtonechinese",715,"fparen",9377,"fraction",8260,"franc",8355,"g",103,"gabengali",2455,"gacute",501,"gadeva",2327,"gafarabic",1711,"gaffinalarabic",64403,"gafinitialarabic",64404,"gafmedialarabic",64405,"gagujarati",2711,"gagurmukhi",2583,"gahiragana",12364,"gakatakana",12460,"gamma",947,"gammalatinsmall",611,"gammasuperior",736,"gangiacoptic",1003,"gbopomofo",12557,"gbreve",287,"gcaron",487,"gcedilla",291,"gcircle",9430,"gcircumflex",285,"gcommaaccent",291,"gdot",289,"gdotaccent",289,"gecyrillic",1075,"gehiragana",12370,"gekatakana",12466,"geometricallyequal",8785,"gereshaccenthebrew",1436,"gereshhebrew",1523,"gereshmuqdamhebrew",1437,"germandbls",223,"gershayimaccenthebrew",1438,"gershayimhebrew",1524,"getamark",12307,"ghabengali",2456,"ghadarmenian",1394,"ghadeva",2328,"ghagujarati",2712,"ghagurmukhi",2584,"ghainarabic",1594,"ghainfinalarabic",65230,"ghaininitialarabic",65231,"ghainmedialarabic",65232,"ghemiddlehookcyrillic",1173,"ghestrokecyrillic",1171,"gheupturncyrillic",1169,"ghhadeva",2394,"ghhagurmukhi",2650,"ghook",608,"ghzsquare",13203,"gihiragana",12366,"gikatakana",12462,"gimarmenian",1379,"gimel",1490,"gimeldagesh",64306,"gimeldageshhebrew",64306,"gimelhebrew",1490,"gjecyrillic",1107,"glottalinvertedstroke",446,"glottalstop",660,"glottalstopinverted",662,"glottalstopmod",704,"glottalstopreversed",661,"glottalstopreversedmod",705,"glottalstopreversedsuperior",740,"glottalstopstroke",673,"glottalstopstrokereversed",674,"gmacron",7713,"gmonospace",65351,"gohiragana",12372,"gokatakana",12468,"gparen",9378,"gpasquare",13228,"gradient",8711,"grave",96,"gravebelowcmb",790,"gravecmb",768,"gravecomb",768,"gravedeva",2387,"gravelowmod",718,"gravemonospace",65344,"gravetonecmb",832,"greater",62,"greaterequal",8805,"greaterequalorless",8923,"greatermonospace",65310,"greaterorequivalent",8819,"greaterorless",8823,"greateroverequal",8807,"greatersmall",65125,"gscript",609,"gstroke",485,"guhiragana",12368,"guillemotleft",171,"guillemotright",187,"guilsinglleft",8249,"guilsinglright",8250,"gukatakana",12464,"guramusquare",13080,"gysquare",13257,"h",104,"haabkhasiancyrillic",1193,"haaltonearabic",1729,"habengali",2489,"hadescendercyrillic",1203,"hadeva",2361,"hagujarati",2745,"hagurmukhi",2617,"haharabic",1581,"hahfinalarabic",65186,"hahinitialarabic",65187,"hahiragana",12399,"hahmedialarabic",65188,"haitusquare",13098,"hakatakana",12495,"hakatakanahalfwidth",65418,"halantgurmukhi",2637,"hamzaarabic",1569,"hamzalowarabic",1569,"hangulfiller",12644,"hardsigncyrillic",1098,"harpoonleftbarbup",8636,"harpoonrightbarbup",8640,"hasquare",13258,"hatafpatah",1458,"hatafpatah16",1458,"hatafpatah23",1458,"hatafpatah2f",1458,"hatafpatahhebrew",1458,"hatafpatahnarrowhebrew",1458,"hatafpatahquarterhebrew",1458,"hatafpatahwidehebrew",1458,"hatafqamats",1459,"hatafqamats1b",1459,"hatafqamats28",1459,"hatafqamats34",1459,"hatafqamatshebrew",1459,"hatafqamatsnarrowhebrew",1459,"hatafqamatsquarterhebrew",1459,"hatafqamatswidehebrew",1459,"hatafsegol",1457,"hatafsegol17",1457,"hatafsegol24",1457,"hatafsegol30",1457,"hatafsegolhebrew",1457,"hatafsegolnarrowhebrew",1457,"hatafsegolquarterhebrew",1457,"hatafsegolwidehebrew",1457,"hbar",295,"hbopomofo",12559,"hbrevebelow",7723,"hcedilla",7721,"hcircle",9431,"hcircumflex",293,"hdieresis",7719,"hdotaccent",7715,"hdotbelow",7717,"he",1492,"heart",9829,"heartsuitblack",9829,"heartsuitwhite",9825,"hedagesh",64308,"hedageshhebrew",64308,"hehaltonearabic",1729,"heharabic",1607,"hehebrew",1492,"hehfinalaltonearabic",64423,"hehfinalalttwoarabic",65258,"hehfinalarabic",65258,"hehhamzaabovefinalarabic",64421,"hehhamzaaboveisolatedarabic",64420,"hehinitialaltonearabic",64424,"hehinitialarabic",65259,"hehiragana",12408,"hehmedialaltonearabic",64425,"hehmedialarabic",65260,"heiseierasquare",13179,"hekatakana",12504,"hekatakanahalfwidth",65421,"hekutaarusquare",13110,"henghook",615,"herutusquare",13113,"het",1495,"hethebrew",1495,"hhook",614,"hhooksuperior",689,"hieuhacirclekorean",12923,"hieuhaparenkorean",12827,"hieuhcirclekorean",12909,"hieuhkorean",12622,"hieuhparenkorean",12813,"hihiragana",12402,"hikatakana",12498,"hikatakanahalfwidth",65419,"hiriq",1460,"hiriq14",1460,"hiriq21",1460,"hiriq2d",1460,"hiriqhebrew",1460,"hiriqnarrowhebrew",1460,"hiriqquarterhebrew",1460,"hiriqwidehebrew",1460,"hlinebelow",7830,"hmonospace",65352,"hoarmenian",1392,"hohipthai",3627,"hohiragana",12411,"hokatakana",12507,"hokatakanahalfwidth",65422,"holam",1465,"holam19",1465,"holam26",1465,"holam32",1465,"holamhebrew",1465,"holamnarrowhebrew",1465,"holamquarterhebrew",1465,"holamwidehebrew",1465,"honokhukthai",3630,"hookabovecomb",777,"hookcmb",777,"hookpalatalizedbelowcmb",801,"hookretroflexbelowcmb",802,"hoonsquare",13122,"horicoptic",1001,"horizontalbar",8213,"horncmb",795,"hotsprings",9832,"house",8962,"hparen",9379,"hsuperior",688,"hturned",613,"huhiragana",12405,"huiitosquare",13107,"hukatakana",12501,"hukatakanahalfwidth",65420,"hungarumlaut",733,"hungarumlautcmb",779,"hv",405,"hyphen",45,"hypheninferior",63205,"hyphenmonospace",65293,"hyphensmall",65123,"hyphensuperior",63206,"hyphentwo",8208,"i",105,"iacute",237,"iacyrillic",1103,"ibengali",2439,"ibopomofo",12583,"ibreve",301,"icaron",464,"icircle",9432,"icircumflex",238,"icyrillic",1110,"idblgrave",521,"ideographearthcircle",12943,"ideographfirecircle",12939,"ideographicallianceparen",12863,"ideographiccallparen",12858,"ideographiccentrecircle",12965,"ideographicclose",12294,"ideographiccomma",12289,"ideographiccommaleft",65380,"ideographiccongratulationparen",12855,"ideographiccorrectcircle",12963,"ideographicearthparen",12847,"ideographicenterpriseparen",12861,"ideographicexcellentcircle",12957,"ideographicfestivalparen",12864,"ideographicfinancialcircle",12950,"ideographicfinancialparen",12854,"ideographicfireparen",12843,"ideographichaveparen",12850,"ideographichighcircle",12964,"ideographiciterationmark",12293,"ideographiclaborcircle",12952,"ideographiclaborparen",12856,"ideographicleftcircle",12967,"ideographiclowcircle",12966,"ideographicmedicinecircle",12969,"ideographicmetalparen",12846,"ideographicmoonparen",12842,"ideographicnameparen",12852,"ideographicperiod",12290,"ideographicprintcircle",12958,"ideographicreachparen",12867,"ideographicrepresentparen",12857,"ideographicresourceparen",12862,"ideographicrightcircle",12968,"ideographicsecretcircle",12953,"ideographicselfparen",12866,"ideographicsocietyparen",12851,"ideographicspace",12288,"ideographicspecialparen",12853,"ideographicstockparen",12849,"ideographicstudyparen",12859,"ideographicsunparen",12848,"ideographicsuperviseparen",12860,"ideographicwaterparen",12844,"ideographicwoodparen",12845,"ideographiczero",12295,"ideographmetalcircle",12942,"ideographmooncircle",12938,"ideographnamecircle",12948,"ideographsuncircle",12944,"ideographwatercircle",12940,"ideographwoodcircle",12941,"ideva",2311,"idieresis",239,"idieresisacute",7727,"idieresiscyrillic",1253,"idotbelow",7883,"iebrevecyrillic",1239,"iecyrillic",1077,"ieungacirclekorean",12917,"ieungaparenkorean",12821,"ieungcirclekorean",12903,"ieungkorean",12615,"ieungparenkorean",12807,"igrave",236,"igujarati",2695,"igurmukhi",2567,"ihiragana",12356,"ihookabove",7881,"iibengali",2440,"iicyrillic",1080,"iideva",2312,"iigujarati",2696,"iigurmukhi",2568,"iimatragurmukhi",2624,"iinvertedbreve",523,"iishortcyrillic",1081,"iivowelsignbengali",2496,"iivowelsigndeva",2368,"iivowelsigngujarati",2752,"ij",307,"ikatakana",12452,"ikatakanahalfwidth",65394,"ikorean",12643,"ilde",732,"iluyhebrew",1452,"imacron",299,"imacroncyrillic",1251,"imageorapproximatelyequal",8787,"imatragurmukhi",2623,"imonospace",65353,"increment",8710,"infinity",8734,"iniarmenian",1387,"integral",8747,"integralbottom",8993,"integralbt",8993,"integralex",63733,"integraltop",8992,"integraltp",8992,"intersection",8745,"intisquare",13061,"invbullet",9688,"invcircle",9689,"invsmileface",9787,"iocyrillic",1105,"iogonek",303,"iota",953,"iotadieresis",970,"iotadieresistonos",912,"iotalatin",617,"iotatonos",943,"iparen",9380,"irigurmukhi",2674,"ismallhiragana",12355,"ismallkatakana",12451,"ismallkatakanahalfwidth",65384,"issharbengali",2554,"istroke",616,"isuperior",63213,"iterationhiragana",12445,"iterationkatakana",12541,"itilde",297,"itildebelow",7725,"iubopomofo",12585,"iucyrillic",1102,"ivowelsignbengali",2495,"ivowelsigndeva",2367,"ivowelsigngujarati",2751,"izhitsacyrillic",1141,"izhitsadblgravecyrillic",1143,"j",106,"jaarmenian",1393,"jabengali",2460,"jadeva",2332,"jagujarati",2716,"jagurmukhi",2588,"jbopomofo",12560,"jcaron",496,"jcircle",9433,"jcircumflex",309,"jcrossedtail",669,"jdotlessstroke",607,"jecyrillic",1112,"jeemarabic",1580,"jeemfinalarabic",65182,"jeeminitialarabic",65183,"jeemmedialarabic",65184,"jeharabic",1688,"jehfinalarabic",64395,"jhabengali",2461,"jhadeva",2333,"jhagujarati",2717,"jhagurmukhi",2589,"jheharmenian",1403,"jis",12292,"jmonospace",65354,"jparen",9381,"jsuperior",690,"k",107,"kabashkircyrillic",1185,"kabengali",2453,"kacute",7729,"kacyrillic",1082,"kadescendercyrillic",1179,"kadeva",2325,"kaf",1499,"kafarabic",1603,"kafdagesh",64315,"kafdageshhebrew",64315,"kaffinalarabic",65242,"kafhebrew",1499,"kafinitialarabic",65243,"kafmedialarabic",65244,"kafrafehebrew",64333,"kagujarati",2709,"kagurmukhi",2581,"kahiragana",12363,"kahookcyrillic",1220,"kakatakana",12459,"kakatakanahalfwidth",65398,"kappa",954,"kappasymbolgreek",1008,"kapyeounmieumkorean",12657,"kapyeounphieuphkorean",12676,"kapyeounpieupkorean",12664,"kapyeounssangpieupkorean",12665,"karoriisquare",13069,"kashidaautoarabic",1600,"kashidaautonosidebearingarabic",1600,"kasmallkatakana",12533,"kasquare",13188,"kasraarabic",1616,"kasratanarabic",1613,"kastrokecyrillic",1183,"katahiraprolongmarkhalfwidth",65392,"kaverticalstrokecyrillic",1181,"kbopomofo",12558,"kcalsquare",13193,"kcaron",489,"kcedilla",311,"kcircle",9434,"kcommaaccent",311,"kdotbelow",7731,"keharmenian",1412,"kehiragana",12369,"kekatakana",12465,"kekatakanahalfwidth",65401,"kenarmenian",1391,"kesmallkatakana",12534,"kgreenlandic",312,"khabengali",2454,"khacyrillic",1093,"khadeva",2326,"khagujarati",2710,"khagurmukhi",2582,"khaharabic",1582,"khahfinalarabic",65190,"khahinitialarabic",65191,"khahmedialarabic",65192,"kheicoptic",999,"khhadeva",2393,"khhagurmukhi",2649,"khieukhacirclekorean",12920,"khieukhaparenkorean",12824,"khieukhcirclekorean",12906,"khieukhkorean",12619,"khieukhparenkorean",12810,"khokhaithai",3586,"khokhonthai",3589,"khokhuatthai",3587,"khokhwaithai",3588,"khomutthai",3675,"khook",409,"khorakhangthai",3590,"khzsquare",13201,"kihiragana",12365,"kikatakana",12461,"kikatakanahalfwidth",65399,"kiroguramusquare",13077,"kiromeetorusquare",13078,"kirosquare",13076,"kiyeokacirclekorean",12910,"kiyeokaparenkorean",12814,"kiyeokcirclekorean",12896,"kiyeokkorean",12593,"kiyeokparenkorean",12800,"kiyeoksioskorean",12595,"kjecyrillic",1116,"klinebelow",7733,"klsquare",13208,"kmcubedsquare",13222,"kmonospace",65355,"kmsquaredsquare",13218,"kohiragana",12371,"kohmsquare",13248,"kokaithai",3585,"kokatakana",12467,"kokatakanahalfwidth",65402,"kooposquare",13086,"koppacyrillic",1153,"koreanstandardsymbol",12927,"koroniscmb",835,"kparen",9382,"kpasquare",13226,"ksicyrillic",1135,"ktsquare",13263,"kturned",670,"kuhiragana",12367,"kukatakana",12463,"kukatakanahalfwidth",65400,"kvsquare",13240,"kwsquare",13246,"l",108,"labengali",2482,"lacute",314,"ladeva",2354,"lagujarati",2738,"lagurmukhi",2610,"lakkhangyaothai",3653,"lamaleffinalarabic",65276,"lamalefhamzaabovefinalarabic",65272,"lamalefhamzaaboveisolatedarabic",65271,"lamalefhamzabelowfinalarabic",65274,"lamalefhamzabelowisolatedarabic",65273,"lamalefisolatedarabic",65275,"lamalefmaddaabovefinalarabic",65270,"lamalefmaddaaboveisolatedarabic",65269,"lamarabic",1604,"lambda",955,"lambdastroke",411,"lamed",1500,"lameddagesh",64316,"lameddageshhebrew",64316,"lamedhebrew",1500,"lamfinalarabic",65246,"lamhahinitialarabic",64714,"laminitialarabic",65247,"lamjeeminitialarabic",64713,"lamkhahinitialarabic",64715,"lamlamhehisolatedarabic",65010,"lammedialarabic",65248,"lammeemhahinitialarabic",64904,"lammeeminitialarabic",64716,"largecircle",9711,"lbar",410,"lbelt",620,"lbopomofo",12556,"lcaron",318,"lcedilla",316,"lcircle",9435,"lcircumflexbelow",7741,"lcommaaccent",316,"ldot",320,"ldotaccent",320,"ldotbelow",7735,"ldotbelowmacron",7737,"leftangleabovecmb",794,"lefttackbelowcmb",792,"less",60,"lessequal",8804,"lessequalorgreater",8922,"lessmonospace",65308,"lessorequivalent",8818,"lessorgreater",8822,"lessoverequal",8806,"lesssmall",65124,"lezh",622,"lfblock",9612,"lhookretroflex",621,"lira",8356,"liwnarmenian",1388,"lj",457,"ljecyrillic",1113,"ll",63168,"lladeva",2355,"llagujarati",2739,"llinebelow",7739,"llladeva",2356,"llvocalicbengali",2529,"llvocalicdeva",2401,"llvocalicvowelsignbengali",2531,"llvocalicvowelsigndeva",2403,"lmiddletilde",619,"lmonospace",65356,"lmsquare",13264,"lochulathai",3628,"logicaland",8743,"logicalnot",172,"logicalnotreversed",8976,"logicalor",8744,"lolingthai",3621,"longs",383,"lowlinecenterline",65102,"lowlinecmb",818,"lowlinedashed",65101,"lozenge",9674,"lparen",9383,"lslash",322,"lsquare",8467,"lsuperior",63214,"ltshade",9617,"luthai",3622,"lvocalicbengali",2444,"lvocalicdeva",2316,"lvocalicvowelsignbengali",2530,"lvocalicvowelsigndeva",2402,"lxsquare",13267,"m",109,"mabengali",2478,"macron",175,"macronbelowcmb",817,"macroncmb",772,"macronlowmod",717,"macronmonospace",65507,"macute",7743,"madeva",2350,"magujarati",2734,"magurmukhi",2606,"mahapakhhebrew",1444,"mahapakhlefthebrew",1444,"mahiragana",12414,"maichattawalowleftthai",63637,"maichattawalowrightthai",63636,"maichattawathai",3659,"maichattawaupperleftthai",63635,"maieklowleftthai",63628,"maieklowrightthai",63627,"maiekthai",3656,"maiekupperleftthai",63626,"maihanakatleftthai",63620,"maihanakatthai",3633,"maitaikhuleftthai",63625,"maitaikhuthai",3655,"maitholowleftthai",63631,"maitholowrightthai",63630,"maithothai",3657,"maithoupperleftthai",63629,"maitrilowleftthai",63634,"maitrilowrightthai",63633,"maitrithai",3658,"maitriupperleftthai",63632,"maiyamokthai",3654,"makatakana",12510,"makatakanahalfwidth",65423,"male",9794,"mansyonsquare",13127,"maqafhebrew",1470,"mars",9794,"masoracirclehebrew",1455,"masquare",13187,"mbopomofo",12551,"mbsquare",13268,"mcircle",9436,"mcubedsquare",13221,"mdotaccent",7745,"mdotbelow",7747,"meemarabic",1605,"meemfinalarabic",65250,"meeminitialarabic",65251,"meemmedialarabic",65252,"meemmeeminitialarabic",64721,"meemmeemisolatedarabic",64584,"meetorusquare",13133,"mehiragana",12417,"meizierasquare",13182,"mekatakana",12513,"mekatakanahalfwidth",65426,"mem",1502,"memdagesh",64318,"memdageshhebrew",64318,"memhebrew",1502,"menarmenian",1396,"merkhahebrew",1445,"merkhakefulahebrew",1446,"merkhakefulalefthebrew",1446,"merkhalefthebrew",1445,"mhook",625,"mhzsquare",13202,"middledotkatakanahalfwidth",65381,"middot",183,"mieumacirclekorean",12914,"mieumaparenkorean",12818,"mieumcirclekorean",12900,"mieumkorean",12609,"mieumpansioskorean",12656,"mieumparenkorean",12804,"mieumpieupkorean",12654,"mieumsioskorean",12655,"mihiragana",12415,"mikatakana",12511,"mikatakanahalfwidth",65424,"minus",8722,"minusbelowcmb",800,"minuscircle",8854,"minusmod",727,"minusplus",8723,"minute",8242,"miribaarusquare",13130,"mirisquare",13129,"mlonglegturned",624,"mlsquare",13206,"mmcubedsquare",13219,"mmonospace",65357,"mmsquaredsquare",13215,"mohiragana",12418,"mohmsquare",13249,"mokatakana",12514,"mokatakanahalfwidth",65427,"molsquare",13270,"momathai",3617,"moverssquare",13223,"moverssquaredsquare",13224,"mparen",9384,"mpasquare",13227,"mssquare",13235,"msuperior",63215,"mturned",623,"mu",181,"mu1",181,"muasquare",13186,"muchgreater",8811,"muchless",8810,"mufsquare",13196,"mugreek",956,"mugsquare",13197,"muhiragana",12416,"mukatakana",12512,"mukatakanahalfwidth",65425,"mulsquare",13205,"multiply",215,"mumsquare",13211,"munahhebrew",1443,"munahlefthebrew",1443,"musicalnote",9834,"musicalnotedbl",9835,"musicflatsign",9837,"musicsharpsign",9839,"mussquare",13234,"muvsquare",13238,"muwsquare",13244,"mvmegasquare",13241,"mvsquare",13239,"mwmegasquare",13247,"mwsquare",13245,"n",110,"nabengali",2472,"nabla",8711,"nacute",324,"nadeva",2344,"nagujarati",2728,"nagurmukhi",2600,"nahiragana",12394,"nakatakana",12490,"nakatakanahalfwidth",65413,"napostrophe",329,"nasquare",13185,"nbopomofo",12555,"nbspace",160,"ncaron",328,"ncedilla",326,"ncircle",9437,"ncircumflexbelow",7755,"ncommaaccent",326,"ndotaccent",7749,"ndotbelow",7751,"nehiragana",12397,"nekatakana",12493,"nekatakanahalfwidth",65416,"newsheqelsign",8362,"nfsquare",13195,"ngabengali",2457,"ngadeva",2329,"ngagujarati",2713,"ngagurmukhi",2585,"ngonguthai",3591,"nhiragana",12435,"nhookleft",626,"nhookretroflex",627,"nieunacirclekorean",12911,"nieunaparenkorean",12815,"nieuncieuckorean",12597,"nieuncirclekorean",12897,"nieunhieuhkorean",12598,"nieunkorean",12596,"nieunpansioskorean",12648,"nieunparenkorean",12801,"nieunsioskorean",12647,"nieuntikeutkorean",12646,"nihiragana",12395,"nikatakana",12491,"nikatakanahalfwidth",65414,"nikhahitleftthai",63641,"nikhahitthai",3661,"nine",57,"ninearabic",1641,"ninebengali",2543,"ninecircle",9320,"ninecircleinversesansserif",10130,"ninedeva",2415,"ninegujarati",2799,"ninegurmukhi",2671,"ninehackarabic",1641,"ninehangzhou",12329,"nineideographicparen",12840,"nineinferior",8329,"ninemonospace",65305,"nineoldstyle",63289,"nineparen",9340,"nineperiod",9360,"ninepersian",1785,"nineroman",8568,"ninesuperior",8313,"nineteencircle",9330,"nineteenparen",9350,"nineteenperiod",9370,"ninethai",3673,"nj",460,"njecyrillic",1114,"nkatakana",12531,"nkatakanahalfwidth",65437,"nlegrightlong",414,"nlinebelow",7753,"nmonospace",65358,"nmsquare",13210,"nnabengali",2467,"nnadeva",2339,"nnagujarati",2723,"nnagurmukhi",2595,"nnnadeva",2345,"nohiragana",12398,"nokatakana",12494,"nokatakanahalfwidth",65417,"nonbreakingspace",160,"nonenthai",3603,"nonuthai",3609,"noonarabic",1606,"noonfinalarabic",65254,"noonghunnaarabic",1722,"noonghunnafinalarabic",64415,"nooninitialarabic",65255,"noonjeeminitialarabic",64722,"noonjeemisolatedarabic",64587,"noonmedialarabic",65256,"noonmeeminitialarabic",64725,"noonmeemisolatedarabic",64590,"noonnoonfinalarabic",64653,"notcontains",8716,"notelement",8713,"notelementof",8713,"notequal",8800,"notgreater",8815,"notgreaternorequal",8817,"notgreaternorless",8825,"notidentical",8802,"notless",8814,"notlessnorequal",8816,"notparallel",8742,"notprecedes",8832,"notsubset",8836,"notsucceeds",8833,"notsuperset",8837,"nowarmenian",1398,"nparen",9385,"nssquare",13233,"nsuperior",8319,"ntilde",241,"nu",957,"nuhiragana",12396,"nukatakana",12492,"nukatakanahalfwidth",65415,"nuktabengali",2492,"nuktadeva",2364,"nuktagujarati",2748,"nuktagurmukhi",2620,"numbersign",35,"numbersignmonospace",65283,"numbersignsmall",65119,"numeralsigngreek",884,"numeralsignlowergreek",885,"numero",8470,"nun",1504,"nundagesh",64320,"nundageshhebrew",64320,"nunhebrew",1504,"nvsquare",13237,"nwsquare",13243,"nyabengali",2462,"nyadeva",2334,"nyagujarati",2718,"nyagurmukhi",2590,"o",111,"oacute",243,"oangthai",3629,"obarred",629,"obarredcyrillic",1257,"obarreddieresiscyrillic",1259,"obengali",2451,"obopomofo",12571,"obreve",335,"ocandradeva",2321,"ocandragujarati",2705,"ocandravowelsigndeva",2377,"ocandravowelsigngujarati",2761,"ocaron",466,"ocircle",9438,"ocircumflex",244,"ocircumflexacute",7889,"ocircumflexdotbelow",7897,"ocircumflexgrave",7891,"ocircumflexhookabove",7893,"ocircumflextilde",7895,"ocyrillic",1086,"odblacute",337,"odblgrave",525,"odeva",2323,"odieresis",246,"odieresiscyrillic",1255,"odotbelow",7885,"oe",339,"oekorean",12634,"ogonek",731,"ogonekcmb",808,"ograve",242,"ogujarati",2707,"oharmenian",1413,"ohiragana",12362,"ohookabove",7887,"ohorn",417,"ohornacute",7899,"ohorndotbelow",7907,"ohorngrave",7901,"ohornhookabove",7903,"ohorntilde",7905,"ohungarumlaut",337,"oi",419,"oinvertedbreve",527,"okatakana",12458,"okatakanahalfwidth",65397,"okorean",12631,"olehebrew",1451,"omacron",333,"omacronacute",7763,"omacrongrave",7761,"omdeva",2384,"omega",969,"omega1",982,"omegacyrillic",1121,"omegalatinclosed",631,"omegaroundcyrillic",1147,"omegatitlocyrillic",1149,"omegatonos",974,"omgujarati",2768,"omicron",959,"omicrontonos",972,"omonospace",65359,"one",49,"onearabic",1633,"onebengali",2535,"onecircle",9312,"onecircleinversesansserif",10122,"onedeva",2407,"onedotenleader",8228,"oneeighth",8539,"onefitted",63196,"onegujarati",2791,"onegurmukhi",2663,"onehackarabic",1633,"onehalf",189,"onehangzhou",12321,"oneideographicparen",12832,"oneinferior",8321,"onemonospace",65297,"onenumeratorbengali",2548,"oneoldstyle",63281,"oneparen",9332,"oneperiod",9352,"onepersian",1777,"onequarter",188,"oneroman",8560,"onesuperior",185,"onethai",3665,"onethird",8531,"oogonek",491,"oogonekmacron",493,"oogurmukhi",2579,"oomatragurmukhi",2635,"oopen",596,"oparen",9386,"openbullet",9702,"option",8997,"ordfeminine",170,"ordmasculine",186,"orthogonal",8735,"oshortdeva",2322,"oshortvowelsigndeva",2378,"oslash",248,"oslashacute",511,"osmallhiragana",12361,"osmallkatakana",12457,"osmallkatakanahalfwidth",65387,"ostrokeacute",511,"osuperior",63216,"otcyrillic",1151,"otilde",245,"otildeacute",7757,"otildedieresis",7759,"oubopomofo",12577,"overline",8254,"overlinecenterline",65098,"overlinecmb",773,"overlinedashed",65097,"overlinedblwavy",65100,"overlinewavy",65099,"overscore",175,"ovowelsignbengali",2507,"ovowelsigndeva",2379,"ovowelsigngujarati",2763,"p",112,"paampssquare",13184,"paasentosquare",13099,"pabengali",2474,"pacute",7765,"padeva",2346,"pagedown",8671,"pageup",8670,"pagujarati",2730,"pagurmukhi",2602,"pahiragana",12401,"paiyannoithai",3631,"pakatakana",12497,"palatalizationcyrilliccmb",1156,"palochkacyrillic",1216,"pansioskorean",12671,"paragraph",182,"parallel",8741,"parenleft",40,"parenleftaltonearabic",64830,"parenleftbt",63725,"parenleftex",63724,"parenleftinferior",8333,"parenleftmonospace",65288,"parenleftsmall",65113,"parenleftsuperior",8317,"parenlefttp",63723,"parenleftvertical",65077,"parenright",41,"parenrightaltonearabic",64831,"parenrightbt",63736,"parenrightex",63735,"parenrightinferior",8334,"parenrightmonospace",65289,"parenrightsmall",65114,"parenrightsuperior",8318,"parenrighttp",63734,"parenrightvertical",65078,"partialdiff",8706,"paseqhebrew",1472,"pashtahebrew",1433,"pasquare",13225,"patah",1463,"patah11",1463,"patah1d",1463,"patah2a",1463,"patahhebrew",1463,"patahnarrowhebrew",1463,"patahquarterhebrew",1463,"patahwidehebrew",1463,"pazerhebrew",1441,"pbopomofo",12550,"pcircle",9439,"pdotaccent",7767,"pe",1508,"pecyrillic",1087,"pedagesh",64324,"pedageshhebrew",64324,"peezisquare",13115,"pefinaldageshhebrew",64323,"peharabic",1662,"peharmenian",1402,"pehebrew",1508,"pehfinalarabic",64343,"pehinitialarabic",64344,"pehiragana",12410,"pehmedialarabic",64345,"pekatakana",12506,"pemiddlehookcyrillic",1191,"perafehebrew",64334,"percent",37,"percentarabic",1642,"percentmonospace",65285,"percentsmall",65130,"period",46,"periodarmenian",1417,"periodcentered",183,"periodhalfwidth",65377,"periodinferior",63207,"periodmonospace",65294,"periodsmall",65106,"periodsuperior",63208,"perispomenigreekcmb",834,"perpendicular",8869,"perthousand",8240,"peseta",8359,"pfsquare",13194,"phabengali",2475,"phadeva",2347,"phagujarati",2731,"phagurmukhi",2603,"phi",966,"phi1",981,"phieuphacirclekorean",12922,"phieuphaparenkorean",12826,"phieuphcirclekorean",12908,"phieuphkorean",12621,"phieuphparenkorean",12812,"philatin",632,"phinthuthai",3642,"phisymbolgreek",981,"phook",421,"phophanthai",3614,"phophungthai",3612,"phosamphaothai",3616,"pi",960,"pieupacirclekorean",12915,"pieupaparenkorean",12819,"pieupcieuckorean",12662,"pieupcirclekorean",12901,"pieupkiyeokkorean",12658,"pieupkorean",12610,"pieupparenkorean",12805,"pieupsioskiyeokkorean",12660,"pieupsioskorean",12612,"pieupsiostikeutkorean",12661,"pieupthieuthkorean",12663,"pieuptikeutkorean",12659,"pihiragana",12404,"pikatakana",12500,"pisymbolgreek",982,"piwrarmenian",1411,"plus",43,"plusbelowcmb",799,"pluscircle",8853,"plusminus",177,"plusmod",726,"plusmonospace",65291,"plussmall",65122,"plussuperior",8314,"pmonospace",65360,"pmsquare",13272,"pohiragana",12413,"pointingindexdownwhite",9759,"pointingindexleftwhite",9756,"pointingindexrightwhite",9758,"pointingindexupwhite",9757,"pokatakana",12509,"poplathai",3611,"postalmark",12306,"postalmarkface",12320,"pparen",9387,"precedes",8826,"prescription",8478,"primemod",697,"primereversed",8245,"product",8719,"projective",8965,"prolongedkana",12540,"propellor",8984,"propersubset",8834,"propersuperset",8835,"proportion",8759,"proportional",8733,"psi",968,"psicyrillic",1137,"psilipneumatacyrilliccmb",1158,"pssquare",13232,"puhiragana",12407,"pukatakana",12503,"pvsquare",13236,"pwsquare",13242,"q",113,"qadeva",2392,"qadmahebrew",1448,"qafarabic",1602,"qaffinalarabic",65238,"qafinitialarabic",65239,"qafmedialarabic",65240,"qamats",1464,"qamats10",1464,"qamats1a",1464,"qamats1c",1464,"qamats27",1464,"qamats29",1464,"qamats33",1464,"qamatsde",1464,"qamatshebrew",1464,"qamatsnarrowhebrew",1464,"qamatsqatanhebrew",1464,"qamatsqatannarrowhebrew",1464,"qamatsqatanquarterhebrew",1464,"qamatsqatanwidehebrew",1464,"qamatsquarterhebrew",1464,"qamatswidehebrew",1464,"qarneyparahebrew",1439,"qbopomofo",12561,"qcircle",9440,"qhook",672,"qmonospace",65361,"qof",1511,"qofdagesh",64327,"qofdageshhebrew",64327,"qofhebrew",1511,"qparen",9388,"quarternote",9833,"qubuts",1467,"qubuts18",1467,"qubuts25",1467,"qubuts31",1467,"qubutshebrew",1467,"qubutsnarrowhebrew",1467,"qubutsquarterhebrew",1467,"qubutswidehebrew",1467,"question",63,"questionarabic",1567,"questionarmenian",1374,"questiondown",191,"questiondownsmall",63423,"questiongreek",894,"questionmonospace",65311,"questionsmall",63295,"quotedbl",34,"quotedblbase",8222,"quotedblleft",8220,"quotedblmonospace",65282,"quotedblprime",12318,"quotedblprimereversed",12317,"quotedblright",8221,"quoteleft",8216,"quoteleftreversed",8219,"quotereversed",8219,"quoteright",8217,"quoterightn",329,"quotesinglbase",8218,"quotesingle",39,"quotesinglemonospace",65287,"r",114,"raarmenian",1404,"rabengali",2480,"racute",341,"radeva",2352,"radical",8730,"radicalex",63717,"radoverssquare",13230,"radoverssquaredsquare",13231,"radsquare",13229,"rafe",1471,"rafehebrew",1471,"ragujarati",2736,"ragurmukhi",2608,"rahiragana",12425,"rakatakana",12521,"rakatakanahalfwidth",65431,"ralowerdiagonalbengali",2545,"ramiddlediagonalbengali",2544,"ramshorn",612,"ratio",8758,"rbopomofo",12566,"rcaron",345,"rcedilla",343,"rcircle",9441,"rcommaaccent",343,"rdblgrave",529,"rdotaccent",7769,"rdotbelow",7771,"rdotbelowmacron",7773,"referencemark",8251,"reflexsubset",8838,"reflexsuperset",8839,"registered",174,"registersans",63720,"registerserif",63194,"reharabic",1585,"reharmenian",1408,"rehfinalarabic",65198,"rehiragana",12428,"rekatakana",12524,"rekatakanahalfwidth",65434,"resh",1512,"reshdageshhebrew",64328,"reshhebrew",1512,"reversedtilde",8765,"reviahebrew",1431,"reviamugrashhebrew",1431,"revlogicalnot",8976,"rfishhook",638,"rfishhookreversed",639,"rhabengali",2525,"rhadeva",2397,"rho",961,"rhook",637,"rhookturned",635,"rhookturnedsuperior",693,"rhosymbolgreek",1009,"rhotichookmod",734,"rieulacirclekorean",12913,"rieulaparenkorean",12817,"rieulcirclekorean",12899,"rieulhieuhkorean",12608,"rieulkiyeokkorean",12602,"rieulkiyeoksioskorean",12649,"rieulkorean",12601,"rieulmieumkorean",12603,"rieulpansioskorean",12652,"rieulparenkorean",12803,"rieulphieuphkorean",12607,"rieulpieupkorean",12604,"rieulpieupsioskorean",12651,"rieulsioskorean",12605,"rieulthieuthkorean",12606,"rieultikeutkorean",12650,"rieulyeorinhieuhkorean",12653,"rightangle",8735,"righttackbelowcmb",793,"righttriangle",8895,"rihiragana",12426,"rikatakana",12522,"rikatakanahalfwidth",65432,"ring",730,"ringbelowcmb",805,"ringcmb",778,"ringhalfleft",703,"ringhalfleftarmenian",1369,"ringhalfleftbelowcmb",796,"ringhalfleftcentered",723,"ringhalfright",702,"ringhalfrightbelowcmb",825,"ringhalfrightcentered",722,"rinvertedbreve",531,"rittorusquare",13137,"rlinebelow",7775,"rlongleg",636,"rlonglegturned",634,"rmonospace",65362,"rohiragana",12429,"rokatakana",12525,"rokatakanahalfwidth",65435,"roruathai",3619,"rparen",9389,"rrabengali",2524,"rradeva",2353,"rragurmukhi",2652,"rreharabic",1681,"rrehfinalarabic",64397,"rrvocalicbengali",2528,"rrvocalicdeva",2400,"rrvocalicgujarati",2784,"rrvocalicvowelsignbengali",2500,"rrvocalicvowelsigndeva",2372,"rrvocalicvowelsigngujarati",2756,"rsuperior",63217,"rtblock",9616,"rturned",633,"rturnedsuperior",692,"ruhiragana",12427,"rukatakana",12523,"rukatakanahalfwidth",65433,"rupeemarkbengali",2546,"rupeesignbengali",2547,"rupiah",63197,"ruthai",3620,"rvocalicbengali",2443,"rvocalicdeva",2315,"rvocalicgujarati",2699,"rvocalicvowelsignbengali",2499,"rvocalicvowelsigndeva",2371,"rvocalicvowelsigngujarati",2755,"s",115,"sabengali",2488,"sacute",347,"sacutedotaccent",7781,"sadarabic",1589,"sadeva",2360,"sadfinalarabic",65210,"sadinitialarabic",65211,"sadmedialarabic",65212,"sagujarati",2744,"sagurmukhi",2616,"sahiragana",12373,"sakatakana",12469,"sakatakanahalfwidth",65403,"sallallahoualayhewasallamarabic",65018,"samekh",1505,"samekhdagesh",64321,"samekhdageshhebrew",64321,"samekhhebrew",1505,"saraaathai",3634,"saraaethai",3649,"saraaimaimalaithai",3652,"saraaimaimuanthai",3651,"saraamthai",3635,"saraathai",3632,"saraethai",3648,"saraiileftthai",63622,"saraiithai",3637,"saraileftthai",63621,"saraithai",3636,"saraothai",3650,"saraueeleftthai",63624,"saraueethai",3639,"saraueleftthai",63623,"sarauethai",3638,"sarauthai",3640,"sarauuthai",3641,"sbopomofo",12569,"scaron",353,"scarondotaccent",7783,"scedilla",351,"schwa",601,"schwacyrillic",1241,"schwadieresiscyrillic",1243,"schwahook",602,"scircle",9442,"scircumflex",349,"scommaaccent",537,"sdotaccent",7777,"sdotbelow",7779,"sdotbelowdotaccent",7785,"seagullbelowcmb",828,"second",8243,"secondtonechinese",714,"section",167,"seenarabic",1587,"seenfinalarabic",65202,"seeninitialarabic",65203,"seenmedialarabic",65204,"segol",1462,"segol13",1462,"segol1f",1462,"segol2c",1462,"segolhebrew",1462,"segolnarrowhebrew",1462,"segolquarterhebrew",1462,"segoltahebrew",1426,"segolwidehebrew",1462,"seharmenian",1405,"sehiragana",12379,"sekatakana",12475,"sekatakanahalfwidth",65406,"semicolon",59,"semicolonarabic",1563,"semicolonmonospace",65307,"semicolonsmall",65108,"semivoicedmarkkana",12444,"semivoicedmarkkanahalfwidth",65439,"sentisquare",13090,"sentosquare",13091,"seven",55,"sevenarabic",1639,"sevenbengali",2541,"sevencircle",9318,"sevencircleinversesansserif",10128,"sevendeva",2413,"seveneighths",8542,"sevengujarati",2797,"sevengurmukhi",2669,"sevenhackarabic",1639,"sevenhangzhou",12327,"sevenideographicparen",12838,"seveninferior",8327,"sevenmonospace",65303,"sevenoldstyle",63287,"sevenparen",9338,"sevenperiod",9358,"sevenpersian",1783,"sevenroman",8566,"sevensuperior",8311,"seventeencircle",9328,"seventeenparen",9348,"seventeenperiod",9368,"seventhai",3671,"sfthyphen",173,"shaarmenian",1399,"shabengali",2486,"shacyrillic",1096,"shaddaarabic",1617,"shaddadammaarabic",64609,"shaddadammatanarabic",64606,"shaddafathaarabic",64608,"shaddakasraarabic",64610,"shaddakasratanarabic",64607,"shade",9618,"shadedark",9619,"shadelight",9617,"shademedium",9618,"shadeva",2358,"shagujarati",2742,"shagurmukhi",2614,"shalshelethebrew",1427,"shbopomofo",12565,"shchacyrillic",1097,"sheenarabic",1588,"sheenfinalarabic",65206,"sheeninitialarabic",65207,"sheenmedialarabic",65208,"sheicoptic",995,"sheqel",8362,"sheqelhebrew",8362,"sheva",1456,"sheva115",1456,"sheva15",1456,"sheva22",1456,"sheva2e",1456,"shevahebrew",1456,"shevanarrowhebrew",1456,"shevaquarterhebrew",1456,"shevawidehebrew",1456,"shhacyrillic",1211,"shimacoptic",1005,"shin",1513,"shindagesh",64329,"shindageshhebrew",64329,"shindageshshindot",64300,"shindageshshindothebrew",64300,"shindageshsindot",64301,"shindageshsindothebrew",64301,"shindothebrew",1473,"shinhebrew",1513,"shinshindot",64298,"shinshindothebrew",64298,"shinsindot",64299,"shinsindothebrew",64299,"shook",642,"sigma",963,"sigma1",962,"sigmafinal",962,"sigmalunatesymbolgreek",1010,"sihiragana",12375,"sikatakana",12471,"sikatakanahalfwidth",65404,"siluqhebrew",1469,"siluqlefthebrew",1469,"similar",8764,"sindothebrew",1474,"siosacirclekorean",12916,"siosaparenkorean",12820,"sioscieuckorean",12670,"sioscirclekorean",12902,"sioskiyeokkorean",12666,"sioskorean",12613,"siosnieunkorean",12667,"siosparenkorean",12806,"siospieupkorean",12669,"siostikeutkorean",12668,"six",54,"sixarabic",1638,"sixbengali",2540,"sixcircle",9317,"sixcircleinversesansserif",10127,"sixdeva",2412,"sixgujarati",2796,"sixgurmukhi",2668,"sixhackarabic",1638,"sixhangzhou",12326,"sixideographicparen",12837,"sixinferior",8326,"sixmonospace",65302,"sixoldstyle",63286,"sixparen",9337,"sixperiod",9357,"sixpersian",1782,"sixroman",8565,"sixsuperior",8310,"sixteencircle",9327,"sixteencurrencydenominatorbengali",2553,"sixteenparen",9347,"sixteenperiod",9367,"sixthai",3670,"slash",47,"slashmonospace",65295,"slong",383,"slongdotaccent",7835,"smileface",9786,"smonospace",65363,"sofpasuqhebrew",1475,"softhyphen",173,"softsigncyrillic",1100,"sohiragana",12381,"sokatakana",12477,"sokatakanahalfwidth",65407,"soliduslongoverlaycmb",824,"solidusshortoverlaycmb",823,"sorusithai",3625,"sosalathai",3624,"sosothai",3595,"sosuathai",3626,"space",32,"spacehackarabic",32,"spade",9824,"spadesuitblack",9824,"spadesuitwhite",9828,"sparen",9390,"squarebelowcmb",827,"squarecc",13252,"squarecm",13213,"squarediagonalcrosshatchfill",9641,"squarehorizontalfill",9636,"squarekg",13199,"squarekm",13214,"squarekmcapital",13262,"squareln",13265,"squarelog",13266,"squaremg",13198,"squaremil",13269,"squaremm",13212,"squaremsquared",13217,"squareorthogonalcrosshatchfill",9638,"squareupperlefttolowerrightfill",9639,"squareupperrighttolowerleftfill",9640,"squareverticalfill",9637,"squarewhitewithsmallblack",9635,"srsquare",13275,"ssabengali",2487,"ssadeva",2359,"ssagujarati",2743,"ssangcieuckorean",12617,"ssanghieuhkorean",12677,"ssangieungkorean",12672,"ssangkiyeokkorean",12594,"ssangnieunkorean",12645,"ssangpieupkorean",12611,"ssangsioskorean",12614,"ssangtikeutkorean",12600,"ssuperior",63218,"sterling",163,"sterlingmonospace",65505,"strokelongoverlaycmb",822,"strokeshortoverlaycmb",821,"subset",8834,"subsetnotequal",8842,"subsetorequal",8838,"succeeds",8827,"suchthat",8715,"suhiragana",12377,"sukatakana",12473,"sukatakanahalfwidth",65405,"sukunarabic",1618,"summation",8721,"sun",9788,"superset",8835,"supersetnotequal",8843,"supersetorequal",8839,"svsquare",13276,"syouwaerasquare",13180,"t",116,"tabengali",2468,"tackdown",8868,"tackleft",8867,"tadeva",2340,"tagujarati",2724,"tagurmukhi",2596,"taharabic",1591,"tahfinalarabic",65218,"tahinitialarabic",65219,"tahiragana",12383,"tahmedialarabic",65220,"taisyouerasquare",13181,"takatakana",12479,"takatakanahalfwidth",65408,"tatweelarabic",1600,"tau",964,"tav",1514,"tavdages",64330,"tavdagesh",64330,"tavdageshhebrew",64330,"tavhebrew",1514,"tbar",359,"tbopomofo",12554,"tcaron",357,"tccurl",680,"tcedilla",355,"tcheharabic",1670,"tchehfinalarabic",64379,"tchehinitialarabic",64380,"tchehmedialarabic",64381,"tcircle",9443,"tcircumflexbelow",7793,"tcommaaccent",355,"tdieresis",7831,"tdotaccent",7787,"tdotbelow",7789,"tecyrillic",1090,"tedescendercyrillic",1197,"teharabic",1578,"tehfinalarabic",65174,"tehhahinitialarabic",64674,"tehhahisolatedarabic",64524,"tehinitialarabic",65175,"tehiragana",12390,"tehjeeminitialarabic",64673,"tehjeemisolatedarabic",64523,"tehmarbutaarabic",1577,"tehmarbutafinalarabic",65172,"tehmedialarabic",65176,"tehmeeminitialarabic",64676,"tehmeemisolatedarabic",64526,"tehnoonfinalarabic",64627,"tekatakana",12486,"tekatakanahalfwidth",65411,"telephone",8481,"telephoneblack",9742,"telishagedolahebrew",1440,"telishaqetanahebrew",1449,"tencircle",9321,"tenideographicparen",12841,"tenparen",9341,"tenperiod",9361,"tenroman",8569,"tesh",679,"tet",1496,"tetdagesh",64312,"tetdageshhebrew",64312,"tethebrew",1496,"tetsecyrillic",1205,"tevirhebrew",1435,"tevirlefthebrew",1435,"thabengali",2469,"thadeva",2341,"thagujarati",2725,"thagurmukhi",2597,"thalarabic",1584,"thalfinalarabic",65196,"thanthakhatlowleftthai",63640,"thanthakhatlowrightthai",63639,"thanthakhatthai",3660,"thanthakhatupperleftthai",63638,"theharabic",1579,"thehfinalarabic",65178,"thehinitialarabic",65179,"thehmedialarabic",65180,"thereexists",8707,"therefore",8756,"theta",952,"theta1",977,"thetasymbolgreek",977,"thieuthacirclekorean",12921,"thieuthaparenkorean",12825,"thieuthcirclekorean",12907,"thieuthkorean",12620,"thieuthparenkorean",12811,"thirteencircle",9324,"thirteenparen",9344,"thirteenperiod",9364,"thonangmonthothai",3601,"thook",429,"thophuthaothai",3602,"thorn",254,"thothahanthai",3607,"thothanthai",3600,"thothongthai",3608,"thothungthai",3606,"thousandcyrillic",1154,"thousandsseparatorarabic",1644,"thousandsseparatorpersian",1644,"three",51,"threearabic",1635,"threebengali",2537,"threecircle",9314,"threecircleinversesansserif",10124,"threedeva",2409,"threeeighths",8540,"threegujarati",2793,"threegurmukhi",2665,"threehackarabic",1635,"threehangzhou",12323,"threeideographicparen",12834,"threeinferior",8323,"threemonospace",65299,"threenumeratorbengali",2550,"threeoldstyle",63283,"threeparen",9334,"threeperiod",9354,"threepersian",1779,"threequarters",190,"threequartersemdash",63198,"threeroman",8562,"threesuperior",179,"threethai",3667,"thzsquare",13204,"tihiragana",12385,"tikatakana",12481,"tikatakanahalfwidth",65409,"tikeutacirclekorean",12912,"tikeutaparenkorean",12816,"tikeutcirclekorean",12898,"tikeutkorean",12599,"tikeutparenkorean",12802,"tilde",732,"tildebelowcmb",816,"tildecmb",771,"tildecomb",771,"tildedoublecmb",864,"tildeoperator",8764,"tildeoverlaycmb",820,"tildeverticalcmb",830,"timescircle",8855,"tipehahebrew",1430,"tipehalefthebrew",1430,"tippigurmukhi",2672,"titlocyrilliccmb",1155,"tiwnarmenian",1407,"tlinebelow",7791,"tmonospace",65364,"toarmenian",1385,"tohiragana",12392,"tokatakana",12488,"tokatakanahalfwidth",65412,"tonebarextrahighmod",741,"tonebarextralowmod",745,"tonebarhighmod",742,"tonebarlowmod",744,"tonebarmidmod",743,"tonefive",445,"tonesix",389,"tonetwo",424,"tonos",900,"tonsquare",13095,"topatakthai",3599,"tortoiseshellbracketleft",12308,"tortoiseshellbracketleftsmall",65117,"tortoiseshellbracketleftvertical",65081,"tortoiseshellbracketright",12309,"tortoiseshellbracketrightsmall",65118,"tortoiseshellbracketrightvertical",65082,"totaothai",3605,"tpalatalhook",427,"tparen",9391,"trademark",8482,"trademarksans",63722,"trademarkserif",63195,"tretroflexhook",648,"triagdn",9660,"triaglf",9668,"triagrt",9658,"triagup",9650,"ts",678,"tsadi",1510,"tsadidagesh",64326,"tsadidageshhebrew",64326,"tsadihebrew",1510,"tsecyrillic",1094,"tsere",1461,"tsere12",1461,"tsere1e",1461,"tsere2b",1461,"tserehebrew",1461,"tserenarrowhebrew",1461,"tserequarterhebrew",1461,"tserewidehebrew",1461,"tshecyrillic",1115,"tsuperior",63219,"ttabengali",2463,"ttadeva",2335,"ttagujarati",2719,"ttagurmukhi",2591,"tteharabic",1657,"ttehfinalarabic",64359,"ttehinitialarabic",64360,"ttehmedialarabic",64361,"tthabengali",2464,"tthadeva",2336,"tthagujarati",2720,"tthagurmukhi",2592,"tturned",647,"tuhiragana",12388,"tukatakana",12484,"tukatakanahalfwidth",65410,"tusmallhiragana",12387,"tusmallkatakana",12483,"tusmallkatakanahalfwidth",65391,"twelvecircle",9323,"twelveparen",9343,"twelveperiod",9363,"twelveroman",8571,"twentycircle",9331,"twentyhangzhou",21316,"twentyparen",9351,"twentyperiod",9371,"two",50,"twoarabic",1634,"twobengali",2536,"twocircle",9313,"twocircleinversesansserif",10123,"twodeva",2408,"twodotenleader",8229,"twodotleader",8229,"twodotleadervertical",65072,"twogujarati",2792,"twogurmukhi",2664,"twohackarabic",1634,"twohangzhou",12322,"twoideographicparen",12833,"twoinferior",8322,"twomonospace",65298,"twonumeratorbengali",2549,"twooldstyle",63282,"twoparen",9333,"twoperiod",9353,"twopersian",1778,"tworoman",8561,"twostroke",443,"twosuperior",178,"twothai",3666,"twothirds",8532,"u",117,"uacute",250,"ubar",649,"ubengali",2441,"ubopomofo",12584,"ubreve",365,"ucaron",468,"ucircle",9444,"ucircumflex",251,"ucircumflexbelow",7799,"ucyrillic",1091,"udattadeva",2385,"udblacute",369,"udblgrave",533,"udeva",2313,"udieresis",252,"udieresisacute",472,"udieresisbelow",7795,"udieresiscaron",474,"udieresiscyrillic",1265,"udieresisgrave",476,"udieresismacron",470,"udotbelow",7909,"ugrave",249,"ugujarati",2697,"ugurmukhi",2569,"uhiragana",12358,"uhookabove",7911,"uhorn",432,"uhornacute",7913,"uhorndotbelow",7921,"uhorngrave",7915,"uhornhookabove",7917,"uhorntilde",7919,"uhungarumlaut",369,"uhungarumlautcyrillic",1267,"uinvertedbreve",535,"ukatakana",12454,"ukatakanahalfwidth",65395,"ukcyrillic",1145,"ukorean",12636,"umacron",363,"umacroncyrillic",1263,"umacrondieresis",7803,"umatragurmukhi",2625,"umonospace",65365,"underscore",95,"underscoredbl",8215,"underscoremonospace",65343,"underscorevertical",65075,"underscorewavy",65103,"union",8746,"universal",8704,"uogonek",371,"uparen",9392,"upblock",9600,"upperdothebrew",1476,"upsilon",965,"upsilondieresis",971,"upsilondieresistonos",944,"upsilonlatin",650,"upsilontonos",973,"uptackbelowcmb",797,"uptackmod",724,"uragurmukhi",2675,"uring",367,"ushortcyrillic",1118,"usmallhiragana",12357,"usmallkatakana",12453,"usmallkatakanahalfwidth",65385,"ustraightcyrillic",1199,"ustraightstrokecyrillic",1201,"utilde",361,"utildeacute",7801,"utildebelow",7797,"uubengali",2442,"uudeva",2314,"uugujarati",2698,"uugurmukhi",2570,"uumatragurmukhi",2626,"uuvowelsignbengali",2498,"uuvowelsigndeva",2370,"uuvowelsigngujarati",2754,"uvowelsignbengali",2497,"uvowelsigndeva",2369,"uvowelsigngujarati",2753,"v",118,"vadeva",2357,"vagujarati",2741,"vagurmukhi",2613,"vakatakana",12535,"vav",1493,"vavdagesh",64309,"vavdagesh65",64309,"vavdageshhebrew",64309,"vavhebrew",1493,"vavholam",64331,"vavholamhebrew",64331,"vavvavhebrew",1520,"vavyodhebrew",1521,"vcircle",9445,"vdotbelow",7807,"vecyrillic",1074,"veharabic",1700,"vehfinalarabic",64363,"vehinitialarabic",64364,"vehmedialarabic",64365,"vekatakana",12537,"venus",9792,"verticalbar",124,"verticallineabovecmb",781,"verticallinebelowcmb",809,"verticallinelowmod",716,"verticallinemod",712,"vewarmenian",1406,"vhook",651,"vikatakana",12536,"viramabengali",2509,"viramadeva",2381,"viramagujarati",2765,"visargabengali",2435,"visargadeva",2307,"visargagujarati",2691,"vmonospace",65366,"voarmenian",1400,"voicediterationhiragana",12446,"voicediterationkatakana",12542,"voicedmarkkana",12443,"voicedmarkkanahalfwidth",65438,"vokatakana",12538,"vparen",9393,"vtilde",7805,"vturned",652,"vuhiragana",12436,"vukatakana",12532,"w",119,"wacute",7811,"waekorean",12633,"wahiragana",12431,"wakatakana",12527,"wakatakanahalfwidth",65436,"wakorean",12632,"wasmallhiragana",12430,"wasmallkatakana",12526,"wattosquare",13143,"wavedash",12316,"wavyunderscorevertical",65076,"wawarabic",1608,"wawfinalarabic",65262,"wawhamzaabovearabic",1572,"wawhamzaabovefinalarabic",65158,"wbsquare",13277,"wcircle",9446,"wcircumflex",373,"wdieresis",7813,"wdotaccent",7815,"wdotbelow",7817,"wehiragana",12433,"weierstrass",8472,"wekatakana",12529,"wekorean",12638,"weokorean",12637,"wgrave",7809,"whitebullet",9702,"whitecircle",9675,"whitecircleinverse",9689,"whitecornerbracketleft",12302,"whitecornerbracketleftvertical",65091,"whitecornerbracketright",12303,"whitecornerbracketrightvertical",65092,"whitediamond",9671,"whitediamondcontainingblacksmalldiamond",9672,"whitedownpointingsmalltriangle",9663,"whitedownpointingtriangle",9661,"whiteleftpointingsmalltriangle",9667,"whiteleftpointingtriangle",9665,"whitelenticularbracketleft",12310,"whitelenticularbracketright",12311,"whiterightpointingsmalltriangle",9657,"whiterightpointingtriangle",9655,"whitesmallsquare",9643,"whitesmilingface",9786,"whitesquare",9633,"whitestar",9734,"whitetelephone",9743,"whitetortoiseshellbracketleft",12312,"whitetortoiseshellbracketright",12313,"whiteuppointingsmalltriangle",9653,"whiteuppointingtriangle",9651,"wihiragana",12432,"wikatakana",12528,"wikorean",12639,"wmonospace",65367,"wohiragana",12434,"wokatakana",12530,"wokatakanahalfwidth",65382,"won",8361,"wonmonospace",65510,"wowaenthai",3623,"wparen",9394,"wring",7832,"wsuperior",695,"wturned",653,"wynn",447,"x",120,"xabovecmb",829,"xbopomofo",12562,"xcircle",9447,"xdieresis",7821,"xdotaccent",7819,"xeharmenian",1389,"xi",958,"xmonospace",65368,"xparen",9395,"xsuperior",739,"y",121,"yaadosquare",13134,"yabengali",2479,"yacute",253,"yadeva",2351,"yaekorean",12626,"yagujarati",2735,"yagurmukhi",2607,"yahiragana",12420,"yakatakana",12516,"yakatakanahalfwidth",65428,"yakorean",12625,"yamakkanthai",3662,"yasmallhiragana",12419,"yasmallkatakana",12515,"yasmallkatakanahalfwidth",65388,"yatcyrillic",1123,"ycircle",9448,"ycircumflex",375,"ydieresis",255,"ydotaccent",7823,"ydotbelow",7925,"yeharabic",1610,"yehbarreearabic",1746,"yehbarreefinalarabic",64431,"yehfinalarabic",65266,"yehhamzaabovearabic",1574,"yehhamzaabovefinalarabic",65162,"yehhamzaaboveinitialarabic",65163,"yehhamzaabovemedialarabic",65164,"yehinitialarabic",65267,"yehmedialarabic",65268,"yehmeeminitialarabic",64733,"yehmeemisolatedarabic",64600,"yehnoonfinalarabic",64660,"yehthreedotsbelowarabic",1745,"yekorean",12630,"yen",165,"yenmonospace",65509,"yeokorean",12629,"yeorinhieuhkorean",12678,"yerahbenyomohebrew",1450,"yerahbenyomolefthebrew",1450,"yericyrillic",1099,"yerudieresiscyrillic",1273,"yesieungkorean",12673,"yesieungpansioskorean",12675,"yesieungsioskorean",12674,"yetivhebrew",1434,"ygrave",7923,"yhook",436,"yhookabove",7927,"yiarmenian",1397,"yicyrillic",1111,"yikorean",12642,"yinyang",9775,"yiwnarmenian",1410,"ymonospace",65369,"yod",1497,"yoddagesh",64313,"yoddageshhebrew",64313,"yodhebrew",1497,"yodyodhebrew",1522,"yodyodpatahhebrew",64287,"yohiragana",12424,"yoikorean",12681,"yokatakana",12520,"yokatakanahalfwidth",65430,"yokorean",12635,"yosmallhiragana",12423,"yosmallkatakana",12519,"yosmallkatakanahalfwidth",65390,"yotgreek",1011,"yoyaekorean",12680,"yoyakorean",12679,"yoyakthai",3618,"yoyingthai",3597,"yparen",9396,"ypogegrammeni",890,"ypogegrammenigreekcmb",837,"yr",422,"yring",7833,"ysuperior",696,"ytilde",7929,"yturned",654,"yuhiragana",12422,"yuikorean",12684,"yukatakana",12518,"yukatakanahalfwidth",65429,"yukorean",12640,"yusbigcyrillic",1131,"yusbigiotifiedcyrillic",1133,"yuslittlecyrillic",1127,"yuslittleiotifiedcyrillic",1129,"yusmallhiragana",12421,"yusmallkatakana",12517,"yusmallkatakanahalfwidth",65389,"yuyekorean",12683,"yuyeokorean",12682,"yyabengali",2527,"yyadeva",2399,"z",122,"zaarmenian",1382,"zacute",378,"zadeva",2395,"zagurmukhi",2651,"zaharabic",1592,"zahfinalarabic",65222,"zahinitialarabic",65223,"zahiragana",12374,"zahmedialarabic",65224,"zainarabic",1586,"zainfinalarabic",65200,"zakatakana",12470,"zaqefgadolhebrew",1429,"zaqefqatanhebrew",1428,"zarqahebrew",1432,"zayin",1494,"zayindagesh",64310,"zayindageshhebrew",64310,"zayinhebrew",1494,"zbopomofo",12567,"zcaron",382,"zcircle",9449,"zcircumflex",7825,"zcurl",657,"zdot",380,"zdotaccent",380,"zdotbelow",7827,"zecyrillic",1079,"zedescendercyrillic",1177,"zedieresiscyrillic",1247,"zehiragana",12380,"zekatakana",12476,"zero",48,"zeroarabic",1632,"zerobengali",2534,"zerodeva",2406,"zerogujarati",2790,"zerogurmukhi",2662,"zerohackarabic",1632,"zeroinferior",8320,"zeromonospace",65296,"zerooldstyle",63280,"zeropersian",1776,"zerosuperior",8304,"zerothai",3664,"zerowidthjoiner",65279,"zerowidthnonjoiner",8204,"zerowidthspace",8203,"zeta",950,"zhbopomofo",12563,"zhearmenian",1386,"zhebrevecyrillic",1218,"zhecyrillic",1078,"zhedescendercyrillic",1175,"zhedieresiscyrillic",1245,"zihiragana",12376,"zikatakana",12472,"zinorhebrew",1454,"zlinebelow",7829,"zmonospace",65370,"zohiragana",12382,"zokatakana",12478,"zparen",9397,"zretroflexhook",656,"zstroke",438,"zuhiragana",12378,"zukatakana",12474,".notdef",0,"angbracketleftbig",9001,"angbracketleftBig",9001,"angbracketleftbigg",9001,"angbracketleftBigg",9001,"angbracketrightBig",9002,"angbracketrightbig",9002,"angbracketrightBigg",9002,"angbracketrightbigg",9002,"arrowhookleft",8618,"arrowhookright",8617,"arrowlefttophalf",8636,"arrowleftbothalf",8637,"arrownortheast",8599,"arrownorthwest",8598,"arrowrighttophalf",8640,"arrowrightbothalf",8641,"arrowsoutheast",8600,"arrowsouthwest",8601,"backslashbig",8726,"backslashBig",8726,"backslashBigg",8726,"backslashbigg",8726,"bardbl",8214,"bracehtipdownleft",65079,"bracehtipdownright",65079,"bracehtipupleft",65080,"bracehtipupright",65080,"braceleftBig",123,"braceleftbig",123,"braceleftbigg",123,"braceleftBigg",123,"bracerightBig",125,"bracerightbig",125,"bracerightbigg",125,"bracerightBigg",125,"bracketleftbig",91,"bracketleftBig",91,"bracketleftbigg",91,"bracketleftBigg",91,"bracketrightBig",93,"bracketrightbig",93,"bracketrightbigg",93,"bracketrightBigg",93,"ceilingleftbig",8968,"ceilingleftBig",8968,"ceilingleftBigg",8968,"ceilingleftbigg",8968,"ceilingrightbig",8969,"ceilingrightBig",8969,"ceilingrightbigg",8969,"ceilingrightBigg",8969,"circledotdisplay",8857,"circledottext",8857,"circlemultiplydisplay",8855,"circlemultiplytext",8855,"circleplusdisplay",8853,"circleplustext",8853,"contintegraldisplay",8750,"contintegraltext",8750,"coproductdisplay",8720,"coproducttext",8720,"floorleftBig",8970,"floorleftbig",8970,"floorleftbigg",8970,"floorleftBigg",8970,"floorrightbig",8971,"floorrightBig",8971,"floorrightBigg",8971,"floorrightbigg",8971,"hatwide",770,"hatwider",770,"hatwidest",770,"intercal",7488,"integraldisplay",8747,"integraltext",8747,"intersectiondisplay",8898,"intersectiontext",8898,"logicalanddisplay",8743,"logicalandtext",8743,"logicalordisplay",8744,"logicalortext",8744,"parenleftBig",40,"parenleftbig",40,"parenleftBigg",40,"parenleftbigg",40,"parenrightBig",41,"parenrightbig",41,"parenrightBigg",41,"parenrightbigg",41,"prime",8242,"productdisplay",8719,"producttext",8719,"radicalbig",8730,"radicalBig",8730,"radicalBigg",8730,"radicalbigg",8730,"radicalbt",8730,"radicaltp",8730,"radicalvertex",8730,"slashbig",47,"slashBig",47,"slashBigg",47,"slashbigg",47,"summationdisplay",8721,"summationtext",8721,"tildewide",732,"tildewider",732,"tildewidest",732,"uniondisplay",8899,"unionmultidisplay",8846,"unionmultitext",8846,"unionsqdisplay",8852,"unionsqtext",8852,"uniontext",8899,"vextenddouble",8741,"vextendsingle",8739]})),o=(0,r.getArrayLookupTableFactory)((function(){return["space",32,"a1",9985,"a2",9986,"a202",9987,"a3",9988,"a4",9742,"a5",9990,"a119",9991,"a118",9992,"a117",9993,"a11",9755,"a12",9758,"a13",9996,"a14",9997,"a15",9998,"a16",9999,"a105",1e4,"a17",10001,"a18",10002,"a19",10003,"a20",10004,"a21",10005,"a22",10006,"a23",10007,"a24",10008,"a25",10009,"a26",10010,"a27",10011,"a28",10012,"a6",10013,"a7",10014,"a8",10015,"a9",10016,"a10",10017,"a29",10018,"a30",10019,"a31",10020,"a32",10021,"a33",10022,"a34",10023,"a35",9733,"a36",10025,"a37",10026,"a38",10027,"a39",10028,"a40",10029,"a41",10030,"a42",10031,"a43",10032,"a44",10033,"a45",10034,"a46",10035,"a47",10036,"a48",10037,"a49",10038,"a50",10039,"a51",10040,"a52",10041,"a53",10042,"a54",10043,"a55",10044,"a56",10045,"a57",10046,"a58",10047,"a59",10048,"a60",10049,"a61",10050,"a62",10051,"a63",10052,"a64",10053,"a65",10054,"a66",10055,"a67",10056,"a68",10057,"a69",10058,"a70",10059,"a71",9679,"a72",10061,"a73",9632,"a74",10063,"a203",10064,"a75",10065,"a204",10066,"a76",9650,"a77",9660,"a78",9670,"a79",10070,"a81",9687,"a82",10072,"a83",10073,"a84",10074,"a97",10075,"a98",10076,"a99",10077,"a100",10078,"a101",10081,"a102",10082,"a103",10083,"a104",10084,"a106",10085,"a107",10086,"a108",10087,"a112",9827,"a111",9830,"a110",9829,"a109",9824,"a120",9312,"a121",9313,"a122",9314,"a123",9315,"a124",9316,"a125",9317,"a126",9318,"a127",9319,"a128",9320,"a129",9321,"a130",10102,"a131",10103,"a132",10104,"a133",10105,"a134",10106,"a135",10107,"a136",10108,"a137",10109,"a138",10110,"a139",10111,"a140",10112,"a141",10113,"a142",10114,"a143",10115,"a144",10116,"a145",10117,"a146",10118,"a147",10119,"a148",10120,"a149",10121,"a150",10122,"a151",10123,"a152",10124,"a153",10125,"a154",10126,"a155",10127,"a156",10128,"a157",10129,"a158",10130,"a159",10131,"a160",10132,"a161",8594,"a163",8596,"a164",8597,"a196",10136,"a165",10137,"a192",10138,"a166",10139,"a167",10140,"a168",10141,"a169",10142,"a170",10143,"a171",10144,"a172",10145,"a173",10146,"a162",10147,"a174",10148,"a175",10149,"a176",10150,"a177",10151,"a178",10152,"a179",10153,"a193",10154,"a180",10155,"a199",10156,"a181",10157,"a200",10158,"a182",10159,"a201",10161,"a183",10162,"a184",10163,"a197",10164,"a185",10165,"a194",10166,"a198",10167,"a186",10168,"a195",10169,"a187",10170,"a188",10171,"a189",10172,"a190",10173,"a191",10174,"a89",10088,"a90",10089,"a93",10090,"a94",10091,"a91",10092,"a92",10093,"a205",10094,"a85",10095,"a206",10096,"a86",10097,"a87",10098,"a88",10099,"a95",10100,"a96",10101,".notdef",0]}))},(t,e,i)=>{i.r(e),i.d(e,{clearUnicodeCaches:()=>f,getCharUnicodeCategory:()=>d,getNormalizedUnicodes:()=>c,getUnicodeForGlyph:()=>s,getUnicodeRangeFor:()=>l,mapSpecialUnicodeValues:()=>o,reverseIfRtl:()=>h});var r=i(8);const n=(0,r.getLookupTableFactory)((function(t){t[63721]=169,t[63193]=169,t[63720]=174,t[63194]=174,t[63722]=8482,t[63195]=8482,t[63729]=9127,t[63730]=9128,t[63731]=9129,t[63740]=9131,t[63741]=9132,t[63742]=9133,t[63726]=9121,t[63727]=9122,t[63728]=9123,t[63737]=9124,t[63738]=9125,t[63739]=9126,t[63723]=9115,t[63724]=9116,t[63725]=9117,t[63734]=9118,t[63735]=9119,t[63736]=9120}));function o(t){return t>=65520&&t<=65535?0:t>=62976&&t<=63743?n()[t]||t:173===t?45:t}function s(t,e){let i=e[t];if(void 0!==i)return i;if(!t)return-1;if("u"===t[0]){const e=t.length;let r;if(7===e&&"n"===t[1]&&"i"===t[2])r=t.substring(3);else{if(!(e>=5&&e<=7))return-1;r=t.substring(1)}if(r===r.toUpperCase()&&(i=parseInt(r,16),i>=0))return i}return-1}const a=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function l(t){for(let e=0,i=a.length;e<i;e++){const i=a[e];if(t>=i.begin&&t<i.end)return e}return-1}const c=(0,r.getArrayLookupTableFactory)((function(){return["¨"," ̈","¯"," ̄","´"," ́","µ","μ","¸"," ̧","Ĳ","IJ","ĳ","ij","Ŀ","L·","ŀ","l·","ŉ","ʼn","ſ","s","Ǆ","DŽ","ǅ","Dž","ǆ","dž","Ǉ","LJ","ǈ","Lj","ǉ","lj","Ǌ","NJ","ǋ","Nj","ǌ","nj","Ǳ","DZ","ǲ","Dz","ǳ","dz","˘"," ̆","˙"," ̇","˚"," ̊","˛"," ̨","˜"," ̃","˝"," ̋","ͺ"," ͅ","΄"," ́","ϐ","β","ϑ","θ","ϒ","Υ","ϕ","φ","ϖ","π","ϰ","κ","ϱ","ρ","ϲ","ς","ϴ","Θ","ϵ","ε","Ϲ","Σ","և","եւ","ٵ","اٴ","ٶ","وٴ","ٷ","ۇٴ","ٸ","يٴ","ำ","ํา","ຳ","ໍາ","ໜ","ຫນ","ໝ","ຫມ","ཷ","ྲཱྀ","ཹ","ླཱྀ","ẚ","aʾ","᾽"," ̓","᾿"," ̓","῀"," ͂","῾"," ̔"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","‗"," ̳","․",".","‥","..","…","...","″","′′","‴","′′′","‶","‵‵","‷","‵‵‵","‼","!!","‾"," ̅","⁇","??","⁈","?!","⁉","!?","⁗","′′′′"," "," ","₨","Rs","℀","a/c","℁","a/s","℃","°C","℅","c/o","℆","c/u","ℇ","Ɛ","℉","°F","№","No","℡","TEL","ℵ","א","ℶ","ב","ℷ","ג","ℸ","ד","℻","FAX","Ⅰ","I","Ⅱ","II","Ⅲ","III","Ⅳ","IV","Ⅴ","V","Ⅵ","VI","Ⅶ","VII","Ⅷ","VIII","Ⅸ","IX","Ⅹ","X","Ⅺ","XI","Ⅻ","XII","Ⅼ","L","Ⅽ","C","Ⅾ","D","Ⅿ","M","ⅰ","i","ⅱ","ii","ⅲ","iii","ⅳ","iv","ⅴ","v","ⅵ","vi","ⅶ","vii","ⅷ","viii","ⅸ","ix","ⅹ","x","ⅺ","xi","ⅻ","xii","ⅼ","l","ⅽ","c","ⅾ","d","ⅿ","m","∬","∫∫","∭","∫∫∫","∯","∮∮","∰","∮∮∮","⑴","(1)","⑵","(2)","⑶","(3)","⑷","(4)","⑸","(5)","⑹","(6)","⑺","(7)","⑻","(8)","⑼","(9)","⑽","(10)","⑾","(11)","⑿","(12)","⒀","(13)","⒁","(14)","⒂","(15)","⒃","(16)","⒄","(17)","⒅","(18)","⒆","(19)","⒇","(20)","⒈","1.","⒉","2.","⒊","3.","⒋","4.","⒌","5.","⒍","6.","⒎","7.","⒏","8.","⒐","9.","⒑","10.","⒒","11.","⒓","12.","⒔","13.","⒕","14.","⒖","15.","⒗","16.","⒘","17.","⒙","18.","⒚","19.","⒛","20.","⒜","(a)","⒝","(b)","⒞","(c)","⒟","(d)","⒠","(e)","⒡","(f)","⒢","(g)","⒣","(h)","⒤","(i)","⒥","(j)","⒦","(k)","⒧","(l)","⒨","(m)","⒩","(n)","⒪","(o)","⒫","(p)","⒬","(q)","⒭","(r)","⒮","(s)","⒯","(t)","⒰","(u)","⒱","(v)","⒲","(w)","⒳","(x)","⒴","(y)","⒵","(z)","⨌","∫∫∫∫","⩴","::=","⩵","==","⩶","===","⺟","母","⻳","龟","⼀","一","⼁","丨","⼂","丶","⼃","丿","⼄","乙","⼅","亅","⼆","二","⼇","亠","⼈","人","⼉","儿","⼊","入","⼋","八","⼌","冂","⼍","冖","⼎","冫","⼏","几","⼐","凵","⼑","刀","⼒","力","⼓","勹","⼔","匕","⼕","匚","⼖","匸","⼗","十","⼘","卜","⼙","卩","⼚","厂","⼛","厶","⼜","又","⼝","口","⼞","囗","⼟","土","⼠","士","⼡","夂","⼢","夊","⼣","夕","⼤","大","⼥","女","⼦","子","⼧","宀","⼨","寸","⼩","小","⼪","尢","⼫","尸","⼬","屮","⼭","山","⼮","巛","⼯","工","⼰","己","⼱","巾","⼲","干","⼳","幺","⼴","广","⼵","廴","⼶","廾","⼷","弋","⼸","弓","⼹","彐","⼺","彡","⼻","彳","⼼","心","⼽","戈","⼾","戶","⼿","手","⽀","支","⽁","攴","⽂","文","⽃","斗","⽄","斤","⽅","方","⽆","无","⽇","日","⽈","曰","⽉","月","⽊","木","⽋","欠","⽌","止","⽍","歹","⽎","殳","⽏","毋","⽐","比","⽑","毛","⽒","氏","⽓","气","⽔","水","⽕","火","⽖","爪","⽗","父","⽘","爻","⽙","爿","⽚","片","⽛","牙","⽜","牛","⽝","犬","⽞","玄","⽟","玉","⽠","瓜","⽡","瓦","⽢","甘","⽣","生","⽤","用","⽥","田","⽦","疋","⽧","疒","⽨","癶","⽩","白","⽪","皮","⽫","皿","⽬","目","⽭","矛","⽮","矢","⽯","石","⽰","示","⽱","禸","⽲","禾","⽳","穴","⽴","立","⽵","竹","⽶","米","⽷","糸","⽸","缶","⽹","网","⽺","羊","⽻","羽","⽼","老","⽽","而","⽾","耒","⽿","耳","⾀","聿","⾁","肉","⾂","臣","⾃","自","⾄","至","⾅","臼","⾆","舌","⾇","舛","⾈","舟","⾉","艮","⾊","色","⾋","艸","⾌","虍","⾍","虫","⾎","血","⾏","行","⾐","衣","⾑","襾","⾒","見","⾓","角","⾔","言","⾕","谷","⾖","豆","⾗","豕","⾘","豸","⾙","貝","⾚","赤","⾛","走","⾜","足","⾝","身","⾞","車","⾟","辛","⾠","辰","⾡","辵","⾢","邑","⾣","酉","⾤","釆","⾥","里","⾦","金","⾧","長","⾨","門","⾩","阜","⾪","隶","⾫","隹","⾬","雨","⾭","靑","⾮","非","⾯","面","⾰","革","⾱","韋","⾲","韭","⾳","音","⾴","頁","⾵","風","⾶","飛","⾷","食","⾸","首","⾹","香","⾺","馬","⾻","骨","⾼","高","⾽","髟","⾾","鬥","⾿","鬯","⿀","鬲","⿁","鬼","⿂","魚","⿃","鳥","⿄","鹵","⿅","鹿","⿆","麥","⿇","麻","⿈","黃","⿉","黍","⿊","黑","⿋","黹","⿌","黽","⿍","鼎","⿎","鼓","⿏","鼠","⿐","鼻","⿑","齊","⿒","齒","⿓","龍","⿔","龜","⿕","龠","〶","〒","〸","十","〹","卄","〺","卅","゛"," ゙","゜"," ゚","ㄱ","ᄀ","ㄲ","ᄁ","ㄳ","ᆪ","ㄴ","ᄂ","ㄵ","ᆬ","ㄶ","ᆭ","ㄷ","ᄃ","ㄸ","ᄄ","ㄹ","ᄅ","ㄺ","ᆰ","ㄻ","ᆱ","ㄼ","ᆲ","ㄽ","ᆳ","ㄾ","ᆴ","ㄿ","ᆵ","ㅀ","ᄚ","ㅁ","ᄆ","ㅂ","ᄇ","ㅃ","ᄈ","ㅄ","ᄡ","ㅅ","ᄉ","ㅆ","ᄊ","ㅇ","ᄋ","ㅈ","ᄌ","ㅉ","ᄍ","ㅊ","ᄎ","ㅋ","ᄏ","ㅌ","ᄐ","ㅍ","ᄑ","ㅎ","ᄒ","ㅏ","ᅡ","ㅐ","ᅢ","ㅑ","ᅣ","ㅒ","ᅤ","ㅓ","ᅥ","ㅔ","ᅦ","ㅕ","ᅧ","ㅖ","ᅨ","ㅗ","ᅩ","ㅘ","ᅪ","ㅙ","ᅫ","ㅚ","ᅬ","ㅛ","ᅭ","ㅜ","ᅮ","ㅝ","ᅯ","ㅞ","ᅰ","ㅟ","ᅱ","ㅠ","ᅲ","ㅡ","ᅳ","ㅢ","ᅴ","ㅣ","ᅵ","ㅤ","ᅠ","ㅥ","ᄔ","ㅦ","ᄕ","ㅧ","ᇇ","ㅨ","ᇈ","ㅩ","ᇌ","ㅪ","ᇎ","ㅫ","ᇓ","ㅬ","ᇗ","ㅭ","ᇙ","ㅮ","ᄜ","ㅯ","ᇝ","ㅰ","ᇟ","ㅱ","ᄝ","ㅲ","ᄞ","ㅳ","ᄠ","ㅴ","ᄢ","ㅵ","ᄣ","ㅶ","ᄧ","ㅷ","ᄩ","ㅸ","ᄫ","ㅹ","ᄬ","ㅺ","ᄭ","ㅻ","ᄮ","ㅼ","ᄯ","ㅽ","ᄲ","ㅾ","ᄶ","ㅿ","ᅀ","ㆀ","ᅇ","ㆁ","ᅌ","ㆂ","ᇱ","ㆃ","ᇲ","ㆄ","ᅗ","ㆅ","ᅘ","ㆆ","ᅙ","ㆇ","ᆄ","ㆈ","ᆅ","ㆉ","ᆈ","ㆊ","ᆑ","ㆋ","ᆒ","ㆌ","ᆔ","ㆍ","ᆞ","ㆎ","ᆡ","㈀","(ᄀ)","㈁","(ᄂ)","㈂","(ᄃ)","㈃","(ᄅ)","㈄","(ᄆ)","㈅","(ᄇ)","㈆","(ᄉ)","㈇","(ᄋ)","㈈","(ᄌ)","㈉","(ᄎ)","㈊","(ᄏ)","㈋","(ᄐ)","㈌","(ᄑ)","㈍","(ᄒ)","㈎","(가)","㈏","(나)","㈐","(다)","㈑","(라)","㈒","(마)","㈓","(바)","㈔","(사)","㈕","(아)","㈖","(자)","㈗","(차)","㈘","(카)","㈙","(타)","㈚","(파)","㈛","(하)","㈜","(주)","㈝","(오전)","㈞","(오후)","㈠","(一)","㈡","(二)","㈢","(三)","㈣","(四)","㈤","(五)","㈥","(六)","㈦","(七)","㈧","(八)","㈨","(九)","㈩","(十)","㈪","(月)","㈫","(火)","㈬","(水)","㈭","(木)","㈮","(金)","㈯","(土)","㈰","(日)","㈱","(株)","㈲","(有)","㈳","(社)","㈴","(名)","㈵","(特)","㈶","(財)","㈷","(祝)","㈸","(労)","㈹","(代)","㈺","(呼)","㈻","(学)","㈼","(監)","㈽","(企)","㈾","(資)","㈿","(協)","㉀","(祭)","㉁","(休)","㉂","(自)","㉃","(至)","㋀","1月","㋁","2月","㋂","3月","㋃","4月","㋄","5月","㋅","6月","㋆","7月","㋇","8月","㋈","9月","㋉","10月","㋊","11月","㋋","12月","㍘","0点","㍙","1点","㍚","2点","㍛","3点","㍜","4点","㍝","5点","㍞","6点","㍟","7点","㍠","8点","㍡","9点","㍢","10点","㍣","11点","㍤","12点","㍥","13点","㍦","14点","㍧","15点","㍨","16点","㍩","17点","㍪","18点","㍫","19点","㍬","20点","㍭","21点","㍮","22点","㍯","23点","㍰","24点","㏠","1日","㏡","2日","㏢","3日","㏣","4日","㏤","5日","㏥","6日","㏦","7日","㏧","8日","㏨","9日","㏩","10日","㏪","11日","㏫","12日","㏬","13日","㏭","14日","㏮","15日","㏯","16日","㏰","17日","㏱","18日","㏲","19日","㏳","20日","㏴","21日","㏵","22日","㏶","23日","㏷","24日","㏸","25日","㏹","26日","㏺","27日","㏻","28日","㏼","29日","㏽","30日","㏾","31日","ﬀ","ff","ﬁ","fi","ﬂ","fl","ﬃ","ffi","ﬄ","ffl","ﬅ","ſt","ﬆ","st","ﬓ","մն","ﬔ","մե","ﬕ","մի","ﬖ","վն","ﬗ","մխ","ﭏ","אל","ﭐ","ٱ","ﭑ","ٱ","ﭒ","ٻ","ﭓ","ٻ","ﭔ","ٻ","ﭕ","ٻ","ﭖ","پ","ﭗ","پ","ﭘ","پ","ﭙ","پ","ﭚ","ڀ","ﭛ","ڀ","ﭜ","ڀ","ﭝ","ڀ","ﭞ","ٺ","ﭟ","ٺ","ﭠ","ٺ","ﭡ","ٺ","ﭢ","ٿ","ﭣ","ٿ","ﭤ","ٿ","ﭥ","ٿ","ﭦ","ٹ","ﭧ","ٹ","ﭨ","ٹ","ﭩ","ٹ","ﭪ","ڤ","ﭫ","ڤ","ﭬ","ڤ","ﭭ","ڤ","ﭮ","ڦ","ﭯ","ڦ","ﭰ","ڦ","ﭱ","ڦ","ﭲ","ڄ","ﭳ","ڄ","ﭴ","ڄ","ﭵ","ڄ","ﭶ","ڃ","ﭷ","ڃ","ﭸ","ڃ","ﭹ","ڃ","ﭺ","چ","ﭻ","چ","ﭼ","چ","ﭽ","چ","ﭾ","ڇ","ﭿ","ڇ","ﮀ","ڇ","ﮁ","ڇ","ﮂ","ڍ","ﮃ","ڍ","ﮄ","ڌ","ﮅ","ڌ","ﮆ","ڎ","ﮇ","ڎ","ﮈ","ڈ","ﮉ","ڈ","ﮊ","ژ","ﮋ","ژ","ﮌ","ڑ","ﮍ","ڑ","ﮎ","ک","ﮏ","ک","ﮐ","ک","ﮑ","ک","ﮒ","گ","ﮓ","گ","ﮔ","گ","ﮕ","گ","ﮖ","ڳ","ﮗ","ڳ","ﮘ","ڳ","ﮙ","ڳ","ﮚ","ڱ","ﮛ","ڱ","ﮜ","ڱ","ﮝ","ڱ","ﮞ","ں","ﮟ","ں","ﮠ","ڻ","ﮡ","ڻ","ﮢ","ڻ","ﮣ","ڻ","ﮤ","ۀ","ﮥ","ۀ","ﮦ","ہ","ﮧ","ہ","ﮨ","ہ","ﮩ","ہ","ﮪ","ھ","ﮫ","ھ","ﮬ","ھ","ﮭ","ھ","ﮮ","ے","ﮯ","ے","ﮰ","ۓ","ﮱ","ۓ","ﯓ","ڭ","ﯔ","ڭ","ﯕ","ڭ","ﯖ","ڭ","ﯗ","ۇ","ﯘ","ۇ","ﯙ","ۆ","ﯚ","ۆ","ﯛ","ۈ","ﯜ","ۈ","ﯝ","ٷ","ﯞ","ۋ","ﯟ","ۋ","ﯠ","ۅ","ﯡ","ۅ","ﯢ","ۉ","ﯣ","ۉ","ﯤ","ې","ﯥ","ې","ﯦ","ې","ﯧ","ې","ﯨ","ى","ﯩ","ى","ﯪ","ئا","ﯫ","ئا","ﯬ","ئە","ﯭ","ئە","ﯮ","ئو","ﯯ","ئو","ﯰ","ئۇ","ﯱ","ئۇ","ﯲ","ئۆ","ﯳ","ئۆ","ﯴ","ئۈ","ﯵ","ئۈ","ﯶ","ئې","ﯷ","ئې","ﯸ","ئې","ﯹ","ئى","ﯺ","ئى","ﯻ","ئى","ﯼ","ی","ﯽ","ی","ﯾ","ی","ﯿ","ی","ﰀ","ئج","ﰁ","ئح","ﰂ","ئم","ﰃ","ئى","ﰄ","ئي","ﰅ","بج","ﰆ","بح","ﰇ","بخ","ﰈ","بم","ﰉ","بى","ﰊ","بي","ﰋ","تج","ﰌ","تح","ﰍ","تخ","ﰎ","تم","ﰏ","تى","ﰐ","تي","ﰑ","ثج","ﰒ","ثم","ﰓ","ثى","ﰔ","ثي","ﰕ","جح","ﰖ","جم","ﰗ","حج","ﰘ","حم","ﰙ","خج","ﰚ","خح","ﰛ","خم","ﰜ","سج","ﰝ","سح","ﰞ","سخ","ﰟ","سم","ﰠ","صح","ﰡ","صم","ﰢ","ضج","ﰣ","ضح","ﰤ","ضخ","ﰥ","ضم","ﰦ","طح","ﰧ","طم","ﰨ","ظم","ﰩ","عج","ﰪ","عم","ﰫ","غج","ﰬ","غم","ﰭ","فج","ﰮ","فح","ﰯ","فخ","ﰰ","فم","ﰱ","فى","ﰲ","في","ﰳ","قح","ﰴ","قم","ﰵ","قى","ﰶ","قي","ﰷ","كا","ﰸ","كج","ﰹ","كح","ﰺ","كخ","ﰻ","كل","ﰼ","كم","ﰽ","كى","ﰾ","كي","ﰿ","لج","ﱀ","لح","ﱁ","لخ","ﱂ","لم","ﱃ","لى","ﱄ","لي","ﱅ","مج","ﱆ","مح","ﱇ","مخ","ﱈ","مم","ﱉ","مى","ﱊ","مي","ﱋ","نج","ﱌ","نح","ﱍ","نخ","ﱎ","نم","ﱏ","نى","ﱐ","ني","ﱑ","هج","ﱒ","هم","ﱓ","هى","ﱔ","هي","ﱕ","يج","ﱖ","يح","ﱗ","يخ","ﱘ","يم","ﱙ","يى","ﱚ","يي","ﱛ","ذٰ","ﱜ","رٰ","ﱝ","ىٰ","ﱞ"," ٌّ","ﱟ"," ٍّ","ﱠ"," َّ","ﱡ"," ُّ","ﱢ"," ِّ","ﱣ"," ّٰ","ﱤ","ئر","ﱥ","ئز","ﱦ","ئم","ﱧ","ئن","ﱨ","ئى","ﱩ","ئي","ﱪ","بر","ﱫ","بز","ﱬ","بم","ﱭ","بن","ﱮ","بى","ﱯ","بي","ﱰ","تر","ﱱ","تز","ﱲ","تم","ﱳ","تن","ﱴ","تى","ﱵ","تي","ﱶ","ثر","ﱷ","ثز","ﱸ","ثم","ﱹ","ثن","ﱺ","ثى","ﱻ","ثي","ﱼ","فى","ﱽ","في","ﱾ","قى","ﱿ","قي","ﲀ","كا","ﲁ","كل","ﲂ","كم","ﲃ","كى","ﲄ","كي","ﲅ","لم","ﲆ","لى","ﲇ","لي","ﲈ","ما","ﲉ","مم","ﲊ","نر","ﲋ","نز","ﲌ","نم","ﲍ","نن","ﲎ","نى","ﲏ","ني","ﲐ","ىٰ","ﲑ","ير","ﲒ","يز","ﲓ","يم","ﲔ","ين","ﲕ","يى","ﲖ","يي","ﲗ","ئج","ﲘ","ئح","ﲙ","ئخ","ﲚ","ئم","ﲛ","ئه","ﲜ","بج","ﲝ","بح","ﲞ","بخ","ﲟ","بم","ﲠ","به","ﲡ","تج","ﲢ","تح","ﲣ","تخ","ﲤ","تم","ﲥ","ته","ﲦ","ثم","ﲧ","جح","ﲨ","جم","ﲩ","حج","ﲪ","حم","ﲫ","خج","ﲬ","خم","ﲭ","سج","ﲮ","سح","ﲯ","سخ","ﲰ","سم","ﲱ","صح","ﲲ","صخ","ﲳ","صم","ﲴ","ضج","ﲵ","ضح","ﲶ","ضخ","ﲷ","ضم","ﲸ","طح","ﲹ","ظم","ﲺ","عج","ﲻ","عم","ﲼ","غج","ﲽ","غم","ﲾ","فج","ﲿ","فح","ﳀ","فخ","ﳁ","فم","ﳂ","قح","ﳃ","قم","ﳄ","كج","ﳅ","كح","ﳆ","كخ","ﳇ","كل","ﳈ","كم","ﳉ","لج","ﳊ","لح","ﳋ","لخ","ﳌ","لم","ﳍ","له","ﳎ","مج","ﳏ","مح","ﳐ","مخ","ﳑ","مم","ﳒ","نج","ﳓ","نح","ﳔ","نخ","ﳕ","نم","ﳖ","نه","ﳗ","هج","ﳘ","هم","ﳙ","هٰ","ﳚ","يج","ﳛ","يح","ﳜ","يخ","ﳝ","يم","ﳞ","يه","ﳟ","ئم","ﳠ","ئه","ﳡ","بم","ﳢ","به","ﳣ","تم","ﳤ","ته","ﳥ","ثم","ﳦ","ثه","ﳧ","سم","ﳨ","سه","ﳩ","شم","ﳪ","شه","ﳫ","كل","ﳬ","كم","ﳭ","لم","ﳮ","نم","ﳯ","نه","ﳰ","يم","ﳱ","يه","ﳲ","ـَّ","ﳳ","ـُّ","ﳴ","ـِّ","ﳵ","طى","ﳶ","طي","ﳷ","عى","ﳸ","عي","ﳹ","غى","ﳺ","غي","ﳻ","سى","ﳼ","سي","ﳽ","شى","ﳾ","شي","ﳿ","حى","ﴀ","حي","ﴁ","جى","ﴂ","جي","ﴃ","خى","ﴄ","خي","ﴅ","صى","ﴆ","صي","ﴇ","ضى","ﴈ","ضي","ﴉ","شج","ﴊ","شح","ﴋ","شخ","ﴌ","شم","ﴍ","شر","ﴎ","سر","ﴏ","صر","ﴐ","ضر","ﴑ","طى","ﴒ","طي","ﴓ","عى","ﴔ","عي","ﴕ","غى","ﴖ","غي","ﴗ","سى","ﴘ","سي","ﴙ","شى","ﴚ","شي","ﴛ","حى","ﴜ","حي","ﴝ","جى","ﴞ","جي","ﴟ","خى","ﴠ","خي","ﴡ","صى","ﴢ","صي","ﴣ","ضى","ﴤ","ضي","ﴥ","شج","ﴦ","شح","ﴧ","شخ","ﴨ","شم","ﴩ","شر","ﴪ","سر","ﴫ","صر","ﴬ","ضر","ﴭ","شج","ﴮ","شح","ﴯ","شخ","ﴰ","شم","ﴱ","سه","ﴲ","شه","ﴳ","طم","ﴴ","سج","ﴵ","سح","ﴶ","سخ","ﴷ","شج","ﴸ","شح","ﴹ","شخ","ﴺ","طم","ﴻ","ظم","ﴼ","اً","ﴽ","اً","ﵐ","تجم","ﵑ","تحج","ﵒ","تحج","ﵓ","تحم","ﵔ","تخم","ﵕ","تمج","ﵖ","تمح","ﵗ","تمخ","ﵘ","جمح","ﵙ","جمح","ﵚ","حمي","ﵛ","حمى","ﵜ","سحج","ﵝ","سجح","ﵞ","سجى","ﵟ","سمح","ﵠ","سمح","ﵡ","سمج","ﵢ","سمم","ﵣ","سمم","ﵤ","صحح","ﵥ","صحح","ﵦ","صمم","ﵧ","شحم","ﵨ","شحم","ﵩ","شجي","ﵪ","شمخ","ﵫ","شمخ","ﵬ","شمم","ﵭ","شمم","ﵮ","ضحى","ﵯ","ضخم","ﵰ","ضخم","ﵱ","طمح","ﵲ","طمح","ﵳ","طمم","ﵴ","طمي","ﵵ","عجم","ﵶ","عمم","ﵷ","عمم","ﵸ","عمى","ﵹ","غمم","ﵺ","غمي","ﵻ","غمى","ﵼ","فخم","ﵽ","فخم","ﵾ","قمح","ﵿ","قمم","ﶀ","لحم","ﶁ","لحي","ﶂ","لحى","ﶃ","لجج","ﶄ","لجج","ﶅ","لخم","ﶆ","لخم","ﶇ","لمح","ﶈ","لمح","ﶉ","محج","ﶊ","محم","ﶋ","محي","ﶌ","مجح","ﶍ","مجم","ﶎ","مخج","ﶏ","مخم","ﶒ","مجخ","ﶓ","همج","ﶔ","همم","ﶕ","نحم","ﶖ","نحى","ﶗ","نجم","ﶘ","نجم","ﶙ","نجى","ﶚ","نمي","ﶛ","نمى","ﶜ","يمم","ﶝ","يمم","ﶞ","بخي","ﶟ","تجي","ﶠ","تجى","ﶡ","تخي","ﶢ","تخى","ﶣ","تمي","ﶤ","تمى","ﶥ","جمي","ﶦ","جحى","ﶧ","جمى","ﶨ","سخى","ﶩ","صحي","ﶪ","شحي","ﶫ","ضحي","ﶬ","لجي","ﶭ","لمي","ﶮ","يحي","ﶯ","يجي","ﶰ","يمي","ﶱ","ممي","ﶲ","قمي","ﶳ","نحي","ﶴ","قمح","ﶵ","لحم","ﶶ","عمي","ﶷ","كمي","ﶸ","نجح","ﶹ","مخي","ﶺ","لجم","ﶻ","كمم","ﶼ","لجم","ﶽ","نجح","ﶾ","جحي","ﶿ","حجي","ﷀ","مجي","ﷁ","فمي","ﷂ","بحي","ﷃ","كمم","ﷄ","عجم","ﷅ","صمم","ﷆ","سخي","ﷇ","نجي","﹉","‾","﹊","‾","﹋","‾","﹌","‾","﹍","_","﹎","_","﹏","_","ﺀ","ء","ﺁ","آ","ﺂ","آ","ﺃ","أ","ﺄ","أ","ﺅ","ؤ","ﺆ","ؤ","ﺇ","إ","ﺈ","إ","ﺉ","ئ","ﺊ","ئ","ﺋ","ئ","ﺌ","ئ","ﺍ","ا","ﺎ","ا","ﺏ","ب","ﺐ","ب","ﺑ","ب","ﺒ","ب","ﺓ","ة","ﺔ","ة","ﺕ","ت","ﺖ","ت","ﺗ","ت","ﺘ","ت","ﺙ","ث","ﺚ","ث","ﺛ","ث","ﺜ","ث","ﺝ","ج","ﺞ","ج","ﺟ","ج","ﺠ","ج","ﺡ","ح","ﺢ","ح","ﺣ","ح","ﺤ","ح","ﺥ","خ","ﺦ","خ","ﺧ","خ","ﺨ","خ","ﺩ","د","ﺪ","د","ﺫ","ذ","ﺬ","ذ","ﺭ","ر","ﺮ","ر","ﺯ","ز","ﺰ","ز","ﺱ","س","ﺲ","س","ﺳ","س","ﺴ","س","ﺵ","ش","ﺶ","ش","ﺷ","ش","ﺸ","ش","ﺹ","ص","ﺺ","ص","ﺻ","ص","ﺼ","ص","ﺽ","ض","ﺾ","ض","ﺿ","ض","ﻀ","ض","ﻁ","ط","ﻂ","ط","ﻃ","ط","ﻄ","ط","ﻅ","ظ","ﻆ","ظ","ﻇ","ظ","ﻈ","ظ","ﻉ","ع","ﻊ","ع","ﻋ","ع","ﻌ","ع","ﻍ","غ","ﻎ","غ","ﻏ","غ","ﻐ","غ","ﻑ","ف","ﻒ","ف","ﻓ","ف","ﻔ","ف","ﻕ","ق","ﻖ","ق","ﻗ","ق","ﻘ","ق","ﻙ","ك","ﻚ","ك","ﻛ","ك","ﻜ","ك","ﻝ","ل","ﻞ","ل","ﻟ","ل","ﻠ","ل","ﻡ","م","ﻢ","م","ﻣ","م","ﻤ","م","ﻥ","ن","ﻦ","ن","ﻧ","ن","ﻨ","ن","ﻩ","ه","ﻪ","ه","ﻫ","ه","ﻬ","ه","ﻭ","و","ﻮ","و","ﻯ","ى","ﻰ","ى","ﻱ","ي","ﻲ","ي","ﻳ","ي","ﻴ","ي","ﻵ","لآ","ﻶ","لآ","ﻷ","لأ","ﻸ","لأ","ﻹ","لإ","ﻺ","لإ","ﻻ","لا","ﻼ","لا"]}));function h(t){const e=t.length;if(e<=1||!function(t){let e=a[13];return t>=e.begin&&t<e.end||(e=a[11],t>=e.begin&&t<e.end)}(t.charCodeAt(0)))return t;const i=[];for(let r=e-1;r>=0;r--)i.push(t[r]);return i.join("")}const u=new RegExp("^(\\s)|(\\p{Mn})|(\\p{Cf})$","u"),p=new Map;function d(t){const e=p.get(t);if(e)return e;const i=t.match(u),r={isWhitespace:!(!i||!i[1]),isZeroWidthDiacritic:!(!i||!i[2]),isInvisibleFormatMark:!(!i||!i[3])};return p.set(t,r),r}function f(){p.clear()}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MarkupAnnotation=e.AnnotationFactory=e.AnnotationBorderStyle=e.Annotation=void 0,e.getQuadPoints=b;var r=i(2),n=i(8),o=i(23),s=i(5),a=i(9),l=i(60),c=i(65),h=i(24),u=i(68),p=i(72),d=i(62),f=i(10),g=i(73),m=i(76);const y=1.35;function v(t,e=new Uint8ClampedArray(3)){if(!Array.isArray(t))return e;const i=e||new Uint8ClampedArray(3);switch(t.length){case 0:return null;case 1:return h.ColorSpace.singletons.gray.getRgbItem(t,0,i,0),i;case 3:return h.ColorSpace.singletons.rgb.getRgbItem(t,0,i,0),i;case 4:return h.ColorSpace.singletons.cmyk.getRgbItem(t,0,i,0),i;default:return e}}function b(t,e){if(!t.has("QuadPoints"))return null;const i=t.getArray("QuadPoints");if(!Array.isArray(i)||0===i.length||i.length%8>0)return null;const r=[];for(let t=0,n=i.length/8;t<n;t++){r.push([]);for(let n=8*t,o=8*t+8;n<o;n+=2){const o=i[n],s=i[n+1];if(null!==e&&(o<e[0]||o>e[2]||s<e[1]||s>e[3]))return null;r[t].push({x:o,y:s})}}return r.map((t=>{const[e,i,r,n]=t.reduce((([t,e,i,r],n)=>[Math.min(t,n.x),Math.max(e,n.x),Math.min(i,n.y),Math.max(r,n.y)]),[Number.MAX_VALUE,Number.MIN_VALUE,Number.MAX_VALUE,Number.MIN_VALUE]);return[{x:e,y:n},{x:i,y:n},{x:e,y:r},{x:i,y:r}]}))}function w(t,e,i){const[n,o,s,a]=r.Util.getAxialAlignedBoundingBox(e,i);if(n===s||o===a)return[1,0,0,1,t[0],t[1]];const l=(t[2]-t[0])/(s-n),c=(t[3]-t[1])/(a-o);return[l,0,0,c,t[0]-n*l,t[1]-o*c]}e.AnnotationFactory=class{static create(t,e,i,r,n){return Promise.all([i.ensureCatalog("acroForm"),i.ensureCatalog("baseUrl"),i.ensureDoc("xfaDatasets"),n?this._getPageIndex(t,e,i):-1]).then((([o,s,a,l])=>i.ensure(this,"_create",[t,e,i,r,o,a,n,l])))}static _create(t,e,i,o,a,l,c,h=-1){const u=t.fetchIfRef(e);if(!(u instanceof s.Dict))return;const p=e instanceof s.Ref?e.toString():`annot_${o.createObjId()}`;let d=u.get("Subtype");d=d instanceof s.Name?d.name:null;const f={xref:t,ref:e,dict:u,subtype:d,id:p,pdfManager:i,acroForm:a instanceof s.Dict?a:s.Dict.empty,xfaDatasets:l,collectFields:c,pageIndex:h};switch(d){case"Link":return new M(f);case"Text":return new E(f);case"Widget":let t=(0,n.getInheritableProperty)({dict:u,key:"FT"});switch(t=t instanceof s.Name?t.name:null,t){case"Tx":return new A(f);case"Btn":return new _(f);case"Ch":return new T(f);case"Sig":return new O(f)}return(0,r.warn)(`Unimplemented widget field type "${t}", falling back to base field type.`),new C(f);case"Popup":return new P(f);case"FreeText":return new I(f);case"Line":return new D(f);case"Square":return new F(f);case"Circle":return new R(f);case"PolyLine":return new L(f);case"Polygon":return new N(f);case"Caret":return new B(f);case"Ink":return new j(f);case"Highlight":return new z(f);case"Underline":return new U(f);case"Squiggly":return new $(f);case"StrikeOut":return new H(f);case"Stamp":return new V(f);case"FileAttachment":return new q(f);default:return c||(d?(0,r.warn)(`Unimplemented annotation type "${d}", falling back to base annotation.`):(0,r.warn)("Annotation is missing the required /Subtype.")),new x(f)}}static async _getPageIndex(t,e,i){try{const r=await t.fetchIfRefAsync(e);if(!(r instanceof s.Dict))return-1;const n=r.getRaw("P");return n instanceof s.Ref?await i.ensureCatalog("getPageIndex",[n]):-1}catch(t){return(0,r.warn)(`_getPageIndex: "${t}".`),-1}}};class x{constructor(t){const e=t.dict;if(this.setTitle(e.get("T")),this.setContents(e.get("Contents")),this.setModificationDate(e.get("M")),this.setFlags(e.get("F")),this.setRectangle(e.getArray("Rect")),this.setColor(e.getArray("C")),this.setBorderStyle(e),this.setAppearance(e),this.setBorderAndBackgroundColors(e.get("MK")),this._streams=[],this.appearance&&this._streams.push(this.appearance),this.data={annotationFlags:this.flags,borderStyle:this.borderStyle,color:this.color,backgroundColor:this.backgroundColor,borderColor:this.borderColor,contentsObj:this._contents,hasAppearance:!!this.appearance,id:t.id,modificationDate:this.modificationDate,rect:this.rectangle,subtype:t.subtype,hasOwnCanvas:!1},t.collectFields){const i=e.get("Kids");if(Array.isArray(i)){const t=[];for(const e of i)e instanceof s.Ref&&t.push(e.toString());0!==t.length&&(this.data.kidIds=t)}this.data.actions=(0,n.collectActions)(t.xref,e,r.AnnotationActionEventType),this.data.fieldName=this._constructFieldName(e),this.data.pageIndex=t.pageIndex}this._fallbackFontDict=null}_hasFlag(t,e){return!!(t&e)}_isViewable(t){return!this._hasFlag(t,r.AnnotationFlag.INVISIBLE)&&!this._hasFlag(t,r.AnnotationFlag.NOVIEW)}_isPrintable(t){return this._hasFlag(t,r.AnnotationFlag.PRINT)&&!this._hasFlag(t,r.AnnotationFlag.INVISIBLE)}mustBeViewed(t){const e=t&&t.get(this.data.id);return e&&void 0!==e.hidden?!e.hidden:this.viewable&&!this._hasFlag(this.flags,r.AnnotationFlag.HIDDEN)}mustBePrinted(t){const e=t&&t.get(this.data.id);return e&&void 0!==e.print?e.print:this.printable}get viewable(){return null!==this.data.quadPoints&&(0===this.flags||this._isViewable(this.flags))}get printable(){return null!==this.data.quadPoints&&0!==this.flags&&this._isPrintable(this.flags)}_parseStringHelper(t){const e="string"==typeof t?(0,r.stringToPDFString)(t):"";return{str:e,dir:e&&"rtl"===(0,l.bidi)(e).dir?"rtl":"ltr"}}setTitle(t){this._title=this._parseStringHelper(t)}setContents(t){this._contents=this._parseStringHelper(t)}setModificationDate(t){this.modificationDate="string"==typeof t?t:null}setFlags(t){this.flags=Number.isInteger(t)&&t>0?t:0}hasFlag(t){return this._hasFlag(this.flags,t)}setRectangle(t){Array.isArray(t)&&4===t.length?this.rectangle=r.Util.normalizeRect(t):this.rectangle=[0,0,0,0]}setColor(t){this.color=v(t)}setLineEndings(t){if(this.lineEndings=["None","None"],Array.isArray(t)&&2===t.length)for(let e=0;e<2;e++){const i=t[e];if(i instanceof s.Name)switch(i.name){case"None":continue;case"Square":case"Circle":case"Diamond":case"OpenArrow":case"ClosedArrow":case"Butt":case"ROpenArrow":case"RClosedArrow":case"Slash":this.lineEndings[e]=i.name;continue}(0,r.warn)(`Ignoring invalid lineEnding: ${i}`)}}setBorderAndBackgroundColors(t){t instanceof s.Dict?(this.borderColor=v(t.getArray("BC"),null),this.backgroundColor=v(t.getArray("BG"),null)):this.borderColor=this.backgroundColor=null}setBorderStyle(t){if(this.borderStyle=new S,t instanceof s.Dict)if(t.has("BS")){const e=t.get("BS"),i=e.get("Type");i&&!(0,s.isName)(i,"Border")||(this.borderStyle.setWidth(e.get("W"),this.rectangle),this.borderStyle.setStyle(e.get("S")),this.borderStyle.setDashArray(e.getArray("D")))}else if(t.has("Border")){const e=t.getArray("Border");Array.isArray(e)&&e.length>=3&&(this.borderStyle.setHorizontalCornerRadius(e[0]),this.borderStyle.setVerticalCornerRadius(e[1]),this.borderStyle.setWidth(e[2],this.rectangle),4===e.length&&this.borderStyle.setDashArray(e[3],!0))}else this.borderStyle.setWidth(0)}setAppearance(t){this.appearance=null;const e=t.get("AP");if(!(e instanceof s.Dict))return;const i=e.get("N");if(i instanceof a.BaseStream)return void(this.appearance=i);if(!(i instanceof s.Dict))return;const r=t.get("AS");r instanceof s.Name&&i.has(r.name)&&(this.appearance=i.get(r.name))}loadResources(t,e){return e.dict.getAsync("Resources").then((e=>{if(e)return new p.ObjectLoader(e,t,e.xref).load().then((function(){return e}))}))}getOperatorList(t,e,i,n,o){const a=this.data;let l=this.appearance;const c=a.hasOwnCanvas&&i&r.RenderingIntentFlag.DISPLAY;if(!l){if(!c)return Promise.resolve(new d.OperatorList);l=new f.StringStream(""),l.dict=new s.Dict}const h=l.dict,u=this.loadResources(["ExtGState","ColorSpace","Pattern","Shading","XObject","Font"],l),p=h.getArray("BBox")||[0,0,1,1],g=h.getArray("Matrix")||[1,0,0,1,0,0],m=w(a.rect,p,g);return u.then((i=>{const n=new d.OperatorList;return n.addOp(r.OPS.beginAnnotation,[a.id,a.rect,m,g,c]),t.getOperatorList({stream:l,task:e,resources:i,operatorList:n,fallbackFontDict:this._fallbackFontDict}).then((()=>(n.addOp(r.OPS.endAnnotation,[]),this.reset(),n)))}))}async save(t,e,i){return null}getFieldObject(){return this.data.kidIds?{id:this.data.id,actions:this.data.actions,name:this.data.fieldName,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,type:"",kidIds:this.data.kidIds,page:this.data.pageIndex}:null}reset(){for(const t of this._streams)t.reset()}_constructFieldName(t){if(!t.has("T")&&!t.has("Parent"))return(0,r.warn)("Unknown field name, falling back to empty field name."),"";if(!t.has("Parent"))return(0,r.stringToPDFString)(t.get("T"));const e=[];t.has("T")&&e.unshift((0,r.stringToPDFString)(t.get("T")));let i=t;const n=new s.RefSet;for(t.objId&&n.put(t.objId);i.has("Parent")&&(i=i.get("Parent"),i instanceof s.Dict&&(!i.objId||!n.has(i.objId)));)i.objId&&n.put(i.objId),i.has("T")&&e.unshift((0,r.stringToPDFString)(i.get("T")));return e.join(".")}}e.Annotation=x;class S{constructor(){this.width=1,this.style=r.AnnotationBorderStyleType.SOLID,this.dashArray=[3],this.horizontalCornerRadius=0,this.verticalCornerRadius=0}setWidth(t,e=[0,0,0,0]){if(t instanceof s.Name)this.width=0;else if("number"==typeof t){if(t>0){const i=(e[2]-e[0])/2,n=(e[3]-e[1])/2;i>0&&n>0&&(t>i||t>n)&&((0,r.warn)(`AnnotationBorderStyle.setWidth - ignoring width: ${t}`),t=1)}this.width=t}}setStyle(t){if(t instanceof s.Name)switch(t.name){case"S":this.style=r.AnnotationBorderStyleType.SOLID;break;case"D":this.style=r.AnnotationBorderStyleType.DASHED;break;case"B":this.style=r.AnnotationBorderStyleType.BEVELED;break;case"I":this.style=r.AnnotationBorderStyleType.INSET;break;case"U":this.style=r.AnnotationBorderStyleType.UNDERLINE}}setDashArray(t,e=!1){if(Array.isArray(t)&&t.length>0){let i=!0,r=!0;for(const e of t){if(!(+e>=0)){i=!1;break}e>0&&(r=!1)}i&&!r?(this.dashArray=t,e&&this.setStyle(s.Name.get("D"))):this.width=0}else t&&(this.width=0)}setHorizontalCornerRadius(t){Number.isInteger(t)&&(this.horizontalCornerRadius=t)}setVerticalCornerRadius(t){Number.isInteger(t)&&(this.verticalCornerRadius=t)}}e.AnnotationBorderStyle=S;class k extends x{constructor(t){super(t);const e=t.dict;if(e.has("IRT")){const t=e.getRaw("IRT");this.data.inReplyTo=t instanceof s.Ref?t.toString():null;const i=e.get("RT");this.data.replyType=i instanceof s.Name?i.name:r.AnnotationReplyType.REPLY}if(this.data.replyType===r.AnnotationReplyType.GROUP){const t=e.get("IRT");this.setTitle(t.get("T")),this.data.titleObj=this._title,this.setContents(t.get("Contents")),this.data.contentsObj=this._contents,t.has("CreationDate")?(this.setCreationDate(t.get("CreationDate")),this.data.creationDate=this.creationDate):this.data.creationDate=null,t.has("M")?(this.setModificationDate(t.get("M")),this.data.modificationDate=this.modificationDate):this.data.modificationDate=null,this.data.hasPopup=t.has("Popup"),t.has("C")?(this.setColor(t.getArray("C")),this.data.color=this.color):this.data.color=null}else this.data.titleObj=this._title,this.setCreationDate(e.get("CreationDate")),this.data.creationDate=this.creationDate,this.data.hasPopup=e.has("Popup"),e.has("C")||(this.data.color=null);e.has("RC")&&(this.data.richText=m.XFAFactory.getRichTextAsHtml(e.get("RC")))}setCreationDate(t){this.creationDate="string"==typeof t?t:null}_setDefaultAppearance({xref:t,extra:e,strokeColor:i,fillColor:r,blendMode:n,strokeAlpha:o,fillAlpha:a,pointsCallback:l}){let c=Number.MAX_VALUE,h=Number.MAX_VALUE,u=Number.MIN_VALUE,p=Number.MIN_VALUE;const d=["q"];e&&d.push(e),i&&d.push(`${i[0]} ${i[1]} ${i[2]} RG`),r&&d.push(`${r[0]} ${r[1]} ${r[2]} rg`);let g=this.data.quadPoints;g||(g=[[{x:this.rectangle[0],y:this.rectangle[3]},{x:this.rectangle[2],y:this.rectangle[3]},{x:this.rectangle[0],y:this.rectangle[1]},{x:this.rectangle[2],y:this.rectangle[1]}]]);for(const t of g){const[e,i,r,n]=l(d,t);c=Math.min(c,e),u=Math.max(u,i),h=Math.min(h,r),p=Math.max(p,n)}d.push("Q");const m=new s.Dict(t),y=new s.Dict(t);y.set("Subtype",s.Name.get("Form"));const v=new f.StringStream(d.join(" "));v.dict=y,m.set("Fm0",v);const b=new s.Dict(t);n&&b.set("BM",s.Name.get(n)),"number"==typeof o&&b.set("CA",o),"number"==typeof a&&b.set("ca",a);const w=new s.Dict(t);w.set("GS0",b);const x=new s.Dict(t);x.set("ExtGState",w),x.set("XObject",m);const S=new s.Dict(t);S.set("Resources",x);const k=this.data.rect=[c,h,u,p];S.set("BBox",k),this.appearance=new f.StringStream("/GS0 gs /Fm0 Do"),this.appearance.dict=S,this._streams.push(this.appearance,v)}}e.MarkupAnnotation=k;class C extends x{constructor(t){super(t);const e=t.dict,i=this.data;this.ref=t.ref,i.annotationType=r.AnnotationType.WIDGET,void 0===i.fieldName&&(i.fieldName=this._constructFieldName(e)),void 0===i.actions&&(i.actions=(0,n.collectActions)(t.xref,e,r.AnnotationActionEventType));let a=(0,n.getInheritableProperty)({dict:e,key:"V",getArray:!0});i.fieldValue=this._decodeFormValue(a);const l=(0,n.getInheritableProperty)({dict:e,key:"DV",getArray:!0});if(i.defaultFieldValue=this._decodeFormValue(l),void 0===a&&t.xfaDatasets){const e=this._title.str;e&&(this._hasValueFromXFA=!0,i.fieldValue=a=t.xfaDatasets.getValue(e))}void 0===a&&null!==i.defaultFieldValue&&(i.fieldValue=i.defaultFieldValue),i.alternativeText=(0,r.stringToPDFString)(e.get("TU")||"");const c=(0,n.getInheritableProperty)({dict:e,key:"DA"})||t.acroForm.get("DA");this._defaultAppearance="string"==typeof c?c:"",i.defaultAppearanceData=(0,o.parseDefaultAppearance)(this._defaultAppearance);const h=(0,n.getInheritableProperty)({dict:e,key:"FT"});i.fieldType=h instanceof s.Name?h.name:null;const u=(0,n.getInheritableProperty)({dict:e,key:"DR"}),p=t.acroForm.get("DR"),d=this.appearance&&this.appearance.dict.get("Resources");this._fieldResources={localResources:u,acroFormResources:p,appearanceResources:d,mergedResources:s.Dict.merge({xref:t.xref,dictArray:[u,d,p],mergeSubDicts:!0})},i.fieldFlags=(0,n.getInheritableProperty)({dict:e,key:"Ff"}),(!Number.isInteger(i.fieldFlags)||i.fieldFlags<0)&&(i.fieldFlags=0),i.readOnly=this.hasFieldFlag(r.AnnotationFieldFlag.READONLY),i.hidden=this._hasFlag(i.annotationFlags,r.AnnotationFlag.HIDDEN)}_decodeFormValue(t){return Array.isArray(t)?t.filter((t=>"string"==typeof t)).map((t=>(0,r.stringToPDFString)(t))):t instanceof s.Name?(0,r.stringToPDFString)(t.name):"string"==typeof t?(0,r.stringToPDFString)(t):null}hasFieldFlag(t){return!!(this.data.fieldFlags&t)}getOperatorList(t,e,i,n,o){return!n||this instanceof O?this._hasText?this._getAppearance(t,e,o).then((s=>{if(this.appearance&&null===s)return super.getOperatorList(t,e,i,n,o);const a=new d.OperatorList;if(!this._defaultAppearance||null===s)return a;const l=[1,0,0,1,0,0],c=[0,0,this.data.rect[2]-this.data.rect[0],this.data.rect[3]-this.data.rect[1]],h=w(this.data.rect,c,l);a.addOp(r.OPS.beginAnnotation,[this.data.id,this.data.rect,h,l]);const u=new f.StringStream(s);return t.getOperatorList({stream:u,task:e,resources:this._fieldResources.mergedResources,operatorList:a}).then((function(){return a.addOp(r.OPS.endAnnotation,[]),a}))})):super.getOperatorList(t,e,i,n,o):Promise.resolve(new d.OperatorList)}async save(t,e,i){const n=i?i.get(this.data.id):void 0;let o=n&&n.value;if(o===this.data.fieldValue||void 0===o){if(!this._hasValueFromXFA)return null;o=o||this.data.fieldValue}if(!this._hasValueFromXFA&&Array.isArray(o)&&Array.isArray(this.data.fieldValue)&&o.length===this.data.fieldValue.length&&o.every(((t,e)=>t===this.data.fieldValue[e])))return null;let a=await this._getAppearance(t,e,i);if(null===a)return null;const{xref:l}=t,c=l.fetchIfRef(this.ref);if(!(c instanceof s.Dict))return null;const h=[0,0,this.data.rect[2]-this.data.rect[0],this.data.rect[3]-this.data.rect[1]],u={path:(0,r.stringToPDFString)(c.get("T")||""),value:o},p=l.getNewRef(),d=new s.Dict(l);d.set("N",p);const f=l.encrypt;let m=null,y=null;f&&(m=f.createCipherTransform(this.ref.num,this.ref.gen),y=f.createCipherTransform(p.num,p.gen),a=y.encryptString(a));const v=t=>(0,r.isAscii)(t)?t:(0,r.stringToUTF16BEString)(t);c.set("V",Array.isArray(o)?o.map(v):v(o)),c.set("AP",d),c.set("M",`D:${(0,r.getModificationDate)()}`);const b=new s.Dict(l);b.set("Length",a.length),b.set("Subtype",s.Name.get("Form")),b.set("Resources",this._getSaveFieldResources(l)),b.set("BBox",h);const w=[`${this.ref.num} ${this.ref.gen} obj\n`];(0,g.writeDict)(c,w,m),w.push("\nendobj\n");const x=[`${p.num} ${p.gen} obj\n`];return(0,g.writeDict)(b,x,y),x.push(" stream\n",a,"\nendstream\nendobj\n"),[{ref:this.ref,data:w.join(""),xfa:u},{ref:p,data:x.join(""),xfa:null}]}async _getAppearance(t,e,i){if(this.hasFieldFlag(r.AnnotationFieldFlag.PASSWORD))return null;const n=i?i.get(this.data.id):void 0;let s=n&&(n.formattedValue||n.value);if(void 0===s){if(!this._hasValueFromXFA||this.appearance)return null;if(s=this.data.fieldValue,!s)return""}if((0,r.assert)("string"==typeof s,"Expected `value` to be a string."),s=s.trim(),""===s)return"";let a=-1;this.data.multiLine&&(a=s.split(/\r\n|\r|\n/).length);const l=this.data.rect[3]-this.data.rect[1],c=this.data.rect[2]-this.data.rect[0];this._defaultAppearance||(this.data.defaultAppearanceData=(0,o.parseDefaultAppearance)(this._defaultAppearance="/Helvetica 0 Tf 0 g"));const h=await this._getFontData(t,e),[u,p]=this._computeFontSize(l-2,c-4,s,h,a);let d=h.descent;isNaN(d)&&(d=0);const f=2+Math.abs(d)*p,g=this.data.textAlignment;if(this.data.multiLine)return this._getMultilineAppearance(u,s,h,p,c,l,g,2,f);const m=h.encodeString(s).join("");return this.data.comb?this._getCombAppearance(u,h,m,c,2,f):0===g||g>2?"/Tx BMC q BT "+u+` 1 0 0 1 2 ${f} Tm (${(0,r.escapeString)(m)}) Tj ET Q EMC`:"/Tx BMC q BT "+u+` 1 0 0 1 0 0 Tm ${this._renderText(m,h,p,c,g,2,f)} ET Q EMC`}async _getFontData(t,e){const i=new d.OperatorList,r={font:null,clone(){return this}},{fontName:n,fontSize:o}=this.data.defaultAppearanceData;return await t.handleSetFont(this._fieldResources.mergedResources,[n&&s.Name.get(n),o],null,i,e,r,null),r.font}_getTextWidth(t,e){return e.charsToGlyphs(t).reduce(((t,e)=>t+e.width),0)/1e3}_computeFontSize(t,e,i,r,n){let{fontSize:s}=this.data.defaultAppearanceData;if(!s){const a=t=>Math.floor(100*t)/100;if(-1===n){const n=this._getTextWidth(i,r);s=a(Math.min(t/y,e/n))}else{const o=i.split(/\r\n?|\n/),l=[];for(const t of o){const e=r.encodeString(t).join(""),i=r.charsToGlyphs(e),n=r.getCharPositions(e);l.push({line:e,glyphs:i,positions:n})}const c=i=>{let n=0;for(const o of l)if(n+=this._splitLine(null,r,i,e,o).length*i,n>t)return!0;return!1};s=12;let h=s*y,u=Math.round(t/h);for(u=Math.max(u,n);h=t/u,s=a(h/y),c(s);)u++}const{fontName:l,fontColor:c}=this.data.defaultAppearanceData;this._defaultAppearance=(0,o.createDefaultAppearance)({fontSize:s,fontName:l,fontColor:c})}return[this._defaultAppearance,s]}_renderText(t,e,i,n,o,s,a){let l;return l=1===o?(n-this._getTextWidth(t,e)*i)/2:2===o?n-this._getTextWidth(t,e)*i-s:s,l=l.toFixed(2),`${l} ${a=a.toFixed(2)} Td (${(0,r.escapeString)(t)}) Tj`}_getSaveFieldResources(t){const{localResources:e,appearanceResources:i,acroFormResources:r}=this._fieldResources,n=this.data.defaultAppearanceData&&this.data.defaultAppearanceData.fontName;if(!n)return e||s.Dict.empty;for(const t of[e,i])if(t instanceof s.Dict){const e=t.get("Font");if(e instanceof s.Dict&&e.has(n))return t}if(r instanceof s.Dict){const i=r.get("Font");if(i instanceof s.Dict&&i.has(n)){const r=new s.Dict(t);r.set(n,i.getRaw(n));const o=new s.Dict(t);return o.set("Font",r),s.Dict.merge({xref:t,dictArray:[o,e],mergeSubDicts:!0})}}return e||s.Dict.empty}getFieldObject(){return null}}class A extends C{constructor(t){super(t),this._hasText=!0;const e=t.dict;"string"!=typeof this.data.fieldValue&&(this.data.fieldValue="");let i=(0,n.getInheritableProperty)({dict:e,key:"Q"});(!Number.isInteger(i)||i<0||i>2)&&(i=null),this.data.textAlignment=i;let o=(0,n.getInheritableProperty)({dict:e,key:"MaxLen"});(!Number.isInteger(o)||o<0)&&(o=null),this.data.maxLen=o,this.data.multiLine=this.hasFieldFlag(r.AnnotationFieldFlag.MULTILINE),this.data.comb=this.hasFieldFlag(r.AnnotationFieldFlag.COMB)&&!this.hasFieldFlag(r.AnnotationFieldFlag.MULTILINE)&&!this.hasFieldFlag(r.AnnotationFieldFlag.PASSWORD)&&!this.hasFieldFlag(r.AnnotationFieldFlag.FILESELECT)&&null!==this.data.maxLen}_getCombAppearance(t,e,i,n,o,s){const a=(n/this.data.maxLen).toFixed(2),l=[],c=e.getCharPositions(i);for(const[t,e]of c)l.push(`(${(0,r.escapeString)(i.substring(t,e))}) Tj`);return"/Tx BMC q BT "+t+` 1 0 0 1 ${o} ${s} Tm ${l.join(` ${a} 0 Td `)} ET Q EMC`}_getMultilineAppearance(t,e,i,r,n,o,s,a,l){const c=e.split(/\r\n?|\n/),h=[],u=n-2*a;for(const t of c){const e=this._splitLine(t,i,r,u);for(const t of e){const e=0===h.length?a:0;h.push(this._renderText(t,i,r,n,s,e,-r))}}return"/Tx BMC q BT "+t+` 1 0 0 1 0 ${o} Tm ${h.join("\n")} ET Q EMC`}_splitLine(t,e,i,r,n={}){t=n.line||e.encodeString(t).join("");const o=n.glyphs||e.charsToGlyphs(t);if(o.length<=1)return[t];const s=n.positions||e.getCharPositions(t),a=i/1e3,l=[];let c=-1,h=-1,u=-1,p=0,d=0;for(let e=0,i=o.length;e<i;e++){const[i,n]=s[e],f=o[e],g=f.width*a;" "===f.unicode?d+g>r?(l.push(t.substring(p,i)),p=i,d=g,c=-1,u=-1):(d+=g,c=i,h=n,u=e):d+g>r?-1!==c?(l.push(t.substring(p,h)),p=h,e=u+1,c=-1,d=0):(l.push(t.substring(p,i)),p=i,d=g):d+=g}return p<t.length&&l.push(t.substring(p,t.length)),l}getFieldObject(){return{id:this.data.id,value:this.data.fieldValue,defaultValue:this.data.defaultFieldValue||"",multiline:this.data.multiLine,password:this.hasFieldFlag(r.AnnotationFieldFlag.PASSWORD),charLimit:this.data.maxLen,comb:this.data.comb,editable:!this.data.readOnly,hidden:this.data.hidden,name:this.data.fieldName,rect:this.data.rect,actions:this.data.actions,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,type:"text"}}}class _ extends C{constructor(t){super(t),this.checkedAppearance=null,this.uncheckedAppearance=null,this.data.checkBox=!this.hasFieldFlag(r.AnnotationFieldFlag.RADIO)&&!this.hasFieldFlag(r.AnnotationFieldFlag.PUSHBUTTON),this.data.radioButton=this.hasFieldFlag(r.AnnotationFieldFlag.RADIO)&&!this.hasFieldFlag(r.AnnotationFieldFlag.PUSHBUTTON),this.data.pushButton=this.hasFieldFlag(r.AnnotationFieldFlag.PUSHBUTTON),this.data.isTooltipOnly=!1,this.data.checkBox?this._processCheckBox(t):this.data.radioButton?this._processRadioButton(t):this.data.pushButton?(this.data.hasOwnCanvas=!0,this._processPushButton(t)):(0,r.warn)("Invalid field flags for button widget annotation")}async getOperatorList(t,e,i,r,n){if(this.data.pushButton)return super.getOperatorList(t,e,i,!1,n);let o=null;if(n){const t=n.get(this.data.id);o=t?t.value:null}if(null===o){if(this.appearance)return super.getOperatorList(t,e,i,r,n);o=this.data.checkBox?this.data.fieldValue===this.data.exportValue:this.data.fieldValue===this.data.buttonValue}const s=o?this.checkedAppearance:this.uncheckedAppearance;if(s){const o=this.appearance;this.appearance=s;const a=super.getOperatorList(t,e,i,r,n);return this.appearance=o,a}return new d.OperatorList}async save(t,e,i){return this.data.checkBox?this._saveCheckbox(t,e,i):this.data.radioButton?this._saveRadioButton(t,e,i):null}async _saveCheckbox(t,e,i){if(!i)return null;const n=i.get(this.data.id),o=n&&n.value;if(void 0===o)return null;if(this.data.fieldValue===this.data.exportValue===o)return null;const a=t.xref.fetchIfRef(this.ref);if(!(a instanceof s.Dict))return null;const l={path:(0,r.stringToPDFString)(a.get("T")||""),value:o?this.data.exportValue:""},c=s.Name.get(o?this.data.exportValue:"Off");a.set("V",c),a.set("AS",c),a.set("M",`D:${(0,r.getModificationDate)()}`);const h=t.xref.encrypt;let u=null;h&&(u=h.createCipherTransform(this.ref.num,this.ref.gen));const p=[`${this.ref.num} ${this.ref.gen} obj\n`];return(0,g.writeDict)(a,p,u),p.push("\nendobj\n"),[{ref:this.ref,data:p.join(""),xfa:l}]}async _saveRadioButton(t,e,i){if(!i)return null;const n=i.get(this.data.id),o=n&&n.value;if(void 0===o)return null;if(this.data.fieldValue===this.data.buttonValue===o)return null;const a=t.xref.fetchIfRef(this.ref);if(!(a instanceof s.Dict))return null;const l={path:(0,r.stringToPDFString)(a.get("T")||""),value:o?this.data.buttonValue:""},c=s.Name.get(o?this.data.buttonValue:"Off");let h=null;const u=t.xref.encrypt;if(o)if(this.parent instanceof s.Ref){const e=t.xref.fetch(this.parent);let i=null;u&&(i=u.createCipherTransform(this.parent.num,this.parent.gen)),e.set("V",c),h=[`${this.parent.num} ${this.parent.gen} obj\n`],(0,g.writeDict)(e,h,i),h.push("\nendobj\n")}else this.parent instanceof s.Dict&&this.parent.set("V",c);a.set("AS",c),a.set("M",`D:${(0,r.getModificationDate)()}`);let p=null;u&&(p=u.createCipherTransform(this.ref.num,this.ref.gen));const d=[`${this.ref.num} ${this.ref.gen} obj\n`];(0,g.writeDict)(a,d,p),d.push("\nendobj\n");const f=[{ref:this.ref,data:d.join(""),xfa:l}];return null!==h&&f.push({ref:this.parent,data:h.join(""),xfa:null}),f}_getDefaultCheckedAppearance(t,e){const i=this.data.rect[2]-this.data.rect[0],n=this.data.rect[3]-this.data.rect[1],o=[0,0,i,n],a=.8*Math.min(i,n);let l,c;"check"===e?(l={width:.755*a,height:.705*a},c="3"):"disc"===e?(l={width:.791*a,height:.705*a},c="l"):(0,r.unreachable)(`_getDefaultCheckedAppearance - unsupported type: ${e}`);const h=`q BT /PdfJsZaDb ${a} Tf 0 g ${(i-l.width)/2} ${(n-l.height)/2} Td (${c}) Tj ET Q`,u=new s.Dict(t.xref);u.set("FormType",1),u.set("Subtype",s.Name.get("Form")),u.set("Type",s.Name.get("XObject")),u.set("BBox",o),u.set("Matrix",[1,0,0,1,0,0]),u.set("Length",h.length);const p=new s.Dict(t.xref),d=new s.Dict(t.xref);d.set("PdfJsZaDb",this.fallbackFontDict),p.set("Font",d),u.set("Resources",p),this.checkedAppearance=new f.StringStream(h),this.checkedAppearance.dict=u,this._streams.push(this.checkedAppearance)}_processCheckBox(t){const e=t.dict.get("AP");if(!(e instanceof s.Dict))return;const i=e.get("N");if(!(i instanceof s.Dict))return;const r=this._decodeFormValue(t.dict.get("AS"));"string"==typeof r&&(this.data.fieldValue=r);const n=null!==this.data.fieldValue&&"Off"!==this.data.fieldValue?this.data.fieldValue:"Yes",o=i.getKeys();if(0===o.length)o.push("Off",n);else if(1===o.length)"Off"===o[0]?o.push(n):o.unshift("Off");else if(o.includes(n))o.length=0,o.push("Off",n);else{const t=o.find((t=>"Off"!==t));o.length=0,o.push("Off",t)}o.includes(this.data.fieldValue)||(this.data.fieldValue="Off"),this.data.exportValue=o[1],this.checkedAppearance=i.get(this.data.exportValue)||null,this.uncheckedAppearance=i.get("Off")||null,this.checkedAppearance?this._streams.push(this.checkedAppearance):this._getDefaultCheckedAppearance(t,"check"),this.uncheckedAppearance&&this._streams.push(this.uncheckedAppearance),this._fallbackFontDict=this.fallbackFontDict}_processRadioButton(t){this.data.fieldValue=this.data.buttonValue=null;const e=t.dict.get("Parent");if(e instanceof s.Dict){this.parent=t.dict.getRaw("Parent");const i=e.get("V");i instanceof s.Name&&(this.data.fieldValue=this._decodeFormValue(i))}const i=t.dict.get("AP");if(!(i instanceof s.Dict))return;const r=i.get("N");if(r instanceof s.Dict){for(const t of r.getKeys())if("Off"!==t){this.data.buttonValue=this._decodeFormValue(t);break}this.checkedAppearance=r.get(this.data.buttonValue)||null,this.uncheckedAppearance=r.get("Off")||null,this.checkedAppearance?this._streams.push(this.checkedAppearance):this._getDefaultCheckedAppearance(t,"disc"),this.uncheckedAppearance&&this._streams.push(this.uncheckedAppearance),this._fallbackFontDict=this.fallbackFontDict}}_processPushButton(t){t.dict.has("A")||t.dict.has("AA")||this.data.alternativeText?(this.data.isTooltipOnly=!t.dict.has("A")&&!t.dict.has("AA"),c.Catalog.parseDestDictionary({destDict:t.dict,resultObj:this.data,docBaseUrl:t.pdfManager.docBaseUrl})):(0,r.warn)("Push buttons without action dictionaries are not supported")}getFieldObject(){let t,e="button";return this.data.checkBox?(e="checkbox",t=this.data.exportValue):this.data.radioButton&&(e="radiobutton",t=this.data.buttonValue),{id:this.data.id,value:this.data.fieldValue||"Off",defaultValue:this.data.defaultFieldValue,exportValues:t,editable:!this.data.readOnly,name:this.data.fieldName,rect:this.data.rect,hidden:this.data.hidden,actions:this.data.actions,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,type:e}}get fallbackFontDict(){const t=new s.Dict;return t.set("BaseFont",s.Name.get("ZapfDingbats")),t.set("Type",s.Name.get("FallbackType")),t.set("Subtype",s.Name.get("FallbackType")),t.set("Encoding",s.Name.get("ZapfDingbatsEncoding")),(0,r.shadow)(this,"fallbackFontDict",t)}}class T extends C{constructor(t){super(t),this.data.options=[];const e=(0,n.getInheritableProperty)({dict:t.dict,key:"Opt"});if(Array.isArray(e)){const i=t.xref;for(let t=0,r=e.length;t<r;t++){const r=i.fetchIfRef(e[t]),n=Array.isArray(r);this.data.options[t]={exportValue:this._decodeFormValue(n?i.fetchIfRef(r[0]):r),displayValue:this._decodeFormValue(n?i.fetchIfRef(r[1]):r)}}}"string"==typeof this.data.fieldValue?this.data.fieldValue=[this.data.fieldValue]:this.data.fieldValue||(this.data.fieldValue=[]),this.data.combo=this.hasFieldFlag(r.AnnotationFieldFlag.COMBO),this.data.multiSelect=this.hasFieldFlag(r.AnnotationFieldFlag.MULTISELECT),this._hasText=!0}getFieldObject(){const t=this.data.combo?"combobox":"listbox",e=this.data.fieldValue.length>0?this.data.fieldValue[0]:null;return{id:this.data.id,value:e,defaultValue:this.data.defaultFieldValue,editable:!this.data.readOnly,name:this.data.fieldName,rect:this.data.rect,numItems:this.data.fieldValue.length,multipleSelection:this.data.multiSelect,hidden:this.data.hidden,actions:this.data.actions,items:this.data.options,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,type:t}}async _getAppearance(t,e,i){if(this.data.combo)return super._getAppearance(t,e,i);if(!i)return null;const r=i.get(this.data.id);let n=r&&r.value;if(void 0===n)return null;Array.isArray(n)||(n=[n]);const s=this.data.rect[3]-this.data.rect[1],a=this.data.rect[2]-this.data.rect[0],l=this.data.options.length,c=[];for(let t=0;t<l;t++){const{exportValue:e}=this.data.options[t];n.includes(e)&&c.push(t)}this._defaultAppearance||(this.data.defaultAppearanceData=(0,o.parseDefaultAppearance)(this._defaultAppearance="/Helvetica 0 Tf 0 g"));const h=await this._getFontData(t,e);let u,{fontSize:p}=this.data.defaultAppearanceData;if(p)u=this._defaultAppearance;else{const t=(s-2)/l;let e,i=-1;for(const{displayValue:t}of this.data.options){const r=this._getTextWidth(t);r>i&&(i=r,e=t)}[u,p]=this._computeFontSize(t,a-4,e,h,-1)}const d=p*y,f=(d-p)/2,g=Math.floor(s/d);let m;if(1===c.length){const t=c[0];m=t-t%g}else m=c.length?c[0]:0;const v=Math.min(m+g+1,l),b=["/Tx BMC q",`1 1 ${a} ${s} re W n`];if(c.length){b.push("0.600006 0.756866 0.854904 rg");for(const t of c)m<=t&&t<v&&b.push(`1 ${s-(t-m+1)*d} ${a} ${d} re f`)}b.push("BT",u,`1 0 0 1 0 ${s} Tm`);for(let t=m;t<v;t++){const{displayValue:e}=this.data.options[t],i=t===m?2:0,r=t===m?f:0;b.push(this._renderText(e,h,p,a,0,i,-d+r))}return b.push("ET Q EMC"),b.join("\n")}}class O extends C{constructor(t){super(t),this.data.fieldValue=null}getFieldObject(){return{id:this.data.id,value:null,page:this.data.pageIndex,type:"signature"}}}class E extends k{constructor(t){super(t);const e=t.dict;this.data.annotationType=r.AnnotationType.TEXT,this.data.hasAppearance?this.data.name="NoIcon":(this.data.rect[1]=this.data.rect[3]-22,this.data.rect[2]=this.data.rect[0]+22,this.data.name=e.has("Name")?e.get("Name").name:"Note"),e.has("State")?(this.data.state=e.get("State")||null,this.data.stateModel=e.get("StateModel")||null):(this.data.state=null,this.data.stateModel=null)}}class M extends x{constructor(t){super(t),this.data.annotationType=r.AnnotationType.LINK;const e=b(t.dict,this.rectangle);e&&(this.data.quadPoints=e),c.Catalog.parseDestDictionary({destDict:t.dict,resultObj:this.data,docBaseUrl:t.pdfManager.docBaseUrl})}}class P extends x{constructor(t){super(t),this.data.annotationType=r.AnnotationType.POPUP;let e=t.dict.get("Parent");if(!e)return void(0,r.warn)("Popup annotation has a missing or invalid parent annotation.");const i=e.get("Subtype");this.data.parentType=i instanceof s.Name?i.name:null;const n=t.dict.getRaw("Parent");this.data.parentId=n instanceof s.Ref?n.toString():null;const o=e.getArray("Rect");Array.isArray(o)&&4===o.length?this.data.parentRect=r.Util.normalizeRect(o):this.data.parentRect=[0,0,0,0];const a=e.get("RT");if((0,s.isName)(a,r.AnnotationReplyType.GROUP)&&(e=e.get("IRT")),e.has("M")?(this.setModificationDate(e.get("M")),this.data.modificationDate=this.modificationDate):this.data.modificationDate=null,e.has("C")?(this.setColor(e.getArray("C")),this.data.color=this.color):this.data.color=null,!this.viewable){const t=e.get("F");this._isViewable(t)&&this.setFlags(t)}this.setTitle(e.get("T")),this.data.titleObj=this._title,this.setContents(e.get("Contents")),this.data.contentsObj=this._contents,e.has("RC")&&(this.data.richText=m.XFAFactory.getRichTextAsHtml(e.get("RC")))}}class I extends k{constructor(t){super(t),this.data.annotationType=r.AnnotationType.FREETEXT}}class D extends k{constructor(t){super(t);const{dict:e}=t;this.data.annotationType=r.AnnotationType.LINE;const i=e.getArray("L");if(this.data.lineCoordinates=r.Util.normalizeRect(i),this.setLineEndings(e.getArray("LE")),this.data.lineEndings=this.lineEndings,!this.appearance){const n=this.color?Array.from(this.color).map((t=>t/255)):[0,0,0],o=e.get("CA");let s=null,a=e.getArray("IC");a&&(a=v(a,null),s=a?Array.from(a).map((t=>t/255)):null);const l=s?o:null,c=this.borderStyle.width||1,h=2*c,u=[this.data.lineCoordinates[0]-h,this.data.lineCoordinates[1]-h,this.data.lineCoordinates[2]+h,this.data.lineCoordinates[3]+h];r.Util.intersect(this.rectangle,u)||(this.rectangle=u),this._setDefaultAppearance({xref:t.xref,extra:`${c} w`,strokeColor:n,fillColor:s,strokeAlpha:o,fillAlpha:l,pointsCallback:(t,e)=>(t.push(`${i[0]} ${i[1]} m`,`${i[2]} ${i[3]} l`,"S"),[e[0].x-c,e[1].x+c,e[3].y-c,e[1].y+c])})}}}class F extends k{constructor(t){if(super(t),this.data.annotationType=r.AnnotationType.SQUARE,!this.appearance){const e=this.color?Array.from(this.color).map((t=>t/255)):[0,0,0],i=t.dict.get("CA");let r=null,n=t.dict.getArray("IC");n&&(n=v(n,null),r=n?Array.from(n).map((t=>t/255)):null);const o=r?i:null;if(0===this.borderStyle.width&&!r)return;this._setDefaultAppearance({xref:t.xref,extra:`${this.borderStyle.width} w`,strokeColor:e,fillColor:r,strokeAlpha:i,fillAlpha:o,pointsCallback:(t,e)=>{const i=e[2].x+this.borderStyle.width/2,n=e[2].y+this.borderStyle.width/2,o=e[3].x-e[2].x-this.borderStyle.width,s=e[1].y-e[3].y-this.borderStyle.width;return t.push(`${i} ${n} ${o} ${s} re`),r?t.push("B"):t.push("S"),[e[0].x,e[1].x,e[3].y,e[1].y]}})}}}class R extends k{constructor(t){if(super(t),this.data.annotationType=r.AnnotationType.CIRCLE,!this.appearance){const e=this.color?Array.from(this.color).map((t=>t/255)):[0,0,0],i=t.dict.get("CA");let r=null,n=t.dict.getArray("IC");n&&(n=v(n,null),r=n?Array.from(n).map((t=>t/255)):null);const o=r?i:null;if(0===this.borderStyle.width&&!r)return;const s=4/3*Math.tan(Math.PI/8);this._setDefaultAppearance({xref:t.xref,extra:`${this.borderStyle.width} w`,strokeColor:e,fillColor:r,strokeAlpha:i,fillAlpha:o,pointsCallback:(t,e)=>{const i=e[0].x+this.borderStyle.width/2,n=e[0].y-this.borderStyle.width/2,o=e[3].x-this.borderStyle.width/2,a=e[3].y+this.borderStyle.width/2,l=i+(o-i)/2,c=n+(a-n)/2,h=(o-i)/2*s,u=(a-n)/2*s;return t.push(`${l} ${a} m`,`${l+h} ${a} ${o} ${c+u} ${o} ${c} c`,`${o} ${c-u} ${l+h} ${n} ${l} ${n} c`,`${l-h} ${n} ${i} ${c-u} ${i} ${c} c`,`${i} ${c+u} ${l-h} ${a} ${l} ${a} c`,"h"),r?t.push("B"):t.push("S"),[e[0].x,e[1].x,e[3].y,e[1].y]}})}}}class L extends k{constructor(t){super(t);const{dict:e}=t;this.data.annotationType=r.AnnotationType.POLYLINE,this.data.vertices=[],this instanceof N||(this.setLineEndings(e.getArray("LE")),this.data.lineEndings=this.lineEndings);const i=e.getArray("Vertices");if(Array.isArray(i)){for(let t=0,e=i.length;t<e;t+=2)this.data.vertices.push({x:i[t],y:i[t+1]});if(!this.appearance){const i=this.color?Array.from(this.color).map((t=>t/255)):[0,0,0],n=e.get("CA"),o=this.borderStyle.width||1,s=2*o,a=[1/0,1/0,-1/0,-1/0];for(const t of this.data.vertices)a[0]=Math.min(a[0],t.x-s),a[1]=Math.min(a[1],t.y-s),a[2]=Math.max(a[2],t.x+s),a[3]=Math.max(a[3],t.y+s);r.Util.intersect(this.rectangle,a)||(this.rectangle=a),this._setDefaultAppearance({xref:t.xref,extra:`${o} w`,strokeColor:i,strokeAlpha:n,pointsCallback:(t,e)=>{const i=this.data.vertices;for(let e=0,r=i.length;e<r;e++)t.push(`${i[e].x} ${i[e].y} ${0===e?"m":"l"}`);return t.push("S"),[e[0].x,e[1].x,e[3].y,e[1].y]}})}}}}class N extends L{constructor(t){super(t),this.data.annotationType=r.AnnotationType.POLYGON}}class B extends k{constructor(t){super(t),this.data.annotationType=r.AnnotationType.CARET}}class j extends k{constructor(t){super(t),this.data.annotationType=r.AnnotationType.INK,this.data.inkLists=[];const e=t.dict.getArray("InkList");if(!Array.isArray(e))return;const i=t.xref;for(let t=0,r=e.length;t<r;++t){this.data.inkLists.push([]);for(let r=0,n=e[t].length;r<n;r+=2)this.data.inkLists[t].push({x:i.fetchIfRef(e[t][r]),y:i.fetchIfRef(e[t][r+1])})}if(!this.appearance){const e=this.color?Array.from(this.color).map((t=>t/255)):[0,0,0],i=t.dict.get("CA"),n=this.borderStyle.width||1,o=2*n,s=[1/0,1/0,-1/0,-1/0];for(const t of this.data.inkLists)for(const e of t)s[0]=Math.min(s[0],e.x-o),s[1]=Math.min(s[1],e.y-o),s[2]=Math.max(s[2],e.x+o),s[3]=Math.max(s[3],e.y+o);r.Util.intersect(this.rectangle,s)||(this.rectangle=s),this._setDefaultAppearance({xref:t.xref,extra:`${n} w`,strokeColor:e,strokeAlpha:i,pointsCallback:(t,e)=>{for(const e of this.data.inkLists){for(let i=0,r=e.length;i<r;i++)t.push(`${e[i].x} ${e[i].y} ${0===i?"m":"l"}`);t.push("S")}return[e[0].x,e[1].x,e[3].y,e[1].y]}})}}}class z extends k{constructor(t){if(super(t),this.data.annotationType=r.AnnotationType.HIGHLIGHT,this.data.quadPoints=b(t.dict,null)){const e=this.appearance&&this.appearance.dict.get("Resources");if(!this.appearance||!e||!e.has("ExtGState")){this.appearance&&(0,r.warn)("HighlightAnnotation - ignoring built-in appearance stream.");const e=this.color?Array.from(this.color).map((t=>t/255)):[1,1,0],i=t.dict.get("CA");this._setDefaultAppearance({xref:t.xref,fillColor:e,blendMode:"Multiply",fillAlpha:i,pointsCallback:(t,e)=>(t.push(`${e[0].x} ${e[0].y} m`,`${e[1].x} ${e[1].y} l`,`${e[3].x} ${e[3].y} l`,`${e[2].x} ${e[2].y} l`,"f"),[e[0].x,e[1].x,e[3].y,e[1].y])})}}else this.data.hasPopup=!1}}class U extends k{constructor(t){if(super(t),this.data.annotationType=r.AnnotationType.UNDERLINE,this.data.quadPoints=b(t.dict,null)){if(!this.appearance){const e=this.color?Array.from(this.color).map((t=>t/255)):[0,0,0],i=t.dict.get("CA");this._setDefaultAppearance({xref:t.xref,extra:"[] 0 d 1 w",strokeColor:e,strokeAlpha:i,pointsCallback:(t,e)=>(t.push(`${e[2].x} ${e[2].y} m`,`${e[3].x} ${e[3].y} l`,"S"),[e[0].x,e[1].x,e[3].y,e[1].y])})}}else this.data.hasPopup=!1}}class $ extends k{constructor(t){if(super(t),this.data.annotationType=r.AnnotationType.SQUIGGLY,this.data.quadPoints=b(t.dict,null)){if(!this.appearance){const e=this.color?Array.from(this.color).map((t=>t/255)):[0,0,0],i=t.dict.get("CA");this._setDefaultAppearance({xref:t.xref,extra:"[] 0 d 1 w",strokeColor:e,strokeAlpha:i,pointsCallback:(t,e)=>{const i=(e[0].y-e[2].y)/6;let r=i,n=e[2].x;const o=e[2].y,s=e[3].x;t.push(`${n} ${o+r} m`);do{n+=2,r=0===r?i:0,t.push(`${n} ${o+r} l`)}while(n<s);return t.push("S"),[e[2].x,s,o-2*i,o+2*i]}})}}else this.data.hasPopup=!1}}class H extends k{constructor(t){if(super(t),this.data.annotationType=r.AnnotationType.STRIKEOUT,this.data.quadPoints=b(t.dict,null)){if(!this.appearance){const e=this.color?Array.from(this.color).map((t=>t/255)):[0,0,0],i=t.dict.get("CA");this._setDefaultAppearance({xref:t.xref,extra:"[] 0 d 1 w",strokeColor:e,strokeAlpha:i,pointsCallback:(t,e)=>(t.push((e[0].x+e[2].x)/2+" "+(e[0].y+e[2].y)/2+" m",(e[1].x+e[3].x)/2+" "+(e[1].y+e[3].y)/2+" l","S"),[e[0].x,e[1].x,e[3].y,e[1].y])})}}else this.data.hasPopup=!1}}class V extends k{constructor(t){super(t),this.data.annotationType=r.AnnotationType.STAMP}}class q extends k{constructor(t){super(t);const e=new u.FileSpec(t.dict.get("FS"),t.xref);this.data.annotationType=r.AnnotationType.FILEATTACHMENT,this.data.file=e.serializable}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createDefaultAppearance=function({fontSize:t,fontName:e,fontColor:i}){let r;return r=i.every((t=>0===t))?"0 g":Array.from(i).map((t=>(t/255).toFixed(2))).join(" ")+" rg",`/${(0,o.escapePDFName)(e)} ${t} Tf ${r}`},e.parseDefaultAppearance=function(t){return new c(t).parse()};var r=i(2),n=i(24),o=i(8),s=i(25),a=i(5),l=i(10);class c extends s.EvaluatorPreprocessor{constructor(t){super(new l.StringStream(t))}parse(){const t={fn:0,args:[]},e={fontSize:0,fontName:"",fontColor:new Uint8ClampedArray(3)};try{for(;t.args.length=0,this.read(t);){if(0!==this.savedStatesDepth)continue;const{fn:i,args:o}=t;switch(0|i){case r.OPS.setFont:const[t,i]=o;t instanceof a.Name&&(e.fontName=t.name),"number"==typeof i&&i>0&&(e.fontSize=i);break;case r.OPS.setFillRGBColor:n.ColorSpace.singletons.rgb.getRgbItem(o,0,e.fontColor,0);break;case r.OPS.setFillGray:n.ColorSpace.singletons.gray.getRgbItem(o,0,e.fontColor,0);break;case r.OPS.setFillColorSpace:n.ColorSpace.singletons.cmyk.getRgbItem(o,0,e.fontColor,0)}}}catch(t){(0,r.warn)(`parseDefaultAppearance - ignoring errors: "${t}".`)}return e}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorSpace=void 0;var r=i(2),n=i(5),o=i(9),s=i(8);class a{constructor(t,e){this.constructor===a&&(0,r.unreachable)("Cannot initialize ColorSpace."),this.name=t,this.numComps=e}getRgb(t,e){const i=new Uint8ClampedArray(3);return this.getRgbItem(t,e,i,0),i}getRgbItem(t,e,i,n){(0,r.unreachable)("Should not call ColorSpace.getRgbItem")}getRgbBuffer(t,e,i,n,o,s,a){(0,r.unreachable)("Should not call ColorSpace.getRgbBuffer")}getOutputLength(t,e){(0,r.unreachable)("Should not call ColorSpace.getOutputLength")}isPassthrough(t){return!1}isDefaultDecode(t,e){return a.isDefaultDecode(t,this.numComps)}fillRgb(t,e,i,r,n,o,s,a,l){const c=e*i;let h=null;const u=1<<s,p=i!==n||e!==r;if(this.isPassthrough(s))h=a;else if(1===this.numComps&&c>u&&"DeviceGray"!==this.name&&"DeviceRGB"!==this.name){const e=s<=8?new Uint8Array(u):new Uint16Array(u);for(let t=0;t<u;t++)e[t]=t;const i=new Uint8ClampedArray(3*u);if(this.getRgbBuffer(e,0,u,i,0,s,0),p){h=new Uint8Array(3*c);let t=0;for(let e=0;e<c;++e){const r=3*a[e];h[t++]=i[r],h[t++]=i[r+1],h[t++]=i[r+2]}}else{let e=0;for(let r=0;r<c;++r){const n=3*a[r];t[e++]=i[n],t[e++]=i[n+1],t[e++]=i[n+2],e+=l}}}else p?(h=new Uint8ClampedArray(3*c),this.getRgbBuffer(a,0,c,h,0,s,0)):this.getRgbBuffer(a,0,r*o,t,0,s,l);if(h)if(p)!function(t,e,i,r,n,o,s){s=1!==s?0:s;const a=i/n,l=r/o;let c,h=0;const u=new Uint16Array(n),p=3*i;for(let t=0;t<n;t++)u[t]=3*Math.floor(t*a);for(let i=0;i<o;i++){const r=Math.floor(i*l)*p;for(let i=0;i<n;i++)c=r+u[i],e[h++]=t[c++],e[h++]=t[c++],e[h++]=t[c++],h+=s}}(h,t,e,i,r,n,l);else{let e=0,i=0;for(let n=0,s=r*o;n<s;n++)t[e++]=h[i++],t[e++]=h[i++],t[e++]=h[i++],e+=l}}get usesZeroToOneRange(){return(0,r.shadow)(this,"usesZeroToOneRange",!0)}static _cache(t,e,i,r){if(!i)throw new Error('ColorSpace._cache - expected "localColorSpaceCache" argument.');if(!r)throw new Error('ColorSpace._cache - expected "parsedColorSpace" argument.');let o,s;t instanceof n.Ref&&(s=t,t=e.fetch(t)),t instanceof n.Name&&(o=t.name),(o||s)&&i.set(o,s,r)}static getCached(t,e,i){if(!i)throw new Error('ColorSpace.getCached - expected "localColorSpaceCache" argument.');if(t instanceof n.Ref){const r=i.getByRef(t);if(r)return r;try{t=e.fetch(t)}catch(t){if(t instanceof s.MissingDataException)throw t}}if(t instanceof n.Name){const e=i.getByName(t.name);if(e)return e}return null}static async parseAsync({cs:t,xref:e,resources:i=null,pdfFunctionFactory:r,localColorSpaceCache:n}){const o=this._parse(t,e,i,r);return this._cache(t,e,n,o),o}static parse({cs:t,xref:e,resources:i=null,pdfFunctionFactory:r,localColorSpaceCache:n}){const o=this.getCached(t,e,n);if(o)return o;const s=this._parse(t,e,i,r);return this._cache(t,e,n,s),s}static _parse(t,e,i=null,o){if((t=e.fetchIfRef(t))instanceof n.Name)switch(t.name){case"G":case"DeviceGray":return this.singletons.gray;case"RGB":case"DeviceRGB":return this.singletons.rgb;case"CMYK":case"DeviceCMYK":return this.singletons.cmyk;case"Pattern":return new c(null);default:if(i instanceof n.Dict){const r=i.get("ColorSpace");if(r instanceof n.Dict){const s=r.get(t.name);if(s){if(s instanceof n.Name)return this._parse(s,e,i,o);t=s;break}}}throw new r.FormatError(`Unrecognized ColorSpace: ${t.name}`)}if(Array.isArray(t)){const n=e.fetchIfRef(t[0]).name;let s,a,u,p,d,y;switch(n){case"G":case"DeviceGray":return this.singletons.gray;case"RGB":case"DeviceRGB":return this.singletons.rgb;case"CMYK":case"DeviceCMYK":return this.singletons.cmyk;case"CalGray":return s=e.fetchIfRef(t[1]),p=s.getArray("WhitePoint"),d=s.getArray("BlackPoint"),y=s.get("Gamma"),new f(p,d,y);case"CalRGB":s=e.fetchIfRef(t[1]),p=s.getArray("WhitePoint"),d=s.getArray("BlackPoint"),y=s.getArray("Gamma");const v=s.getArray("Matrix");return new g(p,d,y,v);case"ICCBased":const b=e.fetchIfRef(t[1]).dict;a=b.get("N");const w=b.get("Alternate");if(w){const t=this._parse(w,e,i,o);if(t.numComps===a)return t;(0,r.warn)("ICCBased color space: Ignoring incorrect /Alternate entry.")}if(1===a)return this.singletons.gray;if(3===a)return this.singletons.rgb;if(4===a)return this.singletons.cmyk;break;case"Pattern":return u=t[1]||null,u&&(u=this._parse(u,e,i,o)),new c(u);case"I":case"Indexed":u=this._parse(t[1],e,i,o);const x=e.fetchIfRef(t[2])+1,S=e.fetchIfRef(t[3]);return new h(u,x,S);case"Separation":case"DeviceN":const k=e.fetchIfRef(t[1]);a=Array.isArray(k)?k.length:1,u=this._parse(t[2],e,i,o);const C=o.create(t[3]);return new l(a,u,C);case"Lab":s=e.fetchIfRef(t[1]),p=s.getArray("WhitePoint"),d=s.getArray("BlackPoint");const A=s.getArray("Range");return new m(p,d,A);default:throw new r.FormatError(`Unimplemented ColorSpace object: ${n}`)}}throw new r.FormatError(`Unrecognized ColorSpace object: ${t}`)}static isDefaultDecode(t,e){if(!Array.isArray(t))return!0;if(2*e!==t.length)return(0,r.warn)("The decode map is not the correct length"),!0;for(let e=0,i=t.length;e<i;e+=2)if(0!==t[e]||1!==t[e+1])return!1;return!0}static get singletons(){return(0,r.shadow)(this,"singletons",{get gray(){return(0,r.shadow)(this,"gray",new u)},get rgb(){return(0,r.shadow)(this,"rgb",new p)},get cmyk(){return(0,r.shadow)(this,"cmyk",new d)}})}}e.ColorSpace=a;class l extends a{constructor(t,e,i){super("Alternate",t),this.base=e,this.tintFn=i,this.tmpBuf=new Float32Array(e.numComps)}getRgbItem(t,e,i,r){const n=this.tmpBuf;this.tintFn(t,e,n,0),this.base.getRgbItem(n,0,i,r)}getRgbBuffer(t,e,i,r,n,o,s){const a=this.tintFn,l=this.base,c=1/((1<<o)-1),h=l.numComps,u=l.usesZeroToOneRange,p=(l.isPassthrough(8)||!u)&&0===s;let d=p?n:0;const f=p?r:new Uint8ClampedArray(h*i),g=this.numComps,m=new Float32Array(g),y=new Float32Array(h);let v,b;for(v=0;v<i;v++){for(b=0;b<g;b++)m[b]=t[e++]*c;if(a(m,0,y,0),u)for(b=0;b<h;b++)f[d++]=255*y[b];else l.getRgbItem(y,0,f,d),d+=h}p||l.getRgbBuffer(f,0,i,r,n,8,s)}getOutputLength(t,e){return this.base.getOutputLength(t*this.base.numComps/this.numComps,e)}}class c extends a{constructor(t){super("Pattern",null),this.base=t}isDefaultDecode(t,e){(0,r.unreachable)("Should not call PatternCS.isDefaultDecode")}}class h extends a{constructor(t,e,i){super("Indexed",1),this.base=t,this.highVal=e;const n=t.numComps*e;if(this.lookup=new Uint8Array(n),i instanceof o.BaseStream){const t=i.getBytes(n);this.lookup.set(t)}else{if("string"!=typeof i)throw new r.FormatError(`IndexedCS - unrecognized lookup table: ${i}`);for(let t=0;t<n;++t)this.lookup[t]=255&i.charCodeAt(t)}}getRgbItem(t,e,i,r){const n=this.base.numComps,o=t[e]*n;this.base.getRgbBuffer(this.lookup,o,1,i,r,8,0)}getRgbBuffer(t,e,i,r,n,o,s){const a=this.base,l=a.numComps,c=a.getOutputLength(l,s),h=this.lookup;for(let o=0;o<i;++o){const i=t[e++]*l;a.getRgbBuffer(h,i,1,r,n,8,s),n+=c}}getOutputLength(t,e){return this.base.getOutputLength(t*this.base.numComps,e)}isDefaultDecode(t,e){return!Array.isArray(t)||(2!==t.length?((0,r.warn)("Decode map length is not correct"),!0):!Number.isInteger(e)||e<1?((0,r.warn)("Bits per component is not correct"),!0):0===t[0]&&t[1]===(1<<e)-1)}}class u extends a{constructor(){super("DeviceGray",1)}getRgbItem(t,e,i,r){const n=255*t[e];i[r]=i[r+1]=i[r+2]=n}getRgbBuffer(t,e,i,r,n,o,s){const a=255/((1<<o)-1);let l=e,c=n;for(let e=0;e<i;++e){const e=a*t[l++];r[c++]=e,r[c++]=e,r[c++]=e,c+=s}}getOutputLength(t,e){return t*(3+e)}}class p extends a{constructor(){super("DeviceRGB",3)}getRgbItem(t,e,i,r){i[r]=255*t[e],i[r+1]=255*t[e+1],i[r+2]=255*t[e+2]}getRgbBuffer(t,e,i,r,n,o,s){if(8===o&&0===s)return void r.set(t.subarray(e,e+3*i),n);const a=255/((1<<o)-1);let l=e,c=n;for(let e=0;e<i;++e)r[c++]=a*t[l++],r[c++]=a*t[l++],r[c++]=a*t[l++],c+=s}getOutputLength(t,e){return t*(3+e)/3|0}isPassthrough(t){return 8===t}}const d=function(){function t(t,e,i,r,n){const o=t[e]*i,s=t[e+1]*i,a=t[e+2]*i,l=t[e+3]*i;r[n]=255+o*(-4.387332384609988*o+54.48615194189176*s+18.82290502165302*a+212.25662451639585*l-285.2331026137004)+s*(1.7149763477362134*s-5.6096736904047315*a+-17.873870861415444*l-5.497006427196366)+a*(-2.5217340131683033*a-21.248923337353073*l+17.5119270841813)+l*(-21.86122147463605*l-189.48180835922747),r[n+1]=255+o*(8.841041422036149*o+60.118027045597366*s+6.871425592049007*a+31.159100130055922*l-79.2970844816548)+s*(-15.310361306967817*s+17.575251261109482*a+131.35250912493976*l-190.9453302588951)+a*(4.444339102852739*a+9.8632861493405*l-24.86741582555878)+l*(-20.737325471181034*l-187.80453709719578),r[n+2]=255+o*(.8842522430003296*o+8.078677503112928*s+30.89978309703729*a-.23883238689178934*l-14.183576799673286)+s*(10.49593273432072*s+63.02378494754052*a+50.606957656360734*l-112.23884253719248)+a*(.03296041114873217*a+115.60384449646641*l-193.58209356861505)+l*(-22.33816807309886*l-180.12613974708367)}return class extends a{constructor(){super("DeviceCMYK",4)}getRgbItem(e,i,r,n){t(e,i,1,r,n)}getRgbBuffer(e,i,r,n,o,s,a){const l=1/((1<<s)-1);for(let s=0;s<r;s++)t(e,i,l,n,o),i+=4,o+=3+a}getOutputLength(t,e){return t/4*(3+e)|0}}}(),f=function(){function t(t,e,i,r,n,o){const s=(e[i]*o)**t.G,a=t.YW*s,l=Math.max(295.8*a**.3333333333333333-40.8,0);r[n]=l,r[n+1]=l,r[n+2]=l}return class extends a{constructor(t,e,i){if(super("CalGray",1),!t)throw new r.FormatError("WhitePoint missing - required for color space CalGray");if(e=e||[0,0,0],i=i||1,this.XW=t[0],this.YW=t[1],this.ZW=t[2],this.XB=e[0],this.YB=e[1],this.ZB=e[2],this.G=i,this.XW<0||this.ZW<0||1!==this.YW)throw new r.FormatError(`Invalid WhitePoint components for ${this.name}, no fallback available`);(this.XB<0||this.YB<0||this.ZB<0)&&((0,r.info)(`Invalid BlackPoint for ${this.name}, falling back to default.`),this.XB=this.YB=this.ZB=0),0===this.XB&&0===this.YB&&0===this.ZB||(0,r.warn)(`${this.name}, BlackPoint: XB: ${this.XB}, YB: ${this.YB}, ZB: ${this.ZB}, only default values are supported.`),this.G<1&&((0,r.info)(`Invalid Gamma: ${this.G} for ${this.name}, falling back to default.`),this.G=1)}getRgbItem(e,i,r,n){t(this,e,i,r,n,1)}getRgbBuffer(e,i,r,n,o,s,a){const l=1/((1<<s)-1);for(let s=0;s<r;++s)t(this,e,i,n,o,l),i+=1,o+=3+a}getOutputLength(t,e){return t*(3+e)}}}(),g=function(){const t=new Float32Array([.8951,.2664,-.1614,-.7502,1.7135,.0367,.0389,-.0685,1.0296]),e=new Float32Array([.9869929,-.1470543,.1599627,.4323053,.5183603,.0492912,-.0085287,.0400428,.9684867]),i=new Float32Array([3.2404542,-1.5371385,-.4985314,-.969266,1.8760108,.041556,.0556434,-.2040259,1.0572252]),n=new Float32Array([1,1,1]),o=new Float32Array(3),s=new Float32Array(3),l=new Float32Array(3);function c(t,e,i){i[0]=t[0]*e[0]+t[1]*e[1]+t[2]*e[2],i[1]=t[3]*e[0]+t[4]*e[1]+t[5]*e[2],i[2]=t[6]*e[0]+t[7]*e[1]+t[8]*e[2]}function h(t){return t<=.0031308?u(0,1,12.92*t):t>=.99554525?1:u(0,1,1.055*t**(1/2.4)-.055)}function u(t,e,i){return Math.max(t,Math.min(e,i))}function p(t){return t<0?-p(-t):t>8?((t+16)/116)**3:.0011070564598794539*t}function d(r,a,d,f,g,m){const y=u(0,1,a[d]*m),v=u(0,1,a[d+1]*m),b=u(0,1,a[d+2]*m),w=1===y?1:y**r.GR,x=1===v?1:v**r.GG,S=1===b?1:b**r.GB,k=r.MXA*w+r.MXB*x+r.MXC*S,C=r.MYA*w+r.MYB*x+r.MYC*S,A=r.MZA*w+r.MZB*x+r.MZC*S,_=s;_[0]=k,_[1]=C,_[2]=A;const T=l;!function(i,r,n){if(1===i[0]&&1===i[2])return n[0]=r[0],n[1]=r[1],void(n[2]=r[2]);const s=n;c(t,r,s);const a=o;!function(t,e,i){i[0]=1*e[0]/t[0],i[1]=1*e[1]/t[1],i[2]=1*e[2]/t[2]}(i,s,a),c(e,a,n)}(r.whitePoint,_,T);const O=s;!function(t,e,i){if(0===t[0]&&0===t[1]&&0===t[2])return i[0]=e[0],i[1]=e[1],void(i[2]=e[2]);const r=p(0),n=(1-r)/(1-p(t[0])),o=1-n,s=(1-r)/(1-p(t[1])),a=1-s,l=(1-r)/(1-p(t[2])),c=1-l;i[0]=e[0]*n+o,i[1]=e[1]*s+a,i[2]=e[2]*l+c}(r.blackPoint,T,O);const E=l;!function(i,r,n){const s=n;c(t,r,s);const a=o;!function(t,e,i){i[0]=.95047*e[0]/t[0],i[1]=1*e[1]/t[1],i[2]=1.08883*e[2]/t[2]}(i,s,a),c(e,a,n)}(n,O,E);const M=s;c(i,E,M),f[g]=255*h(M[0]),f[g+1]=255*h(M[1]),f[g+2]=255*h(M[2])}return class extends a{constructor(t,e,i,n){if(super("CalRGB",3),!t)throw new r.FormatError("WhitePoint missing - required for color space CalRGB");e=e||new Float32Array(3),i=i||new Float32Array([1,1,1]),n=n||new Float32Array([1,0,0,0,1,0,0,0,1]);const o=t[0],s=t[1],a=t[2];this.whitePoint=t;const l=e[0],c=e[1],h=e[2];if(this.blackPoint=e,this.GR=i[0],this.GG=i[1],this.GB=i[2],this.MXA=n[0],this.MYA=n[1],this.MZA=n[2],this.MXB=n[3],this.MYB=n[4],this.MZB=n[5],this.MXC=n[6],this.MYC=n[7],this.MZC=n[8],o<0||a<0||1!==s)throw new r.FormatError(`Invalid WhitePoint components for ${this.name}, no fallback available`);(l<0||c<0||h<0)&&((0,r.info)(`Invalid BlackPoint for ${this.name} [${l}, ${c}, ${h}], falling back to default.`),this.blackPoint=new Float32Array(3)),(this.GR<0||this.GG<0||this.GB<0)&&((0,r.info)(`Invalid Gamma [${this.GR}, ${this.GG}, ${this.GB}] for ${this.name}, falling back to default.`),this.GR=this.GG=this.GB=1)}getRgbItem(t,e,i,r){d(this,t,e,i,r,1)}getRgbBuffer(t,e,i,r,n,o,s){const a=1/((1<<o)-1);for(let o=0;o<i;++o)d(this,t,e,r,n,a),e+=3,n+=3+s}getOutputLength(t,e){return t*(3+e)/3|0}}}(),m=function(){function t(t){let e;return e=t>=6/29?t**3:108/841*(t-4/29),e}function e(t,e,i,r){return i+t*(r-i)/e}function i(i,r,n,o,s,a){let l=r[n],c=r[n+1],h=r[n+2];!1!==o&&(l=e(l,o,0,100),c=e(c,o,i.amin,i.amax),h=e(h,o,i.bmin,i.bmax)),c>i.amax?c=i.amax:c<i.amin&&(c=i.amin),h>i.bmax?h=i.bmax:h<i.bmin&&(h=i.bmin);const u=(l+16)/116,p=u+c/500,d=u-h/200,f=i.XW*t(p),g=i.YW*t(u),m=i.ZW*t(d);let y,v,b;i.ZW<1?(y=3.1339*f+-1.617*g+-.4906*m,v=-.9785*f+1.916*g+.0333*m,b=.072*f+-.229*g+1.4057*m):(y=3.2406*f+-1.5372*g+-.4986*m,v=-.9689*f+1.8758*g+.0415*m,b=.0557*f+-.204*g+1.057*m),s[a]=255*Math.sqrt(y),s[a+1]=255*Math.sqrt(v),s[a+2]=255*Math.sqrt(b)}return class extends a{constructor(t,e,i){if(super("Lab",3),!t)throw new r.FormatError("WhitePoint missing - required for color space Lab");if(e=e||[0,0,0],i=i||[-100,100,-100,100],this.XW=t[0],this.YW=t[1],this.ZW=t[2],this.amin=i[0],this.amax=i[1],this.bmin=i[2],this.bmax=i[3],this.XB=e[0],this.YB=e[1],this.ZB=e[2],this.XW<0||this.ZW<0||1!==this.YW)throw new r.FormatError("Invalid WhitePoint components, no fallback available");(this.XB<0||this.YB<0||this.ZB<0)&&((0,r.info)("Invalid BlackPoint, falling back to default"),this.XB=this.YB=this.ZB=0),(this.amin>this.amax||this.bmin>this.bmax)&&((0,r.info)("Invalid Range, falling back to defaults"),this.amin=-100,this.amax=100,this.bmin=-100,this.bmax=100)}getRgbItem(t,e,r,n){i(this,t,e,!1,r,n)}getRgbBuffer(t,e,r,n,o,s,a){const l=(1<<s)-1;for(let s=0;s<r;s++)i(this,t,e,l,n,o),e+=3,o+=3+a}getOutputLength(t,e){return t*(3+e)/3|0}isDefaultDecode(t,e){return!0}get usesZeroToOneRange(){return(0,r.shadow)(this,"usesZeroToOneRange",!1)}}}()},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PartialEvaluator=e.EvaluatorPreprocessor=void 0;var r=i(2),n=i(26),o=i(5),s=i(44),a=i(18),l=i(19),c=i(47),h=i(21),u=i(56),p=i(12),d=i(48),f=i(57),g=i(27),m=i(59),y=i(10),v=i(9),b=i(60),w=i(24),x=i(29),S=i(20),k=i(8),C=i(51),A=i(61),_=i(62),T=i(63);const O=Object.freeze({maxImageSize:-1,disableFontFace:!1,ignoreErrors:!1,isEvalSupported:!0,fontExtraProperties:!1,useSystemFonts:!0,cMapUrl:null,standardFontDataUrl:null}),E=1,M=2,P=Promise.resolve();function I(t,e=!1){if(Array.isArray(t)){for(let e=0,i=t.length;e<i;e++){const i=I(t[e],!0);if(i)return i}return(0,r.warn)(`Unsupported blend mode Array: ${t}`),"source-over"}if(!(t instanceof o.Name))return e?null:"source-over";switch(t.name){case"Normal":case"Compatible":return"source-over";case"Multiply":return"multiply";case"Screen":return"screen";case"Overlay":return"overlay";case"Darken":return"darken";case"Lighten":return"lighten";case"ColorDodge":return"color-dodge";case"ColorBurn":return"color-burn";case"HardLight":return"hard-light";case"SoftLight":return"soft-light";case"Difference":return"difference";case"Exclusion":return"exclusion";case"Hue":return"hue";case"Saturation":return"saturation";case"Color":return"color";case"Luminosity":return"luminosity"}return e?null:((0,r.warn)(`Unsupported blend mode: ${t.name}`),"source-over")}function D(t){t.fn===r.OPS.paintImageMaskXObject&&t.args[0]&&t.args[0].count>0&&t.args[0].count++}class F{static get TIME_SLOT_DURATION_MS(){return(0,r.shadow)(this,"TIME_SLOT_DURATION_MS",20)}static get CHECK_TIME_EVERY(){return(0,r.shadow)(this,"CHECK_TIME_EVERY",100)}constructor(){this.reset()}check(){return!(++this.checked<F.CHECK_TIME_EVERY)&&(this.checked=0,this.endTime<=Date.now())}reset(){this.endTime=Date.now()+F.TIME_SLOT_DURATION_MS,this.checked=0}}class R{constructor({xref:t,handler:e,pageIndex:i,idFactory:r,fontCache:n,builtInCMapCache:o,standardFontDataCache:s,globalImageCache:a,options:l=null}){this.xref=t,this.handler=e,this.pageIndex=i,this.idFactory=r,this.fontCache=n,this.builtInCMapCache=o,this.standardFontDataCache=s,this.globalImageCache=a,this.options=l||O,this.parsingType3Font=!1,this._fetchBuiltInCMapBound=this.fetchBuiltInCMap.bind(this)}get _pdfFunctionFactory(){const t=new f.PDFFunctionFactory({xref:this.xref,isEvalSupported:this.options.isEvalSupported});return(0,r.shadow)(this,"_pdfFunctionFactory",t)}clone(t=null){const e=Object.create(this);return e.options=Object.assign(Object.create(null),this.options,t),e}hasBlendModes(t,e){if(!(t instanceof o.Dict))return!1;if(t.objId&&e.has(t.objId))return!1;const i=new o.RefSet(e);t.objId&&i.put(t.objId);const n=[t],s=this.xref;for(;n.length;){const t=n.shift(),e=t.get("ExtGState");if(e instanceof o.Dict)for(let t of e.getRawValues()){if(t instanceof o.Ref){if(i.has(t))continue;try{t=s.fetch(t)}catch(e){i.put(t),(0,r.info)(`hasBlendModes - ignoring ExtGState: "${e}".`);continue}}if(!(t instanceof o.Dict))continue;t.objId&&i.put(t.objId);const e=t.get("BM");if(e instanceof o.Name){if("Normal"!==e.name)return!0}else if(void 0!==e&&Array.isArray(e))for(const t of e)if(t instanceof o.Name&&"Normal"!==t.name)return!0}const a=t.get("XObject");if(a instanceof o.Dict)for(let t of a.getRawValues()){if(t instanceof o.Ref){if(i.has(t))continue;try{t=s.fetch(t)}catch(e){i.put(t),(0,r.info)(`hasBlendModes - ignoring XObject: "${e}".`);continue}}if(!(t instanceof v.BaseStream))continue;t.dict.objId&&i.put(t.dict.objId);const e=t.dict.get("Resources");e instanceof o.Dict&&(e.objId&&i.has(e.objId)||(n.push(e),e.objId&&i.put(e.objId)))}}for(const t of i)e.put(t);return!1}async fetchBuiltInCMap(t){const e=this.builtInCMapCache.get(t);if(e)return e;let i;if(null!==this.options.cMapUrl){const e=`${this.options.cMapUrl}${t}.bcmap`,n=await fetch(e);if(!n.ok)throw new Error(`fetchBuiltInCMap: failed to fetch file "${e}" with "${n.statusText}".`);i={cMapData:new Uint8Array(await n.arrayBuffer()),compressionType:r.CMapCompressionType.BINARY}}else i=await this.handler.sendWithPromise("FetchBuiltInCMap",{name:t});return i.compressionType!==r.CMapCompressionType.NONE&&this.builtInCMapCache.set(t,i),i}async fetchStandardFontData(t){const e=this.standardFontDataCache.get(t);if(e)return new y.Stream(e);if(this.options.useSystemFonts&&"Symbol"!==t&&"ZapfDingbats"!==t)return null;const i=(0,c.getFontNameToFileMap)()[t];let n;if(null!==this.options.standardFontDataUrl){const t=`${this.options.standardFontDataUrl}${i}`,e=await fetch(t);e.ok?n=await e.arrayBuffer():(0,r.warn)(`fetchStandardFontData: failed to fetch file "${t}" with "${e.statusText}".`)}else try{n=await this.handler.sendWithPromise("FetchStandardFontData",{filename:i})}catch(t){(0,r.warn)(`fetchStandardFontData: failed to fetch file "${i}" with "${t}".`)}return n?(this.standardFontDataCache.set(t,n),new y.Stream(n)):null}async buildFormXObject(t,e,i,n,s,a,l){const c=e.dict,h=c.getArray("Matrix");let u,p,d=c.getArray("BBox");d=Array.isArray(d)&&4===d.length?r.Util.normalizeRect(d):null,c.has("OC")&&(u=await this.parseMarkedContentProps(c.get("OC"),t)),void 0!==u&&n.addOp(r.OPS.beginMarkedContentProps,["OC",u]);const f=c.get("Group");if(f){p={matrix:h,bbox:d,smask:i,isolated:!1,knockout:!1};const e=f.get("S");let s=null;if((0,o.isName)(e,"Transparency")&&(p.isolated=f.get("I")||!1,p.knockout=f.get("K")||!1,f.has("CS"))){const e=f.getRaw("CS"),i=w.ColorSpace.getCached(e,this.xref,l);s=i||await this.parseColorSpace({cs:e,resources:t,localColorSpaceCache:l})}i&&i.backdrop&&(s=s||w.ColorSpace.singletons.rgb,i.backdrop=s.getRgb(i.backdrop,0)),n.addOp(r.OPS.beginGroup,[p])}const g=f?[h,null]:[h,d];return n.addOp(r.OPS.paintFormXObjectBegin,g),this.getOperatorList({stream:e,task:s,resources:c.get("Resources")||t,operatorList:n,initialState:a}).then((function(){n.addOp(r.OPS.paintFormXObjectEnd,[]),f&&n.addOp(r.OPS.endGroup,[p]),void 0!==u&&n.addOp(r.OPS.endMarkedContent,[])}))}_sendImgData(t,e,i=!1){const r=e?[e.bitmap||e.data.buffer]:null;return this.parsingType3Font||i?this.handler.send("commonobj",[t,"Image",e],r):this.handler.send("obj",[t,this.pageIndex,"Image",e],r)}async buildPaintImageXObject({resources:t,image:e,isInline:i=!1,operatorList:n,cacheKey:o,localImageCache:s,localColorSpaceCache:a}){const l=e.dict,c=l.objId,h=l.get("W","Width"),u=l.get("H","Height");if(!h||"number"!=typeof h||!u||"number"!=typeof u)return void(0,r.warn)("Image dimensions are missing, or not numbers.");const p=this.options.maxImageSize;if(-1!==p&&h*u>p){const t="Image exceeded maximum allowed size and was removed.";if(this.options.ignoreErrors)return void(0,r.warn)(t);throw new Error(t)}let d,f,g;if(l.has("OC")&&(d=await this.parseMarkedContentProps(l.get("OC"),t)),l.get("IM","ImageMask")){const t=l.get("I","Interpolate"),i=h+7>>3,a=e.getBytes(i*u),p=l.getArray("D","Decode");if(this.parsingType3Font)return f=T.PDFImage.createRawMask({imgArray:a,width:h,height:u,imageIsFromDecodeStream:e instanceof x.DecodeStream,inverseDecode:!!p&&p[0]>0,interpolate:t}),f.cached=!!o,g=[f],n.addImageOps(r.OPS.paintImageMaskXObject,g,d),void(o&&s.set(o,c,{fn:r.OPS.paintImageMaskXObject,args:g,optionalContent:d}));if(f=T.PDFImage.createMask({imgArray:a,width:h,height:u,imageIsFromDecodeStream:e instanceof x.DecodeStream,inverseDecode:!!p&&p[0]>0,interpolate:t}),f.isSingleOpaquePixel)return n.addImageOps(r.OPS.paintSolidColorImageMask,[],d),void(o&&s.set(o,c,{fn:r.OPS.paintSolidColorImageMask,args:[],optionalContent:d}));const m=`mask_${this.idFactory.createObjId()}`;return n.addDependency(m),this._sendImgData(m,f),g=[{data:m,width:f.width,height:f.height,interpolate:f.interpolate,count:1}],n.addImageOps(r.OPS.paintImageMaskXObject,g,d),void(o&&s.set(o,c,{fn:r.OPS.paintImageMaskXObject,args:g,optionalContent:d}))}const m=l.get("SM","SMask")||!1,y=l.get("Mask")||!1;if(i&&!m&&!y&&h+u<200){const o=new T.PDFImage({xref:this.xref,res:t,image:e,isInline:i,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:a});return f=o.createImageData(!0),void n.addImageOps(r.OPS.paintInlineImageXObject,[f],d)}let v=`img_${this.idFactory.createObjId()}`,b=!1;this.parsingType3Font?v=`${this.idFactory.getDocId()}_type3_${v}`:c&&(b=this.globalImageCache.shouldCache(c,this.pageIndex),b&&(v=`${this.idFactory.getDocId()}_${v}`)),n.addDependency(v),g=[v,h,u],T.PDFImage.buildImage({xref:this.xref,res:t,image:e,isInline:i,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:a}).then((t=>(f=t.createImageData(!1),o&&c&&b&&this.globalImageCache.addByteSize(c,f.data.length),this._sendImgData(v,f,b)))).catch((t=>((0,r.warn)(`Unable to decode image "${v}": "${t}".`),this._sendImgData(v,null,b)))),n.addImageOps(r.OPS.paintImageXObject,g,d),o&&(s.set(o,c,{fn:r.OPS.paintImageXObject,args:g,optionalContent:d}),c&&((0,r.assert)(!i,"Cannot cache an inline image globally."),this.globalImageCache.addPageIndex(c,this.pageIndex),b&&this.globalImageCache.setData(c,{objId:v,fn:r.OPS.paintImageXObject,args:g,optionalContent:d,byteSize:0})))}handleSMask(t,e,i,r,n,o){const s=t.get("G"),a={subtype:t.get("S").name,backdrop:t.get("BC")},l=t.get("TR");if((0,f.isPDFFunction)(l)){const t=this._pdfFunctionFactory.create(l),e=new Uint8Array(256),i=new Float32Array(1);for(let r=0;r<256;r++)i[0]=r/255,t(i,0,i,0),e[r]=255*i[0]|0;a.transferMap=e}return this.buildFormXObject(e,s,a,i,r,n.state.clone(),o)}handleTransferFunction(t){let e;if(Array.isArray(t))e=t;else{if(!(0,f.isPDFFunction)(t))return null;e=[t]}const i=[];let r=0,n=0;for(const t of e){const e=this.xref.fetchIfRef(t);if(r++,(0,o.isName)(e,"Identity")){i.push(null);continue}if(!(0,f.isPDFFunction)(e))return null;const s=this._pdfFunctionFactory.create(e),a=new Uint8Array(256),l=new Float32Array(1);for(let t=0;t<256;t++)l[0]=t/255,s(l,0,l,0),a[t]=255*l[0]|0;i.push(a),n++}return 1!==r&&4!==r||0===n?null:i}handleTilingType(t,e,i,n,s,a,l,c){const h=new _.OperatorList,p=o.Dict.merge({xref:this.xref,dictArray:[s.get("Resources"),i]});return this.getOperatorList({stream:n,task:l,resources:p,operatorList:h}).then((function(){const i=h.getIR(),r=(0,u.getTilingPatternIR)(i,s,e);a.addDependencies(h.dependencies),a.addOp(t,r),s.objId&&c.set(null,s.objId,{operatorListIR:i,dict:s})})).catch((t=>{if(!(t instanceof r.AbortException)){if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorTilingPattern}),void(0,r.warn)(`handleTilingType - ignoring pattern: "${t}".`);throw t}}))}handleSetFont(t,e,i,n,a,l,c=null,h=null){const u=e&&e[0]instanceof o.Name?e[0].name:null;return this.loadFont(u,i,t,c,h).then((e=>e.font.isType3Font?e.loadType3Data(this,t,a).then((function(){return n.addDependencies(e.type3Dependencies),e})).catch((t=>(this.handler.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorFontLoadType3}),new L({loadedName:"g_font_error",font:new s.ErrorFont(`Type3 font load error: ${t}`),dict:e.font,evaluatorOptions:this.options})))):e)).then((t=>(l.font=t.font,t.send(this.handler),t.loadedName)))}handleText(t,e){const i=e.font,n=i.charsToGlyphs(t);return i.data&&(e.textRenderingMode&r.TextRenderingMode.ADD_TO_PATH_FLAG||"Pattern"===e.fillColorSpace.name||i.disableFontFace||this.options.disableFontFace)&&R.buildFontPaths(i,n,this.handler,this.options),n}ensureStateFont(t){if(t.font)return;const e=new r.FormatError("Missing setFont (Tf) operator before text rendering operator.");if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorFontState}),void(0,r.warn)(`ensureStateFont: "${e}".`);throw e}async setGState({resources:t,gState:e,operatorList:i,cacheKey:n,task:s,stateManager:a,localGStateCache:l,localColorSpaceCache:c}){const h=e.objId;let u=!0;const p=[],d=e.getKeys();let f=Promise.resolve();for(let n=0,l=d.length;n<l;n++){const l=d[n],h=e.get(l);switch(l){case"Type":break;case"LW":case"LC":case"LJ":case"ML":case"D":case"RI":case"FL":case"CA":case"ca":p.push([l,h]);break;case"Font":u=!1,f=f.then((()=>this.handleSetFont(t,null,h[0],i,s,a.state).then((function(t){i.addDependency(t),p.push([l,[t,h[1]]])}))));break;case"BM":p.push([l,I(h)]);break;case"SMask":if((0,o.isName)(h,"None")){p.push([l,!1]);break}h instanceof o.Dict?(u=!1,f=f.then((()=>this.handleSMask(h,t,i,s,a,c))),p.push([l,!0])):(0,r.warn)("Unsupported SMask type");break;case"TR":const e=this.handleTransferFunction(h);p.push([l,e]);break;case"OP":case"op":case"OPM":case"BG":case"BG2":case"UCR":case"UCR2":case"TR2":case"HT":case"SM":case"SA":case"AIS":case"TK":(0,r.info)("graphic state operator "+l);break;default:(0,r.info)("Unknown graphic state operator "+l)}}return f.then((function(){p.length>0&&i.addOp(r.OPS.setGState,[p]),u&&l.set(n,h,p)}))}loadFont(t,e,i,n=null,l=null){const c=async()=>new L({loadedName:"g_font_error",font:new s.ErrorFont(`Font "${t}" is not available.`),dict:e,evaluatorOptions:this.options}),h=this.xref;let u;if(e){if(!(e instanceof o.Ref))throw new r.FormatError('The "font" object should be a reference.');u=e}else{const e=i.get("Font");e&&(u=e.getRaw(t))}if(!u){const i=`Font "${t||e&&e.toString()}" is not available`;if(!this.options.ignoreErrors&&!this.parsingType3Font)return(0,r.warn)(`${i}.`),c();this.handler.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorFontMissing}),(0,r.warn)(`${i} -- attempting to fallback to a default font.`),u=n||R.fallbackFontDict}if(this.parsingType3Font&&this.type3FontRefs.has(u))return c();if(this.fontCache.has(u))return this.fontCache.get(u);if(!((e=h.fetchIfRef(u))instanceof o.Dict))return c();if(e.cacheKey&&this.fontCache.has(e.cacheKey))return this.fontCache.get(e.cacheKey);const p=(0,r.createPromiseCapability)();let d;try{d=this.preEvaluateFont(e),d.cssFontInfo=l}catch(t){return(0,r.warn)(`loadFont - preEvaluateFont failed: "${t}".`),c()}const{descriptor:f,hash:g}=d,m=u instanceof o.Ref;let y;if(m&&(y=`f${u.toString()}`),g&&f instanceof o.Dict){f.fontAliases||(f.fontAliases=Object.create(null));const t=f.fontAliases;if(t[g]){const e=t[g].aliasRef;if(m&&e&&this.fontCache.has(e))return this.fontCache.putAlias(u,e),this.fontCache.get(u)}else t[g]={fontID:this.idFactory.createFontId()};m&&(t[g].aliasRef=u),y=t[g].fontID}return m?this.fontCache.put(u,p.promise):(y||(y=this.idFactory.createFontId()),e.cacheKey=`cacheKey_${y}`,this.fontCache.put(e.cacheKey,p.promise)),(0,r.assert)(y&&y.startsWith("f"),'The "fontID" must be (correctly) defined.'),e.loadedName=`${this.idFactory.getDocId()}_${y}`,this.translateFont(d).then((t=>{void 0!==t.fontType&&h.stats.addFontType(t.fontType),p.resolve(new L({loadedName:e.loadedName,font:t,dict:e,evaluatorOptions:this.options}))})).catch((t=>{this.handler.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorFontTranslate}),(0,r.warn)(`loadFont - translateFont failed: "${t}".`);try{const t=f&&f.get("FontFile3"),e=t&&t.get("Subtype"),i=(0,a.getFontType)(d.type,e&&e.name);void 0!==i&&h.stats.addFontType(i)}catch(t){}p.resolve(new L({loadedName:e.loadedName,font:new s.ErrorFont(t instanceof Error?t.message:t),dict:e,evaluatorOptions:this.options}))})),p.promise}buildPath(t,e,i,n=!1){const o=t.length-1;let s;if(i||(i=[]),o<0||t.fnArray[o]!==r.OPS.constructPath)n&&((0,r.warn)(`Encountered path operator "${e}" inside of a text object.`),t.addOp(r.OPS.save,null)),s=[1/0,-1/0,1/0,-1/0],t.addOp(r.OPS.constructPath,[[e],i,s]),n&&t.addOp(r.OPS.restore,null);else{const r=t.argsArray[o];r[0].push(e),Array.prototype.push.apply(r[1],i),s=r[2]}switch(e){case r.OPS.rectangle:s[0]=Math.min(s[0],i[0],i[0]+i[2]),s[1]=Math.max(s[1],i[0],i[0]+i[2]),s[2]=Math.min(s[2],i[1],i[1]+i[3]),s[3]=Math.max(s[3],i[1],i[1]+i[3]);break;case r.OPS.moveTo:case r.OPS.lineTo:s[0]=Math.min(s[0],i[0]),s[1]=Math.max(s[1],i[0]),s[2]=Math.min(s[2],i[1]),s[3]=Math.max(s[3],i[1])}}parseColorSpace({cs:t,resources:e,localColorSpaceCache:i}){return w.ColorSpace.parseAsync({cs:t,xref:this.xref,resources:e,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:i}).catch((t=>{if(t instanceof r.AbortException)return null;if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorColorSpace}),(0,r.warn)(`parseColorSpace - ignoring ColorSpace: "${t}".`),null;throw t}))}parseShading({shading:t,resources:e,localColorSpaceCache:i,localShadingPatternCache:r}){let n=r.get(t);if(!n){const o=u.Pattern.parseShading(t,this.xref,e,this.handler,this._pdfFunctionFactory,i).getIR();n=`pattern_${this.idFactory.createObjId()}`,r.set(t,n),this.handler.send("obj",[n,this.pageIndex,"Pattern",o])}return n}handleColorN(t,e,i,n,s,a,l,c,h,p){const d=i.pop();if(d instanceof o.Name){const f=s.getRaw(d.name),g=f instanceof o.Ref&&h.getByRef(f);if(g)try{const r=n.base?n.base.getRgb(i,0):null,o=(0,u.getTilingPatternIR)(g.operatorListIR,g.dict,r);return void t.addOp(e,o)}catch(t){}const m=this.xref.fetchIfRef(f);if(m){const o=m instanceof v.BaseStream?m.dict:m,s=o.get("PatternType");if(s===E){const r=n.base?n.base.getRgb(i,0):null;return this.handleTilingType(e,r,a,m,o,t,l,h)}if(s===M){const i=o.get("Shading"),r=o.getArray("Matrix"),n=this.parseShading({shading:i,resources:a,localColorSpaceCache:c,localShadingPatternCache:p});return void t.addOp(e,["Shading",n,r])}throw new r.FormatError(`Unknown PatternType: ${s}`)}}throw new r.FormatError(`Unknown PatternName: ${d}`)}_parseVisibilityExpression(t,e,i){if(++e>10)return void(0,r.warn)("Visibility expression is too deeply nested");const n=t.length,s=this.xref.fetchIfRef(t[0]);if(!(n<2)&&s instanceof o.Name){switch(s.name){case"And":case"Or":case"Not":i.push(s.name);break;default:return void(0,r.warn)(`Invalid operator ${s.name} in visibility expression`)}for(let r=1;r<n;r++){const n=t[r],s=this.xref.fetchIfRef(n);if(Array.isArray(s)){const t=[];i.push(t),this._parseVisibilityExpression(s,e,t)}else n instanceof o.Ref&&i.push(n.toString())}}else(0,r.warn)("Invalid visibility expression")}async parseMarkedContentProps(t,e){let i;if(t instanceof o.Name)i=e.get("Properties").get(t.name);else{if(!(t instanceof o.Dict))throw new r.FormatError("Optional content properties malformed.");i=t}const n=i.get("Type").name;if("OCG"===n)return{type:n,id:i.objId};if("OCMD"===n){const t=i.get("VE");if(Array.isArray(t)){const e=[];if(this._parseVisibilityExpression(t,0,e),e.length>0)return{type:"OCMD",expression:e}}const e=i.get("OCGs");if(Array.isArray(e)||e instanceof o.Dict){const t=[];if(Array.isArray(e))for(const i of e)t.push(i.toString());else t.push(e.objId);return{type:n,ids:t,policy:i.get("P")instanceof o.Name?i.get("P").name:null,expression:null}}if(e instanceof o.Ref)return{type:n,id:e.toString()}}return null}getOperatorList({stream:t,task:e,resources:i,operatorList:n,initialState:s=null,fallbackFontDict:a=null}){if(i=i||o.Dict.empty,s=s||new j,!n)throw new Error('getOperatorList: missing "operatorList" parameter');const l=this,c=this.xref;let h=!1;const u=new m.LocalImageCache,p=new m.LocalColorSpaceCache,d=new m.LocalGStateCache,f=new m.LocalTilingPatternCache,g=new Map,y=i.get("XObject")||o.Dict.empty,b=i.get("Pattern")||o.Dict.empty,x=new N(s),S=new z(t,c,x),k=new F;function C(t){for(let t=0,e=S.savedStatesDepth;t<e;t++)n.addOp(r.OPS.restore,[])}return new Promise((function t(s,m){const A=function(e){Promise.all([e,n.ready]).then((function(){try{t(s,m)}catch(t){m(t)}}),m)};e.ensureNotTerminated(),k.reset();const _={};let T,O,E,M,I,F;for(;!(T=k.check())&&(_.args=null,S.read(_));){let t=_.args,s=_.fn;switch(0|s){case r.OPS.paintXObject:if(F=t[0]instanceof o.Name,I=t[0].name,F){const e=u.getByName(I);if(e){n.addImageOps(e.fn,e.args,e.optionalContent),D(e),t=null;continue}}return void A(new Promise((function(t,s){if(!F)throw new r.FormatError("XObject must be referred to by name.");let a=y.getRaw(I);if(a instanceof o.Ref){const e=u.getByRef(a);if(e)return n.addImageOps(e.fn,e.args,e.optionalContent),D(e),void t();const i=l.globalImageCache.getData(a,l.pageIndex);if(i)return n.addDependency(i.objId),n.addImageOps(i.fn,i.args,i.optionalContent),void t();a=c.fetch(a)}if(!(a instanceof v.BaseStream))throw new r.FormatError("XObject should be a stream");const h=a.dict.get("Subtype");if(!(h instanceof o.Name))throw new r.FormatError("XObject should have a Name subtype");if("Form"===h.name)return x.save(),void l.buildFormXObject(i,a,null,n,e,x.state.clone(),p).then((function(){x.restore(),t()}),s);if("Image"!==h.name){if("PS"!==h.name)throw new r.FormatError(`Unhandled XObject subtype ${h.name}`);(0,r.info)("Ignored XObject subtype PS"),t()}else l.buildPaintImageXObject({resources:i,image:a,operatorList:n,cacheKey:I,localImageCache:u,localColorSpaceCache:p}).then(t,s)})).catch((function(t){if(!(t instanceof r.AbortException)){if(l.options.ignoreErrors)return l.handler.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorXObject}),void(0,r.warn)(`getOperatorList - ignoring XObject: "${t}".`);throw t}})));case r.OPS.setFont:var R=t[1];return void A(l.handleSetFont(i,t,null,n,e,x.state,a).then((function(t){n.addDependency(t),n.addOp(r.OPS.setFont,[t,R])})));case r.OPS.beginText:h=!0;break;case r.OPS.endText:h=!1;break;case r.OPS.endInlineImage:var L=t[0].cacheKey;if(L){const e=u.getByName(L);if(e){n.addImageOps(e.fn,e.args,e.optionalContent),D(e),t=null;continue}}return void A(l.buildPaintImageXObject({resources:i,image:t[0],isInline:!0,operatorList:n,cacheKey:L,localImageCache:u,localColorSpaceCache:p}));case r.OPS.showText:if(!x.state.font){l.ensureStateFont(x.state);continue}t[0]=l.handleText(t[0],x.state);break;case r.OPS.showSpacedText:if(!x.state.font){l.ensureStateFont(x.state);continue}var N=t[0],B=[],j=N.length,z=x.state;for(O=0;O<j;++O){const t=N[O];"string"==typeof t?Array.prototype.push.apply(B,l.handleText(t,z)):"number"==typeof t&&B.push(t)}t[0]=B,s=r.OPS.showText;break;case r.OPS.nextLineShowText:if(!x.state.font){l.ensureStateFont(x.state);continue}n.addOp(r.OPS.nextLine),t[0]=l.handleText(t[0],x.state),s=r.OPS.showText;break;case r.OPS.nextLineSetSpacingShowText:if(!x.state.font){l.ensureStateFont(x.state);continue}n.addOp(r.OPS.nextLine),n.addOp(r.OPS.setWordSpacing,[t.shift()]),n.addOp(r.OPS.setCharSpacing,[t.shift()]),t[0]=l.handleText(t[0],x.state),s=r.OPS.showText;break;case r.OPS.setTextRenderingMode:x.state.textRenderingMode=t[0];break;case r.OPS.setFillColorSpace:{const e=w.ColorSpace.getCached(t[0],c,p);if(e){x.state.fillColorSpace=e;continue}return void A(l.parseColorSpace({cs:t[0],resources:i,localColorSpaceCache:p}).then((function(t){t&&(x.state.fillColorSpace=t)})))}case r.OPS.setStrokeColorSpace:{const e=w.ColorSpace.getCached(t[0],c,p);if(e){x.state.strokeColorSpace=e;continue}return void A(l.parseColorSpace({cs:t[0],resources:i,localColorSpaceCache:p}).then((function(t){t&&(x.state.strokeColorSpace=t)})))}case r.OPS.setFillColor:M=x.state.fillColorSpace,t=M.getRgb(t,0),s=r.OPS.setFillRGBColor;break;case r.OPS.setStrokeColor:M=x.state.strokeColorSpace,t=M.getRgb(t,0),s=r.OPS.setStrokeRGBColor;break;case r.OPS.setFillGray:x.state.fillColorSpace=w.ColorSpace.singletons.gray,t=w.ColorSpace.singletons.gray.getRgb(t,0),s=r.OPS.setFillRGBColor;break;case r.OPS.setStrokeGray:x.state.strokeColorSpace=w.ColorSpace.singletons.gray,t=w.ColorSpace.singletons.gray.getRgb(t,0),s=r.OPS.setStrokeRGBColor;break;case r.OPS.setFillCMYKColor:x.state.fillColorSpace=w.ColorSpace.singletons.cmyk,t=w.ColorSpace.singletons.cmyk.getRgb(t,0),s=r.OPS.setFillRGBColor;break;case r.OPS.setStrokeCMYKColor:x.state.strokeColorSpace=w.ColorSpace.singletons.cmyk,t=w.ColorSpace.singletons.cmyk.getRgb(t,0),s=r.OPS.setStrokeRGBColor;break;case r.OPS.setFillRGBColor:x.state.fillColorSpace=w.ColorSpace.singletons.rgb,t=w.ColorSpace.singletons.rgb.getRgb(t,0);break;case r.OPS.setStrokeRGBColor:x.state.strokeColorSpace=w.ColorSpace.singletons.rgb,t=w.ColorSpace.singletons.rgb.getRgb(t,0);break;case r.OPS.setFillColorN:if(M=x.state.fillColorSpace,"Pattern"===M.name)return void A(l.handleColorN(n,r.OPS.setFillColorN,t,M,b,i,e,p,f,g));t=M.getRgb(t,0),s=r.OPS.setFillRGBColor;break;case r.OPS.setStrokeColorN:if(M=x.state.strokeColorSpace,"Pattern"===M.name)return void A(l.handleColorN(n,r.OPS.setStrokeColorN,t,M,b,i,e,p,f,g));t=M.getRgb(t,0),s=r.OPS.setStrokeRGBColor;break;case r.OPS.shadingFill:var U=i.get("Shading");if(!U)throw new r.FormatError("No shading resource found");var $=U.get(t[0].name);if(!$)throw new r.FormatError("No shading object found");t=[l.parseShading({shading:$,resources:i,localColorSpaceCache:p,localShadingPatternCache:g})],s=r.OPS.shadingFill;break;case r.OPS.setGState:if(F=t[0]instanceof o.Name,I=t[0].name,F){const e=d.getByName(I);if(e){e.length>0&&n.addOp(r.OPS.setGState,[e]),t=null;continue}}return void A(new Promise((function(t,s){if(!F)throw new r.FormatError("GState must be referred to by name.");const a=i.get("ExtGState");if(!(a instanceof o.Dict))throw new r.FormatError("ExtGState should be a dictionary.");const c=a.get(I);if(!(c instanceof o.Dict))throw new r.FormatError("GState should be a dictionary.");l.setGState({resources:i,gState:c,operatorList:n,cacheKey:I,task:e,stateManager:x,localGStateCache:d,localColorSpaceCache:p}).then(t,s)})).catch((function(t){if(!(t instanceof r.AbortException)){if(l.options.ignoreErrors)return l.handler.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorExtGState}),void(0,r.warn)(`getOperatorList - ignoring ExtGState: "${t}".`);throw t}})));case r.OPS.moveTo:case r.OPS.lineTo:case r.OPS.curveTo:case r.OPS.curveTo2:case r.OPS.curveTo3:case r.OPS.closePath:case r.OPS.rectangle:l.buildPath(n,s,t,h);continue;case r.OPS.markPoint:case r.OPS.markPointProps:case r.OPS.beginCompat:case r.OPS.endCompat:continue;case r.OPS.beginMarkedContentProps:if(!(t[0]instanceof o.Name)){(0,r.warn)(`Expected name for beginMarkedContentProps arg0=${t[0]}`);continue}if("OC"===t[0].name)return void A(l.parseMarkedContentProps(t[1],i).then((t=>{n.addOp(r.OPS.beginMarkedContentProps,["OC",t])})).catch((t=>{if(!(t instanceof r.AbortException)){if(l.options.ignoreErrors)return l.handler.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorMarkedContent}),void(0,r.warn)(`getOperatorList - ignoring beginMarkedContentProps: "${t}".`);throw t}})));t=[t[0].name,t[1]instanceof o.Dict?t[1].get("MCID"):null];break;case r.OPS.beginMarkedContent:case r.OPS.endMarkedContent:default:if(null!==t){for(O=0,E=t.length;O<E&&!(t[O]instanceof o.Dict);O++);if(O<E){(0,r.warn)("getOperatorList - ignoring operator: "+s);continue}}}n.addOp(s,t)}T?A(P):(C(),s())})).catch((t=>{if(!(t instanceof r.AbortException)){if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorOperatorList}),(0,r.warn)(`getOperatorList - ignoring errors during "${e.name}" task: "${t}".`),void C();throw t}}))}getTextContent({stream:t,task:e,resources:i,stateManager:n=null,combineTextItems:s=!1,includeMarkedContent:a=!1,sink:l,seenStyles:c=new Set,viewBox:u}){i=i||o.Dict.empty,n=n||new N(new B);const p=(0,h.getNormalizedUnicodes)(),d={items:[],styles:Object.create(null)},f={initialized:!1,str:[],totalWidth:0,totalHeight:0,width:0,height:0,vertical:!1,prevTransform:null,textAdvanceScale:0,spaceInFlowMin:0,spaceInFlowMax:0,trackingSpaceMin:1/0,negativeSpaceMax:-1/0,notASpace:-1/0,transform:null,fontName:null,hasEOL:!1},g=[" "," "];let y=0;function w(t){const e=(y+1)%2,i=" "!==g[y]&&" "===g[e];return g[y]=t,y=e,i}function x(){g[0]=g[1]=" ",y=0}const S=this,k=this.xref,C=[];let A=null;const _=new m.LocalImageCache,T=new m.LocalGStateCache,O=new z(t,k,n);let E;function M(){const t=E.font,e=[E.fontSize*E.textHScale,0,0,E.fontSize,0,E.textRise];if(t.isType3Font&&(E.fontSize<=1||t.isCharBBox)&&!(0,r.isArrayEqual)(E.fontMatrix,r.FONT_IDENTITY_MATRIX)){const i=t.bbox[3]-t.bbox[1];i>0&&(e[3]*=i*E.fontMatrix[3])}return r.Util.transform(E.ctm,r.Util.transform(E.textMatrix,e))}function I(){if(f.initialized)return f;const t=E.font,e=t.loadedName;c.has(e)||(c.add(e),d.styles[e]={fontFamily:t.fallbackName,ascent:t.ascent,descent:t.descent,vertical:t.vertical}),f.fontName=e;const i=f.transform=M();t.vertical?(f.width=f.totalWidth=Math.hypot(i[0],i[1]),f.height=f.totalHeight=0,f.vertical=!0):(f.width=f.totalWidth=0,f.height=f.totalHeight=Math.hypot(i[2],i[3]),f.vertical=!1);const r=Math.hypot(E.textLineMatrix[0],E.textLineMatrix[1]),n=Math.hypot(E.ctm[0],E.ctm[1]);return f.textAdvanceScale=n*r,f.trackingSpaceMin=.1*E.fontSize,f.notASpace=.03*E.fontSize,f.negativeSpaceMax=-.2*E.fontSize,f.spaceInFlowMin=.1*E.fontSize,f.spaceInFlowMax=.6*E.fontSize,f.hasEOL=!1,f.initialized=!0,f}function D(){if(!f.initialized)return;const t=Math.hypot(E.textLineMatrix[0],E.textLineMatrix[1]),e=Math.hypot(E.ctm[0],E.ctm[1])*t;e!==f.textAdvanceScale&&(f.vertical?(f.totalHeight+=f.height*f.textAdvanceScale,f.height=0):(f.totalWidth+=f.width*f.textAdvanceScale,f.width=0),f.textAdvanceScale=e)}function R(t,n){return S.loadFont(t,n,i).then((function(t){return t.font.isType3Font?t.loadType3Data(S,i,e).catch((function(){})).then((function(){return t})):t})).then((function(t){E.font=t.font,E.fontMatrix=t.font.fontMatrix||r.FONT_IDENTITY_MATRIX}))}function L(t,e,i){const r=Math.hypot(i[0],i[1]);return[(i[0]*t+i[1]*e)/r,(i[2]*t+i[3]*e)/r]}function j(){const t=M();let e=t[4],i=t[5];const r=e-u[0],n=i-u[1];if(r<0||r>u[2]||n<0||n>u[3])return!1;if(!s||!E.font||!f.prevTransform)return!0;let o=f.prevTransform[4],a=f.prevTransform[5];if(o===e&&a===i)return!0;let l=-1;switch(t[0]&&0===t[1]&&0===t[2]?l=t[0]>0?0:180:t[1]&&0===t[0]&&0===t[3]&&(l=t[1]>0?90:270),l){case 0:break;case 90:[e,i]=[i,e],[o,a]=[a,o];break;case 180:[e,i,o,a]=[-e,-i,-o,-a];break;case 270:[e,i]=[-i,-e],[o,a]=[-a,-o];break;default:[e,i]=L(e,i,t),[o,a]=L(o,a,f.prevTransform)}if(E.font.vertical){const t=(a-i)/f.textAdvanceScale,r=e-o,n=Math.sign(f.height);return t<n*f.negativeSpaceMax?Math.abs(r)>.5*f.width?($(),!0):(x(),V(),!0):Math.abs(r)>f.width?($(),!0):(t<=n*f.notASpace&&x(),t<=n*f.trackingSpaceMin?f.height+=t:H(t,f.prevTransform,n)||(0===f.str.length?(x(),d.items.push({str:" ",dir:"ltr",width:0,height:Math.abs(t),transform:f.prevTransform,fontName:f.fontName,hasEOL:!1})):f.height+=t),!0)}const c=(e-o)/f.textAdvanceScale,h=i-a,p=Math.sign(f.width);return c<p*f.negativeSpaceMax?Math.abs(h)>.5*f.height?($(),!0):(x(),V(),!0):Math.abs(h)>f.height?($(),!0):(c<=p*f.notASpace&&x(),c<=p*f.trackingSpaceMin?f.width+=c:H(c,f.prevTransform,p)||(0===f.str.length?(x(),d.items.push({str:" ",dir:"ltr",width:Math.abs(c),height:0,transform:f.prevTransform,fontName:f.fontName,hasEOL:!1})):f.width+=c),!0)}function U({chars:t,extraSpacing:e}){const i=E.font;if(!t){const t=E.charSpacing+e;return void(t&&(i.vertical?E.translateTextMatrix(0,-t):E.translateTextMatrix(t*E.textHScale,0)))}const r=i.charsToGlyphs(t),n=E.fontMatrix[0]*E.fontSize;for(let t=0,o=r.length;t<o;t++){const s=r[t];if(s.isInvisibleFormatMark)continue;let a=E.charSpacing+(t+1===o?e:0),l=s.width;i.vertical&&(l=s.vmetric?s.vmetric[0]:-l);let c=l*n;if(s.isWhitespace){i.vertical?(a+=-c+E.wordSpacing,E.translateTextMatrix(0,-a)):(a+=c+E.wordSpacing,E.translateTextMatrix(a*E.textHScale,0)),w(" ");continue}if(!j())continue;const u=I();s.isZeroWidthDiacritic&&(c=0),i.vertical?(E.translateTextMatrix(0,c),c=Math.abs(c),u.height+=c):(c*=E.textHScale,E.translateTextMatrix(c,0),u.width+=c),c&&(u.prevTransform=M());let d=s.unicode;d=p[d]||d,d=(0,h.reverseIfRtl)(d),w(d)&&u.str.push(" "),u.str.push(d),a&&(i.vertical?E.translateTextMatrix(0,-a):E.translateTextMatrix(a*E.textHScale,0))}}function $(){x(),f.initialized?(f.hasEOL=!0,V()):d.items.push({str:"",dir:"ltr",width:0,height:0,transform:M(),fontName:E.font.loadedName,hasEOL:!0})}function H(t,e,i){if(i*f.spaceInFlowMin<=t&&t<=i*f.spaceInFlowMax)return f.initialized&&(x(),f.str.push(" ")),!1;const r=f.fontName;let n=0;return f.vertical&&(n=t,t=0),V(),x(),d.items.push({str:" ",dir:"ltr",width:Math.abs(t),height:Math.abs(n),transform:e||M(),fontName:r,hasEOL:!1}),!0}function V(){f.initialized&&f.str&&(f.vertical?f.totalHeight+=f.height*f.textAdvanceScale:f.totalWidth+=f.width*f.textAdvanceScale,d.items.push(function(t){const e=t.str.join(""),i=(0,b.bidi)(e,-1,t.vertical);return{str:i.str,dir:i.dir,width:Math.abs(t.totalWidth),height:Math.abs(t.totalHeight),transform:t.transform,fontName:t.fontName,hasEOL:t.hasEOL}}(f)),f.initialized=!1,f.str.length=0)}function q(t=!1){const e=d.items.length;0!==e&&(t&&e<10||(l.enqueue(d,e),d.items=[],d.styles=Object.create(null)))}const W=new F;return new Promise((function t(h,p){const f=function(e){q(!0),Promise.all([e,l.ready]).then((function(){try{t(h,p)}catch(t){p(t)}}),p)};e.ensureNotTerminated(),W.reset();const g={};let m,y=[];for(;!(m=W.check())&&(y.length=0,g.args=y,O.read(g));){E=n.state;const t=g.fn;switch(y=g.args,0|t){case r.OPS.setFont:var b=y[0].name,w=y[1];if(E.font&&b===E.fontName&&w===E.fontSize)break;return V(),E.fontName=b,E.fontSize=w,void f(R(b,null));case r.OPS.setTextRise:E.textRise=y[0];break;case r.OPS.setHScale:E.textHScale=y[0]/100;break;case r.OPS.setLeading:E.leading=y[0];break;case r.OPS.moveText:E.translateTextLineMatrix(y[0],y[1]),E.textMatrix=E.textLineMatrix.slice();break;case r.OPS.setLeadingMoveText:E.leading=-y[1],E.translateTextLineMatrix(y[0],y[1]),E.textMatrix=E.textLineMatrix.slice();break;case r.OPS.nextLine:E.carriageReturn();break;case r.OPS.setTextMatrix:E.setTextMatrix(y[0],y[1],y[2],y[3],y[4],y[5]),E.setTextLineMatrix(y[0],y[1],y[2],y[3],y[4],y[5]),D();break;case r.OPS.setCharSpacing:E.charSpacing=y[0];break;case r.OPS.setWordSpacing:E.wordSpacing=y[0];break;case r.OPS.beginText:E.textMatrix=r.IDENTITY_MATRIX.slice(),E.textLineMatrix=r.IDENTITY_MATRIX.slice();break;case r.OPS.showSpacedText:if(!n.state.font){S.ensureStateFont(n.state);continue}const t=(E.font.vertical?1:-1)*E.fontSize/1e3,h=y[0];for(let e=0,i=h.length;e<i-1;e++){const i=h[e];if("string"==typeof i)C.push(i);else if("number"==typeof i&&0!==i){const e=C.join("");C.length=0,U({chars:e,extraSpacing:i*t})}}const p=h[h.length-1];if("string"==typeof p&&C.push(p),C.length>0){const t=C.join("");C.length=0,U({chars:t,extraSpacing:0})}break;case r.OPS.showText:if(!n.state.font){S.ensureStateFont(n.state);continue}U({chars:y[0],extraSpacing:0});break;case r.OPS.nextLineShowText:if(!n.state.font){S.ensureStateFont(n.state);continue}E.carriageReturn(),U({chars:y[0],extraSpacing:0});break;case r.OPS.nextLineSetSpacingShowText:if(!n.state.font){S.ensureStateFont(n.state);continue}E.wordSpacing=y[0],E.charSpacing=y[1],E.carriageReturn(),U({chars:y[2],extraSpacing:0});break;case r.OPS.paintXObject:V(),A||(A=i.get("XObject")||o.Dict.empty);var x=y[0]instanceof o.Name,M=y[0].name;if(x&&_.getByName(M))break;return void f(new Promise((function(t,h){if(!x)throw new r.FormatError("XObject must be referred to by name.");let p=A.getRaw(M);if(p instanceof o.Ref){if(_.getByRef(p))return void t();if(S.globalImageCache.getData(p,S.pageIndex))return void t();p=k.fetch(p)}if(!(p instanceof v.BaseStream))throw new r.FormatError("XObject should be a stream");const d=p.dict.get("Subtype");if(!(d instanceof o.Name))throw new r.FormatError("XObject should have a Name subtype");if("Form"!==d.name)return _.set(M,p.dict.objId,!0),void t();const f=n.state.clone(),g=new N(f),m=p.dict.getArray("Matrix");Array.isArray(m)&&6===m.length&&g.transform(m),q();const y={enqueueInvoked:!1,enqueue(t,e){this.enqueueInvoked=!0,l.enqueue(t,e)},get desiredSize(){return l.desiredSize},get ready(){return l.ready}};S.getTextContent({stream:p,task:e,resources:p.dict.get("Resources")||i,stateManager:g,combineTextItems:s,includeMarkedContent:a,sink:y,seenStyles:c,viewBox:u}).then((function(){y.enqueueInvoked||_.set(M,p.dict.objId,!0),t()}),h)})).catch((function(t){if(!(t instanceof r.AbortException)){if(!S.options.ignoreErrors)throw t;(0,r.warn)(`getTextContent - ignoring XObject: "${t}".`)}})));case r.OPS.setGState:if(x=y[0]instanceof o.Name,M=y[0].name,x&&T.getByName(M))break;return void f(new Promise((function(t,e){if(!x)throw new r.FormatError("GState must be referred to by name.");const n=i.get("ExtGState");if(!(n instanceof o.Dict))throw new r.FormatError("ExtGState should be a dictionary.");const s=n.get(M);if(!(s instanceof o.Dict))throw new r.FormatError("GState should be a dictionary.");const a=s.get("Font");if(!a)return T.set(M,s.objId,!0),void t();V(),E.fontName=null,E.fontSize=a[1],R(null,a[0]).then(t,e)})).catch((function(t){if(!(t instanceof r.AbortException)){if(!S.options.ignoreErrors)throw t;(0,r.warn)(`getTextContent - ignoring ExtGState: "${t}".`)}})));case r.OPS.beginMarkedContent:a&&d.items.push({type:"beginMarkedContent",tag:y[0]instanceof o.Name?y[0].name:null});break;case r.OPS.beginMarkedContentProps:if(a){V();let t=null;y[1]instanceof o.Dict&&(t=y[1].get("MCID")),d.items.push({type:"beginMarkedContentProps",id:Number.isInteger(t)?`${S.idFactory.getPageObjId()}_mcid${t}`:null,tag:y[0]instanceof o.Name?y[0].name:null})}break;case r.OPS.endMarkedContent:a&&(V(),d.items.push({type:"endMarkedContent"}))}if(d.items.length>=l.desiredSize){m=!0;break}}m?f(P):(V(),q(),h())})).catch((t=>{if(!(t instanceof r.AbortException)){if(this.options.ignoreErrors)return(0,r.warn)(`getTextContent - ignoring errors during "${e.name}" task: "${t}".`),V(),void q();throw t}}))}extractDataStructures(t,e,i){const n=this.xref;let s;const c=this.readToUnicode(i.toUnicode||t.get("ToUnicode")||e.get("ToUnicode"));if(i.composite){const e=t.get("CIDSystemInfo");e instanceof o.Dict&&(i.cidSystemInfo={registry:(0,r.stringToPDFString)(e.get("Registry")),ordering:(0,r.stringToPDFString)(e.get("Ordering")),supplement:e.get("Supplement")});const n=t.get("CIDToGIDMap");n instanceof v.BaseStream&&(s=n.getBytes())}const h=[];let u,p=null;if(t.has("Encoding")){if(u=t.get("Encoding"),u instanceof o.Dict){if(p=u.get("BaseEncoding"),p=p instanceof o.Name?p.name:null,u.has("Differences")){const t=u.get("Differences");let e=0;for(let i=0,s=t.length;i<s;i++){const s=n.fetchIfRef(t[i]);if("number"==typeof s)e=s;else{if(!(s instanceof o.Name))throw new r.FormatError(`Invalid entry in 'Differences' array: ${s}`);h[e++]=s.name}}}}else if(u instanceof o.Name)p=u.name;else{const t="Encoding is not a Name nor a Dict";if(!this.options.ignoreErrors)throw new r.FormatError(t);(0,r.warn)(t)}"MacRomanEncoding"!==p&&"MacExpertEncoding"!==p&&"WinAnsiEncoding"!==p&&(p=null)}if(p)i.defaultEncoding=(0,l.getEncoding)(p);else{const t=!!(i.flags&a.FontFlags.Symbolic),e=!!(i.flags&a.FontFlags.Nonsymbolic);u=l.StandardEncoding,"TrueType"!==i.type||e||(u=l.WinAnsiEncoding),t&&(u=l.MacRomanEncoding,i.file&&!i.isInternalFont||(/Symbol/i.test(i.name)?u=l.SymbolSetEncoding:/Dingbats|Wingdings/i.test(i.name)&&(u=l.ZapfDingbatsEncoding))),i.defaultEncoding=u}return i.differences=h,i.baseEncodingName=p,i.hasEncoding=!!p||h.length>0,i.dict=t,c.then((t=>(i.toUnicode=t,this.buildToUnicode(i)))).then((t=>(i.toUnicode=t,s&&(i.cidToGidMap=this.readCidToGidMap(s,t)),i)))}_simpleFontToUnicode(t,e=!1){(0,r.assert)(!t.composite,"Must be a simple font.");const i=[],n=t.defaultEncoding.slice(),o=t.baseEncodingName,s=t.differences;for(const t in s){const e=s[t];".notdef"!==e&&(n[t]=e)}const a=(0,S.getGlyphsUnicode)();for(const r in n){let s=n[r];if(""!==s)if(void 0!==a[s])i[r]=String.fromCharCode(a[s]);else{let n=0;switch(s[0]){case"G":3===s.length&&(n=parseInt(s.substring(1),16));break;case"g":5===s.length&&(n=parseInt(s.substring(1),16));break;case"C":case"c":if(s.length>=3&&s.length<=4){const i=s.substring(1);if(e){n=parseInt(i,16);break}if(n=+i,Number.isNaN(n)&&Number.isInteger(parseInt(i,16)))return this._simpleFontToUnicode(t,!0)}break;default:const i=(0,h.getUnicodeForGlyph)(s,a);-1!==i&&(n=i)}if(n>0&&n<=1114111&&Number.isInteger(n)){if(o&&n===+r){const t=(0,l.getEncoding)(o);if(t&&(s=t[r])){i[r]=String.fromCharCode(a[s]);continue}}i[r]=String.fromCodePoint(n)}}}return i}async buildToUnicode(t){if(t.hasIncludedToUnicodeMap=!!t.toUnicode&&t.toUnicode.length>0,t.hasIncludedToUnicodeMap)return!t.composite&&t.hasEncoding&&(t.fallbackToUnicode=this._simpleFontToUnicode(t)),t.toUnicode;if(!t.composite)return new d.ToUnicodeMap(this._simpleFontToUnicode(t));if(t.composite&&(t.cMap.builtInCMap&&!(t.cMap instanceof n.IdentityCMap)||"Adobe"===t.cidSystemInfo.registry&&("GB1"===t.cidSystemInfo.ordering||"CNS1"===t.cidSystemInfo.ordering||"Japan1"===t.cidSystemInfo.ordering||"Korea1"===t.cidSystemInfo.ordering))){const{registry:e,ordering:i}=t.cidSystemInfo,s=o.Name.get(`${e}-${i}-UCS2`),a=await n.CMapFactory.create({encoding:s,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}),l=[];return t.cMap.forEach((function(t,e){if(e>65535)throw new r.FormatError("Max size of CID is 65,535");const i=a.lookup(e);i&&(l[t]=String.fromCharCode((i.charCodeAt(0)<<8)+i.charCodeAt(1)))})),new d.ToUnicodeMap(l)}return new d.IdentityToUnicodeMap(t.firstChar,t.lastChar)}readToUnicode(t){return t?t instanceof o.Name?n.CMapFactory.create({encoding:t,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then((function(t){return t instanceof n.IdentityCMap?new d.IdentityToUnicodeMap(0,65535):new d.ToUnicodeMap(t.getMap())})):t instanceof v.BaseStream?n.CMapFactory.create({encoding:t,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then((function(t){if(t instanceof n.IdentityCMap)return new d.IdentityToUnicodeMap(0,65535);const e=new Array(t.length);return t.forEach((function(t,i){if("number"==typeof i)return void(e[t]=String.fromCodePoint(i));const r=[];for(let t=0;t<i.length;t+=2){const e=i.charCodeAt(t)<<8|i.charCodeAt(t+1);if(55296!=(63488&e)){r.push(e);continue}t+=2;const n=i.charCodeAt(t)<<8|i.charCodeAt(t+1);r.push(((1023&e)<<10)+(1023&n)+65536)}e[t]=String.fromCodePoint.apply(String,r)})),new d.ToUnicodeMap(e)}),(t=>{if(t instanceof r.AbortException)return null;if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorFontToUnicode}),(0,r.warn)(`readToUnicode - ignoring ToUnicode data: "${t}".`),null;throw t})):Promise.resolve(null):Promise.resolve(null)}readCidToGidMap(t,e){const i=[];for(let r=0,n=t.length;r<n;r++){const n=t[r++]<<8|t[r],o=r>>1;(0!==n||e.has(o))&&(i[o]=n)}return i}extractWidths(t,e,i){const r=this.xref;let n=[],s=0;const l=[];let c,h,u,p,d,f,g,m;if(i.composite){if(s=t.has("DW")?t.get("DW"):1e3,m=t.get("W"),m)for(h=0,u=m.length;h<u;h++)if(f=r.fetchIfRef(m[h++]),g=r.fetchIfRef(m[h]),Array.isArray(g))for(p=0,d=g.length;p<d;p++)n[f++]=r.fetchIfRef(g[p]);else{const t=r.fetchIfRef(m[++h]);for(p=f;p<=g;p++)n[p]=t}if(i.vertical){let e=t.getArray("DW2")||[880,-1e3];if(c=[e[1],.5*s,e[0]],e=t.get("W2"),e)for(h=0,u=e.length;h<u;h++)if(f=r.fetchIfRef(e[h++]),g=r.fetchIfRef(e[h]),Array.isArray(g))for(p=0,d=g.length;p<d;p++)l[f++]=[r.fetchIfRef(g[p++]),r.fetchIfRef(g[p++]),r.fetchIfRef(g[p])];else{const t=[r.fetchIfRef(e[++h]),r.fetchIfRef(e[++h]),r.fetchIfRef(e[++h])];for(p=f;p<=g;p++)l[p]=t}}}else{const a=i.firstChar;if(m=t.get("Widths"),m){for(p=a,h=0,u=m.length;h<u;h++)n[p++]=r.fetchIfRef(m[h]);s=parseFloat(e.get("MissingWidth"))||0}else{const e=t.get("BaseFont");if(e instanceof o.Name){const t=this.getBaseFontMetrics(e.name);n=this.buildCharCodeToWidth(t.widths,i),s=t.defaultWidth}}}let y=!0,v=s;for(const t in n){const e=n[t];if(e)if(v){if(v!==e){y=!1;break}}else v=e}y&&(i.flags|=a.FontFlags.FixedPitch),i.defaultWidth=s,i.widths=n,i.defaultVMetrics=c,i.vmetrics=l}isSerifFont(t){const e=t.split("-")[0];return e in(0,c.getSerifFonts)()||-1!==e.search(/serif/gi)}getBaseFontMetrics(t){let e=0,i=Object.create(null),r=!1,n=(0,c.getStdFontMap)()[t]||t;const o=(0,C.getMetrics)();n in o||(n=this.isSerifFont(t)?"Times-Roman":"Helvetica");const s=o[n];return"number"==typeof s?(e=s,r=!0):i=s(),{defaultWidth:e,monospace:r,widths:i}}buildCharCodeToWidth(t,e){const i=Object.create(null),r=e.differences,n=e.defaultEncoding;for(let e=0;e<256;e++)e in r&&t[r[e]]?i[e]=t[r[e]]:e in n&&t[n[e]]&&(i[e]=t[n[e]]);return i}preEvaluateFont(t){const e=t;let i=t.get("Subtype");if(!(i instanceof o.Name))throw new r.FormatError("invalid font Subtype");let n,s,a=!1;if("Type0"===i.name){const e=t.get("DescendantFonts");if(!e)throw new r.FormatError("Descendant fonts are not specified");if(!((t=Array.isArray(e)?this.xref.fetchIfRef(e[0]):e)instanceof o.Dict))throw new r.FormatError("Descendant font is not a dictionary.");if(i=t.get("Subtype"),!(i instanceof o.Name))throw new r.FormatError("invalid font Subtype");a=!0}const l=t.get("FirstChar")||0,c=t.get("LastChar")||(a?65535:255),h=t.get("FontDescriptor");if(h){n=new A.MurmurHash3_64;const i=e.getRaw("Encoding");if(i instanceof o.Name)n.update(i.name);else if(i instanceof o.Ref)n.update(i.toString());else if(i instanceof o.Dict)for(const t of i.getRawValues())if(t instanceof o.Name)n.update(t.name);else if(t instanceof o.Ref)n.update(t.toString());else if(Array.isArray(t)){const e=t.length,i=new Array(e);for(let r=0;r<e;r++){const e=t[r];e instanceof o.Name?i[r]=e.name:("number"==typeof e||e instanceof o.Ref)&&(i[r]=e.toString())}n.update(i.join())}if(n.update(`${l}-${c}`),s=t.get("ToUnicode")||e.get("ToUnicode"),s instanceof v.BaseStream){const t=s.str||s,e=t.buffer?new Uint8Array(t.buffer.buffer,0,t.bufferLength):new Uint8Array(t.bytes.buffer,t.start,t.end-t.start);n.update(e)}else s instanceof o.Name&&n.update(s.name);const r=t.get("Widths")||e.get("Widths");if(Array.isArray(r)){const t=[];for(const e of r)("number"==typeof e||e instanceof o.Ref)&&t.push(e.toString());n.update(t.join())}if(a){n.update("compositeFont");const i=t.get("W")||e.get("W");if(Array.isArray(i)){const t=[];for(const e of i)if("number"==typeof e||e instanceof o.Ref)t.push(e.toString());else if(Array.isArray(e)){const i=[];for(const t of e)("number"==typeof t||t instanceof o.Ref)&&i.push(t.toString());t.push(`[${i.join()}]`)}n.update(t.join())}const r=t.getRaw("CIDToGIDMap")||e.getRaw("CIDToGIDMap");r instanceof o.Name?n.update(r.name):r instanceof o.Ref?n.update(r.toString()):r instanceof v.BaseStream&&n.update(r.peekBytes())}}return{descriptor:h,dict:t,baseDict:e,composite:a,type:i.name,firstChar:l,lastChar:c,toUnicode:s,hash:n?n.hexdigest():""}}async translateFont({descriptor:t,dict:e,baseDict:i,composite:l,type:h,firstChar:u,lastChar:d,toUnicode:f,cssFontInfo:g}){const m="Type3"===h;let v;if(!t){if(!m){let t=e.get("BaseFont");if(!(t instanceof o.Name))throw new r.FormatError("Base font is not specified");t=t.name.replace(/[,_]/g,"-");const n=this.getBaseFontMetrics(t),l=t.split("-")[0],p=(this.isSerifFont(l)?a.FontFlags.Serif:0)|(n.monospace?a.FontFlags.FixedPitch:0)|((0,c.getSymbolsFonts)()[l]?a.FontFlags.Symbolic:a.FontFlags.Nonsymbolic);v={type:h,name:t,loadedName:i.loadedName,widths:n.widths,defaultWidth:n.defaultWidth,isSimulatedFlags:!0,flags:p,firstChar:u,lastChar:d,toUnicode:f,xHeight:0,capHeight:0,italicAngle:0,isType3Font:m};const g=e.get("Widths"),y=(0,c.getStandardFontName)(t);let b=null;return y&&(v.isStandardFont=!0,b=await this.fetchStandardFontData(y),v.isInternalFont=!!b),this.extractDataStructures(e,e,v).then((e=>{if(g){const t=[];let i=u;for(let e=0,r=g.length;e<r;e++)t[i++]=this.xref.fetchIfRef(g[e]);e.widths=t}else e.widths=this.buildCharCodeToWidth(n.widths,e);return new s.Font(t,b,e)}))}(t=new o.Dict(null)).set("FontName",o.Name.get(h)),t.set("FontBBox",e.getArray("FontBBox")||[0,0,0,0])}let b,w,x,S,k,C=t.get("FontName"),A=e.get("BaseFont");if("string"==typeof C&&(C=o.Name.get(C)),"string"==typeof A&&(A=o.Name.get(A)),!m){const t=C&&C.name,e=A&&A.name;t!==e&&((0,r.info)(`The FontDescriptor's FontName is "${t}" but should be the same as the Font's BaseFont "${e}".`),t&&e&&e.startsWith(t)&&(C=A))}if(C=C||A,!(C instanceof o.Name))throw new r.FormatError("invalid font name");try{b=t.get("FontFile","FontFile2","FontFile3")}catch(t){if(!this.options.ignoreErrors)throw t;(0,r.warn)(`translateFont - fetching "${C.name}" font file: "${t}".`),b=new y.NullStream}let _=!1,T=!1,O=null;if(b){if(b.dict){const t=b.dict.get("Subtype");t instanceof o.Name&&(w=t.name),x=b.dict.get("Length1"),S=b.dict.get("Length2"),k=b.dict.get("Length3")}}else if(g){const t=(0,p.getXfaFontName)(C.name);t&&(g.fontFamily=`${g.fontFamily}-PdfJS-XFA`,g.metrics=t.metrics||null,O=t.factors||null,b=await this.fetchStandardFontData(t.name),T=!!b,i=e=(0,p.getXfaFontDict)(C.name),l=!0)}else if(!m){const t=(0,c.getStandardFontName)(C.name);t&&(_=!0,b=await this.fetchStandardFontData(t),T=!!b)}if(v={type:h,name:C.name,subtype:w,file:b,length1:x,length2:S,length3:k,isStandardFont:_,isInternalFont:T,loadedName:i.loadedName,composite:l,fixedPitch:!1,fontMatrix:e.getArray("FontMatrix")||r.FONT_IDENTITY_MATRIX,firstChar:u,lastChar:d,toUnicode:f,bbox:t.getArray("FontBBox")||e.getArray("FontBBox"),ascent:t.get("Ascent"),descent:t.get("Descent"),xHeight:t.get("XHeight")||0,capHeight:t.get("CapHeight")||0,flags:t.get("Flags"),italicAngle:t.get("ItalicAngle")||0,isType3Font:m,cssFontInfo:g,scaleFactors:O},l){const t=i.get("Encoding");t instanceof o.Name&&(v.cidEncoding=t.name);const e=await n.CMapFactory.create({encoding:t,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null});v.cMap=e,v.vertical=v.cMap.vertical}return this.extractDataStructures(e,i,v).then((i=>(this.extractWidths(e,t,i),new s.Font(C.name,b,i))))}static buildFontPaths(t,e,i,n){function o(e){const o=`${t.loadedName}_path_${e}`;try{if(t.renderer.hasBuiltPath(e))return;i.send("commonobj",[o,"FontPath",t.renderer.getPathJs(e)])}catch(t){if(n.ignoreErrors)return i.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorFontBuildPath}),void(0,r.warn)(`buildFontPaths - ignoring ${o} glyph: "${t}".`);throw t}}for(const t of e){o(t.fontChar);const e=t.accent;e&&e.fontChar&&o(e.fontChar)}}static get fallbackFontDict(){const t=new o.Dict;return t.set("BaseFont",o.Name.get("PDFJS-FallbackFont")),t.set("Type",o.Name.get("FallbackType")),t.set("Subtype",o.Name.get("FallbackType")),t.set("Encoding",o.Name.get("WinAnsiEncoding")),(0,r.shadow)(this,"fallbackFontDict",t)}}e.PartialEvaluator=R;class L{constructor({loadedName:t,font:e,dict:i,evaluatorOptions:r}){this.loadedName=t,this.font=e,this.dict=i,this._evaluatorOptions=r||O,this.type3Loaded=null,this.type3Dependencies=e.isType3Font?new Set:null,this.sent=!1}send(t){this.sent||(this.sent=!0,t.send("commonobj",[this.loadedName,"Font",this.font.exportData(this._evaluatorOptions.fontExtraProperties)]))}fallback(t){this.font.data&&(this.font.disableFontFace=!0,R.buildFontPaths(this.font,this.font.glyphCacheValues,t,this._evaluatorOptions))}loadType3Data(t,e,i){if(this.type3Loaded)return this.type3Loaded;if(!this.font.isType3Font)throw new Error("Must be a Type3 font.");const n=t.clone({ignoreErrors:!1});n.parsingType3Font=!0;const s=new o.RefSet(t.type3FontRefs);this.dict.objId&&!s.has(this.dict.objId)&&s.put(this.dict.objId),n.type3FontRefs=s;const a=this.font,l=this.type3Dependencies;let c=Promise.resolve();const h=this.dict.get("CharProcs"),u=this.dict.get("Resources")||e,p=Object.create(null),d=!a.bbox||(0,r.isArrayEqual)(a.bbox,[0,0,0,0]);for(const t of h.getKeys())c=c.then((()=>{const e=h.get(t),o=new _.OperatorList;return n.getOperatorList({stream:e,task:i,resources:u,operatorList:o}).then((()=>{o.fnArray[0]===r.OPS.setCharWidthAndBounds&&this._removeType3ColorOperators(o,d),p[t]=o.getIR();for(const t of o.dependencies)l.add(t)})).catch((function(e){(0,r.warn)(`Type3 font resource "${t}" is not available.`);const i=new _.OperatorList;p[t]=i.getIR()}))}));return this.type3Loaded=c.then((()=>{a.charProcOperatorList=p,this._bbox&&(a.isCharBBox=!0,a.bbox=this._bbox)})),this.type3Loaded}_removeType3ColorOperators(t,e=!1){if(e){this._bbox||(this._bbox=[1/0,1/0,-1/0,-1/0]);const e=r.Util.normalizeRect(t.argsArray[0].slice(2));this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[2]),this._bbox[3]=Math.max(this._bbox[3],e[3])}let i=1,n=t.length;for(;i<n;){switch(t.fnArray[i]){case r.OPS.setStrokeColorSpace:case r.OPS.setFillColorSpace:case r.OPS.setStrokeColor:case r.OPS.setStrokeColorN:case r.OPS.setFillColor:case r.OPS.setFillColorN:case r.OPS.setStrokeGray:case r.OPS.setFillGray:case r.OPS.setStrokeRGBColor:case r.OPS.setFillRGBColor:case r.OPS.setStrokeCMYKColor:case r.OPS.setFillCMYKColor:case r.OPS.shadingFill:case r.OPS.setRenderingIntent:t.fnArray.splice(i,1),t.argsArray.splice(i,1),n--;continue;case r.OPS.setGState:const[e]=t.argsArray[i];let o=0,s=e.length;for(;o<s;){const[t]=e[o];switch(t){case"TR":case"TR2":case"HT":case"BG":case"BG2":case"UCR":case"UCR2":e.splice(o,1),s--;continue}o++}}i++}}}class N{constructor(t=new j){this.state=t,this.stateStack=[]}save(){const t=this.state;this.stateStack.push(this.state),this.state=t.clone()}restore(){const t=this.stateStack.pop();t&&(this.state=t)}transform(t){this.state.ctm=r.Util.transform(this.state.ctm,t)}}class B{constructor(){this.ctm=new Float32Array(r.IDENTITY_MATRIX),this.fontName=null,this.fontSize=0,this.font=null,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.textMatrix=r.IDENTITY_MATRIX.slice(),this.textLineMatrix=r.IDENTITY_MATRIX.slice(),this.charSpacing=0,this.wordSpacing=0,this.leading=0,this.textHScale=1,this.textRise=0}setTextMatrix(t,e,i,r,n,o){const s=this.textMatrix;s[0]=t,s[1]=e,s[2]=i,s[3]=r,s[4]=n,s[5]=o}setTextLineMatrix(t,e,i,r,n,o){const s=this.textLineMatrix;s[0]=t,s[1]=e,s[2]=i,s[3]=r,s[4]=n,s[5]=o}translateTextMatrix(t,e){const i=this.textMatrix;i[4]=i[0]*t+i[2]*e+i[4],i[5]=i[1]*t+i[3]*e+i[5]}translateTextLineMatrix(t,e){const i=this.textLineMatrix;i[4]=i[0]*t+i[2]*e+i[4],i[5]=i[1]*t+i[3]*e+i[5]}carriageReturn(){this.translateTextLineMatrix(0,-this.leading),this.textMatrix=this.textLineMatrix.slice()}clone(){const t=Object.create(this);return t.textMatrix=this.textMatrix.slice(),t.textLineMatrix=this.textLineMatrix.slice(),t.fontMatrix=this.fontMatrix.slice(),t}}class j{constructor(){this.ctm=new Float32Array(r.IDENTITY_MATRIX),this.font=null,this.textRenderingMode=r.TextRenderingMode.FILL,this.fillColorSpace=w.ColorSpace.singletons.gray,this.strokeColorSpace=w.ColorSpace.singletons.gray}clone(){return Object.create(this)}}class z{static get opMap(){const t=(0,k.getLookupTableFactory)((function(t){t.w={id:r.OPS.setLineWidth,numArgs:1,variableArgs:!1},t.J={id:r.OPS.setLineCap,numArgs:1,variableArgs:!1},t.j={id:r.OPS.setLineJoin,numArgs:1,variableArgs:!1},t.M={id:r.OPS.setMiterLimit,numArgs:1,variableArgs:!1},t.d={id:r.OPS.setDash,numArgs:2,variableArgs:!1},t.ri={id:r.OPS.setRenderingIntent,numArgs:1,variableArgs:!1},t.i={id:r.OPS.setFlatness,numArgs:1,variableArgs:!1},t.gs={id:r.OPS.setGState,numArgs:1,variableArgs:!1},t.q={id:r.OPS.save,numArgs:0,variableArgs:!1},t.Q={id:r.OPS.restore,numArgs:0,variableArgs:!1},t.cm={id:r.OPS.transform,numArgs:6,variableArgs:!1},t.m={id:r.OPS.moveTo,numArgs:2,variableArgs:!1},t.l={id:r.OPS.lineTo,numArgs:2,variableArgs:!1},t.c={id:r.OPS.curveTo,numArgs:6,variableArgs:!1},t.v={id:r.OPS.curveTo2,numArgs:4,variableArgs:!1},t.y={id:r.OPS.curveTo3,numArgs:4,variableArgs:!1},t.h={id:r.OPS.closePath,numArgs:0,variableArgs:!1},t.re={id:r.OPS.rectangle,numArgs:4,variableArgs:!1},t.S={id:r.OPS.stroke,numArgs:0,variableArgs:!1},t.s={id:r.OPS.closeStroke,numArgs:0,variableArgs:!1},t.f={id:r.OPS.fill,numArgs:0,variableArgs:!1},t.F={id:r.OPS.fill,numArgs:0,variableArgs:!1},t["f*"]={id:r.OPS.eoFill,numArgs:0,variableArgs:!1},t.B={id:r.OPS.fillStroke,numArgs:0,variableArgs:!1},t["B*"]={id:r.OPS.eoFillStroke,numArgs:0,variableArgs:!1},t.b={id:r.OPS.closeFillStroke,numArgs:0,variableArgs:!1},t["b*"]={id:r.OPS.closeEOFillStroke,numArgs:0,variableArgs:!1},t.n={id:r.OPS.endPath,numArgs:0,variableArgs:!1},t.W={id:r.OPS.clip,numArgs:0,variableArgs:!1},t["W*"]={id:r.OPS.eoClip,numArgs:0,variableArgs:!1},t.BT={id:r.OPS.beginText,numArgs:0,variableArgs:!1},t.ET={id:r.OPS.endText,numArgs:0,variableArgs:!1},t.Tc={id:r.OPS.setCharSpacing,numArgs:1,variableArgs:!1},t.Tw={id:r.OPS.setWordSpacing,numArgs:1,variableArgs:!1},t.Tz={id:r.OPS.setHScale,numArgs:1,variableArgs:!1},t.TL={id:r.OPS.setLeading,numArgs:1,variableArgs:!1},t.Tf={id:r.OPS.setFont,numArgs:2,variableArgs:!1},t.Tr={id:r.OPS.setTextRenderingMode,numArgs:1,variableArgs:!1},t.Ts={id:r.OPS.setTextRise,numArgs:1,variableArgs:!1},t.Td={id:r.OPS.moveText,numArgs:2,variableArgs:!1},t.TD={id:r.OPS.setLeadingMoveText,numArgs:2,variableArgs:!1},t.Tm={id:r.OPS.setTextMatrix,numArgs:6,variableArgs:!1},t["T*"]={id:r.OPS.nextLine,numArgs:0,variableArgs:!1},t.Tj={id:r.OPS.showText,numArgs:1,variableArgs:!1},t.TJ={id:r.OPS.showSpacedText,numArgs:1,variableArgs:!1},t["'"]={id:r.OPS.nextLineShowText,numArgs:1,variableArgs:!1},t['"']={id:r.OPS.nextLineSetSpacingShowText,numArgs:3,variableArgs:!1},t.d0={id:r.OPS.setCharWidth,numArgs:2,variableArgs:!1},t.d1={id:r.OPS.setCharWidthAndBounds,numArgs:6,variableArgs:!1},t.CS={id:r.OPS.setStrokeColorSpace,numArgs:1,variableArgs:!1},t.cs={id:r.OPS.setFillColorSpace,numArgs:1,variableArgs:!1},t.SC={id:r.OPS.setStrokeColor,numArgs:4,variableArgs:!0},t.SCN={id:r.OPS.setStrokeColorN,numArgs:33,variableArgs:!0},t.sc={id:r.OPS.setFillColor,numArgs:4,variableArgs:!0},t.scn={id:r.OPS.setFillColorN,numArgs:33,variableArgs:!0},t.G={id:r.OPS.setStrokeGray,numArgs:1,variableArgs:!1},t.g={id:r.OPS.setFillGray,numArgs:1,variableArgs:!1},t.RG={id:r.OPS.setStrokeRGBColor,numArgs:3,variableArgs:!1},t.rg={id:r.OPS.setFillRGBColor,numArgs:3,variableArgs:!1},t.K={id:r.OPS.setStrokeCMYKColor,numArgs:4,variableArgs:!1},t.k={id:r.OPS.setFillCMYKColor,numArgs:4,variableArgs:!1},t.sh={id:r.OPS.shadingFill,numArgs:1,variableArgs:!1},t.BI={id:r.OPS.beginInlineImage,numArgs:0,variableArgs:!1},t.ID={id:r.OPS.beginImageData,numArgs:0,variableArgs:!1},t.EI={id:r.OPS.endInlineImage,numArgs:1,variableArgs:!1},t.Do={id:r.OPS.paintXObject,numArgs:1,variableArgs:!1},t.MP={id:r.OPS.markPoint,numArgs:1,variableArgs:!1},t.DP={id:r.OPS.markPointProps,numArgs:2,variableArgs:!1},t.BMC={id:r.OPS.beginMarkedContent,numArgs:1,variableArgs:!1},t.BDC={id:r.OPS.beginMarkedContentProps,numArgs:2,variableArgs:!1},t.EMC={id:r.OPS.endMarkedContent,numArgs:0,variableArgs:!1},t.BX={id:r.OPS.beginCompat,numArgs:0,variableArgs:!1},t.EX={id:r.OPS.endCompat,numArgs:0,variableArgs:!1},t.BM=null,t.BD=null,t.true=null,t.fa=null,t.fal=null,t.fals=null,t.false=null,t.nu=null,t.nul=null,t.null=null}));return(0,r.shadow)(this,"opMap",t())}static get MAX_INVALID_PATH_OPS(){return(0,r.shadow)(this,"MAX_INVALID_PATH_OPS",10)}constructor(t,e,i=new N){this.parser=new g.Parser({lexer:new g.Lexer(t,z.opMap),xref:e}),this.stateManager=i,this.nonProcessedArgs=[],this._numInvalidPathOPS=0}get savedStatesDepth(){return this.stateManager.stateStack.length}read(t){let e=t.args;for(;;){const i=this.parser.getObj();if(i instanceof o.Cmd){const n=i.cmd,o=z.opMap[n];if(!o){(0,r.warn)(`Unknown command "${n}".`);continue}const s=o.id,a=o.numArgs;let l=null!==e?e.length:0;if(o.variableArgs)l>a&&(0,r.info)(`Command ${n}: expected [0, ${a}] args, but received ${l} args.`);else{if(l!==a){const t=this.nonProcessedArgs;for(;l>a;)t.push(e.shift()),l--;for(;l<a&&0!==t.length;)null===e&&(e=[]),e.unshift(t.pop()),l++}if(l<a){const t=`command ${n}: expected ${a} args, but received ${l} args.`;if(s>=r.OPS.moveTo&&s<=r.OPS.endPath&&++this._numInvalidPathOPS>z.MAX_INVALID_PATH_OPS)throw new r.FormatError(`Invalid ${t}`);(0,r.warn)(`Skipping ${t}`),null!==e&&(e.length=0);continue}}return this.preprocessCommand(s,e),t.fn=s,t.args=e,!0}if(i===o.EOF)return!1;if(null!==i&&(null===e&&(e=[]),e.push(i),e.length>33))throw new r.FormatError("Too many arguments")}}preprocessCommand(t,e){switch(0|t){case r.OPS.save:this.stateManager.save();break;case r.OPS.restore:this.stateManager.restore();break;case r.OPS.transform:this.stateManager.transform(e)}}}e.EvaluatorPreprocessor=z},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IdentityCMap=e.CMapFactory=e.CMap=void 0;var r=i(2),n=i(5),o=i(9),s=i(27),a=i(8),l=i(10);const c=["Adobe-GB1-UCS2","Adobe-CNS1-UCS2","Adobe-Japan1-UCS2","Adobe-Korea1-UCS2","78-EUC-H","78-EUC-V","78-H","78-RKSJ-H","78-RKSJ-V","78-V","78ms-RKSJ-H","78ms-RKSJ-V","83pv-RKSJ-H","90ms-RKSJ-H","90ms-RKSJ-V","90msp-RKSJ-H","90msp-RKSJ-V","90pv-RKSJ-H","90pv-RKSJ-V","Add-H","Add-RKSJ-H","Add-RKSJ-V","Add-V","Adobe-CNS1-0","Adobe-CNS1-1","Adobe-CNS1-2","Adobe-CNS1-3","Adobe-CNS1-4","Adobe-CNS1-5","Adobe-CNS1-6","Adobe-GB1-0","Adobe-GB1-1","Adobe-GB1-2","Adobe-GB1-3","Adobe-GB1-4","Adobe-GB1-5","Adobe-Japan1-0","Adobe-Japan1-1","Adobe-Japan1-2","Adobe-Japan1-3","Adobe-Japan1-4","Adobe-Japan1-5","Adobe-Japan1-6","Adobe-Korea1-0","Adobe-Korea1-1","Adobe-Korea1-2","B5-H","B5-V","B5pc-H","B5pc-V","CNS-EUC-H","CNS-EUC-V","CNS1-H","CNS1-V","CNS2-H","CNS2-V","ETHK-B5-H","ETHK-B5-V","ETen-B5-H","ETen-B5-V","ETenms-B5-H","ETenms-B5-V","EUC-H","EUC-V","Ext-H","Ext-RKSJ-H","Ext-RKSJ-V","Ext-V","GB-EUC-H","GB-EUC-V","GB-H","GB-V","GBK-EUC-H","GBK-EUC-V","GBK2K-H","GBK2K-V","GBKp-EUC-H","GBKp-EUC-V","GBT-EUC-H","GBT-EUC-V","GBT-H","GBT-V","GBTpc-EUC-H","GBTpc-EUC-V","GBpc-EUC-H","GBpc-EUC-V","H","HKdla-B5-H","HKdla-B5-V","HKdlb-B5-H","HKdlb-B5-V","HKgccs-B5-H","HKgccs-B5-V","HKm314-B5-H","HKm314-B5-V","HKm471-B5-H","HKm471-B5-V","HKscs-B5-H","HKscs-B5-V","Hankaku","Hiragana","KSC-EUC-H","KSC-EUC-V","KSC-H","KSC-Johab-H","KSC-Johab-V","KSC-V","KSCms-UHC-H","KSCms-UHC-HW-H","KSCms-UHC-HW-V","KSCms-UHC-V","KSCpc-EUC-H","KSCpc-EUC-V","Katakana","NWP-H","NWP-V","RKSJ-H","RKSJ-V","Roman","UniCNS-UCS2-H","UniCNS-UCS2-V","UniCNS-UTF16-H","UniCNS-UTF16-V","UniCNS-UTF32-H","UniCNS-UTF32-V","UniCNS-UTF8-H","UniCNS-UTF8-V","UniGB-UCS2-H","UniGB-UCS2-V","UniGB-UTF16-H","UniGB-UTF16-V","UniGB-UTF32-H","UniGB-UTF32-V","UniGB-UTF8-H","UniGB-UTF8-V","UniJIS-UCS2-H","UniJIS-UCS2-HW-H","UniJIS-UCS2-HW-V","UniJIS-UCS2-V","UniJIS-UTF16-H","UniJIS-UTF16-V","UniJIS-UTF32-H","UniJIS-UTF32-V","UniJIS-UTF8-H","UniJIS-UTF8-V","UniJIS2004-UTF16-H","UniJIS2004-UTF16-V","UniJIS2004-UTF32-H","UniJIS2004-UTF32-V","UniJIS2004-UTF8-H","UniJIS2004-UTF8-V","UniJISPro-UCS2-HW-V","UniJISPro-UCS2-V","UniJISPro-UTF8-V","UniJISX0213-UTF32-H","UniJISX0213-UTF32-V","UniJISX02132004-UTF32-H","UniJISX02132004-UTF32-V","UniKS-UCS2-H","UniKS-UCS2-V","UniKS-UTF16-H","UniKS-UTF16-V","UniKS-UTF32-H","UniKS-UTF32-V","UniKS-UTF8-H","UniKS-UTF8-V","V","WP-Symbol"],h=2**24-1;class u{constructor(t=!1){this.codespaceRanges=[[],[],[],[]],this.numCodespaceRanges=0,this._map=[],this.name="",this.vertical=!1,this.useCMap=null,this.builtInCMap=t}addCodespaceRange(t,e,i){this.codespaceRanges[t-1].push(e,i),this.numCodespaceRanges++}mapCidRange(t,e,i){if(e-t>h)throw new Error("mapCidRange - ignoring data above MAX_MAP_RANGE.");for(;t<=e;)this._map[t++]=i++}mapBfRange(t,e,i){if(e-t>h)throw new Error("mapBfRange - ignoring data above MAX_MAP_RANGE.");const r=i.length-1;for(;t<=e;){this._map[t++]=i;const e=i.charCodeAt(r)+1;i=e>255?i.substring(0,r-1)+String.fromCharCode(i.charCodeAt(r-1)+1)+"\0":i.substring(0,r)+String.fromCharCode(e)}}mapBfRangeToArray(t,e,i){if(e-t>h)throw new Error("mapBfRangeToArray - ignoring data above MAX_MAP_RANGE.");const r=i.length;let n=0;for(;t<=e&&n<r;)this._map[t]=i[n++],++t}mapOne(t,e){this._map[t]=e}lookup(t){return this._map[t]}contains(t){return void 0!==this._map[t]}forEach(t){const e=this._map,i=e.length;if(i<=65536)for(let r=0;r<i;r++)void 0!==e[r]&&t(r,e[r]);else for(const i in e)t(i,e[i])}charCodeOf(t){const e=this._map;if(e.length<=65536)return e.indexOf(t);for(const i in e)if(e[i]===t)return 0|i;return-1}getMap(){return this._map}readCharCode(t,e,i){let r=0;const n=this.codespaceRanges;for(let o=0,s=n.length;o<s;o++){r=(r<<8|t.charCodeAt(e+o))>>>0;const s=n[o];for(let t=0,e=s.length;t<e;){const e=s[t++],n=s[t++];if(r>=e&&r<=n)return i.charcode=r,void(i.length=o+1)}}i.charcode=0,i.length=1}getCharCodeLength(t){const e=this.codespaceRanges;for(let i=0,r=e.length;i<r;i++){const r=e[i];for(let e=0,n=r.length;e<n;){const n=r[e++],o=r[e++];if(t>=n&&t<=o)return i+1}}return 1}get length(){return this._map.length}get isIdentityCMap(){if("Identity-H"!==this.name&&"Identity-V"!==this.name)return!1;if(65536!==this._map.length)return!1;for(let t=0;t<65536;t++)if(this._map[t]!==t)return!1;return!0}}e.CMap=u;class p extends u{constructor(t,e){super(),this.vertical=t,this.addCodespaceRange(e,0,65535)}mapCidRange(t,e,i){(0,r.unreachable)("should not call mapCidRange")}mapBfRange(t,e,i){(0,r.unreachable)("should not call mapBfRange")}mapBfRangeToArray(t,e,i){(0,r.unreachable)("should not call mapBfRangeToArray")}mapOne(t,e){(0,r.unreachable)("should not call mapCidOne")}lookup(t){return Number.isInteger(t)&&t<=65535?t:void 0}contains(t){return Number.isInteger(t)&&t<=65535}forEach(t){for(let e=0;e<=65535;e++)t(e,e)}charCodeOf(t){return Number.isInteger(t)&&t<=65535?t:-1}getMap(){const t=new Array(65536);for(let e=0;e<=65535;e++)t[e]=e;return t}get length(){return 65536}get isIdentityCMap(){(0,r.unreachable)("should not access .isIdentityCMap")}}e.IdentityCMap=p;const d=function(){function t(t,e){let i=0;for(let r=0;r<=e;r++)i=i<<8|t[r];return i>>>0}function e(t,e){return 1===e?String.fromCharCode(t[0],t[1]):3===e?String.fromCharCode(t[0],t[1],t[2],t[3]):String.fromCharCode.apply(null,t.subarray(0,e+1))}function i(t,e,i){let r=0;for(let n=i;n>=0;n--)r+=t[n]+e[n],t[n]=255&r,r>>=8}function n(t,e){let i=1;for(let r=e;r>=0&&i>0;r--)i+=t[r],t[r]=255&i,i>>=8}const o=16;class s{constructor(t){this.buffer=t,this.pos=0,this.end=t.length,this.tmpBuf=new Uint8Array(19)}readByte(){return this.pos>=this.end?-1:this.buffer[this.pos++]}readNumber(){let t,e=0;do{const i=this.readByte();if(i<0)throw new r.FormatError("unexpected EOF in bcmap");t=!(128&i),e=e<<7|127&i}while(!t);return e}readSigned(){const t=this.readNumber();return 1&t?~(t>>>1):t>>>1}readHex(t,e){t.set(this.buffer.subarray(this.pos,this.pos+e+1)),this.pos+=e+1}readHexNumber(t,e){let i;const n=this.tmpBuf;let o=0;do{const t=this.readByte();if(t<0)throw new r.FormatError("unexpected EOF in bcmap");i=!(128&t),n[o++]=127&t}while(!i);let s=e,a=0,l=0;for(;s>=0;){for(;l<8&&n.length>0;)a|=n[--o]<<l,l+=7;t[s]=255&a,s--,a>>=8,l-=8}}readHexSigned(t,e){this.readHexNumber(t,e);const i=1&t[e]?255:0;let r=0;for(let n=0;n<=e;n++)r=(1&r)<<8|t[n],t[n]=r>>1^i}readString(){const t=this.readNumber();let e="";for(let i=0;i<t;i++)e+=String.fromCharCode(this.readNumber());return e}}return class{async process(r,a,l){const c=new s(r),h=c.readByte();a.vertical=!!(1&h);let u=null;const p=new Uint8Array(o),d=new Uint8Array(o),f=new Uint8Array(o),g=new Uint8Array(o),m=new Uint8Array(o);let y,v;for(;(v=c.readByte())>=0;){const r=v>>5;if(7===r){switch(31&v){case 0:c.readString();break;case 1:u=c.readString()}continue}const s=!!(16&v),l=15&v;if(l+1>o)throw new Error("BinaryCMapReader.process: Invalid dataSize.");const h=1,b=c.readNumber();switch(r){case 0:c.readHex(p,l),c.readHexNumber(d,l),i(d,p,l),a.addCodespaceRange(l+1,t(p,l),t(d,l));for(let e=1;e<b;e++)n(d,l),c.readHexNumber(p,l),i(p,d,l),c.readHexNumber(d,l),i(d,p,l),a.addCodespaceRange(l+1,t(p,l),t(d,l));break;case 1:c.readHex(p,l),c.readHexNumber(d,l),i(d,p,l),c.readNumber();for(let t=1;t<b;t++)n(d,l),c.readHexNumber(p,l),i(p,d,l),c.readHexNumber(d,l),i(d,p,l),c.readNumber();break;case 2:c.readHex(f,l),y=c.readNumber(),a.mapOne(t(f,l),y);for(let e=1;e<b;e++)n(f,l),s||(c.readHexNumber(m,l),i(f,m,l)),y=c.readSigned()+(y+1),a.mapOne(t(f,l),y);break;case 3:c.readHex(p,l),c.readHexNumber(d,l),i(d,p,l),y=c.readNumber(),a.mapCidRange(t(p,l),t(d,l),y);for(let e=1;e<b;e++)n(d,l),s?p.set(d):(c.readHexNumber(p,l),i(p,d,l)),c.readHexNumber(d,l),i(d,p,l),y=c.readNumber(),a.mapCidRange(t(p,l),t(d,l),y);break;case 4:c.readHex(f,h),c.readHex(g,l),a.mapOne(t(f,h),e(g,l));for(let r=1;r<b;r++)n(f,h),s||(c.readHexNumber(m,h),i(f,m,h)),n(g,l),c.readHexSigned(m,l),i(g,m,l),a.mapOne(t(f,h),e(g,l));break;case 5:c.readHex(p,h),c.readHexNumber(d,h),i(d,p,h),c.readHex(g,l),a.mapBfRange(t(p,h),t(d,h),e(g,l));for(let r=1;r<b;r++)n(d,h),s?p.set(d):(c.readHexNumber(p,h),i(p,d,h)),c.readHexNumber(d,h),i(d,p,h),c.readHex(g,l),a.mapBfRange(t(p,h),t(d,h),e(g,l));break;default:throw new Error(`BinaryCMapReader.process - unknown type: ${r}`)}}return u?l(u):a}}}(),f=function(){function t(t){let e=0;for(let i=0;i<t.length;i++)e=e<<8|t.charCodeAt(i);return e>>>0}function e(t){if("string"!=typeof t)throw new r.FormatError("Malformed CMap: expected string.")}function i(t){if(!Number.isInteger(t))throw new r.FormatError("Malformed CMap: expected int.")}function h(i,r){for(;;){let o=r.getObj();if(o===n.EOF)break;if((0,n.isCmd)(o,"endbfchar"))return;e(o);const s=t(o);o=r.getObj(),e(o);const a=o;i.mapOne(s,a)}}function f(i,o){for(;;){let r=o.getObj();if(r===n.EOF)break;if((0,n.isCmd)(r,"endbfrange"))return;e(r);const s=t(r);r=o.getObj(),e(r);const a=t(r);if(r=o.getObj(),Number.isInteger(r)||"string"==typeof r){const t=Number.isInteger(r)?String.fromCharCode(r):r;i.mapBfRange(s,a,t)}else{if(!(0,n.isCmd)(r,"["))break;{r=o.getObj();const t=[];for(;!(0,n.isCmd)(r,"]")&&r!==n.EOF;)t.push(r),r=o.getObj();i.mapBfRangeToArray(s,a,t)}}}throw new r.FormatError("Invalid bf range.")}function g(r,o){for(;;){let s=o.getObj();if(s===n.EOF)break;if((0,n.isCmd)(s,"endcidchar"))return;e(s);const a=t(s);s=o.getObj(),i(s);const l=s;r.mapOne(a,l)}}function m(r,o){for(;;){let s=o.getObj();if(s===n.EOF)break;if((0,n.isCmd)(s,"endcidrange"))return;e(s);const a=t(s);s=o.getObj(),e(s);const l=t(s);s=o.getObj(),i(s);const c=s;r.mapCidRange(a,l,c)}}function y(e,i){for(;;){let r=i.getObj();if(r===n.EOF)break;if((0,n.isCmd)(r,"endcodespacerange"))return;if("string"!=typeof r)break;const o=t(r);if(r=i.getObj(),"string"!=typeof r)break;const s=t(r);e.addCodespaceRange(r.length,o,s)}throw new r.FormatError("Invalid codespace range.")}function v(t,e){const i=e.getObj();Number.isInteger(i)&&(t.vertical=!!i)}function b(t,e){const i=e.getObj();i instanceof n.Name&&(t.name=i.name)}async function w(t,e,i,o){let s,l;t:for(;;)try{const i=e.getObj();if(i===n.EOF)break;if(i instanceof n.Name)"WMode"===i.name?v(t,e):"CMapName"===i.name&&b(t,e),s=i;else if(i instanceof n.Cmd)switch(i.cmd){case"endcmap":break t;case"usecmap":s instanceof n.Name&&(l=s.name);break;case"begincodespacerange":y(t,e);break;case"beginbfchar":h(t,e);break;case"begincidchar":g(t,e);break;case"beginbfrange":f(t,e);break;case"begincidrange":m(t,e)}}catch(t){if(t instanceof a.MissingDataException)throw t;(0,r.warn)("Invalid cMap data: "+t);continue}return!o&&l&&(o=l),o?x(t,i,o):t}async function x(t,e,i){if(t.useCMap=await S(i,e),0===t.numCodespaceRanges){const e=t.useCMap.codespaceRanges;for(let i=0;i<e.length;i++)t.codespaceRanges[i]=e[i].slice();t.numCodespaceRanges=t.useCMap.numCodespaceRanges}return t.useCMap.forEach((function(e,i){t.contains(e)||t.mapOne(e,t.useCMap.lookup(e))})),t}async function S(t,e){if("Identity-H"===t)return new p(!1,2);if("Identity-V"===t)return new p(!0,2);if(!c.includes(t))throw new Error("Unknown CMap name: "+t);if(!e)throw new Error("Built-in CMap parameters are not provided.");const{cMapData:i,compressionType:n}=await e(t),o=new u(!0);if(n===r.CMapCompressionType.BINARY)return(new d).process(i,o,(t=>x(o,e,t)));if(n===r.CMapCompressionType.NONE){const t=new s.Lexer(new l.Stream(i));return w(o,t,e,null)}throw new Error("TODO: Only BINARY/NONE CMap compression is currently supported.")}return{async create(t){const e=t.encoding,i=t.fetchBuiltInCMap,r=t.useCMap;if(e instanceof n.Name)return S(e.name,i);if(e instanceof o.BaseStream){const t=await w(new u,new s.Lexer(e),i,r);return t.isIdentityCMap?S(t.name,i):t}throw new Error("Encoding required.")}}}();e.CMapFactory=f},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=e.Linearization=e.Lexer=void 0;var r=i(2),n=i(5),o=i(8),s=i(28),a=i(30),l=i(31),c=i(33),h=i(34),u=i(37),p=i(39),d=i(41),f=i(10),g=i(42),m=i(43);function y(t){const e=t.length;let i=1,r=0;for(let n=0;n<e;++n)i+=255&t[n],r+=i;return r%65521<<16|i%65521}class v{constructor({lexer:t,xref:e,allowStreams:i=!1,recoveryMode:r=!1}){this.lexer=t,this.xref=e,this.allowStreams=i,this.recoveryMode=r,this.imageCache=Object.create(null),this.refill()}refill(){this.buf1=this.lexer.getObj(),this.buf2=this.lexer.getObj()}shift(){this.buf2 instanceof n.Cmd&&"ID"===this.buf2.cmd?(this.buf1=this.buf2,this.buf2=null):(this.buf1=this.buf2,this.buf2=this.lexer.getObj())}tryShift(){try{return this.shift(),!0}catch(t){if(t instanceof o.MissingDataException)throw t;return!1}}getObj(t=null){const e=this.buf1;if(this.shift(),e instanceof n.Cmd)switch(e.cmd){case"BI":return this.makeInlineImage(t);case"[":const i=[];for(;!(0,n.isCmd)(this.buf1,"]")&&this.buf1!==n.EOF;)i.push(this.getObj(t));if(this.buf1===n.EOF){if(this.recoveryMode)return i;throw new o.ParserEOFException("End of file inside array.")}return this.shift(),i;case"<<":const s=new n.Dict(this.xref);for(;!(0,n.isCmd)(this.buf1,">>")&&this.buf1!==n.EOF;){if(!(this.buf1 instanceof n.Name)){(0,r.info)("Malformed dictionary: key must be a name object"),this.shift();continue}const e=this.buf1.name;if(this.shift(),this.buf1===n.EOF)break;s.set(e,this.getObj(t))}if(this.buf1===n.EOF){if(this.recoveryMode)return s;throw new o.ParserEOFException("End of file inside dictionary.")}return(0,n.isCmd)(this.buf2,"stream")?this.allowStreams?this.makeStream(s,t):s:(this.shift(),s);default:return e}if(Number.isInteger(e)){if(Number.isInteger(this.buf1)&&(0,n.isCmd)(this.buf2,"R")){const t=n.Ref.get(e,this.buf1);return this.shift(),this.shift(),t}return e}return"string"==typeof e&&t?t.decryptString(e):e}findDefaultInlineStreamEnd(t){const e=this.lexer,i=t.pos;let s,a,l=0;for(;-1!==(s=t.getByte());)if(0===l)l=69===s?1:0;else if(1===l)l=73===s?2:0;else if((0,r.assert)(2===l,"findDefaultInlineStreamEnd - invalid state."),32===s||10===s||13===s){a=t.pos;const i=t.peekBytes(10);for(let t=0,e=i.length;t<e;t++)if(s=i[t],(0!==s||0===i[t+1])&&10!==s&&13!==s&&(s<32||s>127)){l=0;break}if(2!==l)continue;if(e.knownCommands){const t=e.peekObj();t instanceof n.Cmd&&!e.knownCommands[t.cmd]&&(l=0)}else(0,r.warn)("findDefaultInlineStreamEnd - `lexer.knownCommands` is undefined.");if(2===l)break}else l=0;-1===s&&((0,r.warn)("findDefaultInlineStreamEnd: Reached the end of the stream without finding a valid EI marker"),a&&((0,r.warn)('... trying to recover by using the last "EI" occurrence.'),t.skip(-(t.pos-a))));let c=4;return t.skip(-c),s=t.peekByte(),t.skip(c),(0,o.isWhiteSpace)(s)||c--,t.pos-c-i}findDCTDecodeInlineStreamEnd(t){const e=t.pos;let i,n,o=!1;for(;-1!==(i=t.getByte());)if(255===i){switch(t.getByte()){case 0:break;case 255:t.skip(-1);break;case 217:o=!0;break;case 192:case 193:case 194:case 195:case 197:case 198:case 199:case 201:case 202:case 203:case 205:case 206:case 207:case 196:case 204:case 218:case 219:case 220:case 221:case 222:case 223:case 224:case 225:case 226:case 227:case 228:case 229:case 230:case 231:case 232:case 233:case 234:case 235:case 236:case 237:case 238:case 239:case 254:n=t.getUint16(),n>2?t.skip(n-2):t.skip(-2)}if(o)break}const s=t.pos-e;return-1===i?((0,r.warn)("Inline DCTDecode image stream: EOI marker not found, searching for /EI/ instead."),t.skip(-s),this.findDefaultInlineStreamEnd(t)):(this.inlineStreamSkipEI(t),s)}findASCII85DecodeInlineStreamEnd(t){const e=t.pos;let i;for(;-1!==(i=t.getByte());)if(126===i){const e=t.pos;for(i=t.peekByte();(0,o.isWhiteSpace)(i);)t.skip(),i=t.peekByte();if(62===i){t.skip();break}if(t.pos>e){const e=t.peekBytes(2);if(69===e[0]&&73===e[1])break}}const n=t.pos-e;return-1===i?((0,r.warn)("Inline ASCII85Decode image stream: EOD marker not found, searching for /EI/ instead."),t.skip(-n),this.findDefaultInlineStreamEnd(t)):(this.inlineStreamSkipEI(t),n)}findASCIIHexDecodeInlineStreamEnd(t){const e=t.pos;let i;for(;-1!==(i=t.getByte())&&62!==i;);const n=t.pos-e;return-1===i?((0,r.warn)("Inline ASCIIHexDecode image stream: EOD marker not found, searching for /EI/ instead."),t.skip(-n),this.findDefaultInlineStreamEnd(t)):(this.inlineStreamSkipEI(t),n)}inlineStreamSkipEI(t){let e,i=0;for(;-1!==(e=t.getByte());)if(0===i)i=69===e?1:0;else if(1===i)i=73===e?2:0;else if(2===i)break}makeInlineImage(t){const e=this.lexer,i=e.stream,o=new n.Dict(this.xref);let s;for(;!(0,n.isCmd)(this.buf1,"ID")&&this.buf1!==n.EOF;){if(!(this.buf1 instanceof n.Name))throw new r.FormatError("Dictionary key must be a name object");const e=this.buf1.name;if(this.shift(),this.buf1===n.EOF)break;o.set(e,this.getObj(t))}-1!==e.beginInlineImagePos&&(s=i.pos-e.beginInlineImagePos);const a=o.get("F","Filter");let l;if(a instanceof n.Name)l=a.name;else if(Array.isArray(a)){const t=this.xref.fetchIfRef(a[0]);t instanceof n.Name&&(l=t.name)}const c=i.pos;let h;switch(l){case"DCT":case"DCTDecode":h=this.findDCTDecodeInlineStreamEnd(i);break;case"A85":case"ASCII85Decode":h=this.findASCII85DecodeInlineStreamEnd(i);break;case"AHx":case"ASCIIHexDecode":h=this.findASCIIHexDecodeInlineStreamEnd(i);break;default:h=this.findDefaultInlineStreamEnd(i)}let u,p=i.makeSubStream(c,h,o);if(h<1e3&&s<5552){const t=p.getBytes();p.reset();const r=i.pos;i.pos=e.beginInlineImagePos;const o=i.getBytes(s);i.pos=r,u=y(t)+"_"+y(o);const a=this.imageCache[u];if(void 0!==a)return this.buf2=n.Cmd.get("EI"),this.shift(),a.reset(),a}return t&&(p=t.createStream(p,h)),p=this.filter(p,o,h),p.dict=o,void 0!==u&&(p.cacheKey=`inline_${h}_${u}`,this.imageCache[u]=p),this.buf2=n.Cmd.get("EI"),this.shift(),p}_findStreamLength(t,e){const{stream:i}=this.lexer;i.pos=t;const r=e.length;for(;i.pos<i.end;){const n=i.peekBytes(2048),o=n.length-r;if(o<=0)break;let s=0;for(;s<o;){let o=0;for(;o<r&&n[s+o]===e[o];)o++;if(o>=r)return i.pos+=s,i.pos-t;s++}i.pos+=o}return-1}makeStream(t,e){const i=this.lexer;let s=i.stream;i.skipToNextLine();const a=s.pos-1;let l=t.get("Length");if(Number.isInteger(l)||((0,r.info)(`Bad length "${l&&l.toString()}" in stream.`),l=0),s.pos=a+l,i.nextChar(),this.tryShift()&&(0,n.isCmd)(this.buf2,"endstream"))this.shift();else{const t=new Uint8Array([101,110,100,115,116,114,101,97,109]);let e=this._findStreamLength(a,t);if(e<0){const i=1;for(let n=1;n<=i;n++){const i=t.length-n,l=t.slice(0,i),c=this._findStreamLength(a,l);if(c>=0){const t=s.peekBytes(i+1)[i];if(!(0,o.isWhiteSpace)(t))break;(0,r.info)(`Found "${(0,r.bytesToString)(l)}" when searching for endstream command.`),e=c;break}}if(e<0)throw new r.FormatError("Missing endstream command.")}l=e,i.nextChar(),this.shift(),this.shift()}return this.shift(),s=s.makeSubStream(a,l,t),e&&(s=e.createStream(s,l)),s=this.filter(s,t,l),s.dict=t,s}filter(t,e,i){let o=e.get("F","Filter"),s=e.get("DP","DecodeParms");if(o instanceof n.Name)return Array.isArray(s)&&(0,r.warn)("/DecodeParms should not be an Array, when /Filter is a Name."),this.makeFilter(t,o.name,i,s);let a=i;if(Array.isArray(o)){const e=o,i=s;for(let l=0,c=e.length;l<c;++l){if(o=this.xref.fetchIfRef(e[l]),!(o instanceof n.Name))throw new r.FormatError(`Bad filter name "${o}"`);s=null,Array.isArray(i)&&l in i&&(s=this.xref.fetchIfRef(i[l])),t=this.makeFilter(t,o.name,a,s),a=null}}return t}makeFilter(t,e,i,n){if(0===i)return(0,r.warn)(`Empty "${e}" stream.`),new f.NullStream;const y=this.xref.stats;try{switch(e){case"Fl":case"FlateDecode":return y.addStreamType(r.StreamType.FLATE),n?new g.PredictorStream(new c.FlateStream(t,i),i,n):new c.FlateStream(t,i);case"LZW":case"LZWDecode":y.addStreamType(r.StreamType.LZW);let e=1;return n?(n.has("EarlyChange")&&(e=n.get("EarlyChange")),new g.PredictorStream(new d.LZWStream(t,i,e),i,n)):new d.LZWStream(t,i,e);case"DCT":case"DCTDecode":return y.addStreamType(r.StreamType.DCT),new u.JpegStream(t,i,n);case"JPX":case"JPXDecode":return y.addStreamType(r.StreamType.JPX),new p.JpxStream(t,i,n);case"A85":case"ASCII85Decode":return y.addStreamType(r.StreamType.A85),new s.Ascii85Stream(t,i);case"AHx":case"ASCIIHexDecode":return y.addStreamType(r.StreamType.AHX),new a.AsciiHexStream(t,i);case"CCF":case"CCITTFaxDecode":return y.addStreamType(r.StreamType.CCF),new l.CCITTFaxStream(t,i,n);case"RL":case"RunLengthDecode":return y.addStreamType(r.StreamType.RLX),new m.RunLengthStream(t,i);case"JBIG2Decode":return y.addStreamType(r.StreamType.JBIG),new h.Jbig2Stream(t,i,n)}return(0,r.warn)(`Filter "${e}" is not supported.`),t}catch(t){if(t instanceof o.MissingDataException)throw t;return(0,r.warn)(`Invalid stream: "${t}"`),new f.NullStream}}}e.Parser=v;const b=[1,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,2,0,0,2,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function w(t){return t>=48&&t<=57?15&t:t>=65&&t<=70||t>=97&&t<=102?9+(15&t):-1}class x{constructor(t,e=null){this.stream=t,this.nextChar(),this.strBuf=[],this.knownCommands=e,this._hexStringNumWarn=0,this.beginInlineImagePos=-1}nextChar(){return this.currentChar=this.stream.getByte()}peekChar(){return this.stream.peekByte()}getNumber(){let t=this.currentChar,e=!1,i=0,n=0;if(45===t?(n=-1,t=this.nextChar(),45===t&&(t=this.nextChar())):43===t&&(n=1,t=this.nextChar()),10===t||13===t)do{t=this.nextChar()}while(10===t||13===t);if(46===t&&(i=10,t=this.nextChar()),t<48||t>57){if((0,o.isWhiteSpace)(t)||-1===t){if(10===i&&0===n)return(0,r.warn)("Lexer.getNumber - treating a single decimal point as zero."),0;if(0===i&&-1===n)return(0,r.warn)("Lexer.getNumber - treating a single minus sign as zero."),0}throw new r.FormatError(`Invalid number: ${String.fromCharCode(t)} (charCode ${t})`)}n=n||1;let s=t-48,a=0,l=1;for(;(t=this.nextChar())>=0;)if(t>=48&&t<=57){const r=t-48;e?a=10*a+r:(0!==i&&(i*=10),s=10*s+r)}else if(46===t){if(0!==i)break;i=1}else if(45===t)(0,r.warn)("Badly formatted number: minus sign in the middle");else{if(69!==t&&101!==t)break;if(t=this.peekChar(),43===t||45===t)l=45===t?-1:1,this.nextChar();else if(t<48||t>57)break;e=!0}return 0!==i&&(s/=i),e&&(s*=10**(l*a)),n*s}getString(){let t=1,e=!1;const i=this.strBuf;i.length=0;let n=this.nextChar();for(;;){let o=!1;switch(0|n){case-1:(0,r.warn)("Unterminated string"),e=!0;break;case 40:++t,i.push("(");break;case 41:0==--t?(this.nextChar(),e=!0):i.push(")");break;case 92:switch(n=this.nextChar(),n){case-1:(0,r.warn)("Unterminated string"),e=!0;break;case 110:i.push("\n");break;case 114:i.push("\r");break;case 116:i.push("\t");break;case 98:i.push("\b");break;case 102:i.push("\f");break;case 92:case 40:case 41:i.push(String.fromCharCode(n));break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:let t=15&n;n=this.nextChar(),o=!0,n>=48&&n<=55&&(t=(t<<3)+(15&n),n=this.nextChar(),n>=48&&n<=55&&(o=!1,t=(t<<3)+(15&n))),i.push(String.fromCharCode(t));break;case 13:10===this.peekChar()&&this.nextChar();break;case 10:break;default:i.push(String.fromCharCode(n))}break;default:i.push(String.fromCharCode(n))}if(e)break;o||(n=this.nextChar())}return i.join("")}getName(){let t,e;const i=this.strBuf;for(i.length=0;(t=this.nextChar())>=0&&!b[t];)if(35===t){if(t=this.nextChar(),b[t]){(0,r.warn)("Lexer_getName: NUMBER SIGN (#) should be followed by a hexadecimal number."),i.push("#");break}const n=w(t);if(-1!==n){e=t,t=this.nextChar();const o=w(t);if(-1===o){if((0,r.warn)(`Lexer_getName: Illegal digit (${String.fromCharCode(t)}) in hexadecimal number.`),i.push("#",String.fromCharCode(e)),b[t])break;i.push(String.fromCharCode(t));continue}i.push(String.fromCharCode(n<<4|o))}else i.push("#",String.fromCharCode(t))}else i.push(String.fromCharCode(t));return i.length>127&&(0,r.warn)(`Name token is longer than allowed by the spec: ${i.length}`),n.Name.get(i.join(""))}_hexStringWarn(t){5!=this._hexStringNumWarn++?this._hexStringNumWarn>5||(0,r.warn)(`getHexString - ignoring invalid character: ${t}`):(0,r.warn)("getHexString - ignoring additional invalid characters.")}getHexString(){const t=this.strBuf;t.length=0;let e,i,n=this.currentChar,o=!0;for(this._hexStringNumWarn=0;;){if(n<0){(0,r.warn)("Unterminated hex string");break}if(62===n){this.nextChar();break}if(1!==b[n]){if(o){if(e=w(n),-1===e){this._hexStringWarn(n),n=this.nextChar();continue}}else{if(i=w(n),-1===i){this._hexStringWarn(n),n=this.nextChar();continue}t.push(String.fromCharCode(e<<4|i))}o=!o,n=this.nextChar()}else n=this.nextChar()}return t.join("")}getObj(){let t=!1,e=this.currentChar;for(;;){if(e<0)return n.EOF;if(t)10!==e&&13!==e||(t=!1);else if(37===e)t=!0;else if(1!==b[e])break;e=this.nextChar()}switch(0|e){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return this.getNumber();case 40:return this.getString();case 47:return this.getName();case 91:return this.nextChar(),n.Cmd.get("[");case 93:return this.nextChar(),n.Cmd.get("]");case 60:return e=this.nextChar(),60===e?(this.nextChar(),n.Cmd.get("<<")):this.getHexString();case 62:return e=this.nextChar(),62===e?(this.nextChar(),n.Cmd.get(">>")):n.Cmd.get(">");case 123:return this.nextChar(),n.Cmd.get("{");case 125:return this.nextChar(),n.Cmd.get("}");case 41:throw this.nextChar(),new r.FormatError(`Illegal character: ${e}`)}let i=String.fromCharCode(e);if(e<32||e>127){const t=this.peekChar();if(t>=32&&t<=127)return this.nextChar(),n.Cmd.get(i)}const o=this.knownCommands;let s=o&&void 0!==o[i];for(;(e=this.nextChar())>=0&&!b[e];){const t=i+String.fromCharCode(e);if(s&&void 0===o[t])break;if(128===i.length)throw new r.FormatError(`Command token too long: ${i.length}`);i=t,s=o&&void 0!==o[i]}return"true"===i||"false"!==i&&("null"===i?null:("BI"===i&&(this.beginInlineImagePos=this.stream.pos),n.Cmd.get(i)))}peekObj(){const t=this.stream.pos,e=this.currentChar,i=this.beginInlineImagePos;let n;try{n=this.getObj()}catch(t){if(t instanceof o.MissingDataException)throw t;(0,r.warn)(`peekObj: ${t}`)}return this.stream.pos=t,this.currentChar=e,this.beginInlineImagePos=i,n}skipToNextLine(){let t=this.currentChar;for(;t>=0;){if(13===t){t=this.nextChar(),10===t&&this.nextChar();break}if(10===t){this.nextChar();break}t=this.nextChar()}}}e.Lexer=x,e.Linearization=class{static create(t){function e(t,e,i=!1){const r=t.get(e);if(Number.isInteger(r)&&(i?r>=0:r>0))return r;throw new Error(`The "${e}" parameter in the linearization dictionary is invalid.`)}const i=new v({lexer:new x(t),xref:null}),r=i.getObj(),o=i.getObj(),s=i.getObj(),a=i.getObj();let l,c;if(!(Number.isInteger(r)&&Number.isInteger(o)&&(0,n.isCmd)(s,"obj")&&a instanceof n.Dict&&"number"==typeof(l=a.get("Linearized"))&&l>0))return null;if((c=e(a,"L"))!==t.length)throw new Error('The "L" parameter in the linearization dictionary does not equal the stream length.');return{length:c,hints:function(t){const e=t.get("H");let i;if(Array.isArray(e)&&(2===(i=e.length)||4===i)){for(let t=0;t<i;t++){const i=e[t];if(!(Number.isInteger(i)&&i>0))throw new Error(`Hint (${t}) in the linearization dictionary is invalid.`)}return e}throw new Error("Hint array in the linearization dictionary is invalid.")}(a),objectNumberFirst:e(a,"O"),endFirst:e(a,"E"),numPages:e(a,"N"),mainXRefEntriesOffset:e(a,"T"),pageFirst:a.has("P")?e(a,"P",!0):0}}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Ascii85Stream=void 0;var r=i(29),n=i(8);class o extends r.DecodeStream{constructor(t,e){e&&(e*=.8),super(e),this.str=t,this.dict=t.dict,this.input=new Uint8Array(5)}readBlock(){const t=this.str;let e=t.getByte();for(;(0,n.isWhiteSpace)(e);)e=t.getByte();if(-1===e||126===e)return void(this.eof=!0);const i=this.bufferLength;let r,o;if(122===e){for(r=this.ensureBuffer(i+4),o=0;o<4;++o)r[i+o]=0;this.bufferLength+=4}else{const s=this.input;for(s[0]=e,o=1;o<5;++o){for(e=t.getByte();(0,n.isWhiteSpace)(e);)e=t.getByte();if(s[o]=e,-1===e||126===e)break}if(r=this.ensureBuffer(i+o-1),this.bufferLength+=o-1,o<5){for(;o<5;++o)s[o]=117;this.eof=!0}let a=0;for(o=0;o<5;++o)a=85*a+(s[o]-33);for(o=3;o>=0;--o)r[i+o]=255&a,a>>=8}}}e.Ascii85Stream=o},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StreamsSequenceStream=e.DecodeStream=void 0;var r=i(9),n=i(10);const o=new Uint8Array(0);class s extends r.BaseStream{constructor(t){if(super(),this._rawMinBufferLength=t||0,this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=o,this.minBufferLength=512,t)for(;this.minBufferLength<t;)this.minBufferLength*=2}get isEmpty(){for(;!this.eof&&0===this.bufferLength;)this.readBlock();return 0===this.bufferLength}ensureBuffer(t){const e=this.buffer;if(t<=e.byteLength)return e;let i=this.minBufferLength;for(;i<t;)i*=2;const r=new Uint8Array(i);return r.set(e),this.buffer=r}getByte(){const t=this.pos;for(;this.bufferLength<=t;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]}getBytes(t){const e=this.pos;let i;if(t){for(this.ensureBuffer(e+t),i=e+t;!this.eof&&this.bufferLength<i;)this.readBlock();const r=this.bufferLength;i>r&&(i=r)}else{for(;!this.eof;)this.readBlock();i=this.bufferLength}return this.pos=i,this.buffer.subarray(e,i)}reset(){this.pos=0}makeSubStream(t,e,i=null){if(void 0===e)for(;!this.eof;)this.readBlock();else{const i=t+e;for(;this.bufferLength<=i&&!this.eof;)this.readBlock()}return new n.Stream(this.buffer,t,e,i)}getBaseStreams(){return this.str?this.str.getBaseStreams():null}}e.DecodeStream=s,e.StreamsSequenceStream=class extends s{constructor(t,e=null){let i=0;for(const e of t)i+=e instanceof s?e._rawMinBufferLength:e.length;super(i),this.streams=t,this._onError=e}readBlock(){const t=this.streams;if(0===t.length)return void(this.eof=!0);const e=t.shift();let i;try{i=e.getBytes()}catch(t){if(this._onError)return void this._onError(t,e.dict&&e.dict.objId);throw t}const r=this.bufferLength,n=r+i.length;this.ensureBuffer(n).set(i,r),this.bufferLength=n}getBaseStreams(){const t=[];for(const e of this.streams){const i=e.getBaseStreams();i&&t.push(...i)}return t.length>0?t:null}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsciiHexStream=void 0;var r=i(29);class n extends r.DecodeStream{constructor(t,e){e&&(e*=.5),super(e),this.str=t,this.dict=t.dict,this.firstDigit=-1}readBlock(){const t=this.str.getBytes(8e3);if(!t.length)return void(this.eof=!0);const e=t.length+1>>1,i=this.ensureBuffer(this.bufferLength+e);let r=this.bufferLength,n=this.firstDigit;for(const e of t){let t;if(e>=48&&e<=57)t=15&e;else{if(!(e>=65&&e<=70||e>=97&&e<=102)){if(62===e){this.eof=!0;break}continue}t=9+(15&e)}n<0?n=t:(i[r++]=n<<4|t,n=-1)}n>=0&&this.eof&&(i[r++]=n<<4,n=-1),this.firstDigit=n,this.bufferLength=r}}e.AsciiHexStream=n},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CCITTFaxStream=void 0;var r=i(32),n=i(29),o=i(5);class s extends n.DecodeStream{constructor(t,e,i){super(e),this.str=t,this.dict=t.dict,i instanceof o.Dict||(i=o.Dict.empty);const n={next:()=>t.getByte()};this.ccittFaxDecoder=new r.CCITTFaxDecoder(n,{K:i.get("K"),EndOfLine:i.get("EndOfLine"),EncodedByteAlign:i.get("EncodedByteAlign"),Columns:i.get("Columns"),Rows:i.get("Rows"),EndOfBlock:i.get("EndOfBlock"),BlackIs1:i.get("BlackIs1")})}readBlock(){for(;!this.eof;){const t=this.ccittFaxDecoder.readNextChar();if(-1===t)return void(this.eof=!0);this.ensureBuffer(this.bufferLength+1),this.buffer[this.bufferLength++]=t}}}e.CCITTFaxStream=s},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CCITTFaxDecoder=void 0;var r=i(2);const n=-1,o=[[-1,-1],[-1,-1],[7,8],[7,7],[6,6],[6,6],[6,5],[6,5],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2]],s=[[-1,-1],[12,-2],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[12,1984],[12,2048],[12,2112],[12,2176],[12,2240],[12,2304],[11,1856],[11,1856],[11,1920],[11,1920],[12,2368],[12,2432],[12,2496],[12,2560]],a=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[8,29],[8,29],[8,30],[8,30],[8,45],[8,45],[8,46],[8,46],[7,22],[7,22],[7,22],[7,22],[7,23],[7,23],[7,23],[7,23],[8,47],[8,47],[8,48],[8,48],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[7,20],[7,20],[7,20],[7,20],[8,33],[8,33],[8,34],[8,34],[8,35],[8,35],[8,36],[8,36],[8,37],[8,37],[8,38],[8,38],[7,19],[7,19],[7,19],[7,19],[8,31],[8,31],[8,32],[8,32],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[8,53],[8,53],[8,54],[8,54],[7,26],[7,26],[7,26],[7,26],[8,39],[8,39],[8,40],[8,40],[8,41],[8,41],[8,42],[8,42],[8,43],[8,43],[8,44],[8,44],[7,21],[7,21],[7,21],[7,21],[7,28],[7,28],[7,28],[7,28],[8,61],[8,61],[8,62],[8,62],[8,63],[8,63],[8,0],[8,0],[8,320],[8,320],[8,384],[8,384],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[7,27],[7,27],[7,27],[7,27],[8,59],[8,59],[8,60],[8,60],[9,1472],[9,1536],[9,1600],[9,1728],[7,18],[7,18],[7,18],[7,18],[7,24],[7,24],[7,24],[7,24],[8,49],[8,49],[8,50],[8,50],[8,51],[8,51],[8,52],[8,52],[7,25],[7,25],[7,25],[7,25],[8,55],[8,55],[8,56],[8,56],[8,57],[8,57],[8,58],[8,58],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[8,448],[8,448],[8,512],[8,512],[9,704],[9,768],[8,640],[8,640],[8,576],[8,576],[9,832],[9,896],[9,960],[9,1024],[9,1088],[9,1152],[9,1216],[9,1280],[9,1344],[9,1408],[7,256],[7,256],[7,256],[7,256],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7]],l=[[-1,-1],[-1,-1],[12,-2],[12,-2],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[11,1792],[11,1792],[12,1984],[12,1984],[12,2048],[12,2048],[12,2112],[12,2112],[12,2176],[12,2176],[12,2240],[12,2240],[12,2304],[12,2304],[11,1856],[11,1856],[11,1856],[11,1856],[11,1920],[11,1920],[11,1920],[11,1920],[12,2368],[12,2368],[12,2432],[12,2432],[12,2496],[12,2496],[12,2560],[12,2560],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[12,52],[12,52],[13,640],[13,704],[13,768],[13,832],[12,55],[12,55],[12,56],[12,56],[13,1280],[13,1344],[13,1408],[13,1472],[12,59],[12,59],[12,60],[12,60],[13,1536],[13,1600],[11,24],[11,24],[11,24],[11,24],[11,25],[11,25],[11,25],[11,25],[13,1664],[13,1728],[12,320],[12,320],[12,384],[12,384],[12,448],[12,448],[13,512],[13,576],[12,53],[12,53],[12,54],[12,54],[13,896],[13,960],[13,1024],[13,1088],[13,1152],[13,1216],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64]],c=[[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[11,23],[11,23],[12,50],[12,51],[12,44],[12,45],[12,46],[12,47],[12,57],[12,58],[12,61],[12,256],[10,16],[10,16],[10,16],[10,16],[10,17],[10,17],[10,17],[10,17],[12,48],[12,49],[12,62],[12,63],[12,30],[12,31],[12,32],[12,33],[12,40],[12,41],[11,22],[11,22],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[12,128],[12,192],[12,26],[12,27],[12,28],[12,29],[11,19],[11,19],[11,20],[11,20],[12,34],[12,35],[12,36],[12,37],[12,38],[12,39],[11,21],[11,21],[12,42],[12,43],[10,0],[10,0],[10,0],[10,0],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12]],h=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[6,9],[6,8],[5,7],[5,7],[4,6],[4,6],[4,6],[4,6],[4,5],[4,5],[4,5],[4,5],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2]];e.CCITTFaxDecoder=class{constructor(t,e={}){if(!t||"function"!=typeof t.next)throw new Error('CCITTFaxDecoder - invalid "source" parameter.');this.source=t,this.eof=!1,this.encoding=e.K||0,this.eoline=e.EndOfLine||!1,this.byteAlign=e.EncodedByteAlign||!1,this.columns=e.Columns||1728,this.rows=e.Rows||0;let i,r=e.EndOfBlock;for(null==r&&(r=!0),this.eoblock=r,this.black=e.BlackIs1||!1,this.codingLine=new Uint32Array(this.columns+1),this.refLine=new Uint32Array(this.columns+2),this.codingLine[0]=this.columns,this.codingPos=0,this.row=0,this.nextLine2D=this.encoding<0,this.inputBits=0,this.inputBuf=0,this.outputBits=0,this.rowsDone=!1;0===(i=this._lookBits(12));)this._eatBits(1);1===i&&this._eatBits(12),this.encoding>0&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1))}readNextChar(){if(this.eof)return-1;const t=this.refLine,e=this.codingLine,i=this.columns;let o,s,a,l,c;if(0===this.outputBits){if(this.rowsDone&&(this.eof=!0),this.eof)return-1;let a,c,h;if(this.err=!1,this.nextLine2D){for(l=0;e[l]<i;++l)t[l]=e[l];for(t[l++]=i,t[l]=i,e[0]=0,this.codingPos=0,o=0,s=0;e[this.codingPos]<i;)switch(a=this._getTwoDimCode(),a){case 0:this._addPixels(t[o+1],s),t[o+1]<i&&(o+=2);break;case 1:if(a=c=0,s){do{a+=h=this._getBlackCode()}while(h>=64);do{c+=h=this._getWhiteCode()}while(h>=64)}else{do{a+=h=this._getWhiteCode()}while(h>=64);do{c+=h=this._getBlackCode()}while(h>=64)}for(this._addPixels(e[this.codingPos]+a,s),e[this.codingPos]<i&&this._addPixels(e[this.codingPos]+c,1^s);t[o]<=e[this.codingPos]&&t[o]<i;)o+=2;break;case 7:if(this._addPixels(t[o]+3,s),s^=1,e[this.codingPos]<i)for(++o;t[o]<=e[this.codingPos]&&t[o]<i;)o+=2;break;case 5:if(this._addPixels(t[o]+2,s),s^=1,e[this.codingPos]<i)for(++o;t[o]<=e[this.codingPos]&&t[o]<i;)o+=2;break;case 3:if(this._addPixels(t[o]+1,s),s^=1,e[this.codingPos]<i)for(++o;t[o]<=e[this.codingPos]&&t[o]<i;)o+=2;break;case 2:if(this._addPixels(t[o],s),s^=1,e[this.codingPos]<i)for(++o;t[o]<=e[this.codingPos]&&t[o]<i;)o+=2;break;case 8:if(this._addPixelsNeg(t[o]-3,s),s^=1,e[this.codingPos]<i)for(o>0?--o:++o;t[o]<=e[this.codingPos]&&t[o]<i;)o+=2;break;case 6:if(this._addPixelsNeg(t[o]-2,s),s^=1,e[this.codingPos]<i)for(o>0?--o:++o;t[o]<=e[this.codingPos]&&t[o]<i;)o+=2;break;case 4:if(this._addPixelsNeg(t[o]-1,s),s^=1,e[this.codingPos]<i)for(o>0?--o:++o;t[o]<=e[this.codingPos]&&t[o]<i;)o+=2;break;case n:this._addPixels(i,0),this.eof=!0;break;default:(0,r.info)("bad 2d code"),this._addPixels(i,0),this.err=!0}}else for(e[0]=0,this.codingPos=0,s=0;e[this.codingPos]<i;){if(a=0,s)do{a+=h=this._getBlackCode()}while(h>=64);else do{a+=h=this._getWhiteCode()}while(h>=64);this._addPixels(e[this.codingPos]+a,s),s^=1}let u=!1;if(this.byteAlign&&(this.inputBits&=-8),this.eoblock||this.row!==this.rows-1){if(a=this._lookBits(12),this.eoline)for(;a!==n&&1!==a;)this._eatBits(1),a=this._lookBits(12);else for(;0===a;)this._eatBits(1),a=this._lookBits(12);1===a?(this._eatBits(12),u=!0):a===n&&(this.eof=!0)}else this.rowsDone=!0;if(!this.eof&&this.encoding>0&&!this.rowsDone&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1)),this.eoblock&&u&&this.byteAlign){if(a=this._lookBits(12),1===a){if(this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1)),this.encoding>=0)for(l=0;l<4;++l)a=this._lookBits(12),1!==a&&(0,r.info)("bad rtc code: "+a),this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1));this.eof=!0}}else if(this.err&&this.eoline){for(;;){if(a=this._lookBits(13),a===n)return this.eof=!0,-1;if(a>>1==1)break;this._eatBits(1)}this._eatBits(12),this.encoding>0&&(this._eatBits(1),this.nextLine2D=!(1&a))}e[0]>0?this.outputBits=e[this.codingPos=0]:this.outputBits=e[this.codingPos=1],this.row++}if(this.outputBits>=8)c=1&this.codingPos?0:255,this.outputBits-=8,0===this.outputBits&&e[this.codingPos]<i&&(this.codingPos++,this.outputBits=e[this.codingPos]-e[this.codingPos-1]);else{a=8,c=0;do{if("number"!=typeof this.outputBits)throw new r.FormatError('Invalid /CCITTFaxDecode data, "outputBits" must be a number.');this.outputBits>a?(c<<=a,1&this.codingPos||(c|=255>>8-a),this.outputBits-=a,a=0):(c<<=this.outputBits,1&this.codingPos||(c|=255>>8-this.outputBits),a-=this.outputBits,this.outputBits=0,e[this.codingPos]<i?(this.codingPos++,this.outputBits=e[this.codingPos]-e[this.codingPos-1]):a>0&&(c<<=a,a=0))}while(a)}return this.black&&(c^=255),c}_addPixels(t,e){const i=this.codingLine;let n=this.codingPos;t>i[n]&&(t>this.columns&&((0,r.info)("row is wrong length"),this.err=!0,t=this.columns),1&n^e&&++n,i[n]=t),this.codingPos=n}_addPixelsNeg(t,e){const i=this.codingLine;let n=this.codingPos;if(t>i[n])t>this.columns&&((0,r.info)("row is wrong length"),this.err=!0,t=this.columns),1&n^e&&++n,i[n]=t;else if(t<i[n]){for(t<0&&((0,r.info)("invalid code"),this.err=!0,t=0);n>0&&t<i[n-1];)--n;i[n]=t}this.codingPos=n}_findTableCode(t,e,i,r){const o=r||0;for(let r=t;r<=e;++r){let t=this._lookBits(r);if(t===n)return[!0,1,!1];if(r<e&&(t<<=e-r),!o||t>=o){const e=i[t-o];if(e[0]===r)return this._eatBits(r),[!0,e[1],!0]}}return[!1,0,!1]}_getTwoDimCode(){let t,e=0;if(this.eoblock){if(e=this._lookBits(7),t=o[e],t&&t[0]>0)return this._eatBits(t[0]),t[1]}else{const t=this._findTableCode(1,7,o);if(t[0]&&t[2])return t[1]}return(0,r.info)("Bad two dim code"),n}_getWhiteCode(){let t,e=0;if(this.eoblock){if(e=this._lookBits(12),e===n)return 1;if(t=e>>5==0?s[e]:a[e>>3],t[0]>0)return this._eatBits(t[0]),t[1]}else{let t=this._findTableCode(1,9,a);if(t[0])return t[1];if(t=this._findTableCode(11,12,s),t[0])return t[1]}return(0,r.info)("bad white code"),this._eatBits(1),1}_getBlackCode(){let t,e;if(this.eoblock){if(t=this._lookBits(13),t===n)return 1;if(e=t>>7==0?l[t]:t>>9==0&&t>>7!=0?c[(t>>1)-64]:h[t>>7],e[0]>0)return this._eatBits(e[0]),e[1]}else{let t=this._findTableCode(2,6,h);if(t[0])return t[1];if(t=this._findTableCode(7,12,c,64),t[0])return t[1];if(t=this._findTableCode(10,13,l),t[0])return t[1]}return(0,r.info)("bad black code"),this._eatBits(1),1}_lookBits(t){let e;for(;this.inputBits<t;){if(-1===(e=this.source.next()))return 0===this.inputBits?n:this.inputBuf<<t-this.inputBits&65535>>16-t;this.inputBuf=this.inputBuf<<8|e,this.inputBits+=8}return this.inputBuf>>this.inputBits-t&65535>>16-t}_eatBits(t){(this.inputBits-=t)<0&&(this.inputBits=0)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FlateStream=void 0;var r=i(29),n=i(2);const o=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),a=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),l=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],c=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];class h extends r.DecodeStream{constructor(t,e){super(e),this.str=t,this.dict=t.dict;const i=t.getByte(),r=t.getByte();if(-1===i||-1===r)throw new n.FormatError(`Invalid header in flate stream: ${i}, ${r}`);if(8!=(15&i))throw new n.FormatError(`Unknown compression method in flate stream: ${i}, ${r}`);if(((i<<8)+r)%31!=0)throw new n.FormatError(`Bad FCHECK in flate stream: ${i}, ${r}`);if(32&r)throw new n.FormatError(`FDICT bit set in flate stream: ${i}, ${r}`);this.codeSize=0,this.codeBuf=0}getBits(t){const e=this.str;let i,r=this.codeSize,o=this.codeBuf;for(;r<t;){if(-1===(i=e.getByte()))throw new n.FormatError("Bad encoding in flate stream");o|=i<<r,r+=8}return i=o&(1<<t)-1,this.codeBuf=o>>t,this.codeSize=r-=t,i}getCode(t){const e=this.str,i=t[0],r=t[1];let o,s=this.codeSize,a=this.codeBuf;for(;s<r&&-1!==(o=e.getByte());)a|=o<<s,s+=8;const l=i[a&(1<<r)-1],c=l>>16,h=65535&l;if(c<1||s<c)throw new n.FormatError("Bad encoding in flate stream");return this.codeBuf=a>>c,this.codeSize=s-c,h}generateHuffmanTable(t){const e=t.length;let i,r=0;for(i=0;i<e;++i)t[i]>r&&(r=t[i]);const n=1<<r,o=new Int32Array(n);for(let s=1,a=0,l=2;s<=r;++s,a<<=1,l<<=1)for(let r=0;r<e;++r)if(t[r]===s){let t=0,e=a;for(i=0;i<s;++i)t=t<<1|1&e,e>>=1;for(i=t;i<n;i+=l)o[i]=s<<16|r;++a}return[o,r]}readBlock(){let t,e;const i=this.str;let r,h,u=this.getBits(3);if(1&u&&(this.eof=!0),u>>=1,0===u){let e;if(-1===(e=i.getByte()))throw new n.FormatError("Bad block header in flate stream");let r=e;if(-1===(e=i.getByte()))throw new n.FormatError("Bad block header in flate stream");if(r|=e<<8,-1===(e=i.getByte()))throw new n.FormatError("Bad block header in flate stream");let o=e;if(-1===(e=i.getByte()))throw new n.FormatError("Bad block header in flate stream");if(o|=e<<8,o!==(65535&~r)&&(0!==r||0!==o))throw new n.FormatError("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;const s=this.bufferLength,a=s+r;if(t=this.ensureBuffer(a),this.bufferLength=a,0===r)-1===i.peekByte()&&(this.eof=!0);else{const e=i.getBytes(r);t.set(e,s),e.length<r&&(this.eof=!0)}return}if(1===u)r=l,h=c;else{if(2!==u)throw new n.FormatError("Unknown block type in flate stream");{const t=this.getBits(5)+257,i=this.getBits(5)+1,n=this.getBits(4)+4,s=new Uint8Array(o.length);let a;for(a=0;a<n;++a)s[o[a]]=this.getBits(3);const l=this.generateHuffmanTable(s);e=0,a=0;const c=t+i,u=new Uint8Array(c);let p,d,f;for(;a<c;){const t=this.getCode(l);if(16===t)p=2,d=3,f=e;else if(17===t)p=3,d=3,f=e=0;else{if(18!==t){u[a++]=e=t;continue}p=7,d=11,f=e=0}let i=this.getBits(p)+d;for(;i-- >0;)u[a++]=f}r=this.generateHuffmanTable(u.subarray(0,t)),h=this.generateHuffmanTable(u.subarray(t,c))}}t=this.buffer;let p=t?t.length:0,d=this.bufferLength;for(;;){let i=this.getCode(r);if(i<256){d+1>=p&&(t=this.ensureBuffer(d+1),p=t.length),t[d++]=i;continue}if(256===i)return void(this.bufferLength=d);i-=257,i=s[i];let n=i>>16;n>0&&(n=this.getBits(n)),e=(65535&i)+n,i=this.getCode(h),i=a[i],n=i>>16,n>0&&(n=this.getBits(n));const o=(65535&i)+n;d+e>=p&&(t=this.ensureBuffer(d+e),p=t.length);for(let i=0;i<e;++i,++d)t[d]=t[d-o]}}}e.FlateStream=h},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Jbig2Stream=void 0;var r=i(9),n=i(29),o=i(5),s=i(35),a=i(2);class l extends n.DecodeStream{constructor(t,e,i){super(e),this.stream=t,this.dict=t.dict,this.maybeLength=e,this.params=i}get bytes(){return(0,a.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))}ensureBuffer(t){}readBlock(){if(this.eof)return;const t=new s.Jbig2Image,e=[];if(this.params instanceof o.Dict){const t=this.params.get("JBIG2Globals");if(t instanceof r.BaseStream){const i=t.getBytes();e.push({data:i,start:0,end:i.length})}}e.push({data:this.bytes,start:0,end:this.bytes.length});const i=t.parseChunks(e),n=i.length;for(let t=0;t<n;t++)i[t]^=255;this.buffer=i,this.bufferLength=n,this.eof=!0}}e.Jbig2Stream=l},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Jbig2Image=void 0;var r=i(2),n=i(8),o=i(36),s=i(32);class a extends r.BaseException{constructor(t){super(`JBIG2 error: ${t}`,"Jbig2Error")}}class l{getContexts(t){return t in this?this[t]:this[t]=new Int8Array(65536)}}class c{constructor(t,e,i){this.data=t,this.start=e,this.end=i}get decoder(){const t=new o.ArithmeticDecoder(this.data,this.start,this.end);return(0,r.shadow)(this,"decoder",t)}get contextCache(){const t=new l;return(0,r.shadow)(this,"contextCache",t)}}function h(t,e,i){const r=t.getContexts(e);let n=1;function o(t){let e=0;for(let o=0;o<t;o++){const t=i.readBit(r,n);n=n<256?n<<1|t:511&(n<<1|t)|256,e=e<<1|t}return e>>>0}const s=o(1),a=o(1)?o(1)?o(1)?o(1)?o(1)?o(32)+4436:o(12)+340:o(8)+84:o(6)+20:o(4)+4:o(2);return 0===s?a:a>0?-a:null}function u(t,e,i){const r=t.getContexts("IAID");let n=1;for(let t=0;t<i;t++)n=n<<1|e.readBit(r,n);return i<31?n&(1<<i)-1:2147483647&n}const p=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"PatternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],d=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],f=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],g=[39717,1941,229,405],m=[32,8];function y(t,e,i,r,n,o,s,a){if(t)return R(new I(a.data,a.start,a.end),e,i,!1);if(0===r&&!o&&!n&&4===s.length&&3===s[0].x&&-1===s[0].y&&-3===s[1].x&&-1===s[1].y&&2===s[2].x&&-2===s[2].y&&-2===s[3].x&&-2===s[3].y)return function(t,e,i){const r=i.decoder,n=i.contextCache.getContexts("GB"),o=[];let s,a,l,c,h,u,p;for(a=0;a<e;a++)for(h=o[a]=new Uint8Array(t),u=a<1?h:o[a-1],p=a<2?h:o[a-2],s=p[0]<<13|p[1]<<12|p[2]<<11|u[0]<<7|u[1]<<6|u[2]<<5|u[3]<<4,l=0;l<t;l++)h[l]=c=r.readBit(n,s),s=(31735&s)<<1|(l+3<t?p[l+3]<<11:0)|(l+4<t?u[l+4]<<4:0)|c;return o}(e,i,a);const l=!!o,c=d[r].concat(s);c.sort((function(t,e){return t.y-e.y||t.x-e.x}));const h=c.length,u=new Int8Array(h),p=new Int8Array(h),f=[];let m,y,v=0,b=0,w=0,x=0;for(y=0;y<h;y++)u[y]=c[y].x,p[y]=c[y].y,b=Math.min(b,c[y].x),w=Math.max(w,c[y].x),x=Math.min(x,c[y].y),y<h-1&&c[y].y===c[y+1].y&&c[y].x===c[y+1].x-1?v|=1<<h-1-y:f.push(y);const S=f.length,k=new Int8Array(S),C=new Int8Array(S),A=new Uint16Array(S);for(m=0;m<S;m++)y=f[m],k[m]=c[y].x,C[m]=c[y].y,A[m]=1<<h-1-y;const _=-b,T=-x,O=e-w,E=g[r];let M=new Uint8Array(e);const P=[],D=a.decoder,F=a.contextCache.getContexts("GB");let L,N,B,j,z,U=0,$=0;for(let t=0;t<i;t++)if(n&&(U^=D.readBit(F,E),U))P.push(M);else for(M=new Uint8Array(M),P.push(M),L=0;L<e;L++){if(l&&o[t][L]){M[L]=0;continue}if(L>=_&&L<O&&t>=T)for($=$<<1&v,y=0;y<S;y++)N=t+C[y],B=L+k[y],j=P[N][B],j&&(j=A[y],$|=j);else for($=0,z=h-1,y=0;y<h;y++,z--)B=L+u[y],B>=0&&B<e&&(N=t+p[y],N>=0&&(j=P[N][B],j&&($|=j<<z)));const i=D.readBit(F,$);M[L]=i}return P}function v(t,e,i,r,n,o,s,l,c){let h=f[i].coding;0===i&&(h=h.concat([l[0]]));const u=h.length,p=new Int32Array(u),d=new Int32Array(u);let g;for(g=0;g<u;g++)p[g]=h[g].x,d[g]=h[g].y;let y=f[i].reference;0===i&&(y=y.concat([l[1]]));const v=y.length,b=new Int32Array(v),w=new Int32Array(v);for(g=0;g<v;g++)b[g]=y[g].x,w[g]=y[g].y;const x=r[0].length,S=r.length,k=m[i],C=[],A=c.decoder,_=c.contextCache.getContexts("GR");let T=0;for(let i=0;i<e;i++){if(s&&(T^=A.readBit(_,k),T))throw new a("prediction is not supported");const e=new Uint8Array(t);C.push(e);for(let s=0;s<t;s++){let a,l,c=0;for(g=0;g<u;g++)a=i+d[g],l=s+p[g],a<0||l<0||l>=t?c<<=1:c=c<<1|C[a][l];for(g=0;g<v;g++)a=i+w[g]-o,l=s+b[g]-n,a<0||a>=S||l<0||l>=x?c<<=1:c=c<<1|r[a][l];const h=A.readBit(_,c);e[s]=h}}return C}function b(t,e,i,r,n,o,s,l,c,p,d,f,g,m,y,b,w,x,S){if(t&&e)throw new a("refinement with Huffman is not supported");const k=[];let C,A;for(C=0;C<r;C++){if(A=new Uint8Array(i),n)for(let t=0;t<i;t++)A[t]=n;k.push(A)}const _=w.decoder,T=w.contextCache;let O=t?-m.tableDeltaT.decode(S):-h(T,"IADT",_),E=0;for(C=0;C<o;){O+=t?m.tableDeltaT.decode(S):h(T,"IADT",_),E+=t?m.tableFirstS.decode(S):h(T,"IAFS",_);let r=E;for(;;){let n=0;s>1&&(n=t?S.readBits(x):h(T,"IAIT",_));const o=s*O+n,E=t?m.symbolIDTable.decode(S):u(T,_,c),M=e&&(t?S.readBit():h(T,"IARI",_));let P=l[E],I=P[0].length,D=P.length;if(M){const t=h(T,"IARDW",_),e=h(T,"IARDH",_),i=h(T,"IARDX",_),r=h(T,"IARDY",_);I+=t,D+=e,P=v(I,D,y,P,(t>>1)+i,(e>>1)+r,!1,b,w)}const F=o-(1&f?0:D-1),R=r-(2&f?I-1:0);let L,N,B;if(p){for(L=0;L<D;L++){if(A=k[R+L],!A)continue;B=P[L];const t=Math.min(i-F,I);switch(g){case 0:for(N=0;N<t;N++)A[F+N]|=B[N];break;case 2:for(N=0;N<t;N++)A[F+N]^=B[N];break;default:throw new a(`operator ${g} is not supported`)}}r+=D-1}else{for(N=0;N<D;N++)if(A=k[F+N],A)switch(B=P[N],g){case 0:for(L=0;L<I;L++)A[R+L]|=B[L];break;case 2:for(L=0;L<I;L++)A[R+L]^=B[L];break;default:throw new a(`operator ${g} is not supported`)}r+=I-1}C++;const j=t?m.tableDeltaS.decode(S):h(T,"IADS",_);if(null===j)break;r+=j+d}}return k}function w(t,e){const i={};i.number=(0,n.readUint32)(t,e);const r=t[e+4],o=63&r;if(!p[o])throw new a("invalid segment type: "+o);i.type=o,i.typeName=p[o],i.deferredNonRetain=!!(128&r);const s=!!(64&r),l=t[e+5];let c=l>>5&7;const h=[31&l];let u=e+6;if(7===l){c=536870911&(0,n.readUint32)(t,u-1),u+=3;let e=c+7>>3;for(h[0]=t[u++];--e>0;)h.push(t[u++])}else if(5===l||6===l)throw new a("invalid referred-to flags");i.retainBits=h;let d=4;i.number<=256?d=1:i.number<=65536&&(d=2);const f=[];let g,m;for(g=0;g<c;g++){let e;e=1===d?t[u]:2===d?(0,n.readUint16)(t,u):(0,n.readUint32)(t,u),f.push(e),u+=d}if(i.referredTo=f,s?(i.pageAssociation=(0,n.readUint32)(t,u),u+=4):i.pageAssociation=t[u++],i.length=(0,n.readUint32)(t,u),u+=4,4294967295===i.length){if(38!==o)throw new a("invalid unknown segment length");{const e=S(t,u),r=!!(1&t[u+k]),n=6,o=new Uint8Array(n);for(r||(o[0]=255,o[1]=172),o[2]=e.height>>>24&255,o[3]=e.height>>16&255,o[4]=e.height>>8&255,o[5]=255&e.height,g=u,m=t.length;g<m;g++){let e=0;for(;e<n&&o[e]===t[g+e];)e++;if(e===n){i.length=g+n;break}}if(4294967295===i.length)throw new a("segment end was not found")}}return i.headerEnd=u,i}function x(t,e,i,r){const n=[];let o=i;for(;o<r;){const i=w(e,o);o=i.headerEnd;const r={header:i,data:e};if(t.randomAccess||(r.start=o,o+=i.length,r.end=o),n.push(r),51===i.type)break}if(t.randomAccess)for(let t=0,e=n.length;t<e;t++)n[t].start=o,o+=n[t].header.length,n[t].end=o;return n}function S(t,e){return{width:(0,n.readUint32)(t,e),height:(0,n.readUint32)(t,e+4),x:(0,n.readUint32)(t,e+8),y:(0,n.readUint32)(t,e+12),combinationOperator:7&t[e+16]}}const k=17;function C(t,e){const i=t.header,r=t.data,o=t.end;let s,l,c,h,u=t.start;switch(i.type){case 0:const t={},e=(0,n.readUint16)(r,u);if(t.huffman=!!(1&e),t.refinement=!!(2&e),t.huffmanDHSelector=e>>2&3,t.huffmanDWSelector=e>>4&3,t.bitmapSizeSelector=e>>6&1,t.aggregationInstancesSelector=e>>7&1,t.bitmapCodingContextUsed=!!(256&e),t.bitmapCodingContextRetained=!!(512&e),t.template=e>>10&3,t.refinementTemplate=e>>12&1,u+=2,!t.huffman){for(h=0===t.template?4:1,l=[],c=0;c<h;c++)l.push({x:(0,n.readInt8)(r,u),y:(0,n.readInt8)(r,u+1)}),u+=2;t.at=l}if(t.refinement&&!t.refinementTemplate){for(l=[],c=0;c<2;c++)l.push({x:(0,n.readInt8)(r,u),y:(0,n.readInt8)(r,u+1)}),u+=2;t.refinementAt=l}t.numberOfExportedSymbols=(0,n.readUint32)(r,u),u+=4,t.numberOfNewSymbols=(0,n.readUint32)(r,u),u+=4,s=[t,i.number,i.referredTo,r,u,o];break;case 6:case 7:const p={};p.info=S(r,u),u+=k;const d=(0,n.readUint16)(r,u);if(u+=2,p.huffman=!!(1&d),p.refinement=!!(2&d),p.logStripSize=d>>2&3,p.stripSize=1<<p.logStripSize,p.referenceCorner=d>>4&3,p.transposed=!!(64&d),p.combinationOperator=d>>7&3,p.defaultPixelValue=d>>9&1,p.dsOffset=d<<17>>27,p.refinementTemplate=d>>15&1,p.huffman){const t=(0,n.readUint16)(r,u);u+=2,p.huffmanFS=3&t,p.huffmanDS=t>>2&3,p.huffmanDT=t>>4&3,p.huffmanRefinementDW=t>>6&3,p.huffmanRefinementDH=t>>8&3,p.huffmanRefinementDX=t>>10&3,p.huffmanRefinementDY=t>>12&3,p.huffmanRefinementSizeSelector=!!(16384&t)}if(p.refinement&&!p.refinementTemplate){for(l=[],c=0;c<2;c++)l.push({x:(0,n.readInt8)(r,u),y:(0,n.readInt8)(r,u+1)}),u+=2;p.refinementAt=l}p.numberOfSymbolInstances=(0,n.readUint32)(r,u),u+=4,s=[p,i.referredTo,r,u,o];break;case 16:const f={},g=r[u++];f.mmr=!!(1&g),f.template=g>>1&3,f.patternWidth=r[u++],f.patternHeight=r[u++],f.maxPatternIndex=(0,n.readUint32)(r,u),u+=4,s=[f,i.number,r,u,o];break;case 22:case 23:const m={};m.info=S(r,u),u+=k;const y=r[u++];m.mmr=!!(1&y),m.template=y>>1&3,m.enableSkip=!!(8&y),m.combinationOperator=y>>4&7,m.defaultPixelValue=y>>7&1,m.gridWidth=(0,n.readUint32)(r,u),u+=4,m.gridHeight=(0,n.readUint32)(r,u),u+=4,m.gridOffsetX=4294967295&(0,n.readUint32)(r,u),u+=4,m.gridOffsetY=4294967295&(0,n.readUint32)(r,u),u+=4,m.gridVectorX=(0,n.readUint16)(r,u),u+=2,m.gridVectorY=(0,n.readUint16)(r,u),u+=2,s=[m,i.referredTo,r,u,o];break;case 38:case 39:const v={};v.info=S(r,u),u+=k;const b=r[u++];if(v.mmr=!!(1&b),v.template=b>>1&3,v.prediction=!!(8&b),!v.mmr){for(h=0===v.template?4:1,l=[],c=0;c<h;c++)l.push({x:(0,n.readInt8)(r,u),y:(0,n.readInt8)(r,u+1)}),u+=2;v.at=l}s=[v,r,u,o];break;case 48:const w={width:(0,n.readUint32)(r,u),height:(0,n.readUint32)(r,u+4),resolutionX:(0,n.readUint32)(r,u+8),resolutionY:(0,n.readUint32)(r,u+12)};4294967295===w.height&&delete w.height;const x=r[u+16];(0,n.readUint16)(r,u+17),w.lossless=!!(1&x),w.refinement=!!(2&x),w.defaultPixelValue=x>>2&1,w.combinationOperator=x>>3&3,w.requiresBuffer=!!(32&x),w.combinationOperatorOverride=!!(64&x),s=[w];break;case 49:case 50:case 51:case 62:break;case 53:s=[i.number,r,u,o];break;default:throw new a(`segment type ${i.typeName}(${i.type}) is not implemented`)}const p="on"+i.typeName;p in e&&e[p].apply(e,s)}function A(t,e){for(let i=0,r=t.length;i<r;i++)C(t[i],e)}class _{onPageInformation(t){this.currentPageInfo=t;const e=t.width+7>>3,i=new Uint8ClampedArray(e*t.height);t.defaultPixelValue&&i.fill(255),this.buffer=i}drawBitmap(t,e){const i=this.currentPageInfo,r=t.width,n=t.height,o=i.width+7>>3,s=i.combinationOperatorOverride?t.combinationOperator:i.combinationOperator,l=this.buffer,c=128>>(7&t.x);let h,u,p,d,f=t.y*o+(t.x>>3);switch(s){case 0:for(h=0;h<n;h++){for(p=c,d=f,u=0;u<r;u++)e[h][u]&&(l[d]|=p),p>>=1,p||(p=128,d++);f+=o}break;case 2:for(h=0;h<n;h++){for(p=c,d=f,u=0;u<r;u++)e[h][u]&&(l[d]^=p),p>>=1,p||(p=128,d++);f+=o}break;default:throw new a(`operator ${s} is not supported`)}}onImmediateGenericRegion(t,e,i,r){const n=t.info,o=new c(e,i,r),s=y(t.mmr,n.width,n.height,t.template,t.prediction,null,t.at,o);this.drawBitmap(n,s)}onImmediateLosslessGenericRegion(){this.onImmediateGenericRegion.apply(this,arguments)}onSymbolDictionary(t,e,i,r,o,s){let l,p;t.huffman&&(l=function(t,e,i){let r,n,o,s,l=0;switch(t.huffmanDHSelector){case 0:case 1:r=P(t.huffmanDHSelector+4);break;case 3:r=D(l,e,i),l++;break;default:throw new a("invalid Huffman DH selector")}switch(t.huffmanDWSelector){case 0:case 1:n=P(t.huffmanDWSelector+2);break;case 3:n=D(l,e,i),l++;break;default:throw new a("invalid Huffman DW selector")}return t.bitmapSizeSelector?(o=D(l,e,i),l++):o=P(1),s=t.aggregationInstancesSelector?D(l,e,i):P(1),{tableDeltaHeight:r,tableDeltaWidth:n,tableBitmapSize:o,tableAggregateInstances:s}}(t,i,this.customTables),p=new I(r,o,s));let d=this.symbols;d||(this.symbols=d={});let f=[];for(let t=0,e=i.length;t<e;t++){const e=d[i[t]];e&&(f=f.concat(e))}const g=new c(r,o,s);d[e]=function(t,e,i,r,o,s,l,c,p,d,f,g){if(t&&e)throw new a("symbol refinement with Huffman is not supported");const m=[];let w=0,x=(0,n.log2)(i.length+r);const S=f.decoder,k=f.contextCache;let C,A;for(t&&(C=P(1),A=[],x=Math.max(x,1));m.length<r;){w+=t?s.tableDeltaHeight.decode(g):h(k,"IADH",S);let r=0,n=0;const o=t?A.length:0;for(;;){const o=t?s.tableDeltaWidth.decode(g):h(k,"IADW",S);if(null===o)break;let a;if(r+=o,n+=r,e){const n=h(k,"IAAI",S);if(n>1)a=b(t,e,r,w,0,n,1,i.concat(m),x,0,0,1,0,s,p,d,f,0,g);else{const t=u(k,S,x),e=h(k,"IARDX",S),n=h(k,"IARDY",S);a=v(r,w,p,t<i.length?i[t]:m[t-i.length],e,n,!1,d,f)}m.push(a)}else t?A.push(r):(a=y(!1,r,w,l,!1,null,c,f),m.push(a))}if(t&&!e){const t=s.tableBitmapSize.decode(g);let e;if(g.byteAlign(),0===t)e=F(g,n,w);else{const i=g.end,r=g.position+t;g.end=r,e=R(g,n,w,!1),g.end=i,g.position=r}const i=A.length;if(o===i-1)m.push(e);else{let t,r,n,s,a,l=0;for(t=o;t<i;t++){for(s=A[t],n=l+s,a=[],r=0;r<w;r++)a.push(e[r].subarray(l,n));m.push(a),l=n}}}}const _=[],T=[];let O,E,M=!1;const I=i.length+r;for(;T.length<I;){let e=t?C.decode(g):h(k,"IAEX",S);for(;e--;)T.push(M);M=!M}for(O=0,E=i.length;O<E;O++)T[O]&&_.push(i[O]);for(let t=0;t<r;O++,t++)T[O]&&_.push(m[t]);return _}(t.huffman,t.refinement,f,t.numberOfNewSymbols,t.numberOfExportedSymbols,l,t.template,t.at,t.refinementTemplate,t.refinementAt,g,p)}onImmediateTextRegion(t,e,i,r,o){const s=t.info;let l,h;const u=this.symbols;let p=[];for(let t=0,i=e.length;t<i;t++){const i=u[e[t]];i&&(p=p.concat(i))}const d=(0,n.log2)(p.length);t.huffman&&(h=new I(i,r,o),l=function(t,e,i,r,n){const o=[];for(let t=0;t<=34;t++){const e=n.readBits(4);o.push(new T([t,e,0,0]))}const s=new E(o,!1);o.length=0;for(let t=0;t<r;){const e=s.decode(n);if(e>=32){let i,r,s;switch(e){case 32:if(0===t)throw new a("no previous value in symbol ID table");r=n.readBits(2)+3,i=o[t-1].prefixLength;break;case 33:r=n.readBits(3)+3,i=0;break;case 34:r=n.readBits(7)+11,i=0;break;default:throw new a("invalid code length in symbol ID table")}for(s=0;s<r;s++)o.push(new T([t,i,0,0])),t++}else o.push(new T([t,e,0,0])),t++}n.byteAlign();const l=new E(o,!1);let c,h,u,p=0;switch(t.huffmanFS){case 0:case 1:c=P(t.huffmanFS+6);break;case 3:c=D(p,e,i),p++;break;default:throw new a("invalid Huffman FS selector")}switch(t.huffmanDS){case 0:case 1:case 2:h=P(t.huffmanDS+8);break;case 3:h=D(p,e,i),p++;break;default:throw new a("invalid Huffman DS selector")}switch(t.huffmanDT){case 0:case 1:case 2:u=P(t.huffmanDT+11);break;case 3:u=D(p,e,i),p++;break;default:throw new a("invalid Huffman DT selector")}if(t.refinement)throw new a("refinement with Huffman is not supported");return{symbolIDTable:l,tableFirstS:c,tableDeltaS:h,tableDeltaT:u}}(t,e,this.customTables,p.length,h));const f=new c(i,r,o),g=b(t.huffman,t.refinement,s.width,s.height,t.defaultPixelValue,t.numberOfSymbolInstances,t.stripSize,p,d,t.transposed,t.dsOffset,t.referenceCorner,t.combinationOperator,l,t.refinementTemplate,t.refinementAt,f,t.logStripSize,h);this.drawBitmap(s,g)}onImmediateLosslessTextRegion(){this.onImmediateTextRegion.apply(this,arguments)}onPatternDictionary(t,e,i,r,n){let o=this.patterns;o||(this.patterns=o={});const s=new c(i,r,n);o[e]=function(t,e,i,r,n,o){const s=[];t||(s.push({x:-e,y:0}),0===n&&s.push({x:-3,y:-1},{x:2,y:-2},{x:-2,y:-2}));const a=y(t,(r+1)*e,i,n,!1,null,s,o),l=[];for(let t=0;t<=r;t++){const r=[],n=e*t,o=n+e;for(let t=0;t<i;t++)r.push(a[t].subarray(n,o));l.push(r)}return l}(t.mmr,t.patternWidth,t.patternHeight,t.maxPatternIndex,t.template,s)}onImmediateHalftoneRegion(t,e,i,r,o){const s=this.patterns[e[0]],l=t.info,h=new c(i,r,o),u=function(t,e,i,r,o,s,l,c,h,u,p,d,f,g,m){if(l)throw new a("skip is not supported");if(0!==c)throw new a(`operator "${c}" is not supported in halftone region`);const v=[];let b,w,x;for(b=0;b<o;b++){if(x=new Uint8Array(r),s)for(w=0;w<r;w++)x[w]=s;v.push(x)}const S=e.length,k=e[0],C=k[0].length,A=k.length,_=(0,n.log2)(S),T=[];t||(T.push({x:i<=1?3:2,y:-1}),0===i&&T.push({x:-3,y:-1},{x:2,y:-2},{x:-2,y:-2}));const O=[];let E,M,P,D,F,L,N,B,j,z,U;for(t&&(E=new I(m.data,m.start,m.end)),b=_-1;b>=0;b--)M=t?R(E,h,u,!0):y(!1,h,u,i,!1,null,T,m),O[b]=M;for(P=0;P<u;P++)for(D=0;D<h;D++){for(F=0,L=0,w=_-1;w>=0;w--)F^=O[w][P][D],L|=F<<w;if(N=e[L],B=p+P*g+D*f>>8,j=d+P*f-D*g>>8,B>=0&&B+C<=r&&j>=0&&j+A<=o)for(b=0;b<A;b++)for(U=v[j+b],z=N[b],w=0;w<C;w++)U[B+w]|=z[w];else{let t,e;for(b=0;b<A;b++)if(e=j+b,!(e<0||e>=o))for(U=v[e],z=N[b],w=0;w<C;w++)t=B+w,t>=0&&t<r&&(U[t]|=z[w])}}return v}(t.mmr,s,t.template,l.width,l.height,t.defaultPixelValue,t.enableSkip,t.combinationOperator,t.gridWidth,t.gridHeight,t.gridOffsetX,t.gridOffsetY,t.gridVectorX,t.gridVectorY,h);this.drawBitmap(l,u)}onImmediateLosslessHalftoneRegion(){this.onImmediateHalftoneRegion.apply(this,arguments)}onTables(t,e,i,r){let o=this.customTables;o||(this.customTables=o={}),o[t]=function(t,e,i){const r=t[e],o=4294967295&(0,n.readUint32)(t,e+1),s=4294967295&(0,n.readUint32)(t,e+5),a=new I(t,e+9,i),l=1+(r>>1&7),c=1+(r>>4&7),h=[];let u,p,d=o;do{u=a.readBits(l),p=a.readBits(c),h.push(new T([d,u,p,0])),d+=1<<p}while(d<s);return u=a.readBits(l),h.push(new T([o-1,u,32,0,"lower"])),u=a.readBits(l),h.push(new T([s,u,32,0])),1&r&&(u=a.readBits(l),h.push(new T([u,0]))),new E(h,!1)}(e,i,r)}}class T{constructor(t){2===t.length?(this.isOOB=!0,this.rangeLow=0,this.prefixLength=t[0],this.rangeLength=0,this.prefixCode=t[1],this.isLowerRange=!1):(this.isOOB=!1,this.rangeLow=t[0],this.prefixLength=t[1],this.rangeLength=t[2],this.prefixCode=t[3],this.isLowerRange="lower"===t[4])}}class O{constructor(t){this.children=[],t?(this.isLeaf=!0,this.rangeLength=t.rangeLength,this.rangeLow=t.rangeLow,this.isLowerRange=t.isLowerRange,this.isOOB=t.isOOB):this.isLeaf=!1}buildTree(t,e){const i=t.prefixCode>>e&1;if(e<=0)this.children[i]=new O(t);else{let r=this.children[i];r||(this.children[i]=r=new O(null)),r.buildTree(t,e-1)}}decodeNode(t){if(this.isLeaf){if(this.isOOB)return null;const e=t.readBits(this.rangeLength);return this.rangeLow+(this.isLowerRange?-e:e)}const e=this.children[t.readBit()];if(!e)throw new a("invalid Huffman data");return e.decodeNode(t)}}class E{constructor(t,e){e||this.assignPrefixCodes(t),this.rootNode=new O(null);for(let e=0,i=t.length;e<i;e++){const i=t[e];i.prefixLength>0&&this.rootNode.buildTree(i,i.prefixLength-1)}}decode(t){return this.rootNode.decodeNode(t)}assignPrefixCodes(t){const e=t.length;let i=0;for(let r=0;r<e;r++)i=Math.max(i,t[r].prefixLength);const r=new Uint32Array(i+1);for(let i=0;i<e;i++)r[t[i].prefixLength]++;let n,o,s,a=1,l=0;for(r[0]=0;a<=i;){for(l=l+r[a-1]<<1,n=l,o=0;o<e;)s=t[o],s.prefixLength===a&&(s.prefixCode=n,n++),o++;a++}}}const M={};function P(t){let e,i=M[t];if(i)return i;switch(t){case 1:e=[[0,1,4,0],[16,2,8,2],[272,3,16,6],[65808,3,32,7]];break;case 2:e=[[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[75,6,32,62],[6,63]];break;case 3:e=[[-256,8,8,254],[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[-257,8,32,255,"lower"],[75,7,32,126],[6,62]];break;case 4:e=[[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[76,5,32,31]];break;case 5:e=[[-255,7,8,126],[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[-256,7,32,127,"lower"],[76,6,32,62]];break;case 6:e=[[-2048,5,10,28],[-1024,4,9,8],[-512,4,8,9],[-256,4,7,10],[-128,5,6,29],[-64,5,5,30],[-32,4,5,11],[0,2,7,0],[128,3,7,2],[256,3,8,3],[512,4,9,12],[1024,4,10,13],[-2049,6,32,62,"lower"],[2048,6,32,63]];break;case 7:e=[[-1024,4,9,8],[-512,3,8,0],[-256,4,7,9],[-128,5,6,26],[-64,5,5,27],[-32,4,5,10],[0,4,5,11],[32,5,5,28],[64,5,6,29],[128,4,7,12],[256,3,8,1],[512,3,9,2],[1024,3,10,3],[-1025,5,32,30,"lower"],[2048,5,32,31]];break;case 8:e=[[-15,8,3,252],[-7,9,1,508],[-5,8,1,253],[-3,9,0,509],[-2,7,0,124],[-1,4,0,10],[0,2,1,0],[2,5,0,26],[3,6,0,58],[4,3,4,4],[20,6,1,59],[22,4,4,11],[38,4,5,12],[70,5,6,27],[134,5,7,28],[262,6,7,60],[390,7,8,125],[646,6,10,61],[-16,9,32,510,"lower"],[1670,9,32,511],[2,1]];break;case 9:e=[[-31,8,4,252],[-15,9,2,508],[-11,8,2,253],[-7,9,1,509],[-5,7,1,124],[-3,4,1,10],[-1,3,1,2],[1,3,1,3],[3,5,1,26],[5,6,1,58],[7,3,5,4],[39,6,2,59],[43,4,5,11],[75,4,6,12],[139,5,7,27],[267,5,8,28],[523,6,8,60],[779,7,9,125],[1291,6,11,61],[-32,9,32,510,"lower"],[3339,9,32,511],[2,0]];break;case 10:e=[[-21,7,4,122],[-5,8,0,252],[-4,7,0,123],[-3,5,0,24],[-2,2,2,0],[2,5,0,25],[3,6,0,54],[4,7,0,124],[5,8,0,253],[6,2,6,1],[70,5,5,26],[102,6,5,55],[134,6,6,56],[198,6,7,57],[326,6,8,58],[582,6,9,59],[1094,6,10,60],[2118,7,11,125],[-22,8,32,254,"lower"],[4166,8,32,255],[2,2]];break;case 11:e=[[1,1,0,0],[2,2,1,2],[4,4,0,12],[5,4,1,13],[7,5,1,28],[9,5,2,29],[13,6,2,60],[17,7,2,122],[21,7,3,123],[29,7,4,124],[45,7,5,125],[77,7,6,126],[141,7,32,127]];break;case 12:e=[[1,1,0,0],[2,2,0,2],[3,3,1,6],[5,5,0,28],[6,5,1,29],[8,6,1,60],[10,7,0,122],[11,7,1,123],[13,7,2,124],[17,7,3,125],[25,7,4,126],[41,8,5,254],[73,8,32,255]];break;case 13:e=[[1,1,0,0],[2,3,0,4],[3,4,0,12],[4,5,0,28],[5,4,1,13],[7,3,3,5],[15,6,1,58],[17,6,2,59],[21,6,3,60],[29,6,4,61],[45,6,5,62],[77,7,6,126],[141,7,32,127]];break;case 14:e=[[-2,3,0,4],[-1,3,0,5],[0,1,0,0],[1,3,0,6],[2,3,0,7]];break;case 15:e=[[-24,7,4,124],[-8,6,2,60],[-4,5,1,28],[-2,4,0,12],[-1,3,0,4],[0,1,0,0],[1,3,0,5],[2,4,0,13],[3,5,1,29],[5,6,2,61],[9,7,4,125],[-25,7,32,126,"lower"],[25,7,32,127]];break;default:throw new a(`standard table B.${t} does not exist`)}for(let t=0,i=e.length;t<i;t++)e[t]=new T(e[t]);return i=new E(e,!0),M[t]=i,i}class I{constructor(t,e,i){this.data=t,this.start=e,this.end=i,this.position=e,this.shift=-1,this.currentByte=0}readBit(){if(this.shift<0){if(this.position>=this.end)throw new a("end of data while reading bit");this.currentByte=this.data[this.position++],this.shift=7}const t=this.currentByte>>this.shift&1;return this.shift--,t}readBits(t){let e,i=0;for(e=t-1;e>=0;e--)i|=this.readBit()<<e;return i}byteAlign(){this.shift=-1}next(){return this.position>=this.end?-1:this.data[this.position++]}}function D(t,e,i){let r=0;for(let n=0,o=e.length;n<o;n++){const o=i[e[n]];if(o){if(t===r)return o;r++}}throw new a("can't find custom Huffman table")}function F(t,e,i){const r=[];for(let n=0;n<i;n++){const i=new Uint8Array(e);r.push(i);for(let r=0;r<e;r++)i[r]=t.readBit();t.byteAlign()}return r}function R(t,e,i,r){const n={K:-1,Columns:e,Rows:i,BlackIs1:!0,EndOfBlock:r},o=new s.CCITTFaxDecoder(t,n),a=[];let l,c=!1;for(let t=0;t<i;t++){const t=new Uint8Array(e);a.push(t);let i=-1;for(let r=0;r<e;r++)i<0&&(l=o.readNextChar(),-1===l&&(l=0,c=!0),i=7),t[r]=l>>i&1,i--}if(r&&!c){const t=5;for(let e=0;e<t&&-1!==o.readNextChar();e++);}return a}e.Jbig2Image=class{parseChunks(t){return function(t){const e=new _;for(let i=0,r=t.length;i<r;i++){const r=t[i];A(x({},r.data,r.start,r.end),e)}return e.buffer}(t)}parse(t){const{imgData:e,width:i,height:r}=function(t){const e=t.length;let i=0;if(151!==t[i]||74!==t[i+1]||66!==t[i+2]||50!==t[i+3]||13!==t[i+4]||10!==t[i+5]||26!==t[i+6]||10!==t[i+7])throw new a("parseJbig2 - invalid header.");const r=Object.create(null);i+=8;const o=t[i++];r.randomAccess=!(1&o),2&o||(r.numberOfPages=(0,n.readUint32)(t,i),i+=4);const s=x(r,t,i,e),l=new _;A(s,l);const{width:c,height:h}=l.currentPageInfo,u=l.buffer,p=new Uint8ClampedArray(c*h);let d=0,f=0;for(let t=0;t<h;t++){let t,e=0;for(let i=0;i<c;i++)e||(e=128,t=u[f++]),p[d++]=t&e?0:255,e>>=1}return{imgData:p,width:c,height:h}}(t);return this.width=i,this.height=r,e}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ArithmeticDecoder=void 0;const i=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];e.ArithmeticDecoder=class{constructor(t,e,i){this.data=t,this.bp=e,this.dataEnd=i,this.chigh=t[e],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}byteIn(){const t=this.data;let e=this.bp;255===t[e]?t[e+1]>143?(this.clow+=65280,this.ct=8):(e++,this.clow+=t[e]<<9,this.ct=7,this.bp=e):(e++,this.clow+=e<this.dataEnd?t[e]<<8:65280,this.ct=8,this.bp=e),this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)}readBit(t,e){let r=t[e]>>1,n=1&t[e];const o=i[r],s=o.qe;let a,l=this.a-s;if(this.chigh<s)l<s?(l=s,a=n,r=o.nmps):(l=s,a=1^n,1===o.switchFlag&&(n=a),r=o.nlps);else{if(this.chigh-=s,0!=(32768&l))return this.a=l,n;l<s?(a=1^n,1===o.switchFlag&&(n=a),r=o.nlps):(a=n,r=o.nmps)}do{0===this.ct&&this.byteIn(),l<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--}while(0==(32768&l));return this.a=l,t[e]=r<<1|n,a}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.JpegStream=void 0;var r=i(29),n=i(5),o=i(38),s=i(2);class a extends r.DecodeStream{constructor(t,e,i){let r;for(;-1!==(r=t.getByte());)if(255===r){t.skip(-1);break}super(e),this.stream=t,this.dict=t.dict,this.maybeLength=e,this.params=i}get bytes(){return(0,s.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))}ensureBuffer(t){}readBlock(){if(this.eof)return;const t={decodeTransform:void 0,colorTransform:void 0},e=this.dict.getArray("D","Decode");if(this.forceRGB&&Array.isArray(e)){const i=this.dict.get("BPC","BitsPerComponent")||8,r=e.length,n=new Int32Array(r);let o=!1;const s=(1<<i)-1;for(let t=0;t<r;t+=2)n[t]=256*(e[t+1]-e[t])|0,n[t+1]=e[t]*s|0,256===n[t]&&0===n[t+1]||(o=!0);o&&(t.decodeTransform=n)}if(this.params instanceof n.Dict){const e=this.params.get("ColorTransform");Number.isInteger(e)&&(t.colorTransform=e)}const i=new o.JpegImage(t);i.parse(this.bytes);const r=i.getData({width:this.drawWidth,height:this.drawHeight,forceRGB:this.forceRGB,isSourcePDF:!0});this.buffer=r,this.bufferLength=r.length,this.eof=!0}}e.JpegStream=a},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.JpegImage=void 0;var r=i(2),n=i(8);class o extends r.BaseException{constructor(t){super(`JPEG error: ${t}`,"JpegError")}}class s extends r.BaseException{constructor(t,e){super(t,"DNLMarkerError"),this.scanLines=e}}class a extends r.BaseException{constructor(t){super(t,"EOIMarkerError")}}const l=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),c=4017,h=799,u=3406,p=2276,d=1567,f=3784,g=5793,m=2896;function y(t,e){let i,r,n=0,o=16;for(;o>0&&!t[o-1];)o--;const s=[{children:[],index:0}];let a,l=s[0];for(i=0;i<o;i++){for(r=0;r<t[i];r++){for(l=s.pop(),l.children[l.index]=e[n];l.index>0;)l=s.pop();for(l.index++,s.push(l);s.length<=i;)s.push(a={children:[],index:0}),l.children[l.index]=a.children,l=a;n++}i+1<o&&(s.push(a={children:[],index:0}),l.children[l.index]=a.children,l=a)}return s[0].children}function v(t,e,i){return 64*((t.blocksPerLine+1)*e+i)}function b(t,e,i,c,h,u,p,d,f,g=!1){const m=i.mcusPerLine,y=i.progressive,b=e;let w=0,x=0;function k(){if(x>0)return x--,w>>x&1;if(w=t[e++],255===w){const r=t[e++];if(r){if(220===r&&g){e+=2;const r=(0,n.readUint16)(t,e);if(e+=2,r>0&&r!==i.scanLines)throw new s("Found DNL marker (0xFFDC) while parsing scan data",r)}else if(217===r){if(g){const t=M*(8===i.precision?8:0);if(t>0&&Math.round(i.scanLines/t)>=10)throw new s("Found EOI marker (0xFFD9) while parsing scan data, possibly caused by incorrect `scanLines` parameter",t)}throw new a("Found EOI marker (0xFFD9) while parsing scan data")}throw new o(`unexpected marker ${(w<<8|r).toString(16)}`)}}return x=7,w>>>7}function C(t){let e=t;for(;;){switch(e=e[k()],typeof e){case"number":return e;case"object":continue}throw new o("invalid huffman sequence")}}function A(t){let e=0;for(;t>0;)e=e<<1|k(),t--;return e}function _(t){if(1===t)return 1===k()?1:-1;const e=A(t);return e>=1<<t-1?e:e+(-1<<t)+1}let T,O=0,E=0,M=0;function P(t,e,i,r,n){const o=i%m;M=(i/m|0)*t.v+r;const s=o*t.h+n;e(t,v(t,M,s))}function I(t,e,i){M=i/t.blocksPerLine|0;const r=i%t.blocksPerLine;e(t,v(t,M,r))}const D=c.length;let F,R,L,N,B,j;j=y?0===u?0===d?function(t,e){const i=C(t.huffmanTableDC),r=0===i?0:_(i)<<f;t.blockData[e]=t.pred+=r}:function(t,e){t.blockData[e]|=k()<<f}:0===d?function(t,e){if(O>0)return void O--;let i=u;const r=p;for(;i<=r;){const r=C(t.huffmanTableAC),n=15&r,o=r>>4;if(0===n){if(o<15){O=A(o)+(1<<o)-1;break}i+=16;continue}i+=o;const s=l[i];t.blockData[e+s]=_(n)*(1<<f),i++}}:function(t,e){let i=u;const r=p;let n,s,a=0;for(;i<=r;){const r=e+l[i],c=t.blockData[r]<0?-1:1;switch(E){case 0:if(s=C(t.huffmanTableAC),n=15&s,a=s>>4,0===n)a<15?(O=A(a)+(1<<a),E=4):(a=16,E=1);else{if(1!==n)throw new o("invalid ACn encoding");T=_(n),E=a?2:3}continue;case 1:case 2:t.blockData[r]?t.blockData[r]+=c*(k()<<f):(a--,0===a&&(E=2===E?3:0));break;case 3:t.blockData[r]?t.blockData[r]+=c*(k()<<f):(t.blockData[r]=T<<f,E=0);break;case 4:t.blockData[r]&&(t.blockData[r]+=c*(k()<<f))}i++}4===E&&(O--,0===O&&(E=0))}:function(t,e){const i=C(t.huffmanTableDC),r=0===i?0:_(i);t.blockData[e]=t.pred+=r;let n=1;for(;n<64;){const i=C(t.huffmanTableAC),r=15&i,o=i>>4;if(0===r){if(o<15)break;n+=16;continue}n+=o;const s=l[n];t.blockData[e+s]=_(r),n++}};let z,U,$,H,V=0;for(U=1===D?c[0].blocksPerLine*c[0].blocksPerColumn:m*i.mcusPerColumn;V<=U;){const i=h?Math.min(U-V,h):U;if(i>0){for(R=0;R<D;R++)c[R].pred=0;if(O=0,1===D)for(F=c[0],B=0;B<i;B++)I(F,j,V),V++;else for(B=0;B<i;B++){for(R=0;R<D;R++)for(F=c[R],$=F.h,H=F.v,L=0;L<H;L++)for(N=0;N<$;N++)P(F,j,V,L,N);V++}}if(x=0,z=S(t,e),!z)break;if(z.invalid){const t=i>0?"unexpected":"excessive";(0,r.warn)(`decodeScan - ${t} MCU data, current marker is: ${z.invalid}`),e=z.offset}if(!(z.marker>=65488&&z.marker<=65495))break;e+=2}return e-b}function w(t,e,i){const r=t.quantizationTable,n=t.blockData;let s,a,l,y,v,b,w,x,S,k,C,A,_,T,O,E,M;if(!r)throw new o("missing required Quantization Table.");for(let t=0;t<64;t+=8)S=n[e+t],k=n[e+t+1],C=n[e+t+2],A=n[e+t+3],_=n[e+t+4],T=n[e+t+5],O=n[e+t+6],E=n[e+t+7],S*=r[t],0!=(k|C|A|_|T|O|E)?(k*=r[t+1],C*=r[t+2],A*=r[t+3],_*=r[t+4],T*=r[t+5],O*=r[t+6],E*=r[t+7],s=g*S+128>>8,a=g*_+128>>8,l=C,y=O,v=m*(k-E)+128>>8,x=m*(k+E)+128>>8,b=A<<4,w=T<<4,s=s+a+1>>1,a=s-a,M=l*f+y*d+128>>8,l=l*d-y*f+128>>8,y=M,v=v+w+1>>1,w=v-w,x=x+b+1>>1,b=x-b,s=s+y+1>>1,y=s-y,a=a+l+1>>1,l=a-l,M=v*p+x*u+2048>>12,v=v*u-x*p+2048>>12,x=M,M=b*h+w*c+2048>>12,b=b*c-w*h+2048>>12,w=M,i[t]=s+x,i[t+7]=s-x,i[t+1]=a+w,i[t+6]=a-w,i[t+2]=l+b,i[t+5]=l-b,i[t+3]=y+v,i[t+4]=y-v):(M=g*S+512>>10,i[t]=M,i[t+1]=M,i[t+2]=M,i[t+3]=M,i[t+4]=M,i[t+5]=M,i[t+6]=M,i[t+7]=M);for(let t=0;t<8;++t)S=i[t],k=i[t+8],C=i[t+16],A=i[t+24],_=i[t+32],T=i[t+40],O=i[t+48],E=i[t+56],0!=(k|C|A|_|T|O|E)?(s=g*S+2048>>12,a=g*_+2048>>12,l=C,y=O,v=m*(k-E)+2048>>12,x=m*(k+E)+2048>>12,b=A,w=T,s=4112+(s+a+1>>1),a=s-a,M=l*f+y*d+2048>>12,l=l*d-y*f+2048>>12,y=M,v=v+w+1>>1,w=v-w,x=x+b+1>>1,b=x-b,s=s+y+1>>1,y=s-y,a=a+l+1>>1,l=a-l,M=v*p+x*u+2048>>12,v=v*u-x*p+2048>>12,x=M,M=b*h+w*c+2048>>12,b=b*c-w*h+2048>>12,w=M,S=s+x,E=s-x,k=a+w,O=a-w,C=l+b,T=l-b,A=y+v,_=y-v,S<16?S=0:S>=4080?S=255:S>>=4,k<16?k=0:k>=4080?k=255:k>>=4,C<16?C=0:C>=4080?C=255:C>>=4,A<16?A=0:A>=4080?A=255:A>>=4,_<16?_=0:_>=4080?_=255:_>>=4,T<16?T=0:T>=4080?T=255:T>>=4,O<16?O=0:O>=4080?O=255:O>>=4,E<16?E=0:E>=4080?E=255:E>>=4,n[e+t]=S,n[e+t+8]=k,n[e+t+16]=C,n[e+t+24]=A,n[e+t+32]=_,n[e+t+40]=T,n[e+t+48]=O,n[e+t+56]=E):(M=g*S+8192>>14,M=M<-2040?0:M>=2024?255:M+2056>>4,n[e+t]=M,n[e+t+8]=M,n[e+t+16]=M,n[e+t+24]=M,n[e+t+32]=M,n[e+t+40]=M,n[e+t+48]=M,n[e+t+56]=M)}function x(t,e){const i=e.blocksPerLine,r=e.blocksPerColumn,n=new Int16Array(64);for(let t=0;t<r;t++)for(let r=0;r<i;r++)w(e,v(e,t,r),n);return e.blockData}function S(t,e,i=e){const r=t.length-1;let o=i<e?i:e;if(e>=r)return null;const s=(0,n.readUint16)(t,e);if(s>=65472&&s<=65534)return{invalid:null,marker:s,offset:e};let a=(0,n.readUint16)(t,o);for(;!(a>=65472&&a<=65534);){if(++o>=r)return null;a=(0,n.readUint16)(t,o)}return{invalid:s.toString(16),marker:a,offset:o}}e.JpegImage=class{constructor({decodeTransform:t=null,colorTransform:e=-1}={}){this._decodeTransform=t,this._colorTransform=e}parse(t,{dnlScanLines:e=null}={}){function i(){const e=(0,n.readUint16)(t,p);p+=2;let i=p+e-2;const o=S(t,i,p);o&&o.invalid&&((0,r.warn)("readDataBlock - incorrect length, current marker is: "+o.invalid),i=o.offset);const s=t.subarray(p,i);return p+=s.length,s}function c(t){const e=Math.ceil(t.samplesPerLine/8/t.maxH),i=Math.ceil(t.scanLines/8/t.maxV);for(let r=0,n=t.components.length;r<n;r++){const n=t.components[r],o=Math.ceil(Math.ceil(t.samplesPerLine/8)*n.h/t.maxH),s=Math.ceil(Math.ceil(t.scanLines/8)*n.v/t.maxV),a=e*n.h,l=i*n.v*64*(a+1);n.blockData=new Int16Array(l),n.blocksPerLine=o,n.blocksPerColumn=s}t.mcusPerLine=e,t.mcusPerColumn=i}let h,u,p=0,d=null,f=null,g=0;const m=[],v=[],w=[];let k=(0,n.readUint16)(t,p);if(p+=2,65496!==k)throw new o("SOI not found");k=(0,n.readUint16)(t,p),p+=2;t:for(;65497!==k;){let x,C,A;switch(k){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:const _=i();65504===k&&74===_[0]&&70===_[1]&&73===_[2]&&70===_[3]&&0===_[4]&&(d={version:{major:_[5],minor:_[6]},densityUnits:_[7],xDensity:_[8]<<8|_[9],yDensity:_[10]<<8|_[11],thumbWidth:_[12],thumbHeight:_[13],thumbData:_.subarray(14,14+3*_[12]*_[13])}),65518===k&&65===_[0]&&100===_[1]&&111===_[2]&&98===_[3]&&101===_[4]&&(f={version:_[5]<<8|_[6],flags0:_[7]<<8|_[8],flags1:_[9]<<8|_[10],transformCode:_[11]});break;case 65499:const T=(0,n.readUint16)(t,p);p+=2;const O=T+p-2;let E;for(;p<O;){const e=t[p++],i=new Uint16Array(64);if(e>>4==0)for(C=0;C<64;C++)E=l[C],i[E]=t[p++];else{if(e>>4!=1)throw new o("DQT - invalid table spec");for(C=0;C<64;C++)E=l[C],i[E]=(0,n.readUint16)(t,p),p+=2}m[15&e]=i}break;case 65472:case 65473:case 65474:if(h)throw new o("Only single frame JPEGs supported");p+=2,h={},h.extended=65473===k,h.progressive=65474===k,h.precision=t[p++];const M=(0,n.readUint16)(t,p);p+=2,h.scanLines=e||M,h.samplesPerLine=(0,n.readUint16)(t,p),p+=2,h.components=[],h.componentIds={};const P=t[p++];let I=0,D=0;for(x=0;x<P;x++){const e=t[p],i=t[p+1]>>4,r=15&t[p+1];I<i&&(I=i),D<r&&(D=r);const n=t[p+2];A=h.components.push({h:i,v:r,quantizationId:n,quantizationTable:null}),h.componentIds[e]=A-1,p+=3}h.maxH=I,h.maxV=D,c(h);break;case 65476:const F=(0,n.readUint16)(t,p);for(p+=2,x=2;x<F;){const e=t[p++],i=new Uint8Array(16);let r=0;for(C=0;C<16;C++,p++)r+=i[C]=t[p];const n=new Uint8Array(r);for(C=0;C<r;C++,p++)n[C]=t[p];x+=17+r,(e>>4==0?w:v)[15&e]=y(i,n)}break;case 65501:p+=2,u=(0,n.readUint16)(t,p),p+=2;break;case 65498:const R=1==++g&&!e;p+=2;const L=t[p++],N=[];for(x=0;x<L;x++){const e=t[p++],i=h.componentIds[e],r=h.components[i];r.index=e;const n=t[p++];r.huffmanTableDC=w[n>>4],r.huffmanTableAC=v[15&n],N.push(r)}const B=t[p++],j=t[p++],z=t[p++];try{const e=b(t,p,h,N,u,B,j,z>>4,15&z,R);p+=e}catch(e){if(e instanceof s)return(0,r.warn)(`${e.message} -- attempting to re-parse the JPEG image.`),this.parse(t,{dnlScanLines:e.scanLines});if(e instanceof a){(0,r.warn)(`${e.message} -- ignoring the rest of the image data.`);break t}throw e}break;case 65500:p+=4;break;case 65535:255!==t[p]&&p--;break;default:const U=S(t,p-2,p-3);if(U&&U.invalid){(0,r.warn)("JpegImage.parse - unexpected data, current marker is: "+U.invalid),p=U.offset;break}if(!U||p>=t.length-1){(0,r.warn)("JpegImage.parse - reached the end of the image data without finding an EOI marker (0xFFD9).");break t}throw new o("JpegImage.parse - unknown marker: "+k.toString(16))}k=(0,n.readUint16)(t,p),p+=2}this.width=h.samplesPerLine,this.height=h.scanLines,this.jfif=d,this.adobe=f,this.components=[];for(let t=0,e=h.components.length;t<e;t++){const e=h.components[t],i=m[e.quantizationId];i&&(e.quantizationTable=i),this.components.push({index:e.index,output:x(0,e),scaleX:e.h/h.maxH,scaleY:e.v/h.maxV,blocksPerLine:e.blocksPerLine,blocksPerColumn:e.blocksPerColumn})}this.numComponents=this.components.length}_getLinearizedBlockData(t,e,i=!1){const r=this.width/t,n=this.height/e;let o,s,a,l,c,h,u,p,d,f,g,m=0;const y=this.components.length,v=t*e*y,b=new Uint8ClampedArray(v),w=new Uint32Array(t),x=4294967288;let S;for(u=0;u<y;u++){if(o=this.components[u],s=o.scaleX*r,a=o.scaleY*n,m=u,g=o.output,l=o.blocksPerLine+1<<3,s!==S){for(c=0;c<t;c++)p=0|c*s,w[c]=(p&x)<<3|7&p;S=s}for(h=0;h<e;h++)for(p=0|h*a,f=l*(p&x)|(7&p)<<3,c=0;c<t;c++)b[m]=g[f+w[c]],m+=y}let k=this._decodeTransform;if(i||4!==y||k||(k=new Int32Array([-256,255,-256,255,-256,255,-256,255])),k)for(u=0;u<v;)for(p=0,d=0;p<y;p++,u++,d+=2)b[u]=(b[u]*k[d]>>8)+k[d+1];return b}get _isColorConversionNeeded(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this._colorTransform&&(82!==this.components[0].index||71!==this.components[1].index||66!==this.components[2].index):1===this._colorTransform}_convertYccToRgb(t){let e,i,r;for(let n=0,o=t.length;n<o;n+=3)e=t[n],i=t[n+1],r=t[n+2],t[n]=e-179.456+1.402*r,t[n+1]=e+135.459-.344*i-.714*r,t[n+2]=e-226.816+1.772*i;return t}_convertYcckToRgb(t){let e,i,r,n,o=0;for(let s=0,a=t.length;s<a;s+=4)e=t[s],i=t[s+1],r=t[s+2],n=t[s+3],t[o++]=i*(-660635669420364e-19*i+.000437130475926232*r-54080610064599e-18*e+.00048449797120281*n-.154362151871126)-122.67195406894+r*(-.000957964378445773*r+.000817076911346625*e-.00477271405408747*n+1.53380253221734)+e*(.000961250184130688*e-.00266257332283933*n+.48357088451265)+n*(-.000336197177618394*n+.484791561490776),t[o++]=107.268039397724+i*(219927104525741e-19*i-.000640992018297945*r+.000659397001245577*e+.000426105652938837*n-.176491792462875)+r*(-.000778269941513683*r+.00130872261408275*e+.000770482631801132*n-.151051492775562)+e*(.00126935368114843*e-.00265090189010898*n+.25802910206845)+n*(-.000318913117588328*n-.213742400323665),t[o++]=i*(-.000570115196973677*i-263409051004589e-19*r+.0020741088115012*e-.00288260236853442*n+.814272968359295)-20.810012546947+r*(-153496057440975e-19*r-.000132689043961446*e+.000560833691242812*n-.195152027534049)+e*(.00174418132927582*e-.00255243321439347*n+.116935020465145)+n*(-.000343531996510555*n+.24165260232407);return t.subarray(0,o)}_convertYcckToCmyk(t){let e,i,r;for(let n=0,o=t.length;n<o;n+=4)e=t[n],i=t[n+1],r=t[n+2],t[n]=434.456-e-1.402*r,t[n+1]=119.541-e+.344*i+.714*r,t[n+2]=481.816-e-1.772*i;return t}_convertCmykToRgb(t){let e,i,r,n,o=0;for(let s=0,a=t.length;s<a;s+=4)e=t[s],i=t[s+1],r=t[s+2],n=t[s+3],t[o++]=255+e*(-6747147073602441e-20*e+.0008379262121013727*i+.0002894718188643294*r+.003264231057537806*n-1.1185611867203937)+i*(26374107616089405e-21*i-8626949158638572e-20*r-.0002748769067499491*n-.02155688794978967)+r*(-3878099212869363e-20*r-.0003267808279485286*n+.0686742238595345)-n*(.0003361971776183937*n+.7430659151342254),t[o++]=255+e*(.00013596372813588848*e+.000924537132573585*i+.00010567359618683593*r+.0004791864687436512*n-.3109689587515875)+i*(-.00023545346108370344*i+.0002702845253534714*r+.0020200308977307156*n-.7488052167015494)+r*(6834815998235662e-20*r+.00015168452363460973*n-.09751927774728933)-n*(.0003189131175883281*n+.7364883807733168),t[o++]=255+e*(13598650411385307e-21*e+.00012423956175490851*i+.0004751985097583589*r-36729317476630422e-22*n-.05562186980264034)+i*(.00016141380598724676*i+.0009692239130725186*r+.0007782692450036253*n-.44015232367526463)+r*(5.068882914068769e-7*r+.0017778369011375071*n-.7591454649749609)-n*(.0003435319965105553*n+.7063770186160144);return t.subarray(0,o)}getData({width:t,height:e,forceRGB:i=!1,isSourcePDF:r=!1}){if(this.numComponents>4)throw new o("Unsupported color mode");const n=this._getLinearizedBlockData(t,e,r);if(1===this.numComponents&&i){const t=n.length,e=new Uint8ClampedArray(3*t);let i=0;for(let r=0;r<t;r++){const t=n[r];e[i++]=t,e[i++]=t,e[i++]=t}return e}if(3===this.numComponents&&this._isColorConversionNeeded)return this._convertYccToRgb(n);if(4===this.numComponents){if(this._isColorConversionNeeded)return i?this._convertYcckToRgb(n):this._convertYcckToCmyk(n);if(i)return this._convertCmykToRgb(n)}return n}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.JpxStream=void 0;var r=i(29),n=i(40),o=i(2);class s extends r.DecodeStream{constructor(t,e,i){super(e),this.stream=t,this.dict=t.dict,this.maybeLength=e,this.params=i}get bytes(){return(0,o.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))}ensureBuffer(t){}readBlock(){if(this.eof)return;const t=new n.JpxImage;t.parse(this.bytes);const e=t.width,i=t.height,r=t.componentsCount,o=t.tiles.length;if(1===o)this.buffer=t.tiles[0].items;else{const n=new Uint8ClampedArray(e*i*r);for(let i=0;i<o;i++){const o=t.tiles[i],s=o.width,a=o.height,l=o.left,c=o.top,h=o.items;let u=0,p=(e*c+l)*r;const d=e*r,f=s*r;for(let t=0;t<a;t++){const t=h.subarray(u,u+f);n.set(t,p),u+=f,p+=d}}this.buffer=n}this.bufferLength=this.buffer.length,this.eof=!0}}e.JpxStream=s},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.JpxImage=void 0;var r=i(2),n=i(8),o=i(36);class s extends r.BaseException{constructor(t){super(`JPX error: ${t}`,"JpxError")}}const a={LL:0,LH:1,HL:1,HH:2};function l(t,e){t.x0=Math.ceil(e.XOsiz/t.XRsiz),t.x1=Math.ceil(e.Xsiz/t.XRsiz),t.y0=Math.ceil(e.YOsiz/t.YRsiz),t.y1=Math.ceil(e.Ysiz/t.YRsiz),t.width=t.x1-t.x0,t.height=t.y1-t.y0}function c(t,e){const i=t.SIZ,r=[];let n;const o=Math.ceil((i.Xsiz-i.XTOsiz)/i.XTsiz),s=Math.ceil((i.Ysiz-i.YTOsiz)/i.YTsiz);for(let t=0;t<s;t++)for(let e=0;e<o;e++)n={},n.tx0=Math.max(i.XTOsiz+e*i.XTsiz,i.XOsiz),n.ty0=Math.max(i.YTOsiz+t*i.YTsiz,i.YOsiz),n.tx1=Math.min(i.XTOsiz+(e+1)*i.XTsiz,i.Xsiz),n.ty1=Math.min(i.YTOsiz+(t+1)*i.YTsiz,i.Ysiz),n.width=n.tx1-n.tx0,n.height=n.ty1-n.ty0,n.components=[],r.push(n);t.tiles=r;for(let t=0,o=i.Csiz;t<o;t++){const i=e[t];for(let e=0,o=r.length;e<o;e++){const o={};n=r[e],o.tcx0=Math.ceil(n.tx0/i.XRsiz),o.tcy0=Math.ceil(n.ty0/i.YRsiz),o.tcx1=Math.ceil(n.tx1/i.XRsiz),o.tcy1=Math.ceil(n.ty1/i.YRsiz),o.width=o.tcx1-o.tcx0,o.height=o.tcy1-o.tcy0,n.components[t]=o}}}function h(t,e,i){const r=e.codingStyleParameters,n={};return r.entropyCoderWithCustomPrecincts?(n.PPx=r.precinctsSizes[i].PPx,n.PPy=r.precinctsSizes[i].PPy):(n.PPx=15,n.PPy=15),n.xcb_=i>0?Math.min(r.xcb,n.PPx-1):Math.min(r.xcb,n.PPx),n.ycb_=i>0?Math.min(r.ycb,n.PPy-1):Math.min(r.ycb,n.PPy),n}function u(t,e,i){const r=1<<i.PPx,n=1<<i.PPy,o=0===e.resLevel,s=1<<i.PPx+(o?0:-1),a=1<<i.PPy+(o?0:-1),l=e.trx1>e.trx0?Math.ceil(e.trx1/r)-Math.floor(e.trx0/r):0,c=e.try1>e.try0?Math.ceil(e.try1/n)-Math.floor(e.try0/n):0,h=l*c;e.precinctParameters={precinctWidth:r,precinctHeight:n,numprecinctswide:l,numprecinctshigh:c,numprecincts:h,precinctWidthInSubband:s,precinctHeightInSubband:a}}function p(t,e,i){const r=i.xcb_,n=i.ycb_,o=1<<r,s=1<<n,a=e.tbx0>>r,l=e.tby0>>n,c=e.tbx1+o-1>>r,h=e.tby1+s-1>>n,u=e.resolution.precinctParameters,p=[],d=[];let f,g,m,y;for(g=l;g<h;g++)for(f=a;f<c;f++){if(m={cbx:f,cby:g,tbx0:o*f,tby0:s*g,tbx1:o*(f+1),tby1:s*(g+1)},m.tbx0_=Math.max(e.tbx0,m.tbx0),m.tby0_=Math.max(e.tby0,m.tby0),m.tbx1_=Math.min(e.tbx1,m.tbx1),m.tby1_=Math.min(e.tby1,m.tby1),y=Math.floor((m.tbx0_-e.tbx0)/u.precinctWidthInSubband)+Math.floor((m.tby0_-e.tby0)/u.precinctHeightInSubband)*u.numprecinctswide,m.precinctNumber=y,m.subbandType=e.type,m.Lblock=3,m.tbx1_<=m.tbx0_||m.tby1_<=m.tby0_)continue;p.push(m);let t=d[y];void 0!==t?(f<t.cbxMin?t.cbxMin=f:f>t.cbxMax&&(t.cbxMax=f),g<t.cbyMin?t.cbxMin=g:g>t.cbyMax&&(t.cbyMax=g)):d[y]=t={cbxMin:f,cbyMin:g,cbxMax:f,cbyMax:g},m.precinct=t}e.codeblockParameters={codeblockWidth:r,codeblockHeight:n,numcodeblockwide:c-a+1,numcodeblockhigh:h-l+1},e.codeblocks=p,e.precincts=d}function d(t,e,i){const r=[],n=t.subbands;for(let t=0,i=n.length;t<i;t++){const i=n[t].codeblocks;for(let t=0,n=i.length;t<n;t++){const n=i[t];n.precinctNumber===e&&r.push(n)}}return{layerNumber:i,codeblocks:r}}function f(t){const e=t.SIZ,i=t.currentTile.index,r=t.tiles[i],n=r.codingStyleDefaultParameters.layersCount,o=e.Csiz;let a=0;for(let t=0;t<o;t++)a=Math.max(a,r.components[t].codingStyleParameters.decompositionLevelsCount);let l=0,c=0,h=0,u=0;this.nextPacket=function(){for(;l<n;l++){for(;c<=a;c++){for(;h<o;h++){const t=r.components[h];if(c>t.codingStyleParameters.decompositionLevelsCount)continue;const e=t.resolutions[c],i=e.precinctParameters.numprecincts;for(;u<i;){const t=d(e,u,l);return u++,t}u=0}h=0}c=0}throw new s("Out of packets")}}function g(t){const e=t.SIZ,i=t.currentTile.index,r=t.tiles[i],n=r.codingStyleDefaultParameters.layersCount,o=e.Csiz;let a=0;for(let t=0;t<o;t++)a=Math.max(a,r.components[t].codingStyleParameters.decompositionLevelsCount);let l=0,c=0,h=0,u=0;this.nextPacket=function(){for(;l<=a;l++){for(;c<n;c++){for(;h<o;h++){const t=r.components[h];if(l>t.codingStyleParameters.decompositionLevelsCount)continue;const e=t.resolutions[l],i=e.precinctParameters.numprecincts;for(;u<i;){const t=d(e,u,c);return u++,t}u=0}h=0}c=0}throw new s("Out of packets")}}function m(t){const e=t.SIZ,i=t.currentTile.index,r=t.tiles[i],n=r.codingStyleDefaultParameters.layersCount,o=e.Csiz;let a,l,c,h,u=0;for(c=0;c<o;c++){const t=r.components[c];u=Math.max(u,t.codingStyleParameters.decompositionLevelsCount)}const p=new Int32Array(u+1);for(l=0;l<=u;++l){let t=0;for(c=0;c<o;++c){const e=r.components[c].resolutions;l<e.length&&(t=Math.max(t,e[l].precinctParameters.numprecincts))}p[l]=t}a=0,l=0,c=0,h=0,this.nextPacket=function(){for(;l<=u;l++){for(;h<p[l];h++){for(;c<o;c++){const t=r.components[c];if(l>t.codingStyleParameters.decompositionLevelsCount)continue;const e=t.resolutions[l],i=e.precinctParameters.numprecincts;if(!(h>=i)){for(;a<n;){const t=d(e,h,a);return a++,t}a=0}}c=0}h=0}throw new s("Out of packets")}}function y(t){const e=t.SIZ,i=t.currentTile.index,r=t.tiles[i],n=r.codingStyleDefaultParameters.layersCount,o=e.Csiz,a=w(r),l=a;let c=0,h=0,u=0,p=0,f=0;this.nextPacket=function(){for(;f<l.maxNumHigh;f++){for(;p<l.maxNumWide;p++){for(;u<o;u++){const t=r.components[u],e=t.codingStyleParameters.decompositionLevelsCount;for(;h<=e;h++){const e=t.resolutions[h],i=a.components[u].resolutions[h],r=b(p,f,i,l,e);if(null!==r){for(;c<n;){const t=d(e,r,c);return c++,t}c=0}}h=0}u=0}p=0}throw new s("Out of packets")}}function v(t){const e=t.SIZ,i=t.currentTile.index,r=t.tiles[i],n=r.codingStyleDefaultParameters.layersCount,o=e.Csiz,a=w(r);let l=0,c=0,h=0,u=0,p=0;this.nextPacket=function(){for(;h<o;++h){const t=r.components[h],e=a.components[h],i=t.codingStyleParameters.decompositionLevelsCount;for(;p<e.maxNumHigh;p++){for(;u<e.maxNumWide;u++){for(;c<=i;c++){const i=t.resolutions[c],r=e.resolutions[c],o=b(u,p,r,e,i);if(null!==o){for(;l<n;){const t=d(i,o,l);return l++,t}l=0}}c=0}u=0}p=0}throw new s("Out of packets")}}function b(t,e,i,r,n){const o=t*r.minWidth,s=e*r.minHeight;if(o%i.width!=0||s%i.height!=0)return null;const a=s/i.width*n.precinctParameters.numprecinctswide;return o/i.height+a}function w(t){const e=t.components.length;let i=Number.MAX_VALUE,r=Number.MAX_VALUE,n=0,o=0;const s=new Array(e);for(let a=0;a<e;a++){const e=t.components[a],l=e.codingStyleParameters.decompositionLevelsCount,c=new Array(l+1);let h=Number.MAX_VALUE,u=Number.MAX_VALUE,p=0,d=0,f=1;for(let t=l;t>=0;--t){const i=e.resolutions[t],r=f*i.precinctParameters.precinctWidth,n=f*i.precinctParameters.precinctHeight;h=Math.min(h,r),u=Math.min(u,n),p=Math.max(p,i.precinctParameters.numprecinctswide),d=Math.max(d,i.precinctParameters.numprecinctshigh),c[t]={width:r,height:n},f<<=1}i=Math.min(i,h),r=Math.min(r,u),n=Math.max(n,p),o=Math.max(o,d),s[a]={resolutions:c,minWidth:h,minHeight:u,maxNumWide:p,maxNumHigh:d}}return{components:s,minWidth:i,minHeight:r,maxNumWide:n,maxNumHigh:o}}function x(t){const e=t.SIZ,i=t.currentTile.index,r=t.tiles[i],n=e.Csiz;for(let t=0;t<n;t++){const e=r.components[t],i=e.codingStyleParameters.decompositionLevelsCount,n=[],o=[];for(let t=0;t<=i;t++){const r=h(0,e,t),s={},a=1<<i-t;let l;if(s.trx0=Math.ceil(e.tcx0/a),s.try0=Math.ceil(e.tcy0/a),s.trx1=Math.ceil(e.tcx1/a),s.try1=Math.ceil(e.tcy1/a),s.resLevel=t,u(0,s,r),n.push(s),0===t)l={},l.type="LL",l.tbx0=Math.ceil(e.tcx0/a),l.tby0=Math.ceil(e.tcy0/a),l.tbx1=Math.ceil(e.tcx1/a),l.tby1=Math.ceil(e.tcy1/a),l.resolution=s,p(0,l,r),o.push(l),s.subbands=[l];else{const n=1<<i-t+1,a=[];l={},l.type="HL",l.tbx0=Math.ceil(e.tcx0/n-.5),l.tby0=Math.ceil(e.tcy0/n),l.tbx1=Math.ceil(e.tcx1/n-.5),l.tby1=Math.ceil(e.tcy1/n),l.resolution=s,p(0,l,r),o.push(l),a.push(l),l={},l.type="LH",l.tbx0=Math.ceil(e.tcx0/n),l.tby0=Math.ceil(e.tcy0/n-.5),l.tbx1=Math.ceil(e.tcx1/n),l.tby1=Math.ceil(e.tcy1/n-.5),l.resolution=s,p(0,l,r),o.push(l),a.push(l),l={},l.type="HH",l.tbx0=Math.ceil(e.tcx0/n-.5),l.tby0=Math.ceil(e.tcy0/n-.5),l.tbx1=Math.ceil(e.tcx1/n-.5),l.tby1=Math.ceil(e.tcy1/n-.5),l.resolution=s,p(0,l,r),o.push(l),a.push(l),s.subbands=a}}e.resolutions=n,e.subbands=o}const o=r.codingStyleDefaultParameters.progressionOrder;switch(o){case 0:r.packetsIterator=new f(t);break;case 1:r.packetsIterator=new g(t);break;case 2:r.packetsIterator=new m(t);break;case 3:r.packetsIterator=new y(t);break;case 4:r.packetsIterator=new v(t);break;default:throw new s(`Unsupported progression order ${o}`)}}function S(t,e,i,r){let o,a=0,l=0,c=!1;function h(t){for(;l<t;){const t=e[i+a];a++,c?(o=o<<7|t,l+=7,c=!1):(o=o<<8|t,l+=8),255===t&&(c=!0)}return l-=t,o>>>l&(1<<t)-1}function u(t){return 255===e[i+a-1]&&e[i+a]===t?(p(1),!0):255===e[i+a]&&e[i+a+1]===t&&(p(2),!0)}function p(t){a+=t}function d(){l=0,c&&(a++,c=!1)}function f(){if(0===h(1))return 1;if(0===h(1))return 2;let t=h(2);return t<3?t+3:(t=h(5),t<31?t+6:(t=h(7),t+37))}const g=t.currentTile.index,m=t.tiles[g],y=t.COD.sopMarkerUsed,v=t.COD.ephMarkerUsed,b=m.packetsIterator;for(;a<r;){d(),y&&u(145)&&p(4);const t=b.nextPacket();if(!h(1))continue;const r=t.layerNumber,o=[];let l;for(let e=0,i=t.codeblocks.length;e<i;e++){l=t.codeblocks[e];let i=l.precinct;const a=l.cbx-i.cbxMin,c=l.cby-i.cbyMin;let u,p,d=!1,g=!1;if(void 0!==l.included)d=!!h(1);else{let t;if(i=l.precinct,void 0!==i.inclusionTree)t=i.inclusionTree;else{const e=i.cbxMax-i.cbxMin+1,n=i.cbyMax-i.cbyMin+1;t=new T(e,n,r),p=new _(e,n),i.inclusionTree=t,i.zeroBitPlanesTree=p;for(let t=0;t<r;t++)if(0!==h(1))throw new s("Invalid tag tree")}if(t.reset(a,c,r))for(;;){if(!h(1)){t.incrementValue(r);break}if(u=!t.nextLevel(),u){l.included=!0,d=g=!0;break}}}if(!d)continue;if(g){for(p=i.zeroBitPlanesTree,p.reset(a,c);;)if(h(1)){if(u=!p.nextLevel(),u)break}else p.incrementValue();l.zeroBitPlanes=p.value}const m=f();for(;h(1);)l.Lblock++;const y=(0,n.log2)(m),v=h((m<1<<y?y-1:y)+l.Lblock);o.push({codeblock:l,codingpasses:m,dataLength:v})}for(d(),v&&u(146);o.length>0;){const t=o.shift();l=t.codeblock,void 0===l.data&&(l.data=[]),l.data.push({data:e,start:i+a,end:i+a+t.dataLength,codingpasses:t.codingpasses}),a+=t.dataLength}}return a}function k(t,e,i,r,n,s,a,l,c){const h=r.tbx0,u=r.tby0,p=r.tbx1-r.tbx0,d=r.codeblocks,f="H"===r.type.charAt(0)?1:0,g="H"===r.type.charAt(1)?e:0;for(let i=0,m=d.length;i<m;++i){const m=d[i],y=m.tbx1_-m.tbx0_,v=m.tby1_-m.tby0_;if(0===y||0===v)continue;if(void 0===m.data)continue;const b=new O(y,v,m.subbandType,m.zeroBitPlanes,s);let w=2;const x=m.data;let S,k,C,A=0,_=0;for(S=0,k=x.length;S<k;S++)C=x[S],A+=C.end-C.start,_+=C.codingpasses;const T=new Uint8Array(A);let E=0;for(S=0,k=x.length;S<k;S++){C=x[S];const t=C.data.subarray(C.start,C.end);T.set(t,E),E+=t.length}const M=new o.ArithmeticDecoder(T,0,A);for(b.setDecoder(M),S=0;S<_;S++){switch(w){case 0:b.runSignificancePropagationPass();break;case 1:b.runMagnitudeRefinementPass();break;case 2:b.runCleanupPass(),l&&b.checkSegmentationSymbol()}c&&b.reset(),w=(w+1)%3}let P=m.tbx0_-h+(m.tby0_-u)*p;const I=b.coefficentsSign,D=b.coefficentsMagnitude,F=b.bitsDecoded,R=a?0:.5;let L,N,B;E=0;const j="LL"!==r.type;for(S=0;S<v;S++){const i=2*(P/p|0)*(e-p)+f+g;for(L=0;L<y;L++){if(N=D[E],0!==N){N=(N+R)*n,0!==I[E]&&(N=-N),B=F[E];const e=j?i+(P<<1):P;t[e]=a&&B>=s?N:N*(1<<s-B)}P++,E++}P+=p-y}}}function C(t,e,i){const r=e.components[i],n=r.codingStyleParameters,o=r.quantizationParameters,s=n.decompositionLevelsCount,l=o.SPqcds,c=o.scalarExpounded,h=o.guardBits,u=n.segmentationSymbolUsed,p=n.resetContextProbabilities,d=t.components[i].precision,f=n.reversibleTransformation,g=f?new P:new M,m=[];let y=0;for(let t=0;t<=s;t++){const e=r.resolutions[t],i=e.trx1-e.trx0,n=e.try1-e.try0,o=new Float32Array(i*n);for(let r=0,n=e.subbands.length;r<n;r++){let n,s;c?(n=l[y].mu,s=l[y].epsilon,y++):(n=l[0].mu,s=l[0].epsilon+(t>0?1-t:0));const g=e.subbands[r],m=a[g.type];k(o,i,0,g,f?1:2**(d+m-s)*(1+n/2048),h+s-1,f,u,p)}m.push({width:i,height:n,items:o})}const v=g.calculate(m,r.tcx0,r.tcy0);return{left:r.tcx0,top:r.tcy0,width:v.width,height:v.height,items:v.items}}function A(t,e){const i=t.SIZ.Csiz,r=t.tiles[e];for(let e=0;e<i;e++){const i=r.components[e],n=void 0!==t.currentTile.QCC[e]?t.currentTile.QCC[e]:t.currentTile.QCD;i.quantizationParameters=n;const o=void 0!==t.currentTile.COC[e]?t.currentTile.COC[e]:t.currentTile.COD;i.codingStyleParameters=o}r.codingStyleDefaultParameters=t.currentTile.COD}e.JpxImage=class{constructor(){this.failOnCorruptedImage=!1}parse(t){if(65359===(0,n.readUint16)(t,0))return void this.parseCodestream(t,0,t.length);const e=t.length;let i=0;for(;i<e;){let o=8,a=(0,n.readUint32)(t,i);const l=(0,n.readUint32)(t,i+4);if(i+=o,1===a&&(a=4294967296*(0,n.readUint32)(t,i)+(0,n.readUint32)(t,i+4),i+=8,o+=8),0===a&&(a=e-i+o),a<o)throw new s("Invalid box field size");const c=a-o;let h=!0;switch(l){case 1785737832:h=!1;break;case 1668246642:const e=t[i];if(1===e){const e=(0,n.readUint32)(t,i+3);switch(e){case 16:case 17:case 18:break;default:(0,r.warn)("Unknown colorspace "+e)}}else 2===e&&(0,r.info)("ICC profile not supported");break;case 1785737827:this.parseCodestream(t,i,i+c);break;case 1783636e3:218793738!==(0,n.readUint32)(t,i)&&(0,r.warn)("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:const o=String.fromCharCode(l>>24&255,l>>16&255,l>>8&255,255&l);(0,r.warn)(`Unsupported header type ${l} (${o}).`)}h&&(i+=c)}}parseImageProperties(t){let e=t.getByte();for(;e>=0;){const i=e;if(e=t.getByte(),65361==(i<<8|e)){t.skip(4);const e=t.getInt32()>>>0,i=t.getInt32()>>>0,r=t.getInt32()>>>0,n=t.getInt32()>>>0;t.skip(16);const o=t.getUint16();return this.width=e-r,this.height=i-n,this.componentsCount=o,void(this.bitsPerComponent=8)}}throw new s("No size marker found in JPX stream")}parseCodestream(t,e,i){const o={};let a=!1;try{let s=e;for(;s+1<i;){const e=(0,n.readUint16)(t,s);s+=2;let i,h,u,p,d,f,g=0;switch(e){case 65359:o.mainHeader=!0;break;case 65497:break;case 65361:g=(0,n.readUint16)(t,s);const m={};m.Xsiz=(0,n.readUint32)(t,s+4),m.Ysiz=(0,n.readUint32)(t,s+8),m.XOsiz=(0,n.readUint32)(t,s+12),m.YOsiz=(0,n.readUint32)(t,s+16),m.XTsiz=(0,n.readUint32)(t,s+20),m.YTsiz=(0,n.readUint32)(t,s+24),m.XTOsiz=(0,n.readUint32)(t,s+28),m.YTOsiz=(0,n.readUint32)(t,s+32);const y=(0,n.readUint16)(t,s+36);m.Csiz=y;const v=[];i=s+38;for(let e=0;e<y;e++){const e={precision:1+(127&t[i]),isSigned:!!(128&t[i]),XRsiz:t[i+1],YRsiz:t[i+2]};i+=3,l(e,m),v.push(e)}o.SIZ=m,o.components=v,c(o,v),o.QCC=[],o.COC=[];break;case 65372:g=(0,n.readUint16)(t,s);const b={};switch(i=s+2,h=t[i++],31&h){case 0:p=8,d=!0;break;case 1:p=16,d=!1;break;case 2:p=16,d=!0;break;default:throw new Error("Invalid SQcd value "+h)}for(b.noQuantization=8===p,b.scalarExpounded=d,b.guardBits=h>>5,u=[];i<g+s;){const e={};8===p?(e.epsilon=t[i++]>>3,e.mu=0):(e.epsilon=t[i]>>3,e.mu=(7&t[i])<<8|t[i+1],i+=2),u.push(e)}b.SPqcds=u,o.mainHeader?o.QCD=b:(o.currentTile.QCD=b,o.currentTile.QCC=[]);break;case 65373:g=(0,n.readUint16)(t,s);const w={};let k;switch(i=s+2,o.SIZ.Csiz<257?k=t[i++]:(k=(0,n.readUint16)(t,i),i+=2),h=t[i++],31&h){case 0:p=8,d=!0;break;case 1:p=16,d=!1;break;case 2:p=16,d=!0;break;default:throw new Error("Invalid SQcd value "+h)}for(w.noQuantization=8===p,w.scalarExpounded=d,w.guardBits=h>>5,u=[];i<g+s;){const e={};8===p?(e.epsilon=t[i++]>>3,e.mu=0):(e.epsilon=t[i]>>3,e.mu=(7&t[i])<<8|t[i+1],i+=2),u.push(e)}w.SPqcds=u,o.mainHeader?o.QCC[k]=w:o.currentTile.QCC[k]=w;break;case 65362:g=(0,n.readUint16)(t,s);const C={};i=s+2;const _=t[i++];C.entropyCoderWithCustomPrecincts=!!(1&_),C.sopMarkerUsed=!!(2&_),C.ephMarkerUsed=!!(4&_),C.progressionOrder=t[i++],C.layersCount=(0,n.readUint16)(t,i),i+=2,C.multipleComponentTransform=t[i++],C.decompositionLevelsCount=t[i++],C.xcb=2+(15&t[i++]),C.ycb=2+(15&t[i++]);const T=t[i++];if(C.selectiveArithmeticCodingBypass=!!(1&T),C.resetContextProbabilities=!!(2&T),C.terminationOnEachCodingPass=!!(4&T),C.verticallyStripe=!!(8&T),C.predictableTermination=!!(16&T),C.segmentationSymbolUsed=!!(32&T),C.reversibleTransformation=t[i++],C.entropyCoderWithCustomPrecincts){const e=[];for(;i<g+s;){const r=t[i++];e.push({PPx:15&r,PPy:r>>4})}C.precinctsSizes=e}const O=[];C.selectiveArithmeticCodingBypass&&O.push("selectiveArithmeticCodingBypass"),C.terminationOnEachCodingPass&&O.push("terminationOnEachCodingPass"),C.verticallyStripe&&O.push("verticallyStripe"),C.predictableTermination&&O.push("predictableTermination"),O.length>0&&(a=!0,(0,r.warn)(`JPX: Unsupported COD options (${O.join(", ")}).`)),o.mainHeader?o.COD=C:(o.currentTile.COD=C,o.currentTile.COC=[]);break;case 65424:g=(0,n.readUint16)(t,s),f={},f.index=(0,n.readUint16)(t,s+2),f.length=(0,n.readUint32)(t,s+4),f.dataEnd=f.length+s-2,f.partIndex=t[s+8],f.partsCount=t[s+9],o.mainHeader=!1,0===f.partIndex&&(f.COD=o.COD,f.COC=o.COC.slice(0),f.QCD=o.QCD,f.QCC=o.QCC.slice(0)),o.currentTile=f;break;case 65427:f=o.currentTile,0===f.partIndex&&(A(o,f.index),x(o)),g=f.dataEnd-s,S(o,t,s,g);break;case 65363:(0,r.warn)("JPX: Codestream code 0xFF53 (COC) is not implemented.");case 65365:case 65367:case 65368:case 65380:g=(0,n.readUint16)(t,s);break;default:throw new Error("Unknown codestream code: "+e.toString(16))}s+=g}}catch(t){if(a||this.failOnCorruptedImage)throw new s(t.message);(0,r.warn)(`JPX: Trying to recover from: "${t.message}".`)}this.tiles=function(t){const e=t.SIZ,i=t.components,r=e.Csiz,n=[];for(let e=0,o=t.tiles.length;e<o;e++){const o=t.tiles[e],s=[];for(let e=0;e<r;e++)s[e]=C(t,o,e);const a=s[0],l=new Uint8ClampedArray(a.items.length*r),c={left:a.left,top:a.top,width:a.width,height:a.height,items:l};let h,u,p,d,f,g,m,y=0;if(o.codingStyleDefaultParameters.multipleComponentTransform){const t=4===r,e=s[0].items,n=s[1].items,a=s[2].items,c=t?s[3].items:null;h=i[0].precision-8,u=.5+(128<<h);const v=o.components[0],b=r-3;if(d=e.length,v.codingStyleParameters.reversibleTransformation)for(p=0;p<d;p++,y+=b){f=e[p]+u,g=n[p],m=a[p];const t=f-(m+g>>2);l[y++]=t+m>>h,l[y++]=t>>h,l[y++]=t+g>>h}else for(p=0;p<d;p++,y+=b)f=e[p]+u,g=n[p],m=a[p],l[y++]=f+1.402*m>>h,l[y++]=f-.34413*g-.71414*m>>h,l[y++]=f+1.772*g>>h;if(t)for(p=0,y=3;p<d;p++,y+=4)l[y]=c[p]+u>>h}else for(let t=0;t<r;t++){const e=s[t].items;for(h=i[t].precision-8,u=.5+(128<<h),y=t,p=0,d=e.length;p<d;p++)l[y]=e[p]+u>>h,y+=r}n.push(c)}return n}(o),this.width=o.SIZ.Xsiz-o.SIZ.XOsiz,this.height=o.SIZ.Ysiz-o.SIZ.YOsiz,this.componentsCount=o.SIZ.Csiz}};class _{constructor(t,e){const i=(0,n.log2)(Math.max(t,e))+1;this.levels=[];for(let r=0;r<i;r++){const i={width:t,height:e,items:[]};this.levels.push(i),t=Math.ceil(t/2),e=Math.ceil(e/2)}}reset(t,e){let i,r=0,n=0;for(;r<this.levels.length;){i=this.levels[r];const o=t+e*i.width;if(void 0!==i.items[o]){n=i.items[o];break}i.index=o,t>>=1,e>>=1,r++}r--,i=this.levels[r],i.items[i.index]=n,this.currentLevel=r,delete this.value}incrementValue(){const t=this.levels[this.currentLevel];t.items[t.index]++}nextLevel(){let t=this.currentLevel,e=this.levels[t];const i=e.items[e.index];return t--,t<0?(this.value=i,!1):(this.currentLevel=t,e=this.levels[t],e.items[e.index]=i,!0)}}class T{constructor(t,e,i){const r=(0,n.log2)(Math.max(t,e))+1;this.levels=[];for(let n=0;n<r;n++){const r=new Uint8Array(t*e);for(let t=0,e=r.length;t<e;t++)r[t]=i;const n={width:t,height:e,items:r};this.levels.push(n),t=Math.ceil(t/2),e=Math.ceil(e/2)}}reset(t,e,i){let r=0;for(;r<this.levels.length;){const n=this.levels[r],o=t+e*n.width;n.index=o;const s=n.items[o];if(255===s)break;if(s>i)return this.currentLevel=r,this.propagateValues(),!1;t>>=1,e>>=1,r++}return this.currentLevel=r-1,!0}incrementValue(t){const e=this.levels[this.currentLevel];e.items[e.index]=t+1,this.propagateValues()}propagateValues(){let t=this.currentLevel,e=this.levels[t];const i=e.items[e.index];for(;--t>=0;)e=this.levels[t],e.items[e.index]=i}nextLevel(){let t=this.currentLevel,e=this.levels[t];const i=e.items[e.index];return e.items[e.index]=255,t--,!(t<0||(this.currentLevel=t,e=this.levels[t],e.items[e.index]=i,0))}}const O=function(){const t=17,e=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),i=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),r=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);return class{constructor(t,n,o,s,a){let l;this.width=t,this.height=n,l="HH"===o?r:"HL"===o?i:e,this.contextLabelTable=l;const c=t*n;let h;this.neighborsSignificance=new Uint8Array(c),this.coefficentsSign=new Uint8Array(c),h=a>14?new Uint32Array(c):a>6?new Uint16Array(c):new Uint8Array(c),this.coefficentsMagnitude=h,this.processingFlags=new Uint8Array(c);const u=new Uint8Array(c);if(0!==s)for(let t=0;t<c;t++)u[t]=s;this.bitsDecoded=u,this.reset()}setDecoder(t){this.decoder=t}reset(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[17]=92,this.contexts[18]=6}setNeighborsSignificance(t,e,i){const r=this.neighborsSignificance,n=this.width,o=this.height,s=e>0,a=e+1<n;let l;t>0&&(l=i-n,s&&(r[l-1]+=16),a&&(r[l+1]+=16),r[l]+=4),t+1<o&&(l=i+n,s&&(r[l-1]+=16),a&&(r[l+1]+=16),r[l]+=4),s&&(r[i-1]+=1),a&&(r[i+1]+=1),r[i]|=128}runSignificancePropagationPass(){const t=this.decoder,e=this.width,i=this.height,r=this.coefficentsMagnitude,n=this.coefficentsSign,o=this.neighborsSignificance,s=this.processingFlags,a=this.contexts,l=this.contextLabelTable,c=this.bitsDecoded;for(let h=0;h<i;h+=4)for(let u=0;u<e;u++){let p=h*e+u;for(let d=0;d<4;d++,p+=e){const e=h+d;if(e>=i)break;if(s[p]&=-2,r[p]||!o[p])continue;const f=l[o[p]];if(t.readBit(a,f)){const t=this.decodeSignBit(e,u,p);n[p]=t,r[p]=1,this.setNeighborsSignificance(e,u,p),s[p]|=2}c[p]++,s[p]|=1}}}decodeSignBit(t,e,i){const r=this.width,n=this.height,o=this.coefficentsMagnitude,s=this.coefficentsSign;let a,l,c,h,u,p;h=e>0&&0!==o[i-1],e+1<r&&0!==o[i+1]?(c=s[i+1],h?(l=s[i-1],a=1-c-l):a=1-c-c):h?(l=s[i-1],a=1-l-l):a=0;const d=3*a;return h=t>0&&0!==o[i-r],t+1<n&&0!==o[i+r]?(c=s[i+r],h?(l=s[i-r],a=1-c-l+d):a=1-c-c+d):h?(l=s[i-r],a=1-l-l+d):a=d,a>=0?(u=9+a,p=this.decoder.readBit(this.contexts,u)):(u=9-a,p=1^this.decoder.readBit(this.contexts,u)),p}runMagnitudeRefinementPass(){const t=this.decoder,e=this.width,i=this.height,r=this.coefficentsMagnitude,n=this.neighborsSignificance,o=this.contexts,s=this.bitsDecoded,a=this.processingFlags,l=e*i,c=4*e;for(let i,h=0;h<l;h=i){i=Math.min(l,h+c);for(let l=0;l<e;l++)for(let c=h+l;c<i;c+=e){if(!r[c]||0!=(1&a[c]))continue;let e=16;0!=(2&a[c])&&(a[c]^=2,e=0==(127&n[c])?15:14);const i=t.readBit(o,e);r[c]=r[c]<<1|i,s[c]++,a[c]|=1}}}runCleanupPass(){const e=this.decoder,i=this.width,r=this.height,n=this.neighborsSignificance,o=this.coefficentsMagnitude,s=this.coefficentsSign,a=this.contexts,l=this.contextLabelTable,c=this.bitsDecoded,h=this.processingFlags,u=i,p=2*i,d=3*i;let f;for(let g=0;g<r;g=f){f=Math.min(g+4,r);const m=g*i,y=g+3<r;for(let r=0;r<i;r++){const v=m+r;let b,w=0,x=v,S=g;if(y&&0===h[v]&&0===h[v+u]&&0===h[v+p]&&0===h[v+d]&&0===n[v]&&0===n[v+u]&&0===n[v+p]&&0===n[v+d]){if(!e.readBit(a,18)){c[v]++,c[v+u]++,c[v+p]++,c[v+d]++;continue}w=e.readBit(a,t)<<1|e.readBit(a,t),0!==w&&(S=g+w,x+=w*i),b=this.decodeSignBit(S,r,x),s[x]=b,o[x]=1,this.setNeighborsSignificance(S,r,x),h[x]|=2,x=v;for(let t=g;t<=S;t++,x+=i)c[x]++;w++}for(S=g+w;S<f;S++,x+=i){if(o[x]||0!=(1&h[x]))continue;const t=l[n[x]];1===e.readBit(a,t)&&(b=this.decodeSignBit(S,r,x),s[x]=b,o[x]=1,this.setNeighborsSignificance(S,r,x),h[x]|=2),c[x]++}}}}checkSegmentationSymbol(){const e=this.decoder,i=this.contexts;if(10!=(e.readBit(i,t)<<3|e.readBit(i,t)<<2|e.readBit(i,t)<<1|e.readBit(i,t)))throw new s("Invalid segmentation symbol")}}}();class E{constructor(){this.constructor===E&&(0,r.unreachable)("Cannot initialize Transform.")}calculate(t,e,i){let r=t[0];for(let n=1,o=t.length;n<o;n++)r=this.iterate(r,t[n],e,i);return r}extend(t,e,i){let r=e-1,n=e+1,o=e+i-2,s=e+i;t[r--]=t[n++],t[s++]=t[o--],t[r--]=t[n++],t[s++]=t[o--],t[r--]=t[n++],t[s++]=t[o--],t[r]=t[n],t[s]=t[o]}filter(t,e,i){(0,r.unreachable)("Abstract method `filter` called")}iterate(t,e,i,r){const n=t.width,o=t.height;let s=t.items;const a=e.width,l=e.height,c=e.items;let h,u,p,d,f,g;for(p=0,h=0;h<o;h++)for(d=2*h*a,u=0;u<n;u++,p++,d+=2)c[d]=s[p];s=t.items=null;const m=new Float32Array(a+8);if(1===a){if(0!=(1&i))for(g=0,p=0;g<l;g++,p+=a)c[p]*=.5}else for(g=0,p=0;g<l;g++,p+=a)m.set(c.subarray(p,p+a),4),this.extend(m,4,a),this.filter(m,4,a),c.set(m.subarray(4,4+a),p);let y=16;const v=[];for(h=0;h<y;h++)v.push(new Float32Array(l+8));let b,w=0;if(t=4+l,1===l){if(0!=(1&r))for(f=0;f<a;f++)c[f]*=.5}else for(f=0;f<a;f++){if(0===w){for(y=Math.min(a-f,y),p=f,d=4;d<t;p+=a,d++)for(b=0;b<y;b++)v[b][d]=c[p+b];w=y}w--;const e=v[w];if(this.extend(e,4,l),this.filter(e,4,l),0===w)for(p=f-y+1,d=4;d<t;p+=a,d++)for(b=0;b<y;b++)c[p+b]=v[b][d]}return{width:a,height:l,items:c}}}class M extends E{filter(t,e,i){const r=i>>1;let n,o,s,a;const l=-1.586134342059924,c=-.052980118572961,h=.882911075530934,u=.443506852043971,p=1.230174104914001;for(n=(e|=0)-3,o=r+4;o--;n+=2)t[n]*=.8128930661159609;for(n=e-2,s=u*t[n-1],o=r+3;o--&&(a=u*t[n+1],t[n]=p*t[n]-s-a,o--);n+=2)n+=2,s=u*t[n+1],t[n]=p*t[n]-s-a;for(n=e-1,s=h*t[n-1],o=r+2;o--&&(a=h*t[n+1],t[n]-=s+a,o--);n+=2)n+=2,s=h*t[n+1],t[n]-=s+a;for(n=e,s=c*t[n-1],o=r+1;o--&&(a=c*t[n+1],t[n]-=s+a,o--);n+=2)n+=2,s=c*t[n+1],t[n]-=s+a;if(0!==r)for(n=e+1,s=l*t[n-1],o=r;o--&&(a=l*t[n+1],t[n]-=s+a,o--);n+=2)n+=2,s=l*t[n+1],t[n]-=s+a}}class P extends E{filter(t,e,i){const r=i>>1;let n,o;for(n=e|=0,o=r+1;o--;n+=2)t[n]-=t[n-1]+t[n+1]+2>>2;for(n=e+1,o=r;o--;n+=2)t[n]+=t[n-1]+t[n+1]>>1}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LZWStream=void 0;var r=i(29);class n extends r.DecodeStream{constructor(t,e,i){super(e),this.str=t,this.dict=t.dict,this.cachedData=0,this.bitsCached=0;const r=4096,n={earlyChange:i,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(r),dictionaryLengths:new Uint16Array(r),dictionaryPrevCodes:new Uint16Array(r),currentSequence:new Uint8Array(r),currentSequenceLength:0};for(let t=0;t<256;++t)n.dictionaryValues[t]=t,n.dictionaryLengths[t]=1;this.lzwState=n}readBits(t){let e=this.bitsCached,i=this.cachedData;for(;e<t;){const t=this.str.getByte();if(-1===t)return this.eof=!0,null;i=i<<8|t,e+=8}return this.bitsCached=e-=t,this.cachedData=i,this.lastCode=null,i>>>e&(1<<t)-1}readBlock(){let t,e,i,r=1024;const n=this.lzwState;if(!n)return;const o=n.earlyChange;let s=n.nextCode;const a=n.dictionaryValues,l=n.dictionaryLengths,c=n.dictionaryPrevCodes;let h=n.codeLength,u=n.prevCode;const p=n.currentSequence;let d=n.currentSequenceLength,f=0,g=this.bufferLength,m=this.ensureBuffer(this.bufferLength+r);for(t=0;t<512;t++){const t=this.readBits(h),n=d>0;if(t<256)p[0]=t,d=1;else{if(!(t>=258)){if(256===t){h=9,s=258,d=0;continue}this.eof=!0,delete this.lzwState;break}if(t<s)for(d=l[t],e=d-1,i=t;e>=0;e--)p[e]=a[i],i=c[i];else p[d++]=p[0]}if(n&&(c[s]=u,l[s]=l[u]+1,a[s]=p[0],s++,h=s+o&s+o-1?h:0|Math.min(Math.log(s+o)/.6931471805599453+1,12)),u=t,f+=d,r<f){do{r+=512}while(r<f);m=this.ensureBuffer(this.bufferLength+r)}for(e=0;e<d;e++)m[g++]=p[e]}n.nextCode=s,n.codeLength=h,n.prevCode=u,n.currentSequenceLength=d,this.bufferLength=g}}e.LZWStream=n},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PredictorStream=void 0;var r=i(29),n=i(5),o=i(2);class s extends r.DecodeStream{constructor(t,e,i){if(super(e),!(i instanceof n.Dict))return t;const r=this.predictor=i.get("Predictor")||1;if(r<=1)return t;if(2!==r&&(r<10||r>15))throw new o.FormatError(`Unsupported predictor: ${r}`);this.readBlock=2===r?this.readBlockTiff:this.readBlockPng,this.str=t,this.dict=t.dict;const s=this.colors=i.get("Colors")||1,a=this.bits=i.get("BPC","BitsPerComponent")||8,l=this.columns=i.get("Columns")||1;return this.pixBytes=s*a+7>>3,this.rowBytes=l*s*a+7>>3,this}readBlockTiff(){const t=this.rowBytes,e=this.bufferLength,i=this.ensureBuffer(e+t),r=this.bits,n=this.colors,o=this.str.getBytes(t);if(this.eof=!o.length,this.eof)return;let s,a=0,l=0,c=0,h=0,u=e;if(1===r&&1===n)for(s=0;s<t;++s){let t=o[s]^a;t^=t>>1,t^=t>>2,t^=t>>4,a=(1&t)<<7,i[u++]=t}else if(8===r){for(s=0;s<n;++s)i[u++]=o[s];for(;s<t;++s)i[u]=i[u-n]+o[s],u++}else if(16===r){const e=2*n;for(s=0;s<e;++s)i[u++]=o[s];for(;s<t;s+=2){const t=((255&o[s])<<8)+(255&o[s+1])+((255&i[u-e])<<8)+(255&i[u-e+1]);i[u++]=t>>8&255,i[u++]=255&t}}else{const t=new Uint8Array(n+1),u=(1<<r)-1;let p=0,d=e;const f=this.columns;for(s=0;s<f;++s)for(let e=0;e<n;++e)c<r&&(a=a<<8|255&o[p++],c+=8),t[e]=t[e]+(a>>c-r)&u,c-=r,l=l<<r|t[e],h+=r,h>=8&&(i[d++]=l>>h-8&255,h-=8);h>0&&(i[d++]=(l<<8-h)+(a&(1<<8-h)-1))}this.bufferLength+=t}readBlockPng(){const t=this.rowBytes,e=this.pixBytes,i=this.str.getByte(),r=this.str.getBytes(t);if(this.eof=!r.length,this.eof)return;const n=this.bufferLength,s=this.ensureBuffer(n+t);let a=s.subarray(n-t,n);0===a.length&&(a=new Uint8Array(t));let l,c,h,u=n;switch(i){case 0:for(l=0;l<t;++l)s[u++]=r[l];break;case 1:for(l=0;l<e;++l)s[u++]=r[l];for(;l<t;++l)s[u]=s[u-e]+r[l]&255,u++;break;case 2:for(l=0;l<t;++l)s[u++]=a[l]+r[l]&255;break;case 3:for(l=0;l<e;++l)s[u++]=(a[l]>>1)+r[l];for(;l<t;++l)s[u]=(a[l]+s[u-e]>>1)+r[l]&255,u++;break;case 4:for(l=0;l<e;++l)c=a[l],h=r[l],s[u++]=c+h;for(;l<t;++l){c=a[l];const t=a[l-e],i=s[u-e],n=i+c-t;let o=n-i;o<0&&(o=-o);let p=n-c;p<0&&(p=-p);let d=n-t;d<0&&(d=-d),h=r[l],s[u++]=o<=p&&o<=d?i+h:p<=d?c+h:t+h}break;default:throw new o.FormatError(`Unsupported predictor: ${i}`)}this.bufferLength+=t}}e.PredictorStream=s},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RunLengthStream=void 0;var r=i(29);class n extends r.DecodeStream{constructor(t,e){super(e),this.str=t,this.dict=t.dict}readBlock(){const t=this.str.getBytes(2);if(!t||t.length<2||128===t[0])return void(this.eof=!0);let e,i=this.bufferLength,r=t[0];if(r<128){if(e=this.ensureBuffer(i+r+1),e[i++]=t[1],r>0){const t=this.str.getBytes(r);e.set(t,i),i+=r}}else{r=257-r;const n=t[1];e=this.ensureBuffer(i+r+1);for(let t=0;t<r;t++)e[i++]=n}this.bufferLength=i}}e.RunLengthStream=n},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Font=e.ErrorFont=void 0;var r=i(2),n=i(45),o=i(18),s=i(21),a=i(20),l=i(19),c=i(47),h=i(48),u=i(49),p=i(50),d=i(51),f=i(52),g=i(26),m=i(53),y=i(8),v=i(10),b=i(54);const w=[[57344,63743],[1048576,1114109]],x=1e3,S=["ascent","bbox","black","bold","charProcOperatorList","composite","cssFontInfo","data","defaultVMetrics","defaultWidth","descent","fallbackName","fontMatrix","fontType","isType3Font","italic","loadedName","mimetype","missingFile","name","remeasure","subtype","type","vertical"],k=["cMap","defaultEncoding","differences","isMonospace","isSerifFont","isSymbolicFont","seacMap","toFontChar","toUnicode","vmetrics","widths"];function C(t){if(!t.fontMatrix)return;if(t.fontMatrix[0]===r.FONT_IDENTITY_MATRIX[0])return;const e=.001/t.fontMatrix[0],i=t.widths;for(const t in i)i[t]*=e;t.defaultWidth*=e}function A(t){if(!t.fallbackToUnicode)return;if(t.toUnicode instanceof h.IdentityToUnicodeMap)return;const e=[];for(const i in t.fallbackToUnicode)t.toUnicode.has(i)||(e[i]=t.fallbackToUnicode[i]);e.length>0&&t.toUnicode.amend(e)}class _{constructor(t,e,i,r,n,o,a,l,c){this.originalCharCode=t,this.fontChar=e,this.unicode=i,this.accent=r,this.width=n,this.vmetric=o,this.operatorListId=a,this.isSpace=l,this.isInFont=c;const h=(0,s.getCharUnicodeCategory)(i);this.isWhitespace=h.isWhitespace,this.isZeroWidthDiacritic=h.isZeroWidthDiacritic,this.isInvisibleFormatMark=h.isInvisibleFormatMark}matchesForCache(t,e,i,r,n,o,s,a,l){return this.originalCharCode===t&&this.fontChar===e&&this.unicode===i&&this.accent===r&&this.width===n&&this.vmetric===o&&this.operatorListId===s&&this.isSpace===a&&this.isInFont===l}}function T(t,e){return(t<<8)+e}function O(t,e,i){t[e+1]=i,t[e]=i>>>8}function E(t,e){const i=(t<<8)+e;return 32768&i?i-65536:i}function M(t){return String.fromCharCode(t>>8&255,255&t)}function P(t){return t>32767?t=32767:t<-32768&&(t=-32768),String.fromCharCode(t>>8&255,255&t)}function I(t){const e=t.peekBytes(4);return"ttcf"===(0,r.bytesToString)(e)}function D(t,{type:e,subtype:i,composite:n}){let o,s;return function(t){const e=t.peekBytes(4);return 65536===(0,y.readUint32)(e,0)||"true"===(0,r.bytesToString)(e)}(t)||I(t)?o=n?"CIDFontType2":"TrueType":function(t){const e=t.peekBytes(4);return"OTTO"===(0,r.bytesToString)(e)}(t)?o=n?"CIDFontType2":"OpenType":function(t){const e=t.peekBytes(2);return 37===e[0]&&33===e[1]||128===e[0]&&1===e[1]}(t)?o=n?"CIDFontType0":"MMType1"===e?"MMType1":"Type1":function(t){const e=t.peekBytes(4);return e[0]>=1&&e[3]>=1&&e[3]<=4}(t)?n?(o="CIDFontType0",s="CIDFontType0C"):(o="MMType1"===e?"MMType1":"Type1",s="Type1C"):((0,r.warn)("getFontFileType: Unable to detect correct font file Type/Subtype."),o=e,s=i),[o,s]}function F(t,e){for(const i in e)t[+i]=e[i]}function R(t,e,i){const r=[];let n;for(let i=0,o=t.length;i<o;i++)n=(0,s.getUnicodeForGlyph)(t[i],e),-1!==n&&(r[i]=n);for(const t in i)n=(0,s.getUnicodeForGlyph)(i[t],e),-1!==n&&(r[+t]=n);return r}function L(t,e,i=!1){switch(e.length){case 1:return e.charCodeAt(0);case 2:return e.charCodeAt(0)<<8|e.charCodeAt(1)}const n=`Unsupported CID string (charCode ${t}): "${e}".`;if(i)throw new r.FormatError(n);return(0,r.warn)(n),e}function N(t,e,i){const n=Object.create(null),o=[];let s=0,a=w[s][0],l=w[s][1];for(let c in t){c|=0;let h=t[c];if(!e(h))continue;if(a>l){if(s++,s>=w.length){(0,r.warn)("Ran out of space in font private use area.");break}a=w[s][0],l=w[s][1]}const u=a++;0===h&&(h=i),n[u]=h,o[c]=u}return{toFontChar:o,charCodeToGlyphId:n,nextAvailableFontCharCode:a}}function B(t,e){const i=function(t,e){const i=[];for(const r in t)t[r]>=e||i.push({fontCharCode:0|r,glyphId:t[r]});0===i.length&&i.push({fontCharCode:0,glyphId:0}),i.sort((function(t,e){return t.fontCharCode-e.fontCharCode}));const r=[],n=i.length;for(let t=0;t<n;){const e=i[t].fontCharCode,o=[i[t].glyphId];++t;let s=e;for(;t<n&&s+1===i[t].fontCharCode&&(o.push(i[t].glyphId),++s,++t,65535!==s););r.push([e,s,o])}return r}(t,e),n=i[i.length-1][1]>65535?2:1;let o,s,a,l,c="\0\0"+M(n)+"\0\0"+(0,r.string32)(4+8*n);for(o=i.length-1;o>=0&&!(i[o][0]<=65535);--o);const h=o+1;i[o][0]<65535&&65535===i[o][1]&&(i[o][1]=65534);const u=i[o][1]<65535?1:0,p=h+u,d=m.OpenTypeFileBuilder.getSearchParams(p,2);let f,g,y,v,b="",w="",x="",S="",k="",C=0;for(o=0,s=h;o<s;o++){f=i[o],g=f[0],y=f[1],b+=M(g),w+=M(y),v=f[2];let t=!0;for(a=1,l=v.length;a<l;++a)if(v[a]!==v[a-1]+1){t=!1;break}if(t)x+=M(v[0]-g&65535),S+=M(0);else{const t=2*(p-o)+2*C;for(C+=y-g+1,x+=M(0),S+=M(t),a=0,l=v.length;a<l;++a)k+=M(v[a])}}u>0&&(w+="ÿÿ",b+="ÿÿ",x+="\0",S+="\0\0");const A="\0\0"+M(2*p)+M(d.range)+M(d.entry)+M(d.rangeShift)+w+"\0\0"+b+x+S+k;let _="",T="";if(n>1){for(c+="\0\0\n"+(0,r.string32)(4+8*n+4+A.length),_="",o=0,s=i.length;o<s;o++){f=i[o],g=f[0],v=f[2];let t=v[0];for(a=1,l=v.length;a<l;++a)v[a]!==v[a-1]+1&&(y=f[0]+a-1,_+=(0,r.string32)(g)+(0,r.string32)(y)+(0,r.string32)(t),g=y+1,t=v[a]);_+=(0,r.string32)(g)+(0,r.string32)(f[1])+(0,r.string32)(t)}T="\0\f\0\0"+(0,r.string32)(_.length+16)+"\0\0\0\0"+(0,r.string32)(_.length/12)}return c+"\0"+M(A.length+4)+A+T+_}function j(t,e,i){i=i||{unitsPerEm:0,yMax:0,yMin:0,ascent:0,descent:0};let n=0,o=0,a=0,l=0,c=null,h=0;if(e){for(let t in e){t|=0,(c>t||!c)&&(c=t),h<t&&(h=t);const e=(0,s.getUnicodeRangeFor)(t);if(e<32)n|=1<<e;else if(e<64)o|=1<<e-32;else if(e<96)a|=1<<e-64;else{if(!(e<123))throw new r.FormatError("Unicode ranges Bits > 123 are reserved for internal usage");l|=1<<e-96}}h>65535&&(h=65535)}else c=0,h=255;const u=t.bbox||[0,0,0,0],p=i.unitsPerEm||1/(t.fontMatrix||r.FONT_IDENTITY_MATRIX)[0],d=t.ascentScaled?1:p/x,f=i.ascent||Math.round(d*(t.ascent||u[3]));let g=i.descent||Math.round(d*(t.descent||u[1]));g>0&&t.descent>0&&u[1]<0&&(g=-g);const m=i.yMax||f,y=-i.yMin||-g;return"\0$ô\0\0\0»\0\0\0»\0\0ß\x001\0\0\0\0"+String.fromCharCode(t.fixedPitch?9:0)+"\0\0\0\0\0\0"+(0,r.string32)(n)+(0,r.string32)(o)+(0,r.string32)(a)+(0,r.string32)(l)+"*21*"+M(t.italicAngle?1:0)+M(c||t.firstChar)+M(h||t.lastChar)+M(f)+M(g)+"\0d"+M(m)+M(y)+"\0\0\0\0\0\0\0\0"+M(t.xHeight)+M(t.capHeight)+M(0)+M(c||t.firstChar)+"\0"}function z(t){const e=Math.floor(65536*t.italicAngle);return"\0\0\0"+(0,r.string32)(e)+"\0\0\0\0"+(0,r.string32)(t.fixedPitch?1:0)+"\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"}function U(t){return t.replace(/[^\x21-\x7E]|[[\](){}<>/%]/g,"").slice(0,63)}function $(t,e){e||(e=[[],[]]);const i=[e[0][0]||"Original licence",e[0][1]||t,e[0][2]||"Unknown",e[0][3]||"uniqueID",e[0][4]||t,e[0][5]||"Version 0.11",e[0][6]||U(t),e[0][7]||"Unknown",e[0][8]||"Unknown",e[0][9]||"Unknown"],r=[];let n,o,s,a,l;for(n=0,o=i.length;n<o;n++){l=e[1][n]||i[n];const t=[];for(s=0,a=l.length;s<a;s++)t.push(M(l.charCodeAt(s)));r.push(t.join(""))}const c=[i,r],h=["\0","\0"],u=["\0\0","\0"],p=["\0\0","\t"],d=i.length*h.length;let f="\0\0"+M(d)+M(12*d+6),g=0;for(n=0,o=h.length;n<o;n++){const t=c[n];for(s=0,a=t.length;s<a;s++)l=t[s],f+=h[n]+u[n]+p[n]+M(s)+M(l.length)+M(g),g+=l.length}return f+=i.join("")+r.join(""),f}e.Font=class{constructor(t,e,i){this.name=t,this.psName=null,this.mimetype=null,this.disableFontFace=!1,this.loadedName=i.loadedName,this.isType3Font=i.isType3Font,this.missingFile=!1,this.cssFontInfo=i.cssFontInfo,this._charsCache=Object.create(null),this._glyphCache=Object.create(null);let n=!!(i.flags&o.FontFlags.Serif);if(!n&&!i.isSimulatedFlags){const e=t.replace(/[,_]/g,"-").split("-")[0],i=(0,c.getSerifFonts)();for(const t of e.split("+"))if(i[t]){n=!0;break}}this.isSerifFont=n,this.isSymbolicFont=!!(i.flags&o.FontFlags.Symbolic),this.isMonospace=!!(i.flags&o.FontFlags.FixedPitch);let s=i.type,a=i.subtype;this.type=s,this.subtype=a;let l,h="sans-serif";if(this.isMonospace?h="monospace":this.isSerifFont&&(h="serif"),this.fallbackName=h,this.differences=i.differences,this.widths=i.widths,this.defaultWidth=i.defaultWidth,this.composite=i.composite,this.cMap=i.cMap,this.capHeight=i.capHeight/x,this.ascent=i.ascent/x,this.descent=i.descent/x,this.lineHeight=this.ascent-this.descent,this.fontMatrix=i.fontMatrix,this.bbox=i.bbox,this.defaultEncoding=i.defaultEncoding,this.toUnicode=i.toUnicode,this.toFontChar=[],"Type3"!==i.type){if(this.cidEncoding=i.cidEncoding||"",this.vertical=!!i.vertical,this.vertical&&(this.vmetrics=i.vmetrics,this.defaultVMetrics=i.defaultVMetrics),!e||e.isEmpty)return e&&(0,r.warn)('Font file is empty in "'+t+'" ('+this.loadedName+")"),void this.fallbackToSystemFont(i);[s,a]=D(e,i),s===this.type&&a===this.subtype||(0,r.info)(`Inconsistent font file Type/SubType, expected: ${this.type}/${this.subtype} but found: ${s}/${a}.`);try{switch(s){case"MMType1":(0,r.info)("MMType1 font ("+t+"), falling back to Type1.");case"Type1":case"CIDFontType0":this.mimetype="font/opentype";const n="Type1C"===a||"CIDFontType0C"===a?new u.CFFFont(e,i):new b.Type1Font(t,e,i);C(i),l=this.convert(t,n,i);break;case"OpenType":case"TrueType":case"CIDFontType2":this.mimetype="font/opentype",l=this.checkAndRepair(t,e,i),this.isOpenType&&(C(i),s="OpenType");break;default:throw new r.FormatError(`Font ${s} is not supported`)}}catch(t){return(0,r.warn)(t),void this.fallbackToSystemFont(i)}A(i),this.data=l,this.fontType=(0,o.getFontType)(s,a,i.isStandardFont),this.fontMatrix=i.fontMatrix,this.widths=i.widths,this.defaultWidth=i.defaultWidth,this.toUnicode=i.toUnicode,this.seacMap=i.seacMap}else{for(let t=0;t<256;t++)this.toFontChar[t]=this.differences[t]||i.defaultEncoding[t];this.fontType=r.FontType.TYPE3}}get renderer(){const t=p.FontRendererFactory.create(this,o.SEAC_ANALYSIS_ENABLED);return(0,r.shadow)(this,"renderer",t)}exportData(t=!1){const e=t?[...S,...k]:S,i=Object.create(null);let r,n;for(r of e)n=this[r],void 0!==n&&(i[r]=n);return i}fallbackToSystemFont(t){this.missingFile=!0;const e=this.name,i=this.type,n=this.subtype;let u=(0,o.normalizeFontName)(e);const p=(0,c.getStdFontMap)(),f=(0,c.getNonStdFontMap)(),g=!!p[u],m=!(!f[u]||!p[f[u]]);u=p[u]||f[u]||u;const y=(0,d.getFontBasicMetrics)()[u];y&&(isNaN(this.ascent)&&(this.ascent=y.ascent/x),isNaN(this.descent)&&(this.descent=y.descent/x),isNaN(this.capHeight)&&(this.capHeight=y.capHeight/x)),this.bold=-1!==u.search(/bold/gi),this.italic=-1!==u.search(/oblique/gi)||-1!==u.search(/italic/gi),this.black=-1!==e.search(/Black/g);const v=-1!==e.search(/Narrow/g);if(this.remeasure=(!g||v)&&Object.keys(this.widths).length>0,(g||m)&&"CIDFontType2"===i&&this.cidEncoding.startsWith("Identity-")){const i=t.cidToGidMap,r=[];if(F(r,(0,c.getGlyphMapForStandardFonts)()),/Arial-?Black/i.test(e)?F(r,(0,c.getSupplementalGlyphMapForArialBlack)()):/Calibri/i.test(e)&&F(r,(0,c.getSupplementalGlyphMapForCalibri)()),i){for(const t in r){const e=r[t];void 0!==i[e]&&(r[+t]=i[e])}i.length!==this.toUnicode.length&&t.hasIncludedToUnicodeMap&&this.toUnicode instanceof h.IdentityToUnicodeMap&&this.toUnicode.forEach((function(t,e){const n=r[t];void 0===i[n]&&(r[+t]=e)}))}this.toUnicode instanceof h.IdentityToUnicodeMap||this.toUnicode.forEach((function(t,e){r[+t]=e})),this.toFontChar=r,this.toUnicode=new h.ToUnicodeMap(r)}else if(/Symbol/i.test(u))this.toFontChar=R(l.SymbolSetEncoding,(0,a.getGlyphsUnicode)(),this.differences);else if(/Dingbats/i.test(u))/Wingdings/i.test(e)&&(0,r.warn)("Non-embedded Wingdings font, falling back to ZapfDingbats."),this.toFontChar=R(l.ZapfDingbatsEncoding,(0,a.getDingbatsGlyphsUnicode)(),this.differences);else if(g){const t=R(this.defaultEncoding,(0,a.getGlyphsUnicode)(),this.differences);"CIDFontType2"!==i||this.cidEncoding.startsWith("Identity-")||this.toUnicode instanceof h.IdentityToUnicodeMap||this.toUnicode.forEach((function(e,i){t[+e]=i})),this.toFontChar=t}else{const t=(0,a.getGlyphsUnicode)(),i=[];this.toUnicode.forEach(((e,r)=>{if(!this.composite){const i=this.differences[e]||this.defaultEncoding[e],n=(0,s.getUnicodeForGlyph)(i,t);-1!==n&&(r=n)}i[+e]=r})),this.composite&&this.toUnicode instanceof h.IdentityToUnicodeMap&&/Verdana/i.test(e)&&F(i,(0,c.getGlyphMapForStandardFonts)()),this.toFontChar=i}A(t),this.loadedName=u.split("-")[0],this.fontType=(0,o.getFontType)(i,n,t.isStandardFont)}checkAndRepair(t,e,i){const s=["OS/2","cmap","head","hhea","hmtx","maxp","name","post","loca","glyf","fpgm","prep","cvt ","CFF "];function c(t,e){const i=Object.create(null);i["OS/2"]=null,i.cmap=null,i.head=null,i.hhea=null,i.hmtx=null,i.maxp=null,i.name=null,i.post=null;for(let r=0;r<e;r++){const e=p(t);s.includes(e.tag)&&0!==e.length&&(i[e.tag]=e)}return i}function p(t){const e=t.getString(4),i=t.getInt32()>>>0,r=t.getInt32()>>>0,n=t.getInt32()>>>0,o=t.pos;t.pos=t.start?t.start:0,t.skip(r);const s=t.getBytes(n);return t.pos=o,"head"===e&&(s[8]=s[9]=s[10]=s[11]=0,s[17]|=32),{tag:e,checksum:i,length:n,offset:r,data:s}}function d(t){return{version:t.getString(4),numTables:t.getUint16(),searchRange:t.getUint16(),entrySelector:t.getUint16(),rangeShift:t.getUint16()}}function y(t,e,i,r,n,o){const s={length:0,sizeOfInstructions:0};if(i-e<=12)return s;const a=t.subarray(e,i);let l=E(a[0],a[1]);if(l<0)return l=-1,O(a,0,l),r.set(a,n),s.length=a.length,s;let c,h=10,u=0;for(c=0;c<l;c++)u=1+(a[h]<<8|a[h+1]),h+=2;const p=h,d=a[h]<<8|a[h+1];s.sizeOfInstructions=d,h+=2+d;const f=h;let g=0;for(c=0;c<u;c++){const t=a[h++];192&t&&(a[h-1]=63&t);let e=2;2&t?e=1:16&t&&(e=0);let i=2;4&t?i=1:32&t&&(i=0);const r=e+i;if(g+=r,8&t){const t=a[h++];c+=t,g+=t*r}}if(0===g)return s;let m=h+g;return m>a.length?s:!o&&d>0?(r.set(a.subarray(0,p),n),r.set([0,0],n+p),r.set(a.subarray(f,m),n+p+2),m-=d,a.length-m>3&&(m=m+3&-4),s.length=m,s):a.length-m>3?(m=m+3&-4,r.set(a.subarray(0,m),n),s.length=m,s):(r.set(a,n),s.length=a.length,s)}function b(t){const i=(e.start?e.start:0)+t.offset;e.pos=i;const r=[[],[]],n=t.length,o=i+n;if(0!==e.getUint16()||n<6)return r;const s=e.getUint16(),a=e.getUint16(),l=[];let c,h;for(c=0;c<s&&e.pos+12<=o;c++){const t={platform:e.getUint16(),encoding:e.getUint16(),language:e.getUint16(),name:e.getUint16(),length:e.getUint16(),offset:e.getUint16()};(1===t.platform&&0===t.encoding&&0===t.language||3===t.platform&&1===t.encoding&&1033===t.language)&&l.push(t)}for(c=0,h=l.length;c<h;c++){const t=l[c];if(t.length<=0)continue;const n=i+a+t.offset;if(n+t.length>o)continue;e.pos=n;const s=t.name;if(t.encoding){let i="";for(let r=0,n=t.length;r<n;r+=2)i+=String.fromCharCode(e.getUint16());r[1][s]=i}else r[0][s]=e.getString(t.length)}return r}const w=[0,0,0,0,0,0,0,0,-2,-2,-2,-2,0,0,-2,-5,-1,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,-1,-1,1,-1,-999,0,1,0,-1,-2,0,-1,-2,-1,-1,0,-1,-1,0,0,-999,-999,-1,-1,-1,-1,-2,-999,-2,-2,-999,0,-2,-2,0,0,-2,0,-2,0,0,0,-2,-1,-1,1,1,0,0,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,0,-999,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,0,0,0,-2,-999,-999,-999,-999,-999,-1,-1,-2,-2,0,0,0,0,-1,-1,-999,-2,-2,0,0,-1,-2,-2,0,0,0,-1,-1,-1,-2];function x(t,e){let i,n,o,s,a,l=t.data,c=0,h=0,u=0;const p=[],d=[],f=[];let g=e.tooComplexToFollowFunctions,m=!1,y=0,v=0;for(let t=l.length;c<t;){const t=l[c++];if(64===t)if(n=l[c++],m||v)c+=n;else for(i=0;i<n;i++)p.push(l[c++]);else if(65===t)if(n=l[c++],m||v)c+=2*n;else for(i=0;i<n;i++)o=l[c++],p.push(o<<8|l[c++]);else if(176==(248&t))if(n=t-176+1,m||v)c+=n;else for(i=0;i<n;i++)p.push(l[c++]);else if(184==(248&t))if(n=t-184+1,m||v)c+=2*n;else for(i=0;i<n;i++)o=l[c++],p.push(o<<8|l[c++]);else if(43!==t||g)if(44!==t||g){if(45===t)if(m)m=!1,h=c;else{if(a=d.pop(),!a)return(0,r.warn)("TT: ENDF bad stack"),void(e.hintsValid=!1);s=f.pop(),l=a.data,c=a.i,e.functionsStackDeltas[s]=p.length-a.stackTop}else if(137===t)(m||v)&&((0,r.warn)("TT: nested IDEFs not allowed"),g=!0),m=!0,u=c;else if(88===t)++y;else if(27===t)v=y;else if(89===t)v===y&&(v=0),--y;else if(28===t&&!m&&!v){const t=p[p.length-1];t>0&&(c+=t-1)}}else(m||v)&&((0,r.warn)("TT: nested FDEFs not allowed"),g=!0),m=!0,u=c,s=p.pop(),e.functionsDefined[s]={data:l,i:c};else if(!m&&!v)if(s=p[p.length-1],isNaN(s))(0,r.info)("TT: CALL empty stack (or invalid entry).");else if(e.functionsUsed[s]=!0,s in e.functionsStackDeltas){const t=p.length+e.functionsStackDeltas[s];if(t<0)return(0,r.warn)("TT: CALL invalid functions stack delta."),void(e.hintsValid=!1);p.length=t}else if(s in e.functionsDefined&&!f.includes(s)){if(d.push({data:l,i:c,stackTop:p.length-1}),f.push(s),a=e.functionsDefined[s],!a)return(0,r.warn)("TT: CALL non-existent function"),void(e.hintsValid=!1);l=a.data,c=a.i}if(!m&&!v){let e=0;for(t<=142?e=w[t]:t>=192&&t<=223?e=-1:t>=224&&(e=-2),t>=113&&t<=117&&(n=p.pop(),isNaN(n)||(e=2*-n));e<0&&p.length>0;)p.pop(),e++;for(;e>0;)p.push(NaN),e--}}e.tooComplexToFollowFunctions=g;const b=[l];c>l.length&&b.push(new Uint8Array(c-l.length)),u>h&&((0,r.warn)("TT: complementing a missing function tail"),b.push(new Uint8Array([34,45]))),function(t,e){if(e.length>1){let i,r,n=0;for(i=0,r=e.length;i<r;i++)n+=e[i].length;n=n+3&-4;const o=new Uint8Array(n);let s=0;for(i=0,r=e.length;i<r;i++)o.set(e[i],s),s+=e[i].length;t.data=o,t.length=n}}(t,b)}let S,k,A,_;if(I(e=new v.Stream(new Uint8Array(e.getBytes())))){const t=function(t,e){const{numFonts:i,offsetTable:n}=function(t){const e=t.getString(4);(0,r.assert)("ttcf"===e,"Must be a TrueType Collection font.");const i=t.getUint16(),n=t.getUint16(),o=t.getInt32()>>>0,s=[];for(let e=0;e<o;e++)s.push(t.getInt32()>>>0);const a={ttcTag:e,majorVersion:i,minorVersion:n,numFonts:o,offsetTable:s};switch(i){case 1:return a;case 2:return a.dsigTag=t.getInt32()>>>0,a.dsigLength=t.getInt32()>>>0,a.dsigOffset=t.getInt32()>>>0,a}throw new r.FormatError(`Invalid TrueType Collection majorVersion: ${i}.`)}(t),o=e.split("+");let s;for(let a=0;a<i;a++){t.pos=(t.start||0)+n[a];const i=d(t),l=c(t,i.numTables);if(!l.name)throw new r.FormatError('TrueType Collection font must contain a "name" table.');const h=b(l.name);for(let t=0,r=h.length;t<r;t++)for(let r=0,n=h[t].length;r<n;r++){const n=h[t][r]&&h[t][r].replace(/\s/g,"");if(n){if(n===e)return{header:i,tables:l};if(!(o.length<2))for(const t of o)n===t&&(s={name:t,header:i,tables:l})}}}if(s)return(0,r.warn)(`TrueType Collection does not contain "${e}" font, falling back to "${s.name}" font instead.`),{header:s.header,tables:s.tables};throw new r.FormatError(`TrueType Collection does not contain "${e}" font.`)}(e,this.name);S=t.header,k=t.tables}else S=d(e),k=c(e,S.numTables);const M=!k["CFF "];if(M){if(!k.loca)throw new r.FormatError('Required "loca" table is not found');k.glyf||((0,r.warn)('Required "glyf" table is not found -- trying to recover.'),k.glyf={tag:"glyf",data:new Uint8Array(0)}),this.isOpenType=!1}else{const e=i.composite&&((i.cidToGidMap||[]).length>0||!(i.cMap instanceof g.IdentityCMap));if("OTTO"===S.version&&!e||!k.head||!k.hhea||!k.maxp||!k.post)return _=new v.Stream(k["CFF "].data),A=new u.CFFFont(_,i),C(i),this.convert(t,A,i);delete k.glyf,delete k.loca,delete k.fpgm,delete k.prep,delete k["cvt "],this.isOpenType=!0}if(!k.maxp)throw new r.FormatError('Required "maxp" table is not found');e.pos=(e.start||0)+k.maxp.offset;const P=e.getInt32(),D=e.getUint16();if(i.scaleFactors&&i.scaleFactors.length===D&&M){const{scaleFactors:t}=i,e=T(k.head.data[50],k.head.data[51]),r=new f.GlyfTable({glyfTable:k.glyf.data,isGlyphLocationsLong:e,locaTable:k.loca.data,numGlyphs:D});r.scale(t);const{glyf:n,loca:o,isLocationLong:s}=r.write();k.glyf.data=n,k.loca.data=o,s!==!!e&&(k.head.data[50]=0,k.head.data[51]=s?1:0);const a=k.hmtx.data;for(let e=0;e<D;e++){const i=4*e,r=Math.round(t[e]*T(a[i],a[i+1]));a[i]=r>>8&255,a[i+1]=255&r,O(a,i+2,Math.round(t[e]*E(a[i+2],a[i+3])))}}let F=D+1,R=!0;F>65535&&(R=!1,F=D,(0,r.warn)("Not enough space in glyfs to duplicate first glyph."));let U=0,H=0;P>=65536&&k.maxp.length>=22&&(e.pos+=8,e.getUint16()>2&&(k.maxp.data[14]=0,k.maxp.data[15]=2),e.pos+=4,U=e.getUint16(),e.pos+=4,H=e.getUint16()),k.maxp.data[4]=F>>8,k.maxp.data[5]=255&F;const V=function(t,e,i,n){const o={functionsDefined:[],functionsUsed:[],functionsStackDeltas:[],tooComplexToFollowFunctions:!1,hintsValid:!0};if(t&&x(t,o),e&&x(e,o),t&&function(t,e){if(!t.tooComplexToFollowFunctions){if(t.functionsDefined.length>e)return(0,r.warn)("TT: more functions defined than expected"),void(t.hintsValid=!1);for(let i=0,n=t.functionsUsed.length;i<n;i++){if(i>e)return(0,r.warn)("TT: invalid function id: "+i),void(t.hintsValid=!1);if(t.functionsUsed[i]&&!t.functionsDefined[i])return(0,r.warn)("TT: undefined function: "+i),void(t.hintsValid=!1)}}}(o,n),i&&1&i.length){const t=new Uint8Array(i.length+1);t.set(i.data),i.data=t}return o.hintsValid}(k.fpgm,k.prep,k["cvt "],U);if(V||(delete k.fpgm,delete k.prep,delete k["cvt "]),function(t,e,i,n,o,s){if(!e)return void(i&&(i.data=null));t.pos=(t.start?t.start:0)+e.offset,t.pos+=4,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2;const a=t.getUint16();t.pos+=8,t.pos+=2;let l=t.getUint16();0!==a&&(2&T(n.data[44],n.data[45])||(e.data[22]=0,e.data[23]=0)),l>o&&((0,r.info)(`The numOfMetrics (${l}) should not be greater than the numGlyphs (${o}).`),l=o,e.data[34]=(65280&l)>>8,e.data[35]=255&l);const c=o-l-(i.length-4*l>>1);if(c>0){const t=new Uint8Array(i.length+2*c);t.set(i.data),s&&(t[i.length]=i.data[2],t[i.length+1]=i.data[3]),i.data=t}}(e,k.hhea,k.hmtx,k.head,F,R),!k.head)throw new r.FormatError('Required "head" table is not found');!function(t,e,i){const n=t.data,o=(s=n[0],a=n[1],l=n[2],c=n[3],(s<<24)+(a<<16)+(l<<8)+c);var s,a,l,c;o>>16!=1&&((0,r.info)("Attempting to fix invalid version in head table: "+o),n[0]=0,n[1]=1,n[2]=0,n[3]=0);const h=T(n[50],n[51]);if(h<0||h>1){(0,r.info)("Attempting to fix invalid indexToLocFormat in head table: "+h);const t=e+1;if(i===t<<1)n[50]=0,n[51]=0;else{if(i!==t<<2)throw new r.FormatError("Could not fix indexToLocFormat: "+h);n[50]=0,n[51]=1}}}(k.head,D,M?k.loca.length:0);let q=Object.create(null);if(M){const t=T(k.head.data[50],k.head.data[51]),e=function(t,e,i,r,n,o,s){let a,l,c;r?(a=4,l=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]},c=function(t,e,i){t[e]=i>>>24&255,t[e+1]=i>>16&255,t[e+2]=i>>8&255,t[e+3]=255&i}):(a=2,l=function(t,e){return t[e]<<9|t[e+1]<<1},c=function(t,e,i){t[e]=i>>9&255,t[e+1]=i>>1&255});const h=o?i+1:i,u=a*(1+h),p=new Uint8Array(u);p.set(t.data.subarray(0,u)),t.data=p;const d=e.data,f=d.length,g=new Uint8Array(f);let m,v;const b=[];for(m=0,v=0;m<i+1;m++,v+=a){let t=l(p,v);t>f&&(t=f),b.push({index:m,offset:t,endOffset:0})}for(b.sort(((t,e)=>t.offset-e.offset)),m=0;m<i;m++)b[m].endOffset=b[m+1].offset;for(b.sort(((t,e)=>t.index-e.index)),m=0;m<i;m++){const{offset:t,endOffset:e}=b[m];if(0!==t||0!==e)break;const i=b[m+1].offset;if(0!==i){b[m].endOffset=i;break}}const w=Object.create(null);let x=0;for(c(p,0,x),m=0,v=a;m<i;m++,v+=a){const t=y(d,b[m].offset,b[m].endOffset,g,x,n),e=t.length;0===e&&(w[m]=!0),t.sizeOfInstructions>s&&(s=t.sizeOfInstructions),x+=e,c(p,v,x)}if(0===x){const t=new Uint8Array([0,1,0,0,0,0,0,0,0,0,0,0,0,0,49,0]);for(m=0,v=a;m<h;m++,v+=a)c(p,v,t.length);e.data=t}else if(o){const i=l(p,a);g.length>i+x?e.data=g.subarray(0,i+x):(e.data=new Uint8Array(i+x),e.data.set(g.subarray(0,x))),e.data.set(g.subarray(0,i),x),c(t.data,p.length-a,x+i)}else e.data=g.subarray(0,x);return{missingGlyphs:w,maxSizeOfInstructions:s}}(k.loca,k.glyf,D,t,V,R,H);q=e.missingGlyphs,P>=65536&&k.maxp.length>=22&&(k.maxp.data[26]=e.maxSizeOfInstructions>>8,k.maxp.data[27]=255&e.maxSizeOfInstructions)}if(!k.hhea)throw new r.FormatError('Required "hhea" table is not found');0===k.hhea.data[10]&&0===k.hhea.data[11]&&(k.hhea.data[10]=255,k.hhea.data[11]=255);const W={unitsPerEm:T(k.head.data[18],k.head.data[19]),yMax:T(k.head.data[42],k.head.data[43]),yMin:E(k.head.data[38],k.head.data[39]),ascent:E(k.hhea.data[4],k.hhea.data[5]),descent:E(k.hhea.data[6],k.hhea.data[7]),lineGap:E(k.hhea.data[8],k.hhea.data[9])};this.ascent=W.ascent/W.unitsPerEm,this.descent=W.descent/W.unitsPerEm,this.lineGap=W.lineGap/W.unitsPerEm,this.cssFontInfo&&this.cssFontInfo.lineHeight?(this.lineHeight=this.cssFontInfo.metrics.lineHeight,this.lineGap=this.cssFontInfo.metrics.lineGap):this.lineHeight=this.ascent-this.descent+this.lineGap,k.post&&function(t,i,n){const s=(e.start?e.start:0)+t.offset;e.pos=s;const a=s+t.length,l=e.getInt32();let c;e.skip(28);let h,u=!0;switch(l){case 65536:c=o.MacStandardGlyphOrdering;break;case 131072:const t=e.getUint16();if(t!==n){u=!1;break}const s=[];for(h=0;h<t;++h){const t=e.getUint16();if(t>=32768){u=!1;break}s.push(t)}if(!u)break;const p=[],d=[];for(;e.pos<a;){const t=e.getByte();for(d.length=t,h=0;h<t;++h)d[h]=String.fromCharCode(e.getByte());p.push(d.join(""))}for(c=[],h=0;h<t;++h){const t=s[h];t<258?c.push(o.MacStandardGlyphOrdering[t]):c.push(p[t-258])}break;case 196608:break;default:(0,r.warn)("Unknown/unsupported post table version "+l),u=!1,i.defaultEncoding&&(c=i.defaultEncoding)}i.glyphNames=c}(k.post,i,D),k.post={tag:"post",data:z(i)};const X=[];function G(t){return!q[t]}if(i.composite){const t=i.cidToGidMap||[],e=0===t.length;i.cMap.forEach((function(i,n){if("string"==typeof n&&(n=L(i,n,!0)),n>65535)throw new r.FormatError("Max size of CID is 65,535");let o=-1;e?o=n:void 0!==t[n]&&(o=t[n]),o>=0&&o<D&&G(o)&&(X[i]=o)}))}else{const t=function(t,e,i,n){if(!t)return(0,r.warn)("No cmap table available."),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};let o,s=(e.start?e.start:0)+t.offset;e.pos=s,e.skip(2);const a=e.getUint16();let l,c=!1;for(let t=0;t<a;t++){const r=e.getUint16(),o=e.getUint16(),s=e.getInt32()>>>0;let h=!1;if(!l||l.platformId!==r||l.encodingId!==o){if(0!==r||0!==o&&1!==o&&3!==o)if(1===r&&0===o)h=!0;else if(3!==r||1!==o||!n&&l){if(i&&3===r&&0===o){h=!0;let i=!0;if(t<a-1){const t=e.peekBytes(2);T(t[0],t[1])<r&&(i=!1)}i&&(c=!0)}}else h=!0,i||(c=!0);else h=!0;if(h&&(l={platformId:r,encodingId:o,offset:s}),c)break}}if(l&&(e.pos=s+l.offset),!l||-1===e.peekByte())return(0,r.warn)("Could not find a preferred cmap table."),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};const h=e.getUint16();let u=!1;const p=[];let d,f;if(0===h){for(e.skip(4),d=0;d<256;d++){const t=e.getByte();t&&p.push({charCode:d,glyphId:t})}u=!0}else if(2===h){e.skip(4);const t=[];let i=0;for(let r=0;r<256;r++){const r=e.getUint16()>>3;t.push(r),i=Math.max(r,i)}const r=[];for(let t=0;t<=i;t++)r.push({firstCode:e.getUint16(),entryCount:e.getUint16(),idDelta:E(e.getByte(),e.getByte()),idRangePos:e.pos+e.getUint16()});for(let i=0;i<256;i++)if(0===t[i])e.pos=r[0].idRangePos+2*i,f=e.getUint16(),p.push({charCode:i,glyphId:f});else{const n=r[t[i]];for(d=0;d<n.entryCount;d++){const t=(i<<8)+d+n.firstCode;e.pos=n.idRangePos+2*d,f=e.getUint16(),0!==f&&(f=(f+n.idDelta)%65536),p.push({charCode:t,glyphId:f})}}}else if(4===h){e.skip(4);const t=e.getUint16()>>1;e.skip(6);const i=[];let r;for(r=0;r<t;r++)i.push({end:e.getUint16()});for(e.skip(2),r=0;r<t;r++)i[r].start=e.getUint16();for(r=0;r<t;r++)i[r].delta=e.getUint16();let n,a=0;for(r=0;r<t;r++){o=i[r];const s=e.getUint16();s?(n=(s>>1)-(t-r),o.offsetIndex=n,a=Math.max(a,n+o.end-o.start+1)):o.offsetIndex=-1}const l=[];for(d=0;d<a;d++)l.push(e.getUint16());for(r=0;r<t;r++){o=i[r],s=o.start;const t=o.end,e=o.delta;for(n=o.offsetIndex,d=s;d<=t;d++)65535!==d&&(f=n<0?d:l[n+d-s],f=f+e&65535,p.push({charCode:d,glyphId:f}))}}else if(6===h){e.skip(4);const t=e.getUint16(),i=e.getUint16();for(d=0;d<i;d++){f=e.getUint16();const i=t+d;p.push({charCode:i,glyphId:f})}}else{if(12!==h)return(0,r.warn)("cmap table has unsupported format: "+h),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};{e.skip(10);const t=e.getInt32()>>>0;for(d=0;d<t;d++){const t=e.getInt32()>>>0,i=e.getInt32()>>>0;let r=e.getInt32()>>>0;for(let e=t;e<=i;e++)p.push({charCode:e,glyphId:r++})}}}p.sort((function(t,e){return t.charCode-e.charCode}));for(let t=1;t<p.length;t++)p[t-1].charCode===p[t].charCode&&(p.splice(t,1),t--);return{platformId:l.platformId,encodingId:l.encodingId,mappings:p,hasShortCmap:u}}(k.cmap,e,this.isSymbolicFont,i.hasEncoding),n=t.platformId,s=t.encodingId,c=t.mappings,u=c.length;let p=[],d=!1;if(!i.hasEncoding||"MacRomanEncoding"!==i.baseEncodingName&&"WinAnsiEncoding"!==i.baseEncodingName||(p=(0,l.getEncoding)(i.baseEncodingName)),i.hasEncoding&&!this.isSymbolicFont&&(3===n&&1===s||1===n&&0===s)){const t=(0,a.getGlyphsUnicode)();for(let e=0;e<256;e++){let r;if(r=void 0!==this.differences[e]?this.differences[e]:p.length&&""!==p[e]?p[e]:l.StandardEncoding[e],!r)continue;const a=(0,o.recoverGlyphName)(r,t);let d;if(3===n&&1===s?d=t[a]:1===n&&0===s&&(d=l.MacRomanEncoding.indexOf(a)),void 0===d){if(!i.glyphNames&&i.hasIncludedToUnicodeMap&&!(this.toUnicode instanceof h.IdentityToUnicodeMap)){const t=this.toUnicode.get(e);t&&(d=t.codePointAt(0))}if(void 0===d)continue}for(let t=0;t<u;++t)if(c[t].charCode===d){X[e]=c[t].glyphId;break}}}else if(0===n){for(let t=0;t<u;++t)X[c[t].charCode]=c[t].glyphId;d=!0}else for(let t=0;t<u;++t){let e=c[t].charCode;3===n&&e>=61440&&e<=61695&&(e&=255),X[e]=c[t].glyphId}if(i.glyphNames&&(p.length||this.differences.length))for(let t=0;t<256;++t){if(!d&&void 0!==X[t])continue;const e=this.differences[t]||p[t];if(!e)continue;const r=i.glyphNames.indexOf(e);r>0&&G(r)&&(X[t]=r)}}0===X.length&&(X[0]=0);let K=F-1;if(R||(K=0),!i.cssFontInfo){const t=N(X,G,K);this.toFontChar=t.toFontChar,k.cmap={tag:"cmap",data:B(t.charCodeToGlyphId,F)},k["OS/2"]&&function(t,e){e.pos=(e.start||0)+t.offset;const i=e.getUint16();e.skip(60);const r=e.getUint16();return!(i<4&&768&r||e.getUint16()>e.getUint16()||(e.skip(6),0===e.getUint16()||(t.data[8]=t.data[9]=0,0)))}(k["OS/2"],e)||(k["OS/2"]={tag:"OS/2",data:j(i,t.charCodeToGlyphId,W)})}if(!M)try{_=new v.Stream(k["CFF "].data),A=new n.CFFParser(_,i,o.SEAC_ANALYSIS_ENABLED).parse(),A.duplicateFirstGlyph();const t=new n.CFFCompiler(A);k["CFF "].data=t.compile()}catch(t){(0,r.warn)("Failed to compile font "+i.loadedName)}if(k.name){const e=b(k.name);k.name.data=$(t,e),this.psName=e[0][6]||null}else k.name={tag:"name",data:$(this.name)};const Y=new m.OpenTypeFileBuilder(S.version);for(const t in k)Y.addTable(t,k[t].data);return Y.toArray()}convert(t,e,i){i.fixedPitch=!1,i.builtInEncoding&&function(t,e){if(t.isInternalFont)return;if(e===t.defaultEncoding)return;if(t.toUnicode instanceof h.IdentityToUnicodeMap)return;const i=[],r=(0,a.getGlyphsUnicode)();for(const n in e){if(t.hasIncludedToUnicodeMap){if(t.toUnicode.has(n))continue}else if(t.hasEncoding&&(0===t.differences.length||void 0!==t.differences[n]))continue;const o=e[n],a=(0,s.getUnicodeForGlyph)(o,r);-1!==a&&(i[n]=String.fromCharCode(a))}i.length>0&&t.toUnicode.amend(i)}(i,i.builtInEncoding);let n=1;e instanceof u.CFFFont&&(n=e.numGlyphs-1);const c=e.getGlyphMapping(i);let p=null,d=c;i.cssFontInfo||(p=N(c,e.hasGlyphId.bind(e),n),this.toFontChar=p.toFontChar,d=p.charCodeToGlyphId);const f=e.numGlyphs;function g(t,e){let i=null;for(const r in t)e===t[r]&&(i||(i=[]),i.push(0|r));return i}function y(t,e){for(const i in t)if(e===t[i])return 0|i;return p.charCodeToGlyphId[p.nextAvailableFontCharCode]=e,p.nextAvailableFontCharCode++}const v=e.seacs;if(p&&o.SEAC_ANALYSIS_ENABLED&&v&&v.length){const t=i.fontMatrix||r.FONT_IDENTITY_MATRIX,n=e.getCharset(),o=Object.create(null);for(let e in v){e|=0;const i=v[e],r=l.StandardEncoding[i[2]],s=l.StandardEncoding[i[3]],a=n.indexOf(r),h=n.indexOf(s);if(a<0||h<0)continue;const u={x:i[0]*t[0]+i[1]*t[2]+t[4],y:i[0]*t[1]+i[1]*t[3]+t[5]},d=g(c,e);if(d)for(let t=0,e=d.length;t<e;t++){const e=d[t],i=p.charCodeToGlyphId,r=y(i,a),n=y(i,h);o[e]={baseFontCharCode:r,accentFontCharCode:n,accentOffset:u}}}i.seacMap=o}const b=1/(i.fontMatrix||r.FONT_IDENTITY_MATRIX)[0],w=new m.OpenTypeFileBuilder("OTTO");return w.addTable("CFF ",e.data),w.addTable("OS/2",j(i,d)),w.addTable("cmap",B(d,f)),w.addTable("head","\0\0\0\0\0\0\0\0\0\0_<õ\0\0"+P(b)+"\0\0\0\0\v~'\0\0\0\0\v~'\0\0"+P(i.descent)+"ÿ"+P(i.ascent)+M(i.italicAngle?2:0)+"\0\0\0\0\0\0\0"),w.addTable("hhea","\0\0\0"+P(i.ascent)+P(i.descent)+"\0\0ÿÿ\0\0\0\0\0\0"+P(i.capHeight)+P(Math.tan(i.italicAngle)*i.xHeight)+"\0\0\0\0\0\0\0\0\0\0\0\0"+M(f)),w.addTable("hmtx",function(){const t=e.charstrings,i=e.cff?e.cff.widths:null;let r="\0\0\0\0";for(let e=1,n=f;e<n;e++){let n=0;if(t){const i=t[e-1];n="width"in i?i.width:0}else i&&(n=Math.ceil(i[e]||0));r+=M(n)+M(0)}return r}()),w.addTable("maxp","\0\0P\0"+M(f)),w.addTable("name",$(t)),w.addTable("post",z(i)),w.toArray()}get spaceWidth(){const t=["space","minus","one","i","I"];let e;for(let i=0,r=t.length;i<r;i++){const r=t[i];if(r in this.widths){e=this.widths[r];break}const n=(0,a.getGlyphsUnicode)()[r];let o=0;if(this.composite&&this.cMap.contains(n)&&(o=this.cMap.lookup(n),"string"==typeof o&&(o=L(n,o))),!o&&this.toUnicode&&(o=this.toUnicode.charCodeOf(n)),o<=0&&(o=n),e=this.widths[o],e)break}return e=e||this.defaultWidth,(0,r.shadow)(this,"spaceWidth",e)}_charToGlyph(t,e=!1){let i,n,o,a=t;this.cMap&&this.cMap.contains(t)&&(a=this.cMap.lookup(t),"string"==typeof a&&(a=L(t,a))),n=this.widths[a],"number"!=typeof n&&(n=this.defaultWidth);const l=this.vmetrics&&this.vmetrics[a];let c=this.toUnicode.get(t)||t;"number"==typeof c&&(c=String.fromCharCode(c));let h=void 0!==this.toFontChar[t];if(i=this.toFontChar[t]||t,this.missingFile){const e=this.differences[t]||this.defaultEncoding[t];".notdef"!==e&&""!==e||"Type1"!==this.type||(i=32),i=(0,s.mapSpecialUnicodeValues)(i)}this.isType3Font&&(o=i);let u=null;if(this.seacMap&&this.seacMap[t]){h=!0;const e=this.seacMap[t];i=e.baseFontCharCode,u={fontChar:String.fromCodePoint(e.accentFontCharCode),offset:e.accentOffset}}let p="";"number"==typeof i&&(i<=1114111?p=String.fromCodePoint(i):(0,r.warn)(`charToGlyph - invalid fontCharCode: ${i}`));let d=this._glyphCache[t];return d&&d.matchesForCache(t,p,c,u,n,l,o,e,h)||(d=new _(t,p,c,u,n,l,o,e,h),this._glyphCache[t]=d),d}charsToGlyphs(t){let e=this._charsCache[t];if(e)return e;if(e=[],this.cMap){const i=Object.create(null),r=t.length;let n=0;for(;n<r;){this.cMap.readCharCode(t,n,i);const{charcode:r,length:o}=i;n+=o;const s=this._charToGlyph(r,1===o&&32===t.charCodeAt(n-1));e.push(s)}}else for(let i=0,r=t.length;i<r;++i){const r=t.charCodeAt(i),n=this._charToGlyph(r,32===r);e.push(n)}return this._charsCache[t]=e}getCharPositions(t){const e=[];if(this.cMap){const i=Object.create(null);let r=0;for(;r<t.length;){this.cMap.readCharCode(t,r,i);const n=i.length;e.push([r,r+n]),r+=n}}else for(let i=0,r=t.length;i<r;++i)e.push([i,i+1]);return e}get glyphCacheValues(){return Object.values(this._glyphCache)}encodeString(t){const e=[],i=[],r=()=>e.length%2==1,n=this.toUnicode instanceof h.IdentityToUnicodeMap?t=>this.toUnicode.charCodeOf(t):t=>this.toUnicode.charCodeOf(String.fromCodePoint(t));for(let o=0,s=t.length;o<s;o++){const s=t.codePointAt(o);if(s>55295&&(s<57344||s>65533)&&o++,this.toUnicode){const t=n(s);if(-1!==t){r()&&(e.push(i.join("")),i.length=0);for(let e=(this.cMap?this.cMap.getCharCodeLength(t):1)-1;e>=0;e--)i.push(String.fromCharCode(t>>8*e&255));continue}}r()||(e.push(i.join("")),i.length=0),i.push(String.fromCodePoint(s))}return e.push(i.join("")),e}},e.ErrorFont=class{constructor(t){this.error=t,this.loadedName="g_font_error",this.missingFile=!0}charsToGlyphs(){return[]}encodeString(t){return[t]}exportData(t=!1){return{error:this.error}}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CFFTopDict=e.CFFStrings=e.CFFStandardStrings=e.CFFPrivateDict=e.CFFParser=e.CFFIndex=e.CFFHeader=e.CFFFDSelect=e.CFFCompiler=e.CFFCharset=e.CFF=void 0;var r=i(2),n=i(46),o=i(19);const s=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"];e.CFFStandardStrings=s;const a=391,l=function(){const t=[null,{id:"hstem",min:2,stackClearing:!0,stem:!0},null,{id:"vstem",min:2,stackClearing:!0,stem:!0},{id:"vmoveto",min:1,stackClearing:!0},{id:"rlineto",min:2,resetStack:!0},{id:"hlineto",min:1,resetStack:!0},{id:"vlineto",min:1,resetStack:!0},{id:"rrcurveto",min:6,resetStack:!0},null,{id:"callsubr",min:1,undefStack:!0},{id:"return",min:0,undefStack:!0},null,null,{id:"endchar",min:0,stackClearing:!0},null,null,null,{id:"hstemhm",min:2,stackClearing:!0,stem:!0},{id:"hintmask",min:0,stackClearing:!0},{id:"cntrmask",min:0,stackClearing:!0},{id:"rmoveto",min:2,stackClearing:!0},{id:"hmoveto",min:1,stackClearing:!0},{id:"vstemhm",min:2,stackClearing:!0,stem:!0},{id:"rcurveline",min:8,resetStack:!0},{id:"rlinecurve",min:8,resetStack:!0},{id:"vvcurveto",min:4,resetStack:!0},{id:"hhcurveto",min:4,resetStack:!0},null,{id:"callgsubr",min:1,undefStack:!0},{id:"vhcurveto",min:4,resetStack:!0},{id:"hvcurveto",min:4,resetStack:!0}],e=[null,null,null,{id:"and",min:2,stackDelta:-1},{id:"or",min:2,stackDelta:-1},{id:"not",min:1,stackDelta:0},null,null,null,{id:"abs",min:1,stackDelta:0},{id:"add",min:2,stackDelta:-1,stackFn:function(t,e){t[e-2]=t[e-2]+t[e-1]}},{id:"sub",min:2,stackDelta:-1,stackFn:function(t,e){t[e-2]=t[e-2]-t[e-1]}},{id:"div",min:2,stackDelta:-1,stackFn:function(t,e){t[e-2]=t[e-2]/t[e-1]}},null,{id:"neg",min:1,stackDelta:0,stackFn:function(t,e){t[e-1]=-t[e-1]}},{id:"eq",min:2,stackDelta:-1},null,null,{id:"drop",min:1,stackDelta:-1},null,{id:"put",min:2,stackDelta:-2},{id:"get",min:1,stackDelta:0},{id:"ifelse",min:4,stackDelta:-3},{id:"random",min:0,stackDelta:1},{id:"mul",min:2,stackDelta:-1,stackFn:function(t,e){t[e-2]=t[e-2]*t[e-1]}},null,{id:"sqrt",min:1,stackDelta:0},{id:"dup",min:1,stackDelta:1},{id:"exch",min:2,stackDelta:0},{id:"index",min:2,stackDelta:0},{id:"roll",min:3,stackDelta:-2},null,null,null,{id:"hflex",min:7,resetStack:!0},{id:"flex",min:13,resetStack:!0},{id:"hflex1",min:9,resetStack:!0},{id:"flex1",min:11,resetStack:!0}];return class{constructor(t,e,i){this.bytes=t.getBytes(),this.properties=e,this.seacAnalysisEnabled=!!i}parse(){const t=this.properties,e=new c;this.cff=e;const i=this.parseHeader(),r=this.parseIndex(i.endPos),n=this.parseIndex(r.endPos),o=this.parseIndex(n.endPos),s=this.parseIndex(o.endPos),a=this.parseDict(n.obj.get(0)),l=this.createDict(f,a,e.strings);e.header=i.obj,e.names=this.parseNameIndex(r.obj),e.strings=this.parseStringIndex(o.obj),e.topDict=l,e.globalSubrIndex=s.obj,this.parsePrivateDict(e.topDict),e.isCIDFont=l.hasName("ROS");const h=l.getByName("CharStrings"),u=this.parseIndex(h).obj,p=l.getByName("FontMatrix");p&&(t.fontMatrix=p);const d=l.getByName("FontBBox");let g,m;if(d&&(t.ascent=Math.max(d[3],d[1]),t.descent=Math.min(d[1],d[3]),t.ascentScaled=!0),e.isCIDFont){const t=this.parseIndex(l.getByName("FDArray")).obj;for(let i=0,r=t.count;i<r;++i){const r=t.get(i),n=this.createDict(f,this.parseDict(r),e.strings);this.parsePrivateDict(n),e.fdArray.push(n)}m=null,g=this.parseCharsets(l.getByName("charset"),u.count,e.strings,!0),e.fdSelect=this.parseFDSelect(l.getByName("FDSelect"),u.count)}else g=this.parseCharsets(l.getByName("charset"),u.count,e.strings,!1),m=this.parseEncoding(l.getByName("Encoding"),t,e.strings,g.charset);e.charset=g,e.encoding=m;const y=this.parseCharStrings({charStrings:u,localSubrIndex:l.privateDict.subrsIndex,globalSubrIndex:s.obj,fdSelect:e.fdSelect,fdArray:e.fdArray,privateDict:l.privateDict});return e.charStrings=y.charStrings,e.seacs=y.seacs,e.widths=y.widths,e}parseHeader(){let t=this.bytes;const e=t.length;let i=0;for(;i<e&&1!==t[i];)++i;if(i>=e)throw new r.FormatError("Invalid CFF header");0!==i&&((0,r.info)("cff data is shifted"),t=t.subarray(i),this.bytes=t);const n=t[0],o=t[1],s=t[2],a=t[3];return{obj:new h(n,o,s,a),endPos:s}}parseDict(t){let e=0;function i(){let i=t[e++];return 30===i?function(){let i="";const r=15,n=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"],o=t.length;for(;e<o;){const o=t[e++],s=o>>4,a=15&o;if(s===r)break;if(i+=n[s],a===r)break;i+=n[a]}return parseFloat(i)}():28===i?(i=t[e++],i=(i<<24|t[e++]<<16)>>16,i):29===i?(i=t[e++],i=i<<8|t[e++],i=i<<8|t[e++],i=i<<8|t[e++],i):i>=32&&i<=246?i-139:i>=247&&i<=250?256*(i-247)+t[e++]+108:i>=251&&i<=254?-256*(i-251)-t[e++]-108:((0,r.warn)('CFFParser_parseDict: "'+i+'" is a reserved command.'),NaN)}let n=[];const o=[];e=0;const s=t.length;for(;e<s;){let r=t[e];r<=21?(12===r&&(r=r<<8|t[++e]),o.push([r,n]),n=[],++e):n.push(i())}return o}parseIndex(t){const e=new p,i=this.bytes,r=i[t++]<<8|i[t++],n=[];let o,s,a=t;if(0!==r){const e=i[t++],l=t+(r+1)*e-1;for(o=0,s=r+1;o<s;++o){let r=0;for(let n=0;n<e;++n)r<<=8,r+=i[t++];n.push(l+r)}a=n[r]}for(o=0,s=n.length-1;o<s;++o){const t=n[o],r=n[o+1];e.add(i.subarray(t,r))}return{obj:e,endPos:a}}parseNameIndex(t){const e=[];for(let i=0,n=t.count;i<n;++i){const n=t.get(i);e.push((0,r.bytesToString)(n))}return e}parseStringIndex(t){const e=new u;for(let i=0,n=t.count;i<n;++i){const n=t.get(i);e.add((0,r.bytesToString)(n))}return e}createDict(t,e,i){const r=new t(i);for(let t=0,i=e.length;t<i;++t){const i=e[t],n=i[0],o=i[1];r.setByKey(n,o)}return r}parseCharString(i,n,o,s){if(!n||i.callDepth>10)return!1;let a=i.stackSize;const l=i.stack,c=n.length;for(let h=0;h<c;){const c=n[h++];let u=null;if(12===c){const t=n[h++];0===t?(n[h-2]=139,n[h-1]=22,a=0):u=e[t]}else if(28===c)l[a]=(n[h]<<24|n[h+1]<<16)>>16,h+=2,a++;else if(14===c){if(a>=4&&(a-=4,this.seacAnalysisEnabled))return i.seac=l.slice(a,a+4),!1;u=t[c]}else if(c>=32&&c<=246)l[a]=c-139,a++;else if(c>=247&&c<=254)l[a]=c<251?(c-247<<8)+n[h]+108:-(c-251<<8)-n[h]-108,h++,a++;else if(255===c)l[a]=(n[h]<<24|n[h+1]<<16|n[h+2]<<8|n[h+3])/65536,h+=4,a++;else if(19===c||20===c)i.hints+=a>>1,h+=i.hints+7>>3,a%=2,u=t[c];else{if(10===c||29===c){let e;if(e=10===c?o:s,!e)return u=t[c],(0,r.warn)("Missing subrsIndex for "+u.id),!1;let n=32768;e.count<1240?n=107:e.count<33900&&(n=1131);const h=l[--a]+n;if(h<0||h>=e.count||isNaN(h))return u=t[c],(0,r.warn)("Out of bounds subrIndex for "+u.id),!1;if(i.stackSize=a,i.callDepth++,!this.parseCharString(i,e.get(h),o,s))return!1;i.callDepth--,a=i.stackSize;continue}if(11===c)return i.stackSize=a,!0;0===c&&h===n.length?(n[h-1]=14,u=t[14]):u=t[c]}if(u){if(u.stem&&(i.hints+=a>>1,3===c||23===c?i.hasVStems=!0:!i.hasVStems||1!==c&&18!==c||((0,r.warn)("CFF stem hints are in wrong order"),n[h-1]=1===c?3:23)),"min"in u&&!i.undefStack&&a<u.min)return(0,r.warn)("Not enough parameters for "+u.id+"; actual: "+a+", expected: "+u.min),0===a&&(n[h-1]=14,!0);i.firstStackClearing&&u.stackClearing&&(i.firstStackClearing=!1,a-=u.min,a>=2&&u.stem?a%=2:a>1&&(0,r.warn)("Found too many parameters for stack-clearing command"),a>0&&(i.width=l[a-1])),"stackDelta"in u?("stackFn"in u&&u.stackFn(l,a),a+=u.stackDelta):u.stackClearing?a=0:u.resetStack?(a=0,i.undefStack=!1):u.undefStack&&(a=0,i.undefStack=!0,i.firstStackClearing=!1)}}return i.stackSize=a,!0}parseCharStrings({charStrings:t,localSubrIndex:e,globalSubrIndex:i,fdSelect:n,fdArray:o,privateDict:s}){const a=[],l=[],c=t.count;for(let h=0;h<c;h++){const c=t.get(h),u={callDepth:0,stackSize:0,stack:[],undefStack:!0,hints:0,firstStackClearing:!0,seac:null,width:null,hasVStems:!1};let p=!0,d=null,f=s;if(n&&o.length){const t=n.getFDIndex(h);-1===t&&((0,r.warn)("Glyph index is not in fd select."),p=!1),t>=o.length&&((0,r.warn)("Invalid fd index for glyph index."),p=!1),p&&(f=o[t].privateDict,d=f.subrsIndex)}else e&&(d=e);if(p&&(p=this.parseCharString(u,c,d,i)),null!==u.width){const t=f.getByName("nominalWidthX");l[h]=t+u.width}else{const t=f.getByName("defaultWidthX");l[h]=t}null!==u.seac&&(a[h]=u.seac),p||t.set(h,new Uint8Array([14]))}return{charStrings:t,seacs:a,widths:l}}emptyPrivateDictionary(t){const e=this.createDict(g,[],t.strings);t.setByKey(18,[0,0]),t.privateDict=e}parsePrivateDict(t){if(!t.hasName("Private"))return void this.emptyPrivateDictionary(t);const e=t.getByName("Private");if(!Array.isArray(e)||2!==e.length)return void t.removeByName("Private");const i=e[0],r=e[1];if(0===i||r>=this.bytes.length)return void this.emptyPrivateDictionary(t);const n=r+i,o=this.bytes.subarray(r,n),s=this.parseDict(o),a=this.createDict(g,s,t.strings);if(t.privateDict=a,!a.getByName("Subrs"))return;const l=a.getByName("Subrs"),c=r+l;if(0===l||c>=this.bytes.length)return void this.emptyPrivateDictionary(t);const h=this.parseIndex(c);a.subrsIndex=h.obj}parseCharsets(t,e,i,o){if(0===t)return new y(!0,m.ISO_ADOBE,n.ISOAdobeCharset);if(1===t)return new y(!0,m.EXPERT,n.ExpertCharset);if(2===t)return new y(!0,m.EXPERT_SUBSET,n.ExpertSubsetCharset);const s=this.bytes,a=t,l=s[t++],c=[o?0:".notdef"];let h,u,p;switch(e-=1,l){case 0:for(p=0;p<e;p++)h=s[t++]<<8|s[t++],c.push(o?h:i.get(h));break;case 1:for(;c.length<=e;)for(h=s[t++]<<8|s[t++],u=s[t++],p=0;p<=u;p++)c.push(o?h++:i.get(h++));break;case 2:for(;c.length<=e;)for(h=s[t++]<<8|s[t++],u=s[t++]<<8|s[t++],p=0;p<=u;p++)c.push(o?h++:i.get(h++));break;default:throw new r.FormatError("Unknown charset format")}const d=t,f=s.subarray(a,d);return new y(!1,l,c,f)}parseEncoding(t,e,i,n){const s=Object.create(null),a=this.bytes;let l,c,h,u=!1,p=null;if(0===t||1===t){u=!0,l=t;const e=t?o.ExpertEncoding:o.StandardEncoding;for(c=0,h=n.length;c<h;c++){const t=e.indexOf(n[c]);-1!==t&&(s[t]=c)}}else{const e=t;switch(l=a[t++],127&l){case 0:const e=a[t++];for(c=1;c<=e;c++)s[a[t++]]=c;break;case 1:const i=a[t++];let n=1;for(c=0;c<i;c++){const e=a[t++],i=a[t++];for(let t=e;t<=e+i;t++)s[t]=n++}break;default:throw new r.FormatError(`Unknown encoding format: ${l} in CFF`)}const o=t;128&l&&(a[e]&=127,function(){const e=a[t++];for(c=0;c<e;c++){const e=a[t++],r=(a[t++]<<8)+(255&a[t++]);s[e]=n.indexOf(i.get(r))}}()),p=a.subarray(e,o)}return l&=127,new v(u,l,s,p)}parseFDSelect(t,e){const i=this.bytes,n=i[t++],o=[];let s;switch(n){case 0:for(s=0;s<e;++s){const e=i[t++];o.push(e)}break;case 3:const a=i[t++]<<8|i[t++];for(s=0;s<a;++s){let e=i[t++]<<8|i[t++];0===s&&0!==e&&((0,r.warn)("parseFDSelect: The first range must have a first GID of 0 -- trying to recover."),e=0);const n=i[t++],a=i[t]<<8|i[t+1];for(let t=e;t<a;++t)o.push(n)}t+=2;break;default:throw new r.FormatError(`parseFDSelect: Unknown format "${n}".`)}if(o.length!==e)throw new r.FormatError("parseFDSelect: Invalid font data.");return new b(n,o)}}}();e.CFFParser=l;class c{constructor(){this.header=null,this.names=[],this.topDict=null,this.strings=new u,this.globalSubrIndex=null,this.encoding=null,this.charset=null,this.charStrings=null,this.fdArray=[],this.fdSelect=null,this.isCIDFont=!1}duplicateFirstGlyph(){if(this.charStrings.count>=65535)return void(0,r.warn)("Not enough space in charstrings to duplicate first glyph.");const t=this.charStrings.get(0);this.charStrings.add(t),this.isCIDFont&&this.fdSelect.fdSelect.push(this.fdSelect.fdSelect[0])}hasGlyphId(t){return!(t<0||t>=this.charStrings.count)&&this.charStrings.get(t).length>0}}e.CFF=c;class h{constructor(t,e,i,r){this.major=t,this.minor=e,this.hdrSize=i,this.offSize=r}}e.CFFHeader=h;class u{constructor(){this.strings=[]}get(t){return t>=0&&t<=390?s[t]:t-a<=this.strings.length?this.strings[t-a]:s[0]}getSID(t){let e=s.indexOf(t);return-1!==e?e:(e=this.strings.indexOf(t),-1!==e?e+a:-1)}add(t){this.strings.push(t)}get count(){return this.strings.length}}e.CFFStrings=u;class p{constructor(){this.objects=[],this.length=0}add(t){this.length+=t.length,this.objects.push(t)}set(t,e){this.length+=e.length-this.objects[t].length,this.objects[t]=e}get(t){return this.objects[t]}get count(){return this.objects.length}}e.CFFIndex=p;class d{constructor(t,e){this.keyToNameMap=t.keyToNameMap,this.nameToKeyMap=t.nameToKeyMap,this.defaults=t.defaults,this.types=t.types,this.opcodes=t.opcodes,this.order=t.order,this.strings=e,this.values=Object.create(null)}setByKey(t,e){if(!(t in this.keyToNameMap))return!1;const i=e.length;if(0===i)return!0;for(let n=0;n<i;n++)if(isNaN(e[n]))return(0,r.warn)('Invalid CFFDict value: "'+e+'" for key "'+t+'".'),!0;const n=this.types[t];return"num"!==n&&"sid"!==n&&"offset"!==n||(e=e[0]),this.values[t]=e,!0}setByName(t,e){if(!(t in this.nameToKeyMap))throw new r.FormatError(`Invalid dictionary name "${t}"`);this.values[this.nameToKeyMap[t]]=e}hasName(t){return this.nameToKeyMap[t]in this.values}getByName(t){if(!(t in this.nameToKeyMap))throw new r.FormatError(`Invalid dictionary name ${t}"`);const e=this.nameToKeyMap[t];return e in this.values?this.values[e]:this.defaults[e]}removeByName(t){delete this.values[this.nameToKeyMap[t]]}static createTables(t){const e={keyToNameMap:{},nameToKeyMap:{},defaults:{},types:{},opcodes:{},order:[]};for(let i=0,r=t.length;i<r;++i){const r=t[i],n=Array.isArray(r[0])?(r[0][0]<<8)+r[0][1]:r[0];e.keyToNameMap[n]=r[1],e.nameToKeyMap[r[1]]=n,e.types[n]=r[2],e.defaults[n]=r[3],e.opcodes[n]=Array.isArray(r[0])?r[0]:[r[0]],e.order.push(n)}return e}}const f=function(){const t=[[[12,30],"ROS",["sid","sid","num"],null],[[12,20],"SyntheticBase","num",null],[0,"version","sid",null],[1,"Notice","sid",null],[[12,0],"Copyright","sid",null],[2,"FullName","sid",null],[3,"FamilyName","sid",null],[4,"Weight","sid",null],[[12,1],"isFixedPitch","num",0],[[12,2],"ItalicAngle","num",0],[[12,3],"UnderlinePosition","num",-100],[[12,4],"UnderlineThickness","num",50],[[12,5],"PaintType","num",0],[[12,6],"CharstringType","num",2],[[12,7],"FontMatrix",["num","num","num","num","num","num"],[.001,0,0,.001,0,0]],[13,"UniqueID","num",null],[5,"FontBBox",["num","num","num","num"],[0,0,0,0]],[[12,8],"StrokeWidth","num",0],[14,"XUID","array",null],[15,"charset","offset",0],[16,"Encoding","offset",0],[17,"CharStrings","offset",0],[18,"Private",["offset","offset"],null],[[12,21],"PostScript","sid",null],[[12,22],"BaseFontName","sid",null],[[12,23],"BaseFontBlend","delta",null],[[12,31],"CIDFontVersion","num",0],[[12,32],"CIDFontRevision","num",0],[[12,33],"CIDFontType","num",0],[[12,34],"CIDCount","num",8720],[[12,35],"UIDBase","num",null],[[12,37],"FDSelect","offset",null],[[12,36],"FDArray","offset",null],[[12,38],"FontName","sid",null]];let e=null;return class extends d{constructor(i){null===e&&(e=d.createTables(t)),super(e,i),this.privateDict=null}}}();e.CFFTopDict=f;const g=function(){const t=[[6,"BlueValues","delta",null],[7,"OtherBlues","delta",null],[8,"FamilyBlues","delta",null],[9,"FamilyOtherBlues","delta",null],[[12,9],"BlueScale","num",.039625],[[12,10],"BlueShift","num",7],[[12,11],"BlueFuzz","num",1],[10,"StdHW","num",null],[11,"StdVW","num",null],[[12,12],"StemSnapH","delta",null],[[12,13],"StemSnapV","delta",null],[[12,14],"ForceBold","num",0],[[12,17],"LanguageGroup","num",0],[[12,18],"ExpansionFactor","num",.06],[[12,19],"initialRandomSeed","num",0],[20,"defaultWidthX","num",0],[21,"nominalWidthX","num",0],[19,"Subrs","offset",null]];let e=null;return class extends d{constructor(i){null===e&&(e=d.createTables(t)),super(e,i),this.subrsIndex=null}}}();e.CFFPrivateDict=g;const m={ISO_ADOBE:0,EXPERT:1,EXPERT_SUBSET:2};class y{constructor(t,e,i,r){this.predefined=t,this.format=e,this.charset=i,this.raw=r}}e.CFFCharset=y;class v{constructor(t,e,i,r){this.predefined=t,this.format=e,this.encoding=i,this.raw=r}}class b{constructor(t,e){this.format=t,this.fdSelect=e}getFDIndex(t){return t<0||t>=this.fdSelect.length?-1:this.fdSelect[t]}}e.CFFFDSelect=b;class w{constructor(){this.offsets=Object.create(null)}isTracking(t){return t in this.offsets}track(t,e){if(t in this.offsets)throw new r.FormatError(`Already tracking location of ${t}`);this.offsets[t]=e}offset(t){for(const e in this.offsets)this.offsets[e]+=t}setEntryLocation(t,e,i){if(!(t in this.offsets))throw new r.FormatError(`Not tracking location of ${t}`);const n=i.data,o=this.offsets[t];for(let t=0,i=e.length;t<i;++t){const i=5*t+o,s=i+1,a=i+2,l=i+3,c=i+4;if(29!==n[i]||0!==n[s]||0!==n[a]||0!==n[l]||0!==n[c])throw new r.FormatError("writing to an offset that is not empty");const h=e[t];n[i]=29,n[s]=h>>24&255,n[a]=h>>16&255,n[l]=h>>8&255,n[c]=255&h}}}class x{constructor(t){this.cff=t}compile(){const t=this.cff,e={data:[],length:0,add:function(t){this.data=this.data.concat(t),this.length=this.data.length}},i=this.compileHeader(t.header);e.add(i);const n=this.compileNameIndex(t.names);if(e.add(n),t.isCIDFont&&t.topDict.hasName("FontMatrix")){const e=t.topDict.getByName("FontMatrix");t.topDict.removeByName("FontMatrix");for(let i=0,n=t.fdArray.length;i<n;i++){const n=t.fdArray[i];let o=e.slice(0);n.hasName("FontMatrix")&&(o=r.Util.transform(o,n.getByName("FontMatrix"))),n.setByName("FontMatrix",o)}}const o=t.topDict.getByName("XUID");o&&o.length>16&&t.topDict.removeByName("XUID"),t.topDict.setByName("charset",0);let s=this.compileTopDicts([t.topDict],e.length,t.isCIDFont);e.add(s.output);const a=s.trackers[0],l=this.compileStringIndex(t.strings.strings);e.add(l);const c=this.compileIndex(t.globalSubrIndex);if(e.add(c),t.encoding&&t.topDict.hasName("Encoding"))if(t.encoding.predefined)a.setEntryLocation("Encoding",[t.encoding.format],e);else{const i=this.compileEncoding(t.encoding);a.setEntryLocation("Encoding",[e.length],e),e.add(i)}const h=this.compileCharset(t.charset,t.charStrings.count,t.strings,t.isCIDFont);a.setEntryLocation("charset",[e.length],e),e.add(h);const u=this.compileCharStrings(t.charStrings);if(a.setEntryLocation("CharStrings",[e.length],e),e.add(u),t.isCIDFont){a.setEntryLocation("FDSelect",[e.length],e);const i=this.compileFDSelect(t.fdSelect);e.add(i),s=this.compileTopDicts(t.fdArray,e.length,!0),a.setEntryLocation("FDArray",[e.length],e),e.add(s.output);const r=s.trackers;this.compilePrivateDicts(t.fdArray,r,e)}return this.compilePrivateDicts([t.topDict],[a],e),e.add([0]),e.data}encodeNumber(t){return Number.isInteger(t)?this.encodeInteger(t):this.encodeFloat(t)}static get EncodeFloatRegExp(){return(0,r.shadow)(this,"EncodeFloatRegExp",/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/)}encodeFloat(t){let e=t.toString();const i=x.EncodeFloatRegExp.exec(e);if(i){const r=parseFloat("1e"+((i[2]?+i[2]:0)+i[1].length));e=(Math.round(t*r)/r).toString()}let r,n,o="";for(r=0,n=e.length;r<n;++r){const t=e[r];o+="e"===t?"-"===e[++r]?"c":"b":"."===t?"a":"-"===t?"e":t}o+=1&o.length?"f":"ff";const s=[30];for(r=0,n=o.length;r<n;r+=2)s.push(parseInt(o.substring(r,r+2),16));return s}encodeInteger(t){let e;return e=t>=-107&&t<=107?[t+139]:t>=108&&t<=1131?[247+((t-=108)>>8),255&t]:t>=-1131&&t<=-108?[251+((t=-t-108)>>8),255&t]:t>=-32768&&t<=32767?[28,t>>8&255,255&t]:[29,t>>24&255,t>>16&255,t>>8&255,255&t],e}compileHeader(t){return[t.major,t.minor,4,t.offSize]}compileNameIndex(t){const e=new p;for(let i=0,n=t.length;i<n;++i){const n=t[i],o=Math.min(n.length,127);let s=new Array(o);for(let t=0;t<o;t++){let e=n[t];(e<"!"||e>"~"||"["===e||"]"===e||"("===e||")"===e||"{"===e||"}"===e||"<"===e||">"===e||"/"===e||"%"===e)&&(e="_"),s[t]=e}s=s.join(""),""===s&&(s="Bad_Font_Name"),e.add((0,r.stringToBytes)(s))}return this.compileIndex(e)}compileTopDicts(t,e,i){const r=[];let n=new p;for(let o=0,s=t.length;o<s;++o){const s=t[o];i&&(s.removeByName("CIDFontVersion"),s.removeByName("CIDFontRevision"),s.removeByName("CIDFontType"),s.removeByName("CIDCount"),s.removeByName("UIDBase"));const a=new w,l=this.compileDict(s,a);r.push(a),n.add(l),a.offset(e)}return n=this.compileIndex(n,r),{trackers:r,output:n}}compilePrivateDicts(t,e,i){for(let n=0,o=t.length;n<o;++n){const o=t[n],s=o.privateDict;if(!s||!o.hasName("Private"))throw new r.FormatError("There must be a private dictionary.");const a=new w,l=this.compileDict(s,a);let c=i.length;if(a.offset(c),l.length||(c=0),e[n].setEntryLocation("Private",[l.length,c],i),i.add(l),s.subrsIndex&&s.hasName("Subrs")){const t=this.compileIndex(s.subrsIndex);a.setEntryLocation("Subrs",[l.length],i),i.add(t)}}}compileDict(t,e){let i=[];const n=t.order;for(let o=0;o<n.length;++o){const s=n[o];if(!(s in t.values))continue;let a=t.values[s],l=t.types[s];if(Array.isArray(l)||(l=[l]),Array.isArray(a)||(a=[a]),0!==a.length){for(let n=0,o=l.length;n<o;++n){const o=l[n],c=a[n];switch(o){case"num":case"sid":i=i.concat(this.encodeNumber(c));break;case"offset":const n=t.keyToNameMap[s];e.isTracking(n)||e.track(n,i.length),i=i.concat([29,0,0,0,0]);break;case"array":case"delta":i=i.concat(this.encodeNumber(c));for(let t=1,e=a.length;t<e;++t)i=i.concat(this.encodeNumber(a[t]));break;default:throw new r.FormatError(`Unknown data type of ${o}`)}}i=i.concat(t.opcodes[s])}}return i}compileStringIndex(t){const e=new p;for(let i=0,n=t.length;i<n;++i)e.add((0,r.stringToBytes)(t[i]));return this.compileIndex(e)}compileGlobalSubrIndex(){const t=this.cff.globalSubrIndex;this.out.writeByteArray(this.compileIndex(t))}compileCharStrings(t){const e=new p;for(let i=0;i<t.count;i++){const r=t.get(i);0!==r.length?e.add(r):e.add(new Uint8Array([139,14]))}return this.compileIndex(e)}compileCharset(t,e,i,n){let o;const s=e-1;if(n)o=new Uint8Array([2,0,0,s>>8&255,255&s]);else{o=new Uint8Array(1+2*s),o[0]=0;let e=0;const n=t.charset.length;let a=!1;for(let s=1;s<o.length;s+=2){let l=0;if(e<n){const n=t.charset[e++];l=i.getSID(n),-1===l&&(l=0,a||(a=!0,(0,r.warn)(`Couldn't find ${n} in CFF strings`)))}o[s]=l>>8&255,o[s+1]=255&l}}return this.compileTypedArray(o)}compileEncoding(t){return this.compileTypedArray(t.raw)}compileFDSelect(t){const e=t.format;let i,r;switch(e){case 0:for(i=new Uint8Array(1+t.fdSelect.length),i[0]=e,r=0;r<t.fdSelect.length;r++)i[r+1]=t.fdSelect[r];break;case 3:const n=0;let o=t.fdSelect[0];const s=[e,0,0,n>>8&255,255&n,o];for(r=1;r<t.fdSelect.length;r++){const e=t.fdSelect[r];e!==o&&(s.push(r>>8&255,255&r,e),o=e)}const a=(s.length-3)/3;s[1]=a>>8&255,s[2]=255&a,s.push(r>>8&255,255&r),i=new Uint8Array(s)}return this.compileTypedArray(i)}compileTypedArray(t){const e=[];for(let i=0,r=t.length;i<r;++i)e[i]=t[i];return e}compileIndex(t,e=[]){const i=t.objects,r=i.length;if(0===r)return[0,0,0];const n=[r>>8&255,255&r];let o,s,a=1;for(o=0;o<r;++o)a+=i[o].length;s=a<256?1:a<65536?2:a<16777216?3:4,n.push(s);let l=1;for(o=0;o<r+1;o++)1===s?n.push(255&l):2===s?n.push(l>>8&255,255&l):3===s?n.push(l>>16&255,l>>8&255,255&l):n.push(l>>>24&255,l>>16&255,l>>8&255,255&l),i[o]&&(l+=i[o].length);for(o=0;o<r;o++){e[o]&&e[o].offset(n.length);for(let t=0,e=i[o].length;t<e;t++)n.push(i[o][t])}return n}}e.CFFCompiler=x},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ISOAdobeCharset=e.ExpertSubsetCharset=e.ExpertCharset=void 0,e.ISOAdobeCharset=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron"],e.ExpertCharset=[".notdef","space","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],e.ExpertSubsetCharset=[".notdef","space","dollaroldstyle","dollarsuperior","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","hyphensuperior","colonmonetary","onefitted","rupiah","centoldstyle","figuredash","hypheninferior","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior"]},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getSerifFonts=e.getNonStdFontMap=e.getGlyphMapForStandardFonts=e.getFontNameToFileMap=void 0,e.getStandardFontName=function(t){const e=(0,n.normalizeFontName)(t);return o()[e]},e.getSymbolsFonts=e.getSupplementalGlyphMapForCalibri=e.getSupplementalGlyphMapForArialBlack=e.getStdFontMap=void 0;var r=i(8),n=i(18);const o=(0,r.getLookupTableFactory)((function(t){t["Times-Roman"]="Times-Roman",t.Helvetica="Helvetica",t.Courier="Courier",t.Symbol="Symbol",t["Times-Bold"]="Times-Bold",t["Helvetica-Bold"]="Helvetica-Bold",t["Courier-Bold"]="Courier-Bold",t.ZapfDingbats="ZapfDingbats",t["Times-Italic"]="Times-Italic",t["Helvetica-Oblique"]="Helvetica-Oblique",t["Courier-Oblique"]="Courier-Oblique",t["Times-BoldItalic"]="Times-BoldItalic",t["Helvetica-BoldOblique"]="Helvetica-BoldOblique",t["Courier-BoldOblique"]="Courier-BoldOblique",t.ArialNarrow="Helvetica",t["ArialNarrow-Bold"]="Helvetica-Bold",t["ArialNarrow-BoldItalic"]="Helvetica-BoldOblique",t["ArialNarrow-Italic"]="Helvetica-Oblique",t.ArialBlack="Helvetica",t["ArialBlack-Bold"]="Helvetica-Bold",t["ArialBlack-BoldItalic"]="Helvetica-BoldOblique",t["ArialBlack-Italic"]="Helvetica-Oblique",t["Arial-Black"]="Helvetica",t["Arial-Black-Bold"]="Helvetica-Bold",t["Arial-Black-BoldItalic"]="Helvetica-BoldOblique",t["Arial-Black-Italic"]="Helvetica-Oblique",t.Arial="Helvetica",t["Arial-Bold"]="Helvetica-Bold",t["Arial-BoldItalic"]="Helvetica-BoldOblique",t["Arial-Italic"]="Helvetica-Oblique",t["Arial-BoldItalicMT"]="Helvetica-BoldOblique",t["Arial-BoldMT"]="Helvetica-Bold",t["Arial-ItalicMT"]="Helvetica-Oblique",t.ArialMT="Helvetica",t["Courier-BoldItalic"]="Courier-BoldOblique",t["Courier-Italic"]="Courier-Oblique",t.CourierNew="Courier",t["CourierNew-Bold"]="Courier-Bold",t["CourierNew-BoldItalic"]="Courier-BoldOblique",t["CourierNew-Italic"]="Courier-Oblique",t["CourierNewPS-BoldItalicMT"]="Courier-BoldOblique",t["CourierNewPS-BoldMT"]="Courier-Bold",t["CourierNewPS-ItalicMT"]="Courier-Oblique",t.CourierNewPSMT="Courier",t["Helvetica-BoldItalic"]="Helvetica-BoldOblique",t["Helvetica-Italic"]="Helvetica-Oblique",t["Symbol-Bold"]="Symbol",t["Symbol-BoldItalic"]="Symbol",t["Symbol-Italic"]="Symbol",t.TimesNewRoman="Times-Roman",t["TimesNewRoman-Bold"]="Times-Bold",t["TimesNewRoman-BoldItalic"]="Times-BoldItalic",t["TimesNewRoman-Italic"]="Times-Italic",t.TimesNewRomanPS="Times-Roman",t["TimesNewRomanPS-Bold"]="Times-Bold",t["TimesNewRomanPS-BoldItalic"]="Times-BoldItalic",t["TimesNewRomanPS-BoldItalicMT"]="Times-BoldItalic",t["TimesNewRomanPS-BoldMT"]="Times-Bold",t["TimesNewRomanPS-Italic"]="Times-Italic",t["TimesNewRomanPS-ItalicMT"]="Times-Italic",t.TimesNewRomanPSMT="Times-Roman",t["TimesNewRomanPSMT-Bold"]="Times-Bold",t["TimesNewRomanPSMT-BoldItalic"]="Times-BoldItalic",t["TimesNewRomanPSMT-Italic"]="Times-Italic"}));e.getStdFontMap=o;const s=(0,r.getLookupTableFactory)((function(t){t.Courier="FoxitFixed.pfb",t["Courier-Bold"]="FoxitFixedBold.pfb",t["Courier-BoldOblique"]="FoxitFixedBoldItalic.pfb",t["Courier-Oblique"]="FoxitFixedItalic.pfb",t.Helvetica="FoxitSans.pfb",t["Helvetica-Bold"]="FoxitSansBold.pfb",t["Helvetica-BoldOblique"]="FoxitSansBoldItalic.pfb",t["Helvetica-Oblique"]="FoxitSansItalic.pfb",t["Times-Roman"]="FoxitSerif.pfb",t["Times-Bold"]="FoxitSerifBold.pfb",t["Times-BoldItalic"]="FoxitSerifBoldItalic.pfb",t["Times-Italic"]="FoxitSerifItalic.pfb",t.Symbol="FoxitSymbol.pfb",t.ZapfDingbats="FoxitDingbats.pfb",t["LiberationSans-Regular"]="LiberationSans-Regular.ttf",t["LiberationSans-Bold"]="LiberationSans-Bold.ttf",t["LiberationSans-Italic"]="LiberationSans-Italic.ttf",t["LiberationSans-BoldItalic"]="LiberationSans-BoldItalic.ttf"}));e.getFontNameToFileMap=s;const a=(0,r.getLookupTableFactory)((function(t){t.Calibri="Helvetica",t["Calibri-Bold"]="Helvetica-Bold",t["Calibri-BoldItalic"]="Helvetica-BoldOblique",t["Calibri-Italic"]="Helvetica-Oblique",t.CenturyGothic="Helvetica",t["CenturyGothic-Bold"]="Helvetica-Bold",t["CenturyGothic-BoldItalic"]="Helvetica-BoldOblique",t["CenturyGothic-Italic"]="Helvetica-Oblique",t.ComicSansMS="Comic Sans MS",t["ComicSansMS-Bold"]="Comic Sans MS-Bold",t["ComicSansMS-BoldItalic"]="Comic Sans MS-BoldItalic",t["ComicSansMS-Italic"]="Comic Sans MS-Italic",t["ItcSymbol-Bold"]="Helvetica-Bold",t["ItcSymbol-BoldItalic"]="Helvetica-BoldOblique",t["ItcSymbol-Book"]="Helvetica",t["ItcSymbol-BookItalic"]="Helvetica-Oblique",t["ItcSymbol-Medium"]="Helvetica",t["ItcSymbol-MediumItalic"]="Helvetica-Oblique",t.LucidaConsole="Courier",t["LucidaConsole-Bold"]="Courier-Bold",t["LucidaConsole-BoldItalic"]="Courier-BoldOblique",t["LucidaConsole-Italic"]="Courier-Oblique",t["LucidaSans-Demi"]="Helvetica-Bold",t["MS-Gothic"]="MS Gothic",t["MS-Gothic-Bold"]="MS Gothic-Bold",t["MS-Gothic-BoldItalic"]="MS Gothic-BoldItalic",t["MS-Gothic-Italic"]="MS Gothic-Italic",t["MS-Mincho"]="MS Mincho",t["MS-Mincho-Bold"]="MS Mincho-Bold",t["MS-Mincho-BoldItalic"]="MS Mincho-BoldItalic",t["MS-Mincho-Italic"]="MS Mincho-Italic",t["MS-PGothic"]="MS PGothic",t["MS-PGothic-Bold"]="MS PGothic-Bold",t["MS-PGothic-BoldItalic"]="MS PGothic-BoldItalic",t["MS-PGothic-Italic"]="MS PGothic-Italic",t["MS-PMincho"]="MS PMincho",t["MS-PMincho-Bold"]="MS PMincho-Bold",t["MS-PMincho-BoldItalic"]="MS PMincho-BoldItalic",t["MS-PMincho-Italic"]="MS PMincho-Italic",t.NuptialScript="Times-Italic",t.SegoeUISymbol="Helvetica",t.Wingdings="ZapfDingbats",t["Wingdings-Regular"]="ZapfDingbats"}));e.getNonStdFontMap=a;const l=(0,r.getLookupTableFactory)((function(t){t["Adobe Jenson"]=!0,t["Adobe Text"]=!0,t.Albertus=!0,t.Aldus=!0,t.Alexandria=!0,t.Algerian=!0,t["American Typewriter"]=!0,t.Antiqua=!0,t.Apex=!0,t.Arno=!0,t.Aster=!0,t.Aurora=!0,t.Baskerville=!0,t.Bell=!0,t.Bembo=!0,t["Bembo Schoolbook"]=!0,t.Benguiat=!0,t["Berkeley Old Style"]=!0,t["Bernhard Modern"]=!0,t["Berthold City"]=!0,t.Bodoni=!0,t["Bauer Bodoni"]=!0,t["Book Antiqua"]=!0,t.Bookman=!0,t["Bordeaux Roman"]=!0,t["Californian FB"]=!0,t.Calisto=!0,t.Calvert=!0,t.Capitals=!0,t.Cambria=!0,t.Cartier=!0,t.Caslon=!0,t.Catull=!0,t.Centaur=!0,t["Century Old Style"]=!0,t["Century Schoolbook"]=!0,t.Chaparral=!0,t["Charis SIL"]=!0,t.Cheltenham=!0,t["Cholla Slab"]=!0,t.Clarendon=!0,t.Clearface=!0,t.Cochin=!0,t.Colonna=!0,t["Computer Modern"]=!0,t["Concrete Roman"]=!0,t.Constantia=!0,t["Cooper Black"]=!0,t.Corona=!0,t.Ecotype=!0,t.Egyptienne=!0,t.Elephant=!0,t.Excelsior=!0,t.Fairfield=!0,t["FF Scala"]=!0,t.Folkard=!0,t.Footlight=!0,t.FreeSerif=!0,t["Friz Quadrata"]=!0,t.Garamond=!0,t.Gentium=!0,t.Georgia=!0,t.Gloucester=!0,t["Goudy Old Style"]=!0,t["Goudy Schoolbook"]=!0,t["Goudy Pro Font"]=!0,t.Granjon=!0,t["Guardian Egyptian"]=!0,t.Heather=!0,t.Hercules=!0,t["High Tower Text"]=!0,t.Hiroshige=!0,t["Hoefler Text"]=!0,t["Humana Serif"]=!0,t.Imprint=!0,t["Ionic No. 5"]=!0,t.Janson=!0,t.Joanna=!0,t.Korinna=!0,t.Lexicon=!0,t.LiberationSerif=!0,t["Liberation Serif"]=!0,t["Linux Libertine"]=!0,t.Literaturnaya=!0,t.Lucida=!0,t["Lucida Bright"]=!0,t.Melior=!0,t.Memphis=!0,t.Miller=!0,t.Minion=!0,t.Modern=!0,t["Mona Lisa"]=!0,t["Mrs Eaves"]=!0,t["MS Serif"]=!0,t["Museo Slab"]=!0,t["New York"]=!0,t["Nimbus Roman"]=!0,t["NPS Rawlinson Roadway"]=!0,t.NuptialScript=!0,t.Palatino=!0,t.Perpetua=!0,t.Plantin=!0,t["Plantin Schoolbook"]=!0,t.Playbill=!0,t["Poor Richard"]=!0,t["Rawlinson Roadway"]=!0,t.Renault=!0,t.Requiem=!0,t.Rockwell=!0,t.Roman=!0,t["Rotis Serif"]=!0,t.Sabon=!0,t.Scala=!0,t.Seagull=!0,t.Sistina=!0,t.Souvenir=!0,t.STIX=!0,t["Stone Informal"]=!0,t["Stone Serif"]=!0,t.Sylfaen=!0,t.Times=!0,t.Trajan=!0,t["Trinité"]=!0,t["Trump Mediaeval"]=!0,t.Utopia=!0,t["Vale Type"]=!0,t["Bitstream Vera"]=!0,t["Vera Serif"]=!0,t.Versailles=!0,t.Wanted=!0,t.Weiss=!0,t["Wide Latin"]=!0,t.Windsor=!0,t.XITS=!0}));e.getSerifFonts=l;const c=(0,r.getLookupTableFactory)((function(t){t.Dingbats=!0,t.Symbol=!0,t.ZapfDingbats=!0}));e.getSymbolsFonts=c;const h=(0,r.getLookupTableFactory)((function(t){t[2]=10,t[3]=32,t[4]=33,t[5]=34,t[6]=35,t[7]=36,t[8]=37,t[9]=38,t[10]=39,t[11]=40,t[12]=41,t[13]=42,t[14]=43,t[15]=44,t[16]=45,t[17]=46,t[18]=47,t[19]=48,t[20]=49,t[21]=50,t[22]=51,t[23]=52,t[24]=53,t[25]=54,t[26]=55,t[27]=56,t[28]=57,t[29]=58,t[30]=894,t[31]=60,t[32]=61,t[33]=62,t[34]=63,t[35]=64,t[36]=65,t[37]=66,t[38]=67,t[39]=68,t[40]=69,t[41]=70,t[42]=71,t[43]=72,t[44]=73,t[45]=74,t[46]=75,t[47]=76,t[48]=77,t[49]=78,t[50]=79,t[51]=80,t[52]=81,t[53]=82,t[54]=83,t[55]=84,t[56]=85,t[57]=86,t[58]=87,t[59]=88,t[60]=89,t[61]=90,t[62]=91,t[63]=92,t[64]=93,t[65]=94,t[66]=95,t[67]=96,t[68]=97,t[69]=98,t[70]=99,t[71]=100,t[72]=101,t[73]=102,t[74]=103,t[75]=104,t[76]=105,t[77]=106,t[78]=107,t[79]=108,t[80]=109,t[81]=110,t[82]=111,t[83]=112,t[84]=113,t[85]=114,t[86]=115,t[87]=116,t[88]=117,t[89]=118,t[90]=119,t[91]=120,t[92]=121,t[93]=122,t[94]=123,t[95]=124,t[96]=125,t[97]=126,t[98]=196,t[99]=197,t[100]=199,t[101]=201,t[102]=209,t[103]=214,t[104]=220,t[105]=225,t[106]=224,t[107]=226,t[108]=228,t[109]=227,t[110]=229,t[111]=231,t[112]=233,t[113]=232,t[114]=234,t[115]=235,t[116]=237,t[117]=236,t[118]=238,t[119]=239,t[120]=241,t[121]=243,t[122]=242,t[123]=244,t[124]=246,t[125]=245,t[126]=250,t[127]=249,t[128]=251,t[129]=252,t[130]=8224,t[131]=176,t[132]=162,t[133]=163,t[134]=167,t[135]=8226,t[136]=182,t[137]=223,t[138]=174,t[139]=169,t[140]=8482,t[141]=180,t[142]=168,t[143]=8800,t[144]=198,t[145]=216,t[146]=8734,t[147]=177,t[148]=8804,t[149]=8805,t[150]=165,t[151]=181,t[152]=8706,t[153]=8721,t[154]=8719,t[156]=8747,t[157]=170,t[158]=186,t[159]=8486,t[160]=230,t[161]=248,t[162]=191,t[163]=161,t[164]=172,t[165]=8730,t[166]=402,t[167]=8776,t[168]=8710,t[169]=171,t[170]=187,t[171]=8230,t[200]=193,t[203]=205,t[210]=218,t[223]=711,t[224]=321,t[225]=322,t[226]=352,t[227]=353,t[228]=381,t[229]=382,t[233]=221,t[234]=253,t[252]=263,t[253]=268,t[254]=269,t[258]=258,t[260]=260,t[261]=261,t[265]=280,t[266]=281,t[267]=282,t[268]=283,t[269]=313,t[275]=323,t[276]=324,t[278]=328,t[283]=344,t[284]=345,t[285]=346,t[286]=347,t[292]=367,t[295]=377,t[296]=378,t[298]=380,t[305]=963,t[306]=964,t[307]=966,t[308]=8215,t[309]=8252,t[310]=8319,t[311]=8359,t[312]=8592,t[313]=8593,t[337]=9552,t[493]=1039,t[494]=1040,t[705]=1524,t[706]=8362,t[710]=64288,t[711]=64298,t[759]=1617,t[761]=1776,t[763]=1778,t[775]=1652,t[777]=1764,t[778]=1780,t[779]=1781,t[780]=1782,t[782]=771,t[783]=64726,t[786]=8363,t[788]=8532,t[790]=768,t[791]=769,t[792]=768,t[795]=803,t[797]=64336,t[798]=64337,t[799]=64342,t[800]=64343,t[801]=64344,t[802]=64345,t[803]=64362,t[804]=64363,t[805]=64364,t[2424]=7821,t[2425]=7822,t[2426]=7823,t[2427]=7824,t[2428]=7825,t[2429]=7826,t[2430]=7827,t[2433]=7682,t[2678]=8045,t[2679]=8046,t[2830]=1552,t[2838]=686,t[2840]=751,t[2842]=753,t[2843]=754,t[2844]=755,t[2846]=757,t[2856]=767,t[2857]=848,t[2858]=849,t[2862]=853,t[2863]=854,t[2864]=855,t[2865]=861,t[2866]=862,t[2906]=7460,t[2908]=7462,t[2909]=7463,t[2910]=7464,t[2912]=7466,t[2913]=7467,t[2914]=7468,t[2916]=7470,t[2917]=7471,t[2918]=7472,t[2920]=7474,t[2921]=7475,t[2922]=7476,t[2924]=7478,t[2925]=7479,t[2926]=7480,t[2928]=7482,t[2929]=7483,t[2930]=7484,t[2932]=7486,t[2933]=7487,t[2934]=7488,t[2936]=7490,t[2937]=7491,t[2938]=7492,t[2940]=7494,t[2941]=7495,t[2942]=7496,t[2944]=7498,t[2946]=7500,t[2948]=7502,t[2950]=7504,t[2951]=7505,t[2952]=7506,t[2954]=7508,t[2955]=7509,t[2956]=7510,t[2958]=7512,t[2959]=7513,t[2960]=7514,t[2962]=7516,t[2963]=7517,t[2964]=7518,t[2966]=7520,t[2967]=7521,t[2968]=7522,t[2970]=7524,t[2971]=7525,t[2972]=7526,t[2974]=7528,t[2975]=7529,t[2976]=7530,t[2978]=1537,t[2979]=1538,t[2980]=1539,t[2982]=1549,t[2983]=1551,t[2984]=1552,t[2986]=1554,t[2987]=1555,t[2988]=1556,t[2990]=1623,t[2991]=1624,t[2995]=1775,t[2999]=1791,t[3002]=64290,t[3003]=64291,t[3004]=64292,t[3006]=64294,t[3007]=64295,t[3008]=64296,t[3011]=1900,t[3014]=8223,t[3015]=8244,t[3017]=7532,t[3018]=7533,t[3019]=7534,t[3075]=7590,t[3076]=7591,t[3079]=7594,t[3080]=7595,t[3083]=7598,t[3084]=7599,t[3087]=7602,t[3088]=7603,t[3091]=7606,t[3092]=7607,t[3095]=7610,t[3096]=7611,t[3099]=7614,t[3100]=7615,t[3103]=7618,t[3104]=7619,t[3107]=8337,t[3108]=8338,t[3116]=1884,t[3119]=1885,t[3120]=1885,t[3123]=1886,t[3124]=1886,t[3127]=1887,t[3128]=1887,t[3131]=1888,t[3132]=1888,t[3135]=1889,t[3136]=1889,t[3139]=1890,t[3140]=1890,t[3143]=1891,t[3144]=1891,t[3147]=1892,t[3148]=1892,t[3153]=580,t[3154]=581,t[3157]=584,t[3158]=585,t[3161]=588,t[3162]=589,t[3165]=891,t[3166]=892,t[3169]=1274,t[3170]=1275,t[3173]=1278,t[3174]=1279,t[3181]=7622,t[3182]=7623,t[3282]=11799,t[3316]=578,t[3379]=42785,t[3393]=1159,t[3416]=8377}));e.getGlyphMapForStandardFonts=h;const u=(0,r.getLookupTableFactory)((function(t){t[227]=322,t[264]=261,t[291]=346}));e.getSupplementalGlyphMapForArialBlack=u;const p=(0,r.getLookupTableFactory)((function(t){t[1]=32,t[4]=65,t[6]=193,t[17]=66,t[18]=67,t[21]=268,t[24]=68,t[28]=69,t[30]=201,t[32]=282,t[38]=70,t[39]=71,t[44]=72,t[47]=73,t[49]=205,t[58]=74,t[60]=75,t[62]=76,t[68]=77,t[69]=78,t[75]=79,t[87]=80,t[89]=81,t[90]=82,t[92]=344,t[94]=83,t[97]=352,t[100]=84,t[104]=85,t[115]=86,t[116]=87,t[121]=88,t[122]=89,t[124]=221,t[127]=90,t[129]=381,t[258]=97,t[260]=225,t[268]=261,t[271]=98,t[272]=99,t[273]=263,t[275]=269,t[282]=100,t[286]=101,t[288]=233,t[290]=283,t[295]=281,t[296]=102,t[336]=103,t[346]=104,t[349]=105,t[351]=237,t[361]=106,t[364]=107,t[367]=108,t[371]=322,t[373]=109,t[374]=110,t[381]=111,t[383]=243,t[393]=112,t[395]=113,t[396]=114,t[398]=345,t[400]=115,t[401]=347,t[403]=353,t[410]=116,t[437]=117,t[448]=118,t[449]=119,t[454]=120,t[455]=121,t[457]=253,t[460]=122,t[462]=382,t[463]=380,t[853]=44,t[855]=58,t[856]=46,t[876]=47,t[878]=45,t[882]=45,t[894]=40,t[895]=41,t[896]=91,t[897]=93,t[923]=64,t[1004]=48,t[1005]=49,t[1006]=50,t[1007]=51,t[1008]=52,t[1009]=53,t[1010]=54,t[1011]=55,t[1012]=56,t[1013]=57,t[1081]=37,t[1085]=43,t[1086]=45}));e.getSupplementalGlyphMapForCalibri=p},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ToUnicodeMap=e.IdentityToUnicodeMap=void 0;var r=i(2);e.ToUnicodeMap=class{constructor(t=[]){this._map=t}get length(){return this._map.length}forEach(t){for(const e in this._map)t(e,this._map[e].charCodeAt(0))}has(t){return void 0!==this._map[t]}get(t){return this._map[t]}charCodeOf(t){const e=this._map;if(e.length<=65536)return e.indexOf(t);for(const i in e)if(e[i]===t)return 0|i;return-1}amend(t){for(const e in t)this._map[e]=t[e]}},e.IdentityToUnicodeMap=class{constructor(t,e){this.firstChar=t,this.lastChar=e}get length(){return this.lastChar+1-this.firstChar}forEach(t){for(let e=this.firstChar,i=this.lastChar;e<=i;e++)t(e,e)}has(t){return this.firstChar<=t&&t<=this.lastChar}get(t){if(this.firstChar<=t&&t<=this.lastChar)return String.fromCharCode(t)}charCodeOf(t){return Number.isInteger(t)&&t>=this.firstChar&&t<=this.lastChar?t:-1}amend(t){(0,r.unreachable)("Should not call amend()")}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CFFFont=void 0;var r=i(45),n=i(18),o=i(2);e.CFFFont=class{constructor(t,e){this.properties=e;const i=new r.CFFParser(t,e,n.SEAC_ANALYSIS_ENABLED);this.cff=i.parse(),this.cff.duplicateFirstGlyph();const s=new r.CFFCompiler(this.cff);this.seacs=this.cff.seacs;try{this.data=s.compile()}catch(i){(0,o.warn)("Failed to compile font "+e.loadedName),this.data=t}this._createBuiltInEncoding()}get numGlyphs(){return this.cff.charStrings.count}getCharset(){return this.cff.charset.charset}getGlyphMapping(){const t=this.cff,e=this.properties,i=t.charset.charset;let r,o;if(e.composite){let n;if(r=Object.create(null),t.isCIDFont)for(o=0;o<i.length;o++){const t=i[o];n=e.cMap.charCodeOf(t),r[n]=o}else for(o=0;o<t.charStrings.count;o++)n=e.cMap.charCodeOf(o),r[n]=o;return r}let s=t.encoding?t.encoding.encoding:null;return e.isInternalFont&&(s=e.defaultEncoding),r=(0,n.type1FontGlyphMapping)(e,s,i),r}hasGlyphId(t){return this.cff.hasGlyphId(t)}_createBuiltInEncoding(){const{charset:t,encoding:e}=this.cff;if(!t||!e)return;const i=t.charset,r=e.encoding,n=[];for(const t in r){const e=r[t];if(e>=0){const r=i[e];r&&(n[t]=r)}}n.length>0&&(this.properties.builtInEncoding=n)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontRendererFactory=void 0;var r=i(2),n=i(45),o=i(20),s=i(19),a=i(10);function l(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}function c(t,e){return t[e]<<8|t[e+1]}function h(t,e){return(t[e]<<24|t[e+1]<<16)>>16}function u(t,e){return t[e]<<24>>24}function p(t,e){return h(t,e)/16384}function d(t){const e=t.length;let i=32768;return e<1240?i=107:e<33900&&(i=1131),i}function f(t,e,i){const n=1===c(t,e+2)?l(t,e+8):l(t,e+16),o=c(t,e+n);let s,a,h;if(4===o){c(t,e+n+2);const i=c(t,e+n+6)>>1;for(a=e+n+14,s=[],h=0;h<i;h++,a+=2)s[h]={end:c(t,a)};for(a+=2,h=0;h<i;h++,a+=2)s[h].start=c(t,a);for(h=0;h<i;h++,a+=2)s[h].idDelta=c(t,a);for(h=0;h<i;h++,a+=2){let e=c(t,a);if(0!==e){s[h].ids=[];for(let i=0,r=s[h].end-s[h].start+1;i<r;i++)s[h].ids[i]=c(t,a+e),e+=2}}return s}if(12===o){const i=l(t,e+n+12);for(a=e+n+16,s=[],h=0;h<i;h++)e=l(t,a),s.push({start:e,end:l(t,a+4),idDelta:l(t,a+8)-e}),a+=12;return s}throw new r.FormatError(`unsupported cmap: ${o}`)}function g(t,e,i,r){const o=new n.CFFParser(new a.Stream(t,e,i-e),{},r).parse();return{glyphs:o.charStrings.objects,subrs:o.topDict.privateDict&&o.topDict.privateDict.subrsIndex&&o.topDict.privateDict.subrsIndex.objects,gsubrs:o.globalSubrIndex&&o.globalSubrIndex.objects,isCFFCIDFont:o.isCIDFont,fdSelect:o.fdSelect,fdArray:o.fdArray}}function m(t,e){const i=e.codePointAt(0);let r=0,n=0,o=t.length-1;for(;n<o;){const e=n+o+1>>1;i<t[e].start?o=e-1:n=e}return t[n].start<=i&&i<=t[n].end&&(r=t[n].idDelta+(t[n].ids?t[n].ids[i-t[n].start]:i)&65535),{charCode:i,glyphId:r}}function y(t,e,i){function r(t,i){e.push({cmd:"moveTo",args:[t,i]})}function n(t,i){e.push({cmd:"lineTo",args:[t,i]})}function o(t,i,r,n){e.push({cmd:"quadraticCurveTo",args:[t,i,r,n]})}let s=0;const a=h(t,s);let l,d=0,f=0;if(s+=10,a<0)do{l=c(t,s);const r=c(t,s+2);let n,o;s+=4,1&l?(2&l?(n=h(t,s),o=h(t,s+2)):(n=c(t,s),o=c(t,s+2)),s+=4):2&l?(n=u(t,s++),o=u(t,s++)):(n=t[s++],o=t[s++]),2&l?(d=n,f=o):(d=0,f=0);let a=1,g=1,m=0,v=0;8&l?(a=g=p(t,s),s+=2):64&l?(a=p(t,s),g=p(t,s+2),s+=4):128&l&&(a=p(t,s),m=p(t,s+2),v=p(t,s+4),g=p(t,s+6),s+=8);const b=i.glyphs[r];b&&(e.push({cmd:"save"},{cmd:"transform",args:[a,m,v,g,d,f]}),y(b,e,i),e.push({cmd:"restore"}))}while(32&l);else{const e=[];let i,u;for(i=0;i<a;i++)e.push(c(t,s)),s+=2;s+=2+c(t,s);const p=e[e.length-1]+1,g=[];for(;g.length<p;){l=t[s++];let e=1;for(8&l&&(e+=t[s++]);e-- >0;)g.push({flags:l})}for(i=0;i<p;i++){switch(18&g[i].flags){case 0:d+=h(t,s),s+=2;break;case 2:d-=t[s++];break;case 18:d+=t[s++]}g[i].x=d}for(i=0;i<p;i++){switch(36&g[i].flags){case 0:f+=h(t,s),s+=2;break;case 4:f-=t[s++];break;case 36:f+=t[s++]}g[i].y=f}let m=0;for(s=0;s<a;s++){const t=e[s],a=g.slice(m,t+1);if(1&a[0].flags)a.push(a[0]);else if(1&a[a.length-1].flags)a.unshift(a[a.length-1]);else{const t={flags:1,x:(a[0].x+a[a.length-1].x)/2,y:(a[0].y+a[a.length-1].y)/2};a.unshift(t),a.push(t)}for(r(a[0].x,a[0].y),i=1,u=a.length;i<u;i++)1&a[i].flags?n(a[i].x,a[i].y):1&a[i+1].flags?(o(a[i].x,a[i].y,a[i+1].x,a[i+1].y),i++):o(a[i].x,a[i].y,(a[i].x+a[i+1].x)/2,(a[i].y+a[i+1].y)/2);m=t+1}}}function v(t,e,i,n){function o(t,i){e.push({cmd:"moveTo",args:[t,i]})}function a(t,i){e.push({cmd:"lineTo",args:[t,i]})}function l(t,i,r,n,o,s){e.push({cmd:"bezierCurveTo",args:[t,i,r,n,o,s]})}const c=[];let h=0,u=0,p=0;!function t(f){let g=0;for(;g<f.length;){let y,b,w,x,S,k,C,A,_,T=!1,O=f[g++];switch(O){case 1:case 3:case 18:case 23:p+=c.length>>1,T=!0;break;case 4:u+=c.pop(),o(h,u),T=!0;break;case 5:for(;c.length>0;)h+=c.shift(),u+=c.shift(),a(h,u);break;case 6:for(;c.length>0&&(h+=c.shift(),a(h,u),0!==c.length);)u+=c.shift(),a(h,u);break;case 7:for(;c.length>0&&(u+=c.shift(),a(h,u),0!==c.length);)h+=c.shift(),a(h,u);break;case 8:for(;c.length>0;)y=h+c.shift(),w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+c.shift(),l(y,w,b,x,h,u);break;case 10:if(A=c.pop(),_=null,i.isCFFCIDFont){const t=i.fdSelect.getFDIndex(n);if(t>=0&&t<i.fdArray.length){const e=i.fdArray[t];let r;e.privateDict&&e.privateDict.subrsIndex&&(r=e.privateDict.subrsIndex.objects),r&&(A+=d(r),_=r[A])}else(0,r.warn)("Invalid fd index for glyph index.")}else _=i.subrs[A+i.subrsBias];_&&t(_);break;case 11:return;case 12:switch(O=f[g++],O){case 34:y=h+c.shift(),b=y+c.shift(),S=u+c.shift(),h=b+c.shift(),l(y,u,b,S,h,S),y=h+c.shift(),b=y+c.shift(),h=b+c.shift(),l(y,S,b,u,h,u);break;case 35:y=h+c.shift(),w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+c.shift(),l(y,w,b,x,h,u),y=h+c.shift(),w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+c.shift(),l(y,w,b,x,h,u),c.pop();break;case 36:y=h+c.shift(),S=u+c.shift(),b=y+c.shift(),k=S+c.shift(),h=b+c.shift(),l(y,S,b,k,h,k),y=h+c.shift(),b=y+c.shift(),C=k+c.shift(),h=b+c.shift(),l(y,k,b,C,h,u);break;case 37:const t=h,e=u;y=h+c.shift(),w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+c.shift(),l(y,w,b,x,h,u),y=h+c.shift(),w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b,u=x,Math.abs(h-t)>Math.abs(u-e)?h+=c.shift():u+=c.shift(),l(y,w,b,x,h,u);break;default:throw new r.FormatError(`unknown operator: 12 ${O}`)}break;case 14:if(c.length>=4){const t=c.pop(),r=c.pop();u=c.pop(),h=c.pop(),e.push({cmd:"save"},{cmd:"translate",args:[h,u]});let n=m(i.cmap,String.fromCharCode(i.glyphNameMap[s.StandardEncoding[t]]));v(i.glyphs[n.glyphId],e,i,n.glyphId),e.push({cmd:"restore"}),n=m(i.cmap,String.fromCharCode(i.glyphNameMap[s.StandardEncoding[r]])),v(i.glyphs[n.glyphId],e,i,n.glyphId)}return;case 19:case 20:p+=c.length>>1,g+=p+7>>3,T=!0;break;case 21:u+=c.pop(),h+=c.pop(),o(h,u),T=!0;break;case 22:h+=c.pop(),o(h,u),T=!0;break;case 24:for(;c.length>2;)y=h+c.shift(),w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+c.shift(),l(y,w,b,x,h,u);h+=c.shift(),u+=c.shift(),a(h,u);break;case 25:for(;c.length>6;)h+=c.shift(),u+=c.shift(),a(h,u);y=h+c.shift(),w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+c.shift(),l(y,w,b,x,h,u);break;case 26:for(c.length%2&&(h+=c.shift());c.length>0;)y=h,w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b,u=x+c.shift(),l(y,w,b,x,h,u);break;case 27:for(c.length%2&&(u+=c.shift());c.length>0;)y=h+c.shift(),w=u,b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x,l(y,w,b,x,h,u);break;case 28:c.push((f[g]<<24|f[g+1]<<16)>>16),g+=2;break;case 29:A=c.pop()+i.gsubrsBias,_=i.gsubrs[A],_&&t(_);break;case 30:for(;c.length>0&&(y=h,w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+(1===c.length?c.shift():0),l(y,w,b,x,h,u),0!==c.length);)y=h+c.shift(),w=u,b=y+c.shift(),x=w+c.shift(),u=x+c.shift(),h=b+(1===c.length?c.shift():0),l(y,w,b,x,h,u);break;case 31:for(;c.length>0&&(y=h+c.shift(),w=u,b=y+c.shift(),x=w+c.shift(),u=x+c.shift(),h=b+(1===c.length?c.shift():0),l(y,w,b,x,h,u),0!==c.length);)y=h,w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+(1===c.length?c.shift():0),l(y,w,b,x,h,u);break;default:if(O<32)throw new r.FormatError(`unknown operator: ${O}`);O<247?c.push(O-139):O<251?c.push(256*(O-247)+f[g++]+108):O<255?c.push(256*-(O-251)-f[g++]-108):(c.push((f[g]<<24|f[g+1]<<16|f[g+2]<<8|f[g+3])/65536),g+=4)}T&&(c.length=0)}}(t)}const b=[];class w{constructor(t){this.constructor===w&&(0,r.unreachable)("Cannot initialize CompiledFont."),this.fontMatrix=t,this.compiledGlyphs=Object.create(null),this.compiledCharCodeToGlyphId=Object.create(null)}getPathJs(t){const{charCode:e,glyphId:i}=m(this.cmap,t);let r=this.compiledGlyphs[i];if(!r)try{r=this.compileGlyph(this.glyphs[i],i),this.compiledGlyphs[i]=r}catch(t){throw this.compiledGlyphs[i]=b,void 0===this.compiledCharCodeToGlyphId[e]&&(this.compiledCharCodeToGlyphId[e]=i),t}return void 0===this.compiledCharCodeToGlyphId[e]&&(this.compiledCharCodeToGlyphId[e]=i),r}compileGlyph(t,e){if(!t||0===t.length||14===t[0])return b;let i=this.fontMatrix;if(this.isCFFCIDFont){const t=this.fdSelect.getFDIndex(e);t>=0&&t<this.fdArray.length?i=this.fdArray[t].getByName("FontMatrix")||r.FONT_IDENTITY_MATRIX:(0,r.warn)("Invalid fd index for glyph index.")}const n=[{cmd:"save"},{cmd:"transform",args:i.slice()},{cmd:"scale",args:["size","-size"]}];return this.compileGlyphImpl(t,n,e),n.push({cmd:"restore"}),n}compileGlyphImpl(){(0,r.unreachable)("Children classes should implement this.")}hasBuiltPath(t){const{charCode:e,glyphId:i}=m(this.cmap,t);return void 0!==this.compiledGlyphs[i]&&void 0!==this.compiledCharCodeToGlyphId[e]}}class x extends w{constructor(t,e,i){super(i||[488e-6,0,0,488e-6,0,0]),this.glyphs=t,this.cmap=e}compileGlyphImpl(t,e){y(t,e,this)}}class S extends w{constructor(t,e,i,r){super(i||[.001,0,0,.001,0,0]),this.glyphs=t.glyphs,this.gsubrs=t.gsubrs||[],this.subrs=t.subrs||[],this.cmap=e,this.glyphNameMap=r||(0,o.getGlyphsUnicode)(),this.gsubrsBias=d(this.gsubrs),this.subrsBias=d(this.subrs),this.isCFFCIDFont=t.isCFFCIDFont,this.fdSelect=t.fdSelect,this.fdArray=t.fdArray}compileGlyphImpl(t,e,i){v(t,e,this,i)}}e.FontRendererFactory=class{static create(t,e){const i=new Uint8Array(t.data);let n,o,s,a,h,u;const p=c(i,4);for(let t=0,d=12;t<p;t++,d+=16){const t=(0,r.bytesToString)(i.subarray(d,d+4)),p=l(i,d+8),m=l(i,d+12);switch(t){case"cmap":n=f(i,p);break;case"glyf":o=i.subarray(p,p+m);break;case"loca":s=i.subarray(p,p+m);break;case"head":u=c(i,p+18),h=c(i,p+50);break;case"CFF ":a=g(i,p,p+m,e)}}if(o){const e=u?[1/u,0,0,1/u,0,0]:t.fontMatrix;return new x(function(t,e,i){let r,n;i?(r=4,n=l):(r=2,n=(t,e)=>2*c(t,e));const o=[];let s=n(e,0);for(let i=r;i<e.length;i+=r){const r=n(e,i);o.push(t.subarray(s,r)),s=r}return o}(o,s,h),n,e)}return new S(a,n,t.fontMatrix,t.glyphNameMap)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getMetrics=e.getFontBasicMetrics=void 0;var r=i(8);const n=(0,r.getLookupTableFactory)((function(t){t.Courier=600,t["Courier-Bold"]=600,t["Courier-BoldOblique"]=600,t["Courier-Oblique"]=600,t.Helvetica=(0,r.getLookupTableFactory)((function(t){t.space=278,t.exclam=278,t.quotedbl=355,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=667,t.quoteright=222,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=278,t.semicolon=278,t.less=584,t.equal=584,t.greater=584,t.question=556,t.at=1015,t.A=667,t.B=667,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=500,t.K=667,t.L=556,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=278,t.backslash=278,t.bracketright=278,t.asciicircum=469,t.underscore=556,t.quoteleft=222,t.a=556,t.b=556,t.c=500,t.d=556,t.e=556,t.f=278,t.g=556,t.h=556,t.i=222,t.j=222,t.k=500,t.l=222,t.m=833,t.n=556,t.o=556,t.p=556,t.q=556,t.r=333,t.s=500,t.t=278,t.u=556,t.v=500,t.w=722,t.x=500,t.y=500,t.z=500,t.braceleft=334,t.bar=260,t.braceright=334,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=191,t.quotedblleft=333,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=500,t.fl=500,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=537,t.bullet=350,t.quotesinglbase=222,t.quotedblbase=333,t.quotedblright=333,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=556,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=222,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=556,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=667,t.aacute=556,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=500,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=500,t.aring=556,t.Ncommaaccent=722,t.lacute=222,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=500,t.scedilla=500,t.iacute=278,t.lozenge=471,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=556,t.acircumflex=556,t.Amacron=667,t.rcaron=333,t.ccedilla=500,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=643,t.Umacron=722,t.uring=556,t.threesuperior=333,t.Ograve=778,t.Agrave=667,t.Abreve=667,t.multiply=584,t.uacute=556,t.Tcaron=611,t.partialdiff=476,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=500,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=260,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=333,t.omacron=556,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=222,t.tcaron=317,t.eogonek=556,t.Uogonek=722,t.Aacute=667,t.Adieresis=667,t.egrave=556,t.zacute=500,t.iogonek=222,t.Oacute=778,t.oacute=556,t.amacron=556,t.sacute=500,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=556,t.twosuperior=333,t.Odieresis=778,t.mu=556,t.igrave=278,t.ohungarumlaut=556,t.Eogonek=667,t.dcroat=556,t.threequarters=834,t.Scedilla=667,t.lcaron=299,t.Kcommaaccent=667,t.Lacute=556,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=556,t.onehalf=834,t.lessequal=549,t.ocircumflex=556,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=556,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=556,t.Ccaron=722,t.ugrave=556,t.radical=453,t.Dcaron=722,t.rcommaaccent=333,t.Ntilde=722,t.otilde=556,t.Rcommaaccent=722,t.Lcommaaccent=556,t.Atilde=667,t.Aogonek=667,t.Aring=667,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=500,t.minus=584,t.Icircumflex=278,t.ncaron=556,t.tcommaaccent=278,t.logicalnot=584,t.odieresis=556,t.udieresis=556,t.notequal=549,t.gcommaaccent=556,t.eth=556,t.zcaron=500,t.ncommaaccent=556,t.onesuperior=333,t.imacron=278,t.Euro=556})),t["Helvetica-Bold"]=(0,r.getLookupTableFactory)((function(t){t.space=278,t.exclam=333,t.quotedbl=474,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=722,t.quoteright=278,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=333,t.semicolon=333,t.less=584,t.equal=584,t.greater=584,t.question=611,t.at=975,t.A=722,t.B=722,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=556,t.K=722,t.L=611,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=584,t.underscore=556,t.quoteleft=278,t.a=556,t.b=611,t.c=556,t.d=611,t.e=556,t.f=333,t.g=611,t.h=611,t.i=278,t.j=278,t.k=556,t.l=278,t.m=889,t.n=611,t.o=611,t.p=611,t.q=611,t.r=389,t.s=556,t.t=333,t.u=611,t.v=556,t.w=778,t.x=556,t.y=556,t.z=500,t.braceleft=389,t.bar=280,t.braceright=389,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=238,t.quotedblleft=500,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=611,t.fl=611,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=556,t.bullet=350,t.quotesinglbase=278,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=611,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=278,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=611,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=722,t.aacute=556,t.Ucircumflex=722,t.yacute=556,t.scommaaccent=556,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=611,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=556,t.aring=556,t.Ncommaaccent=722,t.lacute=278,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=556,t.scedilla=556,t.iacute=278,t.lozenge=494,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=611,t.acircumflex=556,t.Amacron=722,t.rcaron=389,t.ccedilla=556,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=743,t.Umacron=722,t.uring=611,t.threesuperior=333,t.Ograve=778,t.Agrave=722,t.Abreve=722,t.multiply=584,t.uacute=611,t.Tcaron=611,t.partialdiff=494,t.ydieresis=556,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=556,t.nacute=611,t.umacron=611,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=280,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=389,t.omacron=611,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=278,t.tcaron=389,t.eogonek=556,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=556,t.zacute=500,t.iogonek=278,t.Oacute=778,t.oacute=611,t.amacron=556,t.sacute=556,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=611,t.twosuperior=333,t.Odieresis=778,t.mu=611,t.igrave=278,t.ohungarumlaut=611,t.Eogonek=667,t.dcroat=611,t.threequarters=834,t.Scedilla=667,t.lcaron=400,t.Kcommaaccent=722,t.Lacute=611,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=611,t.onehalf=834,t.lessequal=549,t.ocircumflex=611,t.ntilde=611,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=611,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=611,t.Ccaron=722,t.ugrave=611,t.radical=549,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=722,t.otilde=611,t.Rcommaaccent=722,t.Lcommaaccent=611,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=556,t.minus=584,t.Icircumflex=278,t.ncaron=611,t.tcommaaccent=333,t.logicalnot=584,t.odieresis=611,t.udieresis=611,t.notequal=549,t.gcommaaccent=611,t.eth=611,t.zcaron=500,t.ncommaaccent=611,t.onesuperior=333,t.imacron=278,t.Euro=556})),t["Helvetica-BoldOblique"]=(0,r.getLookupTableFactory)((function(t){t.space=278,t.exclam=333,t.quotedbl=474,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=722,t.quoteright=278,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=333,t.semicolon=333,t.less=584,t.equal=584,t.greater=584,t.question=611,t.at=975,t.A=722,t.B=722,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=556,t.K=722,t.L=611,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=584,t.underscore=556,t.quoteleft=278,t.a=556,t.b=611,t.c=556,t.d=611,t.e=556,t.f=333,t.g=611,t.h=611,t.i=278,t.j=278,t.k=556,t.l=278,t.m=889,t.n=611,t.o=611,t.p=611,t.q=611,t.r=389,t.s=556,t.t=333,t.u=611,t.v=556,t.w=778,t.x=556,t.y=556,t.z=500,t.braceleft=389,t.bar=280,t.braceright=389,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=238,t.quotedblleft=500,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=611,t.fl=611,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=556,t.bullet=350,t.quotesinglbase=278,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=611,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=278,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=611,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=722,t.aacute=556,t.Ucircumflex=722,t.yacute=556,t.scommaaccent=556,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=611,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=556,t.aring=556,t.Ncommaaccent=722,t.lacute=278,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=556,t.scedilla=556,t.iacute=278,t.lozenge=494,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=611,t.acircumflex=556,t.Amacron=722,t.rcaron=389,t.ccedilla=556,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=743,t.Umacron=722,t.uring=611,t.threesuperior=333,t.Ograve=778,t.Agrave=722,t.Abreve=722,t.multiply=584,t.uacute=611,t.Tcaron=611,t.partialdiff=494,t.ydieresis=556,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=556,t.nacute=611,t.umacron=611,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=280,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=389,t.omacron=611,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=278,t.tcaron=389,t.eogonek=556,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=556,t.zacute=500,t.iogonek=278,t.Oacute=778,t.oacute=611,t.amacron=556,t.sacute=556,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=611,t.twosuperior=333,t.Odieresis=778,t.mu=611,t.igrave=278,t.ohungarumlaut=611,t.Eogonek=667,t.dcroat=611,t.threequarters=834,t.Scedilla=667,t.lcaron=400,t.Kcommaaccent=722,t.Lacute=611,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=611,t.onehalf=834,t.lessequal=549,t.ocircumflex=611,t.ntilde=611,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=611,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=611,t.Ccaron=722,t.ugrave=611,t.radical=549,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=722,t.otilde=611,t.Rcommaaccent=722,t.Lcommaaccent=611,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=556,t.minus=584,t.Icircumflex=278,t.ncaron=611,t.tcommaaccent=333,t.logicalnot=584,t.odieresis=611,t.udieresis=611,t.notequal=549,t.gcommaaccent=611,t.eth=611,t.zcaron=500,t.ncommaaccent=611,t.onesuperior=333,t.imacron=278,t.Euro=556})),t["Helvetica-Oblique"]=(0,r.getLookupTableFactory)((function(t){t.space=278,t.exclam=278,t.quotedbl=355,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=667,t.quoteright=222,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=278,t.semicolon=278,t.less=584,t.equal=584,t.greater=584,t.question=556,t.at=1015,t.A=667,t.B=667,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=500,t.K=667,t.L=556,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=278,t.backslash=278,t.bracketright=278,t.asciicircum=469,t.underscore=556,t.quoteleft=222,t.a=556,t.b=556,t.c=500,t.d=556,t.e=556,t.f=278,t.g=556,t.h=556,t.i=222,t.j=222,t.k=500,t.l=222,t.m=833,t.n=556,t.o=556,t.p=556,t.q=556,t.r=333,t.s=500,t.t=278,t.u=556,t.v=500,t.w=722,t.x=500,t.y=500,t.z=500,t.braceleft=334,t.bar=260,t.braceright=334,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=191,t.quotedblleft=333,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=500,t.fl=500,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=537,t.bullet=350,t.quotesinglbase=222,t.quotedblbase=333,t.quotedblright=333,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=556,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=222,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=556,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=667,t.aacute=556,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=500,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=500,t.aring=556,t.Ncommaaccent=722,t.lacute=222,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=500,t.scedilla=500,t.iacute=278,t.lozenge=471,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=556,t.acircumflex=556,t.Amacron=667,t.rcaron=333,t.ccedilla=500,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=643,t.Umacron=722,t.uring=556,t.threesuperior=333,t.Ograve=778,t.Agrave=667,t.Abreve=667,t.multiply=584,t.uacute=556,t.Tcaron=611,t.partialdiff=476,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=500,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=260,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=333,t.omacron=556,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=222,t.tcaron=317,t.eogonek=556,t.Uogonek=722,t.Aacute=667,t.Adieresis=667,t.egrave=556,t.zacute=500,t.iogonek=222,t.Oacute=778,t.oacute=556,t.amacron=556,t.sacute=500,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=556,t.twosuperior=333,t.Odieresis=778,t.mu=556,t.igrave=278,t.ohungarumlaut=556,t.Eogonek=667,t.dcroat=556,t.threequarters=834,t.Scedilla=667,t.lcaron=299,t.Kcommaaccent=667,t.Lacute=556,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=556,t.onehalf=834,t.lessequal=549,t.ocircumflex=556,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=556,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=556,t.Ccaron=722,t.ugrave=556,t.radical=453,t.Dcaron=722,t.rcommaaccent=333,t.Ntilde=722,t.otilde=556,t.Rcommaaccent=722,t.Lcommaaccent=556,t.Atilde=667,t.Aogonek=667,t.Aring=667,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=500,t.minus=584,t.Icircumflex=278,t.ncaron=556,t.tcommaaccent=278,t.logicalnot=584,t.odieresis=556,t.udieresis=556,t.notequal=549,t.gcommaaccent=556,t.eth=556,t.zcaron=500,t.ncommaaccent=556,t.onesuperior=333,t.imacron=278,t.Euro=556})),t.Symbol=(0,r.getLookupTableFactory)((function(t){t.space=250,t.exclam=333,t.universal=713,t.numbersign=500,t.existential=549,t.percent=833,t.ampersand=778,t.suchthat=439,t.parenleft=333,t.parenright=333,t.asteriskmath=500,t.plus=549,t.comma=250,t.minus=549,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=278,t.semicolon=278,t.less=549,t.equal=549,t.greater=549,t.question=444,t.congruent=549,t.Alpha=722,t.Beta=667,t.Chi=722,t.Delta=612,t.Epsilon=611,t.Phi=763,t.Gamma=603,t.Eta=722,t.Iota=333,t.theta1=631,t.Kappa=722,t.Lambda=686,t.Mu=889,t.Nu=722,t.Omicron=722,t.Pi=768,t.Theta=741,t.Rho=556,t.Sigma=592,t.Tau=611,t.Upsilon=690,t.sigma1=439,t.Omega=768,t.Xi=645,t.Psi=795,t.Zeta=611,t.bracketleft=333,t.therefore=863,t.bracketright=333,t.perpendicular=658,t.underscore=500,t.radicalex=500,t.alpha=631,t.beta=549,t.chi=549,t.delta=494,t.epsilon=439,t.phi=521,t.gamma=411,t.eta=603,t.iota=329,t.phi1=603,t.kappa=549,t.lambda=549,t.mu=576,t.nu=521,t.omicron=549,t.pi=549,t.theta=521,t.rho=549,t.sigma=603,t.tau=439,t.upsilon=576,t.omega1=713,t.omega=686,t.xi=493,t.psi=686,t.zeta=494,t.braceleft=480,t.bar=200,t.braceright=480,t.similar=549,t.Euro=750,t.Upsilon1=620,t.minute=247,t.lessequal=549,t.fraction=167,t.infinity=713,t.florin=500,t.club=753,t.diamond=753,t.heart=753,t.spade=753,t.arrowboth=1042,t.arrowleft=987,t.arrowup=603,t.arrowright=987,t.arrowdown=603,t.degree=400,t.plusminus=549,t.second=411,t.greaterequal=549,t.multiply=549,t.proportional=713,t.partialdiff=494,t.bullet=460,t.divide=549,t.notequal=549,t.equivalence=549,t.approxequal=549,t.ellipsis=1e3,t.arrowvertex=603,t.arrowhorizex=1e3,t.carriagereturn=658,t.aleph=823,t.Ifraktur=686,t.Rfraktur=795,t.weierstrass=987,t.circlemultiply=768,t.circleplus=768,t.emptyset=823,t.intersection=768,t.union=768,t.propersuperset=713,t.reflexsuperset=713,t.notsubset=713,t.propersubset=713,t.reflexsubset=713,t.element=713,t.notelement=713,t.angle=768,t.gradient=713,t.registerserif=790,t.copyrightserif=790,t.trademarkserif=890,t.product=823,t.radical=549,t.dotmath=250,t.logicalnot=713,t.logicaland=603,t.logicalor=603,t.arrowdblboth=1042,t.arrowdblleft=987,t.arrowdblup=603,t.arrowdblright=987,t.arrowdbldown=603,t.lozenge=494,t.angleleft=329,t.registersans=790,t.copyrightsans=790,t.trademarksans=786,t.summation=713,t.parenlefttp=384,t.parenleftex=384,t.parenleftbt=384,t.bracketlefttp=384,t.bracketleftex=384,t.bracketleftbt=384,t.bracelefttp=494,t.braceleftmid=494,t.braceleftbt=494,t.braceex=494,t.angleright=329,t.integral=274,t.integraltp=686,t.integralex=686,t.integralbt=686,t.parenrighttp=384,t.parenrightex=384,t.parenrightbt=384,t.bracketrighttp=384,t.bracketrightex=384,t.bracketrightbt=384,t.bracerighttp=494,t.bracerightmid=494,t.bracerightbt=494,t.apple=790})),t["Times-Roman"]=(0,r.getLookupTableFactory)((function(t){t.space=250,t.exclam=333,t.quotedbl=408,t.numbersign=500,t.dollar=500,t.percent=833,t.ampersand=778,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=564,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=278,t.semicolon=278,t.less=564,t.equal=564,t.greater=564,t.question=444,t.at=921,t.A=722,t.B=667,t.C=667,t.D=722,t.E=611,t.F=556,t.G=722,t.H=722,t.I=333,t.J=389,t.K=722,t.L=611,t.M=889,t.N=722,t.O=722,t.P=556,t.Q=722,t.R=667,t.S=556,t.T=611,t.U=722,t.V=722,t.W=944,t.X=722,t.Y=722,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=469,t.underscore=500,t.quoteleft=333,t.a=444,t.b=500,t.c=444,t.d=500,t.e=444,t.f=333,t.g=500,t.h=500,t.i=278,t.j=278,t.k=500,t.l=278,t.m=778,t.n=500,t.o=500,t.p=500,t.q=500,t.r=333,t.s=389,t.t=278,t.u=500,t.v=500,t.w=722,t.x=500,t.y=500,t.z=444,t.braceleft=480,t.bar=200,t.braceright=480,t.asciitilde=541,t.exclamdown=333,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=180,t.quotedblleft=444,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=556,t.fl=556,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=453,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=444,t.quotedblright=444,t.guillemotright=500,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=444,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=889,t.ordfeminine=276,t.Lslash=611,t.Oslash=722,t.OE=889,t.ordmasculine=310,t.ae=667,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=722,t.germandbls=500,t.Idieresis=333,t.eacute=444,t.abreve=444,t.uhungarumlaut=500,t.ecaron=444,t.Ydieresis=722,t.divide=564,t.Yacute=722,t.Acircumflex=722,t.aacute=444,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=444,t.Uacute=722,t.uogonek=500,t.Edieresis=611,t.Dcroat=722,t.commaaccent=250,t.copyright=760,t.Emacron=611,t.ccaron=444,t.aring=444,t.Ncommaaccent=722,t.lacute=278,t.agrave=444,t.Tcommaaccent=611,t.Cacute=667,t.atilde=444,t.Edotaccent=611,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=471,t.Rcaron=667,t.Gcommaaccent=722,t.ucircumflex=500,t.acircumflex=444,t.Amacron=722,t.rcaron=333,t.ccedilla=444,t.Zdotaccent=611,t.Thorn=556,t.Omacron=722,t.Racute=667,t.Sacute=556,t.dcaron=588,t.Umacron=722,t.uring=500,t.threesuperior=300,t.Ograve=722,t.Agrave=722,t.Abreve=722,t.multiply=564,t.uacute=500,t.Tcaron=611,t.partialdiff=476,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=611,t.adieresis=444,t.edieresis=444,t.cacute=444,t.nacute=500,t.umacron=500,t.Ncaron=722,t.Iacute=333,t.plusminus=564,t.brokenbar=200,t.registered=760,t.Gbreve=722,t.Idotaccent=333,t.summation=600,t.Egrave=611,t.racute=333,t.omacron=500,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=667,t.lcommaaccent=278,t.tcaron=326,t.eogonek=444,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=444,t.zacute=444,t.iogonek=278,t.Oacute=722,t.oacute=500,t.amacron=444,t.sacute=389,t.idieresis=278,t.Ocircumflex=722,t.Ugrave=722,t.Delta=612,t.thorn=500,t.twosuperior=300,t.Odieresis=722,t.mu=500,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=611,t.dcroat=500,t.threequarters=750,t.Scedilla=556,t.lcaron=344,t.Kcommaaccent=722,t.Lacute=611,t.trademark=980,t.edotaccent=444,t.Igrave=333,t.Imacron=333,t.Lcaron=611,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=500,t.Uhungarumlaut=722,t.Eacute=611,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=556,t.Scommaaccent=556,t.Ohungarumlaut=722,t.degree=400,t.ograve=500,t.Ccaron=667,t.ugrave=500,t.radical=453,t.Dcaron=722,t.rcommaaccent=333,t.Ntilde=722,t.otilde=500,t.Rcommaaccent=667,t.Lcommaaccent=611,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=722,t.zdotaccent=444,t.Ecaron=611,t.Iogonek=333,t.kcommaaccent=500,t.minus=564,t.Icircumflex=333,t.ncaron=500,t.tcommaaccent=278,t.logicalnot=564,t.odieresis=500,t.udieresis=500,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=444,t.ncommaaccent=500,t.onesuperior=300,t.imacron=278,t.Euro=500})),t["Times-Bold"]=(0,r.getLookupTableFactory)((function(t){t.space=250,t.exclam=333,t.quotedbl=555,t.numbersign=500,t.dollar=500,t.percent=1e3,t.ampersand=833,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=570,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=333,t.semicolon=333,t.less=570,t.equal=570,t.greater=570,t.question=500,t.at=930,t.A=722,t.B=667,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=778,t.I=389,t.J=500,t.K=778,t.L=667,t.M=944,t.N=722,t.O=778,t.P=611,t.Q=778,t.R=722,t.S=556,t.T=667,t.U=722,t.V=722,t.W=1e3,t.X=722,t.Y=722,t.Z=667,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=581,t.underscore=500,t.quoteleft=333,t.a=500,t.b=556,t.c=444,t.d=556,t.e=444,t.f=333,t.g=500,t.h=556,t.i=278,t.j=333,t.k=556,t.l=278,t.m=833,t.n=556,t.o=500,t.p=556,t.q=556,t.r=444,t.s=389,t.t=333,t.u=556,t.v=500,t.w=722,t.x=500,t.y=500,t.z=444,t.braceleft=394,t.bar=220,t.braceright=394,t.asciitilde=520,t.exclamdown=333,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=278,t.quotedblleft=500,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=556,t.fl=556,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=540,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=500,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=500,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=300,t.Lslash=667,t.Oslash=778,t.OE=1e3,t.ordmasculine=330,t.ae=722,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=722,t.germandbls=556,t.Idieresis=389,t.eacute=444,t.abreve=500,t.uhungarumlaut=556,t.ecaron=444,t.Ydieresis=722,t.divide=570,t.Yacute=722,t.Acircumflex=722,t.aacute=500,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=500,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=747,t.Emacron=667,t.ccaron=444,t.aring=500,t.Ncommaaccent=722,t.lacute=278,t.agrave=500,t.Tcommaaccent=667,t.Cacute=722,t.atilde=500,t.Edotaccent=667,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=494,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=556,t.acircumflex=500,t.Amacron=722,t.rcaron=444,t.ccedilla=444,t.Zdotaccent=667,t.Thorn=611,t.Omacron=778,t.Racute=722,t.Sacute=556,t.dcaron=672,t.Umacron=722,t.uring=556,t.threesuperior=300,t.Ograve=778,t.Agrave=722,t.Abreve=722,t.multiply=570,t.uacute=556,t.Tcaron=667,t.partialdiff=494,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=500,t.edieresis=444,t.cacute=444,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=389,t.plusminus=570,t.brokenbar=220,t.registered=747,t.Gbreve=778,t.Idotaccent=389,t.summation=600,t.Egrave=667,t.racute=444,t.omacron=500,t.Zacute=667,t.Zcaron=667,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=278,t.tcaron=416,t.eogonek=444,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=444,t.zacute=444,t.iogonek=278,t.Oacute=778,t.oacute=500,t.amacron=500,t.sacute=389,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=556,t.twosuperior=300,t.Odieresis=778,t.mu=556,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=667,t.dcroat=556,t.threequarters=750,t.Scedilla=556,t.lcaron=394,t.Kcommaaccent=778,t.Lacute=667,t.trademark=1e3,t.edotaccent=444,t.Igrave=389,t.Imacron=389,t.Lcaron=667,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=556,t.Scommaaccent=556,t.Ohungarumlaut=778,t.degree=400,t.ograve=500,t.Ccaron=722,t.ugrave=556,t.radical=549,t.Dcaron=722,t.rcommaaccent=444,t.Ntilde=722,t.otilde=500,t.Rcommaaccent=722,t.Lcommaaccent=667,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=778,t.zdotaccent=444,t.Ecaron=667,t.Iogonek=389,t.kcommaaccent=556,t.minus=570,t.Icircumflex=389,t.ncaron=556,t.tcommaaccent=333,t.logicalnot=570,t.odieresis=500,t.udieresis=556,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=444,t.ncommaaccent=556,t.onesuperior=300,t.imacron=278,t.Euro=500})),t["Times-BoldItalic"]=(0,r.getLookupTableFactory)((function(t){t.space=250,t.exclam=389,t.quotedbl=555,t.numbersign=500,t.dollar=500,t.percent=833,t.ampersand=778,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=570,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=333,t.semicolon=333,t.less=570,t.equal=570,t.greater=570,t.question=500,t.at=832,t.A=667,t.B=667,t.C=667,t.D=722,t.E=667,t.F=667,t.G=722,t.H=778,t.I=389,t.J=500,t.K=667,t.L=611,t.M=889,t.N=722,t.O=722,t.P=611,t.Q=722,t.R=667,t.S=556,t.T=611,t.U=722,t.V=667,t.W=889,t.X=667,t.Y=611,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=570,t.underscore=500,t.quoteleft=333,t.a=500,t.b=500,t.c=444,t.d=500,t.e=444,t.f=333,t.g=500,t.h=556,t.i=278,t.j=278,t.k=500,t.l=278,t.m=778,t.n=556,t.o=500,t.p=500,t.q=500,t.r=389,t.s=389,t.t=278,t.u=556,t.v=444,t.w=667,t.x=500,t.y=444,t.z=389,t.braceleft=348,t.bar=220,t.braceright=348,t.asciitilde=570,t.exclamdown=389,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=278,t.quotedblleft=500,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=556,t.fl=556,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=500,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=500,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=500,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=944,t.ordfeminine=266,t.Lslash=611,t.Oslash=722,t.OE=944,t.ordmasculine=300,t.ae=722,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=722,t.germandbls=500,t.Idieresis=389,t.eacute=444,t.abreve=500,t.uhungarumlaut=556,t.ecaron=444,t.Ydieresis=611,t.divide=570,t.Yacute=611,t.Acircumflex=667,t.aacute=500,t.Ucircumflex=722,t.yacute=444,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=500,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=747,t.Emacron=667,t.ccaron=444,t.aring=500,t.Ncommaaccent=722,t.lacute=278,t.agrave=500,t.Tcommaaccent=611,t.Cacute=667,t.atilde=500,t.Edotaccent=667,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=494,t.Rcaron=667,t.Gcommaaccent=722,t.ucircumflex=556,t.acircumflex=500,t.Amacron=667,t.rcaron=389,t.ccedilla=444,t.Zdotaccent=611,t.Thorn=611,t.Omacron=722,t.Racute=667,t.Sacute=556,t.dcaron=608,t.Umacron=722,t.uring=556,t.threesuperior=300,t.Ograve=722,t.Agrave=667,t.Abreve=667,t.multiply=570,t.uacute=556,t.Tcaron=611,t.partialdiff=494,t.ydieresis=444,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=500,t.edieresis=444,t.cacute=444,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=389,t.plusminus=570,t.brokenbar=220,t.registered=747,t.Gbreve=722,t.Idotaccent=389,t.summation=600,t.Egrave=667,t.racute=389,t.omacron=500,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=667,t.lcommaaccent=278,t.tcaron=366,t.eogonek=444,t.Uogonek=722,t.Aacute=667,t.Adieresis=667,t.egrave=444,t.zacute=389,t.iogonek=278,t.Oacute=722,t.oacute=500,t.amacron=500,t.sacute=389,t.idieresis=278,t.Ocircumflex=722,t.Ugrave=722,t.Delta=612,t.thorn=500,t.twosuperior=300,t.Odieresis=722,t.mu=576,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=667,t.dcroat=500,t.threequarters=750,t.Scedilla=556,t.lcaron=382,t.Kcommaaccent=667,t.Lacute=611,t.trademark=1e3,t.edotaccent=444,t.Igrave=389,t.Imacron=389,t.Lcaron=611,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=556,t.Scommaaccent=556,t.Ohungarumlaut=722,t.degree=400,t.ograve=500,t.Ccaron=667,t.ugrave=556,t.radical=549,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=722,t.otilde=500,t.Rcommaaccent=667,t.Lcommaaccent=611,t.Atilde=667,t.Aogonek=667,t.Aring=667,t.Otilde=722,t.zdotaccent=389,t.Ecaron=667,t.Iogonek=389,t.kcommaaccent=500,t.minus=606,t.Icircumflex=389,t.ncaron=556,t.tcommaaccent=278,t.logicalnot=606,t.odieresis=500,t.udieresis=556,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=389,t.ncommaaccent=556,t.onesuperior=300,t.imacron=278,t.Euro=500})),t["Times-Italic"]=(0,r.getLookupTableFactory)((function(t){t.space=250,t.exclam=333,t.quotedbl=420,t.numbersign=500,t.dollar=500,t.percent=833,t.ampersand=778,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=675,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=333,t.semicolon=333,t.less=675,t.equal=675,t.greater=675,t.question=500,t.at=920,t.A=611,t.B=611,t.C=667,t.D=722,t.E=611,t.F=611,t.G=722,t.H=722,t.I=333,t.J=444,t.K=667,t.L=556,t.M=833,t.N=667,t.O=722,t.P=611,t.Q=722,t.R=611,t.S=500,t.T=556,t.U=722,t.V=611,t.W=833,t.X=611,t.Y=556,t.Z=556,t.bracketleft=389,t.backslash=278,t.bracketright=389,t.asciicircum=422,t.underscore=500,t.quoteleft=333,t.a=500,t.b=500,t.c=444,t.d=500,t.e=444,t.f=278,t.g=500,t.h=500,t.i=278,t.j=278,t.k=444,t.l=278,t.m=722,t.n=500,t.o=500,t.p=500,t.q=500,t.r=389,t.s=389,t.t=278,t.u=500,t.v=444,t.w=667,t.x=444,t.y=444,t.z=389,t.braceleft=400,t.bar=275,t.braceright=400,t.asciitilde=541,t.exclamdown=389,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=214,t.quotedblleft=556,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=500,t.fl=500,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=523,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=556,t.quotedblright=556,t.guillemotright=500,t.ellipsis=889,t.perthousand=1e3,t.questiondown=500,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=889,t.AE=889,t.ordfeminine=276,t.Lslash=556,t.Oslash=722,t.OE=944,t.ordmasculine=310,t.ae=667,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=667,t.germandbls=500,t.Idieresis=333,t.eacute=444,t.abreve=500,t.uhungarumlaut=500,t.ecaron=444,t.Ydieresis=556,t.divide=675,t.Yacute=556,t.Acircumflex=611,t.aacute=500,t.Ucircumflex=722,t.yacute=444,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=500,t.Uacute=722,t.uogonek=500,t.Edieresis=611,t.Dcroat=722,t.commaaccent=250,t.copyright=760,t.Emacron=611,t.ccaron=444,t.aring=500,t.Ncommaaccent=667,t.lacute=278,t.agrave=500,t.Tcommaaccent=556,t.Cacute=667,t.atilde=500,t.Edotaccent=611,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=471,t.Rcaron=611,t.Gcommaaccent=722,t.ucircumflex=500,t.acircumflex=500,t.Amacron=611,t.rcaron=389,t.ccedilla=444,t.Zdotaccent=556,t.Thorn=611,t.Omacron=722,t.Racute=611,t.Sacute=500,t.dcaron=544,t.Umacron=722,t.uring=500,t.threesuperior=300,t.Ograve=722,t.Agrave=611,t.Abreve=611,t.multiply=675,t.uacute=500,t.Tcaron=556,t.partialdiff=476,t.ydieresis=444,t.Nacute=667,t.icircumflex=278,t.Ecircumflex=611,t.adieresis=500,t.edieresis=444,t.cacute=444,t.nacute=500,t.umacron=500,t.Ncaron=667,t.Iacute=333,t.plusminus=675,t.brokenbar=275,t.registered=760,t.Gbreve=722,t.Idotaccent=333,t.summation=600,t.Egrave=611,t.racute=389,t.omacron=500,t.Zacute=556,t.Zcaron=556,t.greaterequal=549,t.Eth=722,t.Ccedilla=667,t.lcommaaccent=278,t.tcaron=300,t.eogonek=444,t.Uogonek=722,t.Aacute=611,t.Adieresis=611,t.egrave=444,t.zacute=389,t.iogonek=278,t.Oacute=722,t.oacute=500,t.amacron=500,t.sacute=389,t.idieresis=278,t.Ocircumflex=722,t.Ugrave=722,t.Delta=612,t.thorn=500,t.twosuperior=300,t.Odieresis=722,t.mu=500,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=611,t.dcroat=500,t.threequarters=750,t.Scedilla=500,t.lcaron=300,t.Kcommaaccent=667,t.Lacute=556,t.trademark=980,t.edotaccent=444,t.Igrave=333,t.Imacron=333,t.Lcaron=611,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=500,t.Uhungarumlaut=722,t.Eacute=611,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=500,t.Scommaaccent=500,t.Ohungarumlaut=722,t.degree=400,t.ograve=500,t.Ccaron=667,t.ugrave=500,t.radical=453,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=667,t.otilde=500,t.Rcommaaccent=611,t.Lcommaaccent=556,t.Atilde=611,t.Aogonek=611,t.Aring=611,t.Otilde=722,t.zdotaccent=389,t.Ecaron=611,t.Iogonek=333,t.kcommaaccent=444,t.minus=675,t.Icircumflex=333,t.ncaron=500,t.tcommaaccent=278,t.logicalnot=675,t.odieresis=500,t.udieresis=500,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=389,t.ncommaaccent=500,t.onesuperior=300,t.imacron=278,t.Euro=500})),t.ZapfDingbats=(0,r.getLookupTableFactory)((function(t){t.space=278,t.a1=974,t.a2=961,t.a202=974,t.a3=980,t.a4=719,t.a5=789,t.a119=790,t.a118=791,t.a117=690,t.a11=960,t.a12=939,t.a13=549,t.a14=855,t.a15=911,t.a16=933,t.a105=911,t.a17=945,t.a18=974,t.a19=755,t.a20=846,t.a21=762,t.a22=761,t.a23=571,t.a24=677,t.a25=763,t.a26=760,t.a27=759,t.a28=754,t.a6=494,t.a7=552,t.a8=537,t.a9=577,t.a10=692,t.a29=786,t.a30=788,t.a31=788,t.a32=790,t.a33=793,t.a34=794,t.a35=816,t.a36=823,t.a37=789,t.a38=841,t.a39=823,t.a40=833,t.a41=816,t.a42=831,t.a43=923,t.a44=744,t.a45=723,t.a46=749,t.a47=790,t.a48=792,t.a49=695,t.a50=776,t.a51=768,t.a52=792,t.a53=759,t.a54=707,t.a55=708,t.a56=682,t.a57=701,t.a58=826,t.a59=815,t.a60=789,t.a61=789,t.a62=707,t.a63=687,t.a64=696,t.a65=689,t.a66=786,t.a67=787,t.a68=713,t.a69=791,t.a70=785,t.a71=791,t.a72=873,t.a73=761,t.a74=762,t.a203=762,t.a75=759,t.a204=759,t.a76=892,t.a77=892,t.a78=788,t.a79=784,t.a81=438,t.a82=138,t.a83=277,t.a84=415,t.a97=392,t.a98=392,t.a99=668,t.a100=668,t.a89=390,t.a90=390,t.a93=317,t.a94=317,t.a91=276,t.a92=276,t.a205=509,t.a85=509,t.a206=410,t.a86=410,t.a87=234,t.a88=234,t.a95=334,t.a96=334,t.a101=732,t.a102=544,t.a103=544,t.a104=910,t.a106=667,t.a107=760,t.a108=760,t.a112=776,t.a111=595,t.a110=694,t.a109=626,t.a120=788,t.a121=788,t.a122=788,t.a123=788,t.a124=788,t.a125=788,t.a126=788,t.a127=788,t.a128=788,t.a129=788,t.a130=788,t.a131=788,t.a132=788,t.a133=788,t.a134=788,t.a135=788,t.a136=788,t.a137=788,t.a138=788,t.a139=788,t.a140=788,t.a141=788,t.a142=788,t.a143=788,t.a144=788,t.a145=788,t.a146=788,t.a147=788,t.a148=788,t.a149=788,t.a150=788,t.a151=788,t.a152=788,t.a153=788,t.a154=788,t.a155=788,t.a156=788,t.a157=788,t.a158=788,t.a159=788,t.a160=894,t.a161=838,t.a163=1016,t.a164=458,t.a196=748,t.a165=924,t.a192=748,t.a166=918,t.a167=927,t.a168=928,t.a169=928,t.a170=834,t.a171=873,t.a172=828,t.a173=924,t.a162=924,t.a174=917,t.a175=930,t.a176=931,t.a177=463,t.a178=883,t.a179=836,t.a193=836,t.a180=867,t.a199=867,t.a181=696,t.a200=696,t.a182=874,t.a201=874,t.a183=760,t.a184=946,t.a197=771,t.a185=865,t.a194=771,t.a198=888,t.a186=967,t.a195=888,t.a187=831,t.a188=873,t.a189=927,t.a190=970,t.a191=918}))}));e.getMetrics=n;const o=(0,r.getLookupTableFactory)((function(t){t.Courier={ascent:629,descent:-157,capHeight:562,xHeight:-426},t["Courier-Bold"]={ascent:629,descent:-157,capHeight:562,xHeight:439},t["Courier-Oblique"]={ascent:629,descent:-157,capHeight:562,xHeight:426},t["Courier-BoldOblique"]={ascent:629,descent:-157,capHeight:562,xHeight:426},t.Helvetica={ascent:718,descent:-207,capHeight:718,xHeight:523},t["Helvetica-Bold"]={ascent:718,descent:-207,capHeight:718,xHeight:532},t["Helvetica-Oblique"]={ascent:718,descent:-207,capHeight:718,xHeight:523},t["Helvetica-BoldOblique"]={ascent:718,descent:-207,capHeight:718,xHeight:532},t["Times-Roman"]={ascent:683,descent:-217,capHeight:662,xHeight:450},t["Times-Bold"]={ascent:683,descent:-217,capHeight:676,xHeight:461},t["Times-Italic"]={ascent:683,descent:-217,capHeight:653,xHeight:441},t["Times-BoldItalic"]={ascent:683,descent:-217,capHeight:669,xHeight:462},t.Symbol={ascent:Math.NaN,descent:Math.NaN,capHeight:Math.NaN,xHeight:Math.NaN},t.ZapfDingbats={ascent:Math.NaN,descent:Math.NaN,capHeight:Math.NaN,xHeight:Math.NaN}}));e.getFontBasicMetrics=o},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlyfTable=void 0,e.GlyfTable=class{constructor({glyfTable:t,isGlyphLocationsLong:e,locaTable:r,numGlyphs:n}){this.glyphs=[];const o=new DataView(r.buffer,r.byteOffset,r.byteLength),s=new DataView(t.buffer,t.byteOffset,t.byteLength),a=e?4:2;let l=e?o.getUint32(0):2*o.getUint16(0),c=0;for(let t=0;t<n;t++){c+=a;const t=e?o.getUint32(c):2*o.getUint16(c);if(t===l){this.glyphs.push(new i({}));continue}const r=i.parse(l,s);this.glyphs.push(r),l=t}}getSize(){return this.glyphs.reduce(((t,e)=>t+(e.getSize()+3&-4)),0)}write(){const t=this.getSize(),e=new DataView(new ArrayBuffer(t)),i=t>131070,r=i?4:2,n=new DataView(new ArrayBuffer((this.glyphs.length+1)*r));i?n.setUint32(0,0):n.setUint16(0,0);let o=0,s=0;for(const t of this.glyphs)o+=t.write(o,e),o=o+3&-4,s+=r,i?n.setUint32(s,o):n.setUint16(s,o>>1);return{isLocationLong:i,loca:new Uint8Array(n.buffer),glyf:new Uint8Array(e.buffer)}}scale(t){for(let e=0,i=this.glyphs.length;e<i;e++)this.glyphs[e].scale(t[e])}};class i{constructor({header:t=null,simple:e=null,composites:i=null}){this.header=t,this.simple=e,this.composites=i}static parse(t,e){const[n,a]=r.parse(t,e);if(t+=n,a.numberOfContours<0){const r=[];for(;;){const[i,n]=s.parse(t,e);if(t+=i,r.push(n),!(32&n.flags))break}return new i({header:a,composites:r})}const l=o.parse(t,e,a.numberOfContours);return new i({header:a,simple:l})}getSize(){if(!this.header)return 0;const t=this.simple?this.simple.getSize():this.composites.reduce(((t,e)=>t+e.getSize()),0);return this.header.getSize()+t}write(t,e){if(!this.header)return 0;const i=t;if(t+=this.header.write(t,e),this.simple)t+=this.simple.write(t,e);else for(const i of this.composites)t+=i.write(t,e);return t-i}scale(t){if(!this.header)return;const e=(this.header.xMin+this.header.xMax)/2;if(this.header.scale(e,t),this.simple)this.simple.scale(e,t);else for(const i of this.composites)i.scale(e,t)}}class r{constructor({numberOfContours:t,xMin:e,yMin:i,xMax:r,yMax:n}){this.numberOfContours=t,this.xMin=e,this.yMin=i,this.xMax=r,this.yMax=n}static parse(t,e){return[10,new r({numberOfContours:e.getInt16(t),xMin:e.getInt16(t+2),yMin:e.getInt16(t+4),xMax:e.getInt16(t+6),yMax:e.getInt16(t+8)})]}getSize(){return 10}write(t,e){return e.setInt16(t,this.numberOfContours),e.setInt16(t+2,this.xMin),e.setInt16(t+4,this.yMin),e.setInt16(t+6,this.xMax),e.setInt16(t+8,this.yMax),10}scale(t,e){this.xMin=Math.round(t+(this.xMin-t)*e),this.xMax=Math.round(t+(this.xMax-t)*e)}}class n{constructor({flags:t,xCoordinates:e,yCoordinates:i}){this.xCoordinates=e,this.yCoordinates=i,this.flags=t}}class o{constructor({contours:t,instructions:e}){this.contours=t,this.instructions=e}static parse(t,e,i){const r=[];for(let n=0;n<i;n++){const i=e.getUint16(t);t+=2,r.push(i)}const s=r[i-1]+1,a=e.getUint16(t);t+=2;const l=new Uint8Array(e).slice(t,t+a);t+=a;const c=[];for(let i=0;i<s;t++,i++){let r=e.getUint8(t);if(c.push(r),8&r){const n=e.getUint8(++t);r^=8;for(let t=0;t<n;t++)c.push(r);i+=n}}const h=[];let u=[],p=[],d=[];const f=[];let g=0,m=0;for(let i=0;i<s;i++){const n=c[i];if(2&n){const i=e.getUint8(t++);m+=16&n?i:-i,u.push(m)}else 16&n||(m+=e.getInt16(t),t+=2),u.push(m);r[g]===i&&(g++,h.push(u),u=[])}m=0,g=0;for(let i=0;i<s;i++){const o=c[i];if(4&o){const i=e.getUint8(t++);m+=32&o?i:-i,p.push(m)}else 32&o||(m+=e.getInt16(t),t+=2),p.push(m);d.push(1&o|64&o),r[g]===i&&(u=h[g],g++,f.push(new n({flags:d,xCoordinates:u,yCoordinates:p})),p=[],d=[])}return new o({contours:f,instructions:l})}getSize(){let t=2*this.contours.length+2+this.instructions.length,e=0,i=0;for(const r of this.contours){t+=r.flags.length;for(let n=0,o=r.xCoordinates.length;n<o;n++){const o=r.xCoordinates[n],s=r.yCoordinates[n];let a=Math.abs(o-e);a>255?t+=2:a>0&&(t+=1),e=o,a=Math.abs(s-i),a>255?t+=2:a>0&&(t+=1),i=s}}return t}write(t,e){const i=t,r=[],n=[],o=[];let s=0,a=0;for(const i of this.contours){for(let t=0,e=i.xCoordinates.length;t<e;t++){let e=i.flags[t];const l=i.xCoordinates[t];let c=l-s;if(0===c)e|=16,r.push(0);else{const t=Math.abs(c);t<=255?(e|=c>=0?18:2,r.push(t)):r.push(c)}s=l;const h=i.yCoordinates[t];if(c=h-a,0===c)e|=32,n.push(0);else{const t=Math.abs(c);t<=255?(e|=c>=0?36:4,n.push(t)):n.push(c)}a=h,o.push(e)}e.setUint16(t,r.length-1),t+=2}e.setUint16(t,this.instructions.length),t+=2,this.instructions.length&&(new Uint8Array(e.buffer,0,e.buffer.byteLength).set(this.instructions,t),t+=this.instructions.length);for(const i of o)e.setUint8(t++,i);for(let i=0,n=r.length;i<n;i++){const n=r[i],s=o[i];2&s?e.setUint8(t++,n):16&s||(e.setInt16(t,n),t+=2)}for(let i=0,r=n.length;i<r;i++){const r=n[i],s=o[i];4&s?e.setUint8(t++,r):32&s||(e.setInt16(t,r),t+=2)}return t-i}scale(t,e){for(const i of this.contours)if(0!==i.xCoordinates.length)for(let r=0,n=i.xCoordinates.length;r<n;r++)i.xCoordinates[r]=Math.round(t+(i.xCoordinates[r]-t)*e)}}class s{constructor({flags:t,glyphIndex:e,argument1:i,argument2:r,transf:n,instructions:o}){this.flags=t,this.glyphIndex=e,this.argument1=i,this.argument2=r,this.transf=n,this.instructions=o}static parse(t,e){const i=t,r=[];let n=e.getUint16(t);const o=e.getUint16(t+2);let a,l;t+=4,1&n?(2&n?(a=e.getInt16(t),l=e.getInt16(t+2)):(a=e.getUint16(t),l=e.getUint16(t+2)),t+=4,n^=1):(2&n?(a=e.getInt8(t),l=e.getInt8(t+1)):(a=e.getUint8(t),l=e.getUint8(t+1)),t+=2),8&n?(r.push(e.getUint16(t)),t+=2):64&n?(r.push(e.getUint16(t),e.getUint16(t+2)),t+=4):128&n&&(r.push(e.getUint16(t),e.getUint16(t+2),e.getUint16(t+4),e.getUint16(t+6)),t+=8);let c=null;if(256&n){const i=e.getUint16(t);t+=2,c=new Uint8Array(e).slice(t,t+i),t+=i}return[t-i,new s({flags:n,glyphIndex:o,argument1:a,argument2:l,transf:r,instructions:c})]}getSize(){let t=4+2*this.transf.length;return 256&this.flags&&(t+=2+this.instructions.length),t+=2,2&this.flags?this.argument1>=-128&&this.argument1<=127&&this.argument2>=-128&&this.argument2<=127||(t+=2):this.argument1>=0&&this.argument1<=255&&this.argument2>=0&&this.argument2<=255||(t+=2),t}write(t,e){const i=t;return 2&this.flags?this.argument1>=-128&&this.argument1<=127&&this.argument2>=-128&&this.argument2<=127||(this.flags|=1):this.argument1>=0&&this.argument1<=255&&this.argument2>=0&&this.argument2<=255||(this.flags|=1),e.setUint16(t,this.flags),e.setUint16(t+2,this.glyphIndex),t+=4,1&this.flags?(2&this.flags?(e.setInt16(t,this.argument1),e.setInt16(t+2,this.argument2)):(e.setUint16(t,this.argument1),e.setUint16(t+2,this.argument2)),t+=4):(e.setUint8(t,this.argument1),e.setUint8(t+1,this.argument2),t+=2),256&this.flags&&(e.setUint16(t,this.instructions.length),t+=2,this.instructions.length&&(new Uint8Array(e.buffer,0,e.buffer.byteLength).set(this.instructions,t),t+=this.instructions.length)),t-i}scale(t,e){}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OpenTypeFileBuilder=void 0;var r=i(8),n=i(2);function o(t,e,i){t[e]=i>>8&255,t[e+1]=255&i}function s(t,e,i){t[e]=i>>24&255,t[e+1]=i>>16&255,t[e+2]=i>>8&255,t[e+3]=255&i}function a(t,e,i){if(i instanceof Uint8Array)t.set(i,e);else if("string"==typeof i)for(let r=0,n=i.length;r<n;r++)t[e++]=255&i.charCodeAt(r);else for(let r=0,n=i.length;r<n;r++)t[e++]=255&i[r]}class l{constructor(t){this.sfnt=t,this.tables=Object.create(null)}static getSearchParams(t,e){let i=1,r=0;for(;(i^t)>i;)i<<=1,r++;const n=i*e;return{range:n,entry:r,rangeShift:e*t-n}}toArray(){let t=this.sfnt;const e=this.tables,i=Object.keys(e);i.sort();const c=i.length;let h,u,p,d,f,g=12+16*c;const m=[g];for(h=0;h<c;h++)d=e[i[h]],g+=(d.length+3&-4)>>>0,m.push(g);const y=new Uint8Array(g);for(h=0;h<c;h++)d=e[i[h]],a(y,m[h],d);"true"===t&&(t=(0,n.string32)(65536)),y[0]=255&t.charCodeAt(0),y[1]=255&t.charCodeAt(1),y[2]=255&t.charCodeAt(2),y[3]=255&t.charCodeAt(3),o(y,4,c);const v=l.getSearchParams(c,16);for(o(y,6,v.range),o(y,8,v.entry),o(y,10,v.rangeShift),g=12,h=0;h<c;h++){f=i[h],y[g]=255&f.charCodeAt(0),y[g+1]=255&f.charCodeAt(1),y[g+2]=255&f.charCodeAt(2),y[g+3]=255&f.charCodeAt(3);let t=0;for(u=m[h],p=m[h+1];u<p;u+=4)t=t+(0,r.readUint32)(y,u)>>>0;s(y,g+4,t),s(y,g+8,m[h]),s(y,g+12,e[f].length),g+=16}return y}addTable(t,e){if(t in this.tables)throw new Error("Table "+t+" already exists");this.tables[t]=e}}e.OpenTypeFileBuilder=l},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Type1Font=void 0;var r=i(45),n=i(18),o=i(8),s=i(10),a=i(55),l=i(2);function c(t,e,i){const r=t.length,n=e.length,s=r-n;let a=i,l=!1;for(;a<s;){let i=0;for(;i<n&&t[a+i]===e[i];)i++;if(i>=n){for(a+=i;a<r&&(0,o.isWhiteSpace)(t[a]);)a++;l=!0;break}a++}return{found:l,length:a}}e.Type1Font=class{constructor(t,e,i){let r=i.length1,o=i.length2,h=e.peekBytes(6);const u=128===h[0]&&1===h[1];u&&(e.skip(6),r=h[5]<<24|h[4]<<16|h[3]<<8|h[2]);const p=function(t,e){const i=[101,101,120,101,99],r=t.pos;let n,o,a,h;try{n=t.getBytes(e),o=n.length}catch(t){}if(o===e&&(a=c(n,i,e-2*i.length),a.found&&a.length===e))return{stream:new s.Stream(n),length:e};for((0,l.warn)('Invalid "Length1" property in Type1 font -- trying to recover.'),t.pos=r;a=c(t.peekBytes(2048),i,0),0!==a.length;)if(t.pos+=a.length,a.found){h=t.pos-r;break}return t.pos=r,h?{stream:new s.Stream(t.getBytes(h)),length:h}:((0,l.warn)('Unable to recover "Length1" property in Type1 font -- using as is.'),{stream:new s.Stream(t.getBytes(e)),length:e})}(e,r);new a.Type1Parser(p.stream,!1,n.SEAC_ANALYSIS_ENABLED).extractFontHeader(i),u&&(h=e.getBytes(6),o=h[5]<<24|h[4]<<16|h[3]<<8|h[2]);const d=function(t,e){const i=t.getBytes();return{stream:new s.Stream(i),length:i.length}}(e),f=new a.Type1Parser(d.stream,!0,n.SEAC_ANALYSIS_ENABLED).extractFontProgram(i);for(const t in f.properties)i[t]=f.properties[t];const g=f.charstrings,m=this.getType2Charstrings(g),y=this.getType2Subrs(f.subrs);this.charstrings=g,this.data=this.wrap(t,m,this.charstrings,y,i),this.seacs=this.getSeacs(f.charstrings)}get numGlyphs(){return this.charstrings.length+1}getCharset(){const t=[".notdef"],e=this.charstrings;for(let i=0;i<e.length;i++)t.push(e[i].glyphName);return t}getGlyphMapping(t){const e=this.charstrings;if(t.composite){const i=Object.create(null);for(let r=0,n=e.length;r<n;r++)i[t.cMap.charCodeOf(r)]=r+1;return i}const i=[".notdef"];let r,o;for(o=0;o<e.length;o++)i.push(e[o].glyphName);const s=t.builtInEncoding;if(s){r=Object.create(null);for(const t in s)o=i.indexOf(s[t]),o>=0&&(r[t]=o)}return(0,n.type1FontGlyphMapping)(t,r,i)}hasGlyphId(t){return!(t<0||t>=this.numGlyphs)&&(0===t||this.charstrings[t-1].charstring.length>0)}getSeacs(t){const e=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];r.seac&&(e[i+1]=r.seac)}return e}getType2Charstrings(t){const e=[];for(let i=0,r=t.length;i<r;i++)e.push(t[i].charstring);return e}getType2Subrs(t){let e=0;const i=t.length;e=i<1133?107:i<33769?1131:32768;const r=[];let n;for(n=0;n<e;n++)r.push([11]);for(n=0;n<i;n++)r.push(t[n]);return r}wrap(t,e,i,n,o){const s=new r.CFF;s.header=new r.CFFHeader(1,0,4,4),s.names=[t];const a=new r.CFFTopDict;a.setByName("version",391),a.setByName("Notice",392),a.setByName("FullName",393),a.setByName("FamilyName",394),a.setByName("Weight",395),a.setByName("Encoding",null),a.setByName("FontMatrix",o.fontMatrix),a.setByName("FontBBox",o.bbox),a.setByName("charset",null),a.setByName("CharStrings",null),a.setByName("Private",null),s.topDict=a;const l=new r.CFFStrings;l.add("Version 0.11"),l.add("See original notice"),l.add(t),l.add(t),l.add("Medium"),s.strings=l,s.globalSubrIndex=new r.CFFIndex;const c=e.length,h=[".notdef"];let u,p;for(u=0;u<c;u++){const t=i[u].glyphName;-1===r.CFFStandardStrings.indexOf(t)&&l.add(t),h.push(t)}s.charset=new r.CFFCharset(!1,0,h);const d=new r.CFFIndex;for(d.add([139,14]),u=0;u<c;u++)d.add(e[u]);s.charStrings=d;const f=new r.CFFPrivateDict;f.setByName("Subrs",null);const g=["BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StemSnapH","StemSnapV","BlueShift","BlueFuzz","BlueScale","LanguageGroup","ExpansionFactor","ForceBold","StdHW","StdVW"];for(u=0,p=g.length;u<p;u++){const t=g[u];if(!(t in o.privateData))continue;const e=o.privateData[t];if(Array.isArray(e))for(let t=e.length-1;t>0;t--)e[t]-=e[t-1];f.setByName(t,e)}s.topDict.privateDict=f;const m=new r.CFFIndex;for(u=0,p=n.length;u<p;u++)m.add(n[u]);return f.subrsIndex=m,new r.CFFCompiler(s).compile()}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Type1Parser=void 0;var r=i(19),n=i(8),o=i(10),s=i(2);const a=function(){const t=[4],e=[5],i=[6],r=[7],n=[8],o=[12,35],a=[14],l=[21],c=[22],h=[30],u=[31];return class{constructor(){this.width=0,this.lsb=0,this.flexing=!1,this.output=[],this.stack=[]}convert(p,d,f){const g=p.length;let m,y,v,b=!1;for(let w=0;w<g;w++){let g=p[w];if(g<32){switch(12===g&&(g=(g<<8)+p[++w]),g){case 1:case 3:case 9:case 3072:case 3073:case 3074:case 3105:this.stack=[];break;case 4:if(this.flexing){if(this.stack.length<1){b=!0;break}const t=this.stack.pop();this.stack.push(0,t);break}b=this.executeCommand(1,t);break;case 5:b=this.executeCommand(2,e);break;case 6:b=this.executeCommand(1,i);break;case 7:b=this.executeCommand(1,r);break;case 8:b=this.executeCommand(6,n);break;case 10:if(this.stack.length<1){b=!0;break}if(v=this.stack.pop(),!d[v]){b=!0;break}b=this.convert(d[v],d,f);break;case 11:return b;case 13:if(this.stack.length<2){b=!0;break}m=this.stack.pop(),y=this.stack.pop(),this.lsb=y,this.width=m,this.stack.push(m,y),b=this.executeCommand(2,c);break;case 14:this.output.push(a[0]);break;case 21:if(this.flexing)break;b=this.executeCommand(2,l);break;case 22:if(this.flexing){this.stack.push(0);break}b=this.executeCommand(1,c);break;case 30:b=this.executeCommand(4,h);break;case 31:b=this.executeCommand(4,u);break;case 3078:if(f){const t=this.stack[this.stack.length-5];this.seac=this.stack.splice(-4,4),this.seac[0]+=this.lsb-t,b=this.executeCommand(0,a)}else b=this.executeCommand(4,a);break;case 3079:if(this.stack.length<4){b=!0;break}this.stack.pop(),m=this.stack.pop();const p=this.stack.pop();y=this.stack.pop(),this.lsb=y,this.width=m,this.stack.push(m,y,p),b=this.executeCommand(3,l);break;case 3084:if(this.stack.length<2){b=!0;break}const w=this.stack.pop(),x=this.stack.pop();this.stack.push(x/w);break;case 3088:if(this.stack.length<2){b=!0;break}v=this.stack.pop();const S=this.stack.pop();if(0===v&&3===S){const t=this.stack.splice(this.stack.length-17,17);this.stack.push(t[2]+t[0],t[3]+t[1],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14]),b=this.executeCommand(13,o,!0),this.flexing=!1,this.stack.push(t[15],t[16])}else 1===v&&0===S&&(this.flexing=!0);break;case 3089:break;default:(0,s.warn)('Unknown type 1 charstring command of "'+g+'"')}if(b)break}else g<=246?g-=139:g=g<=250?256*(g-247)+p[++w]+108:g<=254?-256*(g-251)-p[++w]-108:(255&p[++w])<<24|(255&p[++w])<<16|(255&p[++w])<<8|(255&p[++w])<<0,this.stack.push(g)}return b}executeCommand(t,e,i){const r=this.stack.length;if(t>r)return!0;const n=r-t;for(let t=n;t<r;t++){let e=this.stack[t];Number.isInteger(e)?this.output.push(28,e>>8&255,255&e):(e=65536*e|0,this.output.push(255,e>>24&255,e>>16&255,e>>8&255,255&e))}return this.output.push.apply(this.output,e),i?this.stack.splice(n,t):this.stack.length=0,!1}}}(),l=function(){function t(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function e(t,e,i){if(i>=t.length)return new Uint8Array(0);let r,n,o=0|e;for(r=0;r<i;r++)o=52845*(t[r]+o)+22719&65535;const s=t.length-i,a=new Uint8Array(s);for(r=i,n=0;n<s;r++,n++){const e=t[r];a[n]=e^o>>8,o=52845*(e+o)+22719&65535}return a}function i(t){return 47===t||91===t||93===t||123===t||125===t||40===t||41===t}return class{constructor(i,r,s){if(r){const r=i.getBytes(),s=!((t(r[0])||(0,n.isWhiteSpace)(r[0]))&&t(r[1])&&t(r[2])&&t(r[3])&&t(r[4])&&t(r[5])&&t(r[6])&&t(r[7]));i=new o.Stream(s?e(r,55665,4):function(e,i,r){let n=0|i;const o=e.length,s=new Uint8Array(o>>>1);let a,l;for(a=0,l=0;a<o;a++){const i=e[a];if(!t(i))continue;let r;for(a++;a<o&&!t(r=e[a]);)a++;if(a<o){const t=parseInt(String.fromCharCode(i,r),16);s[l++]=t^n>>8,n=52845*(t+n)+22719&65535}}return s.slice(r,l)}(r,55665,4))}this.seacAnalysisEnabled=!!s,this.stream=i,this.nextChar()}readNumberArray(){this.getToken();const t=[];for(;;){const e=this.getToken();if(null===e||"]"===e||"}"===e)break;t.push(parseFloat(e||0))}return t}readNumber(){const t=this.getToken();return parseFloat(t||0)}readInt(){const t=this.getToken();return 0|parseInt(t||0,10)}readBoolean(){return"true"===this.getToken()?1:0}nextChar(){return this.currentChar=this.stream.getByte()}prevChar(){return this.stream.skip(-2),this.currentChar=this.stream.getByte()}getToken(){let t=!1,e=this.currentChar;for(;;){if(-1===e)return null;if(t)10!==e&&13!==e||(t=!1);else if(37===e)t=!0;else if(!(0,n.isWhiteSpace)(e))break;e=this.nextChar()}if(i(e))return this.nextChar(),String.fromCharCode(e);let r="";do{r+=String.fromCharCode(e),e=this.nextChar()}while(e>=0&&!(0,n.isWhiteSpace)(e)&&!i(e));return r}readCharStrings(t,i){return-1===i?t:e(t,4330,i)}extractFontProgram(t){const e=this.stream,i=[],r=[],n=Object.create(null);n.lenIV=4;const o={subrs:[],charstrings:[],properties:{privateData:n}};let s,l,c,h,u;for(;null!==(s=this.getToken());)if("/"===s)switch(s=this.getToken(),s){case"CharStrings":for(this.getToken(),this.getToken(),this.getToken(),this.getToken();s=this.getToken(),null!==s&&"end"!==s;){if("/"!==s)continue;const t=this.getToken();l=this.readInt(),this.getToken(),c=l>0?e.getBytes(l):new Uint8Array(0),h=o.properties.privateData.lenIV,u=this.readCharStrings(c,h),this.nextChar(),s=this.getToken(),"noaccess"===s?this.getToken():"/"===s&&this.prevChar(),r.push({glyph:t,encoded:u})}break;case"Subrs":for(this.readInt(),this.getToken();"dup"===this.getToken();){const t=this.readInt();l=this.readInt(),this.getToken(),c=l>0?e.getBytes(l):new Uint8Array(0),h=o.properties.privateData.lenIV,u=this.readCharStrings(c,h),this.nextChar(),s=this.getToken(),"noaccess"===s&&this.getToken(),i[t]=u}break;case"BlueValues":case"OtherBlues":case"FamilyBlues":case"FamilyOtherBlues":const t=this.readNumberArray();t.length>0&&t.length;break;case"StemSnapH":case"StemSnapV":o.properties.privateData[s]=this.readNumberArray();break;case"StdHW":case"StdVW":o.properties.privateData[s]=this.readNumberArray()[0];break;case"BlueShift":case"lenIV":case"BlueFuzz":case"BlueScale":case"LanguageGroup":case"ExpansionFactor":o.properties.privateData[s]=this.readNumber();break;case"ForceBold":o.properties.privateData[s]=this.readBoolean()}for(let e=0;e<r.length;e++){const n=r[e].glyph;u=r[e].encoded;const s=new a,l=s.convert(u,i,this.seacAnalysisEnabled);let c=s.output;l&&(c=[14]);const h={glyphName:n,charstring:c,width:s.width,lsb:s.lsb,seac:s.seac};if(".notdef"===n?o.charstrings.unshift(h):o.charstrings.push(h),t.builtInEncoding){const e=t.builtInEncoding.indexOf(n);e>-1&&void 0===t.widths[e]&&e>=t.firstChar&&e<=t.lastChar&&(t.widths[e]=s.width)}}return o}extractFontHeader(t){let e;for(;null!==(e=this.getToken());)if("/"===e)switch(e=this.getToken(),e){case"FontMatrix":const i=this.readNumberArray();t.fontMatrix=i;break;case"Encoding":const n=this.getToken();let o;if(/^\d+$/.test(n)){o=[];const t=0|parseInt(n,10);this.getToken();for(let i=0;i<t;i++){for(e=this.getToken();"dup"!==e&&"def"!==e;)if(e=this.getToken(),null===e)return;if("def"===e)break;const t=this.readInt();this.getToken();const i=this.getToken();o[t]=i,this.getToken()}}else o=(0,r.getEncoding)(n);t.builtInEncoding=o;break;case"FontBBox":const s=this.readNumberArray();t.ascent=Math.max(s[3],s[1]),t.descent=Math.min(s[1],s[3]),t.ascentScaled=!0}}}}();e.Type1Parser=l},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Pattern=void 0,e.getTilingPatternIR=function(t,e,i){const n=e.getArray("Matrix"),o=r.Util.normalizeRect(e.getArray("BBox")),s=e.get("XStep"),a=e.get("YStep"),l=e.get("PaintType"),c=e.get("TilingType");if(o[2]-o[0]==0||o[3]-o[1]==0)throw new r.FormatError(`Invalid getTilingPatternIR /BBox array: [${o}].`);return["TilingPattern",i,t,n,o,s,a,l,c]};var r=i(2),n=i(9),o=i(24),s=i(8);const a=2,l=3,c=4,h=5,u=6,p=7;e.Pattern=class{constructor(){(0,r.unreachable)("Cannot initialize Pattern.")}static parseShading(t,e,i,o,d,g){const m=t instanceof n.BaseStream?t.dict:t,b=m.get("ShadingType");try{switch(b){case a:case l:return new f(m,e,i,d,g);case c:case h:case u:case p:return new y(t,e,i,d,g);default:throw new r.FormatError("Unsupported ShadingType: "+b)}}catch(t){if(t instanceof s.MissingDataException)throw t;return o.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.shadingPattern}),(0,r.warn)(t),new v}}};class d{static get SMALL_NUMBER(){return(0,r.shadow)(this,"SMALL_NUMBER",1e-6)}constructor(){this.constructor===d&&(0,r.unreachable)("Cannot initialize BaseShading.")}getIR(){(0,r.unreachable)("Abstract method `getIR` called.")}}class f extends d{constructor(t,e,i,n,s){super(),this.coordsArr=t.getArray("Coords"),this.shadingType=t.get("ShadingType");const a=o.ColorSpace.parse({cs:t.getRaw("CS")||t.getRaw("ColorSpace"),xref:e,resources:i,pdfFunctionFactory:n,localColorSpaceCache:s}),c=t.getArray("BBox");Array.isArray(c)&&4===c.length?this.bbox=r.Util.normalizeRect(c):this.bbox=null;let h=0,u=1;if(t.has("Domain")){const e=t.getArray("Domain");h=e[0],u=e[1]}let p=!1,f=!1;if(t.has("Extend")){const e=t.getArray("Extend");p=e[0],f=e[1]}if(!(this.shadingType!==l||p&&f)){const[t,e,i,n,o,s]=this.coordsArr,a=Math.hypot(t-n,e-o);i<=s+a&&s<=i+a&&(0,r.warn)("Unsupported radial gradient.")}this.extendStart=p,this.extendEnd=f;const g=t.getRaw("Function"),m=n.createFromArray(g),y=(u-h)/10,v=this.colorStops=[];if(h>=u||y<=0)return void(0,r.info)("Bad shading domain.");const b=new Float32Array(a.numComps),w=new Float32Array(1);let x;for(let t=0;t<=10;t++){w[0]=h+t*y,m(w,0,b,0),x=a.getRgb(b,0);const e=r.Util.makeHexColor(x[0],x[1],x[2]);v.push([t/10,e])}let S="transparent";t.has("Background")&&(x=a.getRgb(t.get("Background"),0),S=r.Util.makeHexColor(x[0],x[1],x[2])),p||(v.unshift([0,S]),v[1][0]+=d.SMALL_NUMBER),f||(v[v.length-1][0]-=d.SMALL_NUMBER,v.push([1,S])),this.colorStops=v}getIR(){const t=this.coordsArr,e=this.shadingType;let i,n,o,s,c;return e===a?(n=[t[0],t[1]],o=[t[2],t[3]],s=null,c=null,i="axial"):e===l?(n=[t[0],t[1]],o=[t[3],t[4]],s=t[2],c=t[5],i="radial"):(0,r.unreachable)(`getPattern type unknown: ${e}`),["RadialAxial",i,this.bbox,this.colorStops,n,o,s,c]}}class g{constructor(t,e){this.stream=t,this.context=e,this.buffer=0,this.bufferLength=0;const i=e.numComps;this.tmpCompsBuf=new Float32Array(i);const r=e.colorSpace.numComps;this.tmpCsCompsBuf=e.colorFn?new Float32Array(r):this.tmpCompsBuf}get hasData(){if(this.stream.end)return this.stream.pos<this.stream.end;if(this.bufferLength>0)return!0;const t=this.stream.getByte();return!(t<0||(this.buffer=t,this.bufferLength=8,0))}readBits(t){let e=this.buffer,i=this.bufferLength;if(32===t){if(0===i)return(this.stream.getByte()<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte())>>>0;e=e<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte();const t=this.stream.getByte();return this.buffer=t&(1<<i)-1,(e<<8-i|(255&t)>>i)>>>0}if(8===t&&0===i)return this.stream.getByte();for(;i<t;)e=e<<8|this.stream.getByte(),i+=8;return i-=t,this.bufferLength=i,this.buffer=e&(1<<i)-1,e>>i}align(){this.buffer=0,this.bufferLength=0}readFlag(){return this.readBits(this.context.bitsPerFlag)}readCoordinate(){const t=this.context.bitsPerCoordinate,e=this.readBits(t),i=this.readBits(t),r=this.context.decode,n=t<32?1/((1<<t)-1):2.3283064365386963e-10;return[e*n*(r[1]-r[0])+r[0],i*n*(r[3]-r[2])+r[2]]}readComponents(){const t=this.context.numComps,e=this.context.bitsPerComponent,i=e<32?1/((1<<e)-1):2.3283064365386963e-10,r=this.context.decode,n=this.tmpCompsBuf;for(let o=0,s=4;o<t;o++,s+=2){const t=this.readBits(e);n[o]=t*i*(r[s+1]-r[s])+r[s]}const o=this.tmpCsCompsBuf;return this.context.colorFn&&this.context.colorFn(n,0,o,0),this.context.colorSpace.getRgb(o,0)}}const m=function(){const t=[];return function(e){return t[e]||(t[e]=function(t){const e=[];for(let i=0;i<=t;i++){const r=i/t,n=1-r;e.push(new Float32Array([n*n*n,3*r*n*n,3*r*r*n,r*r*r]))}return e}(e)),t[e]}}();class y extends d{static get MIN_SPLIT_PATCH_CHUNKS_AMOUNT(){return(0,r.shadow)(this,"MIN_SPLIT_PATCH_CHUNKS_AMOUNT",3)}static get MAX_SPLIT_PATCH_CHUNKS_AMOUNT(){return(0,r.shadow)(this,"MAX_SPLIT_PATCH_CHUNKS_AMOUNT",20)}static get TRIANGLE_DENSITY(){return(0,r.shadow)(this,"TRIANGLE_DENSITY",20)}constructor(t,e,i,s,a){if(super(),!(t instanceof n.BaseStream))throw new r.FormatError("Mesh data is not a stream");const l=t.dict;this.shadingType=l.get("ShadingType");const d=l.getArray("BBox");Array.isArray(d)&&4===d.length?this.bbox=r.Util.normalizeRect(d):this.bbox=null;const f=o.ColorSpace.parse({cs:l.getRaw("CS")||l.getRaw("ColorSpace"),xref:e,resources:i,pdfFunctionFactory:s,localColorSpaceCache:a});this.background=l.has("Background")?f.getRgb(l.get("Background"),0):null;const m=l.getRaw("Function"),y=m?s.createFromArray(m):null;this.coords=[],this.colors=[],this.figures=[];const v={bitsPerCoordinate:l.get("BitsPerCoordinate"),bitsPerComponent:l.get("BitsPerComponent"),bitsPerFlag:l.get("BitsPerFlag"),decode:l.getArray("Decode"),colorFn:y,colorSpace:f,numComps:y?1:f.numComps},b=new g(t,v);let w=!1;switch(this.shadingType){case c:this._decodeType4Shading(b);break;case h:const t=0|l.get("VerticesPerRow");if(t<2)throw new r.FormatError("Invalid VerticesPerRow");this._decodeType5Shading(b,t);break;case u:this._decodeType6Shading(b),w=!0;break;case p:this._decodeType7Shading(b),w=!0;break;default:(0,r.unreachable)("Unsupported mesh type.")}if(w){this._updateBounds();for(let t=0,e=this.figures.length;t<e;t++)this._buildFigureFromPatch(t)}this._updateBounds(),this._packData()}_decodeType4Shading(t){const e=this.coords,i=this.colors,n=[],o=[];let s=0;for(;t.hasData;){const a=t.readFlag(),l=t.readCoordinate(),c=t.readComponents();if(0===s){if(!(0<=a&&a<=2))throw new r.FormatError("Unknown type4 flag");switch(a){case 0:s=3;break;case 1:o.push(o[o.length-2],o[o.length-1]),s=1;break;case 2:o.push(o[o.length-3],o[o.length-1]),s=1}n.push(a)}o.push(e.length),e.push(l),i.push(c),s--,t.align()}this.figures.push({type:"triangles",coords:new Int32Array(o),colors:new Int32Array(o)})}_decodeType5Shading(t,e){const i=this.coords,r=this.colors,n=[];for(;t.hasData;){const e=t.readCoordinate(),o=t.readComponents();n.push(i.length),i.push(e),r.push(o)}this.figures.push({type:"lattice",coords:new Int32Array(n),colors:new Int32Array(n),verticesPerRow:e})}_decodeType6Shading(t){const e=this.coords,i=this.colors,n=new Int32Array(16),o=new Int32Array(4);for(;t.hasData;){const s=t.readFlag();if(!(0<=s&&s<=3))throw new r.FormatError("Unknown type6 flag");const a=e.length;for(let i=0,r=0!==s?8:12;i<r;i++)e.push(t.readCoordinate());const l=i.length;for(let e=0,r=0!==s?2:4;e<r;e++)i.push(t.readComponents());let c,h,u,p;switch(s){case 0:n[12]=a+3,n[13]=a+4,n[14]=a+5,n[15]=a+6,n[8]=a+2,n[11]=a+7,n[4]=a+1,n[7]=a+8,n[0]=a,n[1]=a+11,n[2]=a+10,n[3]=a+9,o[2]=l+1,o[3]=l+2,o[0]=l,o[1]=l+3;break;case 1:c=n[12],h=n[13],u=n[14],p=n[15],n[12]=p,n[13]=a+0,n[14]=a+1,n[15]=a+2,n[8]=u,n[11]=a+3,n[4]=h,n[7]=a+4,n[0]=c,n[1]=a+7,n[2]=a+6,n[3]=a+5,c=o[2],h=o[3],o[2]=h,o[3]=l,o[0]=c,o[1]=l+1;break;case 2:c=n[15],h=n[11],n[12]=n[3],n[13]=a+0,n[14]=a+1,n[15]=a+2,n[8]=n[7],n[11]=a+3,n[4]=h,n[7]=a+4,n[0]=c,n[1]=a+7,n[2]=a+6,n[3]=a+5,c=o[3],o[2]=o[1],o[3]=l,o[0]=c,o[1]=l+1;break;case 3:n[12]=n[0],n[13]=a+0,n[14]=a+1,n[15]=a+2,n[8]=n[1],n[11]=a+3,n[4]=n[2],n[7]=a+4,n[0]=n[3],n[1]=a+7,n[2]=a+6,n[3]=a+5,o[2]=o[0],o[3]=l,o[0]=o[1],o[1]=l+1}n[5]=e.length,e.push([(-4*e[n[0]][0]-e[n[15]][0]+6*(e[n[4]][0]+e[n[1]][0])-2*(e[n[12]][0]+e[n[3]][0])+3*(e[n[13]][0]+e[n[7]][0]))/9,(-4*e[n[0]][1]-e[n[15]][1]+6*(e[n[4]][1]+e[n[1]][1])-2*(e[n[12]][1]+e[n[3]][1])+3*(e[n[13]][1]+e[n[7]][1]))/9]),n[6]=e.length,e.push([(-4*e[n[3]][0]-e[n[12]][0]+6*(e[n[2]][0]+e[n[7]][0])-2*(e[n[0]][0]+e[n[15]][0])+3*(e[n[4]][0]+e[n[14]][0]))/9,(-4*e[n[3]][1]-e[n[12]][1]+6*(e[n[2]][1]+e[n[7]][1])-2*(e[n[0]][1]+e[n[15]][1])+3*(e[n[4]][1]+e[n[14]][1]))/9]),n[9]=e.length,e.push([(-4*e[n[12]][0]-e[n[3]][0]+6*(e[n[8]][0]+e[n[13]][0])-2*(e[n[0]][0]+e[n[15]][0])+3*(e[n[11]][0]+e[n[1]][0]))/9,(-4*e[n[12]][1]-e[n[3]][1]+6*(e[n[8]][1]+e[n[13]][1])-2*(e[n[0]][1]+e[n[15]][1])+3*(e[n[11]][1]+e[n[1]][1]))/9]),n[10]=e.length,e.push([(-4*e[n[15]][0]-e[n[0]][0]+6*(e[n[11]][0]+e[n[14]][0])-2*(e[n[12]][0]+e[n[3]][0])+3*(e[n[2]][0]+e[n[8]][0]))/9,(-4*e[n[15]][1]-e[n[0]][1]+6*(e[n[11]][1]+e[n[14]][1])-2*(e[n[12]][1]+e[n[3]][1])+3*(e[n[2]][1]+e[n[8]][1]))/9]),this.figures.push({type:"patch",coords:new Int32Array(n),colors:new Int32Array(o)})}}_decodeType7Shading(t){const e=this.coords,i=this.colors,n=new Int32Array(16),o=new Int32Array(4);for(;t.hasData;){const s=t.readFlag();if(!(0<=s&&s<=3))throw new r.FormatError("Unknown type7 flag");const a=e.length;for(let i=0,r=0!==s?12:16;i<r;i++)e.push(t.readCoordinate());const l=i.length;for(let e=0,r=0!==s?2:4;e<r;e++)i.push(t.readComponents());let c,h,u,p;switch(s){case 0:n[12]=a+3,n[13]=a+4,n[14]=a+5,n[15]=a+6,n[8]=a+2,n[9]=a+13,n[10]=a+14,n[11]=a+7,n[4]=a+1,n[5]=a+12,n[6]=a+15,n[7]=a+8,n[0]=a,n[1]=a+11,n[2]=a+10,n[3]=a+9,o[2]=l+1,o[3]=l+2,o[0]=l,o[1]=l+3;break;case 1:c=n[12],h=n[13],u=n[14],p=n[15],n[12]=p,n[13]=a+0,n[14]=a+1,n[15]=a+2,n[8]=u,n[9]=a+9,n[10]=a+10,n[11]=a+3,n[4]=h,n[5]=a+8,n[6]=a+11,n[7]=a+4,n[0]=c,n[1]=a+7,n[2]=a+6,n[3]=a+5,c=o[2],h=o[3],o[2]=h,o[3]=l,o[0]=c,o[1]=l+1;break;case 2:c=n[15],h=n[11],n[12]=n[3],n[13]=a+0,n[14]=a+1,n[15]=a+2,n[8]=n[7],n[9]=a+9,n[10]=a+10,n[11]=a+3,n[4]=h,n[5]=a+8,n[6]=a+11,n[7]=a+4,n[0]=c,n[1]=a+7,n[2]=a+6,n[3]=a+5,c=o[3],o[2]=o[1],o[3]=l,o[0]=c,o[1]=l+1;break;case 3:n[12]=n[0],n[13]=a+0,n[14]=a+1,n[15]=a+2,n[8]=n[1],n[9]=a+9,n[10]=a+10,n[11]=a+3,n[4]=n[2],n[5]=a+8,n[6]=a+11,n[7]=a+4,n[0]=n[3],n[1]=a+7,n[2]=a+6,n[3]=a+5,o[2]=o[0],o[3]=l,o[0]=o[1],o[1]=l+1}this.figures.push({type:"patch",coords:new Int32Array(n),colors:new Int32Array(o)})}}_buildFigureFromPatch(t){const e=this.figures[t];(0,r.assert)("patch"===e.type,"Unexpected patch mesh figure");const i=this.coords,n=this.colors,o=e.coords,s=e.colors,a=Math.min(i[o[0]][0],i[o[3]][0],i[o[12]][0],i[o[15]][0]),l=Math.min(i[o[0]][1],i[o[3]][1],i[o[12]][1],i[o[15]][1]),c=Math.max(i[o[0]][0],i[o[3]][0],i[o[12]][0],i[o[15]][0]),h=Math.max(i[o[0]][1],i[o[3]][1],i[o[12]][1],i[o[15]][1]);let u=Math.ceil((c-a)*y.TRIANGLE_DENSITY/(this.bounds[2]-this.bounds[0]));u=Math.max(y.MIN_SPLIT_PATCH_CHUNKS_AMOUNT,Math.min(y.MAX_SPLIT_PATCH_CHUNKS_AMOUNT,u));let p=Math.ceil((h-l)*y.TRIANGLE_DENSITY/(this.bounds[3]-this.bounds[1]));p=Math.max(y.MIN_SPLIT_PATCH_CHUNKS_AMOUNT,Math.min(y.MAX_SPLIT_PATCH_CHUNKS_AMOUNT,p));const d=u+1,f=new Int32Array((p+1)*d),g=new Int32Array((p+1)*d);let v=0;const b=new Uint8Array(3),w=new Uint8Array(3),x=n[s[0]],S=n[s[1]],k=n[s[2]],C=n[s[3]],A=m(p),_=m(u);for(let t=0;t<=p;t++){b[0]=(x[0]*(p-t)+k[0]*t)/p|0,b[1]=(x[1]*(p-t)+k[1]*t)/p|0,b[2]=(x[2]*(p-t)+k[2]*t)/p|0,w[0]=(S[0]*(p-t)+C[0]*t)/p|0,w[1]=(S[1]*(p-t)+C[1]*t)/p|0,w[2]=(S[2]*(p-t)+C[2]*t)/p|0;for(let e=0;e<=u;e++,v++){if(!(0!==t&&t!==p||0!==e&&e!==u))continue;let r=0,s=0,a=0;for(let n=0;n<=3;n++)for(let l=0;l<=3;l++,a++){const c=A[t][n]*_[e][l];r+=i[o[a]][0]*c,s+=i[o[a]][1]*c}f[v]=i.length,i.push([r,s]),g[v]=n.length;const l=new Uint8Array(3);l[0]=(b[0]*(u-e)+w[0]*e)/u|0,l[1]=(b[1]*(u-e)+w[1]*e)/u|0,l[2]=(b[2]*(u-e)+w[2]*e)/u|0,n.push(l)}}f[0]=o[0],g[0]=s[0],f[u]=o[3],g[u]=s[1],f[d*p]=o[12],g[d*p]=s[2],f[d*p+u]=o[15],g[d*p+u]=s[3],this.figures[t]={type:"lattice",coords:f,colors:g,verticesPerRow:d}}_updateBounds(){let t=this.coords[0][0],e=this.coords[0][1],i=t,r=e;for(let n=1,o=this.coords.length;n<o;n++){const o=this.coords[n][0],s=this.coords[n][1];t=t>o?o:t,e=e>s?s:e,i=i<o?o:i,r=r<s?s:r}this.bounds=[t,e,i,r]}_packData(){let t,e,i,r;const n=this.coords,o=new Float32Array(2*n.length);for(t=0,i=0,e=n.length;t<e;t++){const e=n[t];o[i++]=e[0],o[i++]=e[1]}this.coords=o;const s=this.colors,a=new Uint8Array(3*s.length);for(t=0,i=0,e=s.length;t<e;t++){const e=s[t];a[i++]=e[0],a[i++]=e[1],a[i++]=e[2]}this.colors=a;const l=this.figures;for(t=0,e=l.length;t<e;t++){const e=l[t],n=e.coords,o=e.colors;for(i=0,r=n.length;i<r;i++)n[i]*=2,o[i]*=3}}getIR(){return["Mesh",this.shadingType,this.coords,this.colors,this.figures,this.bounds,this.bbox,this.background]}}class v extends d{getIR(){return["Dummy"]}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PostScriptEvaluator=e.PostScriptCompiler=e.PDFFunctionFactory=void 0,e.isPDFFunction=function(t){let e;if("object"!=typeof t)return!1;if(t instanceof r.Dict)e=t;else{if(!(t instanceof s.BaseStream))return!1;e=t.dict}return e.has("FunctionType")};var r=i(5),n=i(2),o=i(58),s=i(9),a=i(59);function l(t){if(!Array.isArray(t))return null;const e=t.length;for(let i=0;i<e;i++)if("number"!=typeof t[i]){const i=new Array(e);for(let r=0;r<e;r++)i[r]=+t[r];return i}return t}e.PDFFunctionFactory=class{constructor({xref:t,isEvalSupported:e=!0}){this.xref=t,this.isEvalSupported=!1!==e}create(t){const e=this.getCached(t);if(e)return e;const i=c.parse({xref:this.xref,isEvalSupported:this.isEvalSupported,fn:t instanceof r.Ref?this.xref.fetch(t):t});return this._cache(t,i),i}createFromArray(t){const e=this.getCached(t);if(e)return e;const i=c.parseArray({xref:this.xref,isEvalSupported:this.isEvalSupported,fnObj:t instanceof r.Ref?this.xref.fetch(t):t});return this._cache(t,i),i}getCached(t){let e;if(t instanceof r.Ref?e=t:t instanceof r.Dict?e=t.objId:t instanceof s.BaseStream&&(e=t.dict&&t.dict.objId),e){const t=this._localFunctionCache.getByRef(e);if(t)return t}return null}_cache(t,e){if(!e)throw new Error('PDFFunctionFactory._cache - expected "parsedFunction" argument.');let i;t instanceof r.Ref?i=t:t instanceof r.Dict?i=t.objId:t instanceof s.BaseStream&&(i=t.dict&&t.dict.objId),i&&this._localFunctionCache.set(null,i,e)}get _localFunctionCache(){return(0,n.shadow)(this,"_localFunctionCache",new a.LocalFunctionCache)}};class c{static getSampleArray(t,e,i,r){let n,o,s=1;for(n=0,o=t.length;n<o;n++)s*=t[n];s*=e;const a=new Array(s);let l=0,c=0;const h=1/(2**i-1),u=r.getBytes((s*i+7)/8);let p=0;for(n=0;n<s;n++){for(;l<i;)c<<=8,c|=u[p++],l+=8;l-=i,a[n]=(c>>l)*h,c&=(1<<l)-1}return a}static parse({xref:t,isEvalSupported:e,fn:i}){const r=i.dict||i;switch(r.get("FunctionType")){case 0:return this.constructSampled({xref:t,isEvalSupported:e,fn:i,dict:r});case 1:break;case 2:return this.constructInterpolated({xref:t,isEvalSupported:e,dict:r});case 3:return this.constructStiched({xref:t,isEvalSupported:e,dict:r});case 4:return this.constructPostScript({xref:t,isEvalSupported:e,fn:i,dict:r})}throw new n.FormatError("Unknown type of function")}static parseArray({xref:t,isEvalSupported:e,fnObj:i}){if(!Array.isArray(i))return this.parse({xref:t,isEvalSupported:e,fn:i});const r=[];for(let n=0,o=i.length;n<o;n++)r.push(this.parse({xref:t,isEvalSupported:e,fn:t.fetchIfRef(i[n])}));return function(t,e,i,n){for(let o=0,s=r.length;o<s;o++)r[o](t,e,i,n+o)}}static constructSampled({xref:t,isEvalSupported:e,fn:i,dict:r}){function o(t){const e=t.length,i=[];let r=0;for(let n=0;n<e;n+=2)i[r++]=[t[n],t[n+1]];return i}function s(t,e,i,r,n){return r+(n-r)/(i-e)*(t-e)}let a=l(r.getArray("Domain")),c=l(r.getArray("Range"));if(!a||!c)throw new n.FormatError("No domain or range");const h=a.length/2,u=c.length/2;a=o(a),c=o(c);const p=l(r.getArray("Size")),d=r.get("BitsPerSample"),f=r.get("Order")||1;1!==f&&(0,n.info)("No support for cubic spline interpolation: "+f);let g=l(r.getArray("Encode"));if(g)g=o(g);else{g=[];for(let t=0;t<h;++t)g.push([0,p[t]-1])}let m=l(r.getArray("Decode"));m=m?o(m):c;const y=this.getSampleArray(p,u,d,i);return function(t,e,i,r){const n=1<<h,o=new Float64Array(n),l=new Uint32Array(n);let d,f;for(f=0;f<n;f++)o[f]=1;let v=u,b=1;for(d=0;d<h;++d){const i=a[d][0],r=a[d][1];let c=s(Math.min(Math.max(t[e+d],i),r),i,r,g[d][0],g[d][1]);const h=p[d];c=Math.min(Math.max(c,0),h-1);const u=c<h-1?Math.floor(c):c-1,m=u+1-c,y=c-u,w=u*v,x=w+v;for(f=0;f<n;f++)f&b?(o[f]*=y,l[f]+=x):(o[f]*=m,l[f]+=w);v*=h,b<<=1}for(f=0;f<u;++f){let t=0;for(d=0;d<n;d++)t+=y[l[d]+f]*o[d];t=s(t,0,1,m[f][0],m[f][1]),i[r+f]=Math.min(Math.max(t,c[f][0]),c[f][1])}}}static constructInterpolated({xref:t,isEvalSupported:e,dict:i}){const r=l(i.getArray("C0"))||[0],n=l(i.getArray("C1"))||[1],o=i.get("N"),s=[];for(let t=0,e=r.length;t<e;++t)s.push(n[t]-r[t]);const a=s.length;return function(t,e,i,n){const l=1===o?t[e]:t[e]**o;for(let t=0;t<a;++t)i[n+t]=r[t]+l*s[t]}}static constructStiched({xref:t,isEvalSupported:e,dict:i}){const r=l(i.getArray("Domain"));if(!r)throw new n.FormatError("No domain");if(1!=r.length/2)throw new n.FormatError("Bad domain for stiched function");const o=i.get("Functions"),s=[];for(let i=0,r=o.length;i<r;++i)s.push(this.parse({xref:t,isEvalSupported:e,fn:t.fetchIfRef(o[i])}));const a=l(i.getArray("Bounds")),c=l(i.getArray("Encode")),h=new Float32Array(1);return function(t,e,i,n){const o=function(t,e,i){return t>i?t=i:t<e&&(t=e),t}(t[e],r[0],r[1]),l=a.length;let u;for(u=0;u<l&&!(o<a[u]);++u);let p=r[0];u>0&&(p=a[u-1]);let d=r[1];u<a.length&&(d=a[u]);const f=c[2*u],g=c[2*u+1];h[0]=p===d?f:f+(o-p)*(g-f)/(d-p),s[u](h,0,i,n)}}static constructPostScript({xref:t,isEvalSupported:e,fn:i,dict:r}){const s=l(r.getArray("Domain")),a=l(r.getArray("Range"));if(!s)throw new n.FormatError("No domain.");if(!a)throw new n.FormatError("No range.");const c=new o.PostScriptLexer(i),h=new o.PostScriptParser(c).parse();if(e&&n.FeatureTest.isEvalSupported){const t=(new p).compile(h,s,a);if(t)return new Function("src","srcOffset","dest","destOffset",t)}(0,n.info)("Unable to compile PS function");const d=a.length>>1,f=s.length>>1,g=new u(h),m=Object.create(null);let y=8192;const v=new Float32Array(f);return function(t,e,i,r){let n,o,s="";const l=v;for(n=0;n<f;n++)o=t[e+n],l[n]=o,s+=o+"_";const c=m[s];if(void 0!==c)return void i.set(c,r);const h=new Float32Array(d),u=g.execute(l),p=u.length-d;for(n=0;n<d;n++){o=u[p+n];let t=a[2*n];o<t?o=t:(t=a[2*n+1],o>t&&(o=t)),h[n]=o}y>0&&(y--,m[s]=h),i.set(h,r)}}}class h{static get MAX_STACK_SIZE(){return(0,n.shadow)(this,"MAX_STACK_SIZE",100)}constructor(t){this.stack=t?Array.prototype.slice.call(t,0):[]}push(t){if(this.stack.length>=h.MAX_STACK_SIZE)throw new Error("PostScript function stack overflow.");this.stack.push(t)}pop(){if(this.stack.length<=0)throw new Error("PostScript function stack underflow.");return this.stack.pop()}copy(t){if(this.stack.length+t>=h.MAX_STACK_SIZE)throw new Error("PostScript function stack overflow.");const e=this.stack;for(let i=e.length-t,r=t-1;r>=0;r--,i++)e.push(e[i])}index(t){this.push(this.stack[this.stack.length-t-1])}roll(t,e){const i=this.stack,r=i.length-t,n=i.length-1,o=r+(e-Math.floor(e/t)*t);for(let t=r,e=n;t<e;t++,e--){const r=i[t];i[t]=i[e],i[e]=r}for(let t=r,e=o-1;t<e;t++,e--){const r=i[t];i[t]=i[e],i[e]=r}for(let t=o,e=n;t<e;t++,e--){const r=i[t];i[t]=i[e],i[e]=r}}}class u{constructor(t){this.operators=t}execute(t){const e=new h(t);let i=0;const r=this.operators,o=r.length;let s,a,l;for(;i<o;)if(s=r[i++],"number"!=typeof s)switch(s){case"jz":l=e.pop(),a=e.pop(),a||(i=l);break;case"j":a=e.pop(),i=a;break;case"abs":a=e.pop(),e.push(Math.abs(a));break;case"add":l=e.pop(),a=e.pop(),e.push(a+l);break;case"and":l=e.pop(),a=e.pop(),"boolean"==typeof a&&"boolean"==typeof l?e.push(a&&l):e.push(a&l);break;case"atan":a=e.pop(),e.push(Math.atan(a));break;case"bitshift":l=e.pop(),a=e.pop(),a>0?e.push(a<<l):e.push(a>>l);break;case"ceiling":a=e.pop(),e.push(Math.ceil(a));break;case"copy":a=e.pop(),e.copy(a);break;case"cos":a=e.pop(),e.push(Math.cos(a));break;case"cvi":a=0|e.pop(),e.push(a);break;case"cvr":break;case"div":l=e.pop(),a=e.pop(),e.push(a/l);break;case"dup":e.copy(1);break;case"eq":l=e.pop(),a=e.pop(),e.push(a===l);break;case"exch":e.roll(2,1);break;case"exp":l=e.pop(),a=e.pop(),e.push(a**l);break;case"false":e.push(!1);break;case"floor":a=e.pop(),e.push(Math.floor(a));break;case"ge":l=e.pop(),a=e.pop(),e.push(a>=l);break;case"gt":l=e.pop(),a=e.pop(),e.push(a>l);break;case"idiv":l=e.pop(),a=e.pop(),e.push(a/l|0);break;case"index":a=e.pop(),e.index(a);break;case"le":l=e.pop(),a=e.pop(),e.push(a<=l);break;case"ln":a=e.pop(),e.push(Math.log(a));break;case"log":a=e.pop(),e.push(Math.log(a)/Math.LN10);break;case"lt":l=e.pop(),a=e.pop(),e.push(a<l);break;case"mod":l=e.pop(),a=e.pop(),e.push(a%l);break;case"mul":l=e.pop(),a=e.pop(),e.push(a*l);break;case"ne":l=e.pop(),a=e.pop(),e.push(a!==l);break;case"neg":a=e.pop(),e.push(-a);break;case"not":a=e.pop(),"boolean"==typeof a?e.push(!a):e.push(~a);break;case"or":l=e.pop(),a=e.pop(),"boolean"==typeof a&&"boolean"==typeof l?e.push(a||l):e.push(a|l);break;case"pop":e.pop();break;case"roll":l=e.pop(),a=e.pop(),e.roll(a,l);break;case"round":a=e.pop(),e.push(Math.round(a));break;case"sin":a=e.pop(),e.push(Math.sin(a));break;case"sqrt":a=e.pop(),e.push(Math.sqrt(a));break;case"sub":l=e.pop(),a=e.pop(),e.push(a-l);break;case"true":e.push(!0);break;case"truncate":a=e.pop(),a=a<0?Math.ceil(a):Math.floor(a),e.push(a);break;case"xor":l=e.pop(),a=e.pop(),"boolean"==typeof a&&"boolean"==typeof l?e.push(a!==l):e.push(a^l);break;default:throw new n.FormatError(`Unknown operator ${s}`)}else e.push(s);return e.stack}}e.PostScriptEvaluator=u;const p=function(){class t{constructor(t){this.type=t}visit(t){(0,n.unreachable)("abstract method")}}class e extends t{constructor(t,e,i){super("args"),this.index=t,this.min=e,this.max=i}visit(t){t.visitArgument(this)}}class i extends t{constructor(t){super("literal"),this.number=t,this.min=t,this.max=t}visit(t){t.visitLiteral(this)}}class r extends t{constructor(t,e,i,r,n){super("binary"),this.op=t,this.arg1=e,this.arg2=i,this.min=r,this.max=n}visit(t){t.visitBinaryOperation(this)}}class o extends t{constructor(t,e){super("max"),this.arg=t,this.min=t.min,this.max=e}visit(t){t.visitMin(this)}}class s extends t{constructor(t,e,i){super("var"),this.index=t,this.min=e,this.max=i}visit(t){t.visitVariable(this)}}class a extends t{constructor(t,e){super("definition"),this.variable=t,this.arg=e}visit(t){t.visitVariableDefinition(this)}}class l{constructor(){this.parts=[]}visitArgument(t){this.parts.push("Math.max(",t.min,", Math.min(",t.max,", src[srcOffset + ",t.index,"]))")}visitVariable(t){this.parts.push("v",t.index)}visitLiteral(t){this.parts.push(t.number)}visitBinaryOperation(t){this.parts.push("("),t.arg1.visit(this),this.parts.push(" ",t.op," "),t.arg2.visit(this),this.parts.push(")")}visitVariableDefinition(t){this.parts.push("var "),t.variable.visit(this),this.parts.push(" = "),t.arg.visit(this),this.parts.push(";")}visitMin(t){this.parts.push("Math.min("),t.arg.visit(this),this.parts.push(", ",t.max,")")}toString(){return this.parts.join("")}}function c(t,e){return"literal"===e.type&&0===e.number?t:"literal"===t.type&&0===t.number?e:"literal"===e.type&&"literal"===t.type?new i(t.number+e.number):new r("+",t,e,t.min+e.min,t.max+e.max)}function h(t,e){if("literal"===e.type){if(0===e.number)return new i(0);if(1===e.number)return t;if("literal"===t.type)return new i(t.number*e.number)}if("literal"===t.type){if(0===t.number)return new i(0);if(1===t.number)return e}const n=Math.min(t.min*e.min,t.min*e.max,t.max*e.min,t.max*e.max),o=Math.max(t.min*e.min,t.min*e.max,t.max*e.min,t.max*e.max);return new r("*",t,e,n,o)}function u(t,e){if("literal"===e.type){if(0===e.number)return t;if("literal"===t.type)return new i(t.number-e.number)}return"binary"===e.type&&"-"===e.op&&"literal"===t.type&&1===t.number&&"literal"===e.arg1.type&&1===e.arg1.number?e.arg2:new r("-",t,e,t.min-e.max,t.max-e.min)}function p(t,e){return t.min>=e?new i(e):t.max<=e?t:new o(t,e)}return class{compile(t,r,n){const o=[],d=[],f=r.length>>1,g=n.length>>1;let m,y,v,b,w,x,S,k,C=0;for(let t=0;t<f;t++)o.push(new e(t,r[2*t],r[2*t+1]));for(let e=0,r=t.length;e<r;e++)if(k=t[e],"number"!=typeof k)switch(k){case"add":if(o.length<2)return null;b=o.pop(),v=o.pop(),o.push(c(v,b));break;case"cvr":if(o.length<1)return null;break;case"mul":if(o.length<2)return null;b=o.pop(),v=o.pop(),o.push(h(v,b));break;case"sub":if(o.length<2)return null;b=o.pop(),v=o.pop(),o.push(u(v,b));break;case"exch":if(o.length<2)return null;w=o.pop(),x=o.pop(),o.push(w,x);break;case"pop":if(o.length<1)return null;o.pop();break;case"index":if(o.length<1)return null;if(v=o.pop(),"literal"!==v.type)return null;if(m=v.number,m<0||!Number.isInteger(m)||o.length<m)return null;if(w=o[o.length-m-1],"literal"===w.type||"var"===w.type){o.push(w);break}S=new s(C++,w.min,w.max),o[o.length-m-1]=S,o.push(S),d.push(new a(S,w));break;case"dup":if(o.length<1)return null;if("number"==typeof t[e+1]&&"gt"===t[e+2]&&t[e+3]===e+7&&"jz"===t[e+4]&&"pop"===t[e+5]&&t[e+6]===t[e+1]){v=o.pop(),o.push(p(v,t[e+1])),e+=6;break}if(w=o[o.length-1],"literal"===w.type||"var"===w.type){o.push(w);break}S=new s(C++,w.min,w.max),o[o.length-1]=S,o.push(S),d.push(new a(S,w));break;case"roll":if(o.length<2)return null;if(b=o.pop(),v=o.pop(),"literal"!==b.type||"literal"!==v.type)return null;if(y=b.number,m=v.number,m<=0||!Number.isInteger(m)||!Number.isInteger(y)||o.length<m)return null;if(y=(y%m+m)%m,0===y)break;Array.prototype.push.apply(o,o.splice(o.length-m,m-y));break;default:return null}else o.push(new i(k));if(o.length!==g)return null;const A=[];for(const t of d){const e=new l;t.visit(e),A.push(e.toString())}for(let t=0,e=o.length;t<e;t++){const e=o[t],i=new l;e.visit(i);const r=n[2*t],s=n[2*t+1],a=[i.toString()];r>e.min&&(a.unshift("Math.max(",r,", "),a.push(")")),s<e.max&&(a.unshift("Math.min(",s,", "),a.push(")")),a.unshift("dest[destOffset + ",t,"] = "),a.push(";"),A.push(a.join(""))}return A.join("\n")}}}();e.PostScriptCompiler=p},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PostScriptParser=e.PostScriptLexer=void 0;var r=i(2),n=i(5),o=i(8);e.PostScriptParser=class{constructor(t){this.lexer=t,this.operators=[],this.token=null,this.prev=null}nextToken(){this.prev=this.token,this.token=this.lexer.getToken()}accept(t){return this.token.type===t&&(this.nextToken(),!0)}expect(t){if(this.accept(t))return!0;throw new r.FormatError(`Unexpected symbol: found ${this.token.type} expected ${t}.`)}parse(){return this.nextToken(),this.expect(s.LBRACE),this.parseBlock(),this.expect(s.RBRACE),this.operators}parseBlock(){for(;;)if(this.accept(s.NUMBER))this.operators.push(this.prev.value);else if(this.accept(s.OPERATOR))this.operators.push(this.prev.value);else{if(!this.accept(s.LBRACE))return;this.parseCondition()}}parseCondition(){const t=this.operators.length;if(this.operators.push(null,null),this.parseBlock(),this.expect(s.RBRACE),this.accept(s.IF))this.operators[t]=this.operators.length,this.operators[t+1]="jz";else{if(!this.accept(s.LBRACE))throw new r.FormatError("PS Function: error parsing conditional.");{const e=this.operators.length;this.operators.push(null,null);const i=this.operators.length;this.parseBlock(),this.expect(s.RBRACE),this.expect(s.IFELSE),this.operators[e]=this.operators.length,this.operators[e+1]="j",this.operators[t]=i,this.operators[t+1]="jz"}}}};const s={LBRACE:0,RBRACE:1,NUMBER:2,OPERATOR:3,IF:4,IFELSE:5};class a{static get opCache(){return(0,r.shadow)(this,"opCache",Object.create(null))}constructor(t,e){this.type=t,this.value=e}static getOperator(t){const e=a.opCache[t];return e||(a.opCache[t]=new a(s.OPERATOR,t))}static get LBRACE(){return(0,r.shadow)(this,"LBRACE",new a(s.LBRACE,"{"))}static get RBRACE(){return(0,r.shadow)(this,"RBRACE",new a(s.RBRACE,"}"))}static get IF(){return(0,r.shadow)(this,"IF",new a(s.IF,"IF"))}static get IFELSE(){return(0,r.shadow)(this,"IFELSE",new a(s.IFELSE,"IFELSE"))}}e.PostScriptLexer=class{constructor(t){this.stream=t,this.nextChar(),this.strBuf=[]}nextChar(){return this.currentChar=this.stream.getByte()}getToken(){let t=!1,e=this.currentChar;for(;;){if(e<0)return n.EOF;if(t)10!==e&&13!==e||(t=!1);else if(37===e)t=!0;else if(!(0,o.isWhiteSpace)(e))break;e=this.nextChar()}switch(0|e){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return new a(s.NUMBER,this.getNumber());case 123:return this.nextChar(),a.LBRACE;case 125:return this.nextChar(),a.RBRACE}const i=this.strBuf;for(i.length=0,i[0]=String.fromCharCode(e);(e=this.nextChar())>=0&&(e>=65&&e<=90||e>=97&&e<=122);)i.push(String.fromCharCode(e));const r=i.join("");switch(r.toLowerCase()){case"if":return a.IF;case"ifelse":return a.IFELSE;default:return a.getOperator(r)}}getNumber(){let t=this.currentChar;const e=this.strBuf;for(e.length=0,e[0]=String.fromCharCode(t);(t=this.nextChar())>=0&&(t>=48&&t<=57||45===t||46===t);)e.push(String.fromCharCode(t));const i=parseFloat(e.join(""));if(isNaN(i))throw new r.FormatError(`Invalid floating point number: ${i}`);return i}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LocalTilingPatternCache=e.LocalImageCache=e.LocalGStateCache=e.LocalFunctionCache=e.LocalColorSpaceCache=e.GlobalImageCache=void 0;var r=i(2),n=i(5);class o{constructor(t){this.constructor===o&&(0,r.unreachable)("Cannot initialize BaseLocalCache."),this._onlyRefs=!0===(t&&t.onlyRefs),this._onlyRefs||(this._nameRefMap=new Map,this._imageMap=new Map),this._imageCache=new n.RefSetCache}getByName(t){this._onlyRefs&&(0,r.unreachable)("Should not call `getByName` method.");const e=this._nameRefMap.get(t);return e?this.getByRef(e):this._imageMap.get(t)||null}getByRef(t){return this._imageCache.get(t)||null}set(t,e,i){(0,r.unreachable)("Abstract method `set` called.")}}e.LocalImageCache=class extends o{set(t,e=null,i){if("string"!=typeof t)throw new Error('LocalImageCache.set - expected "name" argument.');if(e){if(this._imageCache.has(e))return;return this._nameRefMap.set(t,e),void this._imageCache.put(e,i)}this._imageMap.has(t)||this._imageMap.set(t,i)}},e.LocalColorSpaceCache=class extends o{set(t=null,e=null,i){if("string"!=typeof t&&!e)throw new Error('LocalColorSpaceCache.set - expected "name" and/or "ref" argument.');if(e){if(this._imageCache.has(e))return;return null!==t&&this._nameRefMap.set(t,e),void this._imageCache.put(e,i)}this._imageMap.has(t)||this._imageMap.set(t,i)}},e.LocalFunctionCache=class extends o{constructor(t){super({onlyRefs:!0})}set(t=null,e,i){if(!e)throw new Error('LocalFunctionCache.set - expected "ref" argument.');this._imageCache.has(e)||this._imageCache.put(e,i)}},e.LocalGStateCache=class extends o{set(t,e=null,i){if("string"!=typeof t)throw new Error('LocalGStateCache.set - expected "name" argument.');if(e){if(this._imageCache.has(e))return;return this._nameRefMap.set(t,e),void this._imageCache.put(e,i)}this._imageMap.has(t)||this._imageMap.set(t,i)}},e.LocalTilingPatternCache=class extends o{constructor(t){super({onlyRefs:!0})}set(t=null,e,i){if(!e)throw new Error('LocalTilingPatternCache.set - expected "ref" argument.');this._imageCache.has(e)||this._imageCache.put(e,i)}};class s{static get NUM_PAGES_THRESHOLD(){return(0,r.shadow)(this,"NUM_PAGES_THRESHOLD",2)}static get MIN_IMAGES_TO_CACHE(){return(0,r.shadow)(this,"MIN_IMAGES_TO_CACHE",10)}static get MAX_BYTE_SIZE(){return(0,r.shadow)(this,"MAX_BYTE_SIZE",4e7)}constructor(){this._refCache=new n.RefSetCache,this._imageCache=new n.RefSetCache}get _byteSize(){let t=0;for(const e of this._imageCache)t+=e.byteSize;return t}get _cacheLimitReached(){return!(this._imageCache.size<s.MIN_IMAGES_TO_CACHE||this._byteSize<s.MAX_BYTE_SIZE)}shouldCache(t,e){const i=this._refCache.get(t);return!((i?i.size+(i.has(e)?0:1):1)<s.NUM_PAGES_THRESHOLD||!this._imageCache.has(t)&&this._cacheLimitReached)}addPageIndex(t,e){let i=this._refCache.get(t);i||(i=new Set,this._refCache.put(t,i)),i.add(e)}addByteSize(t,e){const i=this._imageCache.get(t);i&&(i.byteSize||(i.byteSize=e))}getData(t,e){const i=this._refCache.get(t);if(!i)return null;if(i.size<s.NUM_PAGES_THRESHOLD)return null;const r=this._imageCache.get(t);return r?(i.add(e),r):null}setData(t,e){if(!this._refCache.has(t))throw new Error('GlobalImageCache.setData - expected "addPageIndex" to have been called.');this._imageCache.has(t)||(this._cacheLimitReached?(0,r.warn)("GlobalImageCache.setData - cache limit reached."):this._imageCache.put(t,e))}clear(t=!1){t||this._refCache.clear(),this._imageCache.clear()}}e.GlobalImageCache=s},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bidi=function(t,e=-1,i=!1){let f=!0;const g=t.length;if(0===g||i)return u(t,f,i);p.length=g,d.length=g;let m,y,v=0;for(m=0;m<g;++m){p[m]=t.charAt(m);const e=t.charCodeAt(m);let i="L";e<=255?i=n[e]:1424<=e&&e<=1524?i="R":1536<=e&&e<=1791?(i=o[255&e],i||(0,r.warn)("Bidi: invalid Unicode character "+e.toString(16))):1792<=e&&e<=2220&&(i="AL"),"R"!==i&&"AL"!==i&&"AN"!==i||v++,d[m]=i}if(0===v)return f=!0,u(t,f);-1===e&&(v/g<.3&&g>4?(f=!0,e=0):(f=!1,e=1));const b=[];for(m=0;m<g;++m)b[m]=e;const w=s(e)?"R":"L",x=w,S=x;let k,C=x;for(m=0;m<g;++m)"NSM"===d[m]?d[m]=C:C=d[m];for(C=x,m=0;m<g;++m)k=d[m],"EN"===k?d[m]="AL"===C?"AN":"EN":"R"!==k&&"L"!==k&&"AL"!==k||(C=k);for(m=0;m<g;++m)k=d[m],"AL"===k&&(d[m]="R");for(m=1;m<g-1;++m)"ES"===d[m]&&"EN"===d[m-1]&&"EN"===d[m+1]&&(d[m]="EN"),"CS"!==d[m]||"EN"!==d[m-1]&&"AN"!==d[m-1]||d[m+1]!==d[m-1]||(d[m]=d[m-1]);for(m=0;m<g;++m)if("EN"===d[m]){for(let t=m-1;t>=0&&"ET"===d[t];--t)d[t]="EN";for(let t=m+1;t<g&&"ET"===d[t];++t)d[t]="EN"}for(m=0;m<g;++m)k=d[m],"WS"!==k&&"ES"!==k&&"ET"!==k&&"CS"!==k||(d[m]="ON");for(C=x,m=0;m<g;++m)k=d[m],"EN"===k?d[m]="L"===C?"L":"EN":"R"!==k&&"L"!==k||(C=k);for(m=0;m<g;++m)if("ON"===d[m]){const t=l(d,m+1,"ON");let e=x;m>0&&(e=d[m-1]);let i=S;t+1<g&&(i=d[t+1]),"L"!==e&&(e="R"),"L"!==i&&(i="R"),e===i&&c(d,m,t,e),m=t-1}for(m=0;m<g;++m)"ON"===d[m]&&(d[m]=w);for(m=0;m<g;++m)k=d[m],a(b[m])?"R"===k?b[m]+=1:"AN"!==k&&"EN"!==k||(b[m]+=2):"L"!==k&&"AN"!==k&&"EN"!==k||(b[m]+=1);let A,_=-1,T=99;for(m=0,y=b.length;m<y;++m)A=b[m],_<A&&(_=A),T>A&&s(A)&&(T=A);for(A=_;A>=T;--A){let t=-1;for(m=0,y=b.length;m<y;++m)b[m]<A?t>=0&&(h(p,t,m),t=-1):t<0&&(t=m);t>=0&&h(p,t,b.length)}for(m=0,y=p.length;m<y;++m){const t=p[m];"<"!==t&&">"!==t||(p[m]="")}return u(p.join(""),f)};var r=i(2);const n=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","ON","ON","ET","ET","ET","ON","ON","ON","ON","ON","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","ON","ET","ET","ET","ET","ON","ON","ON","ON","L","ON","ON","BN","ON","ON","ET","ET","EN","EN","ON","L","ON","ON","ON","EN","L","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L"],o=["AN","AN","AN","AN","AN","AN","ON","ON","AL","ET","ET","AL","CS","AL","ON","ON","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","ON","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","ON","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL"];function s(t){return 0!=(1&t)}function a(t){return 0==(1&t)}function l(t,e,i){let r,n;for(r=e,n=t.length;r<n;++r)if(t[r]!==i)return r;return r}function c(t,e,i,r){for(let n=e;n<i;++n)t[n]=r}function h(t,e,i){for(let r=e,n=i-1;r<n;++r,--n){const e=t[r];t[r]=t[n],t[n]=e}}function u(t,e,i=!1){let r="ltr";return i?r="ttb":e||(r="rtl"),{str:t,dir:r}}const p=[],d=[]},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var r=i(2);const n=3285377520,o=4294901760,s=65535;e.MurmurHash3_64=class{constructor(t){this.h1=t?4294967295&t:n,this.h2=t?4294967295&t:n}update(t){let e,i;if("string"==typeof t){e=new Uint8Array(2*t.length),i=0;for(let r=0,n=t.length;r<n;r++){const n=t.charCodeAt(r);n<=255?e[i++]=n:(e[i++]=n>>>8,e[i++]=255&n)}}else{if(!(0,r.isArrayBuffer)(t))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");e=t.slice(),i=e.byteLength}const n=i>>2,a=i-4*n,l=new Uint32Array(e.buffer,0,n);let c=0,h=0,u=this.h1,p=this.h2;const d=3432918353,f=461845907,g=11601,m=13715;for(let t=0;t<n;t++)1&t?(c=l[t],c=c*d&o|c*g&s,c=c<<15|c>>>17,c=c*f&o|c*m&s,u^=c,u=u<<13|u>>>19,u=5*u+3864292196):(h=l[t],h=h*d&o|h*g&s,h=h<<15|h>>>17,h=h*f&o|h*m&s,p^=h,p=p<<13|p>>>19,p=5*p+3864292196);switch(c=0,a){case 3:c^=e[4*n+2]<<16;case 2:c^=e[4*n+1]<<8;case 1:c^=e[4*n],c=c*d&o|c*g&s,c=c<<15|c>>>17,c=c*f&o|c*m&s,1&n?u^=c:p^=c}this.h1=u,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;t^=e>>>1,t=3981806797*t&o|36045*t&s,e=4283543511*e&o|(2950163797*(e<<16|t>>>16)&o)>>>16,t^=e>>>1,t=444984403*t&o|60499*t&s,e=3301882366*e&o|(3120437893*(e<<16|t>>>16)&o)>>>16,t^=e>>>1;const i=(t>>>0).toString(16),r=(e>>>0).toString(16);return i.padStart(8,"0")+r.padStart(8,"0")}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OperatorList=void 0;var r=i(2);function n(t,e,i,r,n){let o=t;for(let t=0,i=e.length-1;t<i;t++){const i=e[t];o=o[i]||(o[i]=[])}o[e[e.length-1]]={checkFn:i,iterateFn:r,processFn:n}}const o=[];n(o,[r.OPS.save,r.OPS.transform,r.OPS.paintInlineImageXObject,r.OPS.restore],null,(function(t,e){const i=t.fnArray,n=(e-(t.iCurr-3))%4;switch(n){case 0:return i[e]===r.OPS.save;case 1:return i[e]===r.OPS.transform;case 2:return i[e]===r.OPS.paintInlineImageXObject;case 3:return i[e]===r.OPS.restore}throw new Error(`iterateInlineImageGroup - invalid pos: ${n}`)}),(function(t,e){const i=t.fnArray,n=t.argsArray,o=t.iCurr,s=o-3,a=o-2,l=o-1,c=Math.min(Math.floor((e-s)/4),200);if(c<10)return e-(e-s)%4;let h=0;const u=[];let p=0,d=1,f=1;for(let t=0;t<c;t++){const e=n[a+(t<<2)],i=n[l+(t<<2)][0];d+i.width>1e3&&(h=Math.max(h,d),f+=p+2,d=0,p=0),u.push({transform:e,x:d,y:f,w:i.width,h:i.height}),d+=i.width+2,p=Math.max(p,i.height)}const g=Math.max(h,d)+1,m=f+p+1,y=new Uint8Array(g*m*4),v=g<<2;for(let t=0;t<c;t++){const e=n[l+(t<<2)][0].data,i=u[t].w<<2;let r=0,o=u[t].x+u[t].y*g<<2;y.set(e.subarray(0,i),o-v);for(let n=0,s=u[t].h;n<s;n++)y.set(e.subarray(r,r+i),o),r+=i,o+=v;for(y.set(e.subarray(r-i,r),o);o>=0;)e[o-4]=e[o],e[o-3]=e[o+1],e[o-2]=e[o+2],e[o-1]=e[o+3],e[o+i]=e[o+i-4],e[o+i+1]=e[o+i-3],e[o+i+2]=e[o+i-2],e[o+i+3]=e[o+i-1],o-=v}return i.splice(s,4*c,r.OPS.paintInlineImageXObjectGroup),n.splice(s,4*c,[{width:g,height:m,kind:r.ImageKind.RGBA_32BPP,data:y},u]),s+1})),n(o,[r.OPS.save,r.OPS.transform,r.OPS.paintImageMaskXObject,r.OPS.restore],null,(function(t,e){const i=t.fnArray,n=(e-(t.iCurr-3))%4;switch(n){case 0:return i[e]===r.OPS.save;case 1:return i[e]===r.OPS.transform;case 2:return i[e]===r.OPS.paintImageMaskXObject;case 3:return i[e]===r.OPS.restore}throw new Error(`iterateImageMaskGroup - invalid pos: ${n}`)}),(function(t,e){const i=t.fnArray,n=t.argsArray,o=t.iCurr,s=o-3,a=o-2,l=o-1;let c=Math.floor((e-s)/4);if(c<10)return e-(e-s)%4;let h,u,p=!1;const d=n[l][0],f=n[a][0],g=n[a][1],m=n[a][2],y=n[a][3];if(g===m){p=!0,h=a+4;let t=l+4;for(let e=1;e<c;e++,h+=4,t+=4)if(u=n[h],n[t][0]!==d||u[0]!==f||u[1]!==g||u[2]!==m||u[3]!==y){e<10?p=!1:c=e;break}}if(p){c=Math.min(c,1e3);const t=new Float32Array(2*c);h=a;for(let e=0;e<c;e++,h+=4)u=n[h],t[e<<1]=u[4],t[1+(e<<1)]=u[5];i.splice(s,4*c,r.OPS.paintImageMaskXObjectRepeat),n.splice(s,4*c,[d,f,g,m,y,t])}else{c=Math.min(c,100);const t=[];for(let e=0;e<c;e++){u=n[a+(e<<2)];const i=n[l+(e<<2)][0];t.push({data:i.data,width:i.width,height:i.height,interpolate:i.interpolate,count:i.count,transform:u})}i.splice(s,4*c,r.OPS.paintImageMaskXObjectGroup),n.splice(s,4*c,[t])}return s+1})),n(o,[r.OPS.save,r.OPS.transform,r.OPS.paintImageXObject,r.OPS.restore],(function(t){const e=t.argsArray,i=t.iCurr-2;return 0===e[i][1]&&0===e[i][2]}),(function(t,e){const i=t.fnArray,n=t.argsArray,o=(e-(t.iCurr-3))%4;switch(o){case 0:return i[e]===r.OPS.save;case 1:if(i[e]!==r.OPS.transform)return!1;const o=t.iCurr-2,s=n[o][0],a=n[o][3];return n[e][0]===s&&0===n[e][1]&&0===n[e][2]&&n[e][3]===a;case 2:if(i[e]!==r.OPS.paintImageXObject)return!1;const l=n[t.iCurr-1][0];return n[e][0]===l;case 3:return i[e]===r.OPS.restore}throw new Error(`iterateImageGroup - invalid pos: ${o}`)}),(function(t,e){const i=t.fnArray,n=t.argsArray,o=t.iCurr,s=o-3,a=o-2,l=n[o-1][0],c=n[a][0],h=n[a][3],u=Math.min(Math.floor((e-s)/4),1e3);if(u<3)return e-(e-s)%4;const p=new Float32Array(2*u);let d=a;for(let t=0;t<u;t++,d+=4){const e=n[d];p[t<<1]=e[4],p[1+(t<<1)]=e[5]}const f=[l,c,h,p];return i.splice(s,4*u,r.OPS.paintImageXObjectRepeat),n.splice(s,4*u,f),s+1})),n(o,[r.OPS.beginText,r.OPS.setFont,r.OPS.setTextMatrix,r.OPS.showText,r.OPS.endText],null,(function(t,e){const i=t.fnArray,n=t.argsArray,o=(e-(t.iCurr-4))%5;switch(o){case 0:return i[e]===r.OPS.beginText;case 1:return i[e]===r.OPS.setFont;case 2:return i[e]===r.OPS.setTextMatrix;case 3:if(i[e]!==r.OPS.showText)return!1;const o=t.iCurr-3,s=n[o][0],a=n[o][1];return n[e][0]===s&&n[e][1]===a;case 4:return i[e]===r.OPS.endText}throw new Error(`iterateShowTextGroup - invalid pos: ${o}`)}),(function(t,e){const i=t.fnArray,r=t.argsArray,n=t.iCurr,o=n-4,s=n-3,a=n-2,l=n-1,c=n,h=r[s][0],u=r[s][1];let p=Math.min(Math.floor((e-o)/5),1e3);if(p<3)return e-(e-o)%5;let d=o;o>=4&&i[o-4]===i[s]&&i[o-3]===i[a]&&i[o-2]===i[l]&&i[o-1]===i[c]&&r[o-4][0]===h&&r[o-4][1]===u&&(p++,d-=5);let f=d+4;for(let t=1;t<p;t++)i.splice(f,3),r.splice(f,3),f+=2;return f+1}));class s{constructor(t){this.queue=t}_optimize(){}push(t,e){this.queue.fnArray.push(t),this.queue.argsArray.push(e),this._optimize()}flush(){}reset(){}}class a extends s{constructor(t){super(t),this.state=null,this.context={iCurr:0,fnArray:t.fnArray,argsArray:t.argsArray},this.match=null,this.lastProcessed=0}_optimize(){const t=this.queue.fnArray;let e=this.lastProcessed,i=t.length,r=this.state,n=this.match;if(!r&&!n&&e+1===i&&!o[t[e]])return void(this.lastProcessed=i);const s=this.context;for(;e<i;){if(n){if((0,n.iterateFn)(s,e)){e++;continue}if(e=(0,n.processFn)(s,e+1),i=t.length,n=null,r=null,e>=i)break}r=(r||o)[t[e]],r&&!Array.isArray(r)?(s.iCurr=e,e++,!r.checkFn||(0,r.checkFn)(s)?(n=r,r=null):r=null):e++}this.state=r,this.match=n,this.lastProcessed=e}flush(){for(;this.match;){const t=this.queue.fnArray.length;this.lastProcessed=(0,this.match.processFn)(this.context,t),this.match=null,this.state=null,this._optimize()}}reset(){this.state=null,this.match=null,this.lastProcessed=0}}class l{static get CHUNK_SIZE(){return(0,r.shadow)(this,"CHUNK_SIZE",1e3)}static get CHUNK_SIZE_ABOUT(){return(0,r.shadow)(this,"CHUNK_SIZE_ABOUT",this.CHUNK_SIZE-5)}constructor(t=0,e){this._streamSink=e,this.fnArray=[],this.argsArray=[],!e||t&r.RenderingIntentFlag.OPLIST?this.optimizer=new s(this):this.optimizer=new a(this),this.dependencies=new Set,this._totalLength=0,this.weight=0,this._resolved=e?null:Promise.resolve()}get length(){return this.argsArray.length}get ready(){return this._resolved||this._streamSink.ready}get totalLength(){return this._totalLength+this.length}addOp(t,e){this.optimizer.push(t,e),this.weight++,this._streamSink&&(this.weight>=l.CHUNK_SIZE||this.weight>=l.CHUNK_SIZE_ABOUT&&(t===r.OPS.restore||t===r.OPS.endText))&&this.flush()}addImageOps(t,e,i){void 0!==i&&this.addOp(r.OPS.beginMarkedContentProps,["OC",i]),this.addOp(t,e),void 0!==i&&this.addOp(r.OPS.endMarkedContent,[])}addDependency(t){this.dependencies.has(t)||(this.dependencies.add(t),this.addOp(r.OPS.dependency,[t]))}addDependencies(t){for(const e of t)this.addDependency(e)}addOpList(t){if(t instanceof l){for(const e of t.dependencies)this.dependencies.add(e);for(let e=0,i=t.length;e<i;e++)this.addOp(t.fnArray[e],t.argsArray[e])}else(0,r.warn)('addOpList - ignoring invalid "opList" parameter.')}getIR(){return{fnArray:this.fnArray,argsArray:this.argsArray,length:this.length}}get _transfers(){const t=[],{fnArray:e,argsArray:i,length:n}=this;for(let o=0;o<n;o++)switch(e[o]){case r.OPS.paintInlineImageXObject:case r.OPS.paintInlineImageXObjectGroup:case r.OPS.paintImageMaskXObject:const e=i[o][0];!e.cached&&e.data&&e.data.buffer instanceof ArrayBuffer&&t.push(e.data.buffer)}return t}flush(t=!1){this.optimizer.flush();const e=this.length;this._totalLength+=e,this._streamSink.enqueue({fnArray:this.fnArray,argsArray:this.argsArray,lastChunk:t,length:e},1,this._transfers),this.dependencies.clear(),this.fnArray.length=0,this.argsArray.length=0,this.weight=0,this.optimizer.reset()}}e.OperatorList=l},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFImage=void 0;var r=i(2),n=i(64),o=i(9),s=i(24),a=i(29),l=i(37),c=i(40),h=i(5);function u(t,e,i,r){return(t=e+t*i)<0?t=0:t>r&&(t=r),t}function p(t,e,i,r,n,o){const s=n*o;let a;a=e<=8?new Uint8Array(s):e<=16?new Uint16Array(s):new Uint32Array(s);const l=i/n,c=r/o;let h,u,p,d,f=0;const g=new Uint16Array(n),m=i;for(h=0;h<n;h++)g[h]=Math.floor(h*l);for(h=0;h<o;h++)for(p=Math.floor(h*c)*m,u=0;u<n;u++)d=p+g[u],a[f++]=t[d];return a}class d{constructor({xref:t,res:e,image:i,isInline:n=!1,smask:a=null,mask:l=null,isMask:u=!1,pdfFunctionFactory:p,localColorSpaceCache:f}){this.image=i;const g=i.dict,m=g.get("F","Filter");if(m instanceof h.Name)switch(m.name){case"JPXDecode":const t=new c.JpxImage;t.parseImageProperties(i.stream),i.stream.reset(),i.width=t.width,i.height=t.height,i.bitsPerComponent=t.bitsPerComponent,i.numComps=t.componentsCount;break;case"JBIG2Decode":i.bitsPerComponent=1,i.numComps=1}let y=g.get("W","Width"),v=g.get("H","Height");if(Number.isInteger(i.width)&&i.width>0&&Number.isInteger(i.height)&&i.height>0&&(i.width!==y||i.height!==v)&&((0,r.warn)("PDFImage - using the Width/Height of the image data, rather than the image dictionary."),y=i.width,v=i.height),y<1||v<1)throw new r.FormatError(`Invalid image width: ${y} or height: ${v}`);this.width=y,this.height=v,this.interpolate=g.get("I","Interpolate"),this.imageMask=g.get("IM","ImageMask")||!1,this.matte=g.get("Matte")||!1;let b=i.bitsPerComponent;if(!b&&(b=g.get("BPC","BitsPerComponent"),!b)){if(!this.imageMask)throw new r.FormatError(`Bits per component missing in image: ${this.imageMask}`);b=1}if(this.bpc=b,!this.imageMask){let o=g.getRaw("CS")||g.getRaw("ColorSpace");if(!o)switch((0,r.info)("JPX images (which do not require color spaces)"),i.numComps){case 1:o=h.Name.get("DeviceGray");break;case 3:o=h.Name.get("DeviceRGB");break;case 4:o=h.Name.get("DeviceCMYK");break;default:throw new Error(`JPX images with ${i.numComps} color components not supported.`)}this.colorSpace=s.ColorSpace.parse({cs:o,xref:t,resources:n?e:null,pdfFunctionFactory:p,localColorSpaceCache:f}),this.numComps=this.colorSpace.numComps}if(this.decode=g.getArray("D","Decode"),this.needsDecode=!1,this.decode&&(this.colorSpace&&!this.colorSpace.isDefaultDecode(this.decode,b)||u&&!s.ColorSpace.isDefaultDecode(this.decode,1))){this.needsDecode=!0;const t=(1<<b)-1;this.decodeCoefficients=[],this.decodeAddends=[];const e=this.colorSpace&&"Indexed"===this.colorSpace.name;for(let i=0,r=0;i<this.decode.length;i+=2,++r){const n=this.decode[i],o=this.decode[i+1];this.decodeCoefficients[r]=e?(o-n)/t:o-n,this.decodeAddends[r]=e?n:t*n}}a?this.smask=new d({xref:t,res:e,image:a,isInline:n,pdfFunctionFactory:p,localColorSpaceCache:f}):l&&(l instanceof o.BaseStream?l.dict.get("IM","ImageMask")?this.mask=new d({xref:t,res:e,image:l,isInline:n,isMask:!0,pdfFunctionFactory:p,localColorSpaceCache:f}):(0,r.warn)("Ignoring /Mask in image without /ImageMask."):this.mask=l)}static async buildImage({xref:t,res:e,image:i,isInline:n=!1,pdfFunctionFactory:s,localColorSpaceCache:a}){const l=i;let c=null,h=null;const u=i.dict.get("SMask"),p=i.dict.get("Mask");return u?u instanceof o.BaseStream?c=u:(0,r.warn)("Unsupported /SMask format."):p&&(p instanceof o.BaseStream||Array.isArray(p)?h=p:(0,r.warn)("Unsupported /Mask format.")),new d({xref:t,res:e,image:l,isInline:n,smask:c,mask:h,pdfFunctionFactory:s,localColorSpaceCache:a})}static createRawMask({imgArray:t,width:e,height:i,imageIsFromDecodeStream:r,inverseDecode:n,interpolate:o}){const s=(e+7>>3)*i,a=t.byteLength;let l,c;if(!r||n&&s!==a?n?(l=new Uint8Array(s),l.set(t),l.fill(255,a)):l=new Uint8Array(t):l=t,n)for(c=0;c<a;c++)l[c]^=255;return{data:l,width:e,height:i,interpolate:o}}static createMask({imgArray:t,width:e,height:i,imageIsFromDecodeStream:o,inverseDecode:s,interpolate:a}){const l=1===e&&1===i&&s===(0===t.length||!!(128&t[0]));if(l)return{isSingleOpaquePixel:l};if(r.FeatureTest.isOffscreenCanvasSupported){const r=new OffscreenCanvas(e,i),o=r.getContext("2d"),l=o.createImageData(e,i);return(0,n.applyMaskImageData)({src:t,dest:l.data,width:e,height:i,inverseDecode:s}),o.putImageData(l,0,0),{data:null,width:e,height:i,interpolate:a,bitmap:r.transferToImageBitmap()}}return this.createRawMask({imgArray:t,width:e,height:i,inverseDecode:s,imageIsFromDecodeStream:o,interpolate:a})}get drawWidth(){return Math.max(this.width,this.smask&&this.smask.width||0,this.mask&&this.mask.width||0)}get drawHeight(){return Math.max(this.height,this.smask&&this.smask.height||0,this.mask&&this.mask.height||0)}decodeBuffer(t){const e=this.bpc,i=this.numComps,r=this.decodeAddends,n=this.decodeCoefficients,o=(1<<e)-1;let s,a;if(1===e){for(s=0,a=t.length;s<a;s++)t[s]=+!t[s];return}let l=0;for(s=0,a=this.width*this.height;s<a;s++)for(let e=0;e<i;e++)t[l]=u(t[l],r[e],n[e],o),l++}getComponents(t){const e=this.bpc;if(8===e)return t;const i=this.width,r=this.height,n=this.numComps,o=i*r*n;let s,a=0;s=e<=8?new Uint8Array(o):e<=16?new Uint16Array(o):new Uint32Array(o);const l=i*n,c=(1<<e)-1;let h,u,p=0;if(1===e){let e,i,n;for(let o=0;o<r;o++){for(i=p+(-8&l),n=p+l;p<i;)u=t[a++],s[p]=u>>7&1,s[p+1]=u>>6&1,s[p+2]=u>>5&1,s[p+3]=u>>4&1,s[p+4]=u>>3&1,s[p+5]=u>>2&1,s[p+6]=u>>1&1,s[p+7]=1&u,p+=8;if(p<n)for(u=t[a++],e=128;p<n;)s[p++]=+!!(u&e),e>>=1}}else{let i=0;for(u=0,p=0,h=o;p<h;++p){for(p%l==0&&(u=0,i=0);i<e;)u=u<<8|t[a++],i+=8;const r=i-e;let n=u>>r;n<0?n=0:n>c&&(n=c),s[p]=n,u&=(1<<r)-1,i=r}}return s}fillOpacity(t,e,i,n,o){const s=this.smask,a=this.mask;let l,c,h,u,f,g;if(s)c=s.width,h=s.height,l=new Uint8ClampedArray(c*h),s.fillGrayBuffer(l),c===e&&h===i||(l=p(l,s.bpc,c,h,e,i));else if(a)if(a instanceof d){for(c=a.width,h=a.height,l=new Uint8ClampedArray(c*h),a.numComps=1,a.fillGrayBuffer(l),u=0,f=c*h;u<f;++u)l[u]=255-l[u];c===e&&h===i||(l=p(l,a.bpc,c,h,e,i))}else{if(!Array.isArray(a))throw new r.FormatError("Unknown mask format.");{l=new Uint8ClampedArray(e*i);const t=this.numComps;for(u=0,f=e*i;u<f;++u){let e=0;const i=u*t;for(g=0;g<t;++g){const t=o[i+g],r=2*g;if(t<a[r]||t>a[r+1]){e=255;break}}l[u]=e}}}if(l)for(u=0,g=3,f=e*n;u<f;++u,g+=4)t[g]=l[u];else for(u=0,g=3,f=e*n;u<f;++u,g+=4)t[g]=255}undoPreblend(t,e,i){const r=this.smask&&this.smask.matte;if(!r)return;const n=this.colorSpace.getRgb(r,0),o=n[0],s=n[1],a=n[2],l=e*i*4;for(let e=0;e<l;e+=4){const i=t[e+3];if(0===i){t[e]=255,t[e+1]=255,t[e+2]=255;continue}const r=255/i;t[e]=(t[e]-o)*r+o,t[e+1]=(t[e+1]-s)*r+s,t[e+2]=(t[e+2]-a)*r+a}}createImageData(t=!1){const e=this.drawWidth,i=this.drawHeight,n={width:e,height:i,interpolate:this.interpolate,kind:0,data:null},o=this.numComps,s=this.width,a=this.height,c=this.bpc,h=s*o*c+7>>3;if(!t){let t;if("DeviceGray"===this.colorSpace.name&&1===c?t=r.ImageKind.GRAYSCALE_1BPP:"DeviceRGB"!==this.colorSpace.name||8!==c||this.needsDecode||(t=r.ImageKind.RGB_24BPP),t&&!this.smask&&!this.mask&&e===s&&i===a){if(n.kind=t,n.data=this.getImageBytes(a*h,{}),this.needsDecode){(0,r.assert)(t===r.ImageKind.GRAYSCALE_1BPP,"PDFImage.createImageData: The image must be grayscale.");const e=n.data;for(let t=0,i=e.length;t<i;t++)e[t]^=255}return n}if(this.image instanceof l.JpegStream&&!this.smask&&!this.mask){let t=a*h;switch(this.colorSpace.name){case"DeviceGray":t*=3;case"DeviceRGB":case"DeviceCMYK":return n.kind=r.ImageKind.RGB_24BPP,n.data=this.getImageBytes(t,{drawWidth:e,drawHeight:i,forceRGB:!0}),n}}}const u=this.getImageBytes(a*h,{internal:!0}),p=0|u.length/h*i/a,d=this.getComponents(u);let f,g;return t||this.smask||this.mask?(n.kind=r.ImageKind.RGBA_32BPP,n.data=new Uint8ClampedArray(e*i*4),f=1,g=!0,this.fillOpacity(n.data,e,i,p,d)):(n.kind=r.ImageKind.RGB_24BPP,n.data=new Uint8ClampedArray(e*i*3),f=0,g=!1),this.needsDecode&&this.decodeBuffer(d),this.colorSpace.fillRgb(n.data,s,a,e,i,p,c,d,f),g&&this.undoPreblend(n.data,e,p),n}fillGrayBuffer(t){const e=this.numComps;if(1!==e)throw new r.FormatError(`Reading gray scale from a color image: ${e}`);const i=this.width,n=this.height,o=this.bpc,s=i*e*o+7>>3,a=this.getImageBytes(n*s,{internal:!0}),l=this.getComponents(a);let c,h;if(1===o){if(h=i*n,this.needsDecode)for(c=0;c<h;++c)t[c]=l[c]-1&255;else for(c=0;c<h;++c)t[c]=255&-l[c];return}this.needsDecode&&this.decodeBuffer(l),h=i*n;const u=255/((1<<o)-1);for(c=0;c<h;++c)t[c]=u*l[c]}getImageBytes(t,{drawWidth:e,drawHeight:i,forceRGB:n=!1,internal:o=!1}){this.image.reset(),this.image.drawWidth=e||this.width,this.image.drawHeight=i||this.height,this.image.forceRGB=!!n;const s=this.image.getBytes(t);return o||this.image instanceof a.DecodeStream?s:((0,r.assert)(s instanceof Uint8Array,'PDFImage.getImageBytes: Unsupported "imageBytes" type.'),new Uint8Array(s))}}e.PDFImage=d},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.applyMaskImageData=function({src:t,srcPos:e=0,dest:i,destPos:n=0,width:o,height:s,inverseDecode:a=!1}){const l=r.FeatureTest.isLittleEndian?4278190080:255,[c,h]=a?[0,l]:[l,0],u=o>>3,p=7&o,d=t.length;i=new Uint32Array(i.buffer);for(let r=0;r<s;r++){for(const r=e+u;e<r;e++){const r=e<d?t[e]:255;i[n++]=128&r?h:c,i[n++]=64&r?h:c,i[n++]=32&r?h:c,i[n++]=16&r?h:c,i[n++]=8&r?h:c,i[n++]=4&r?h:c,i[n++]=2&r?h:c,i[n++]=1&r?h:c}if(0===p)continue;const r=e<d?t[e++]:255;for(let t=0;t<p;t++)i[n++]=r&1<<7-t?h:c}return{srcPos:e,destPos:n}};var r=i(2)},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Catalog=void 0;var r=i(8),n=i(2),o=i(5),s=i(66),a=i(9),l=i(67),c=i(24),h=i(68),u=i(59),p=i(69),d=i(71);function f(t){return t instanceof o.Dict&&(t=t.get("D")),Array.isArray(t)?t:null}class g{constructor(t,e){if(this.pdfManager=t,this.xref=e,this._catDict=e.getCatalogObj(),!(this._catDict instanceof o.Dict))throw new n.FormatError("Catalog object is not a dictionary.");this.toplevelPagesDict,this._actualNumPages=null,this.fontCache=new o.RefSetCache,this.builtInCMapCache=new Map,this.standardFontDataCache=new Map,this.globalImageCache=new u.GlobalImageCache,this.pageKidsCountCache=new o.RefSetCache,this.pageIndexCache=new o.RefSetCache,this.nonBlendModesSet=new o.RefSet}get version(){const t=this._catDict.get("Version");return(0,n.shadow)(this,"version",t instanceof o.Name?t.name:null)}get lang(){const t=this._catDict.get("Lang");return(0,n.shadow)(this,"lang","string"==typeof t?(0,n.stringToPDFString)(t):null)}get needsRendering(){const t=this._catDict.get("NeedsRendering");return(0,n.shadow)(this,"needsRendering","boolean"==typeof t&&t)}get collection(){let t=null;try{const e=this._catDict.get("Collection");e instanceof o.Dict&&e.size>0&&(t=e)}catch(t){if(t instanceof r.MissingDataException)throw t;(0,n.info)("Cannot fetch Collection entry; assuming no collection is present.")}return(0,n.shadow)(this,"collection",t)}get acroForm(){let t=null;try{const e=this._catDict.get("AcroForm");e instanceof o.Dict&&e.size>0&&(t=e)}catch(t){if(t instanceof r.MissingDataException)throw t;(0,n.info)("Cannot fetch AcroForm entry; assuming no forms are present.")}return(0,n.shadow)(this,"acroForm",t)}get acroFormRef(){const t=this._catDict.getRaw("AcroForm");return(0,n.shadow)(this,"acroFormRef",t instanceof o.Ref?t:null)}get metadata(){const t=this._catDict.getRaw("Metadata");if(!(t instanceof o.Ref))return(0,n.shadow)(this,"metadata",null);let e=null;try{const i=!(this.xref.encrypt&&this.xref.encrypt.encryptMetadata),r=this.xref.fetch(t,i);if(r instanceof a.BaseStream&&r.dict instanceof o.Dict){const t=r.dict.get("Type"),i=r.dict.get("Subtype");if((0,o.isName)(t,"Metadata")&&(0,o.isName)(i,"XML")){const t=(0,n.stringToUTF8String)(r.getString());t&&(e=new p.MetadataParser(t).serializable)}}}catch(t){if(t instanceof r.MissingDataException)throw t;(0,n.info)(`Skipping invalid Metadata: "${t}".`)}return(0,n.shadow)(this,"metadata",e)}get markInfo(){let t=null;try{t=this._readMarkInfo()}catch(t){if(t instanceof r.MissingDataException)throw t;(0,n.warn)("Unable to read mark info.")}return(0,n.shadow)(this,"markInfo",t)}_readMarkInfo(){const t=this._catDict.get("MarkInfo");if(!(t instanceof o.Dict))return null;const e={Marked:!1,UserProperties:!1,Suspects:!1};for(const i in e){const r=t.get(i);"boolean"==typeof r&&(e[i]=r)}return e}get structTreeRoot(){let t=null;try{t=this._readStructTreeRoot()}catch(t){if(t instanceof r.MissingDataException)throw t;(0,n.warn)("Unable read to structTreeRoot info.")}return(0,n.shadow)(this,"structTreeRoot",t)}_readStructTreeRoot(){const t=this._catDict.get("StructTreeRoot");if(!(t instanceof o.Dict))return null;const e=new d.StructTreeRoot(t);return e.init(),e}get toplevelPagesDict(){const t=this._catDict.get("Pages");if(!(t instanceof o.Dict))throw new n.FormatError("Invalid top-level pages dictionary.");return(0,n.shadow)(this,"toplevelPagesDict",t)}get documentOutline(){let t=null;try{t=this._readDocumentOutline()}catch(t){if(t instanceof r.MissingDataException)throw t;(0,n.warn)("Unable to read document outline.")}return(0,n.shadow)(this,"documentOutline",t)}_readDocumentOutline(){let t=this._catDict.get("Outlines");if(!(t instanceof o.Dict))return null;if(t=t.getRaw("First"),!(t instanceof o.Ref))return null;const e={items:[]},i=[{obj:t,parent:e}],r=new o.RefSet;r.put(t);const s=this.xref,a=new Uint8ClampedArray(3);for(;i.length>0;){const e=i.shift(),l=s.fetchIfRef(e.obj);if(null===l)continue;if(!l.has("Title"))throw new n.FormatError("Invalid outline item encountered.");const h={url:null,dest:null};g.parseDestDictionary({destDict:l,resultObj:h,docBaseUrl:this.pdfManager.docBaseUrl});const u=l.get("Title"),p=l.get("F")||0,d=l.getArray("C"),f=l.get("Count");let m=a;!Array.isArray(d)||3!==d.length||0===d[0]&&0===d[1]&&0===d[2]||(m=c.ColorSpace.singletons.rgb.getRgb(d,0));const y={dest:h.dest,url:h.url,unsafeUrl:h.unsafeUrl,newWindow:h.newWindow,title:(0,n.stringToPDFString)(u),color:m,count:Number.isInteger(f)?f:void 0,bold:!!(2&p),italic:!!(1&p),items:[]};e.parent.items.push(y),t=l.getRaw("First"),t instanceof o.Ref&&!r.has(t)&&(i.push({obj:t,parent:y}),r.put(t)),t=l.getRaw("Next"),t instanceof o.Ref&&!r.has(t)&&(i.push({obj:t,parent:e.parent}),r.put(t))}return e.items.length>0?e.items:null}get permissions(){let t=null;try{t=this._readPermissions()}catch(t){if(t instanceof r.MissingDataException)throw t;(0,n.warn)("Unable to read permissions.")}return(0,n.shadow)(this,"permissions",t)}_readPermissions(){const t=this.xref.trailer.get("Encrypt");if(!(t instanceof o.Dict))return null;let e=t.get("P");if("number"!=typeof e)return null;e+=2**32;const i=[];for(const t in n.PermissionFlag){const r=n.PermissionFlag[t];e&r&&i.push(r)}return i}get optionalContentConfig(){let t=null;try{const e=this._catDict.get("OCProperties");if(!e)return(0,n.shadow)(this,"optionalContentConfig",null);const i=e.get("D");if(!i)return(0,n.shadow)(this,"optionalContentConfig",null);const r=e.get("OCGs");if(!Array.isArray(r))return(0,n.shadow)(this,"optionalContentConfig",null);const s=[],a=[];for(const t of r){if(!(t instanceof o.Ref))continue;a.push(t);const e=this.xref.fetchIfRef(t);s.push({id:t.toString(),name:"string"==typeof e.get("Name")?(0,n.stringToPDFString)(e.get("Name")):null,intent:"string"==typeof e.get("Intent")?(0,n.stringToPDFString)(e.get("Intent")):null})}t=this._readOptionalContentConfig(i,a),t.groups=s}catch(t){if(t instanceof r.MissingDataException)throw t;(0,n.warn)(`Unable to read optional content config: ${t}`)}return(0,n.shadow)(this,"optionalContentConfig",t)}_readOptionalContentConfig(t,e){function i(t){const i=[];if(Array.isArray(t))for(const r of t)r instanceof o.Ref&&e.includes(r)&&i.push(r.toString());return i}function r(t,i=0){if(!Array.isArray(t))return null;const r=[];for(const n of t){if(n instanceof o.Ref&&e.includes(n)){l.put(n),r.push(n.toString());continue}const t=s(n,i);t&&r.push(t)}if(i>0)return r;const n=[];for(const t of e)l.has(t)||n.push(t.toString());return n.length&&r.push({name:null,order:n}),r}function s(t,e){if(++e>c)return(0,n.warn)("parseNestedOrder - reached MAX_NESTED_LEVELS."),null;const i=a.fetchIfRef(t);if(!Array.isArray(i))return null;const o=a.fetchIfRef(i[0]);if("string"!=typeof o)return null;const s=r(i.slice(1),e);return s&&s.length?{name:(0,n.stringToPDFString)(o),order:s}:null}const a=this.xref,l=new o.RefSet,c=10;return{name:"string"==typeof t.get("Name")?(0,n.stringToPDFString)(t.get("Name")):null,creator:"string"==typeof t.get("Creator")?(0,n.stringToPDFString)(t.get("Creator")):null,baseState:t.get("BaseState")instanceof o.Name?t.get("BaseState").name:null,on:i(t.get("ON")),off:i(t.get("OFF")),order:r(t.get("Order")),groups:null}}setActualNumPages(t=null){this._actualNumPages=t}get hasActualNumPages(){return null!==this._actualNumPages}get _pagesCount(){const t=this.toplevelPagesDict.get("Count");if(!Number.isInteger(t))throw new n.FormatError("Page count in top-level pages dictionary is not an integer.");return(0,n.shadow)(this,"_pagesCount",t)}get numPages(){return this.hasActualNumPages?this._actualNumPages:this._pagesCount}get destinations(){const t=this._readDests(),e=Object.create(null);if(t instanceof s.NameTree)for(const[i,r]of t.getAll()){const t=f(r);t&&(e[(0,n.stringToPDFString)(i)]=t)}else t instanceof o.Dict&&t.forEach((function(t,i){const r=f(i);r&&(e[t]=r)}));return(0,n.shadow)(this,"destinations",e)}getDestination(t){const e=this._readDests();if(e instanceof s.NameTree){const i=f(e.get(t));if(i)return i;const r=this.destinations[t];if(r)return(0,n.warn)(`Found "${t}" at an incorrect position in the NameTree.`),r}else if(e instanceof o.Dict){const i=f(e.get(t));if(i)return i}return null}_readDests(){const t=this._catDict.get("Names");return t&&t.has("Dests")?new s.NameTree(t.getRaw("Dests"),this.xref):this._catDict.has("Dests")?this._catDict.get("Dests"):void 0}get pageLabels(){let t=null;try{t=this._readPageLabels()}catch(t){if(t instanceof r.MissingDataException)throw t;(0,n.warn)("Unable to read page labels.")}return(0,n.shadow)(this,"pageLabels",t)}_readPageLabels(){const t=this._catDict.getRaw("PageLabels");if(!t)return null;const e=new Array(this.numPages);let i=null,a="";const l=new s.NumberTree(t,this.xref).getAll();let c="",h=1;for(let t=0,s=this.numPages;t<s;t++){const s=l.get(t);if(void 0!==s){if(!(s instanceof o.Dict))throw new n.FormatError("PageLabel is not a dictionary.");if(s.has("Type")&&!(0,o.isName)(s.get("Type"),"PageLabel"))throw new n.FormatError("Invalid type in PageLabel dictionary.");if(s.has("S")){const t=s.get("S");if(!(t instanceof o.Name))throw new n.FormatError("Invalid style in PageLabel dictionary.");i=t.name}else i=null;if(s.has("P")){const t=s.get("P");if("string"!=typeof t)throw new n.FormatError("Invalid prefix in PageLabel dictionary.");a=(0,n.stringToPDFString)(t)}else a="";if(s.has("St")){const t=s.get("St");if(!(Number.isInteger(t)&&t>=1))throw new n.FormatError("Invalid start in PageLabel dictionary.");h=t}else h=1}switch(i){case"D":c=h;break;case"R":case"r":c=(0,r.toRomanNumerals)(h,"r"===i);break;case"A":case"a":const t=26,e=65,o=97,s="a"===i?o:e,a=h-1;c=String.fromCharCode(s+a%t).repeat(Math.floor(a/t)+1);break;default:if(i)throw new n.FormatError(`Invalid style "${i}" in PageLabel dictionary.`);c=""}e[t]=a+c,h++}return e}get pageLayout(){const t=this._catDict.get("PageLayout");let e="";if(t instanceof o.Name)switch(t.name){case"SinglePage":case"OneColumn":case"TwoColumnLeft":case"TwoColumnRight":case"TwoPageLeft":case"TwoPageRight":e=t.name}return(0,n.shadow)(this,"pageLayout",e)}get pageMode(){const t=this._catDict.get("PageMode");let e="UseNone";if(t instanceof o.Name)switch(t.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"FullScreen":case"UseOC":case"UseAttachments":e=t.name}return(0,n.shadow)(this,"pageMode",e)}get viewerPreferences(){const t=this._catDict.get("ViewerPreferences");if(!(t instanceof o.Dict))return(0,n.shadow)(this,"viewerPreferences",null);let e=null;for(const i of t.getKeys()){const r=t.get(i);let s;switch(i){case"HideToolbar":case"HideMenubar":case"HideWindowUI":case"FitWindow":case"CenterWindow":case"DisplayDocTitle":case"PickTrayByPDFSize":"boolean"==typeof r&&(s=r);break;case"NonFullScreenPageMode":if(r instanceof o.Name)switch(r.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"UseOC":s=r.name;break;default:s="UseNone"}break;case"Direction":if(r instanceof o.Name)switch(r.name){case"L2R":case"R2L":s=r.name;break;default:s="L2R"}break;case"ViewArea":case"ViewClip":case"PrintArea":case"PrintClip":if(r instanceof o.Name)switch(r.name){case"MediaBox":case"CropBox":case"BleedBox":case"TrimBox":case"ArtBox":s=r.name;break;default:s="CropBox"}break;case"PrintScaling":if(r instanceof o.Name)switch(r.name){case"None":case"AppDefault":s=r.name;break;default:s="AppDefault"}break;case"Duplex":if(r instanceof o.Name)switch(r.name){case"Simplex":case"DuplexFlipShortEdge":case"DuplexFlipLongEdge":s=r.name;break;default:s="None"}break;case"PrintPageRange":Array.isArray(r)&&r.length%2==0&&r.every(((t,e,i)=>Number.isInteger(t)&&t>0&&(0===e||t>=i[e-1])&&t<=this.numPages))&&(s=r);break;case"NumCopies":Number.isInteger(r)&&r>0&&(s=r);break;default:(0,n.warn)(`Ignoring non-standard key in ViewerPreferences: ${i}.`);continue}void 0!==s?(e||(e=Object.create(null)),e[i]=s):(0,n.warn)(`Bad value, for key "${i}", in ViewerPreferences: ${r}.`)}return(0,n.shadow)(this,"viewerPreferences",e)}get openAction(){const t=this._catDict.get("OpenAction"),e=Object.create(null);if(t instanceof o.Dict){const i=new o.Dict(this.xref);i.set("A",t);const r={url:null,dest:null,action:null};g.parseDestDictionary({destDict:i,resultObj:r}),Array.isArray(r.dest)?e.dest=r.dest:r.action&&(e.action=r.action)}else Array.isArray(t)&&(e.dest=t);return(0,n.shadow)(this,"openAction",(0,n.objectSize)(e)>0?e:null)}get attachments(){const t=this._catDict.get("Names");let e=null;if(t instanceof o.Dict&&t.has("EmbeddedFiles")){const i=new s.NameTree(t.getRaw("EmbeddedFiles"),this.xref);for(const[t,r]of i.getAll()){const i=new h.FileSpec(r,this.xref);e||(e=Object.create(null)),e[(0,n.stringToPDFString)(t)]=i.serializable}}return(0,n.shadow)(this,"attachments",e)}get xfaImages(){const t=this._catDict.get("Names");let e=null;if(t instanceof o.Dict&&t.has("XFAImages")){const i=new s.NameTree(t.getRaw("XFAImages"),this.xref);for(const[t,r]of i.getAll())e||(e=new o.Dict(this.xref)),e.set((0,n.stringToPDFString)(t),r)}return(0,n.shadow)(this,"xfaImages",e)}_collectJavaScript(){const t=this._catDict.get("Names");let e=null;function i(t,i){if(!(i instanceof o.Dict))return;if(!(0,o.isName)(i.get("S"),"JavaScript"))return;let r=i.get("JS");if(r instanceof a.BaseStream)r=r.getString();else if("string"!=typeof r)return;null===e&&(e=new Map),e.set(t,(0,n.stringToPDFString)(r))}if(t instanceof o.Dict&&t.has("JavaScript")){const e=new s.NameTree(t.getRaw("JavaScript"),this.xref);for(const[t,r]of e.getAll())i((0,n.stringToPDFString)(t),r)}const r=this._catDict.get("OpenAction");return r&&i("OpenAction",r),e}get javaScript(){const t=this._collectJavaScript();return(0,n.shadow)(this,"javaScript",t?[...t.values()]:null)}get jsActions(){const t=this._collectJavaScript();let e=(0,r.collectActions)(this.xref,this._catDict,n.DocumentActionEventType);if(t){e||(e=Object.create(null));for(const[i,r]of t)i in e?e[i].push(r):e[i]=[r]}return(0,n.shadow)(this,"jsActions",e)}async fontFallback(t,e){const i=await Promise.all(this.fontCache);for(const r of i)if(r.loadedName===t)return void r.fallback(e)}async cleanup(t=!1){(0,l.clearGlobalCaches)(),this.globalImageCache.clear(t),this.pageKidsCountCache.clear(),this.pageIndexCache.clear(),this.nonBlendModesSet.clear();const e=await Promise.all(this.fontCache);for(const{dict:t}of e)delete t.cacheKey;this.fontCache.clear(),this.builtInCMapCache.clear(),this.standardFontDataCache.clear()}async getPageDict(t){const e=[this.toplevelPagesDict],i=new o.RefSet,r=this._catDict.getRaw("Pages");r instanceof o.Ref&&i.put(r);const s=this.xref,a=this.pageKidsCountCache,l=this.pageIndexCache;let c=0;for(;e.length;){const r=e.pop();if(r instanceof o.Ref){const h=a.get(r);if(h>=0&&c+h<=t){c+=h;continue}if(i.has(r))throw new n.FormatError("Pages tree contains circular reference.");i.put(r);const u=await s.fetchAsync(r);if(u instanceof o.Dict){let e=u.getRaw("Type");if(e instanceof o.Ref&&(e=await s.fetchAsync(e)),(0,o.isName)(e,"Page")||!u.has("Kids")){if(a.has(r)||a.put(r,1),l.has(r)||l.put(r,c),c===t)return[u,r];c++;continue}}e.push(u);continue}if(!(r instanceof o.Dict))throw new n.FormatError("Page dictionary kid reference points to wrong type of object.");const{objId:h}=r;let u=r.getRaw("Count");if(u instanceof o.Ref&&(u=await s.fetchAsync(u)),Number.isInteger(u)&&u>=0&&(h&&!a.has(h)&&a.put(h,u),c+u<=t)){c+=u;continue}let p=r.getRaw("Kids");if(p instanceof o.Ref&&(p=await s.fetchAsync(p)),!Array.isArray(p)){let e=r.getRaw("Type");if(e instanceof o.Ref&&(e=await s.fetchAsync(e)),(0,o.isName)(e,"Page")||!r.has("Kids")){if(c===t)return[r,null];c++;continue}throw new n.FormatError("Page dictionary kids object is not an array.")}for(let t=p.length-1;t>=0;t--)e.push(p[t])}throw new Error(`Page index ${t} not found.`)}async getAllPageDicts(t=!1){const e=[{currentNode:this.toplevelPagesDict,posInKids:0}],i=new o.RefSet,s=this._catDict.getRaw("Pages");s instanceof o.Ref&&i.put(s);const a=new Map,l=this.xref,c=this.pageIndexCache;let h=0;function u(e){if(e instanceof r.XRefEntryException&&!t)throw e;a.set(h++,[e,null])}for(;e.length>0;){const t=e[e.length-1],{currentNode:r,posInKids:s}=t;let f=r.getRaw("Kids");if(f instanceof o.Ref)try{f=await l.fetchAsync(f)}catch(t){u(t);break}if(!Array.isArray(f)){u(new n.FormatError("Page dictionary kids object is not an array."));break}if(s>=f.length){e.pop();continue}const g=f[s];let m;if(g instanceof o.Ref){if(i.has(g)){u(new n.FormatError("Pages tree contains circular reference."));break}i.put(g);try{m=await l.fetchAsync(g)}catch(t){u(t);break}}else m=g;if(!(m instanceof o.Dict)){u(new n.FormatError("Page dictionary kid reference points to wrong type of object."));break}let y=m.getRaw("Type");if(y instanceof o.Ref)try{y=await l.fetchAsync(y)}catch(t){u(t);break}(0,o.isName)(y,"Page")||!m.has("Kids")?(p=m,(d=g instanceof o.Ref?g:null)&&!c.has(d)&&c.put(d,h),a.set(h++,[p,d])):e.push({currentNode:m,posInKids:0}),t.posInKids++}var p,d;return a}getPageIndex(t){const e=this.pageIndexCache.get(t);if(void 0!==e)return Promise.resolve(e);const i=this.xref;let r=0;const s=e=>function(e){let r,s=0;return i.fetchAsync(e).then((function(i){if((0,o.isRefsEqual)(e,t)&&!(0,o.isDict)(i,"Page")&&!(i instanceof o.Dict&&!i.has("Type")&&i.has("Contents")))throw new n.FormatError("The reference does not point to a /Page dictionary.");if(!i)return null;if(!(i instanceof o.Dict))throw new n.FormatError("Node must be a dictionary.");return r=i.getRaw("Parent"),i.getAsync("Parent")})).then((function(t){if(!t)return null;if(!(t instanceof o.Dict))throw new n.FormatError("Parent must be a dictionary.");return t.getAsync("Kids")})).then((function(t){if(!t)return null;const a=[];let l=!1;for(let r=0,c=t.length;r<c;r++){const c=t[r];if(!(c instanceof o.Ref))throw new n.FormatError("Kid must be a reference.");if((0,o.isRefsEqual)(c,e)){l=!0;break}a.push(i.fetchAsync(c).then((function(t){if(!(t instanceof o.Dict))throw new n.FormatError("Kid node must be a dictionary.");t.has("Count")?s+=t.get("Count"):s++})))}if(!l)throw new n.FormatError("Kid reference not found in parent's kids.");return Promise.all(a).then((function(){return[s,r]}))}))}(e).then((e=>{if(!e)return this.pageIndexCache.put(t,r),r;const[i,n]=e;return r+=i,s(n)}));return s(t)}get baseUrl(){const t=this._catDict.get("URI");if(t instanceof o.Dict){const e=t.get("Base");if("string"==typeof e){const t=(0,n.createValidAbsoluteUrl)(e,null,{tryConvertEncoding:!0});if(t)return(0,n.shadow)(this,"baseUrl",t.href)}}return(0,n.shadow)(this,"baseUrl",null)}static parseDestDictionary(t){const e=t.destDict;if(!(e instanceof o.Dict))return void(0,n.warn)("parseDestDictionary: `destDict` must be a dictionary.");const i=t.resultObj;if("object"!=typeof i)return void(0,n.warn)("parseDestDictionary: `resultObj` must be an object.");const s=t.docBaseUrl||null;let l,c,h=e.get("A");if(h instanceof o.Dict||(e.has("Dest")?h=e.get("Dest"):(h=e.get("AA"),h instanceof o.Dict&&(h.has("D")?h=h.get("D"):h.has("U")&&(h=h.get("U"))))),h instanceof o.Dict){const t=h.get("S");if(!(t instanceof o.Name))return void(0,n.warn)("parseDestDictionary: Invalid type in Action dictionary.");const e=t.name;switch(e){case"ResetForm":const t=h.get("Flags"),s=0==(1&("number"==typeof t?t:0)),u=[],p=[];for(const t of h.get("Fields")||[])t instanceof o.Ref?p.push(t.toString()):"string"==typeof t&&u.push((0,n.stringToPDFString)(t));i.resetForm={fields:u,refs:p,include:s};break;case"URI":l=h.get("URI"),l instanceof o.Name&&(l="/"+l.name);break;case"GoTo":c=h.get("D");break;case"Launch":case"GoToR":const d=h.get("F");d instanceof o.Dict?l=d.get("F")||null:"string"==typeof d&&(l=d);let f=h.get("D");if(f&&(f instanceof o.Name&&(f=f.name),"string"==typeof l)){const t=l.split("#")[0];"string"==typeof f?l=t+"#"+f:Array.isArray(f)&&(l=t+"#"+JSON.stringify(f))}const g=h.get("NewWindow");"boolean"==typeof g&&(i.newWindow=g);break;case"Named":const m=h.get("N");m instanceof o.Name&&(i.action=m.name);break;case"JavaScript":const y=h.get("JS");let v;y instanceof a.BaseStream?v=y.getString():"string"==typeof y&&(v=y);const b=v&&(0,r.recoverJsURL)((0,n.stringToPDFString)(v));if(b){l=b.url,i.newWindow=b.newWindow;break}default:if("JavaScript"===e||"SubmitForm"===e)break;(0,n.warn)(`parseDestDictionary - unsupported action: "${e}".`)}}else e.has("Dest")&&(c=e.get("Dest"));if("string"==typeof l){const t=(0,n.createValidAbsoluteUrl)(l,s,{addDefaultProtocol:!0,tryConvertEncoding:!0});t&&(i.url=t.href),i.unsafeUrl=l}c&&(c instanceof o.Name&&(c=c.name),"string"==typeof c?i.dest=(0,n.stringToPDFString)(c):Array.isArray(c)&&(i.dest=c))}}e.Catalog=g},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NumberTree=e.NameTree=void 0;var r=i(5),n=i(2);class o{constructor(t,e,i){this.constructor===o&&(0,n.unreachable)("Cannot initialize NameOrNumberTree."),this.root=t,this.xref=e,this._type=i}getAll(){const t=new Map;if(!this.root)return t;const e=this.xref,i=new r.RefSet;i.put(this.root);const o=[this.root];for(;o.length>0;){const s=e.fetchIfRef(o.shift());if(!(s instanceof r.Dict))continue;if(s.has("Kids")){const t=s.get("Kids");if(!Array.isArray(t))continue;for(const e of t){if(i.has(e))throw new n.FormatError(`Duplicate entry in "${this._type}" tree.`);o.push(e),i.put(e)}continue}const a=s.get(this._type);if(Array.isArray(a))for(let i=0,r=a.length;i<r;i+=2)t.set(e.fetchIfRef(a[i]),e.fetchIfRef(a[i+1]))}return t}get(t){if(!this.root)return null;const e=this.xref;let i=e.fetchIfRef(this.root),r=0;for(;i.has("Kids");){if(++r>10)return(0,n.warn)(`Search depth limit reached for "${this._type}" tree.`),null;const o=i.get("Kids");if(!Array.isArray(o))return null;let s=0,a=o.length-1;for(;s<=a;){const r=s+a>>1,n=e.fetchIfRef(o[r]),l=n.get("Limits");if(t<e.fetchIfRef(l[0]))a=r-1;else{if(!(t>e.fetchIfRef(l[1]))){i=n;break}s=r+1}}if(s>a)return null}const o=i.get(this._type);if(Array.isArray(o)){let i=0,r=o.length-2;for(;i<=r;){const n=i+r>>1,s=n+(1&n),a=e.fetchIfRef(o[s]);if(t<a)r=s-2;else{if(!(t>a))return e.fetchIfRef(o[s+1]);i=s+2}}}return null}}e.NameTree=class extends o{constructor(t,e){super(t,e,"Names")}},e.NumberTree=class extends o{constructor(t,e){super(t,e,"Nums")}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.clearGlobalCaches=function(){(0,r.clearPrimitiveCaches)(),(0,n.clearUnicodeCaches)()};var r=i(5),n=i(21)},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FileSpec=void 0;var r=i(2),n=i(9),o=i(5);function s(t){return t.has("UF")?t.get("UF"):t.has("F")?t.get("F"):t.has("Unix")?t.get("Unix"):t.has("Mac")?t.get("Mac"):t.has("DOS")?t.get("DOS"):null}e.FileSpec=class{constructor(t,e){t instanceof o.Dict&&(this.xref=e,this.root=t,t.has("FS")&&(this.fs=t.get("FS")),this.description=t.has("Desc")?(0,r.stringToPDFString)(t.get("Desc")):"",t.has("RF")&&(0,r.warn)("Related file specifications are not supported"),this.contentAvailable=!0,t.has("EF")||(this.contentAvailable=!1,(0,r.warn)("Non-embedded file specifications are not supported")))}get filename(){if(!this._filename&&this.root){const t=s(this.root)||"unnamed";this._filename=(0,r.stringToPDFString)(t).replace(/\\\\/g,"\\").replace(/\\\//g,"/").replace(/\\/g,"/")}return this._filename}get content(){if(!this.contentAvailable)return null;!this.contentRef&&this.root&&(this.contentRef=s(this.root.get("EF")));let t=null;if(this.contentRef){const e=this.xref.fetchIfRef(this.contentRef);e instanceof n.BaseStream?t=e.getBytes():(0,r.warn)("Embedded file specification points to non-existing/invalid content")}else(0,r.warn)("Embedded file specification does not have a content");return t}get serializable(){return{filename:this.filename,content:this.content}}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MetadataParser=void 0;var r=i(70);e.MetadataParser=class{constructor(t){t=this._repair(t);const e=new r.SimpleXMLParser({lowerCaseName:!0}).parseFromString(t);this._metadataMap=new Map,this._data=t,e&&this._parse(e)}_repair(t){return t.replace(/^[^<]+/,"").replace(/>\\376\\377([^<]+)/g,(function(t,e){const i=e.replace(/\\([0-3])([0-7])([0-7])/g,(function(t,e,i,r){return String.fromCharCode(64*e+8*i+1*r)})).replace(/&(amp|apos|gt|lt|quot);/g,(function(t,e){switch(e){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error(`_repair: ${e} isn't defined.`)})),r=[];for(let t=0,e=i.length;t<e;t+=2){const e=256*i.charCodeAt(t)+i.charCodeAt(t+1);e>=32&&e<127&&60!==e&&62!==e&&38!==e?r.push(String.fromCharCode(e)):r.push("&#x"+(65536+e).toString(16).substring(1)+";")}return">"+r.join("")}))}_getSequence(t){const e=t.nodeName;return"rdf:bag"!==e&&"rdf:seq"!==e&&"rdf:alt"!==e?null:t.childNodes.filter((t=>"rdf:li"===t.nodeName))}_parseArray(t){if(!t.hasChildNodes())return;const[e]=t.childNodes,i=this._getSequence(e)||[];this._metadataMap.set(t.nodeName,i.map((t=>t.textContent.trim())))}_parse(t){let e=t.documentElement;if("rdf:rdf"!==e.nodeName)for(e=e.firstChild;e&&"rdf:rdf"!==e.nodeName;)e=e.nextSibling;if(e&&"rdf:rdf"===e.nodeName&&e.hasChildNodes())for(const t of e.childNodes)if("rdf:description"===t.nodeName)for(const e of t.childNodes){const t=e.nodeName;switch(t){case"#text":continue;case"dc:creator":case"dc:subject":this._parseArray(e);continue}this._metadataMap.set(t,e.textContent.trim())}}get serializable(){return{parsedData:this._metadataMap,rawData:this._data}}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XMLParserErrorCode=e.XMLParserBase=e.SimpleXMLParser=e.SimpleDOMNode=void 0;var r=i(8);const n={NoError:0,EndOfDocument:-1,UnterminatedCdat:-2,UnterminatedXmlDeclaration:-3,UnterminatedDoctypeDeclaration:-4,UnterminatedComment:-5,MalformedElement:-6,OutOfMemory:-7,UnterminatedAttributeValue:-8,UnterminatedElement:-9,ElementNeverBegun:-10};function o(t,e){const i=t[e];return" "===i||"\n"===i||"\r"===i||"\t"===i}e.XMLParserErrorCode=n;class s{_resolveEntities(t){return t.replace(/&([^;]+);/g,((t,e)=>{if("#x"===e.substring(0,2))return String.fromCodePoint(parseInt(e.substring(2),16));if("#"===e.substring(0,1))return String.fromCodePoint(parseInt(e.substring(1),10));switch(e){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"';case"apos":return"'"}return this.onResolveEntity(e)}))}_parseContent(t,e){const i=[];let r=e;function n(){for(;r<t.length&&o(t,r);)++r}for(;r<t.length&&!o(t,r)&&">"!==t[r]&&"/"!==t[r];)++r;const s=t.substring(e,r);for(n();r<t.length&&">"!==t[r]&&"/"!==t[r]&&"?"!==t[r];){n();let e="",s="";for(;r<t.length&&!o(t,r)&&"="!==t[r];)e+=t[r],++r;if(n(),"="!==t[r])return null;++r,n();const a=t[r];if('"'!==a&&"'"!==a)return null;const l=t.indexOf(a,++r);if(l<0)return null;s=t.substring(r,l),i.push({name:e,value:this._resolveEntities(s)}),r=l+1,n()}return{name:s,attributes:i,parsed:r-e}}_parseProcessingInstruction(t,e){let i=e;for(;i<t.length&&!o(t,i)&&">"!==t[i]&&"?"!==t[i]&&"/"!==t[i];)++i;const r=t.substring(e,i);!function(){for(;i<t.length&&o(t,i);)++i}();const n=i;for(;i<t.length&&("?"!==t[i]||">"!==t[i+1]);)++i;return{name:r,value:t.substring(n,i),parsed:i-e}}parseXml(t){let e=0;for(;e<t.length;){let i=e;if("<"===t[e]){let e;switch(++i,t[i]){case"/":if(++i,e=t.indexOf(">",i),e<0)return void this.onError(n.UnterminatedElement);this.onEndElement(t.substring(i,e)),i=e+1;break;case"?":++i;const r=this._parseProcessingInstruction(t,i);if("?>"!==t.substring(i+r.parsed,i+r.parsed+2))return void this.onError(n.UnterminatedXmlDeclaration);this.onPi(r.name,r.value),i+=r.parsed+2;break;case"!":if("--"===t.substring(i+1,i+3)){if(e=t.indexOf("--\x3e",i+3),e<0)return void this.onError(n.UnterminatedComment);this.onComment(t.substring(i+3,e)),i=e+3}else if("[CDATA["===t.substring(i+1,i+8)){if(e=t.indexOf("]]>",i+8),e<0)return void this.onError(n.UnterminatedCdat);this.onCdata(t.substring(i+8,e)),i=e+3}else{if("DOCTYPE"!==t.substring(i+1,i+8))return void this.onError(n.MalformedElement);{const r=t.indexOf("[",i+8);let o=!1;if(e=t.indexOf(">",i+8),e<0)return void this.onError(n.UnterminatedDoctypeDeclaration);if(r>0&&e>r){if(e=t.indexOf("]>",i+8),e<0)return void this.onError(n.UnterminatedDoctypeDeclaration);o=!0}const s=t.substring(i+8,e+(o?1:0));this.onDoctype(s),i=e+(o?2:1)}}break;default:const o=this._parseContent(t,i);if(null===o)return void this.onError(n.MalformedElement);let s=!1;if("/>"===t.substring(i+o.parsed,i+o.parsed+2))s=!0;else if(">"!==t.substring(i+o.parsed,i+o.parsed+1))return void this.onError(n.UnterminatedElement);this.onBeginElement(o.name,o.attributes,s),i+=o.parsed+(s?2:1)}}else{for(;i<t.length&&"<"!==t[i];)i++;const r=t.substring(e,i);this.onText(this._resolveEntities(r))}e=i}}onResolveEntity(t){return`&${t};`}onPi(t,e){}onComment(t){}onCdata(t){}onDoctype(t){}onText(t){}onBeginElement(t,e,i){}onEndElement(t){}onError(t){}}e.XMLParserBase=s;class a{constructor(t,e){this.nodeName=t,this.nodeValue=e,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}get firstChild(){return this.childNodes&&this.childNodes[0]}get nextSibling(){const t=this.parentNode.childNodes;if(!t)return;const e=t.indexOf(this);return-1!==e?t[e+1]:void 0}get textContent(){return this.childNodes?this.childNodes.map((function(t){return t.textContent})).join(""):this.nodeValue||""}get children(){return this.childNodes||[]}hasChildNodes(){return this.childNodes&&this.childNodes.length>0}searchNode(t,e){if(e>=t.length)return this;const i=t[e],r=[];let n=this;for(;;){if(i.name===n.nodeName){if(0!==i.pos){if(0===r.length)return null;{const[o]=r.pop();let s=0;for(const r of o.childNodes)if(i.name===r.nodeName){if(s===i.pos)return r.searchNode(t,e+1);s++}return n.searchNode(t,e+1)}}{const i=n.searchNode(t,e+1);if(null!==i)return i}}if(n.childNodes&&0!==n.childNodes.length)r.push([n,0]),n=n.childNodes[0];else{if(0===r.length)return null;for(;0!==r.length;){const[t,e]=r.pop(),i=e+1;if(i<t.childNodes.length){r.push([t,i]),n=t.childNodes[i];break}}if(0===r.length)return null}}}dump(t){if("#text"!==this.nodeName){if(t.push(`<${this.nodeName}`),this.attributes)for(const e of this.attributes)t.push(` ${e.name}="${(0,r.encodeToXmlString)(e.value)}"`);if(this.hasChildNodes()){t.push(">");for(const e of this.childNodes)e.dump(t);t.push(`</${this.nodeName}>`)}else this.nodeValue?t.push(`>${(0,r.encodeToXmlString)(this.nodeValue)}</${this.nodeName}>`):t.push("/>")}else t.push((0,r.encodeToXmlString)(this.nodeValue))}}e.SimpleDOMNode=a,e.SimpleXMLParser=class extends s{constructor({hasAttributes:t=!1,lowerCaseName:e=!1}){super(),this._currentFragment=null,this._stack=null,this._errorCode=n.NoError,this._hasAttributes=t,this._lowerCaseName=e}parseFromString(t){if(this._currentFragment=[],this._stack=[],this._errorCode=n.NoError,this.parseXml(t),this._errorCode!==n.NoError)return;const[e]=this._currentFragment;return e?{documentElement:e}:void 0}onText(t){if(function(t){for(let e=0,i=t.length;e<i;e++)if(!o(t,e))return!1;return!0}(t))return;const e=new a("#text",t);this._currentFragment.push(e)}onCdata(t){const e=new a("#text",t);this._currentFragment.push(e)}onBeginElement(t,e,i){this._lowerCaseName&&(t=t.toLowerCase());const r=new a(t);r.childNodes=[],this._hasAttributes&&(r.attributes=e),this._currentFragment.push(r),i||(this._stack.push(this._currentFragment),this._currentFragment=r.childNodes)}onEndElement(t){this._currentFragment=this._stack.pop()||[];const e=this._currentFragment[this._currentFragment.length-1];if(!e)return null;for(let t=0,i=e.childNodes.length;t<i;t++)e.childNodes[t].parentNode=e;return e}onError(t){this._errorCode=t}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StructTreeRoot=e.StructTreePage=void 0;var r=i(5),n=i(2),o=i(66);const s="PAGE_CONTENT",a="STREAM_CONTENT",l="OBJECT",c="ELEMENT";e.StructTreeRoot=class{constructor(t){this.dict=t,this.roleMap=new Map}init(){this.readRoleMap()}readRoleMap(){const t=this.dict.get("RoleMap");t instanceof r.Dict&&t.forEach(((t,e)=>{e instanceof r.Name&&this.roleMap.set(t,e.name)}))}};class h{constructor(t,e){this.tree=t,this.dict=e,this.kids=[],this.parseKids()}get role(){const t=this.dict.get("S"),e=t instanceof r.Name?t.name:"",{root:i}=this.tree;return i.roleMap.has(e)?i.roleMap.get(e):e}parseKids(){let t=null;const e=this.dict.getRaw("Pg");e instanceof r.Ref&&(t=e.toString());const i=this.dict.get("K");if(Array.isArray(i))for(const e of i){const i=this.parseKid(t,e);i&&this.kids.push(i)}else{const e=this.parseKid(t,i);e&&this.kids.push(e)}}parseKid(t,e){if(Number.isInteger(e))return this.tree.pageDict.objId!==t?null:new u({type:s,mcid:e,pageObjId:t});let i=null;if(e instanceof r.Ref?i=this.dict.xref.fetch(e):e instanceof r.Dict&&(i=e),!i)return null;const n=i.getRaw("Pg");n instanceof r.Ref&&(t=n.toString());const o=i.get("Type")instanceof r.Name?i.get("Type").name:null;return"MCR"===o?this.tree.pageDict.objId!==t?null:new u({type:a,refObjId:i.getRaw("Stm")instanceof r.Ref?i.getRaw("Stm").toString():null,pageObjId:t,mcid:i.get("MCID")}):"OBJR"===o?this.tree.pageDict.objId!==t?null:new u({type:l,refObjId:i.getRaw("Obj")instanceof r.Ref?i.getRaw("Obj").toString():null,pageObjId:t}):new u({type:c,dict:i})}}class u{constructor({type:t,dict:e=null,mcid:i=null,pageObjId:r=null,refObjId:n=null}){this.type=t,this.dict=e,this.mcid=i,this.pageObjId=r,this.refObjId=n,this.parentNode=null}}e.StructTreePage=class{constructor(t,e){this.root=t,this.rootDict=t?t.dict:null,this.pageDict=e,this.nodes=[]}parse(){if(!this.root||!this.rootDict)return;const t=this.rootDict.get("ParentTree");if(!t)return;const e=this.pageDict.get("StructParents");if(!Number.isInteger(e))return;const i=new o.NumberTree(t,this.rootDict.xref).get(e);if(!Array.isArray(i))return;const n=new Map;for(const t of i)t instanceof r.Ref&&this.addNode(this.rootDict.xref.fetch(t),n)}addNode(t,e,i=0){if(i>40)return(0,n.warn)("StructTree MAX_DEPTH reached."),null;if(e.has(t))return e.get(t);const o=new h(this,t);e.set(t,o);const s=t.get("P");if(!s||(0,r.isName)(s.get("Type"),"StructTreeRoot"))return this.addTopLevelNode(t,o)||e.delete(t),o;const a=this.addNode(s,e,i+1);if(!a)return o;let l=!1;for(const e of a.kids)e.type===c&&e.dict===t&&(e.parentNode=o,l=!0);return l||e.delete(t),o}addTopLevelNode(t,e){const i=this.rootDict.get("K");if(!i)return!1;if(i instanceof r.Dict)return i.objId===t.objId&&(this.nodes[0]=e,!0);if(!Array.isArray(i))return!0;let n=!1;for(let r=0;r<i.length;r++){const o=i[r];o&&o.toString()===t.objId&&(this.nodes[r]=e,n=!0)}return n}get serializable(){function t(e,i,r=0){if(r>40)return void(0,n.warn)("StructTree too deep to be fully serialized.");const o=Object.create(null);o.role=e.role,o.children=[],i.children.push(o);const h=e.dict.get("Alt");"string"==typeof h&&(o.alt=(0,n.stringToPDFString)(h));const u=e.dict.get("Lang");"string"==typeof u&&(o.lang=(0,n.stringToPDFString)(u));for(const i of e.kids){const e=i.type===c?i.parentNode:null;e?t(e,o,r+1):i.type===s||i.type===a?o.children.push({type:"content",id:`page${i.pageObjId}_mcid${i.mcid}`}):i.type===l&&o.children.push({type:"object",id:i.refObjId})}}const e=Object.create(null);e.children=[],e.role="Root";for(const i of this.nodes)i&&t(i,e);return e}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectLoader=void 0;var r=i(5),n=i(9),o=i(8),s=i(2);function a(t,e){if(t instanceof r.Dict)t=t.getRawValues();else if(t instanceof n.BaseStream)t=t.dict.getRawValues();else if(!Array.isArray(t))return;for(const o of t)((i=o)instanceof r.Ref||i instanceof r.Dict||i instanceof n.BaseStream||Array.isArray(i))&&e.push(o);var i}e.ObjectLoader=class{constructor(t,e,i){this.dict=t,this.keys=e,this.xref=i,this.refSet=null}async load(){if(this.xref.stream.isDataLoaded)return;const{keys:t,dict:e}=this;this.refSet=new r.RefSet;const i=[];for(let r=0,n=t.length;r<n;r++){const n=e.getRaw(t[r]);void 0!==n&&i.push(n)}return this._walk(i)}async _walk(t){const e=[],i=[];for(;t.length;){let l=t.pop();if(l instanceof r.Ref){if(this.refSet.has(l))continue;try{this.refSet.put(l),l=this.xref.fetch(l)}catch(t){if(!(t instanceof o.MissingDataException)){(0,s.warn)(`ObjectLoader._walk - requesting all data: "${t}".`),this.refSet=null;const{manager:e}=this.xref.stream;return e.requestAllChunks()}e.push(l),i.push({begin:t.begin,end:t.end})}}if(l instanceof n.BaseStream){const t=l.getBaseStreams();if(t){let r=!1;for(const e of t)e.isDataLoaded||(r=!0,i.push({begin:e.start,end:e.end}));r&&e.push(l)}}a(l,t)}if(i.length){await this.xref.stream.manager.requestRanges(i);for(const t of e)t instanceof r.Ref&&this.refSet.remove(t);return this._walk(e)}this.refSet=null}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.incrementalUpdate=function({originalData:t,xrefInfo:e,newRefs:i,xref:a=null,hasXfa:h=!1,xfaDatasetsRef:d=null,hasXfaDatasetsEntry:f=!1,acroFormRef:g=null,acroForm:m=null,xfaData:y=null}){h&&function({xfaData:t,xfaDatasetsRef:e,hasXfaDatasetsEntry:i,acroFormRef:n,acroForm:a,newRefs:l,xref:h,xrefInfo:u}){if(null===h)return;if(!i){if(!n)return void(0,r.warn)("XFA - Cannot save it");const t=a.get("XFA"),i=t.slice();i.splice(2,0,"datasets"),i.splice(3,0,e),a.set("XFA",i);const o=h.encrypt;let s=null;o&&(s=o.createCipherTransform(n.num,n.gen));const u=[`${n.num} ${n.gen} obj\n`];c(a,u,s),u.push("\n"),a.set("XFA",t),l.push({ref:n,data:u.join("")})}null===t&&(t=function(t,e){const i=new s.SimpleXMLParser({hasAttributes:!0}).parseFromString(t);for(const{xfa:t}of e){if(!t)continue;const{path:e,value:n}=t;if(!e)continue;const a=i.documentElement.searchNode((0,o.parseXFAPath)(e),0);a?Array.isArray(n)?a.childNodes=n.map((t=>new s.SimpleDOMNode("value",t))):a.childNodes=[new s.SimpleDOMNode("#text",n)]:(0,r.warn)(`Node not found for path: ${e}`)}const n=[];return i.documentElement.dump(n),n.join("")}(h.fetchIfRef(e).getString(),l));const p=h.encrypt;p&&(t=p.createCipherTransform(e.num,e.gen).encryptString(t));const d=`${e.num} ${e.gen} obj\n<< /Type /EmbeddedFile /Length ${t.length}>>\nstream\n`+t+"\nendstream\nendobj\n";l.push({ref:e,data:d})}({xfaData:y,xfaDatasetsRef:d,hasXfaDatasetsEntry:f,acroFormRef:g,acroForm:m,newRefs:i,xref:a,xrefInfo:e});const v=new n.Dict(null),b=e.newRef;let w,x;const S=t[t.length-1];10===S||13===S?(w=[],x=t.length):(w=["\n"],x=t.length+1),v.set("Size",b.num+1),v.set("Prev",e.startXRef),v.set("Type",n.Name.get("XRef")),null!==e.rootRef&&v.set("Root",e.rootRef),null!==e.infoRef&&v.set("Info",e.infoRef),null!==e.encryptRef&&v.set("Encrypt",e.encryptRef),i.push({ref:b,data:""}),i=i.sort(((t,e)=>t.ref.num-e.ref.num));const k=[[0,1,65535]],C=[0,1];let A=0;for(const{ref:t,data:e}of i)A=Math.max(A,x),k.push([1,x,Math.min(t.gen,65535)]),x+=e.length,C.push(t.num,1),w.push(e);if(v.set("Index",C),Array.isArray(e.fileIds)&&e.fileIds.length>0){const t=function(t,e){const i=Math.floor(Date.now()/1e3),n=e.filename||"",o=[i.toString(),n,t.toString()];let s=o.reduce(((t,e)=>t+e.length),0);for(const t of Object.values(e.info))o.push(t),s+=t.length;const a=new Uint8Array(s);let c=0;for(const t of o)p(t,c,a),c+=t.length;return(0,r.bytesToString)((0,l.calculateMD5)(a))}(x,e);v.set("ID",[e.fileIds[0],t])}const _=[1,Math.ceil(Math.log2(A)/8),2],T=(_[0]+_[1]+_[2])*k.length;v.set("W",_),v.set("Length",T),w.push(`${b.num} ${b.gen} obj\n`),c(v,w,null),w.push(" stream\n");const O=w.reduce(((t,e)=>t+e.length),0),E=`\nendstream\nendobj\nstartxref\n${x}\n%%EOF\n`,M=new Uint8Array(t.length+O+T+E.length);M.set(t);let P=t.length;for(const t of w)p(t,P,M),P+=t.length;for(const[t,e,i]of k)P=u(t,_[0],P,M),P=u(e,_[1],P,M),P=u(i,_[2],P,M);return p(E,P,M),M},e.writeDict=c;var r=i(2),n=i(5),o=i(8),s=i(70),a=i(9),l=i(74);function c(t,e,i){e.push("<<");for(const r of t.getKeys())e.push(` /${(0,o.escapePDFName)(r)} `),h(t.getRaw(r),e,i);e.push(">>")}function h(t,e,i){t instanceof n.Name?e.push(`/${(0,o.escapePDFName)(t.name)}`):t instanceof n.Ref?e.push(`${t.num} ${t.gen} R`):Array.isArray(t)?function(t,e,i){e.push("[");let r=!0;for(const n of t)r?r=!1:e.push(" "),h(n,e,i);e.push("]")}(t,e,i):"string"==typeof t?(null!==i&&(t=i.encryptString(t)),e.push(`(${(0,r.escapeString)(t)})`)):"number"==typeof t?e.push(function(t){if(Number.isInteger(t))return t.toString();const e=Math.round(100*t);return e%100==0?(e/100).toString():e%10==0?t.toFixed(1):t.toFixed(2)}(t)):"boolean"==typeof t?e.push(t.toString()):t instanceof n.Dict?c(t,e,i):t instanceof a.BaseStream?function(t,e,i){c(t.dict,e,i),e.push(" stream\n");let r=t.getString();null!==i&&(r=i.encryptString(r)),e.push(r,"\nendstream\n")}(t,e,i):null===t?e.push("null"):(0,r.warn)(`Unhandled value in writer: ${typeof t}, please file a bug.`)}function u(t,e,i,r){for(let n=e+i-1;n>i-1;n--)r[n]=255&t,t>>=8;return i+e}function p(t,e,i){for(let r=0,n=t.length;r<n;r++)i[e+r]=255&t.charCodeAt(r)}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.calculateSHA256=e.calculateMD5=e.PDF20=e.PDF17=e.CipherTransformFactory=e.ARCFourCipher=e.AES256Cipher=e.AES128Cipher=void 0,e.calculateSHA384=u,e.calculateSHA512=void 0;var r=i(2),n=i(5),o=i(75);class s{constructor(t){this.a=0,this.b=0;const e=new Uint8Array(256),i=t.length;for(let t=0;t<256;++t)e[t]=t;for(let r=0,n=0;r<256;++r){const o=e[r];n=n+o+t[r%i]&255,e[r]=e[n],e[n]=o}this.s=e}encryptBlock(t){let e=this.a,i=this.b;const r=this.s,n=t.length,o=new Uint8Array(n);for(let s=0;s<n;++s){e=e+1&255;const n=r[e];i=i+n&255;const a=r[i];r[e]=a,r[i]=n,o[s]=t[s]^r[n+a&255]}return this.a=e,this.b=i,o}decryptBlock(t){return this.encryptBlock(t)}encrypt(t){return this.encryptBlock(t)}}e.ARCFourCipher=s;const a=function(){const t=new Uint8Array([7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21]),e=new Int32Array([-680876936,-389564586,606105819,-1044525330,-176418897,1200080426,-1473231341,-45705983,1770035416,-1958414417,-42063,-1990404162,1804603682,-40341101,-1502002290,1236535329,-165796510,-1069501632,643717713,-373897302,-701558691,38016083,-660478335,-405537848,568446438,-1019803690,-187363961,1163531501,-1444681467,-51403784,1735328473,-1926607734,-378558,-2022574463,1839030562,-35309556,-1530992060,1272893353,-155497632,-1094730640,681279174,-358537222,-722521979,76029189,-640364487,-421815835,530742520,-995338651,-198630844,1126891415,-1416354905,-57434055,1700485571,-1894986606,-1051523,-2054922799,1873313359,-30611744,-1560198380,1309151649,-145523070,-1120210379,718787259,-343485551]);return function(i,r,n){let o=1732584193,s=-271733879,a=-1732584194,l=271733878;const c=n+72&-64,h=new Uint8Array(c);let u,p;for(u=0;u<n;++u)h[u]=i[r++];h[u++]=128;const d=c-8;for(;u<d;)h[u++]=0;h[u++]=n<<3&255,h[u++]=n>>5&255,h[u++]=n>>13&255,h[u++]=n>>21&255,h[u++]=n>>>29&255,h[u++]=0,h[u++]=0,h[u++]=0;const f=new Int32Array(16);for(u=0;u<c;){for(p=0;p<16;++p,u+=4)f[p]=h[u]|h[u+1]<<8|h[u+2]<<16|h[u+3]<<24;let i,r,n=o,c=s,d=a,g=l;for(p=0;p<64;++p){p<16?(i=c&d|~c&g,r=p):p<32?(i=g&c|~g&d,r=5*p+1&15):p<48?(i=c^d^g,r=3*p+5&15):(i=d^(c|~g),r=7*p&15);const o=g,s=n+i+e[p]+f[r]|0,a=t[p];g=d,d=c,c=c+(s<<a|s>>>32-a)|0,n=o}o=o+n|0,s=s+c|0,a=a+d|0,l=l+g|0}return new Uint8Array([255&o,o>>8&255,o>>16&255,o>>>24&255,255&s,s>>8&255,s>>16&255,s>>>24&255,255&a,a>>8&255,a>>16&255,a>>>24&255,255&l,l>>8&255,l>>16&255,l>>>24&255])}}();e.calculateMD5=a;class l{constructor(t,e){this.high=0|t,this.low=0|e}and(t){this.high&=t.high,this.low&=t.low}xor(t){this.high^=t.high,this.low^=t.low}or(t){this.high|=t.high,this.low|=t.low}shiftRight(t){t>=32?(this.low=this.high>>>t-32|0,this.high=0):(this.low=this.low>>>t|this.high<<32-t,this.high=this.high>>>t|0)}shiftLeft(t){t>=32?(this.high=this.low<<t-32,this.low=0):(this.high=this.high<<t|this.low>>>32-t,this.low<<=t)}rotateRight(t){let e,i;32&t?(i=this.low,e=this.high):(e=this.low,i=this.high),t&=31,this.low=e>>>t|i<<32-t,this.high=i>>>t|e<<32-t}not(){this.high=~this.high,this.low=~this.low}add(t){const e=(this.low>>>0)+(t.low>>>0);let i=(this.high>>>0)+(t.high>>>0);e>4294967295&&(i+=1),this.low=0|e,this.high=0|i}copyTo(t,e){t[e]=this.high>>>24&255,t[e+1]=this.high>>16&255,t[e+2]=this.high>>8&255,t[e+3]=255&this.high,t[e+4]=this.low>>>24&255,t[e+5]=this.low>>16&255,t[e+6]=this.low>>8&255,t[e+7]=255&this.low}assign(t){this.high=t.high,this.low=t.low}}const c=function(){function t(t,e){return t>>>e|t<<32-e}function e(t,e,i){return t&e^~t&i}function i(t,e,i){return t&e^t&i^e&i}function r(e){return t(e,2)^t(e,13)^t(e,22)}function n(e){return t(e,6)^t(e,11)^t(e,25)}function o(e){return t(e,7)^t(e,18)^e>>>3}const s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];return function(a,l,c){let h=1779033703,u=3144134277,p=1013904242,d=2773480762,f=1359893119,g=2600822924,m=528734635,y=1541459225;const v=64*Math.ceil((c+9)/64),b=new Uint8Array(v);let w,x;for(w=0;w<c;++w)b[w]=a[l++];b[w++]=128;const S=v-8;for(;w<S;)b[w++]=0;b[w++]=0,b[w++]=0,b[w++]=0,b[w++]=c>>>29&255,b[w++]=c>>21&255,b[w++]=c>>13&255,b[w++]=c>>5&255,b[w++]=c<<3&255;const k=new Uint32Array(64);for(w=0;w<v;){for(x=0;x<16;++x)k[x]=b[w]<<24|b[w+1]<<16|b[w+2]<<8|b[w+3],w+=4;for(x=16;x<64;++x)k[x]=0|(t(C=k[x-2],17)^t(C,19)^C>>>10)+k[x-7]+o(k[x-15])+k[x-16];let a,l,c=h,v=u,S=p,A=d,_=f,T=g,O=m,E=y;for(x=0;x<64;++x)a=E+n(_)+e(_,T,O)+s[x]+k[x],l=r(c)+i(c,v,S),E=O,O=T,T=_,_=A+a|0,A=S,S=v,v=c,c=a+l|0;h=h+c|0,u=u+v|0,p=p+S|0,d=d+A|0,f=f+_|0,g=g+T|0,m=m+O|0,y=y+E|0}var C;return new Uint8Array([h>>24&255,h>>16&255,h>>8&255,255&h,u>>24&255,u>>16&255,u>>8&255,255&u,p>>24&255,p>>16&255,p>>8&255,255&p,d>>24&255,d>>16&255,d>>8&255,255&d,f>>24&255,f>>16&255,f>>8&255,255&f,g>>24&255,g>>16&255,g>>8&255,255&g,m>>24&255,m>>16&255,m>>8&255,255&m,y>>24&255,y>>16&255,y>>8&255,255&y])}}();e.calculateSHA256=c;const h=function(){function t(t,e,i,r,n){t.assign(e),t.and(i),n.assign(e),n.not(),n.and(r),t.xor(n)}function e(t,e,i,r,n){t.assign(e),t.and(i),n.assign(e),n.and(r),t.xor(n),n.assign(i),n.and(r),t.xor(n)}function i(t,e,i){t.assign(e),t.rotateRight(28),i.assign(e),i.rotateRight(34),t.xor(i),i.assign(e),i.rotateRight(39),t.xor(i)}function r(t,e,i){t.assign(e),t.rotateRight(14),i.assign(e),i.rotateRight(18),t.xor(i),i.assign(e),i.rotateRight(41),t.xor(i)}function n(t,e,i){t.assign(e),t.rotateRight(1),i.assign(e),i.rotateRight(8),t.xor(i),i.assign(e),i.shiftRight(7),t.xor(i)}function o(t,e,i){t.assign(e),t.rotateRight(19),i.assign(e),i.rotateRight(61),t.xor(i),i.assign(e),i.shiftRight(6),t.xor(i)}const s=[new l(1116352408,3609767458),new l(1899447441,602891725),new l(3049323471,3964484399),new l(3921009573,2173295548),new l(961987163,4081628472),new l(1508970993,3053834265),new l(2453635748,2937671579),new l(2870763221,3664609560),new l(3624381080,2734883394),new l(310598401,1164996542),new l(607225278,1323610764),new l(1426881987,3590304994),new l(1925078388,4068182383),new l(2162078206,991336113),new l(2614888103,633803317),new l(3248222580,3479774868),new l(3835390401,2666613458),new l(4022224774,944711139),new l(264347078,2341262773),new l(604807628,2007800933),new l(770255983,1495990901),new l(1249150122,1856431235),new l(1555081692,3175218132),new l(1996064986,2198950837),new l(2554220882,3999719339),new l(2821834349,766784016),new l(2952996808,2566594879),new l(3210313671,3203337956),new l(3336571891,1034457026),new l(3584528711,2466948901),new l(113926993,3758326383),new l(338241895,168717936),new l(666307205,1188179964),new l(773529912,1546045734),new l(1294757372,1522805485),new l(1396182291,2643833823),new l(1695183700,2343527390),new l(1986661051,1014477480),new l(2177026350,1206759142),new l(2456956037,344077627),new l(2730485921,1290863460),new l(2820302411,3158454273),new l(3259730800,3505952657),new l(3345764771,106217008),new l(3516065817,3606008344),new l(3600352804,1432725776),new l(4094571909,1467031594),new l(275423344,851169720),new l(430227734,3100823752),new l(506948616,1363258195),new l(659060556,3750685593),new l(883997877,3785050280),new l(958139571,3318307427),new l(1322822218,3812723403),new l(1537002063,2003034995),new l(1747873779,3602036899),new l(1955562222,1575990012),new l(2024104815,1125592928),new l(2227730452,2716904306),new l(2361852424,442776044),new l(2428436474,593698344),new l(2756734187,3733110249),new l(3204031479,2999351573),new l(3329325298,3815920427),new l(3391569614,3928383900),new l(3515267271,566280711),new l(3940187606,3454069534),new l(4118630271,4000239992),new l(116418474,1914138554),new l(174292421,2731055270),new l(289380356,3203993006),new l(460393269,320620315),new l(685471733,587496836),new l(852142971,1086792851),new l(1017036298,365543100),new l(1126000580,2618297676),new l(1288033470,3409855158),new l(1501505948,4234509866),new l(1607167915,987167468),new l(1816402316,1246189591)];return function(a,c,h,u=!1){let p,d,f,g,m,y,v,b;u?(p=new l(3418070365,3238371032),d=new l(1654270250,914150663),f=new l(2438529370,812702999),g=new l(355462360,4144912697),m=new l(1731405415,4290775857),y=new l(2394180231,1750603025),v=new l(3675008525,1694076839),b=new l(1203062813,3204075428)):(p=new l(1779033703,4089235720),d=new l(3144134277,2227873595),f=new l(1013904242,4271175723),g=new l(2773480762,1595750129),m=new l(1359893119,2917565137),y=new l(2600822924,725511199),v=new l(528734635,4215389547),b=new l(1541459225,327033209));const w=128*Math.ceil((h+17)/128),x=new Uint8Array(w);let S,k;for(S=0;S<h;++S)x[S]=a[c++];x[S++]=128;const C=w-16;for(;S<C;)x[S++]=0;x[S++]=0,x[S++]=0,x[S++]=0,x[S++]=0,x[S++]=0,x[S++]=0,x[S++]=0,x[S++]=0,x[S++]=0,x[S++]=0,x[S++]=0,x[S++]=h>>>29&255,x[S++]=h>>21&255,x[S++]=h>>13&255,x[S++]=h>>5&255,x[S++]=h<<3&255;const A=new Array(80);for(S=0;S<80;S++)A[S]=new l(0,0);let _=new l(0,0),T=new l(0,0),O=new l(0,0),E=new l(0,0),M=new l(0,0),P=new l(0,0),I=new l(0,0),D=new l(0,0);const F=new l(0,0),R=new l(0,0),L=new l(0,0),N=new l(0,0);let B,j;for(S=0;S<w;){for(k=0;k<16;++k)A[k].high=x[S]<<24|x[S+1]<<16|x[S+2]<<8|x[S+3],A[k].low=x[S+4]<<24|x[S+5]<<16|x[S+6]<<8|x[S+7],S+=8;for(k=16;k<80;++k)B=A[k],o(B,A[k-2],N),B.add(A[k-7]),n(L,A[k-15],N),B.add(L),B.add(A[k-16]);for(_.assign(p),T.assign(d),O.assign(f),E.assign(g),M.assign(m),P.assign(y),I.assign(v),D.assign(b),k=0;k<80;++k)F.assign(D),r(L,M,N),F.add(L),t(L,M,P,I,N),F.add(L),F.add(s[k]),F.add(A[k]),i(R,_,N),e(L,_,T,O,N),R.add(L),B=D,D=I,I=P,P=M,E.add(F),M=E,E=O,O=T,T=_,B.assign(F),B.add(R),_=B;p.add(_),d.add(T),f.add(O),g.add(E),m.add(M),y.add(P),v.add(I),b.add(D)}return u?(j=new Uint8Array(48),p.copyTo(j,0),d.copyTo(j,8),f.copyTo(j,16),g.copyTo(j,24),m.copyTo(j,32),y.copyTo(j,40)):(j=new Uint8Array(64),p.copyTo(j,0),d.copyTo(j,8),f.copyTo(j,16),g.copyTo(j,24),m.copyTo(j,32),y.copyTo(j,40),v.copyTo(j,48),b.copyTo(j,56)),j}}();function u(t,e,i){return h(t,e,i,!0)}e.calculateSHA512=h;class p{decryptBlock(t){return t}encrypt(t){return t}}class d{constructor(){this.constructor===d&&(0,r.unreachable)("Cannot initialize AESBaseCipher."),this._s=new Uint8Array([99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]),this._inv_s=new Uint8Array([82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125]),this._mix=new Uint32Array([0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795]),this._mixCol=new Uint8Array(256);for(let t=0;t<256;t++)this._mixCol[t]=t<128?t<<1:t<<1^27;this.buffer=new Uint8Array(16),this.bufferPosition=0}_expandKey(t){(0,r.unreachable)("Cannot call `_expandKey` on the base class")}_decrypt(t,e){let i,r,n;const o=new Uint8Array(16);o.set(t);for(let t=0,i=this._keySize;t<16;++t,++i)o[t]^=e[i];for(let t=this._cyclesOfRepetition-1;t>=1;--t){i=o[13],o[13]=o[9],o[9]=o[5],o[5]=o[1],o[1]=i,i=o[14],r=o[10],o[14]=o[6],o[10]=o[2],o[6]=i,o[2]=r,i=o[15],r=o[11],n=o[7],o[15]=o[3],o[11]=i,o[7]=r,o[3]=n;for(let t=0;t<16;++t)o[t]=this._inv_s[o[t]];for(let i=0,r=16*t;i<16;++i,++r)o[i]^=e[r];for(let t=0;t<16;t+=4){const e=this._mix[o[t]],r=this._mix[o[t+1]],n=this._mix[o[t+2]],s=this._mix[o[t+3]];i=e^r>>>8^r<<24^n>>>16^n<<16^s>>>24^s<<8,o[t]=i>>>24&255,o[t+1]=i>>16&255,o[t+2]=i>>8&255,o[t+3]=255&i}}i=o[13],o[13]=o[9],o[9]=o[5],o[5]=o[1],o[1]=i,i=o[14],r=o[10],o[14]=o[6],o[10]=o[2],o[6]=i,o[2]=r,i=o[15],r=o[11],n=o[7],o[15]=o[3],o[11]=i,o[7]=r,o[3]=n;for(let t=0;t<16;++t)o[t]=this._inv_s[o[t]],o[t]^=e[t];return o}_encrypt(t,e){const i=this._s;let r,n,o;const s=new Uint8Array(16);s.set(t);for(let t=0;t<16;++t)s[t]^=e[t];for(let t=1;t<this._cyclesOfRepetition;t++){for(let t=0;t<16;++t)s[t]=i[s[t]];o=s[1],s[1]=s[5],s[5]=s[9],s[9]=s[13],s[13]=o,o=s[2],n=s[6],s[2]=s[10],s[6]=s[14],s[10]=o,s[14]=n,o=s[3],n=s[7],r=s[11],s[3]=s[15],s[7]=o,s[11]=n,s[15]=r;for(let t=0;t<16;t+=4){const e=s[t+0],i=s[t+1],n=s[t+2],o=s[t+3];r=e^i^n^o,s[t+0]^=r^this._mixCol[e^i],s[t+1]^=r^this._mixCol[i^n],s[t+2]^=r^this._mixCol[n^o],s[t+3]^=r^this._mixCol[o^e]}for(let i=0,r=16*t;i<16;++i,++r)s[i]^=e[r]}for(let t=0;t<16;++t)s[t]=i[s[t]];o=s[1],s[1]=s[5],s[5]=s[9],s[9]=s[13],s[13]=o,o=s[2],n=s[6],s[2]=s[10],s[6]=s[14],s[10]=o,s[14]=n,o=s[3],n=s[7],r=s[11],s[3]=s[15],s[7]=o,s[11]=n,s[15]=r;for(let t=0,i=this._keySize;t<16;++t,++i)s[t]^=e[i];return s}_decryptBlock2(t,e){const i=t.length;let r=this.buffer,n=this.bufferPosition;const o=[];let s=this.iv;for(let e=0;e<i;++e){if(r[n]=t[e],++n,n<16)continue;const i=this._decrypt(r,this._key);for(let t=0;t<16;++t)i[t]^=s[t];s=r,o.push(i),r=new Uint8Array(16),n=0}if(this.buffer=r,this.bufferLength=n,this.iv=s,0===o.length)return new Uint8Array(0);let a=16*o.length;if(e){const t=o[o.length-1];let e=t[15];if(e<=16){for(let i=15,r=16-e;i>=r;--i)if(t[i]!==e){e=0;break}a-=e,o[o.length-1]=t.subarray(0,16-e)}}const l=new Uint8Array(a);for(let t=0,e=0,i=o.length;t<i;++t,e+=16)l.set(o[t],e);return l}decryptBlock(t,e,i=null){const r=t.length,n=this.buffer;let o=this.bufferPosition;if(i)this.iv=i;else{for(let e=0;o<16&&e<r;++e,++o)n[o]=t[e];if(o<16)return this.bufferLength=o,new Uint8Array(0);this.iv=n,t=t.subarray(16)}return this.buffer=new Uint8Array(16),this.bufferLength=0,this.decryptBlock=this._decryptBlock2,this.decryptBlock(t,e)}encrypt(t,e){const i=t.length;let r=this.buffer,n=this.bufferPosition;const o=[];e||(e=new Uint8Array(16));for(let s=0;s<i;++s){if(r[n]=t[s],++n,n<16)continue;for(let t=0;t<16;++t)r[t]^=e[t];const i=this._encrypt(r,this._key);e=i,o.push(i),r=new Uint8Array(16),n=0}if(this.buffer=r,this.bufferLength=n,this.iv=e,0===o.length)return new Uint8Array(0);const s=16*o.length,a=new Uint8Array(s);for(let t=0,e=0,i=o.length;t<i;++t,e+=16)a.set(o[t],e);return a}}class f extends d{constructor(t){super(),this._cyclesOfRepetition=10,this._keySize=160,this._rcon=new Uint8Array([141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141]),this._key=this._expandKey(t)}_expandKey(t){const e=this._s,i=this._rcon,r=new Uint8Array(176);r.set(t);for(let t=16,n=1;t<176;++n){let o=r[t-3],s=r[t-2],a=r[t-1],l=r[t-4];o=e[o],s=e[s],a=e[a],l=e[l],o^=i[n];for(let e=0;e<4;++e)r[t]=o^=r[t-16],t++,r[t]=s^=r[t-16],t++,r[t]=a^=r[t-16],t++,r[t]=l^=r[t-16],t++}return r}}e.AES128Cipher=f;class g extends d{constructor(t){super(),this._cyclesOfRepetition=14,this._keySize=224,this._key=this._expandKey(t)}_expandKey(t){const e=this._s,i=new Uint8Array(240);i.set(t);let r,n,o,s,a=1;for(let t=32,l=1;t<240;++l){t%32==16?(r=e[r],n=e[n],o=e[o],s=e[s]):t%32==0&&(r=i[t-3],n=i[t-2],o=i[t-1],s=i[t-4],r=e[r],n=e[n],o=e[o],s=e[s],r^=a,(a<<=1)>=256&&(a=255&(27^a)));for(let e=0;e<4;++e)i[t]=r^=i[t-32],t++,i[t]=n^=i[t-32],t++,i[t]=o^=i[t-32],t++,i[t]=s^=i[t-32],t++}return i}}e.AES256Cipher=g;class m{checkOwnerPassword(t,e,i,n){const o=new Uint8Array(t.length+56);o.set(t,0),o.set(e,t.length),o.set(i,t.length+e.length);const s=c(o,0,o.length);return(0,r.isArrayEqual)(s,n)}checkUserPassword(t,e,i){const n=new Uint8Array(t.length+8);n.set(t,0),n.set(e,t.length);const o=c(n,0,n.length);return(0,r.isArrayEqual)(o,i)}getOwnerKey(t,e,i,r){const n=new Uint8Array(t.length+56);n.set(t,0),n.set(e,t.length),n.set(i,t.length+e.length);const o=c(n,0,n.length);return new g(o).decryptBlock(r,!1,new Uint8Array(16))}getUserKey(t,e,i){const r=new Uint8Array(t.length+8);r.set(t,0),r.set(e,t.length);const n=c(r,0,r.length);return new g(n).decryptBlock(i,!1,new Uint8Array(16))}}e.PDF17=m;const y=function(){function t(t,e,i){let r=c(e,0,e.length).subarray(0,32),n=[0],o=0;for(;o<64||n[n.length-1]>o-32;){const e=t.length+r.length+i.length,s=new Uint8Array(e);let a=0;s.set(t,a),a+=t.length,s.set(r,a),a+=r.length,s.set(i,a);const l=new Uint8Array(64*e);for(let t=0,i=0;t<64;t++,i+=e)l.set(s,i);n=new f(r.subarray(0,16)).encrypt(l,r.subarray(16,32));let p=0;for(let t=0;t<16;t++)p*=1,p%=3,p+=(n[t]>>>0)%3,p%=3;0===p?r=c(n,0,n.length):1===p?r=u(n,0,n.length):2===p&&(r=h(n,0,n.length)),o++}return r.subarray(0,32)}return class{hash(e,i,r){return t(e,i,r)}checkOwnerPassword(e,i,n,o){const s=new Uint8Array(e.length+56);s.set(e,0),s.set(i,e.length),s.set(n,e.length+i.length);const a=t(e,s,n);return(0,r.isArrayEqual)(a,o)}checkUserPassword(e,i,n){const o=new Uint8Array(e.length+8);o.set(e,0),o.set(i,e.length);const s=t(e,o,[]);return(0,r.isArrayEqual)(s,n)}getOwnerKey(e,i,r,n){const o=new Uint8Array(e.length+56);o.set(e,0),o.set(i,e.length),o.set(r,e.length+i.length);const s=t(e,o,r);return new g(s).decryptBlock(n,!1,new Uint8Array(16))}getUserKey(e,i,r){const n=new Uint8Array(e.length+8);n.set(e,0),n.set(i,e.length);const o=t(e,n,[]);return new g(o).decryptBlock(r,!1,new Uint8Array(16))}}}();e.PDF20=y;class v{constructor(t,e){this.StringCipherConstructor=t,this.StreamCipherConstructor=e}createStream(t,e){const i=new this.StreamCipherConstructor;return new o.DecryptStream(t,e,(function(t,e){return i.decryptBlock(t,e)}))}decryptString(t){const e=new this.StringCipherConstructor;let i=(0,r.stringToBytes)(t);return i=e.decryptBlock(i,!0),(0,r.bytesToString)(i)}encryptString(t){const e=new this.StringCipherConstructor;if(e instanceof d){const i=16-t.length%16;t+=String.fromCharCode(i).repeat(i);const n=new Uint8Array(16);if("undefined"!=typeof crypto)crypto.getRandomValues(n);else for(let t=0;t<16;t++)n[t]=Math.floor(256*Math.random());let o=(0,r.stringToBytes)(t);o=e.encrypt(o,n);const s=new Uint8Array(16+o.length);return s.set(n),s.set(o,16),(0,r.bytesToString)(s)}let i=(0,r.stringToBytes)(t);return i=e.encrypt(i),(0,r.bytesToString)(i)}}const b=function(){const t=new Uint8Array([40,191,78,94,78,117,138,65,100,0,78,86,255,250,1,8,46,46,0,182,208,104,62,128,47,12,169,254,100,83,105,122]);function e(e,i,r,n,o,l,c,h){const u=40+r.length+e.length,p=new Uint8Array(u);let d,f,g=0;if(i)for(f=Math.min(32,i.length);g<f;++g)p[g]=i[g];for(d=0;g<32;)p[g++]=t[d++];for(d=0,f=r.length;d<f;++d)p[g++]=r[d];for(p[g++]=255&o,p[g++]=o>>8&255,p[g++]=o>>16&255,p[g++]=o>>>24&255,d=0,f=e.length;d<f;++d)p[g++]=e[d];l>=4&&!h&&(p[g++]=255,p[g++]=255,p[g++]=255,p[g++]=255);let m=a(p,0,g);const y=c>>3;if(l>=3)for(d=0;d<50;++d)m=a(m,0,y);const v=m.subarray(0,y);let b,w;if(l>=3){for(g=0;g<32;++g)p[g]=t[g];for(d=0,f=e.length;d<f;++d)p[g++]=e[d];b=new s(v),w=b.encryptBlock(a(p,0,g)),f=v.length;const i=new Uint8Array(f);for(d=1;d<=19;++d){for(let t=0;t<f;++t)i[t]=v[t]^d;b=new s(i),w=b.encryptBlock(w)}for(d=0,f=w.length;d<f;++d)if(n[d]!==w[d])return null}else for(b=new s(v),w=b.encryptBlock(t),d=0,f=w.length;d<f;++d)if(n[d]!==w[d])return null;return v}const i=n.Name.get("Identity");function o(t,e,i,r=!1){const n=new Uint8Array(i.length+9),o=i.length;let s;for(s=0;s<o;++s)n[s]=i[s];return n[s++]=255&t,n[s++]=t>>8&255,n[s++]=t>>16&255,n[s++]=255&e,n[s++]=e>>8&255,r&&(n[s++]=115,n[s++]=65,n[s++]=108,n[s++]=84),a(n,0,s).subarray(0,Math.min(i.length+5,16))}function l(t,e,i,a,l){if(!(e instanceof n.Name))throw new r.FormatError("Invalid crypt filter name.");const c=t.get(e.name);let h;if(null!=c&&(h=c.get("CFM")),!h||"None"===h.name)return function(){return new p};if("V2"===h.name)return function(){return new s(o(i,a,l,!1))};if("AESV2"===h.name)return function(){return new f(o(i,a,l,!0))};if("AESV3"===h.name)return function(){return new g(l)};throw new r.FormatError("Unknown crypto method")}return class{constructor(o,l,c){const h=o.get("Filter");if(!(0,n.isName)(h,"Standard"))throw new r.FormatError("unknown encryption method");this.filterName=h.name,this.dict=o;const u=o.get("V");if(!Number.isInteger(u)||1!==u&&2!==u&&4!==u&&5!==u)throw new r.FormatError("unsupported encryption algorithm");this.algorithm=u;let p=o.get("Length");if(!p)if(u<=3)p=40;else{const t=o.get("CF"),e=o.get("StmF");if(t instanceof n.Dict&&e instanceof n.Name){t.suppressEncryption=!0;const i=t.get(e.name);p=i&&i.get("Length")||128,p<40&&(p<<=3)}}if(!Number.isInteger(p)||p<40||p%8!=0)throw new r.FormatError("invalid key length");const d=(0,r.stringToBytes)(o.get("O")).subarray(0,32),f=(0,r.stringToBytes)(o.get("U")).subarray(0,32),g=o.get("P"),v=o.get("R"),b=(4===u||5===u)&&!1!==o.get("EncryptMetadata");this.encryptMetadata=b;const w=(0,r.stringToBytes)(l);let x,S;if(c){if(6===v)try{c=(0,r.utf8StringToString)(c)}catch(t){(0,r.warn)("CipherTransformFactory: Unable to convert UTF8 encoded password.")}x=(0,r.stringToBytes)(c)}if(5!==u)S=e(w,x,d,f,g,v,p,b);else{const t=(0,r.stringToBytes)(o.get("O")).subarray(32,40),e=(0,r.stringToBytes)(o.get("O")).subarray(40,48),i=(0,r.stringToBytes)(o.get("U")).subarray(0,48),n=(0,r.stringToBytes)(o.get("U")).subarray(32,40),s=(0,r.stringToBytes)(o.get("U")).subarray(40,48),a=(0,r.stringToBytes)(o.get("OE")),l=(0,r.stringToBytes)(o.get("UE"));(0,r.stringToBytes)(o.get("Perms")),S=function(t,e,i,r,n,o,s,a,l,c,h,u){if(e){const t=Math.min(127,e.length);e=e.subarray(0,t)}else e=[];let p;return p=6===t?new y:new m,p.checkUserPassword(e,a,s)?p.getUserKey(e,l,h):e.length&&p.checkOwnerPassword(e,r,o,i)?p.getOwnerKey(e,n,o,c):null}(v,x,d,t,e,i,f,n,s,a,l)}if(!S&&!c)throw new r.PasswordException("No password given",r.PasswordResponses.NEED_PASSWORD);if(!S&&c){const i=function(e,i,r,n){const o=new Uint8Array(32);let l=0;const c=Math.min(32,e.length);for(;l<c;++l)o[l]=e[l];let h=0;for(;l<32;)o[l++]=t[h++];let u=a(o,0,l);const p=n>>3;if(r>=3)for(h=0;h<50;++h)u=a(u,0,u.length);let d,f;if(r>=3){f=i;const t=new Uint8Array(p);for(h=19;h>=0;h--){for(let e=0;e<p;++e)t[e]=u[e]^h;d=new s(t),f=d.encryptBlock(f)}}else d=new s(u.subarray(0,p)),f=d.encryptBlock(i);return f}(x,d,v,p);S=e(w,i,d,f,g,v,p,b)}if(!S)throw new r.PasswordException("Incorrect Password",r.PasswordResponses.INCORRECT_PASSWORD);if(this.encryptionKey=S,u>=4){const t=o.get("CF");t instanceof n.Dict&&(t.suppressEncryption=!0),this.cf=t,this.stmf=o.get("StmF")||i,this.strf=o.get("StrF")||i,this.eff=o.get("EFF")||this.stmf}}createCipherTransform(t,e){if(4===this.algorithm||5===this.algorithm)return new v(l(this.cf,this.stmf,t,e,this.encryptionKey),l(this.cf,this.strf,t,e,this.encryptionKey));const i=o(t,e,this.encryptionKey,!1),r=function(){return new s(i)};return new v(r,r)}}}();e.CipherTransformFactory=b},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DecryptStream=void 0;var r=i(29);class n extends r.DecodeStream{constructor(t,e,i){super(e),this.str=t,this.dict=t.dict,this.decrypt=i,this.nextChunk=null,this.initialized=!1}readBlock(){let t;if(this.initialized?t=this.nextChunk:(t=this.str.getBytes(512),this.initialized=!0),!t||0===t.length)return void(this.eof=!0);this.nextChunk=this.str.getBytes(512);const e=this.nextChunk&&this.nextChunk.length>0;t=(0,this.decrypt)(t,!e);let i=this.bufferLength;const r=t.length,n=this.ensureBuffer(i+r);for(let e=0;e<r;e++)n[i++]=t[e];this.bufferLength=i}}e.DecryptStream=n},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XFAFactory=void 0;var r=i(77),n=i(81),o=i(87),s=i(85),a=i(78),l=i(2),c=i(88),h=i(98);class u{constructor(t){try{this.root=(new c.XFAParser).parse(u._createDocument(t));const e=new n.Binder(this.root);this.form=e.bind(),this.dataHandler=new o.DataHandler(this.root,e.getData()),this.form[r.$globalData].template=this.form}catch(t){(0,l.warn)(`XFA - an error occurred during parsing and binding: ${t}`)}}isValid(){return this.root&&this.form}_createPagesHelper(){const t=this.form[r.$toPages]();return new Promise(((e,i)=>{const r=()=>{try{const i=t.next();i.done?e(i.value):setTimeout(r,0)}catch(t){i(t)}};setTimeout(r,0)}))}async _createPages(){try{this.pages=await this._createPagesHelper(),this.dims=this.pages.children.map((t=>{const{width:e,height:i}=t.attributes.style;return[0,0,parseInt(e),parseInt(i)]}))}catch(t){(0,l.warn)(`XFA - an error occurred during layout: ${t}`)}}getBoundingBox(t){return this.dims[t]}async getNumPages(){return this.pages||await this._createPages(),this.dims.length}setImages(t){this.form[r.$globalData].images=t}setFonts(t){this.form[r.$globalData].fontFinder=new s.FontFinder(t);const e=[];for(let t of this.form[r.$globalData].usedTypefaces)t=(0,a.stripQuotes)(t),this.form[r.$globalData].fontFinder.find(t)||e.push(t);return e.length>0?e:null}appendFonts(t,e){this.form[r.$globalData].fontFinder.add(t,e)}async getPages(){this.pages||await this._createPages();const t=this.pages;return this.pages=null,t}serializeData(t){return this.dataHandler.serialize(t)}static _createDocument(t){return t["/xdp:xdp"]?Object.values(t).join(""):t["xdp:xdp"]}static getRichTextAsHtml(t){if(!t||"string"!=typeof t)return null;try{let e=new c.XFAParser(h.XhtmlNamespace,!0).parse(t);if(!["body","xhtml"].includes(e[r.$nodeName])){const t=h.XhtmlNamespace.body({});t[r.$appendChild](e),e=t}const i=e[r.$toHTML]();if(!i.success)return null;const{html:n}=i,{attributes:o}=n;return o&&(o.class&&(o.class=o.class.filter((t=>!t.startsWith("xfa")))),o.dir="auto"),{html:n,str:e[r.$text]()}}catch(t){(0,l.warn)(`XFA - an error occurred during parsing of rich text: ${t}`)}return null}}e.XFAFactory=u},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XmlObject=e.XFAObjectArray=e.XFAObject=e.XFAAttribute=e.StringObject=e.OptionObject=e.Option10=e.Option01=e.IntegerObject=e.ContentObject=e.$uid=e.$toStyle=e.$toString=e.$toPages=e.$toHTML=e.$text=e.$tabIndex=e.$setValue=e.$setSetAttributes=e.$setId=e.$searchNode=e.$root=e.$resolvePrototypes=e.$removeChild=e.$pushPara=e.$pushGlyphs=e.$popPara=e.$onText=e.$onChildCheck=e.$onChild=e.$nsAttributes=e.$nodeName=e.$namespaceId=e.$isUsable=e.$isTransparent=e.$isThereMoreWidth=e.$isSplittable=e.$isNsAgnostic=e.$isDescendent=e.$isDataValue=e.$isCDATAXml=e.$isBindable=e.$insertAt=e.$indexOf=e.$ids=e.$hasSettableValue=e.$globalData=e.$getTemplateRoot=e.$getSubformParent=e.$getRealChildrenByNameIt=e.$getParent=e.$getNextPage=e.$getExtra=e.$getDataValue=e.$getContainedChildren=e.$getChildrenByNameIt=e.$getChildrenByName=e.$getChildrenByClass=e.$getChildren=e.$getAvailableSpace=e.$getAttributes=e.$getAttributeIt=e.$flushHTML=e.$finalize=e.$extra=e.$dump=e.$data=e.$content=e.$consumed=e.$clone=e.$cleanup=e.$cleanPage=e.$clean=e.$childrenToHTML=e.$appendChild=e.$addHTML=e.$acceptWhitespace=void 0;var r=i(78),n=i(2),o=i(8),s=i(79),a=i(80);const l=Symbol();e.$acceptWhitespace=l;const c=Symbol();e.$addHTML=c;const h=Symbol();e.$appendChild=h;const u=Symbol();e.$childrenToHTML=u;const p=Symbol();e.$clean=p;const d=Symbol();e.$cleanPage=d;const f=Symbol();e.$cleanup=f;const g=Symbol();e.$clone=g;const m=Symbol();e.$consumed=m;const y=Symbol("content");e.$content=y;const v=Symbol("data");e.$data=v;const b=Symbol();e.$dump=b;const w=Symbol("extra");e.$extra=w;const x=Symbol();e.$finalize=x;const S=Symbol();e.$flushHTML=S;const k=Symbol();e.$getAttributeIt=k;const C=Symbol();e.$getAttributes=C;const A=Symbol();e.$getAvailableSpace=A;const _=Symbol();e.$getChildrenByClass=_;const T=Symbol();e.$getChildrenByName=T;const O=Symbol();e.$getChildrenByNameIt=O;const E=Symbol();e.$getDataValue=E;const M=Symbol();e.$getExtra=M;const P=Symbol();e.$getRealChildrenByNameIt=P;const I=Symbol();e.$getChildren=I;const D=Symbol();e.$getContainedChildren=D;const F=Symbol();e.$getNextPage=F;const R=Symbol();e.$getSubformParent=R;const L=Symbol();e.$getParent=L;const N=Symbol();e.$getTemplateRoot=N;const B=Symbol();e.$globalData=B;const j=Symbol();e.$hasSettableValue=j;const z=Symbol();e.$ids=z;const U=Symbol();e.$indexOf=U;const $=Symbol();e.$insertAt=$;const H=Symbol();e.$isCDATAXml=H;const V=Symbol();e.$isBindable=V;const q=Symbol();e.$isDataValue=q;const W=Symbol();e.$isDescendent=W;const X=Symbol();e.$isNsAgnostic=X;const G=Symbol();e.$isSplittable=G;const K=Symbol();e.$isThereMoreWidth=K;const Y=Symbol();e.$isTransparent=Y;const J=Symbol();e.$isUsable=J;const Z=Symbol(),Q=Symbol("namespaceId");e.$namespaceId=Q;const tt=Symbol("nodeName");e.$nodeName=tt;const et=Symbol();e.$nsAttributes=et;const it=Symbol();e.$onChild=it;const rt=Symbol();e.$onChildCheck=rt;const nt=Symbol();e.$onText=nt;const ot=Symbol();e.$pushGlyphs=ot;const st=Symbol();e.$popPara=st;const at=Symbol();e.$pushPara=at;const lt=Symbol();e.$removeChild=lt;const ct=Symbol("root");e.$root=ct;const ht=Symbol();e.$resolvePrototypes=ht;const ut=Symbol();e.$searchNode=ut;const pt=Symbol();e.$setId=pt;const dt=Symbol();e.$setSetAttributes=dt;const ft=Symbol();e.$setValue=ft;const gt=Symbol();e.$tabIndex=gt;const mt=Symbol();e.$text=mt;const yt=Symbol();e.$toPages=yt;const vt=Symbol();e.$toHTML=vt;const bt=Symbol();e.$toString=bt;const wt=Symbol();e.$toStyle=wt;const xt=Symbol("uid");e.$uid=xt;const St=Symbol(),kt=Symbol(),Ct=Symbol(),At=Symbol("_children"),_t=Symbol(),Tt=Symbol(),Ot=Symbol(),Et=Symbol(),Mt=Symbol(),Pt=Symbol(),It=Symbol(),Dt=Symbol(),Ft=Symbol(),Rt=Symbol("parent"),Lt=Symbol(),Nt=Symbol(),Bt=Symbol();let jt=0;const zt=s.NamespaceIds.datasets.id;class Ut{constructor(t,e,i=!1){this[Q]=t,this[tt]=e,this[It]=i,this[Rt]=null,this[At]=[],this[xt]=`${e}${jt++}`,this[B]=null}[it](t){if(!this[It]||!this[rt](t))return!1;const e=t[tt],i=this[e];if(!(i instanceof $t))return null!==i&&this[lt](i),this[e]=t,this[h](t),!0;if(i.push(t))return this[h](t),!0;let r="";return this.id?r=` (id: ${this.id})`:this.name&&(r=` (name: ${this.name} ${this.h.value})`),(0,n.warn)(`XFA - node "${this[tt]}"${r} has already enough "${e}"!`),!1}[rt](t){return this.hasOwnProperty(t[tt])&&t[Q]===this[Q]}[X](){return!1}[l](){return!1}[H](){return!1}[V](){return!1}[st](){this.para&&this[N]()[w].paraStack.pop()}[at](){this[N]()[w].paraStack.push(this.para)}[pt](t){this.id&&this[Q]===s.NamespaceIds.template.id&&t.set(this.id,this)}[N](){return this[B].template}[G](){return!1}[K](){return!1}[h](t){t[Rt]=this,this[At].push(t),!t[B]&&this[B]&&(t[B]=this[B])}[lt](t){const e=this[At].indexOf(t);this[At].splice(e,1)}[j](){return this.hasOwnProperty("value")}[ft](t){}[nt](t){}[x](){}[p](t){delete this[It],this[f]&&(t.clean(this[f]),delete this[f])}[U](t){return this[At].indexOf(t)}[$](t,e){e[Rt]=this,this[At].splice(t,0,e),!e[B]&&this[B]&&(e[B]=this[B])}[Y](){return!this.name}[Z](){return""}[mt](){return 0===this[At].length?this[y]:this[At].map((t=>t[mt]())).join("")}get[Ct](){const t=Object.getPrototypeOf(this);if(!t._attributes){const e=t._attributes=new Set;for(const t of Object.getOwnPropertyNames(this)){if(null===this[t]||this[t]instanceof Ut||this[t]instanceof $t)break;e.add(t)}}return(0,n.shadow)(this,Ct,t._attributes)}[W](t){let e=this;for(;e;){if(e===t)return!0;e=e[L]()}return!1}[L](){return this[Rt]}[R](){return this[L]()}[I](t=null){return t?this[t]:this[At]}[b](){const t=Object.create(null);this[y]&&(t.$content=this[y]);for(const e of Object.getOwnPropertyNames(this)){const i=this[e];null!==i&&(i instanceof Ut?t[e]=i[b]():i instanceof $t?i.isEmpty()||(t[e]=i.dump()):t[e]=i)}return t}[wt](){return null}[vt](){return r.HTMLResult.EMPTY}*[D](){for(const t of this[I]())yield t}*[Et](t,e){for(const i of this[D]())if(!t||e===t.has(i[tt])){const t=this[A](),e=i[vt](t);e.success||(this[w].failingNode=i),yield e}}[S](){return null}[c](t,e){this[w].children.push(t)}[A](){}[u]({filter:t=null,include:e=!0}){if(this[w].generator){const t=this[A](),e=this[w].failingNode[vt](t);if(!e.success)return e;e.html&&this[c](e.html,e.bbox),delete this[w].failingNode}else this[w].generator=this[Et](t,e);for(;;){const t=this[w].generator.next();if(t.done)break;const e=t.value;if(!e.success)return e;e.html&&this[c](e.html,e.bbox)}return this[w].generator=null,r.HTMLResult.EMPTY}[dt](t){this[Nt]=new Set(Object.keys(t))}[Pt](t){const e=this[Ct],i=this[Nt];return[...t].filter((t=>e.has(t)&&!i.has(t)))}[ht](t,e=new Set){for(const i of this[At])i[Lt](t,e)}[Lt](t,e){const i=this[Mt](t,e);i?this[St](i,t,e):this[ht](t,e)}[Mt](t,e){const{use:i,usehref:r}=this;if(!i&&!r)return null;let o=null,s=null,l=null,c=i;if(r?(c=r,r.startsWith("#som(")&&r.endsWith(")")?s=r.slice("#som(".length,r.length-1):r.startsWith(".#som(")&&r.endsWith(")")?s=r.slice(".#som(".length,r.length-1):r.startsWith("#")?l=r.slice(1):r.startsWith(".#")&&(l=r.slice(2))):i.startsWith("#")?l=i.slice(1):s=i,this.use=this.usehref="",l?o=t.get(l):(o=(0,a.searchNode)(t.get(ct),this,s,!0,!1),o&&(o=o[0])),!o)return(0,n.warn)(`XFA - Invalid prototype reference: ${c}.`),null;if(o[tt]!==this[tt])return(0,n.warn)(`XFA - Incompatible prototype: ${o[tt]} !== ${this[tt]}.`),null;if(e.has(o))return(0,n.warn)("XFA - Cycle detected in prototypes use."),null;e.add(o);const h=o[Mt](t,e);return h&&o[St](h,t,e),o[ht](t,e),e.delete(o),o}[St](t,e,i){if(i.has(t))(0,n.warn)("XFA - Cycle detected in prototypes use.");else{!this[y]&&t[y]&&(this[y]=t[y]),new Set(i).add(t);for(const e of this[Pt](t[Nt]))this[e]=t[e],this[Nt]&&this[Nt].add(e);for(const r of Object.getOwnPropertyNames(this)){if(this[Ct].has(r))continue;const n=this[r],o=t[r];if(n instanceof $t){for(const t of n[At])t[Lt](e,i);for(let r=n[At].length,s=o[At].length;r<s;r++){const o=t[At][r][g]();if(!n.push(o))break;o[Rt]=this,this[At].push(o),o[Lt](e,i)}}else if(null===n){if(null!==o){const t=o[g]();t[Rt]=this,this[r]=t,this[At].push(t),t[Lt](e,i)}}else n[ht](e,i),o&&n[St](o,e,i)}}}static[_t](t){return Array.isArray(t)?t.map((t=>Ut[_t](t))):"object"==typeof t&&null!==t?Object.assign({},t):t}[g](){const t=Object.create(Object.getPrototypeOf(this));for(const e of Object.getOwnPropertySymbols(this))try{t[e]=this[e]}catch(i){(0,n.shadow)(t,e,this[e])}t[xt]=`${t[tt]}${jt++}`,t[At]=[];for(const e of Object.getOwnPropertyNames(this)){if(this[Ct].has(e)){t[e]=Ut[_t](this[e]);continue}const i=this[e];t[e]=i instanceof $t?new $t(i[Dt]):null}for(const e of this[At]){const i=e[tt],r=e[g]();t[At].push(r),r[Rt]=t,null===t[i]?t[i]=r:t[i][At].push(r)}return t}[I](t=null){return t?this[At].filter((e=>e[tt]===t)):this[At]}[_](t){return this[t]}[T](t,e,i=!0){return Array.from(this[O](t,e,i))}*[O](t,e,i=!0){if("parent"!==t){for(const i of this[At])i[tt]===t&&(yield i),i.name===t&&(yield i),(e||i[Y]())&&(yield*i[O](t,e,!1));i&&this[Ct].has(t)&&(yield new Ht(this,t,this[t]))}else yield this[Rt]}}e.XFAObject=Ut;class $t{constructor(t=1/0){this[Dt]=t,this[At]=[]}push(t){return this[At].length<=this[Dt]?(this[At].push(t),!0):((0,n.warn)(`XFA - node "${t[tt]}" accepts no more than ${this[Dt]} children`),!1)}isEmpty(){return 0===this[At].length}dump(){return 1===this[At].length?this[At][0][b]():this[At].map((t=>t[b]()))}[g](){const t=new $t(this[Dt]);return t[At]=this[At].map((t=>t[g]())),t}get children(){return this[At]}clear(){this[At].length=0}}e.XFAObjectArray=$t;class Ht{constructor(t,e,i){this[Rt]=t,this[tt]=e,this[y]=i,this[m]=!1,this[xt]="attribute"+jt++}[L](){return this[Rt]}[q](){return!0}[E](){return this[y].trim()}[ft](t){t=t.value||"",this[y]=t.toString()}[mt](){return this[y]}[W](t){return this[Rt]===t||this[Rt][W](t)}}e.XFAAttribute=Ht;class Vt extends Ut{constructor(t,e,i={}){if(super(t,e),this[y]="",this[Tt]=null,"#text"!==e){const t=new Map;this[kt]=t;for(const[e,r]of Object.entries(i))t.set(e,new Ht(this,e,r));if(i.hasOwnProperty(et)){const t=i[et].xfa.dataNode;void 0!==t&&("dataGroup"===t?this[Tt]=!1:"dataValue"===t&&(this[Tt]=!0))}}this[m]=!1}[bt](t){const e=this[tt];if("#text"===e)return void t.push((0,o.encodeToXmlString)(this[y]));const i=(0,n.utf8StringToString)(e),r=this[Q]===zt?"xfa:":"";t.push(`<${r}${i}`);for(const[e,i]of this[kt].entries()){const r=(0,n.utf8StringToString)(e);t.push(` ${r}="${(0,o.encodeToXmlString)(i[y])}"`)}if(null!==this[Tt]&&(this[Tt]?t.push(' xfa:dataNode="dataValue"'):t.push(' xfa:dataNode="dataGroup"')),this[y]||0!==this[At].length){if(t.push(">"),this[y])"string"==typeof this[y]?t.push((0,o.encodeToXmlString)(this[y])):this[y][bt](t);else for(const e of this[At])e[bt](t);t.push(`</${r}${i}>`)}else t.push("/>")}[it](t){if(this[y]){const t=new Vt(this[Q],"#text");this[h](t),t[y]=this[y],this[y]=""}return this[h](t),!0}[nt](t){this[y]+=t}[x](){if(this[y]&&this[At].length>0){const t=new Vt(this[Q],"#text");this[h](t),t[y]=this[y],delete this[y]}}[vt](){return"#text"===this[tt]?r.HTMLResult.success({name:"#text",value:this[y]}):r.HTMLResult.EMPTY}[I](t=null){return t?this[At].filter((e=>e[tt]===t)):this[At]}[C](){return this[kt]}[_](t){const e=this[kt].get(t);return void 0!==e?e:this[I](t)}*[O](t,e){const i=this[kt].get(t);i&&(yield i);for(const i of this[At])i[tt]===t&&(yield i),e&&(yield*i[O](t,e))}*[k](t,e){const i=this[kt].get(t);!i||e&&i[m]||(yield i);for(const i of this[At])yield*i[k](t,e)}*[P](t,e,i){for(const r of this[At])r[tt]!==t||i&&r[m]||(yield r),e&&(yield*r[P](t,e,i))}[q](){return null===this[Tt]?0===this[At].length||this[At][0][Q]===s.NamespaceIds.xhtml.id:this[Tt]}[E](){return null===this[Tt]?0===this[At].length?this[y].trim():this[At][0][Q]===s.NamespaceIds.xhtml.id?this[At][0][mt]().trim():null:this[y].trim()}[ft](t){t=t.value||"",this[y]=t.toString()}[b](t=!1){const e=Object.create(null);t&&(e.$ns=this[Q]),this[y]&&(e.$content=this[y]),e.$name=this[tt],e.children=[];for(const i of this[At])e.children.push(i[b](t));e.attributes=Object.create(null);for(const[t,i]of this[kt])e.attributes[t]=i[y];return e}}e.XmlObject=Vt;class qt extends Ut{constructor(t,e){super(t,e),this[y]=""}[nt](t){this[y]+=t}[x](){}}e.ContentObject=qt,e.OptionObject=class extends qt{constructor(t,e,i){super(t,e),this[Ft]=i}[x](){this[y]=(0,r.getKeyword)({data:this[y],defaultValue:this[Ft][0],validate:t=>this[Ft].includes(t)})}[p](t){super[p](t),delete this[Ft]}},e.StringObject=class extends qt{[x](){this[y]=this[y].trim()}};class Wt extends qt{constructor(t,e,i,r){super(t,e),this[Ot]=i,this[Bt]=r}[x](){this[y]=(0,r.getInteger)({data:this[y],defaultValue:this[Ot],validate:this[Bt]})}[p](t){super[p](t),delete this[Ot],delete this[Bt]}}e.IntegerObject=Wt,e.Option01=class extends Wt{constructor(t,e){super(t,e,0,(t=>1===t))}},e.Option10=class extends Wt{constructor(t,e){super(t,e,1,(t=>0===t))}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.HTMLResult=void 0,e.getBBox=function(t){const e=-1;if(!t)return{x:e,y:e,width:e,height:e};const i=t.trim().split(/\s*,\s*/).map((t=>a(t,"-1")));if(i.length<4||i[2]<0||i[3]<0)return{x:e,y:e,width:e,height:e};const[r,n,o,s]=i;return{x:r,y:n,width:o,height:s}},e.getColor=function(t,e=[0,0,0]){let[i,r,n]=e;if(!t)return{r:i,g:r,b:n};const o=t.trim().split(/\s*,\s*/).map((t=>Math.min(Math.max(0,parseInt(t.trim(),10)),255))).map((t=>isNaN(t)?0:t));return o.length<3||([i,r,n]=o),{r:i,g:r,b:n}},e.getFloat=function({data:t,defaultValue:e,validate:i}){if(!t)return e;t=t.trim();const r=parseFloat(t);return!isNaN(r)&&i(r)?r:e},e.getInteger=function({data:t,defaultValue:e,validate:i}){if(!t)return e;t=t.trim();const r=parseInt(t,10);return!isNaN(r)&&i(r)?r:e},e.getKeyword=s,e.getMeasurement=a,e.getRatio=function(t){if(!t)return{num:1,den:1};const e=t.trim().split(/\s*:\s*/).map((t=>parseFloat(t))).filter((t=>!isNaN(t)));if(1===e.length&&e.push(1),0===e.length)return{num:1,den:1};const[i,r]=e;return{num:i,den:r}},e.getRelevant=function(t){return t?t.trim().split(/\s+/).map((t=>({excluded:"-"===t[0],viewname:t.substring(1)}))):[]},e.getStringOption=function(t,e){return s({data:t,defaultValue:e[0],validate:t=>e.includes(t)})},e.stripQuotes=function(t){return t.startsWith("'")||t.startsWith('"')?t.slice(1,t.length-1):t};var r=i(2);const n={pt:t=>t,cm:t=>t/2.54*72,mm:t=>t/25.4*72,in:t=>72*t,px:t=>t},o=/([+-]?\d+\.?\d*)(.*)/;function s({data:t,defaultValue:e,validate:i}){return t&&i(t=t.trim())?t:e}function a(t,e="0"){if(e=e||"0",!t)return a(e);const i=t.trim().match(o);if(!i)return a(e);const[,r,s]=i,l=parseFloat(r);if(isNaN(l))return a(e);if(0===l)return 0;const c=n[s];return c?c(l):l}class l{static get FAILURE(){return(0,r.shadow)(this,"FAILURE",new l(!1,null,null,null))}static get EMPTY(){return(0,r.shadow)(this,"EMPTY",new l(!0,null,null,null))}constructor(t,e,i,r){this.success=t,this.html=e,this.bbox=i,this.breakNode=r}isBreak(){return!!this.breakNode}static breakNode(t){return new l(!1,null,null,t)}static success(t,e=null){return new l(!0,t,e,null)}}e.HTMLResult=l},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NamespaceIds=e.$buildXFAObject=void 0;const i=Symbol();e.$buildXFAObject=i,e.NamespaceIds={config:{id:0,check:t=>t.startsWith("http://www.xfa.org/schema/xci/")},connectionSet:{id:1,check:t=>t.startsWith("http://www.xfa.org/schema/xfa-connection-set/")},datasets:{id:2,check:t=>t.startsWith("http://www.xfa.org/schema/xfa-data/")},form:{id:3,check:t=>t.startsWith("http://www.xfa.org/schema/xfa-form/")},localeSet:{id:4,check:t=>t.startsWith("http://www.xfa.org/schema/xfa-locale-set/")},pdf:{id:5,check:t=>"http://ns.adobe.com/xdp/pdf/"===t},signature:{id:6,check:t=>"http://www.w3.org/2000/09/xmldsig#"===t},sourceSet:{id:7,check:t=>t.startsWith("http://www.xfa.org/schema/xfa-source-set/")},stylesheet:{id:8,check:t=>"http://www.w3.org/1999/XSL/Transform"===t},template:{id:9,check:t=>t.startsWith("http://www.xfa.org/schema/xfa-template/")},xdc:{id:10,check:t=>t.startsWith("http://www.xfa.org/schema/xdc/")},xdp:{id:11,check:t=>"http://ns.adobe.com/xdp/"===t},xfdf:{id:12,check:t=>"http://ns.adobe.com/xfdf/"===t},xhtml:{id:13,check:t=>"http://www.w3.org/1999/xhtml"===t},xmpmeta:{id:14,check:t=>"http://ns.adobe.com/xmpmeta/"===t}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createDataNode=function(t,e,i){const n=m(i);if(!n)return null;if(n.some((t=>t.operator===c)))return null;const s=d.get(n[0].name);let a=0;s?(t=s(t,e),a=1):t=e||t;for(let e=n.length;a<e;a++){const{name:e,operator:i,index:s}=n[a];if(!isFinite(s))return n[a].index=0,y(t,n.slice(a));let u;switch(i){case l:u=t[r.$getChildrenByName](e,!1);break;case c:u=t[r.$getChildrenByName](e,!0);break;case h:u=t[r.$getChildrenByClass](e),u=u instanceof r.XFAObjectArray?u.children:[u]}if(0===u.length)return y(t,n.slice(a));if(!(s<u.length))return n[a].index=s-u.length,y(t,n.slice(a));{const e=u[s];if(!(e instanceof r.XFAObject))return(0,o.warn)("XFA - Cannot create a node."),null;t=e}}return null},e.searchNode=function(t,e,i,n=!0,o=!0){const s=m(i,n);if(!s)return null;const a=d.get(s[0].name);let u,p=0;a?(u=!0,t=[a(t,e)],p=1):(u=null===e,t=[e||t]);for(let i=s.length;p<i;p++){const{name:i,cacheName:n,operator:a,index:d}=s[p],g=[];for(const e of t){if(!(e instanceof r.XFAObject))continue;let t,s;if(o&&(s=f.get(e),s||(s=new Map,f.set(e,s)),t=s.get(n)),!t){switch(a){case l:t=e[r.$getChildrenByName](i,!1);break;case c:t=e[r.$getChildrenByName](i,!0);break;case h:t=e[r.$getChildrenByClass](i),t=t instanceof r.XFAObjectArray?t.children:[t]}o&&s.set(n,t)}t.length>0&&g.push(t)}if(0!==g.length||u||0!==p)t=isFinite(d)?g.filter((t=>d<t.length)).map((t=>t[d])):g.reduce(((t,e)=>t.concat(e)),[]);else{const i=e[r.$getParent]();if(!(e=i))return null;p=-1,t=[e]}}return 0===t.length?null:t};var r=i(77),n=i(79),o=i(2);const s=/^[^.[]+/,a=/^[^\]]+/,l=0,c=1,h=2,u=3,p=4,d=new Map([["$data",(t,e)=>t.datasets?t.datasets.data:t],["$record",(t,e)=>(t.datasets?t.datasets.data:t)[r.$getChildren]()[0]],["$template",(t,e)=>t.template],["$connectionSet",(t,e)=>t.connectionSet],["$form",(t,e)=>t.form],["$layout",(t,e)=>t.layout],["$host",(t,e)=>t.host],["$dataWindow",(t,e)=>t.dataWindow],["$event",(t,e)=>t.event],["!",(t,e)=>t.datasets],["$xfa",(t,e)=>t],["xfa",(t,e)=>t],["$",(t,e)=>e]]),f=new WeakMap,g=n.NamespaceIds.datasets.id;function m(t,e,i=!0){let r=t.match(s);if(!r)return null;let[n]=r;const d=[{name:n,cacheName:"."+n,index:0,js:null,formCalc:null,operator:l}];let f=n.length;for(;f<t.length;){const m=f;if("["===t.charAt(f++)){if(r=t.slice(f).match(a),!r)return(0,o.warn)("XFA - Invalid index in SOM expression"),null;d[d.length-1].index="*"===(g=(g=r[0]).trim())?1/0:parseInt(g,10)||0,f+=r[0].length+1;continue}let y;switch(t.charAt(f)){case".":if(!e)return null;f++,y=c;break;case"#":f++,y=h;break;case"[":if(i)return(0,o.warn)("XFA - SOM expression contains a FormCalc subexpression which is not supported for now."),null;y=u;break;case"(":if(i)return(0,o.warn)("XFA - SOM expression contains a JavaScript subexpression which is not supported for now."),null;y=p;break;default:y=l}if(r=t.slice(f).match(s),!r)break;[n]=r,f+=n.length,d.push({name:n,cacheName:t.slice(m,f),operator:y,index:0,js:null,formCalc:null})}var g;return d}function y(t,e){let i=null;for(const{name:n,index:o}of e){for(let e=0,s=isFinite(o)?o:0;e<=s;e++){const e=t[r.$namespaceId]===g?-1:t[r.$namespaceId];i=new r.XmlObject(e,n),t[r.$appendChild](i)}t=i}return i}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Binder=void 0;var r=i(77),n=i(82),o=i(80),s=i(79),a=i(2);const l=s.NamespaceIds.datasets.id;function c(t){const e=new n.Text({});return e[r.$content]=t,e}e.Binder=class{constructor(t){this.root=t,this.datasets=t.datasets,t.datasets&&t.datasets.data?this.data=t.datasets.data:this.data=new r.XmlObject(s.NamespaceIds.datasets.id,"data"),this.emptyMerge=0===this.data[r.$getChildren]().length,this.root.form=this.form=t.template[r.$clone]()}_isConsumeData(){return!this.emptyMerge&&this._mergeMode}_isMatchTemplate(){return!this._isConsumeData()}bind(){return this._bindElement(this.form,this.data),this.form}getData(){return this.data}_bindValue(t,e,i){if(t[r.$data]=e,t[r.$hasSettableValue]())if(e[r.$isDataValue]()){const i=e[r.$getDataValue]();t[r.$setValue](c(i))}else if(t instanceof n.Field&&t.ui&&t.ui.choiceList&&"multiSelect"===t.ui.choiceList.open){const i=e[r.$getChildren]().map((t=>t[r.$content].trim())).join("\n");t[r.$setValue](c(i))}else this._isConsumeData()&&(0,a.warn)("XFA - Nodes haven't the same type.");else!e[r.$isDataValue]()||this._isMatchTemplate()?this._bindElement(t,e):(0,a.warn)("XFA - Nodes haven't the same type.")}_findDataByNameToConsume(t,e,i,n){if(!t)return null;let o,a;for(let n=0;n<3;n++){for(o=i[r.$getRealChildrenByNameIt](t,!1,!0);a=o.next().value,a;)if(e===a[r.$isDataValue]())return a;if(i[r.$namespaceId]===s.NamespaceIds.datasets.id&&"data"===i[r.$nodeName])break;i=i[r.$getParent]()}return n?(o=this.data[r.$getRealChildrenByNameIt](t,!0,!1),a=o.next().value,a||(o=this.data[r.$getAttributeIt](t,!0),a=o.next().value,a&&a[r.$isDataValue]()?a:null)):null}_setProperties(t,e){if(t.hasOwnProperty("setProperty"))for(const{ref:i,target:s,connection:l}of t.setProperty.children){if(l)continue;if(!i)continue;const c=(0,o.searchNode)(this.root,e,i,!1,!1);if(!c){(0,a.warn)(`XFA - Invalid reference: ${i}.`);continue}const[h]=c;if(!h[r.$isDescendent](this.data)){(0,a.warn)("XFA - Invalid node: must be a data node.");continue}const u=(0,o.searchNode)(this.root,t,s,!1,!1);if(!u){(0,a.warn)(`XFA - Invalid target: ${s}.`);continue}const[p]=u;if(!p[r.$isDescendent](t)){(0,a.warn)("XFA - Invalid target: must be a property or subproperty.");continue}const d=p[r.$getParent]();if(p instanceof n.SetProperty||d instanceof n.SetProperty){(0,a.warn)("XFA - Invalid target: cannot be a setProperty or one of its properties.");continue}if(p instanceof n.BindItems||d instanceof n.BindItems){(0,a.warn)("XFA - Invalid target: cannot be a bindItems or one of its properties.");continue}const f=h[r.$text](),g=p[r.$nodeName];if(p instanceof r.XFAAttribute){const t=Object.create(null);t[g]=f;const e=Reflect.construct(Object.getPrototypeOf(d).constructor,[t]);d[g]=e[g]}else p.hasOwnProperty(r.$content)?(p[r.$data]=h,p[r.$content]=f,p[r.$finalize]()):(0,a.warn)("XFA - Invalid node to use in setProperty")}}_bindItems(t,e){if(!t.hasOwnProperty("items")||!t.hasOwnProperty("bindItems")||t.bindItems.isEmpty())return;for(const e of t.items.children)t[r.$removeChild](e);t.items.clear();const i=new n.Items({}),s=new n.Items({});t[r.$appendChild](i),t.items.push(i),t[r.$appendChild](s),t.items.push(s);for(const{ref:n,labelRef:l,valueRef:h,connection:u}of t.bindItems.children){if(u)continue;if(!n)continue;const t=(0,o.searchNode)(this.root,e,n,!1,!1);if(t)for(const e of t){if(!e[r.$isDescendent](this.datasets)){(0,a.warn)(`XFA - Invalid ref (${n}): must be a datasets child.`);continue}const t=(0,o.searchNode)(this.root,e,l,!0,!1);if(!t){(0,a.warn)(`XFA - Invalid label: ${l}.`);continue}const[u]=t;if(!u[r.$isDescendent](this.datasets)){(0,a.warn)("XFA - Invalid label: must be a datasets child.");continue}const p=(0,o.searchNode)(this.root,e,h,!0,!1);if(!p){(0,a.warn)(`XFA - Invalid value: ${h}.`);continue}const[d]=p;if(!d[r.$isDescendent](this.datasets)){(0,a.warn)("XFA - Invalid value: must be a datasets child.");continue}const f=c(u[r.$text]()),g=c(d[r.$text]());i[r.$appendChild](f),i.text.push(f),s[r.$appendChild](g),s.text.push(g)}else(0,a.warn)(`XFA - Invalid reference: ${n}.`)}}_bindOccurrences(t,e,i){let n;if(e.length>1&&(n=t[r.$clone](),n[r.$removeChild](n.occur),n.occur=null),this._bindValue(t,e[0],i),this._setProperties(t,e[0]),this._bindItems(t,e[0]),1===e.length)return;const o=t[r.$getParent](),s=t[r.$nodeName],a=o[r.$indexOf](t);for(let t=1,l=e.length;t<l;t++){const l=e[t],c=n[r.$clone]();o[s].push(c),o[r.$insertAt](a+t,c),this._bindValue(c,l,i),this._setProperties(c,l),this._bindItems(c,l)}}_createOccurrences(t){if(!this.emptyMerge)return;const{occur:e}=t;if(!e||e.initial<=1)return;const i=t[r.$getParent](),n=t[r.$nodeName];if(!(i[n]instanceof r.XFAObjectArray))return;let o;o=t.name?i[n].children.filter((e=>e.name===t.name)).length:i[n].children.length;const s=i[r.$indexOf](t)+1,a=e.initial-o;if(a){const e=t[r.$clone]();e[r.$removeChild](e.occur),e.occur=null,i[n].push(e),i[r.$insertAt](s,e);for(let t=1;t<a;t++){const o=e[r.$clone]();i[n].push(o),i[r.$insertAt](s+t,o)}}}_getOccurInfo(t){const{name:e,occur:i}=t;if(!i||!e)return[1,1];const r=-1===i.max?1/0:i.max;return[i.min,r]}_setAndBind(t,e){this._setProperties(t,e),this._bindItems(t,e),this._bindElement(t,e)}_bindElement(t,e){const i=[];this._createOccurrences(t);for(const n of t[r.$getChildren]()){if(n[r.$data])continue;if(void 0===this._mergeMode&&"subform"===n[r.$nodeName]){this._mergeMode="consumeData"===n.mergeMode;const t=e[r.$getChildren]();if(t.length>0)this._bindOccurrences(n,[t[0]],null);else if(this.emptyMerge){const t=e[r.$namespaceId]===l?-1:e[r.$namespaceId],i=n[r.$data]=new r.XmlObject(t,n.name||"root");e[r.$appendChild](i),this._bindElement(n,i)}continue}if(!n[r.$isBindable]())continue;let t=!1,s=null,c=null,h=null;if(n.bind){switch(n.bind.match){case"none":this._setAndBind(n,e);continue;case"global":t=!0;break;case"dataRef":if(!n.bind.ref){(0,a.warn)(`XFA - ref is empty in node ${n[r.$nodeName]}.`),this._setAndBind(n,e);continue}c=n.bind.ref}n.bind.picture&&(s=n.bind.picture[r.$content])}const[u,p]=this._getOccurInfo(n);if(c){if(h=(0,o.searchNode)(this.root,e,c,!0,!1),null===h){if(h=(0,o.createDataNode)(this.data,e,c),!h)continue;this._isConsumeData()&&(h[r.$consumed]=!0),this._setAndBind(n,h);continue}this._isConsumeData()&&(h=h.filter((t=>!t[r.$consumed]))),h.length>p?h=h.slice(0,p):0===h.length&&(h=null),h&&this._isConsumeData()&&h.forEach((t=>{t[r.$consumed]=!0}))}else{if(!n.name){this._setAndBind(n,e);continue}if(this._isConsumeData()){const i=[];for(;i.length<p;){const o=this._findDataByNameToConsume(n.name,n[r.$hasSettableValue](),e,t);if(!o)break;o[r.$consumed]=!0,i.push(o)}h=i.length>0?i:null}else{if(h=e[r.$getRealChildrenByNameIt](n.name,!1,this.emptyMerge).next().value,!h){if(0===u){i.push(n);continue}const t=e[r.$namespaceId]===l?-1:e[r.$namespaceId];h=n[r.$data]=new r.XmlObject(t,n.name),this.emptyMerge&&(h[r.$consumed]=!0),e[r.$appendChild](h),this._setAndBind(n,h);continue}this.emptyMerge&&(h[r.$consumed]=!0),h=[h]}}h?this._bindOccurrences(n,h,s):u>0?this._setAndBind(n,e):i.push(n)}i.forEach((t=>t[r.$getParent]()[r.$removeChild](t)))}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Value=e.Text=e.TemplateNamespace=e.Template=e.SetProperty=e.Items=e.Field=e.BindItems=void 0;var r=i(77),n=i(79),o=i(83),s=i(84),a=i(78),l=i(2),c=i(85),h=i(8),u=i(80);const p=n.NamespaceIds.template.id,d="http://www.w3.org/2000/svg",f=/^H(\d+)$/,g=new Set(["image/gif","image/jpeg","image/jpg","image/pjpeg","image/png","image/apng","image/x-png","image/bmp","image/x-ms-bmp","image/tiff","image/tif","application/octet-stream"]),m=[[[66,77],"image/bmp"],[[255,216,255],"image/jpeg"],[[73,73,42,0],"image/tiff"],[[77,77,0,42],"image/tiff"],[[71,73,70,56,57,97],"image/gif"],[[137,80,78,71,13,10,26,10],"image/png"]];function y(t){if(!t||!t.border)return{w:0,h:0};const e=t.border[r.$getExtra]();return e?{w:e.widths[0]+e.widths[2]+e.insets[0]+e.insets[2],h:e.widths[1]+e.widths[3]+e.insets[1]+e.insets[3]}:{w:0,h:0}}function v(t){return t.margin&&(t.margin.topInset||t.margin.rightInset||t.margin.bottomInset||t.margin.leftInset)}function b(t,e){if(!t.value){const e=new Ie({});t[r.$appendChild](e),t.value=e}t.value[r.$setValue](e)}function*w(t){for(const e of t[r.$getChildren]())e instanceof ve?yield*e[r.$getContainedChildren]():yield e}function x(t){for(;t;){if(!t.traversal)return void(t[r.$tabIndex]=t[r.$getParent]()[r.$tabIndex]);if(t[r.$tabIndex])return;let e=null;for(const i of t.traversal[r.$getChildren]())if("next"===i.operation){e=i;break}if(!e||!e.ref)return void(t[r.$tabIndex]=t[r.$getParent]()[r.$tabIndex]);const i=t[r.$getTemplateRoot]();t[r.$tabIndex]=++i[r.$tabIndex];const n=i[r.$searchNode](e.ref,t);if(!n)return;t=n[0]}}function S(t,e){const i=t.assist;if(i){const t=i[r.$toHTML]();t&&(e.title=t);const n=i.role.match(f);if(n){const t="heading",i=n[1];e.role=t,e["aria-level"]=i}}if("table"===t.layout)e.role="table";else if("row"===t.layout)e.role="row";else{const i=t[r.$getParent]();"row"===i.layout&&(i.assist&&"TH"===i.assist.role?e.role="columnheader":e.role="cell")}}function k(t){if(!t.assist)return null;const e=t.assist;return e.speak&&""!==e.speak[r.$content]?e.speak[r.$content]:e.toolTip?e.toolTip[r.$content]:null}function C(t){return a.HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:Object.create(null)},children:[{name:"span",attributes:{style:Object.create(null)},value:t}]})}function A(t){const e=t[r.$getTemplateRoot]();null===e[r.$extra].firstUnsplittable&&(e[r.$extra].firstUnsplittable=t,e[r.$extra].noLayoutFailure=!0)}function _(t){const e=t[r.$getTemplateRoot]();e[r.$extra].firstUnsplittable===t&&(e[r.$extra].noLayoutFailure=!1)}function T(t){if(t[r.$extra])return!1;if(t[r.$extra]=Object.create(null),"auto"===t.targetType)return!1;const e=t[r.$getTemplateRoot]();let i=null;if(t.target){if(i=e[r.$searchNode](t.target,t[r.$getParent]()),!i)return!1;i=i[0]}const{currentPageArea:n,currentContentArea:o}=e[r.$extra];if("pageArea"===t.targetType)return i instanceof Jt||(i=null),t.startNew?(t[r.$extra].target=i||n,!0):!(!i||i===n||(t[r.$extra].target=i,0));i instanceof Z||(i=null);const s=i&&i[r.$getParent]();let a,l=s;if(t.startNew)if(i){const t=s.contentArea.children,e=t.indexOf(o),r=t.indexOf(i);-1!==e&&e<r&&(l=null),a=r-1}else a=n.contentArea.children.indexOf(o);else{if(!i||i===o)return!1;a=s.contentArea.children.indexOf(i)-1,l=s===n?null:s}return t[r.$extra].target=l,t[r.$extra].index=a,!0}function O(t,e,i){const n=t[r.$getTemplateRoot](),o=n[r.$extra].noLayoutFailure,s=e[r.$getSubformParent];e[r.$getSubformParent]=()=>t,n[r.$extra].noLayoutFailure=!0;const a=e[r.$toHTML](i);t[r.$addHTML](a.html,a.bbox),n[r.$extra].noLayoutFailure=o,e[r.$getSubformParent]=s}class E extends r.StringObject{constructor(t){super(p,"appearanceFilter"),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||""}}class M extends r.XFAObject{constructor(t){super(p,"arc",!0),this.circular=(0,a.getInteger)({data:t.circular,defaultValue:0,validate:t=>1===t}),this.hand=(0,a.getStringOption)(t.hand,["even","left","right"]),this.id=t.id||"",this.startAngle=(0,a.getFloat)({data:t.startAngle,defaultValue:0,validate:t=>!0}),this.sweepAngle=(0,a.getFloat)({data:t.sweepAngle,defaultValue:360,validate:t=>!0}),this.use=t.use||"",this.usehref=t.usehref||"",this.edge=null,this.fill=null}[r.$toHTML](){const t=this.edge?this.edge:new ct({}),e=t[r.$toStyle](),i=Object.create(null);let n;this.fill&&"visible"===this.fill.presence?Object.assign(i,this.fill[r.$toStyle]()):i.fill="transparent",i.strokeWidth=(0,s.measureToString)("visible"===t.presence?t.thickness:0),i.stroke=e.color;const o={xmlns:d,style:{width:"100%",height:"100%",overflow:"visible"}};if(360===this.sweepAngle)n={name:"ellipse",attributes:{xmlns:d,cx:"50%",cy:"50%",rx:"50%",ry:"50%",style:i}};else{const t=this.startAngle*Math.PI/180,e=this.sweepAngle*Math.PI/180,r=this.sweepAngle>180?1:0,[s,a,l,c]=[50*(1+Math.cos(t)),50*(1-Math.sin(t)),50*(1+Math.cos(t+e)),50*(1-Math.sin(t+e))];n={name:"path",attributes:{xmlns:d,d:`M ${s} ${a} A 50 50 0 ${r} 0 ${l} ${c}`,vectorEffect:"non-scaling-stroke",style:i}},Object.assign(o,{viewBox:"0 0 100 100",preserveAspectRatio:"none"})}const l={name:"svg",children:[n],attributes:o};return v(this[r.$getParent]()[r.$getParent]())?a.HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[l]}):(l.attributes.style.position="absolute",a.HTMLResult.success(l))}}class P extends r.XFAObject{constructor(t){super(p,"area",!0),this.colSpan=(0,a.getInteger)({data:t.colSpan,defaultValue:1,validate:t=>t>=1||-1===t}),this.id=t.id||"",this.name=t.name||"",this.relevant=(0,a.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.x=(0,a.getMeasurement)(t.x,"0pt"),this.y=(0,a.getMeasurement)(t.y,"0pt"),this.desc=null,this.extras=null,this.area=new r.XFAObjectArray,this.draw=new r.XFAObjectArray,this.exObject=new r.XFAObjectArray,this.exclGroup=new r.XFAObjectArray,this.field=new r.XFAObjectArray,this.subform=new r.XFAObjectArray,this.subformSet=new r.XFAObjectArray}*[r.$getContainedChildren](){yield*w(this)}[r.$isTransparent](){return!0}[r.$isBindable](){return!0}[r.$addHTML](t,e){const[i,n,o,s]=e;this[r.$extra].width=Math.max(this[r.$extra].width,i+o),this[r.$extra].height=Math.max(this[r.$extra].height,n+s),this[r.$extra].children.push(t)}[r.$getAvailableSpace](){return this[r.$extra].availableSpace}[r.$toHTML](t){const e=(0,s.toStyle)(this,"position"),i={style:e,id:this[r.$uid],class:["xfaArea"]};(0,s.isPrintOnly)(this)&&i.class.push("xfaPrintOnly"),this.name&&(i.xfaName=this.name);const n=[];this[r.$extra]={children:n,width:0,height:0,availableSpace:t};const o=this[r.$childrenToHTML]({filter:new Set(["area","draw","field","exclGroup","subform","subformSet"]),include:!0});if(!o.success)return o.isBreak()?o:(delete this[r.$extra],a.HTMLResult.FAILURE);e.width=(0,s.measureToString)(this[r.$extra].width),e.height=(0,s.measureToString)(this[r.$extra].height);const l={name:"div",attributes:i,children:n},c=[this.x,this.y,this[r.$extra].width,this[r.$extra].height];return delete this[r.$extra],a.HTMLResult.success(l,c)}}class I extends r.XFAObject{constructor(t){super(p,"assist",!0),this.id=t.id||"",this.role=t.role||"",this.use=t.use||"",this.usehref=t.usehref||"",this.speak=null,this.toolTip=null}[r.$toHTML](){return this.toolTip&&this.toolTip[r.$content]?this.toolTip[r.$content]:null}}class D extends r.XFAObject{constructor(t){super(p,"barcode",!0),this.charEncoding=(0,a.getKeyword)({data:t.charEncoding?t.charEncoding.toLowerCase():"",defaultValue:"",validate:t=>["utf-8","big-five","fontspecific","gbk","gb-18030","gb-2312","ksc-5601","none","shift-jis","ucs-2","utf-16"].includes(t)||t.match(/iso-8859-\d{2}/)}),this.checksum=(0,a.getStringOption)(t.checksum,["none","1mod10","1mod10_1mod11","2mod10","auto"]),this.dataColumnCount=(0,a.getInteger)({data:t.dataColumnCount,defaultValue:-1,validate:t=>t>=0}),this.dataLength=(0,a.getInteger)({data:t.dataLength,defaultValue:-1,validate:t=>t>=0}),this.dataPrep=(0,a.getStringOption)(t.dataPrep,["none","flateCompress"]),this.dataRowCount=(0,a.getInteger)({data:t.dataRowCount,defaultValue:-1,validate:t=>t>=0}),this.endChar=t.endChar||"",this.errorCorrectionLevel=(0,a.getInteger)({data:t.errorCorrectionLevel,defaultValue:-1,validate:t=>t>=0&&t<=8}),this.id=t.id||"",this.moduleHeight=(0,a.getMeasurement)(t.moduleHeight,"5mm"),this.moduleWidth=(0,a.getMeasurement)(t.moduleWidth,"0.25mm"),this.printCheckDigit=(0,a.getInteger)({data:t.printCheckDigit,defaultValue:0,validate:t=>1===t}),this.rowColumnRatio=(0,a.getRatio)(t.rowColumnRatio),this.startChar=t.startChar||"",this.textLocation=(0,a.getStringOption)(t.textLocation,["below","above","aboveEmbedded","belowEmbedded","none"]),this.truncate=(0,a.getInteger)({data:t.truncate,defaultValue:0,validate:t=>1===t}),this.type=(0,a.getStringOption)(t.type?t.type.toLowerCase():"",["aztec","codabar","code2of5industrial","code2of5interleaved","code2of5matrix","code2of5standard","code3of9","code3of9extended","code11","code49","code93","code128","code128a","code128b","code128c","code128sscc","datamatrix","ean8","ean8add2","ean8add5","ean13","ean13add2","ean13add5","ean13pwcd","fim","logmars","maxicode","msi","pdf417","pdf417macro","plessey","postauscust2","postauscust3","postausreplypaid","postausstandard","postukrm4scc","postusdpbc","postusimb","postusstandard","postus5zip","qrcode","rfid","rss14","rss14expanded","rss14limited","rss14stacked","rss14stackedomni","rss14truncated","telepen","ucc128","ucc128random","ucc128sscc","upca","upcaadd2","upcaadd5","upcapwcd","upce","upceadd2","upceadd5","upcean2","upcean5","upsmaxicode"]),this.upsMode=(0,a.getStringOption)(t.upsMode,["usCarrier","internationalCarrier","secureSymbol","standardSymbol"]),this.use=t.use||"",this.usehref=t.usehref||"",this.wideNarrowRatio=(0,a.getRatio)(t.wideNarrowRatio),this.encrypt=null,this.extras=null}}class F extends r.XFAObject{constructor(t){super(p,"bind",!0),this.match=(0,a.getStringOption)(t.match,["once","dataRef","global","none"]),this.ref=t.ref||"",this.picture=null}}class R extends r.XFAObject{constructor(t){super(p,"bindItems"),this.connection=t.connection||"",this.labelRef=t.labelRef||"",this.ref=t.ref||"",this.valueRef=t.valueRef||""}}e.BindItems=R;class L extends r.XFAObject{constructor(t){super(p,"bookend"),this.id=t.id||"",this.leader=t.leader||"",this.trailer=t.trailer||"",this.use=t.use||"",this.usehref=t.usehref||""}}class N extends r.Option01{constructor(t){super(p,"boolean"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[r.$toHTML](t){return C(1===this[r.$content]?"1":"0")}}class B extends r.XFAObject{constructor(t){super(p,"border",!0),this.break=(0,a.getStringOption)(t.break,["close","open"]),this.hand=(0,a.getStringOption)(t.hand,["even","left","right"]),this.id=t.id||"",this.presence=(0,a.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,a.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.corner=new r.XFAObjectArray(4),this.edge=new r.XFAObjectArray(4),this.extras=null,this.fill=null,this.margin=null}[r.$getExtra](){if(!this[r.$extra]){const t=this.edge.children.slice();if(t.length<4){const e=t[t.length-1]||new ct({});for(let i=t.length;i<4;i++)t.push(e)}const e=t.map((t=>t.thickness)),i=[0,0,0,0];this.margin&&(i[0]=this.margin.topInset,i[1]=this.margin.rightInset,i[2]=this.margin.bottomInset,i[3]=this.margin.leftInset),this[r.$extra]={widths:e,insets:i,edges:t}}return this[r.$extra]}[r.$toStyle](){const{edges:t}=this[r.$getExtra](),e=t.map((t=>{const e=t[r.$toStyle]();return e.color=e.color||"#000000",e})),i=Object.create(null);if(this.margin&&Object.assign(i,this.margin[r.$toStyle]()),this.fill&&"visible"===this.fill.presence&&Object.assign(i,this.fill[r.$toStyle]()),this.corner.children.some((t=>0!==t.radius))){const t=this.corner.children.map((t=>t[r.$toStyle]()));if(2===t.length||3===t.length){const e=t[t.length-1];for(let i=t.length;i<4;i++)t.push(e)}i.borderRadius=t.map((t=>t.radius)).join(" ")}switch(this.presence){case"invisible":case"hidden":i.borderStyle="";break;case"inactive":i.borderStyle="none";break;default:i.borderStyle=e.map((t=>t.style)).join(" ")}return i.borderWidth=e.map((t=>t.width)).join(" "),i.borderColor=e.map((t=>t.color)).join(" "),i}}class j extends r.XFAObject{constructor(t){super(p,"break",!0),this.after=(0,a.getStringOption)(t.after,["auto","contentArea","pageArea","pageEven","pageOdd"]),this.afterTarget=t.afterTarget||"",this.before=(0,a.getStringOption)(t.before,["auto","contentArea","pageArea","pageEven","pageOdd"]),this.beforeTarget=t.beforeTarget||"",this.bookendLeader=t.bookendLeader||"",this.bookendTrailer=t.bookendTrailer||"",this.id=t.id||"",this.overflowLeader=t.overflowLeader||"",this.overflowTarget=t.overflowTarget||"",this.overflowTrailer=t.overflowTrailer||"",this.startNew=(0,a.getInteger)({data:t.startNew,defaultValue:0,validate:t=>1===t}),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}}class z extends r.XFAObject{constructor(t){super(p,"breakAfter",!0),this.id=t.id||"",this.leader=t.leader||"",this.startNew=(0,a.getInteger)({data:t.startNew,defaultValue:0,validate:t=>1===t}),this.target=t.target||"",this.targetType=(0,a.getStringOption)(t.targetType,["auto","contentArea","pageArea"]),this.trailer=t.trailer||"",this.use=t.use||"",this.usehref=t.usehref||"",this.script=null}}class U extends r.XFAObject{constructor(t){super(p,"breakBefore",!0),this.id=t.id||"",this.leader=t.leader||"",this.startNew=(0,a.getInteger)({data:t.startNew,defaultValue:0,validate:t=>1===t}),this.target=t.target||"",this.targetType=(0,a.getStringOption)(t.targetType,["auto","contentArea","pageArea"]),this.trailer=t.trailer||"",this.use=t.use||"",this.usehref=t.usehref||"",this.script=null}[r.$toHTML](t){return this[r.$extra]={},a.HTMLResult.FAILURE}}class $ extends r.XFAObject{constructor(t){super(p,"button",!0),this.highlight=(0,a.getStringOption)(t.highlight,["inverted","none","outline","push"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}[r.$toHTML](t){const e=this[r.$getParent]()[r.$getParent](),i={name:"button",attributes:{id:this[r.$uid],class:["xfaButton"],style:{}},children:[]};for(const t of e.event.children){if("click"!==t.activity||!t.script)continue;const e=(0,h.recoverJsURL)(t.script[r.$content]);if(!e)continue;const n=(0,s.fixURL)(e.url);n&&i.children.push({name:"a",attributes:{id:"link"+this[r.$uid],href:n,newWindow:e.newWindow,class:["xfaLink"],style:{}},children:[]})}return a.HTMLResult.success(i)}}class H extends r.XFAObject{constructor(t){super(p,"calculate",!0),this.id=t.id||"",this.override=(0,a.getStringOption)(t.override,["disabled","error","ignore","warning"]),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.message=null,this.script=null}}class V extends r.XFAObject{constructor(t){super(p,"caption",!0),this.id=t.id||"",this.placement=(0,a.getStringOption)(t.placement,["left","bottom","inline","right","top"]),this.presence=(0,a.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.reserve=Math.ceil((0,a.getMeasurement)(t.reserve)),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.font=null,this.margin=null,this.para=null,this.value=null}[r.$setValue](t){b(this,t)}[r.$getExtra](t){if(!this[r.$extra]){let{width:e,height:i}=t;switch(this.placement){case"left":case"right":case"inline":e=this.reserve<=0?e:this.reserve;break;case"top":case"bottom":i=this.reserve<=0?i:this.reserve}this[r.$extra]=(0,s.layoutNode)(this,{width:e,height:i})}return this[r.$extra]}[r.$toHTML](t){if(!this.value)return a.HTMLResult.EMPTY;this[r.$pushPara]();const e=this.value[r.$toHTML](t).html;if(!e)return this[r.$popPara](),a.HTMLResult.EMPTY;const i=this.reserve;if(this.reserve<=0){const{w:e,h:i}=this[r.$getExtra](t);switch(this.placement){case"left":case"right":case"inline":this.reserve=e;break;case"top":case"bottom":this.reserve=i}}const n=[];"string"==typeof e?n.push({name:"#text",value:e}):n.push(e);const o=(0,s.toStyle)(this,"font","margin","visibility");switch(this.placement){case"left":case"right":this.reserve>0&&(o.width=(0,s.measureToString)(this.reserve));break;case"top":case"bottom":this.reserve>0&&(o.height=(0,s.measureToString)(this.reserve))}return(0,s.setPara)(this,null,e),this[r.$popPara](),this.reserve=i,a.HTMLResult.success({name:"div",attributes:{style:o,class:["xfaCaption"]},children:n})}}class q extends r.StringObject{constructor(t){super(p,"certificate"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class W extends r.XFAObject{constructor(t){super(p,"certificates",!0),this.credentialServerPolicy=(0,a.getStringOption)(t.credentialServerPolicy,["optional","required"]),this.id=t.id||"",this.url=t.url||"",this.urlPolicy=t.urlPolicy||"",this.use=t.use||"",this.usehref=t.usehref||"",this.encryption=null,this.issuers=null,this.keyUsage=null,this.oids=null,this.signing=null,this.subjectDNs=null}}class X extends r.XFAObject{constructor(t){super(p,"checkButton",!0),this.id=t.id||"",this.mark=(0,a.getStringOption)(t.mark,["default","check","circle","cross","diamond","square","star"]),this.shape=(0,a.getStringOption)(t.shape,["square","round"]),this.size=(0,a.getMeasurement)(t.size,"10pt"),this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.extras=null,this.margin=null}[r.$toHTML](t){const e=(0,s.toStyle)("margin"),i=(0,s.measureToString)(this.size);let n,o,l;e.width=e.height=i;const c=this[r.$getParent]()[r.$getParent](),h=c.items.children.length&&c.items.children[0][r.$toHTML]().html||[],u={on:(void 0!==h[0]?h[0]:"on").toString(),off:(void 0!==h[1]?h[1]:"off").toString()},p=(c.value&&c.value[r.$text]()||"off")===u.on||void 0,d=c[r.$getSubformParent](),f=c[r.$uid];let g;d instanceof wt?(l=d[r.$uid],n="radio",o="xfaRadio",g=d[r.$data]&&d[r.$data][r.$uid]||d[r.$uid]):(n="checkbox",o="xfaCheckbox",g=c[r.$data]&&c[r.$data][r.$uid]||c[r.$uid]);const m={name:"input",attributes:{class:[o],style:e,fieldId:f,dataId:g,type:n,checked:p,xfaOn:u.on,xfaOff:u.off,"aria-label":k(c)}};return l&&(m.attributes.name=l),a.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[m]})}}class G extends r.XFAObject{constructor(t){super(p,"choiceList",!0),this.commitOn=(0,a.getStringOption)(t.commitOn,["select","exit"]),this.id=t.id||"",this.open=(0,a.getStringOption)(t.open,["userControl","always","multiSelect","onEntry"]),this.textEntry=(0,a.getInteger)({data:t.textEntry,defaultValue:0,validate:t=>1===t}),this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.extras=null,this.margin=null}[r.$toHTML](t){const e=(0,s.toStyle)(this,"border","margin"),i=this[r.$getParent]()[r.$getParent](),n={fontSize:`calc(${i.font&&i.font.size||10}px * var(--zoom-factor))`},o=[];if(i.items.children.length>0){const t=i.items;let e=0,s=0;2===t.children.length&&(e=t.children[0].save,s=1-e);const a=t.children[e][r.$toHTML]().html,l=t.children[s][r.$toHTML]().html;let c=!1;const h=i.value&&i.value[r.$text]()||"";for(let t=0,e=a.length;t<e;t++){const e={name:"option",attributes:{value:l[t]||a[t],style:n},value:a[t]};l[t]===h&&(e.attributes.selected=c=!0),o.push(e)}c||o.splice(0,0,{name:"option",attributes:{hidden:!0,selected:!0},value:" "})}const l={class:["xfaSelect"],fieldId:i[r.$uid],dataId:i[r.$data]&&i[r.$data][r.$uid]||i[r.$uid],style:e,"aria-label":k(i)};return"multiSelect"===this.open&&(l.multiple=!0),a.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[{name:"select",children:o,attributes:l}]})}}class K extends r.XFAObject{constructor(t){super(p,"color",!0),this.cSpace=(0,a.getStringOption)(t.cSpace,["SRGB"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.value=t.value?(0,a.getColor)(t.value):"",this.extras=null}[r.$hasSettableValue](){return!1}[r.$toStyle](){return this.value?l.Util.makeHexColor(this.value.r,this.value.g,this.value.b):null}}class Y extends r.XFAObject{constructor(t){super(p,"comb"),this.id=t.id||"",this.numberOfCells=(0,a.getInteger)({data:t.numberOfCells,defaultValue:0,validate:t=>t>=0}),this.use=t.use||"",this.usehref=t.usehref||""}}class J extends r.XFAObject{constructor(t){super(p,"connect",!0),this.connection=t.connection||"",this.id=t.id||"",this.ref=t.ref||"",this.usage=(0,a.getStringOption)(t.usage,["exportAndImport","exportOnly","importOnly"]),this.use=t.use||"",this.usehref=t.usehref||"",this.picture=null}}class Z extends r.XFAObject{constructor(t){super(p,"contentArea",!0),this.h=(0,a.getMeasurement)(t.h),this.id=t.id||"",this.name=t.name||"",this.relevant=(0,a.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.w=(0,a.getMeasurement)(t.w),this.x=(0,a.getMeasurement)(t.x,"0pt"),this.y=(0,a.getMeasurement)(t.y,"0pt"),this.desc=null,this.extras=null}[r.$toHTML](t){const e={left:(0,s.measureToString)(this.x),top:(0,s.measureToString)(this.y),width:(0,s.measureToString)(this.w),height:(0,s.measureToString)(this.h)},i=["xfaContentarea"];return(0,s.isPrintOnly)(this)&&i.push("xfaPrintOnly"),a.HTMLResult.success({name:"div",children:[],attributes:{style:e,class:i,id:this[r.$uid]}})}}class Q extends r.XFAObject{constructor(t){super(p,"corner",!0),this.id=t.id||"",this.inverted=(0,a.getInteger)({data:t.inverted,defaultValue:0,validate:t=>1===t}),this.join=(0,a.getStringOption)(t.join,["square","round"]),this.presence=(0,a.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.radius=(0,a.getMeasurement)(t.radius),this.stroke=(0,a.getStringOption)(t.stroke,["solid","dashDot","dashDotDot","dashed","dotted","embossed","etched","lowered","raised"]),this.thickness=(0,a.getMeasurement)(t.thickness,"0.5pt"),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[r.$toStyle](){const t=(0,s.toStyle)(this,"visibility");return t.radius=(0,s.measureToString)("square"===this.join?0:this.radius),t}}class tt extends r.ContentObject{constructor(t){super(p,"date"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[r.$finalize](){const t=this[r.$content].trim();this[r.$content]=t?new Date(t):null}[r.$toHTML](t){return C(this[r.$content]?this[r.$content].toString():"")}}class et extends r.ContentObject{constructor(t){super(p,"dateTime"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[r.$finalize](){const t=this[r.$content].trim();this[r.$content]=t?new Date(t):null}[r.$toHTML](t){return C(this[r.$content]?this[r.$content].toString():"")}}class it extends r.XFAObject{constructor(t){super(p,"dateTimeEdit",!0),this.hScrollPolicy=(0,a.getStringOption)(t.hScrollPolicy,["auto","off","on"]),this.id=t.id||"",this.picker=(0,a.getStringOption)(t.picker,["host","none"]),this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.comb=null,this.extras=null,this.margin=null}[r.$toHTML](t){const e=(0,s.toStyle)(this,"border","font","margin"),i=this[r.$getParent]()[r.$getParent](),n={name:"input",attributes:{type:"text",fieldId:i[r.$uid],dataId:i[r.$data]&&i[r.$data][r.$uid]||i[r.$uid],class:["xfaTextfield"],style:e,"aria-label":k(i)}};return a.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[n]})}}class rt extends r.ContentObject{constructor(t){super(p,"decimal"),this.fracDigits=(0,a.getInteger)({data:t.fracDigits,defaultValue:2,validate:t=>!0}),this.id=t.id||"",this.leadDigits=(0,a.getInteger)({data:t.leadDigits,defaultValue:-1,validate:t=>!0}),this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[r.$finalize](){const t=parseFloat(this[r.$content].trim());this[r.$content]=isNaN(t)?null:t}[r.$toHTML](t){return C(null!==this[r.$content]?this[r.$content].toString():"")}}class nt extends r.XFAObject{constructor(t){super(p,"defaultUi",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}}class ot extends r.XFAObject{constructor(t){super(p,"desc",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.boolean=new r.XFAObjectArray,this.date=new r.XFAObjectArray,this.dateTime=new r.XFAObjectArray,this.decimal=new r.XFAObjectArray,this.exData=new r.XFAObjectArray,this.float=new r.XFAObjectArray,this.image=new r.XFAObjectArray,this.integer=new r.XFAObjectArray,this.text=new r.XFAObjectArray,this.time=new r.XFAObjectArray}}class st extends r.OptionObject{constructor(t){super(p,"digestMethod",["","SHA1","SHA256","SHA512","RIPEMD160"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||""}}class at extends r.XFAObject{constructor(t){super(p,"digestMethods",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.digestMethod=new r.XFAObjectArray}}class lt extends r.XFAObject{constructor(t){super(p,"draw",!0),this.anchorType=(0,a.getStringOption)(t.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,a.getInteger)({data:t.colSpan,defaultValue:1,validate:t=>t>=1||-1===t}),this.h=t.h?(0,a.getMeasurement)(t.h):"",this.hAlign=(0,a.getStringOption)(t.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=t.id||"",this.locale=t.locale||"",this.maxH=(0,a.getMeasurement)(t.maxH,"0pt"),this.maxW=(0,a.getMeasurement)(t.maxW,"0pt"),this.minH=(0,a.getMeasurement)(t.minH,"0pt"),this.minW=(0,a.getMeasurement)(t.minW,"0pt"),this.name=t.name||"",this.presence=(0,a.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,a.getRelevant)(t.relevant),this.rotate=(0,a.getInteger)({data:t.rotate,defaultValue:0,validate:t=>t%90==0}),this.use=t.use||"",this.usehref=t.usehref||"",this.w=t.w?(0,a.getMeasurement)(t.w):"",this.x=(0,a.getMeasurement)(t.x,"0pt"),this.y=(0,a.getMeasurement)(t.y,"0pt"),this.assist=null,this.border=null,this.caption=null,this.desc=null,this.extras=null,this.font=null,this.keep=null,this.margin=null,this.para=null,this.traversal=null,this.ui=null,this.value=null,this.setProperty=new r.XFAObjectArray}[r.$setValue](t){b(this,t)}[r.$toHTML](t){if(x(this),"hidden"===this.presence||"inactive"===this.presence)return a.HTMLResult.EMPTY;(0,s.fixDimensions)(this),this[r.$pushPara]();const e=this.w,i=this.h,{w:n,h:l,isBroken:c}=(0,s.layoutNode)(this,t);if(n&&""===this.w){if(c&&this[r.$getSubformParent]()[r.$isThereMoreWidth]())return this[r.$popPara](),a.HTMLResult.FAILURE;this.w=n}if(l&&""===this.h&&(this.h=l),A(this),!(0,o.checkDimensions)(this,t))return this.w=e,this.h=i,this[r.$popPara](),a.HTMLResult.FAILURE;_(this);const h=(0,s.toStyle)(this,"font","hAlign","dimensions","position","presence","rotate","anchorType","border","margin");(0,s.setMinMaxDimensions)(this,h),h.margin&&(h.padding=h.margin,delete h.margin);const u=["xfaDraw"];this.font&&u.push("xfaFont"),(0,s.isPrintOnly)(this)&&u.push("xfaPrintOnly");const p={style:h,id:this[r.$uid],class:u};this.name&&(p.xfaName=this.name);const d={name:"div",attributes:p,children:[]};S(this,p);const f=(0,s.computeBbox)(this,d,t),g=this.value?this.value[r.$toHTML](t).html:null;return null===g?(this.w=e,this.h=i,this[r.$popPara](),a.HTMLResult.success((0,s.createWrapper)(this,d),f)):(d.children.push(g),(0,s.setPara)(this,h,g),this.w=e,this.h=i,this[r.$popPara](),a.HTMLResult.success((0,s.createWrapper)(this,d),f))}}class ct extends r.XFAObject{constructor(t){super(p,"edge",!0),this.cap=(0,a.getStringOption)(t.cap,["square","butt","round"]),this.id=t.id||"",this.presence=(0,a.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.stroke=(0,a.getStringOption)(t.stroke,["solid","dashDot","dashDotDot","dashed","dotted","embossed","etched","lowered","raised"]),this.thickness=(0,a.getMeasurement)(t.thickness,"0.5pt"),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[r.$toStyle](){const t=(0,s.toStyle)(this,"visibility");if(Object.assign(t,{linecap:this.cap,width:(0,s.measureToString)(this.thickness),color:this.color?this.color[r.$toStyle]():"#000000",style:""}),"visible"!==this.presence)t.style="none";else switch(this.stroke){case"solid":t.style="solid";break;case"dashDot":case"dashDotDot":case"dashed":t.style="dashed";break;case"dotted":t.style="dotted";break;case"embossed":t.style="ridge";break;case"etched":t.style="groove";break;case"lowered":t.style="inset";break;case"raised":t.style="outset"}return t}}class ht extends r.OptionObject{constructor(t){super(p,"encoding",["adbe.x509.rsa_sha1","adbe.pkcs7.detached","adbe.pkcs7.sha1"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||""}}class ut extends r.XFAObject{constructor(t){super(p,"encodings",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.encoding=new r.XFAObjectArray}}class pt extends r.XFAObject{constructor(t){super(p,"encrypt",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.certificate=null}}class dt extends r.XFAObject{constructor(t){super(p,"encryptData",!0),this.id=t.id||"",this.operation=(0,a.getStringOption)(t.operation,["encrypt","decrypt"]),this.target=t.target||"",this.use=t.use||"",this.usehref=t.usehref||"",this.filter=null,this.manifest=null}}class ft extends r.XFAObject{constructor(t){super(p,"encryption",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.certificate=new r.XFAObjectArray}}class gt extends r.OptionObject{constructor(t){super(p,"encryptionMethod",["","AES256-CBC","TRIPLEDES-CBC","AES128-CBC","AES192-CBC"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||""}}class mt extends r.XFAObject{constructor(t){super(p,"encryptionMethods",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.encryptionMethod=new r.XFAObjectArray}}class yt extends r.XFAObject{constructor(t){super(p,"event",!0),this.activity=(0,a.getStringOption)(t.activity,["click","change","docClose","docReady","enter","exit","full","indexChange","initialize","mouseDown","mouseEnter","mouseExit","mouseUp","postExecute","postOpen","postPrint","postSave","postSign","postSubmit","preExecute","preOpen","prePrint","preSave","preSign","preSubmit","ready","validationState"]),this.id=t.id||"",this.listen=(0,a.getStringOption)(t.listen,["refOnly","refAndDescendents"]),this.name=t.name||"",this.ref=t.ref||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.encryptData=null,this.execute=null,this.script=null,this.signData=null,this.submit=null}}class vt extends r.ContentObject{constructor(t){super(p,"exData"),this.contentType=t.contentType||"",this.href=t.href||"",this.id=t.id||"",this.maxLength=(0,a.getInteger)({data:t.maxLength,defaultValue:-1,validate:t=>t>=-1}),this.name=t.name||"",this.rid=t.rid||"",this.transferEncoding=(0,a.getStringOption)(t.transferEncoding,["none","base64","package"]),this.use=t.use||"",this.usehref=t.usehref||""}[r.$isCDATAXml](){return"text/html"===this.contentType}[r.$onChild](t){return("text/html"===this.contentType&&t[r.$namespaceId]===n.NamespaceIds.xhtml.id||"text/xml"===this.contentType)&&(this[r.$content]=t,!0)}[r.$toHTML](t){return"text/html"===this.contentType&&this[r.$content]?this[r.$content][r.$toHTML](t):a.HTMLResult.EMPTY}}class bt extends r.XFAObject{constructor(t){super(p,"exObject",!0),this.archive=t.archive||"",this.classId=t.classId||"",this.codeBase=t.codeBase||"",this.codeType=t.codeType||"",this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.boolean=new r.XFAObjectArray,this.date=new r.XFAObjectArray,this.dateTime=new r.XFAObjectArray,this.decimal=new r.XFAObjectArray,this.exData=new r.XFAObjectArray,this.exObject=new r.XFAObjectArray,this.float=new r.XFAObjectArray,this.image=new r.XFAObjectArray,this.integer=new r.XFAObjectArray,this.text=new r.XFAObjectArray,this.time=new r.XFAObjectArray}}class wt extends r.XFAObject{constructor(t){super(p,"exclGroup",!0),this.access=(0,a.getStringOption)(t.access,["open","nonInteractive","protected","readOnly"]),this.accessKey=t.accessKey||"",this.anchorType=(0,a.getStringOption)(t.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,a.getInteger)({data:t.colSpan,defaultValue:1,validate:t=>t>=1||-1===t}),this.h=t.h?(0,a.getMeasurement)(t.h):"",this.hAlign=(0,a.getStringOption)(t.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=t.id||"",this.layout=(0,a.getStringOption)(t.layout,["position","lr-tb","rl-row","rl-tb","row","table","tb"]),this.maxH=(0,a.getMeasurement)(t.maxH,"0pt"),this.maxW=(0,a.getMeasurement)(t.maxW,"0pt"),this.minH=(0,a.getMeasurement)(t.minH,"0pt"),this.minW=(0,a.getMeasurement)(t.minW,"0pt"),this.name=t.name||"",this.presence=(0,a.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,a.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.w=t.w?(0,a.getMeasurement)(t.w):"",this.x=(0,a.getMeasurement)(t.x,"0pt"),this.y=(0,a.getMeasurement)(t.y,"0pt"),this.assist=null,this.bind=null,this.border=null,this.calculate=null,this.caption=null,this.desc=null,this.extras=null,this.margin=null,this.para=null,this.traversal=null,this.validate=null,this.connect=new r.XFAObjectArray,this.event=new r.XFAObjectArray,this.field=new r.XFAObjectArray,this.setProperty=new r.XFAObjectArray}[r.$isBindable](){return!0}[r.$hasSettableValue](){return!0}[r.$setValue](t){for(const e of this.field.children){if(!e.value){const t=new Ie({});e[r.$appendChild](t),e.value=t}e.value[r.$setValue](t)}}[r.$isThereMoreWidth](){return this.layout.endsWith("-tb")&&0===this[r.$extra].attempt&&this[r.$extra].numberInLine>0||this[r.$getParent]()[r.$isThereMoreWidth]()}[r.$isSplittable](){const t=this[r.$getSubformParent]();return!!t[r.$isSplittable]()&&(void 0!==this[r.$extra]._isSplittable?this[r.$extra]._isSplittable:"position"===this.layout||this.layout.includes("row")?(this[r.$extra]._isSplittable=!1,!1):!(t.layout&&t.layout.endsWith("-tb")&&0!==t[r.$extra].numberInLine||(this[r.$extra]._isSplittable=!0,0)))}[r.$flushHTML](){return(0,o.flushHTML)(this)}[r.$addHTML](t,e){(0,o.addHTML)(this,t,e)}[r.$getAvailableSpace](){return(0,o.getAvailableSpace)(this)}[r.$toHTML](t){if(x(this),"hidden"===this.presence||"inactive"===this.presence||0===this.h||0===this.w)return a.HTMLResult.EMPTY;(0,s.fixDimensions)(this);const e=[],i={id:this[r.$uid],class:[]};(0,s.setAccess)(this,i.class),this[r.$extra]||(this[r.$extra]=Object.create(null)),Object.assign(this[r.$extra],{children:e,attributes:i,attempt:0,line:null,numberInLine:0,availableSpace:{width:Math.min(this.w||1/0,t.width),height:Math.min(this.h||1/0,t.height)},width:0,height:0,prevHeight:0,currentWidth:0});const n=this[r.$isSplittable]();if(n||A(this),!(0,o.checkDimensions)(this,t))return a.HTMLResult.FAILURE;const l=new Set(["field"]);if(this.layout.includes("row")){const t=this[r.$getSubformParent]().columnWidths;Array.isArray(t)&&t.length>0&&(this[r.$extra].columnWidths=t,this[r.$extra].currentColumn=0)}const c=(0,s.toStyle)(this,"anchorType","dimensions","position","presence","border","margin","hAlign"),h=["xfaExclgroup"],u=(0,s.layoutClass)(this);u&&h.push(u),(0,s.isPrintOnly)(this)&&h.push("xfaPrintOnly"),i.style=c,i.class=h,this.name&&(i.xfaName=this.name),this[r.$pushPara]();const p="lr-tb"===this.layout||"rl-tb"===this.layout,d=p?2:1;for(;this[r.$extra].attempt<d;this[r.$extra].attempt++){p&&1===this[r.$extra].attempt&&(this[r.$extra].numberInLine=0);const t=this[r.$childrenToHTML]({filter:l,include:!0});if(t.success)break;if(t.isBreak())return this[r.$popPara](),t;if(p&&0===this[r.$extra].attempt&&0===this[r.$extra].numberInLine&&!this[r.$getTemplateRoot]()[r.$extra].noLayoutFailure){this[r.$extra].attempt=d;break}}if(this[r.$popPara](),n||_(this),this[r.$extra].attempt===d)return n||delete this[r.$extra],a.HTMLResult.FAILURE;let f=0,g=0;this.margin&&(f=this.margin.leftInset+this.margin.rightInset,g=this.margin.topInset+this.margin.bottomInset);const m=Math.max(this[r.$extra].width+f,this.w||0),y=Math.max(this[r.$extra].height+g,this.h||0),v=[this.x,this.y,m,y];""===this.w&&(c.width=(0,s.measureToString)(m)),""===this.h&&(c.height=(0,s.measureToString)(y));const b={name:"div",attributes:i,children:e};return S(this,i),delete this[r.$extra],a.HTMLResult.success((0,s.createWrapper)(this,b),v)}}class xt extends r.XFAObject{constructor(t){super(p,"execute"),this.connection=t.connection||"",this.executeType=(0,a.getStringOption)(t.executeType,["import","remerge"]),this.id=t.id||"",this.runAt=(0,a.getStringOption)(t.runAt,["client","both","server"]),this.use=t.use||"",this.usehref=t.usehref||""}}class St extends r.XFAObject{constructor(t){super(p,"extras",!0),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||"",this.boolean=new r.XFAObjectArray,this.date=new r.XFAObjectArray,this.dateTime=new r.XFAObjectArray,this.decimal=new r.XFAObjectArray,this.exData=new r.XFAObjectArray,this.extras=new r.XFAObjectArray,this.float=new r.XFAObjectArray,this.image=new r.XFAObjectArray,this.integer=new r.XFAObjectArray,this.text=new r.XFAObjectArray,this.time=new r.XFAObjectArray}}class kt extends r.XFAObject{constructor(t){super(p,"field",!0),this.access=(0,a.getStringOption)(t.access,["open","nonInteractive","protected","readOnly"]),this.accessKey=t.accessKey||"",this.anchorType=(0,a.getStringOption)(t.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,a.getInteger)({data:t.colSpan,defaultValue:1,validate:t=>t>=1||-1===t}),this.h=t.h?(0,a.getMeasurement)(t.h):"",this.hAlign=(0,a.getStringOption)(t.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=t.id||"",this.locale=t.locale||"",this.maxH=(0,a.getMeasurement)(t.maxH,"0pt"),this.maxW=(0,a.getMeasurement)(t.maxW,"0pt"),this.minH=(0,a.getMeasurement)(t.minH,"0pt"),this.minW=(0,a.getMeasurement)(t.minW,"0pt"),this.name=t.name||"",this.presence=(0,a.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,a.getRelevant)(t.relevant),this.rotate=(0,a.getInteger)({data:t.rotate,defaultValue:0,validate:t=>t%90==0}),this.use=t.use||"",this.usehref=t.usehref||"",this.w=t.w?(0,a.getMeasurement)(t.w):"",this.x=(0,a.getMeasurement)(t.x,"0pt"),this.y=(0,a.getMeasurement)(t.y,"0pt"),this.assist=null,this.bind=null,this.border=null,this.calculate=null,this.caption=null,this.desc=null,this.extras=null,this.font=null,this.format=null,this.items=new r.XFAObjectArray(2),this.keep=null,this.margin=null,this.para=null,this.traversal=null,this.ui=null,this.validate=null,this.value=null,this.bindItems=new r.XFAObjectArray,this.connect=new r.XFAObjectArray,this.event=new r.XFAObjectArray,this.setProperty=new r.XFAObjectArray}[r.$isBindable](){return!0}[r.$setValue](t){b(this,t)}[r.$toHTML](t){if(x(this),!this.ui){let t;switch(this.ui=new Me({}),this.ui[r.$globalData]=this[r.$globalData],this[r.$appendChild](this.ui),this.items.children.length){case 0:t=new Ce({}),this.ui.textEdit=t;break;case 1:t=new X({}),this.ui.checkButton=t;break;case 2:t=new G({}),this.ui.choiceList=t}this.ui[r.$appendChild](t)}if(!this.ui||"hidden"===this.presence||"inactive"===this.presence||0===this.h||0===this.w)return a.HTMLResult.EMPTY;this.caption&&delete this.caption[r.$extra],this[r.$pushPara]();const e=this.caption?this.caption[r.$toHTML](t).html:null,i=this.w,n=this.h;let l=0,h=0;this.margin&&(l=this.margin.leftInset+this.margin.rightInset,h=this.margin.topInset+this.margin.bottomInset);let u=null;if(""===this.w||""===this.h){let e=null,i=null,n=0,o=0;if(this.ui.checkButton)n=o=this.ui.checkButton.size;else{const{w:e,h:i}=(0,s.layoutNode)(this,t);null!==e?(n=e,o=i):o=(0,c.getMetrics)(this.font,!0).lineNoGap}if(u=y(this.ui[r.$getExtra]()),n+=u.w,o+=u.h,this.caption){const{w:s,h:l,isBroken:c}=this.caption[r.$getExtra](t);if(c&&this[r.$getSubformParent]()[r.$isThereMoreWidth]())return this[r.$popPara](),a.HTMLResult.FAILURE;switch(e=s,i=l,this.caption.placement){case"left":case"right":case"inline":e+=n;break;case"top":case"bottom":i+=o}}else e=n,i=o;e&&""===this.w&&(e+=l,this.w=Math.min(this.maxW<=0?1/0:this.maxW,this.minW+1<e?e:this.minW)),i&&""===this.h&&(i+=h,this.h=Math.min(this.maxH<=0?1/0:this.maxH,this.minH+1<i?i:this.minH))}if(this[r.$popPara](),(0,s.fixDimensions)(this),A(this),!(0,o.checkDimensions)(this,t))return this.w=i,this.h=n,this[r.$popPara](),a.HTMLResult.FAILURE;_(this);const p=(0,s.toStyle)(this,"font","dimensions","position","rotate","anchorType","presence","margin","hAlign");(0,s.setMinMaxDimensions)(this,p);const d=["xfaField"];this.font&&d.push("xfaFont"),(0,s.isPrintOnly)(this)&&d.push("xfaPrintOnly");const f={style:p,id:this[r.$uid],class:d};p.margin&&(p.padding=p.margin,delete p.margin),(0,s.setAccess)(this,d),this.name&&(f.xfaName=this.name);const g=[],m={name:"div",attributes:f,children:g};S(this,f);const v=this.border?this.border[r.$toStyle]():null,b=(0,s.computeBbox)(this,m,t),w=this.ui[r.$toHTML]().html;if(!w)return Object.assign(p,v),a.HTMLResult.success((0,s.createWrapper)(this,m),b);this[r.$tabIndex]&&(w.children&&w.children[0]?w.children[0].attributes.tabindex=this[r.$tabIndex]:w.attributes.tabindex=this[r.$tabIndex]),w.attributes.style||(w.attributes.style=Object.create(null));let k=null;if(this.ui.button?(1===w.children.length&&([k]=w.children.splice(0,1)),Object.assign(w.attributes.style,v)):Object.assign(p,v),g.push(w),this.value)if(this.ui.imageEdit)w.children.push(this.value[r.$toHTML]().html);else if(!this.ui.button){let t="";if(this.value.exData)t=this.value.exData[r.$text]();else if(this.value.text)t=this.value.text[r.$getExtra]();else{const e=this.value[r.$toHTML]().html;null!==e&&(t=e.children[0].value)}this.ui.textEdit&&this.value.text&&this.value.text.maxChars&&(w.children[0].attributes.maxLength=this.value.text.maxChars),t&&(this.ui.numericEdit&&(t=parseFloat(t),t=isNaN(t)?"":t.toString()),"textarea"===w.children[0].name?w.children[0].attributes.textContent=t:w.children[0].attributes.value=t)}if(!this.ui.imageEdit&&w.children&&w.children[0]&&this.h){u=u||y(this.ui[r.$getExtra]());let e=0;if(this.caption&&["top","bottom"].includes(this.caption.placement)){e=this.caption.reserve,e<=0&&(e=this.caption[r.$getExtra](t).h);const i=this.h-e-h-u.h;w.children[0].attributes.style.height=(0,s.measureToString)(i)}else w.children[0].attributes.style.height="100%"}if(k&&w.children.push(k),!e)return w.attributes.class&&w.attributes.class.push("xfaLeft"),this.w=i,this.h=n,a.HTMLResult.success((0,s.createWrapper)(this,m),b);if(this.ui.button)return p.padding&&delete p.padding,"div"===e.name&&(e.name="span"),w.children.push(e),a.HTMLResult.success(m,b);switch(this.ui.checkButton&&(e.attributes.class[0]="xfaCaptionForCheckButton"),w.attributes.class||(w.attributes.class=[]),w.children.splice(0,0,e),this.caption.placement){case"left":case"inline":w.attributes.class.push("xfaLeft");break;case"right":w.attributes.class.push("xfaRight");break;case"top":w.attributes.class.push("xfaTop");break;case"bottom":w.attributes.class.push("xfaBottom")}return this.w=i,this.h=n,a.HTMLResult.success((0,s.createWrapper)(this,m),b)}}e.Field=kt;class Ct extends r.XFAObject{constructor(t){super(p,"fill",!0),this.id=t.id||"",this.presence=(0,a.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null,this.linear=null,this.pattern=null,this.radial=null,this.solid=null,this.stipple=null}[r.$toStyle](){const t=this[r.$getParent](),e=t[r.$getParent]()[r.$getParent](),i=Object.create(null);let n="color",o=n;t instanceof B&&(n="background-color",o="background",e instanceof Me&&(i.backgroundColor="white")),(t instanceof ae||t instanceof M)&&(n=o="fill",i.fill="white");for(const t of Object.getOwnPropertyNames(this)){if("extras"===t||"color"===t)continue;const e=this[t];if(!(e instanceof r.XFAObject))continue;const s=e[r.$toStyle](this.color);return s&&(i[s.startsWith("#")?n:o]=s),i}if(this.color&&this.color.value){const t=this.color[r.$toStyle]();i[t.startsWith("#")?n:o]=t}return i}}class At extends r.XFAObject{constructor(t){super(p,"filter",!0),this.addRevocationInfo=(0,a.getStringOption)(t.addRevocationInfo,["","required","optional","none"]),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||"",this.version=(0,a.getInteger)({data:this.version,defaultValue:5,validate:t=>t>=1&&t<=5}),this.appearanceFilter=null,this.certificates=null,this.digestMethods=null,this.encodings=null,this.encryptionMethods=null,this.handler=null,this.lockDocument=null,this.mdp=null,this.reasons=null,this.timeStamp=null}}class _t extends r.ContentObject{constructor(t){super(p,"float"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[r.$finalize](){const t=parseFloat(this[r.$content].trim());this[r.$content]=isNaN(t)?null:t}[r.$toHTML](t){return C(null!==this[r.$content]?this[r.$content].toString():"")}}class Tt extends r.XFAObject{constructor(t){super(p,"font",!0),this.baselineShift=(0,a.getMeasurement)(t.baselineShift),this.fontHorizontalScale=(0,a.getFloat)({data:t.fontHorizontalScale,defaultValue:100,validate:t=>t>=0}),this.fontVerticalScale=(0,a.getFloat)({data:t.fontVerticalScale,defaultValue:100,validate:t=>t>=0}),this.id=t.id||"",this.kerningMode=(0,a.getStringOption)(t.kerningMode,["none","pair"]),this.letterSpacing=(0,a.getMeasurement)(t.letterSpacing,"0"),this.lineThrough=(0,a.getInteger)({data:t.lineThrough,defaultValue:0,validate:t=>1===t||2===t}),this.lineThroughPeriod=(0,a.getStringOption)(t.lineThroughPeriod,["all","word"]),this.overline=(0,a.getInteger)({data:t.overline,defaultValue:0,validate:t=>1===t||2===t}),this.overlinePeriod=(0,a.getStringOption)(t.overlinePeriod,["all","word"]),this.posture=(0,a.getStringOption)(t.posture,["normal","italic"]),this.size=(0,a.getMeasurement)(t.size,"10pt"),this.typeface=t.typeface||"Courier",this.underline=(0,a.getInteger)({data:t.underline,defaultValue:0,validate:t=>1===t||2===t}),this.underlinePeriod=(0,a.getStringOption)(t.underlinePeriod,["all","word"]),this.use=t.use||"",this.usehref=t.usehref||"",this.weight=(0,a.getStringOption)(t.weight,["normal","bold"]),this.extras=null,this.fill=null}[r.$clean](t){super[r.$clean](t),this[r.$globalData].usedTypefaces.add(this.typeface)}[r.$toStyle](){const t=(0,s.toStyle)(this,"fill"),e=t.color;return e&&("#000000"===e?delete t.color:e.startsWith("#")||(t.background=e,t.backgroundClip="text",t.color="transparent")),this.baselineShift&&(t.verticalAlign=(0,s.measureToString)(this.baselineShift)),t.fontKerning="none"===this.kerningMode?"none":"normal",t.letterSpacing=(0,s.measureToString)(this.letterSpacing),0!==this.lineThrough&&(t.textDecoration="line-through",2===this.lineThrough&&(t.textDecorationStyle="double")),0!==this.overline&&(t.textDecoration="overline",2===this.overline&&(t.textDecorationStyle="double")),t.fontStyle=this.posture,t.fontSize=(0,s.measureToString)(.99*this.size),(0,s.setFontFamily)(this,this,this[r.$globalData].fontFinder,t),0!==this.underline&&(t.textDecoration="underline",2===this.underline&&(t.textDecorationStyle="double")),t.fontWeight=this.weight,t}}class Ot extends r.XFAObject{constructor(t){super(p,"format",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.picture=null}}class Et extends r.StringObject{constructor(t){super(p,"handler"),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||""}}class Mt extends r.XFAObject{constructor(t){super(p,"hyphenation"),this.excludeAllCaps=(0,a.getInteger)({data:t.excludeAllCaps,defaultValue:0,validate:t=>1===t}),this.excludeInitialCap=(0,a.getInteger)({data:t.excludeInitialCap,defaultValue:0,validate:t=>1===t}),this.hyphenate=(0,a.getInteger)({data:t.hyphenate,defaultValue:0,validate:t=>1===t}),this.id=t.id||"",this.pushCharacterCount=(0,a.getInteger)({data:t.pushCharacterCount,defaultValue:3,validate:t=>t>=0}),this.remainCharacterCount=(0,a.getInteger)({data:t.remainCharacterCount,defaultValue:3,validate:t=>t>=0}),this.use=t.use||"",this.usehref=t.usehref||"",this.wordCharacterCount=(0,a.getInteger)({data:t.wordCharacterCount,defaultValue:7,validate:t=>t>=0})}}class Pt extends r.StringObject{constructor(t){super(p,"image"),this.aspect=(0,a.getStringOption)(t.aspect,["fit","actual","height","none","width"]),this.contentType=t.contentType||"",this.href=t.href||"",this.id=t.id||"",this.name=t.name||"",this.transferEncoding=(0,a.getStringOption)(t.transferEncoding,["base64","none","package"]),this.use=t.use||"",this.usehref=t.usehref||""}[r.$toHTML](){if(this.contentType&&!g.has(this.contentType.toLowerCase()))return a.HTMLResult.EMPTY;let t=this[r.$globalData].images&&this[r.$globalData].images.get(this.href);if(!t&&(this.href||!this[r.$content]))return a.HTMLResult.EMPTY;if(t||"base64"!==this.transferEncoding||(t=(0,l.stringToBytes)(atob(this[r.$content]))),!t)return a.HTMLResult.EMPTY;if(!this.contentType){for(const[e,i]of m)if(t.length>e.length&&e.every(((e,i)=>e===t[i]))){this.contentType=i;break}if(!this.contentType)return a.HTMLResult.EMPTY}const e=new Blob([t],{type:this.contentType});let i;switch(this.aspect){case"fit":case"actual":break;case"height":i={height:"100%",objectFit:"fill"};break;case"none":i={width:"100%",height:"100%",objectFit:"fill"};break;case"width":i={width:"100%",objectFit:"fill"}}const n=this[r.$getParent]();return a.HTMLResult.success({name:"img",attributes:{class:["xfaImage"],style:i,src:URL.createObjectURL(e),alt:n?k(n[r.$getParent]()):null}})}}class It extends r.XFAObject{constructor(t){super(p,"imageEdit",!0),this.data=(0,a.getStringOption)(t.data,["link","embed"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.extras=null,this.margin=null}[r.$toHTML](t){return"embed"===this.data?a.HTMLResult.success({name:"div",children:[],attributes:{}}):a.HTMLResult.EMPTY}}class Dt extends r.ContentObject{constructor(t){super(p,"integer"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[r.$finalize](){const t=parseInt(this[r.$content].trim(),10);this[r.$content]=isNaN(t)?null:t}[r.$toHTML](t){return C(null!==this[r.$content]?this[r.$content].toString():"")}}class Ft extends r.XFAObject{constructor(t){super(p,"issuers",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.certificate=new r.XFAObjectArray}}class Rt extends r.XFAObject{constructor(t){super(p,"items",!0),this.id=t.id||"",this.name=t.name||"",this.presence=(0,a.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.ref=t.ref||"",this.save=(0,a.getInteger)({data:t.save,defaultValue:0,validate:t=>1===t}),this.use=t.use||"",this.usehref=t.usehref||"",this.boolean=new r.XFAObjectArray,this.date=new r.XFAObjectArray,this.dateTime=new r.XFAObjectArray,this.decimal=new r.XFAObjectArray,this.exData=new r.XFAObjectArray,this.float=new r.XFAObjectArray,this.image=new r.XFAObjectArray,this.integer=new r.XFAObjectArray,this.text=new r.XFAObjectArray,this.time=new r.XFAObjectArray}[r.$toHTML](){const t=[];for(const e of this[r.$getChildren]())t.push(e[r.$text]());return a.HTMLResult.success(t)}}e.Items=Rt;class Lt extends r.XFAObject{constructor(t){super(p,"keep",!0),this.id=t.id||"";const e=["none","contentArea","pageArea"];this.intact=(0,a.getStringOption)(t.intact,e),this.next=(0,a.getStringOption)(t.next,e),this.previous=(0,a.getStringOption)(t.previous,e),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}}class Nt extends r.XFAObject{constructor(t){super(p,"keyUsage");const e=["","yes","no"];this.crlSign=(0,a.getStringOption)(t.crlSign,e),this.dataEncipherment=(0,a.getStringOption)(t.dataEncipherment,e),this.decipherOnly=(0,a.getStringOption)(t.decipherOnly,e),this.digitalSignature=(0,a.getStringOption)(t.digitalSignature,e),this.encipherOnly=(0,a.getStringOption)(t.encipherOnly,e),this.id=t.id||"",this.keyAgreement=(0,a.getStringOption)(t.keyAgreement,e),this.keyCertSign=(0,a.getStringOption)(t.keyCertSign,e),this.keyEncipherment=(0,a.getStringOption)(t.keyEncipherment,e),this.nonRepudiation=(0,a.getStringOption)(t.nonRepudiation,e),this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||""}}class Bt extends r.XFAObject{constructor(t){super(p,"line",!0),this.hand=(0,a.getStringOption)(t.hand,["even","left","right"]),this.id=t.id||"",this.slope=(0,a.getStringOption)(t.slope,["\\","/"]),this.use=t.use||"",this.usehref=t.usehref||"",this.edge=null}[r.$toHTML](){const t=this[r.$getParent]()[r.$getParent](),e=this.edge?this.edge:new ct({}),i=e[r.$toStyle](),n=Object.create(null),o="visible"===e.presence?e.thickness:0;let l,c,h,u;n.strokeWidth=(0,s.measureToString)(o),n.stroke=i.color;let p="100%",f="100%";t.w<=o?([l,c,h,u]=["50%",0,"50%","100%"],p=n.strokeWidth):t.h<=o?([l,c,h,u]=[0,"50%","100%","50%"],f=n.strokeWidth):"\\"===this.slope?[l,c,h,u]=[0,0,"100%","100%"]:[l,c,h,u]=[0,"100%","100%",0];const g={name:"svg",children:[{name:"line",attributes:{xmlns:d,x1:l,y1:c,x2:h,y2:u,style:n}}],attributes:{xmlns:d,width:p,height:f,style:{overflow:"visible"}}};return v(t)?a.HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[g]}):(g.attributes.style.position="absolute",a.HTMLResult.success(g))}}class jt extends r.XFAObject{constructor(t){super(p,"linear",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["toRight","toBottom","toLeft","toTop"]),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[r.$toStyle](t){return t=t?t[r.$toStyle]():"#FFFFFF",`linear-gradient(${this.type.replace(/([RBLT])/," $1").toLowerCase()}, ${t}, ${this.color?this.color[r.$toStyle]():"#000000"})`}}class zt extends r.ContentObject{constructor(t){super(p,"lockDocument"),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||""}[r.$finalize](){this[r.$content]=(0,a.getStringOption)(this[r.$content],["auto","0","1"])}}class Ut extends r.XFAObject{constructor(t){super(p,"manifest",!0),this.action=(0,a.getStringOption)(t.action,["include","all","exclude"]),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.ref=new r.XFAObjectArray}}class $t extends r.XFAObject{constructor(t){super(p,"margin",!0),this.bottomInset=(0,a.getMeasurement)(t.bottomInset,"0"),this.id=t.id||"",this.leftInset=(0,a.getMeasurement)(t.leftInset,"0"),this.rightInset=(0,a.getMeasurement)(t.rightInset,"0"),this.topInset=(0,a.getMeasurement)(t.topInset,"0"),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}[r.$toStyle](){return{margin:(0,s.measureToString)(this.topInset)+" "+(0,s.measureToString)(this.rightInset)+" "+(0,s.measureToString)(this.bottomInset)+" "+(0,s.measureToString)(this.leftInset)}}}class Ht extends r.XFAObject{constructor(t){super(p,"mdp"),this.id=t.id||"",this.permissions=(0,a.getInteger)({data:t.permissions,defaultValue:2,validate:t=>1===t||3===t}),this.signatureType=(0,a.getStringOption)(t.signatureType,["filler","author"]),this.use=t.use||"",this.usehref=t.usehref||""}}class Vt extends r.XFAObject{constructor(t){super(p,"medium"),this.id=t.id||"",this.imagingBBox=(0,a.getBBox)(t.imagingBBox),this.long=(0,a.getMeasurement)(t.long),this.orientation=(0,a.getStringOption)(t.orientation,["portrait","landscape"]),this.short=(0,a.getMeasurement)(t.short),this.stock=t.stock||"",this.trayIn=(0,a.getStringOption)(t.trayIn,["auto","delegate","pageFront"]),this.trayOut=(0,a.getStringOption)(t.trayOut,["auto","delegate"]),this.use=t.use||"",this.usehref=t.usehref||""}}class qt extends r.XFAObject{constructor(t){super(p,"message",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.text=new r.XFAObjectArray}}class Wt extends r.XFAObject{constructor(t){super(p,"numericEdit",!0),this.hScrollPolicy=(0,a.getStringOption)(t.hScrollPolicy,["auto","off","on"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.comb=null,this.extras=null,this.margin=null}[r.$toHTML](t){const e=(0,s.toStyle)(this,"border","font","margin"),i=this[r.$getParent]()[r.$getParent](),n={name:"input",attributes:{type:"text",fieldId:i[r.$uid],dataId:i[r.$data]&&i[r.$data][r.$uid]||i[r.$uid],class:["xfaTextfield"],style:e,"aria-label":k(i)}};return a.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[n]})}}class Xt extends r.XFAObject{constructor(t){super(p,"occur",!0),this.id=t.id||"",this.initial=""!==t.initial?(0,a.getInteger)({data:t.initial,defaultValue:"",validate:t=>!0}):"",this.max=""!==t.max?(0,a.getInteger)({data:t.max,defaultValue:1,validate:t=>!0}):"",this.min=""!==t.min?(0,a.getInteger)({data:t.min,defaultValue:1,validate:t=>!0}):"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}[r.$clean](){const t=this[r.$getParent](),e=this.min;""===this.min&&(this.min=t instanceof Jt||t instanceof Zt?0:1),""===this.max&&(this.max=""===e?t instanceof Jt||t instanceof Zt?-1:1:this.min),-1!==this.max&&this.max<this.min&&(this.max=this.min),""===this.initial&&(this.initial=t instanceof Se?1:this.min)}}class Gt extends r.StringObject{constructor(t){super(p,"oid"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class Kt extends r.XFAObject{constructor(t){super(p,"oids",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.oid=new r.XFAObjectArray}}class Yt extends r.XFAObject{constructor(t){super(p,"overflow"),this.id=t.id||"",this.leader=t.leader||"",this.target=t.target||"",this.trailer=t.trailer||"",this.use=t.use||"",this.usehref=t.usehref||""}[r.$getExtra](){if(!this[r.$extra]){const t=this[r.$getParent](),e=this[r.$getTemplateRoot](),i=e[r.$searchNode](this.target,t),n=e[r.$searchNode](this.leader,t),o=e[r.$searchNode](this.trailer,t);this[r.$extra]={target:i&&i[0]||null,leader:n&&n[0]||null,trailer:o&&o[0]||null,addLeader:!1,addTrailer:!1}}return this[r.$extra]}}class Jt extends r.XFAObject{constructor(t){super(p,"pageArea",!0),this.blankOrNotBlank=(0,a.getStringOption)(t.blankOrNotBlank,["any","blank","notBlank"]),this.id=t.id||"",this.initialNumber=(0,a.getInteger)({data:t.initialNumber,defaultValue:1,validate:t=>!0}),this.name=t.name||"",this.numbered=(0,a.getInteger)({data:t.numbered,defaultValue:1,validate:t=>!0}),this.oddOrEven=(0,a.getStringOption)(t.oddOrEven,["any","even","odd"]),this.pagePosition=(0,a.getStringOption)(t.pagePosition,["any","first","last","only","rest"]),this.relevant=(0,a.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.desc=null,this.extras=null,this.medium=null,this.occur=null,this.area=new r.XFAObjectArray,this.contentArea=new r.XFAObjectArray,this.draw=new r.XFAObjectArray,this.exclGroup=new r.XFAObjectArray,this.field=new r.XFAObjectArray,this.subform=new r.XFAObjectArray}[r.$isUsable](){return this[r.$extra]?!this.occur||-1===this.occur.max||this[r.$extra].numberOfUse<this.occur.max:(this[r.$extra]={numberOfUse:0},!0)}[r.$cleanPage](){delete this[r.$extra]}[r.$getNextPage](){this[r.$extra]||(this[r.$extra]={numberOfUse:0});const t=this[r.$getParent]();return"orderedOccurrence"===t.relation&&this[r.$isUsable]()?(this[r.$extra].numberOfUse+=1,this):t[r.$getNextPage]()}[r.$getAvailableSpace](){return this[r.$extra].space||{width:0,height:0}}[r.$toHTML](){this[r.$extra]||(this[r.$extra]={numberOfUse:1});const t=[];this[r.$extra].children=t;const e=Object.create(null);if(this.medium&&this.medium.short&&this.medium.long){if(e.width=(0,s.measureToString)(this.medium.short),e.height=(0,s.measureToString)(this.medium.long),this[r.$extra].space={width:this.medium.short,height:this.medium.long},"landscape"===this.medium.orientation){const t=e.width;e.width=e.height,e.height=t,this[r.$extra].space={width:this.medium.long,height:this.medium.short}}}else(0,l.warn)("XFA - No medium specified in pageArea: please file a bug.");return this[r.$childrenToHTML]({filter:new Set(["area","draw","field","subform"]),include:!0}),this[r.$childrenToHTML]({filter:new Set(["contentArea"]),include:!0}),a.HTMLResult.success({name:"div",children:t,attributes:{class:["xfaPage"],id:this[r.$uid],style:e,xfaName:this.name}})}}class Zt extends r.XFAObject{constructor(t){super(p,"pageSet",!0),this.duplexImposition=(0,a.getStringOption)(t.duplexImposition,["longEdge","shortEdge"]),this.id=t.id||"",this.name=t.name||"",this.relation=(0,a.getStringOption)(t.relation,["orderedOccurrence","duplexPaginated","simplexPaginated"]),this.relevant=(0,a.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.occur=null,this.pageArea=new r.XFAObjectArray,this.pageSet=new r.XFAObjectArray}[r.$cleanPage](){for(const t of this.pageArea.children)t[r.$cleanPage]();for(const t of this.pageSet.children)t[r.$cleanPage]()}[r.$isUsable](){return!this.occur||-1===this.occur.max||this[r.$extra].numberOfUse<this.occur.max}[r.$getNextPage](){if(this[r.$extra]||(this[r.$extra]={numberOfUse:1,pageIndex:-1,pageSetIndex:-1}),"orderedOccurrence"===this.relation){if(this[r.$extra].pageIndex+1<this.pageArea.children.length)return this[r.$extra].pageIndex+=1,this.pageArea.children[this[r.$extra].pageIndex][r.$getNextPage]();if(this[r.$extra].pageSetIndex+1<this.pageSet.children.length)return this[r.$extra].pageSetIndex+=1,this.pageSet.children[this[r.$extra].pageSetIndex][r.$getNextPage]();if(this[r.$isUsable]())return this[r.$extra].numberOfUse+=1,this[r.$extra].pageIndex=-1,this[r.$extra].pageSetIndex=-1,this[r.$getNextPage]();const t=this[r.$getParent]();return t instanceof Zt?t[r.$getNextPage]():(this[r.$cleanPage](),this[r.$getNextPage]())}const t=this[r.$getTemplateRoot]()[r.$extra].pageNumber,e=t%2==0?"even":"odd",i=0===t?"first":"rest";let n=this.pageArea.children.find((t=>t.oddOrEven===e&&t.pagePosition===i));return n||(n=this.pageArea.children.find((t=>"any"===t.oddOrEven&&t.pagePosition===i)),n||(n=this.pageArea.children.find((t=>"any"===t.oddOrEven&&"any"===t.pagePosition)),n||this.pageArea.children[0]))}}class Qt extends r.XFAObject{constructor(t){super(p,"para",!0),this.hAlign=(0,a.getStringOption)(t.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=t.id||"",this.lineHeight=t.lineHeight?(0,a.getMeasurement)(t.lineHeight,"0pt"):"",this.marginLeft=t.marginLeft?(0,a.getMeasurement)(t.marginLeft,"0pt"):"",this.marginRight=t.marginRight?(0,a.getMeasurement)(t.marginRight,"0pt"):"",this.orphans=(0,a.getInteger)({data:t.orphans,defaultValue:0,validate:t=>t>=0}),this.preserve=t.preserve||"",this.radixOffset=t.radixOffset?(0,a.getMeasurement)(t.radixOffset,"0pt"):"",this.spaceAbove=t.spaceAbove?(0,a.getMeasurement)(t.spaceAbove,"0pt"):"",this.spaceBelow=t.spaceBelow?(0,a.getMeasurement)(t.spaceBelow,"0pt"):"",this.tabDefault=t.tabDefault?(0,a.getMeasurement)(this.tabDefault):"",this.tabStops=(t.tabStops||"").trim().split(/\s+/).map(((t,e)=>e%2==1?(0,a.getMeasurement)(t):t)),this.textIndent=t.textIndent?(0,a.getMeasurement)(t.textIndent,"0pt"):"",this.use=t.use||"",this.usehref=t.usehref||"",this.vAlign=(0,a.getStringOption)(t.vAlign,["top","bottom","middle"]),this.widows=(0,a.getInteger)({data:t.widows,defaultValue:0,validate:t=>t>=0}),this.hyphenation=null}[r.$toStyle](){const t=(0,s.toStyle)(this,"hAlign");return""!==this.marginLeft&&(t.paddingLeft=(0,s.measureToString)(this.marginLeft)),""!==this.marginRight&&(t.paddingight=(0,s.measureToString)(this.marginRight)),""!==this.spaceAbove&&(t.paddingTop=(0,s.measureToString)(this.spaceAbove)),""!==this.spaceBelow&&(t.paddingBottom=(0,s.measureToString)(this.spaceBelow)),""!==this.textIndent&&(t.textIndent=(0,s.measureToString)(this.textIndent),(0,s.fixTextIndent)(t)),this.lineHeight>0&&(t.lineHeight=(0,s.measureToString)(this.lineHeight)),""!==this.tabDefault&&(t.tabSize=(0,s.measureToString)(this.tabDefault)),this.tabStops.length,this.hyphenatation&&Object.assign(t,this.hyphenatation[r.$toStyle]()),t}}class te extends r.XFAObject{constructor(t){super(p,"passwordEdit",!0),this.hScrollPolicy=(0,a.getStringOption)(t.hScrollPolicy,["auto","off","on"]),this.id=t.id||"",this.passwordChar=t.passwordChar||"*",this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.extras=null,this.margin=null}}class ee extends r.XFAObject{constructor(t){super(p,"pattern",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["crossHatch","crossDiagonal","diagonalLeft","diagonalRight","horizontal","vertical"]),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[r.$toStyle](t){t=t?t[r.$toStyle]():"#FFFFFF";const e=this.color?this.color[r.$toStyle]():"#000000",i="repeating-linear-gradient",n=`${t},${t} 5px,${e} 5px,${e} 10px`;switch(this.type){case"crossHatch":return`${i}(to top,${n}) ${i}(to right,${n})`;case"crossDiagonal":return`${i}(45deg,${n}) ${i}(-45deg,${n})`;case"diagonalLeft":return`${i}(45deg,${n})`;case"diagonalRight":return`${i}(-45deg,${n})`;case"horizontal":return`${i}(to top,${n})`;case"vertical":return`${i}(to right,${n})`}return""}}class ie extends r.StringObject{constructor(t){super(p,"picture"),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||""}}class re extends r.XFAObject{constructor(t){super(p,"proto",!0),this.appearanceFilter=new r.XFAObjectArray,this.arc=new r.XFAObjectArray,this.area=new r.XFAObjectArray,this.assist=new r.XFAObjectArray,this.barcode=new r.XFAObjectArray,this.bindItems=new r.XFAObjectArray,this.bookend=new r.XFAObjectArray,this.boolean=new r.XFAObjectArray,this.border=new r.XFAObjectArray,this.break=new r.XFAObjectArray,this.breakAfter=new r.XFAObjectArray,this.breakBefore=new r.XFAObjectArray,this.button=new r.XFAObjectArray,this.calculate=new r.XFAObjectArray,this.caption=new r.XFAObjectArray,this.certificate=new r.XFAObjectArray,this.certificates=new r.XFAObjectArray,this.checkButton=new r.XFAObjectArray,this.choiceList=new r.XFAObjectArray,this.color=new r.XFAObjectArray,this.comb=new r.XFAObjectArray,this.connect=new r.XFAObjectArray,this.contentArea=new r.XFAObjectArray,this.corner=new r.XFAObjectArray,this.date=new r.XFAObjectArray,this.dateTime=new r.XFAObjectArray,this.dateTimeEdit=new r.XFAObjectArray,this.decimal=new r.XFAObjectArray,this.defaultUi=new r.XFAObjectArray,this.desc=new r.XFAObjectArray,this.digestMethod=new r.XFAObjectArray,this.digestMethods=new r.XFAObjectArray,this.draw=new r.XFAObjectArray,this.edge=new r.XFAObjectArray,this.encoding=new r.XFAObjectArray,this.encodings=new r.XFAObjectArray,this.encrypt=new r.XFAObjectArray,this.encryptData=new r.XFAObjectArray,this.encryption=new r.XFAObjectArray,this.encryptionMethod=new r.XFAObjectArray,this.encryptionMethods=new r.XFAObjectArray,this.event=new r.XFAObjectArray,this.exData=new r.XFAObjectArray,this.exObject=new r.XFAObjectArray,this.exclGroup=new r.XFAObjectArray,this.execute=new r.XFAObjectArray,this.extras=new r.XFAObjectArray,this.field=new r.XFAObjectArray,this.fill=new r.XFAObjectArray,this.filter=new r.XFAObjectArray,this.float=new r.XFAObjectArray,this.font=new r.XFAObjectArray,this.format=new r.XFAObjectArray,this.handler=new r.XFAObjectArray,this.hyphenation=new r.XFAObjectArray,this.image=new r.XFAObjectArray,this.imageEdit=new r.XFAObjectArray,this.integer=new r.XFAObjectArray,this.issuers=new r.XFAObjectArray,this.items=new r.XFAObjectArray,this.keep=new r.XFAObjectArray,this.keyUsage=new r.XFAObjectArray,this.line=new r.XFAObjectArray,this.linear=new r.XFAObjectArray,this.lockDocument=new r.XFAObjectArray,this.manifest=new r.XFAObjectArray,this.margin=new r.XFAObjectArray,this.mdp=new r.XFAObjectArray,this.medium=new r.XFAObjectArray,this.message=new r.XFAObjectArray,this.numericEdit=new r.XFAObjectArray,this.occur=new r.XFAObjectArray,this.oid=new r.XFAObjectArray,this.oids=new r.XFAObjectArray,this.overflow=new r.XFAObjectArray,this.pageArea=new r.XFAObjectArray,this.pageSet=new r.XFAObjectArray,this.para=new r.XFAObjectArray,this.passwordEdit=new r.XFAObjectArray,this.pattern=new r.XFAObjectArray,this.picture=new r.XFAObjectArray,this.radial=new r.XFAObjectArray,this.reason=new r.XFAObjectArray,this.reasons=new r.XFAObjectArray,this.rectangle=new r.XFAObjectArray,this.ref=new r.XFAObjectArray,this.script=new r.XFAObjectArray,this.setProperty=new r.XFAObjectArray,this.signData=new r.XFAObjectArray,this.signature=new r.XFAObjectArray,this.signing=new r.XFAObjectArray,this.solid=new r.XFAObjectArray,this.speak=new r.XFAObjectArray,this.stipple=new r.XFAObjectArray,this.subform=new r.XFAObjectArray,this.subformSet=new r.XFAObjectArray,this.subjectDN=new r.XFAObjectArray,this.subjectDNs=new r.XFAObjectArray,this.submit=new r.XFAObjectArray,this.text=new r.XFAObjectArray,this.textEdit=new r.XFAObjectArray,this.time=new r.XFAObjectArray,this.timeStamp=new r.XFAObjectArray,this.toolTip=new r.XFAObjectArray,this.traversal=new r.XFAObjectArray,this.traverse=new r.XFAObjectArray,this.ui=new r.XFAObjectArray,this.validate=new r.XFAObjectArray,this.value=new r.XFAObjectArray,this.variables=new r.XFAObjectArray}}class ne extends r.XFAObject{constructor(t){super(p,"radial",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["toEdge","toCenter"]),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[r.$toStyle](t){t=t?t[r.$toStyle]():"#FFFFFF";const e=this.color?this.color[r.$toStyle]():"#000000";return`radial-gradient(circle at center, ${"toEdge"===this.type?`${t},${e}`:`${e},${t}`})`}}class oe extends r.StringObject{constructor(t){super(p,"reason"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class se extends r.XFAObject{constructor(t){super(p,"reasons",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.reason=new r.XFAObjectArray}}class ae extends r.XFAObject{constructor(t){super(p,"rectangle",!0),this.hand=(0,a.getStringOption)(t.hand,["even","left","right"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.corner=new r.XFAObjectArray(4),this.edge=new r.XFAObjectArray(4),this.fill=null}[r.$toHTML](){const t=this.edge.children.length?this.edge.children[0]:new ct({}),e=t[r.$toStyle](),i=Object.create(null);this.fill&&"visible"===this.fill.presence?Object.assign(i,this.fill[r.$toStyle]()):i.fill="transparent",i.strokeWidth=(0,s.measureToString)("visible"===t.presence?t.thickness:0),i.stroke=e.color;const n=(this.corner.children.length?this.corner.children[0]:new Q({}))[r.$toStyle](),o={name:"svg",children:[{name:"rect",attributes:{xmlns:d,width:"100%",height:"100%",x:0,y:0,rx:n.radius,ry:n.radius,style:i}}],attributes:{xmlns:d,style:{overflow:"visible"},width:"100%",height:"100%"}};return v(this[r.$getParent]()[r.$getParent]())?a.HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[o]}):(o.attributes.style.position="absolute",a.HTMLResult.success(o))}}class le extends r.StringObject{constructor(t){super(p,"ref"),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||""}}class ce extends r.StringObject{constructor(t){super(p,"script"),this.binding=t.binding||"",this.contentType=t.contentType||"",this.id=t.id||"",this.name=t.name||"",this.runAt=(0,a.getStringOption)(t.runAt,["client","both","server"]),this.use=t.use||"",this.usehref=t.usehref||""}}class he extends r.XFAObject{constructor(t){super(p,"setProperty"),this.connection=t.connection||"",this.ref=t.ref||"",this.target=t.target||""}}e.SetProperty=he;class ue extends r.XFAObject{constructor(t){super(p,"signData",!0),this.id=t.id||"",this.operation=(0,a.getStringOption)(t.operation,["sign","clear","verify"]),this.ref=t.ref||"",this.target=t.target||"",this.use=t.use||"",this.usehref=t.usehref||"",this.filter=null,this.manifest=null}}class pe extends r.XFAObject{constructor(t){super(p,"signature",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["PDF1.3","PDF1.6"]),this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.extras=null,this.filter=null,this.manifest=null,this.margin=null}}class de extends r.XFAObject{constructor(t){super(p,"signing",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.certificate=new r.XFAObjectArray}}class fe extends r.XFAObject{constructor(t){super(p,"solid",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}[r.$toStyle](t){return t?t[r.$toStyle]():"#FFFFFF"}}class ge extends r.StringObject{constructor(t){super(p,"speak"),this.disable=(0,a.getInteger)({data:t.disable,defaultValue:0,validate:t=>1===t}),this.id=t.id||"",this.priority=(0,a.getStringOption)(t.priority,["custom","caption","name","toolTip"]),this.rid=t.rid||"",this.use=t.use||"",this.usehref=t.usehref||""}}class me extends r.XFAObject{constructor(t){super(p,"stipple",!0),this.id=t.id||"",this.rate=(0,a.getInteger)({data:t.rate,defaultValue:50,validate:t=>t>=0&&t<=100}),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[r.$toStyle](t){const e=this.rate/100;return l.Util.makeHexColor(Math.round(t.value.r*(1-e)+this.value.r*e),Math.round(t.value.g*(1-e)+this.value.g*e),Math.round(t.value.b*(1-e)+this.value.b*e))}}class ye extends r.XFAObject{constructor(t){super(p,"subform",!0),this.access=(0,a.getStringOption)(t.access,["open","nonInteractive","protected","readOnly"]),this.allowMacro=(0,a.getInteger)({data:t.allowMacro,defaultValue:0,validate:t=>1===t}),this.anchorType=(0,a.getStringOption)(t.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,a.getInteger)({data:t.colSpan,defaultValue:1,validate:t=>t>=1||-1===t}),this.columnWidths=(t.columnWidths||"").trim().split(/\s+/).map((t=>"-1"===t?-1:(0,a.getMeasurement)(t))),this.h=t.h?(0,a.getMeasurement)(t.h):"",this.hAlign=(0,a.getStringOption)(t.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=t.id||"",this.layout=(0,a.getStringOption)(t.layout,["position","lr-tb","rl-row","rl-tb","row","table","tb"]),this.locale=t.locale||"",this.maxH=(0,a.getMeasurement)(t.maxH,"0pt"),this.maxW=(0,a.getMeasurement)(t.maxW,"0pt"),this.mergeMode=(0,a.getStringOption)(t.mergeMode,["consumeData","matchTemplate"]),this.minH=(0,a.getMeasurement)(t.minH,"0pt"),this.minW=(0,a.getMeasurement)(t.minW,"0pt"),this.name=t.name||"",this.presence=(0,a.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,a.getRelevant)(t.relevant),this.restoreState=(0,a.getStringOption)(t.restoreState,["manual","auto"]),this.scope=(0,a.getStringOption)(t.scope,["name","none"]),this.use=t.use||"",this.usehref=t.usehref||"",this.w=t.w?(0,a.getMeasurement)(t.w):"",this.x=(0,a.getMeasurement)(t.x,"0pt"),this.y=(0,a.getMeasurement)(t.y,"0pt"),this.assist=null,this.bind=null,this.bookend=null,this.border=null,this.break=null,this.calculate=null,this.desc=null,this.extras=null,this.keep=null,this.margin=null,this.occur=null,this.overflow=null,this.pageSet=null,this.para=null,this.traversal=null,this.validate=null,this.variables=null,this.area=new r.XFAObjectArray,this.breakAfter=new r.XFAObjectArray,this.breakBefore=new r.XFAObjectArray,this.connect=new r.XFAObjectArray,this.draw=new r.XFAObjectArray,this.event=new r.XFAObjectArray,this.exObject=new r.XFAObjectArray,this.exclGroup=new r.XFAObjectArray,this.field=new r.XFAObjectArray,this.proto=new r.XFAObjectArray,this.setProperty=new r.XFAObjectArray,this.subform=new r.XFAObjectArray,this.subformSet=new r.XFAObjectArray}[r.$getSubformParent](){const t=this[r.$getParent]();return t instanceof ve?t[r.$getSubformParent]():t}[r.$isBindable](){return!0}[r.$isThereMoreWidth](){return this.layout.endsWith("-tb")&&0===this[r.$extra].attempt&&this[r.$extra].numberInLine>0||this[r.$getParent]()[r.$isThereMoreWidth]()}*[r.$getContainedChildren](){yield*w(this)}[r.$flushHTML](){return(0,o.flushHTML)(this)}[r.$addHTML](t,e){(0,o.addHTML)(this,t,e)}[r.$getAvailableSpace](){return(0,o.getAvailableSpace)(this)}[r.$isSplittable](){const t=this[r.$getSubformParent]();return!!t[r.$isSplittable]()&&(void 0!==this[r.$extra]._isSplittable?this[r.$extra]._isSplittable:"position"===this.layout||this.layout.includes("row")||this.keep&&"none"!==this.keep.intact?(this[r.$extra]._isSplittable=!1,!1):!(t.layout&&t.layout.endsWith("-tb")&&0!==t[r.$extra].numberInLine||(this[r.$extra]._isSplittable=!0,0)))}[r.$toHTML](t){if(x(this),this.break){if("auto"!==this.break.after||""!==this.break.afterTarget){const t=new z({targetType:this.break.after,target:this.break.afterTarget,startNew:this.break.startNew.toString()});t[r.$globalData]=this[r.$globalData],this[r.$appendChild](t),this.breakAfter.push(t)}if("auto"!==this.break.before||""!==this.break.beforeTarget){const t=new U({targetType:this.break.before,target:this.break.beforeTarget,startNew:this.break.startNew.toString()});t[r.$globalData]=this[r.$globalData],this[r.$appendChild](t),this.breakBefore.push(t)}if(""!==this.break.overflowTarget){const t=new Yt({target:this.break.overflowTarget,leader:this.break.overflowLeader,trailer:this.break.overflowTrailer});t[r.$globalData]=this[r.$globalData],this[r.$appendChild](t),this.overflow.push(t)}this[r.$removeChild](this.break),this.break=null}if("hidden"===this.presence||"inactive"===this.presence)return a.HTMLResult.EMPTY;if((this.breakBefore.children.length>1||this.breakAfter.children.length>1)&&(0,l.warn)("XFA - Several breakBefore or breakAfter in subforms: please file a bug."),this.breakBefore.children.length>=1){const t=this.breakBefore.children[0];if(T(t))return a.HTMLResult.breakNode(t)}if(this[r.$extra]&&this[r.$extra].afterBreakAfter)return a.HTMLResult.EMPTY;(0,s.fixDimensions)(this);const e=[],i={id:this[r.$uid],class:[]};(0,s.setAccess)(this,i.class),this[r.$extra]||(this[r.$extra]=Object.create(null)),Object.assign(this[r.$extra],{children:e,line:null,attributes:i,attempt:0,numberInLine:0,availableSpace:{width:Math.min(this.w||1/0,t.width),height:Math.min(this.h||1/0,t.height)},width:0,height:0,prevHeight:0,currentWidth:0});const n=this[r.$getTemplateRoot](),c=n[r.$extra].noLayoutFailure,h=this[r.$isSplittable]();if(h||A(this),!(0,o.checkDimensions)(this,t))return a.HTMLResult.FAILURE;const u=new Set(["area","draw","exclGroup","field","subform","subformSet"]);if(this.layout.includes("row")){const t=this[r.$getSubformParent]().columnWidths;Array.isArray(t)&&t.length>0&&(this[r.$extra].columnWidths=t,this[r.$extra].currentColumn=0)}const p=(0,s.toStyle)(this,"anchorType","dimensions","position","presence","border","margin","hAlign"),d=["xfaSubform"],f=(0,s.layoutClass)(this);if(f&&d.push(f),i.style=p,i.class=d,this.name&&(i.xfaName=this.name),this.overflow){const e=this.overflow[r.$getExtra]();e.addLeader&&(e.addLeader=!1,O(this,e.leader,t))}this[r.$pushPara]();const g="lr-tb"===this.layout||"rl-tb"===this.layout,m=g?2:1;for(;this[r.$extra].attempt<m;this[r.$extra].attempt++){g&&1===this[r.$extra].attempt&&(this[r.$extra].numberInLine=0);const t=this[r.$childrenToHTML]({filter:u,include:!0});if(t.success)break;if(t.isBreak())return this[r.$popPara](),t;if(g&&0===this[r.$extra].attempt&&0===this[r.$extra].numberInLine&&!n[r.$extra].noLayoutFailure){this[r.$extra].attempt=m;break}}if(this[r.$popPara](),h||_(this),n[r.$extra].noLayoutFailure=c,this[r.$extra].attempt===m)return this.overflow&&(this[r.$getTemplateRoot]()[r.$extra].overflowNode=this.overflow),h||delete this[r.$extra],a.HTMLResult.FAILURE;if(this.overflow){const e=this.overflow[r.$getExtra]();e.addTrailer&&(e.addTrailer=!1,O(this,e.trailer,t))}let y=0,v=0;this.margin&&(y=this.margin.leftInset+this.margin.rightInset,v=this.margin.topInset+this.margin.bottomInset);const b=Math.max(this[r.$extra].width+y,this.w||0),w=Math.max(this[r.$extra].height+v,this.h||0),k=[this.x,this.y,b,w];if(""===this.w&&(p.width=(0,s.measureToString)(b)),""===this.h&&(p.height=(0,s.measureToString)(w)),("0px"===p.width||"0px"===p.height)&&0===e.length)return a.HTMLResult.EMPTY;const C={name:"div",attributes:i,children:e};S(this,i);const E=a.HTMLResult.success((0,s.createWrapper)(this,C),k);if(this.breakAfter.children.length>=1){const t=this.breakAfter.children[0];if(T(t))return this[r.$extra].afterBreakAfter=E,a.HTMLResult.breakNode(t)}return delete this[r.$extra],E}}class ve extends r.XFAObject{constructor(t){super(p,"subformSet",!0),this.id=t.id||"",this.name=t.name||"",this.relation=(0,a.getStringOption)(t.relation,["ordered","choice","unordered"]),this.relevant=(0,a.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.bookend=null,this.break=null,this.desc=null,this.extras=null,this.occur=null,this.overflow=null,this.breakAfter=new r.XFAObjectArray,this.breakBefore=new r.XFAObjectArray,this.subform=new r.XFAObjectArray,this.subformSet=new r.XFAObjectArray}*[r.$getContainedChildren](){yield*w(this)}[r.$getSubformParent](){let t=this[r.$getParent]();for(;!(t instanceof ye);)t=t[r.$getParent]();return t}[r.$isBindable](){return!0}}class be extends r.ContentObject{constructor(t){super(p,"subjectDN"),this.delimiter=t.delimiter||",",this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[r.$finalize](){this[r.$content]=new Map(this[r.$content].split(this.delimiter).map((t=>((t=t.split("=",2))[0]=t[0].trim(),t))))}}class we extends r.XFAObject{constructor(t){super(p,"subjectDNs",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.subjectDN=new r.XFAObjectArray}}class xe extends r.XFAObject{constructor(t){super(p,"submit",!0),this.embedPDF=(0,a.getInteger)({data:t.embedPDF,defaultValue:0,validate:t=>1===t}),this.format=(0,a.getStringOption)(t.format,["xdp","formdata","pdf","urlencoded","xfd","xml"]),this.id=t.id||"",this.target=t.target||"",this.textEncoding=(0,a.getKeyword)({data:t.textEncoding?t.textEncoding.toLowerCase():"",defaultValue:"",validate:t=>["utf-8","big-five","fontspecific","gbk","gb-18030","gb-2312","ksc-5601","none","shift-jis","ucs-2","utf-16"].includes(t)||t.match(/iso-8859-\d{2}/)}),this.use=t.use||"",this.usehref=t.usehref||"",this.xdpContent=t.xdpContent||"",this.encrypt=null,this.encryptData=new r.XFAObjectArray,this.signData=new r.XFAObjectArray}}class Se extends r.XFAObject{constructor(t){super(p,"template",!0),this.baseProfile=(0,a.getStringOption)(t.baseProfile,["full","interactiveForms"]),this.extras=null,this.subform=new r.XFAObjectArray}[r.$finalize](){0===this.subform.children.length&&(0,l.warn)("XFA - No subforms in template node."),this.subform.children.length>=2&&(0,l.warn)("XFA - Several subforms in template node: please file a bug."),this[r.$tabIndex]=5e3}[r.$isSplittable](){return!0}[r.$searchNode](t,e){return t.startsWith("#")?[this[r.$ids].get(t.slice(1))]:(0,u.searchNode)(this,e,t,!0,!0)}*[r.$toPages](){if(!this.subform.children.length)return a.HTMLResult.success({name:"div",children:[]});this[r.$extra]={overflowNode:null,firstUnsplittable:null,currentContentArea:null,currentPageArea:null,noLayoutFailure:!1,pageNumber:1,pagePosition:"first",oddOrEven:"odd",blankOrNotBlank:"nonBlank",paraStack:[]};const t=this.subform.children[0];t.pageSet[r.$cleanPage]();const e=t.pageSet.pageArea.children,i={name:"div",children:[]};let n=null,o=null,s=null;if(t.breakBefore.children.length>=1?(o=t.breakBefore.children[0],s=o.target):t.subform.children.length>=1&&t.subform.children[0].breakBefore.children.length>=1?(o=t.subform.children[0].breakBefore.children[0],s=o.target):t.break&&t.break.beforeTarget?(o=t.break,s=o.beforeTarget):t.subform.children.length>=1&&t.subform.children[0].break&&t.subform.children[0].break.beforeTarget&&(o=t.subform.children[0].break,s=o.beforeTarget),o){const t=this[r.$searchNode](s,o[r.$getParent]());t instanceof Jt&&(n=t,o[r.$extra]={})}n||(n=e[0]),n[r.$extra]={numberOfUse:1};const c=n[r.$getParent]();let h;c[r.$extra]={numberOfUse:1,pageIndex:c.pageArea.children.indexOf(n),pageSetIndex:0};let u=null,p=null,d=!0,f=0,g=0;for(;;){if(d)f=0;else if(i.children.pop(),3==++f)return(0,l.warn)("XFA - Something goes wrong: please file a bug."),i;h=null,this[r.$extra].currentPageArea=n;const e=n[r.$toHTML]().html;i.children.push(e),u&&(this[r.$extra].noLayoutFailure=!0,e.children.push(u[r.$toHTML](n[r.$extra].space).html),u=null),p&&(this[r.$extra].noLayoutFailure=!0,e.children.push(p[r.$toHTML](n[r.$extra].space).html),p=null);const o=n.contentArea.children,s=e.children.filter((t=>t.attributes.class.includes("xfaContentarea")));d=!1,this[r.$extra].firstUnsplittable=null,this[r.$extra].noLayoutFailure=!1;const a=e=>{const i=t[r.$flushHTML]();i&&(d=d||i.children&&0!==i.children.length,s[e].children.push(i))};for(let e=g,n=o.length;e<n;e++){const n=this[r.$extra].currentContentArea=o[e],l={width:n.w,height:n.h};g=0,u&&(s[e].children.push(u[r.$toHTML](l).html),u=null),p&&(s[e].children.push(p[r.$toHTML](l).html),p=null);const c=t[r.$toHTML](l);if(c.success)return c.html?(d=d||c.html.children&&0!==c.html.children.length,s[e].children.push(c.html)):!d&&i.children.length>1&&i.children.pop(),i;if(c.isBreak()){const t=c.breakNode;if(a(e),"auto"===t.targetType)continue;t.leader&&(u=this[r.$searchNode](t.leader,t[r.$getParent]()),u=u?u[0]:null),t.trailer&&(p=this[r.$searchNode](t.trailer,t[r.$getParent]()),p=p?p[0]:null),"pageArea"===t.targetType?(h=t[r.$extra].target,e=1/0):t[r.$extra].target?(h=t[r.$extra].target,g=t[r.$extra].index+1,e=1/0):e=t[r.$extra].index}else if(this[r.$extra].overflowNode){const t=this[r.$extra].overflowNode;this[r.$extra].overflowNode=null;const i=t[r.$getExtra](),n=i.target;i.addLeader=null!==i.leader,i.addTrailer=null!==i.trailer,a(e);const s=e;if(e=1/0,n instanceof Jt)h=n;else if(n instanceof Z){const t=o.findIndex((t=>t===n));-1!==t?t>s?e=t-1:g=t:(h=n[r.$getParent](),g=h.contentArea.children.findIndex((t=>t===n)))}}else a(e)}this[r.$extra].pageNumber+=1,h&&(h[r.$isUsable]()?h[r.$extra].numberOfUse+=1:h=null),n=h||n[r.$getNextPage](),yield null}}}e.Template=Se;class ke extends r.ContentObject{constructor(t){super(p,"text"),this.id=t.id||"",this.maxChars=(0,a.getInteger)({data:t.maxChars,defaultValue:0,validate:t=>t>=0}),this.name=t.name||"",this.rid=t.rid||"",this.use=t.use||"",this.usehref=t.usehref||""}[r.$acceptWhitespace](){return!0}[r.$onChild](t){return t[r.$namespaceId]===n.NamespaceIds.xhtml.id?(this[r.$content]=t,!0):((0,l.warn)(`XFA - Invalid content in Text: ${t[r.$nodeName]}.`),!1)}[r.$onText](t){this[r.$content]instanceof r.XFAObject||super[r.$onText](t)}[r.$finalize](){"string"==typeof this[r.$content]&&(this[r.$content]=this[r.$content].replace(/\r\n/g,"\n"))}[r.$getExtra](){return"string"==typeof this[r.$content]?this[r.$content].split(/[\u2029\u2028\n]/).reduce(((t,e)=>(e&&t.push(e),t)),[]).join("\n"):this[r.$content][r.$text]()}[r.$toHTML](t){if("string"==typeof this[r.$content]){const t=C(this[r.$content]).html;return this[r.$content].includes("\u2029")?(t.name="div",t.children=[],this[r.$content].split("\u2029").map((t=>t.split(/[\u2028\n]/).reduce(((t,e)=>(t.push({name:"span",value:e},{name:"br"}),t)),[]))).forEach((e=>{t.children.push({name:"p",children:e})}))):/[\u2028\n]/.test(this[r.$content])&&(t.name="div",t.children=[],this[r.$content].split(/[\u2028\n]/).forEach((e=>{t.children.push({name:"span",value:e},{name:"br"})}))),a.HTMLResult.success(t)}return this[r.$content][r.$toHTML](t)}}e.Text=ke;class Ce extends r.XFAObject{constructor(t){super(p,"textEdit",!0),this.allowRichText=(0,a.getInteger)({data:t.allowRichText,defaultValue:0,validate:t=>1===t}),this.hScrollPolicy=(0,a.getStringOption)(t.hScrollPolicy,["auto","off","on"]),this.id=t.id||"",this.multiLine=(0,a.getInteger)({data:t.multiLine,defaultValue:"",validate:t=>0===t||1===t}),this.use=t.use||"",this.usehref=t.usehref||"",this.vScrollPolicy=(0,a.getStringOption)(t.vScrollPolicy,["auto","off","on"]),this.border=null,this.comb=null,this.extras=null,this.margin=null}[r.$toHTML](t){const e=(0,s.toStyle)(this,"border","font","margin");let i;const n=this[r.$getParent]()[r.$getParent]();return""===this.multiLine&&(this.multiLine=n instanceof lt?1:0),i=1===this.multiLine?{name:"textarea",attributes:{dataId:n[r.$data]&&n[r.$data][r.$uid]||n[r.$uid],fieldId:n[r.$uid],class:["xfaTextfield"],style:e,"aria-label":k(n)}}:{name:"input",attributes:{type:"text",dataId:n[r.$data]&&n[r.$data][r.$uid]||n[r.$uid],fieldId:n[r.$uid],class:["xfaTextfield"],style:e,"aria-label":k(n)}},a.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[i]})}}class Ae extends r.StringObject{constructor(t){super(p,"time"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[r.$finalize](){const t=this[r.$content].trim();this[r.$content]=t?new Date(t):null}[r.$toHTML](t){return C(this[r.$content]?this[r.$content].toString():"")}}class _e extends r.XFAObject{constructor(t){super(p,"timeStamp"),this.id=t.id||"",this.server=t.server||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||""}}class Te extends r.StringObject{constructor(t){super(p,"toolTip"),this.id=t.id||"",this.rid=t.rid||"",this.use=t.use||"",this.usehref=t.usehref||""}}class Oe extends r.XFAObject{constructor(t){super(p,"traversal",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.traverse=new r.XFAObjectArray}}class Ee extends r.XFAObject{constructor(t){super(p,"traverse",!0),this.id=t.id||"",this.operation=(0,a.getStringOption)(t.operation,["next","back","down","first","left","right","up"]),this.ref=t.ref||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.script=null}get name(){return this.operation}[r.$isTransparent](){return!1}}class Me extends r.XFAObject{constructor(t){super(p,"ui",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.picture=null,this.barcode=null,this.button=null,this.checkButton=null,this.choiceList=null,this.dateTimeEdit=null,this.defaultUi=null,this.imageEdit=null,this.numericEdit=null,this.passwordEdit=null,this.signature=null,this.textEdit=null}[r.$getExtra](){if(void 0===this[r.$extra]){for(const t of Object.getOwnPropertyNames(this)){if("extras"===t||"picture"===t)continue;const e=this[t];if(e instanceof r.XFAObject)return this[r.$extra]=e,e}this[r.$extra]=null}return this[r.$extra]}[r.$toHTML](t){const e=this[r.$getExtra]();return e?e[r.$toHTML](t):a.HTMLResult.EMPTY}}class Pe extends r.XFAObject{constructor(t){super(p,"validate",!0),this.formatTest=(0,a.getStringOption)(t.formatTest,["warning","disabled","error"]),this.id=t.id||"",this.nullTest=(0,a.getStringOption)(t.nullTest,["disabled","error","warning"]),this.scriptTest=(0,a.getStringOption)(t.scriptTest,["error","disabled","warning"]),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.message=null,this.picture=null,this.script=null}}class Ie extends r.XFAObject{constructor(t){super(p,"value",!0),this.id=t.id||"",this.override=(0,a.getInteger)({data:t.override,defaultValue:0,validate:t=>1===t}),this.relevant=(0,a.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.arc=null,this.boolean=null,this.date=null,this.dateTime=null,this.decimal=null,this.exData=null,this.float=null,this.image=null,this.integer=null,this.line=null,this.rectangle=null,this.text=null,this.time=null}[r.$setValue](t){const e=this[r.$getParent]();if(e instanceof kt&&e.ui&&e.ui.imageEdit)return this.image||(this.image=new Pt({}),this[r.$appendChild](this.image)),void(this.image[r.$content]=t[r.$content]);const i=t[r.$nodeName];if(null===this[i]){for(const t of Object.getOwnPropertyNames(this)){const e=this[t];e instanceof r.XFAObject&&(this[t]=null,this[r.$removeChild](e))}this[t[r.$nodeName]]=t,this[r.$appendChild](t)}else this[i][r.$content]=t[r.$content]}[r.$text](){if(this.exData)return"string"==typeof this.exData[r.$content]?this.exData[r.$content].trim():this.exData[r.$content][r.$text]().trim();for(const t of Object.getOwnPropertyNames(this)){if("image"===t)continue;const e=this[t];if(e instanceof r.XFAObject)return(e[r.$content]||"").toString().trim()}return null}[r.$toHTML](t){for(const e of Object.getOwnPropertyNames(this)){const i=this[e];if(i instanceof r.XFAObject)return i[r.$toHTML](t)}return a.HTMLResult.EMPTY}}e.Value=Ie;class De extends r.XFAObject{constructor(t){super(p,"variables",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.boolean=new r.XFAObjectArray,this.date=new r.XFAObjectArray,this.dateTime=new r.XFAObjectArray,this.decimal=new r.XFAObjectArray,this.exData=new r.XFAObjectArray,this.float=new r.XFAObjectArray,this.image=new r.XFAObjectArray,this.integer=new r.XFAObjectArray,this.manifest=new r.XFAObjectArray,this.script=new r.XFAObjectArray,this.text=new r.XFAObjectArray,this.time=new r.XFAObjectArray}[r.$isTransparent](){return!0}}class Fe{static[n.$buildXFAObject](t,e){if(Fe.hasOwnProperty(t)){const i=Fe[t](e);return i[r.$setSetAttributes](e),i}}static appearanceFilter(t){return new E(t)}static arc(t){return new M(t)}static area(t){return new P(t)}static assist(t){return new I(t)}static barcode(t){return new D(t)}static bind(t){return new F(t)}static bindItems(t){return new R(t)}static bookend(t){return new L(t)}static boolean(t){return new N(t)}static border(t){return new B(t)}static break(t){return new j(t)}static breakAfter(t){return new z(t)}static breakBefore(t){return new U(t)}static button(t){return new $(t)}static calculate(t){return new H(t)}static caption(t){return new V(t)}static certificate(t){return new q(t)}static certificates(t){return new W(t)}static checkButton(t){return new X(t)}static choiceList(t){return new G(t)}static color(t){return new K(t)}static comb(t){return new Y(t)}static connect(t){return new J(t)}static contentArea(t){return new Z(t)}static corner(t){return new Q(t)}static date(t){return new tt(t)}static dateTime(t){return new et(t)}static dateTimeEdit(t){return new it(t)}static decimal(t){return new rt(t)}static defaultUi(t){return new nt(t)}static desc(t){return new ot(t)}static digestMethod(t){return new st(t)}static digestMethods(t){return new at(t)}static draw(t){return new lt(t)}static edge(t){return new ct(t)}static encoding(t){return new ht(t)}static encodings(t){return new ut(t)}static encrypt(t){return new pt(t)}static encryptData(t){return new dt(t)}static encryption(t){return new ft(t)}static encryptionMethod(t){return new gt(t)}static encryptionMethods(t){return new mt(t)}static event(t){return new yt(t)}static exData(t){return new vt(t)}static exObject(t){return new bt(t)}static exclGroup(t){return new wt(t)}static execute(t){return new xt(t)}static extras(t){return new St(t)}static field(t){return new kt(t)}static fill(t){return new Ct(t)}static filter(t){return new At(t)}static float(t){return new _t(t)}static font(t){return new Tt(t)}static format(t){return new Ot(t)}static handler(t){return new Et(t)}static hyphenation(t){return new Mt(t)}static image(t){return new Pt(t)}static imageEdit(t){return new It(t)}static integer(t){return new Dt(t)}static issuers(t){return new Ft(t)}static items(t){return new Rt(t)}static keep(t){return new Lt(t)}static keyUsage(t){return new Nt(t)}static line(t){return new Bt(t)}static linear(t){return new jt(t)}static lockDocument(t){return new zt(t)}static manifest(t){return new Ut(t)}static margin(t){return new $t(t)}static mdp(t){return new Ht(t)}static medium(t){return new Vt(t)}static message(t){return new qt(t)}static numericEdit(t){return new Wt(t)}static occur(t){return new Xt(t)}static oid(t){return new Gt(t)}static oids(t){return new Kt(t)}static overflow(t){return new Yt(t)}static pageArea(t){return new Jt(t)}static pageSet(t){return new Zt(t)}static para(t){return new Qt(t)}static passwordEdit(t){return new te(t)}static pattern(t){return new ee(t)}static picture(t){return new ie(t)}static proto(t){return new re(t)}static radial(t){return new ne(t)}static reason(t){return new oe(t)}static reasons(t){return new se(t)}static rectangle(t){return new ae(t)}static ref(t){return new le(t)}static script(t){return new ce(t)}static setProperty(t){return new he(t)}static signData(t){return new ue(t)}static signature(t){return new pe(t)}static signing(t){return new de(t)}static solid(t){return new fe(t)}static speak(t){return new ge(t)}static stipple(t){return new me(t)}static subform(t){return new ye(t)}static subformSet(t){return new ve(t)}static subjectDN(t){return new be(t)}static subjectDNs(t){return new we(t)}static submit(t){return new xe(t)}static template(t){return new Se(t)}static text(t){return new ke(t)}static textEdit(t){return new Ce(t)}static time(t){return new Ae(t)}static timeStamp(t){return new _e(t)}static toolTip(t){return new Te(t)}static traversal(t){return new Oe(t)}static traverse(t){return new Ee(t)}static ui(t){return new Me(t)}static validate(t){return new Pe(t)}static value(t){return new Ie(t)}static variables(t){return new De(t)}}e.TemplateNamespace=Fe},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.addHTML=function(t,e,i){const s=t[r.$extra],a=s.availableSpace,[l,c,h,u]=i;switch(t.layout){case"position":s.width=Math.max(s.width,l+h),s.height=Math.max(s.height,c+u),s.children.push(e);break;case"lr-tb":case"rl-tb":s.line&&1!==s.attempt||(s.line=o(t,[]),s.children.push(s.line),s.numberInLine=0),s.numberInLine+=1,s.line.children.push(e),0===s.attempt?(s.currentWidth+=h,s.height=Math.max(s.height,s.prevHeight+u)):(s.currentWidth=h,s.prevHeight=s.height,s.height+=u,s.attempt=0),s.width=Math.max(s.width,s.currentWidth);break;case"rl-row":case"row":{s.children.push(e),s.width+=h,s.height=Math.max(s.height,u);const t=(0,n.measureToString)(s.height);for(const e of s.children)e.attributes.style.height=t;break}case"table":case"tb":s.width=Math.min(a.width,Math.max(s.width,h)),s.height+=u,s.children.push(e)}},e.checkDimensions=function(t,e){if(null===t[r.$getTemplateRoot]()[r.$extra].firstUnsplittable)return!0;if(0===t.w||0===t.h)return!0;const i=t[r.$getSubformParent](),n=i[r.$extra]&&i[r.$extra].attempt||0,[,o,s,a]=function(t){let e,i,r=""===t.w?NaN:t.w,n=""===t.h?NaN:t.h,[o,s]=[0,0];switch(t.anchorType||""){case"bottomCenter":[o,s]=[r/2,n];break;case"bottomLeft":[o,s]=[0,n];break;case"bottomRight":[o,s]=[r,n];break;case"middleCenter":[o,s]=[r/2,n/2];break;case"middleLeft":[o,s]=[0,n/2];break;case"middleRight":[o,s]=[r,n/2];break;case"topCenter":[o,s]=[r/2,0];break;case"topRight":[o,s]=[r,0]}switch(t.rotate||0){case 0:[e,i]=[-o,-s];break;case 90:[e,i]=[-s,o],[r,n]=[n,-r];break;case 180:[e,i]=[o,s],[r,n]=[-r,-n];break;case 270:[e,i]=[s,-o],[r,n]=[-n,r]}return[t.x+e+Math.min(0,r),t.y+i+Math.min(0,n),Math.abs(r),Math.abs(n)]}(t);switch(i.layout){case"lr-tb":case"rl-tb":return 0===n?t[r.$getTemplateRoot]()[r.$extra].noLayoutFailure?""!==t.w?Math.round(s-e.width)<=2:e.width>2:!(""!==t.h&&Math.round(a-e.height)>2)&&(""!==t.w?Math.round(s-e.width)<=2||0===i[r.$extra].numberInLine&&e.height>2:e.width>2):!!t[r.$getTemplateRoot]()[r.$extra].noLayoutFailure||!(""!==t.h&&Math.round(a-e.height)>2)&&(""===t.w||Math.round(s-e.width)<=2||!i[r.$isThereMoreWidth]())&&e.height>2;case"table":case"tb":return!!t[r.$getTemplateRoot]()[r.$extra].noLayoutFailure||(""===t.h||t[r.$isSplittable]()?(""===t.w||Math.round(s-e.width)<=2||!i[r.$isThereMoreWidth]())&&e.height>2:Math.round(a-e.height)<=2);case"position":if(t[r.$getTemplateRoot]()[r.$extra].noLayoutFailure)return!0;if(""===t.h||Math.round(a+o-e.height)<=2)return!0;const l=t[r.$getTemplateRoot]()[r.$extra].currentContentArea;return a+o>l.h;case"rl-row":case"row":return!!t[r.$getTemplateRoot]()[r.$extra].noLayoutFailure||""===t.h||Math.round(a-e.height)<=2;default:return!0}},e.flushHTML=function(t){if(!t[r.$extra])return null;const e={name:"div",attributes:t[r.$extra].attributes,children:t[r.$extra].children};if(t[r.$extra].failingNode){const i=t[r.$extra].failingNode[r.$flushHTML]();i&&(t.layout.endsWith("-tb")?e.children.push(o(t,[i])):e.children.push(i))}return 0===e.children.length?null:e},e.getAvailableSpace=function(t){const e=t[r.$extra].availableSpace,i=t.margin?t.margin.topInset+t.margin.bottomInset:0,n=t.margin?t.margin.leftInset+t.margin.rightInset:0;switch(t.layout){case"lr-tb":case"rl-tb":return 0===t[r.$extra].attempt?{width:e.width-n-t[r.$extra].currentWidth,height:e.height-i-t[r.$extra].prevHeight}:{width:e.width-n,height:e.height-i-t[r.$extra].height};case"rl-row":case"row":return{width:t[r.$extra].columnWidths.slice(t[r.$extra].currentColumn).reduce(((t,e)=>t+e)),height:e.height-n};case"table":case"tb":return{width:e.width-n,height:e.height-i-t[r.$extra].height};default:return e}};var r=i(77),n=i(84);function o(t,e){return{name:"div",attributes:{class:["lr-tb"===t.layout?"xfaLr":"xfaRl"]},children:e}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.computeBbox=function(t,e,i){let n;if(""!==t.w&&""!==t.h)n=[t.x,t.y,t.w,t.h];else{if(!i)return null;let o=t.w;if(""===o){if(0===t.maxW){const e=t[r.$getSubformParent]();o="position"===e.layout&&""!==e.w?0:t.minW}else o=Math.min(t.maxW,i.width);e.attributes.style.width=l(o)}let s=t.h;if(""===s){if(0===t.maxH){const e=t[r.$getSubformParent]();s="position"===e.layout&&""!==e.h?0:t.minH}else s=Math.min(t.maxH,i.height);e.attributes.style.height=l(s)}n=[t.x,t.y,o,s]}return n},e.createWrapper=function(t,e){const{attributes:i}=e,{style:n}=i,o={name:"div",attributes:{class:["xfaWrapper"],style:Object.create(null)},children:[]};if(i.class.push("xfaWrapped"),t.border){const{widths:i,insets:s}=t.border[r.$extra];let a,l,c=s[0],h=s[3];const p=s[0]+s[2],d=s[1]+s[3];switch(t.border.hand){case"even":c-=i[0]/2,h-=i[3]/2,a=`calc(100% + ${(i[1]+i[3])/2-d}px)`,l=`calc(100% + ${(i[0]+i[2])/2-p}px)`;break;case"left":c-=i[0],h-=i[3],a=`calc(100% + ${i[1]+i[3]-d}px)`,l=`calc(100% + ${i[0]+i[2]-p}px)`;break;case"right":a=d?`calc(100% - ${d}px)`:"100%",l=p?`calc(100% - ${p}px)`:"100%"}const f=["xfaBorder"];u(t.border)&&f.push("xfaPrintOnly");const g={name:"div",attributes:{class:f,style:{top:`${c}px`,left:`${h}px`,width:a,height:l}},children:[]};for(const t of["border","borderWidth","borderColor","borderRadius","borderStyle"])void 0!==n[t]&&(g.attributes.style[t]=n[t],delete n[t]);o.children.push(g,e)}else o.children.push(e);for(const t of["background","backgroundClip","top","left","width","height","minWidth","minHeight","maxWidth","maxHeight","transform","transformOrigin","visibility"])void 0!==n[t]&&(o.attributes.style[t]=n[t],delete n[t]);return"absolute"===n.position?o.attributes.style.position="absolute":o.attributes.style.position="relative",delete n.position,n.alignSelf&&(o.attributes.style.alignSelf=n.alignSelf,delete n.alignSelf),o},e.fixDimensions=function(t){const e=t[r.$getSubformParent]();if(e.layout&&e.layout.includes("row")){const i=e[r.$extra],n=t.colSpan;let o;o=-1===n?i.columnWidths.slice(i.currentColumn).reduce(((t,e)=>t+e),0):i.columnWidths.slice(i.currentColumn,i.currentColumn+n).reduce(((t,e)=>t+e),0),isNaN(o)||(t.w=o)}e.layout&&"position"!==e.layout&&(t.x=t.y=0),"table"===t.layout&&""===t.w&&Array.isArray(t.columnWidths)&&(t.w=t.columnWidths.reduce(((t,e)=>t+e),0))},e.fixTextIndent=function(t){const e=(0,o.getMeasurement)(t.textIndent,"0px");if(e>=0)return;const i="padding"+("left"==("right"===t.textAlign?"right":"left")?"Left":"Right"),r=(0,o.getMeasurement)(t[i],"0px");t[i]=r-e+"px"},e.fixURL=function(t){const e=(0,n.createValidAbsoluteUrl)(t,null,{addDefaultProtocol:!0,tryConvertEncoding:!0});return e?e.href:null},e.isPrintOnly=u,e.layoutClass=function(t){switch(t.layout){case"position":default:return"xfaPosition";case"lr-tb":return"xfaLrTb";case"rl-row":return"xfaRlRow";case"rl-tb":return"xfaRlTb";case"row":return"xfaRow";case"table":return"xfaTable";case"tb":return"xfaTb"}},e.layoutNode=function(t,e){let i=null,n=null,o=!1;if((!t.w||!t.h)&&t.value){let s=0,a=0;t.margin&&(s=t.margin.leftInset+t.margin.rightInset,a=t.margin.topInset+t.margin.bottomInset);let l=null,c=null;t.para&&(c=Object.create(null),l=""===t.para.lineHeight?null:t.para.lineHeight,c.top=""===t.para.spaceAbove?0:t.para.spaceAbove,c.bottom=""===t.para.spaceBelow?0:t.para.spaceBelow,c.left=""===t.para.marginLeft?0:t.para.marginLeft,c.right=""===t.para.marginRight?0:t.para.marginRight);let u=t.font;if(!u){const e=t[r.$getTemplateRoot]();let i=t[r.$getParent]();for(;i&&i!==e;){if(i.font){u=i.font;break}i=i[r.$getParent]()}}const p=(t.w?t.w:e.width)-s,d=t[r.$globalData].fontFinder;if(t.value.exData&&t.value.exData[r.$content]&&"text/html"===t.value.exData.contentType){const e=h(t.value.exData[r.$content],u,c,l,d,p);n=e.width,i=e.height,o=e.isBroken}else{const e=t.value[r.$text]();if(e){const t=h(e,u,c,l,d,p);n=t.width,i=t.height,o=t.isBroken}}null===n||t.w||(n+=s),null===i||t.h||(i+=a)}return{w:n,h:i,isBroken:o}},e.measureToString=l,e.setAccess=function(t,e){switch(t.access){case"nonInteractive":e.push("xfaNonInteractive");break;case"readOnly":e.push("xfaReadOnly");break;case"protected":e.push("xfaDisabled")}},e.setFontFamily=function(t,e,i,r){if(!i)return void delete r.fontFamily;const n=(0,o.stripQuotes)(t.typeface);r.fontFamily=`"${n}"`;const a=i.find(n);if(a){const{fontFamily:i}=a.regular.cssFontInfo;i!==n&&(r.fontFamily=`"${i}"`);const o=p(e);if(o&&""!==o.lineHeight)return;if(r.lineHeight)return;const l=(0,s.selectFont)(t,a);l&&(r.lineHeight=Math.max(1.2,l.lineHeight))}},e.setMinMaxDimensions=function(t,e){"position"===t[r.$getSubformParent]().layout&&(t.minW>0&&(e.minWidth=l(t.minW)),t.maxW>0&&(e.maxWidth=l(t.maxW)),t.minH>0&&(e.minHeight=l(t.minH)),t.maxH>0&&(e.maxHeight=l(t.maxH)))},e.setPara=function(t,e,i){if(i.attributes.class&&i.attributes.class.includes("xfaRich")){e&&(""===t.h&&(e.height="auto"),""===t.w&&(e.width="auto"));const n=p(t);if(n){const t=i.attributes.style;switch(t.display="flex",t.flexDirection="column",n.vAlign){case"top":t.justifyContent="start";break;case"bottom":t.justifyContent="end";break;case"middle":t.justifyContent="center"}const e=n[r.$toStyle]();for(const[i,r]of Object.entries(e))i in t||(t[i]=r)}}},e.toStyle=function(t,...e){const i=Object.create(null);for(const o of e){const e=t[o];if(null!==e)if(c.hasOwnProperty(o))c[o](t,i);else if(e instanceof r.XFAObject){const t=e[r.$toStyle]();t?Object.assign(i,t):(0,n.warn)(`(DEBUG) - XFA - style for ${o} not implemented yet`)}}return i};var r=i(77),n=i(2),o=i(78),s=i(85),a=i(86);function l(t){return"string"==typeof t?"0px":Number.isInteger(t)?`${t}px`:`${t.toFixed(2)}px`}const c={anchorType(t,e){const i=t[r.$getSubformParent]();if(i&&(!i.layout||"position"===i.layout))switch("transform"in e||(e.transform=""),t.anchorType){case"bottomCenter":e.transform+="translate(-50%, -100%)";break;case"bottomLeft":e.transform+="translate(0,-100%)";break;case"bottomRight":e.transform+="translate(-100%,-100%)";break;case"middleCenter":e.transform+="translate(-50%,-50%)";break;case"middleLeft":e.transform+="translate(0,-50%)";break;case"middleRight":e.transform+="translate(-100%,-50%)";break;case"topCenter":e.transform+="translate(-50%,0)";break;case"topRight":e.transform+="translate(-100%,0)"}},dimensions(t,e){const i=t[r.$getSubformParent]();let n=t.w;const o=t.h;if(i.layout&&i.layout.includes("row")){const e=i[r.$extra],o=t.colSpan;let s;-1===o?(s=e.columnWidths.slice(e.currentColumn).reduce(((t,e)=>t+e),0),e.currentColumn=0):(s=e.columnWidths.slice(e.currentColumn,e.currentColumn+o).reduce(((t,e)=>t+e),0),e.currentColumn=(e.currentColumn+t.colSpan)%e.columnWidths.length),isNaN(s)||(n=t.w=s)}e.width=""!==n?l(n):"auto",e.height=""!==o?l(o):"auto"},position(t,e){const i=t[r.$getSubformParent]();i&&i.layout&&"position"!==i.layout||(e.position="absolute",e.left=l(t.x),e.top=l(t.y))},rotate(t,e){t.rotate&&("transform"in e||(e.transform=""),e.transform+=`rotate(-${t.rotate}deg)`,e.transformOrigin="top left")},presence(t,e){switch(t.presence){case"invisible":e.visibility="hidden";break;case"hidden":case"inactive":e.display="none"}},hAlign(t,e){if("para"===t[r.$nodeName])switch(t.hAlign){case"justifyAll":e.textAlign="justify-all";break;case"radix":e.textAlign="left";break;default:e.textAlign=t.hAlign}else switch(t.hAlign){case"left":e.alignSelf="start";break;case"center":e.alignSelf="center";break;case"right":e.alignSelf="end"}},margin(t,e){t.margin&&(e.margin=t.margin[r.$toStyle]().margin)}};function h(t,e,i,n,o,s){const l=new a.TextMeasure(e,i,n,o);return"string"==typeof t?l.addString(t):t[r.$pushGlyphs](l),l.compute(s)}function u(t){return t.relevant.length>0&&!t.relevant[0].excluded&&"print"===t.relevant[0].viewname}function p(t){const e=t[r.$getTemplateRoot]()[r.$extra].paraStack;return e.length?e[e.length-1]:null}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontFinder=void 0,e.getMetrics=function(t,e=!1){let i=null;if(t){const e=(0,n.stripQuotes)(t.typeface),o=t[r.$globalData].fontFinder.find(e);i=s(t,o)}if(!i)return{lineHeight:12,lineGap:2,lineNoGap:10};const o=t.size||10,a=i.lineHeight?Math.max(e?0:1.2,i.lineHeight):1.2,l=void 0===i.lineGap?.2:i.lineGap;return{lineHeight:a*o,lineGap:l*o,lineNoGap:Math.max(1,a-l)*o}},e.selectFont=s;var r=i(77),n=i(78),o=i(2);function s(t,e){return"italic"===t.posture?"bold"===t.weight?e.bolditalic:e.italic:"bold"===t.weight?e.bold:e.regular}e.FontFinder=class{constructor(t){this.fonts=new Map,this.cache=new Map,this.warned=new Set,this.defaultFont=null,this.add(t)}add(t,e=null){for(const e of t)this.addPdfFont(e);for(const t of this.fonts.values())t.regular||(t.regular=t.italic||t.bold||t.bolditalic);if(!e||0===e.size)return;const i=this.fonts.get("PdfJS-Fallback-PdfJS-XFA");for(const t of e)this.fonts.set(t,i)}addPdfFont(t){const e=t.cssFontInfo,i=e.fontFamily;let r=this.fonts.get(i);r||(r=Object.create(null),this.fonts.set(i,r),this.defaultFont||(this.defaultFont=r));let n="";const o=parseFloat(e.fontWeight);0!==parseFloat(e.italicAngle)?n=o>=700?"bolditalic":"italic":o>=700&&(n="bold"),n||((t.name.includes("Bold")||t.psName&&t.psName.includes("Bold"))&&(n="bold"),(t.name.includes("Italic")||t.name.endsWith("It")||t.psName&&(t.psName.includes("Italic")||t.psName.endsWith("It")))&&(n+="italic")),n||(n="regular"),r[n]=t}getDefault(){return this.defaultFont}find(t,e=!0){let i=this.fonts.get(t)||this.cache.get(t);if(i)return i;const r=/,|-|_| |bolditalic|bold|italic|regular|it/gi;let n=t.replace(r,"");if(i=this.fonts.get(n),i)return this.cache.set(t,i),i;n=n.toLowerCase();const s=[];for(const[t,e]of this.fonts.entries())t.replace(r,"").toLowerCase().startsWith(n)&&s.push(e);if(0===s.length)for(const[,t]of this.fonts.entries())t.regular.name&&t.regular.name.replace(r,"").toLowerCase().startsWith(n)&&s.push(t);if(0===s.length){n=n.replace(/psmt|mt/gi,"");for(const[t,e]of this.fonts.entries())t.replace(r,"").toLowerCase().startsWith(n)&&s.push(e)}if(0===s.length)for(const t of this.fonts.values())t.regular.name&&t.regular.name.replace(r,"").toLowerCase().startsWith(n)&&s.push(t);return s.length>=1?(1!==s.length&&e&&(0,o.warn)(`XFA - Too many choices to guess the correct font: ${t}`),this.cache.set(t,s[0]),s[0]):(e&&!this.warned.has(t)&&(this.warned.add(t),(0,o.warn)(`XFA - Cannot find the font: ${t}`)),null)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextMeasure=void 0;var r=i(85);class n{constructor(t,e,i,n){if(this.lineHeight=i,this.paraMargin=e||{top:0,bottom:0,left:0,right:0},!t)return void([this.pdfFont,this.xfaFont]=this.defaultFont(n));this.xfaFont={typeface:t.typeface,posture:t.posture,weight:t.weight,size:t.size,letterSpacing:t.letterSpacing};const o=n.find(t.typeface);o?(this.pdfFont=(0,r.selectFont)(t,o),this.pdfFont||([this.pdfFont,this.xfaFont]=this.defaultFont(n))):[this.pdfFont,this.xfaFont]=this.defaultFont(n)}defaultFont(t){const e=t.find("Helvetica",!1)||t.find("Myriad Pro",!1)||t.find("Arial",!1)||t.getDefault();if(e&&e.regular){const t=e.regular;return[t,{typeface:t.cssFontInfo.fontFamily,posture:"normal",weight:"normal",size:10,letterSpacing:0}]}return[null,{typeface:"Courier",posture:"normal",weight:"normal",size:10,letterSpacing:0}]}}class o{constructor(t,e,i,r){this.fontFinder=r,this.stack=[new n(t,e,i,r)]}pushData(t,e,i){const r=this.stack[this.stack.length-1];for(const e of["typeface","posture","weight","size","letterSpacing"])t[e]||(t[e]=r.xfaFont[e]);for(const t of["top","bottom","left","right"])isNaN(e[t])&&(e[t]=r.paraMargin[t]);const o=new n(t,e,i||r.lineHeight,this.fontFinder);o.pdfFont||(o.pdfFont=r.pdfFont),this.stack.push(o)}popFont(){this.stack.pop()}topFont(){return this.stack[this.stack.length-1]}}e.TextMeasure=class{constructor(t,e,i,r){this.glyphs=[],this.fontSelector=new o(t,e,i,r),this.extraHeight=0}pushData(t,e,i){this.fontSelector.pushData(t,e,i)}popFont(t){return this.fontSelector.popFont()}addPara(){const t=this.fontSelector.topFont();this.extraHeight+=t.paraMargin.top+t.paraMargin.bottom}addString(t){if(!t)return;const e=this.fontSelector.topFont(),i=e.xfaFont.size;if(e.pdfFont){const r=e.xfaFont.letterSpacing,n=e.pdfFont,o=n.lineHeight||1.2,s=e.lineHeight||Math.max(1.2,o)*i,a=o-(void 0===n.lineGap?.2:n.lineGap),l=Math.max(1,a)*i,c=i/1e3,h=n.defaultWidth||n.charsToGlyphs(" ")[0].width;for(const e of t.split(/[\u2029\n]/)){const t=n.encodeString(e).join(""),i=n.charsToGlyphs(t);for(const t of i){const e=t.width||h;this.glyphs.push([e*c+r,s,l,t.unicode,!1])}this.glyphs.push([0,0,0,"\n",!0])}this.glyphs.pop()}else{for(const e of t.split(/[\u2029\n]/)){for(const t of e.split(""))this.glyphs.push([i,1.2*i,i,t,!1]);this.glyphs.push([0,0,0,"\n",!0])}this.glyphs.pop()}}compute(t){let e=-1,i=0,r=0,n=0,o=0,s=0,a=!1,l=!0;for(let c=0,h=this.glyphs.length;c<h;c++){const[h,u,p,d,f]=this.glyphs[c],g=" "===d,m=l?p:u;f?(r=Math.max(r,o),o=0,n+=s,s=m,e=-1,i=0,l=!1):g?o+h>t?(r=Math.max(r,o),o=0,n+=s,s=m,e=-1,i=0,a=!0,l=!1):(s=Math.max(m,s),i=o,o+=h,e=c):o+h>t?(n+=s,s=m,-1!==e?(c=e,r=Math.max(r,i),o=0,e=-1,i=0):(r=Math.max(r,o),o=h),a=!0,l=!1):(o+=h,s=Math.max(m,s))}return r=Math.max(r,o),n+=s+this.extraHeight,{width:1.02*r,height:n,isBroken:a}}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DataHandler=void 0;var r=i(77);e.DataHandler=class{constructor(t,e){this.data=e,this.dataset=t.datasets||null}serialize(t){const e=[[-1,this.data[r.$getChildren]()]];for(;e.length>0;){const i=e[e.length-1],[n,o]=i;if(n+1===o.length){e.pop();continue}const s=o[++i[0]],a=t.get(s[r.$uid]);if(a)s[r.$setValue](a);else{const e=s[r.$getAttributes]();for(const i of e.values()){const e=t.get(i[r.$uid]);if(e){i[r.$setValue](e);break}}}const l=s[r.$getChildren]();l.length>0&&e.push([-1,l])}const i=['<xfa:datasets xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/">'];if(this.dataset)for(const t of this.dataset[r.$getChildren]())"data"!==t[r.$nodeName]&&t[r.$toString](i);return this.data[r.$toString](i),i.push("</xfa:datasets>"),i.join("")}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XFAParser=void 0;var r=i(77),n=i(70),o=i(89),s=i(2);class a extends n.XMLParserBase{constructor(t=null,e=!1){super(),this._builder=new o.Builder(t),this._stack=[],this._globalData={usedTypefaces:new Set},this._ids=new Map,this._current=this._builder.buildRoot(this._ids),this._errorCode=n.XMLParserErrorCode.NoError,this._whiteRegex=/^\s+$/,this._nbsps=/\xa0+/g,this._richText=e}parse(t){if(this.parseXml(t),this._errorCode===n.XMLParserErrorCode.NoError)return this._current[r.$finalize](),this._current.element}onText(t){t=t.replace(this._nbsps,(t=>t.slice(1)+" ")),this._richText||this._current[r.$acceptWhitespace]()?this._current[r.$onText](t,this._richText):this._whiteRegex.test(t)||this._current[r.$onText](t.trim())}onCdata(t){this._current[r.$onText](t)}_mkAttributes(t,e){let i=null,n=null;const o=Object.create({});for(const{name:a,value:l}of t)if("xmlns"===a)i?(0,s.warn)(`XFA - multiple namespace definition in <${e}>`):i=l;else if(a.startsWith("xmlns:")){const t=a.substring("xmlns:".length);n||(n=[]),n.push({prefix:t,value:l})}else{const t=a.indexOf(":");if(-1===t)o[a]=l;else{let e=o[r.$nsAttributes];e||(e=o[r.$nsAttributes]=Object.create(null));const[i,n]=[a.slice(0,t),a.slice(t+1)];let s=e[i];s||(s=e[i]=Object.create(null)),s[n]=l}}return[i,n,o]}_getNameAndPrefix(t,e){const i=t.indexOf(":");return-1===i?[t,null]:[t.substring(i+1),e?"":t.substring(0,i)]}onBeginElement(t,e,i){const[n,o,s]=this._mkAttributes(e,t),[a,l]=this._getNameAndPrefix(t,this._builder.isNsAgnostic()),c=this._builder.build({nsPrefix:l,name:a,attributes:s,namespace:n,prefixes:o});if(c[r.$globalData]=this._globalData,i)return c[r.$finalize](),this._current[r.$onChild](c)&&c[r.$setId](this._ids),void c[r.$clean](this._builder);this._stack.push(this._current),this._current=c}onEndElement(t){const e=this._current;if(e[r.$isCDATAXml]()&&"string"==typeof e[r.$content]){const t=new a;t._globalData=this._globalData;const i=t.parse(e[r.$content]);e[r.$content]=null,e[r.$onChild](i)}e[r.$finalize](),this._current=this._stack.pop(),this._current[r.$onChild](e)&&e[r.$setId](this._ids),e[r.$clean](this._builder)}onError(t){this._errorCode=t}}e.XFAParser=a},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Builder=void 0;var r=i(79),n=i(77),o=i(90),s=i(82),a=i(99),l=i(2);class c extends n.XFAObject{constructor(t){super(-1,"root",Object.create(null)),this.element=null,this[n.$ids]=t}[n.$onChild](t){return this.element=t,!0}[n.$finalize](){super[n.$finalize](),this.element.template instanceof s.Template&&(this[n.$ids].set(n.$root,this.element),this.element.template[n.$resolvePrototypes](this[n.$ids]),this.element.template[n.$ids]=this[n.$ids])}}class h extends n.XFAObject{constructor(){super(-1,"",Object.create(null))}[n.$onChild](t){return!1}}e.Builder=class{constructor(t=null){this._namespaceStack=[],this._nsAgnosticLevel=0,this._namespacePrefixes=new Map,this._namespaces=new Map,this._nextNsId=Math.max(...Object.values(r.NamespaceIds).map((({id:t})=>t))),this._currentNamespace=t||new a.UnknownNamespace(++this._nextNsId)}buildRoot(t){return new c(t)}build({nsPrefix:t,name:e,attributes:i,namespace:s,prefixes:a}){const l=null!==s;if(l&&(this._namespaceStack.push(this._currentNamespace),this._currentNamespace=this._searchNamespace(s)),a&&this._addNamespacePrefix(a),i.hasOwnProperty(n.$nsAttributes)){const t=o.NamespaceSetUp.datasets,e=i[n.$nsAttributes];let r=null;for(const[i,n]of Object.entries(e))if(this._getNamespaceToUse(i)===t){r={xfa:n};break}r?i[n.$nsAttributes]=r:delete i[n.$nsAttributes]}const c=this._getNamespaceToUse(t),u=c&&c[r.$buildXFAObject](e,i)||new h;return u[n.$isNsAgnostic]()&&this._nsAgnosticLevel++,(l||a||u[n.$isNsAgnostic]())&&(u[n.$cleanup]={hasNamespace:l,prefixes:a,nsAgnostic:u[n.$isNsAgnostic]()}),u}isNsAgnostic(){return this._nsAgnosticLevel>0}_searchNamespace(t){let e=this._namespaces.get(t);if(e)return e;for(const[i,{check:n}]of Object.entries(r.NamespaceIds))if(n(t)){if(e=o.NamespaceSetUp[i],e)return this._namespaces.set(t,e),e;break}return e=new a.UnknownNamespace(++this._nextNsId),this._namespaces.set(t,e),e}_addNamespacePrefix(t){for(const{prefix:e,value:i}of t){const t=this._searchNamespace(i);let r=this._namespacePrefixes.get(e);r||(r=[],this._namespacePrefixes.set(e,r)),r.push(t)}}_getNamespaceToUse(t){if(!t)return this._currentNamespace;const e=this._namespacePrefixes.get(t);return e&&e.length>0?e[e.length-1]:((0,l.warn)(`Unknown namespace prefix: ${t}.`),null)}clean(t){const{hasNamespace:e,prefixes:i,nsAgnostic:r}=t;e&&(this._currentNamespace=this._namespaceStack.pop()),i&&i.forEach((({prefix:t})=>{this._namespacePrefixes.get(t).pop()})),r&&this._nsAgnosticLevel--}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NamespaceSetUp=void 0;var r=i(91),n=i(92),o=i(93),s=i(94),a=i(95),l=i(96),c=i(82),h=i(97),u=i(98);const p={config:r.ConfigNamespace,connection:n.ConnectionSetNamespace,datasets:o.DatasetsNamespace,localeSet:s.LocaleSetNamespace,signature:a.SignatureNamespace,stylesheet:l.StylesheetNamespace,template:c.TemplateNamespace,xdp:h.XdpNamespace,xhtml:u.XhtmlNamespace};e.NamespaceSetUp=p},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigNamespace=void 0;var r=i(79),n=i(77),o=i(78),s=i(2);const a=r.NamespaceIds.config.id;class l extends n.XFAObject{constructor(t){super(a,"acrobat",!0),this.acrobat7=null,this.autoSave=null,this.common=null,this.validate=null,this.validateApprovalSignatures=null,this.submitUrl=new n.XFAObjectArray}}class c extends n.XFAObject{constructor(t){super(a,"acrobat7",!0),this.dynamicRender=null}}class h extends n.OptionObject{constructor(t){super(a,"ADBE_JSConsole",["delegate","Enable","Disable"])}}class u extends n.OptionObject{constructor(t){super(a,"ADBE_JSDebugger",["delegate","Enable","Disable"])}}class p extends n.Option01{constructor(t){super(a,"addSilentPrint")}}class d extends n.Option01{constructor(t){super(a,"addViewerPreferences")}}class f extends n.Option10{constructor(t){super(a,"adjustData")}}class g extends n.IntegerObject{constructor(t){super(a,"adobeExtensionLevel",0,(t=>t>=1&&t<=8))}}class m extends n.XFAObject{constructor(t){super(a,"agent",!0),this.name=t.name?t.name.trim():"",this.common=new n.XFAObjectArray}}class y extends n.ContentObject{constructor(t){super(a,"alwaysEmbed")}}class v extends n.StringObject{constructor(t){super(a,"amd")}}class b extends n.XFAObject{constructor(t){super(a,"area"),this.level=(0,o.getInteger)({data:t.level,defaultValue:0,validate:t=>t>=1&&t<=3}),this.name=(0,o.getStringOption)(t.name,["","barcode","coreinit","deviceDriver","font","general","layout","merge","script","signature","sourceSet","templateCache"])}}class w extends n.OptionObject{constructor(t){super(a,"attributes",["preserve","delegate","ignore"])}}class x extends n.OptionObject{constructor(t){super(a,"autoSave",["disabled","enabled"])}}class S extends n.StringObject{constructor(t){super(a,"base")}}class k extends n.XFAObject{constructor(t){super(a,"batchOutput"),this.format=(0,o.getStringOption)(t.format,["none","concat","zip","zipCompress"])}}class C extends n.ContentObject{constructor(t){super(a,"behaviorOverride")}[n.$finalize](){this[n.$content]=new Map(this[n.$content].trim().split(/\s+/).filter((t=>t.includes(":"))).map((t=>t.split(":",2))))}}class A extends n.XFAObject{constructor(t){super(a,"cache",!0),this.templateCache=null}}class _ extends n.Option01{constructor(t){super(a,"change")}}class T extends n.XFAObject{constructor(t){super(a,"common",!0),this.data=null,this.locale=null,this.localeSet=null,this.messaging=null,this.suppressBanner=null,this.template=null,this.validationMessaging=null,this.versionControl=null,this.log=new n.XFAObjectArray}}class O extends n.XFAObject{constructor(t){super(a,"compress"),this.scope=(0,o.getStringOption)(t.scope,["imageOnly","document"])}}class E extends n.Option01{constructor(t){super(a,"compressLogicalStructure")}}class M extends n.Option10{constructor(t){super(a,"compressObjectStream")}}class P extends n.XFAObject{constructor(t){super(a,"compression",!0),this.compressLogicalStructure=null,this.compressObjectStream=null,this.level=null,this.type=null}}class I extends n.XFAObject{constructor(t){super(a,"config",!0),this.acrobat=null,this.present=null,this.trace=null,this.agent=new n.XFAObjectArray}}class D extends n.OptionObject{constructor(t){super(a,"conformance",["A","B"])}}class F extends n.Option01{constructor(t){super(a,"contentCopy")}}class R extends n.IntegerObject{constructor(t){super(a,"copies",1,(t=>t>=1))}}class L extends n.StringObject{constructor(t){super(a,"creator")}}class N extends n.IntegerObject{constructor(t){super(a,"currentPage",0,(t=>t>=0))}}class B extends n.XFAObject{constructor(t){super(a,"data",!0),this.adjustData=null,this.attributes=null,this.incrementalLoad=null,this.outputXSL=null,this.range=null,this.record=null,this.startNode=null,this.uri=null,this.window=null,this.xsl=null,this.excludeNS=new n.XFAObjectArray,this.transform=new n.XFAObjectArray}}class j extends n.XFAObject{constructor(t){super(a,"debug",!0),this.uri=null}}class z extends n.ContentObject{constructor(t){super(a,"defaultTypeface"),this.writingScript=(0,o.getStringOption)(t.writingScript,["*","Arabic","Cyrillic","EastEuropeanRoman","Greek","Hebrew","Japanese","Korean","Roman","SimplifiedChinese","Thai","TraditionalChinese","Vietnamese"])}}class U extends n.OptionObject{constructor(t){super(a,"destination",["pdf","pcl","ps","webClient","zpl"])}}class $ extends n.Option01{constructor(t){super(a,"documentAssembly")}}class H extends n.XFAObject{constructor(t){super(a,"driver",!0),this.name=t.name?t.name.trim():"",this.fontInfo=null,this.xdc=null}}class V extends n.OptionObject{constructor(t){super(a,"duplexOption",["simplex","duplexFlipLongEdge","duplexFlipShortEdge"])}}class q extends n.OptionObject{constructor(t){super(a,"dynamicRender",["forbidden","required"])}}class W extends n.Option01{constructor(t){super(a,"embed")}}class X extends n.Option01{constructor(t){super(a,"encrypt")}}class G extends n.XFAObject{constructor(t){super(a,"encryption",!0),this.encrypt=null,this.encryptionLevel=null,this.permissions=null}}class K extends n.OptionObject{constructor(t){super(a,"encryptionLevel",["40bit","128bit"])}}class Y extends n.StringObject{constructor(t){super(a,"enforce")}}class J extends n.XFAObject{constructor(t){super(a,"equate"),this.force=(0,o.getInteger)({data:t.force,defaultValue:1,validate:t=>0===t}),this.from=t.from||"",this.to=t.to||""}}class Z extends n.XFAObject{constructor(t){super(a,"equateRange"),this.from=t.from||"",this.to=t.to||"",this._unicodeRange=t.unicodeRange||""}get unicodeRange(){const t=[],e=/U\+([0-9a-fA-F]+)/,i=this._unicodeRange;for(let r of i.split(",").map((t=>t.trim())).filter((t=>!!t)))r=r.split("-",2).map((t=>{const i=t.match(e);return i?parseInt(i[1],16):0})),1===r.length&&r.push(r[0]),t.push(r);return(0,s.shadow)(this,"unicodeRange",t)}}class Q extends n.ContentObject{constructor(t){super(a,"exclude")}[n.$finalize](){this[n.$content]=this[n.$content].trim().split(/\s+/).filter((t=>t&&["calculate","close","enter","exit","initialize","ready","validate"].includes(t)))}}class tt extends n.StringObject{constructor(t){super(a,"excludeNS")}}class et extends n.OptionObject{constructor(t){super(a,"flipLabel",["usePrinterSetting","on","off"])}}class it extends n.XFAObject{constructor(t){super(a,"fontInfo",!0),this.embed=null,this.map=null,this.subsetBelow=null,this.alwaysEmbed=new n.XFAObjectArray,this.defaultTypeface=new n.XFAObjectArray,this.neverEmbed=new n.XFAObjectArray}}class rt extends n.Option01{constructor(t){super(a,"formFieldFilling")}}class nt extends n.StringObject{constructor(t){super(a,"groupParent")}}class ot extends n.OptionObject{constructor(t){super(a,"ifEmpty",["dataValue","dataGroup","ignore","remove"])}}class st extends n.StringObject{constructor(t){super(a,"includeXDPContent")}}class at extends n.OptionObject{constructor(t){super(a,"incrementalLoad",["none","forwardOnly"])}}class lt extends n.Option01{constructor(t){super(a,"incrementalMerge")}}class ct extends n.Option01{constructor(t){super(a,"interactive")}}class ht extends n.OptionObject{constructor(t){super(a,"jog",["usePrinterSetting","none","pageSet"])}}class ut extends n.XFAObject{constructor(t){super(a,"labelPrinter",!0),this.name=(0,o.getStringOption)(t.name,["zpl","dpl","ipl","tcpl"]),this.batchOutput=null,this.flipLabel=null,this.fontInfo=null,this.xdc=null}}class pt extends n.OptionObject{constructor(t){super(a,"layout",["paginate","panel"])}}class dt extends n.IntegerObject{constructor(t){super(a,"level",0,(t=>t>0))}}class ft extends n.Option01{constructor(t){super(a,"linearized")}}class gt extends n.StringObject{constructor(t){super(a,"locale")}}class mt extends n.StringObject{constructor(t){super(a,"localeSet")}}class yt extends n.XFAObject{constructor(t){super(a,"log",!0),this.mode=null,this.threshold=null,this.to=null,this.uri=null}}class vt extends n.XFAObject{constructor(t){super(a,"map",!0),this.equate=new n.XFAObjectArray,this.equateRange=new n.XFAObjectArray}}class bt extends n.XFAObject{constructor(t){super(a,"mediumInfo",!0),this.map=null}}class wt extends n.XFAObject{constructor(t){super(a,"message",!0),this.msgId=null,this.severity=null}}class xt extends n.XFAObject{constructor(t){super(a,"messaging",!0),this.message=new n.XFAObjectArray}}class St extends n.OptionObject{constructor(t){super(a,"mode",["append","overwrite"])}}class kt extends n.Option01{constructor(t){super(a,"modifyAnnots")}}class Ct extends n.IntegerObject{constructor(t){super(a,"msgId",1,(t=>t>=1))}}class At extends n.StringObject{constructor(t){super(a,"nameAttr")}}class _t extends n.ContentObject{constructor(t){super(a,"neverEmbed")}}class Tt extends n.IntegerObject{constructor(t){super(a,"numberOfCopies",null,(t=>t>=2&&t<=5))}}class Ot extends n.XFAObject{constructor(t){super(a,"openAction",!0),this.destination=null}}class Et extends n.XFAObject{constructor(t){super(a,"output",!0),this.to=null,this.type=null,this.uri=null}}class Mt extends n.StringObject{constructor(t){super(a,"outputBin")}}class Pt extends n.XFAObject{constructor(t){super(a,"outputXSL",!0),this.uri=null}}class It extends n.OptionObject{constructor(t){super(a,"overprint",["none","both","draw","field"])}}class Dt extends n.StringObject{constructor(t){super(a,"packets")}[n.$finalize](){"*"!==this[n.$content]&&(this[n.$content]=this[n.$content].trim().split(/\s+/).filter((t=>["config","datasets","template","xfdf","xslt"].includes(t))))}}class Ft extends n.XFAObject{constructor(t){super(a,"pageOffset"),this.x=(0,o.getInteger)({data:t.x,defaultValue:"useXDCSetting",validate:t=>!0}),this.y=(0,o.getInteger)({data:t.y,defaultValue:"useXDCSetting",validate:t=>!0})}}class Rt extends n.StringObject{constructor(t){super(a,"pageRange")}[n.$finalize](){const t=this[n.$content].trim().split(/\s+/).map((t=>parseInt(t,10))),e=[];for(let i=0,r=t.length;i<r;i+=2)e.push(t.slice(i,i+2));this[n.$content]=e}}class Lt extends n.OptionObject{constructor(t){super(a,"pagination",["simplex","duplexShortEdge","duplexLongEdge"])}}class Nt extends n.OptionObject{constructor(t){super(a,"paginationOverride",["none","forceDuplex","forceDuplexLongEdge","forceDuplexShortEdge","forceSimplex"])}}class Bt extends n.IntegerObject{constructor(t){super(a,"part",1,(t=>!1))}}class jt extends n.XFAObject{constructor(t){super(a,"pcl",!0),this.name=t.name||"",this.batchOutput=null,this.fontInfo=null,this.jog=null,this.mediumInfo=null,this.outputBin=null,this.pageOffset=null,this.staple=null,this.xdc=null}}class zt extends n.XFAObject{constructor(t){super(a,"pdf",!0),this.name=t.name||"",this.adobeExtensionLevel=null,this.batchOutput=null,this.compression=null,this.creator=null,this.encryption=null,this.fontInfo=null,this.interactive=null,this.linearized=null,this.openAction=null,this.pdfa=null,this.producer=null,this.renderPolicy=null,this.scriptModel=null,this.silentPrint=null,this.submitFormat=null,this.tagged=null,this.version=null,this.viewerPreferences=null,this.xdc=null}}class Ut extends n.XFAObject{constructor(t){super(a,"pdfa",!0),this.amd=null,this.conformance=null,this.includeXDPContent=null,this.part=null}}class $t extends n.XFAObject{constructor(t){super(a,"permissions",!0),this.accessibleContent=null,this.change=null,this.contentCopy=null,this.documentAssembly=null,this.formFieldFilling=null,this.modifyAnnots=null,this.plaintextMetadata=null,this.print=null,this.printHighQuality=null}}class Ht extends n.Option01{constructor(t){super(a,"pickTrayByPDFSize")}}class Vt extends n.StringObject{constructor(t){super(a,"picture")}}class qt extends n.Option01{constructor(t){super(a,"plaintextMetadata")}}class Wt extends n.OptionObject{constructor(t){super(a,"presence",["preserve","dissolve","dissolveStructure","ignore","remove"])}}class Xt extends n.XFAObject{constructor(t){super(a,"present",!0),this.behaviorOverride=null,this.cache=null,this.common=null,this.copies=null,this.destination=null,this.incrementalMerge=null,this.layout=null,this.output=null,this.overprint=null,this.pagination=null,this.paginationOverride=null,this.script=null,this.validate=null,this.xdp=null,this.driver=new n.XFAObjectArray,this.labelPrinter=new n.XFAObjectArray,this.pcl=new n.XFAObjectArray,this.pdf=new n.XFAObjectArray,this.ps=new n.XFAObjectArray,this.submitUrl=new n.XFAObjectArray,this.webClient=new n.XFAObjectArray,this.zpl=new n.XFAObjectArray}}class Gt extends n.Option01{constructor(t){super(a,"print")}}class Kt extends n.Option01{constructor(t){super(a,"printHighQuality")}}class Yt extends n.OptionObject{constructor(t){super(a,"printScaling",["appdefault","noScaling"])}}class Jt extends n.StringObject{constructor(t){super(a,"printerName")}}class Zt extends n.StringObject{constructor(t){super(a,"producer")}}class Qt extends n.XFAObject{constructor(t){super(a,"ps",!0),this.name=t.name||"",this.batchOutput=null,this.fontInfo=null,this.jog=null,this.mediumInfo=null,this.outputBin=null,this.staple=null,this.xdc=null}}class te extends n.ContentObject{constructor(t){super(a,"range")}[n.$finalize](){this[n.$content]=this[n.$content].trim().split(/\s*,\s*/,2).map((t=>t.split("-").map((t=>parseInt(t.trim(),10))))).filter((t=>t.every((t=>!isNaN(t))))).map((t=>(1===t.length&&t.push(t[0]),t)))}}class ee extends n.ContentObject{constructor(t){super(a,"record")}[n.$finalize](){this[n.$content]=this[n.$content].trim();const t=parseInt(this[n.$content],10);!isNaN(t)&&t>=0&&(this[n.$content]=t)}}class ie extends n.ContentObject{constructor(t){super(a,"relevant")}[n.$finalize](){this[n.$content]=this[n.$content].trim().split(/\s+/)}}class re extends n.ContentObject{constructor(t){super(a,"rename")}[n.$finalize](){this[n.$content]=this[n.$content].trim(),(this[n.$content].toLowerCase().startsWith("xml")||this[n.$content].match(new RegExp("[\\p{L}_][\\p{L}\\d._\\p{M}-]*","u")))&&(0,s.warn)("XFA - Rename: invalid XFA name")}}class ne extends n.OptionObject{constructor(t){super(a,"renderPolicy",["server","client"])}}class oe extends n.OptionObject{constructor(t){super(a,"runScripts",["both","client","none","server"])}}class se extends n.XFAObject{constructor(t){super(a,"script",!0),this.currentPage=null,this.exclude=null,this.runScripts=null}}class ae extends n.OptionObject{constructor(t){super(a,"scriptModel",["XFA","none"])}}class le extends n.OptionObject{constructor(t){super(a,"severity",["ignore","error","information","trace","warning"])}}class ce extends n.XFAObject{constructor(t){super(a,"silentPrint",!0),this.addSilentPrint=null,this.printerName=null}}class he extends n.XFAObject{constructor(t){super(a,"staple"),this.mode=(0,o.getStringOption)(t.mode,["usePrinterSetting","on","off"])}}class ue extends n.StringObject{constructor(t){super(a,"startNode")}}class pe extends n.IntegerObject{constructor(t){super(a,"startPage",0,(t=>!0))}}class de extends n.OptionObject{constructor(t){super(a,"submitFormat",["html","delegate","fdf","xml","pdf"])}}class fe extends n.StringObject{constructor(t){super(a,"submitUrl")}}class ge extends n.IntegerObject{constructor(t){super(a,"subsetBelow",100,(t=>t>=0&&t<=100))}}class me extends n.Option01{constructor(t){super(a,"suppressBanner")}}class ye extends n.Option01{constructor(t){super(a,"tagged")}}class ve extends n.XFAObject{constructor(t){super(a,"template",!0),this.base=null,this.relevant=null,this.startPage=null,this.uri=null,this.xsl=null}}class be extends n.OptionObject{constructor(t){super(a,"threshold",["trace","error","information","warning"])}}class we extends n.OptionObject{constructor(t){super(a,"to",["null","memory","stderr","stdout","system","uri"])}}class xe extends n.XFAObject{constructor(t){super(a,"templateCache"),this.maxEntries=(0,o.getInteger)({data:t.maxEntries,defaultValue:5,validate:t=>t>=0})}}class Se extends n.XFAObject{constructor(t){super(a,"trace",!0),this.area=new n.XFAObjectArray}}class ke extends n.XFAObject{constructor(t){super(a,"transform",!0),this.groupParent=null,this.ifEmpty=null,this.nameAttr=null,this.picture=null,this.presence=null,this.rename=null,this.whitespace=null}}class Ce extends n.OptionObject{constructor(t){super(a,"type",["none","ascii85","asciiHex","ccittfax","flate","lzw","runLength","native","xdp","mergedXDP"])}}class Ae extends n.StringObject{constructor(t){super(a,"uri")}}class _e extends n.OptionObject{constructor(t){super(a,"validate",["preSubmit","prePrint","preExecute","preSave"])}}class Te extends n.ContentObject{constructor(t){super(a,"validateApprovalSignatures")}[n.$finalize](){this[n.$content]=this[n.$content].trim().split(/\s+/).filter((t=>["docReady","postSign"].includes(t)))}}class Oe extends n.OptionObject{constructor(t){super(a,"validationMessaging",["allMessagesIndividually","allMessagesTogether","firstMessageOnly","noMessages"])}}class Ee extends n.OptionObject{constructor(t){super(a,"version",["1.7","1.6","1.5","1.4","1.3","1.2"])}}class Me extends n.XFAObject{constructor(t){super(a,"VersionControl"),this.outputBelow=(0,o.getStringOption)(t.outputBelow,["warn","error","update"]),this.sourceAbove=(0,o.getStringOption)(t.sourceAbove,["warn","error"]),this.sourceBelow=(0,o.getStringOption)(t.sourceBelow,["update","maintain"])}}class Pe extends n.XFAObject{constructor(t){super(a,"viewerPreferences",!0),this.ADBE_JSConsole=null,this.ADBE_JSDebugger=null,this.addViewerPreferences=null,this.duplexOption=null,this.enforce=null,this.numberOfCopies=null,this.pageRange=null,this.pickTrayByPDFSize=null,this.printScaling=null}}class Ie extends n.XFAObject{constructor(t){super(a,"webClient",!0),this.name=t.name?t.name.trim():"",this.fontInfo=null,this.xdc=null}}class De extends n.OptionObject{constructor(t){super(a,"whitespace",["preserve","ltrim","normalize","rtrim","trim"])}}class Fe extends n.ContentObject{constructor(t){super(a,"window")}[n.$finalize](){const t=this[n.$content].trim().split(/\s*,\s*/,2).map((t=>parseInt(t,10)));t.some((t=>isNaN(t)))?this[n.$content]=[0,0]:(1===t.length&&t.push(t[0]),this[n.$content]=t)}}class Re extends n.XFAObject{constructor(t){super(a,"xdc",!0),this.uri=new n.XFAObjectArray,this.xsl=new n.XFAObjectArray}}class Le extends n.XFAObject{constructor(t){super(a,"xdp",!0),this.packets=null}}class Ne extends n.XFAObject{constructor(t){super(a,"xsl",!0),this.debug=null,this.uri=null}}class Be extends n.XFAObject{constructor(t){super(a,"zpl",!0),this.name=t.name?t.name.trim():"",this.batchOutput=null,this.flipLabel=null,this.fontInfo=null,this.xdc=null}}class je{static[r.$buildXFAObject](t,e){if(je.hasOwnProperty(t))return je[t](e)}static acrobat(t){return new l(t)}static acrobat7(t){return new c(t)}static ADBE_JSConsole(t){return new h(t)}static ADBE_JSDebugger(t){return new u(t)}static addSilentPrint(t){return new p(t)}static addViewerPreferences(t){return new d(t)}static adjustData(t){return new f(t)}static adobeExtensionLevel(t){return new g(t)}static agent(t){return new m(t)}static alwaysEmbed(t){return new y(t)}static amd(t){return new v(t)}static area(t){return new b(t)}static attributes(t){return new w(t)}static autoSave(t){return new x(t)}static base(t){return new S(t)}static batchOutput(t){return new k(t)}static behaviorOverride(t){return new C(t)}static cache(t){return new A(t)}static change(t){return new _(t)}static common(t){return new T(t)}static compress(t){return new O(t)}static compressLogicalStructure(t){return new E(t)}static compressObjectStream(t){return new M(t)}static compression(t){return new P(t)}static config(t){return new I(t)}static conformance(t){return new D(t)}static contentCopy(t){return new F(t)}static copies(t){return new R(t)}static creator(t){return new L(t)}static currentPage(t){return new N(t)}static data(t){return new B(t)}static debug(t){return new j(t)}static defaultTypeface(t){return new z(t)}static destination(t){return new U(t)}static documentAssembly(t){return new $(t)}static driver(t){return new H(t)}static duplexOption(t){return new V(t)}static dynamicRender(t){return new q(t)}static embed(t){return new W(t)}static encrypt(t){return new X(t)}static encryption(t){return new G(t)}static encryptionLevel(t){return new K(t)}static enforce(t){return new Y(t)}static equate(t){return new J(t)}static equateRange(t){return new Z(t)}static exclude(t){return new Q(t)}static excludeNS(t){return new tt(t)}static flipLabel(t){return new et(t)}static fontInfo(t){return new it(t)}static formFieldFilling(t){return new rt(t)}static groupParent(t){return new nt(t)}static ifEmpty(t){return new ot(t)}static includeXDPContent(t){return new st(t)}static incrementalLoad(t){return new at(t)}static incrementalMerge(t){return new lt(t)}static interactive(t){return new ct(t)}static jog(t){return new ht(t)}static labelPrinter(t){return new ut(t)}static layout(t){return new pt(t)}static level(t){return new dt(t)}static linearized(t){return new ft(t)}static locale(t){return new gt(t)}static localeSet(t){return new mt(t)}static log(t){return new yt(t)}static map(t){return new vt(t)}static mediumInfo(t){return new bt(t)}static message(t){return new wt(t)}static messaging(t){return new xt(t)}static mode(t){return new St(t)}static modifyAnnots(t){return new kt(t)}static msgId(t){return new Ct(t)}static nameAttr(t){return new At(t)}static neverEmbed(t){return new _t(t)}static numberOfCopies(t){return new Tt(t)}static openAction(t){return new Ot(t)}static output(t){return new Et(t)}static outputBin(t){return new Mt(t)}static outputXSL(t){return new Pt(t)}static overprint(t){return new It(t)}static packets(t){return new Dt(t)}static pageOffset(t){return new Ft(t)}static pageRange(t){return new Rt(t)}static pagination(t){return new Lt(t)}static paginationOverride(t){return new Nt(t)}static part(t){return new Bt(t)}static pcl(t){return new jt(t)}static pdf(t){return new zt(t)}static pdfa(t){return new Ut(t)}static permissions(t){return new $t(t)}static pickTrayByPDFSize(t){return new Ht(t)}static picture(t){return new Vt(t)}static plaintextMetadata(t){return new qt(t)}static presence(t){return new Wt(t)}static present(t){return new Xt(t)}static print(t){return new Gt(t)}static printHighQuality(t){return new Kt(t)}static printScaling(t){return new Yt(t)}static printerName(t){return new Jt(t)}static producer(t){return new Zt(t)}static ps(t){return new Qt(t)}static range(t){return new te(t)}static record(t){return new ee(t)}static relevant(t){return new ie(t)}static rename(t){return new re(t)}static renderPolicy(t){return new ne(t)}static runScripts(t){return new oe(t)}static script(t){return new se(t)}static scriptModel(t){return new ae(t)}static severity(t){return new le(t)}static silentPrint(t){return new ce(t)}static staple(t){return new he(t)}static startNode(t){return new ue(t)}static startPage(t){return new pe(t)}static submitFormat(t){return new de(t)}static submitUrl(t){return new fe(t)}static subsetBelow(t){return new ge(t)}static suppressBanner(t){return new me(t)}static tagged(t){return new ye(t)}static template(t){return new ve(t)}static templateCache(t){return new xe(t)}static threshold(t){return new be(t)}static to(t){return new we(t)}static trace(t){return new Se(t)}static transform(t){return new ke(t)}static type(t){return new Ce(t)}static uri(t){return new Ae(t)}static validate(t){return new _e(t)}static validateApprovalSignatures(t){return new Te(t)}static validationMessaging(t){return new Oe(t)}static version(t){return new Ee(t)}static versionControl(t){return new Me(t)}static viewerPreferences(t){return new Pe(t)}static webClient(t){return new Ie(t)}static whitespace(t){return new De(t)}static window(t){return new Fe(t)}static xdc(t){return new Re(t)}static xdp(t){return new Le(t)}static xsl(t){return new Ne(t)}static zpl(t){return new Be(t)}}e.ConfigNamespace=je},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionSetNamespace=void 0;var r=i(79),n=i(77);const o=r.NamespaceIds.connectionSet.id;class s extends n.XFAObject{constructor(t){super(o,"connectionSet",!0),this.wsdlConnection=new n.XFAObjectArray,this.xmlConnection=new n.XFAObjectArray,this.xsdConnection=new n.XFAObjectArray}}class a extends n.XFAObject{constructor(t){super(o,"effectiveInputPolicy"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class l extends n.XFAObject{constructor(t){super(o,"effectiveOutputPolicy"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class c extends n.StringObject{constructor(t){super(o,"operation"),this.id=t.id||"",this.input=t.input||"",this.name=t.name||"",this.output=t.output||"",this.use=t.use||"",this.usehref=t.usehref||""}}class h extends n.StringObject{constructor(t){super(o,"rootElement"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class u extends n.StringObject{constructor(t){super(o,"soapAction"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class p extends n.StringObject{constructor(t){super(o,"soapAddress"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class d extends n.StringObject{constructor(t){super(o,"uri"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class f extends n.StringObject{constructor(t){super(o,"wsdlAddress"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class g extends n.XFAObject{constructor(t){super(o,"wsdlConnection",!0),this.dataDescription=t.dataDescription||"",this.name=t.name||"",this.effectiveInputPolicy=null,this.effectiveOutputPolicy=null,this.operation=null,this.soapAction=null,this.soapAddress=null,this.wsdlAddress=null}}class m extends n.XFAObject{constructor(t){super(o,"xmlConnection",!0),this.dataDescription=t.dataDescription||"",this.name=t.name||"",this.uri=null}}class y extends n.XFAObject{constructor(t){super(o,"xsdConnection",!0),this.dataDescription=t.dataDescription||"",this.name=t.name||"",this.rootElement=null,this.uri=null}}class v{static[r.$buildXFAObject](t,e){if(v.hasOwnProperty(t))return v[t](e)}static connectionSet(t){return new s(t)}static effectiveInputPolicy(t){return new a(t)}static effectiveOutputPolicy(t){return new l(t)}static operation(t){return new c(t)}static rootElement(t){return new h(t)}static soapAction(t){return new u(t)}static soapAddress(t){return new p(t)}static uri(t){return new d(t)}static wsdlAddress(t){return new f(t)}static wsdlConnection(t){return new g(t)}static xmlConnection(t){return new m(t)}static xsdConnection(t){return new y(t)}}e.ConnectionSetNamespace=v},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DatasetsNamespace=void 0;var r=i(77),n=i(79);const o=n.NamespaceIds.datasets.id;class s extends r.XmlObject{constructor(t){super(o,"data",t)}[r.$isNsAgnostic](){return!0}}class a extends r.XFAObject{constructor(t){super(o,"datasets",!0),this.data=null,this.Signature=null}[r.$onChild](t){const e=t[r.$nodeName];("data"===e&&t[r.$namespaceId]===o||"Signature"===e&&t[r.$namespaceId]===n.NamespaceIds.signature.id)&&(this[e]=t),this[r.$appendChild](t)}}class l{static[n.$buildXFAObject](t,e){if(l.hasOwnProperty(t))return l[t](e)}static datasets(t){return new a(t)}static data(t){return new s(t)}}e.DatasetsNamespace=l},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LocaleSetNamespace=void 0;var r=i(79),n=i(77),o=i(78);const s=r.NamespaceIds.localeSet.id;class a extends n.XFAObject{constructor(t){super(s,"calendarSymbols",!0),this.name="gregorian",this.dayNames=new n.XFAObjectArray(2),this.eraNames=null,this.meridiemNames=null,this.monthNames=new n.XFAObjectArray(2)}}class l extends n.StringObject{constructor(t){super(s,"currencySymbol"),this.name=(0,o.getStringOption)(t.name,["symbol","isoname","decimal"])}}class c extends n.XFAObject{constructor(t){super(s,"currencySymbols",!0),this.currencySymbol=new n.XFAObjectArray(3)}}class h extends n.StringObject{constructor(t){super(s,"datePattern"),this.name=(0,o.getStringOption)(t.name,["full","long","med","short"])}}class u extends n.XFAObject{constructor(t){super(s,"datePatterns",!0),this.datePattern=new n.XFAObjectArray(4)}}class p extends n.ContentObject{constructor(t){super(s,"dateTimeSymbols")}}class d extends n.StringObject{constructor(t){super(s,"day")}}class f extends n.XFAObject{constructor(t){super(s,"dayNames",!0),this.abbr=(0,o.getInteger)({data:t.abbr,defaultValue:0,validate:t=>1===t}),this.day=new n.XFAObjectArray(7)}}class g extends n.StringObject{constructor(t){super(s,"era")}}class m extends n.XFAObject{constructor(t){super(s,"eraNames",!0),this.era=new n.XFAObjectArray(2)}}class y extends n.XFAObject{constructor(t){super(s,"locale",!0),this.desc=t.desc||"",this.name="isoname",this.calendarSymbols=null,this.currencySymbols=null,this.datePatterns=null,this.dateTimeSymbols=null,this.numberPatterns=null,this.numberSymbols=null,this.timePatterns=null,this.typeFaces=null}}class v extends n.XFAObject{constructor(t){super(s,"localeSet",!0),this.locale=new n.XFAObjectArray}}class b extends n.StringObject{constructor(t){super(s,"meridiem")}}class w extends n.XFAObject{constructor(t){super(s,"meridiemNames",!0),this.meridiem=new n.XFAObjectArray(2)}}class x extends n.StringObject{constructor(t){super(s,"month")}}class S extends n.XFAObject{constructor(t){super(s,"monthNames",!0),this.abbr=(0,o.getInteger)({data:t.abbr,defaultValue:0,validate:t=>1===t}),this.month=new n.XFAObjectArray(12)}}class k extends n.StringObject{constructor(t){super(s,"numberPattern"),this.name=(0,o.getStringOption)(t.name,["full","long","med","short"])}}class C extends n.XFAObject{constructor(t){super(s,"numberPatterns",!0),this.numberPattern=new n.XFAObjectArray(4)}}class A extends n.StringObject{constructor(t){super(s,"numberSymbol"),this.name=(0,o.getStringOption)(t.name,["decimal","grouping","percent","minus","zero"])}}class _ extends n.XFAObject{constructor(t){super(s,"numberSymbols",!0),this.numberSymbol=new n.XFAObjectArray(5)}}class T extends n.StringObject{constructor(t){super(s,"timePattern"),this.name=(0,o.getStringOption)(t.name,["full","long","med","short"])}}class O extends n.XFAObject{constructor(t){super(s,"timePatterns",!0),this.timePattern=new n.XFAObjectArray(4)}}class E extends n.XFAObject{constructor(t){super(s,"typeFace",!0),this.name=""|t.name}}class M extends n.XFAObject{constructor(t){super(s,"typeFaces",!0),this.typeFace=new n.XFAObjectArray}}class P{static[r.$buildXFAObject](t,e){if(P.hasOwnProperty(t))return P[t](e)}static calendarSymbols(t){return new a(t)}static currencySymbol(t){return new l(t)}static currencySymbols(t){return new c(t)}static datePattern(t){return new h(t)}static datePatterns(t){return new u(t)}static dateTimeSymbols(t){return new p(t)}static day(t){return new d(t)}static dayNames(t){return new f(t)}static era(t){return new g(t)}static eraNames(t){return new m(t)}static locale(t){return new y(t)}static localeSet(t){return new v(t)}static meridiem(t){return new b(t)}static meridiemNames(t){return new w(t)}static month(t){return new x(t)}static monthNames(t){return new S(t)}static numberPattern(t){return new k(t)}static numberPatterns(t){return new C(t)}static numberSymbol(t){return new A(t)}static numberSymbols(t){return new _(t)}static timePattern(t){return new T(t)}static timePatterns(t){return new O(t)}static typeFace(t){return new E(t)}static typeFaces(t){return new M(t)}}e.LocaleSetNamespace=P},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SignatureNamespace=void 0;var r=i(79),n=i(77);const o=r.NamespaceIds.signature.id;class s extends n.XFAObject{constructor(t){super(o,"signature",!0)}}class a{static[r.$buildXFAObject](t,e){if(a.hasOwnProperty(t))return a[t](e)}static signature(t){return new s(t)}}e.SignatureNamespace=a},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StylesheetNamespace=void 0;var r=i(79),n=i(77);const o=r.NamespaceIds.stylesheet.id;class s extends n.XFAObject{constructor(t){super(o,"stylesheet",!0)}}class a{static[r.$buildXFAObject](t,e){if(a.hasOwnProperty(t))return a[t](e)}static stylesheet(t){return new s(t)}}e.StylesheetNamespace=a},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XdpNamespace=void 0;var r=i(79),n=i(77);const o=r.NamespaceIds.xdp.id;class s extends n.XFAObject{constructor(t){super(o,"xdp",!0),this.uuid=t.uuid||"",this.timeStamp=t.timeStamp||"",this.config=null,this.connectionSet=null,this.datasets=null,this.localeSet=null,this.stylesheet=new n.XFAObjectArray,this.template=null}[n.$onChildCheck](t){const e=r.NamespaceIds[t[n.$nodeName]];return e&&t[n.$namespaceId]===e.id}}class a{static[r.$buildXFAObject](t,e){if(a.hasOwnProperty(t))return a[t](e)}static xdp(t){return new s(t)}}e.XdpNamespace=a},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XhtmlNamespace=void 0;var r=i(77),n=i(79),o=i(84),s=i(78);const a=n.NamespaceIds.xhtml.id,l=Symbol(),c=new Set(["color","font","font-family","font-size","font-stretch","font-style","font-weight","margin","margin-bottom","margin-left","margin-right","margin-top","letter-spacing","line-height","orphans","page-break-after","page-break-before","page-break-inside","tab-interval","tab-stop","text-align","text-decoration","text-indent","vertical-align","widows","kerning-mode","xfa-font-horizontal-scale","xfa-font-vertical-scale","xfa-spacerun","xfa-tab-stops"]),h=new Map([["page-break-after","breakAfter"],["page-break-before","breakBefore"],["page-break-inside","breakInside"],["kerning-mode",t=>"none"===t?"none":"normal"],["xfa-font-horizontal-scale",t=>`scaleX(${Math.max(0,Math.min(parseInt(t)/100)).toFixed(2)})`],["xfa-font-vertical-scale",t=>`scaleY(${Math.max(0,Math.min(parseInt(t)/100)).toFixed(2)})`],["xfa-spacerun",""],["xfa-tab-stops",""],["font-size",(t,e)=>(t=e.fontSize=(0,s.getMeasurement)(t),(0,o.measureToString)(.99*t))],["letter-spacing",t=>(0,o.measureToString)((0,s.getMeasurement)(t))],["line-height",t=>(0,o.measureToString)((0,s.getMeasurement)(t))],["margin",t=>(0,o.measureToString)((0,s.getMeasurement)(t))],["margin-bottom",t=>(0,o.measureToString)((0,s.getMeasurement)(t))],["margin-left",t=>(0,o.measureToString)((0,s.getMeasurement)(t))],["margin-right",t=>(0,o.measureToString)((0,s.getMeasurement)(t))],["margin-top",t=>(0,o.measureToString)((0,s.getMeasurement)(t))],["text-indent",t=>(0,o.measureToString)((0,s.getMeasurement)(t))],["font-family",t=>t],["vertical-align",t=>(0,o.measureToString)((0,s.getMeasurement)(t))]]),u=/\s+/g,p=/[\r\n]+/g,d=/\r\n?/g;function f(t,e,i){const n=Object.create(null);if(!t)return n;const a=Object.create(null);for(const[e,i]of t.split(";").map((t=>t.split(":",2)))){const t=h.get(e);if(""===t)continue;let r=i;t&&(r="string"==typeof t?t:t(i,a)),e.endsWith("scale")?n.transform?n.transform=`${n[e]} ${r}`:n.transform=r:n[e.replaceAll(/-([a-zA-Z])/g,((t,e)=>e.toUpperCase()))]=r}if(n.fontFamily&&(0,o.setFontFamily)({typeface:n.fontFamily,weight:n.fontWeight||"normal",posture:n.fontStyle||"normal",size:a.fontSize||0},e,e[r.$globalData].fontFinder,n),i&&n.verticalAlign&&"0px"!==n.verticalAlign&&n.fontSize){const t=.583,e=.333,i=(0,s.getMeasurement)(n.fontSize);n.fontSize=(0,o.measureToString)(i*t),n.verticalAlign=(0,o.measureToString)(Math.sign((0,s.getMeasurement)(n.verticalAlign))*i*e)}return(0,o.fixTextIndent)(n),n}const g=new Set(["body","html"]);class m extends r.XmlObject{constructor(t,e){super(a,e),this[l]=!1,this.style=t.style||""}[r.$clean](t){var e;super[r.$clean](t),this.style=(e=this).style?e.style.trim().split(/\s*;\s*/).filter((t=>!!t)).map((t=>t.split(/\s*:\s*/,2))).filter((([t,i])=>("font-family"===t&&e[r.$globalData].usedTypefaces.add(i),c.has(t)))).map((t=>t.join(":"))).join(";"):""}[r.$acceptWhitespace](){return!g.has(this[r.$nodeName])}[r.$onText](t,e=!1){e?this[l]=!0:(t=t.replace(p,""),this.style.includes("xfa-spacerun:yes")||(t=t.replace(u," "))),t&&(this[r.$content]+=t)}[r.$pushGlyphs](t,e=!0){const i=Object.create(null),n={top:NaN,bottom:NaN,left:NaN,right:NaN};let o=null;for(const[t,e]of this.style.split(";").map((t=>t.split(":",2))))switch(t){case"font-family":i.typeface=(0,s.stripQuotes)(e);break;case"font-size":i.size=(0,s.getMeasurement)(e);break;case"font-weight":i.weight=e;break;case"font-style":i.posture=e;break;case"letter-spacing":i.letterSpacing=(0,s.getMeasurement)(e);break;case"margin":const t=e.split(/ \t/).map((t=>(0,s.getMeasurement)(t)));switch(t.length){case 1:n.top=n.bottom=n.left=n.right=t[0];break;case 2:n.top=n.bottom=t[0],n.left=n.right=t[1];break;case 3:n.top=t[0],n.bottom=t[2],n.left=n.right=t[1];break;case 4:n.top=t[0],n.left=t[1],n.bottom=t[2],n.right=t[3]}break;case"margin-top":n.top=(0,s.getMeasurement)(e);break;case"margin-bottom":n.bottom=(0,s.getMeasurement)(e);break;case"margin-left":n.left=(0,s.getMeasurement)(e);break;case"margin-right":n.right=(0,s.getMeasurement)(e);break;case"line-height":o=(0,s.getMeasurement)(e)}if(t.pushData(i,n,o),this[r.$content])t.addString(this[r.$content]);else for(const e of this[r.$getChildren]())"#text"!==e[r.$nodeName]?e[r.$pushGlyphs](t):t.addString(e[r.$content]);e&&t.popFont()}[r.$toHTML](t){const e=[];if(this[r.$extra]={children:e},this[r.$childrenToHTML]({}),0===e.length&&!this[r.$content])return s.HTMLResult.EMPTY;let i;return i=this[l]?this[r.$content]?this[r.$content].replace(d,"\n"):void 0:this[r.$content]||void 0,s.HTMLResult.success({name:this[r.$nodeName],attributes:{href:this.href,style:f(this.style,this,this[l])},children:e,value:i})}}class y extends m{constructor(t){super(t,"a"),this.href=(0,o.fixURL)(t.href)||""}}class v extends m{constructor(t){super(t,"b")}[r.$pushGlyphs](t){t.pushFont({weight:"bold"}),super[r.$pushGlyphs](t),t.popFont()}}class b extends m{constructor(t){super(t,"body")}[r.$toHTML](t){const e=super[r.$toHTML](t),{html:i}=e;return i?(i.name="div",i.attributes.class=["xfaRich"],e):s.HTMLResult.EMPTY}}class w extends m{constructor(t){super(t,"br")}[r.$text](){return"\n"}[r.$pushGlyphs](t){t.addString("\n")}[r.$toHTML](t){return s.HTMLResult.success({name:"br"})}}class x extends m{constructor(t){super(t,"html")}[r.$toHTML](t){const e=[];if(this[r.$extra]={children:e},this[r.$childrenToHTML]({}),0===e.length)return s.HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:{}},value:this[r.$content]||""});if(1===e.length){const t=e[0];if(t.attributes&&t.attributes.class.includes("xfaRich"))return s.HTMLResult.success(t)}return s.HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:{}},children:e})}}class S extends m{constructor(t){super(t,"i")}[r.$pushGlyphs](t){t.pushFont({posture:"italic"}),super[r.$pushGlyphs](t),t.popFont()}}class k extends m{constructor(t){super(t,"li")}}class C extends m{constructor(t){super(t,"ol")}}class A extends m{constructor(t){super(t,"p")}[r.$pushGlyphs](t){super[r.$pushGlyphs](t,!1),t.addString("\n"),t.addPara(),t.popFont()}[r.$text](){const t=this[r.$getParent]()[r.$getChildren]();return t[t.length-1]===this?super[r.$text]():super[r.$text]()+"\n"}}class _ extends m{constructor(t){super(t,"span")}}class T extends m{constructor(t){super(t,"sub")}}class O extends m{constructor(t){super(t,"sup")}}class E extends m{constructor(t){super(t,"ul")}}class M{static[n.$buildXFAObject](t,e){if(M.hasOwnProperty(t))return M[t](e)}static a(t){return new y(t)}static b(t){return new v(t)}static body(t){return new b(t)}static br(t){return new w(t)}static html(t){return new x(t)}static i(t){return new S(t)}static li(t){return new k(t)}static ol(t){return new C(t)}static p(t){return new A(t)}static span(t){return new _(t)}static sub(t){return new T(t)}static sup(t){return new O(t)}static ul(t){return new E(t)}}e.XhtmlNamespace=M},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnknownNamespace=void 0;var r=i(79),n=i(77);class o{constructor(t){this.namespaceId=t}[r.$buildXFAObject](t,e){return new n.XmlObject(this.namespaceId,t,e)}}e.UnknownNamespace=o},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DatasetReader=void 0;var r=i(2),n=i(8),o=i(70);function s(t){try{return(0,r.stringToUTF8String)(t)}catch(e){return(0,r.warn)(`UTF-8 decoding failed: "${e}".`),t}}class a extends o.SimpleXMLParser{constructor(t){super(t),this.node=null}onEndElement(t){const e=super.onEndElement(t);if(e&&"xfa:datasets"===t)throw this.node=e,new Error("Aborting DatasetXMLParser.")}}e.DatasetReader=class{constructor(t){if(t.datasets)this.node=new o.SimpleXMLParser({hasAttributes:!0}).parseFromString(t.datasets).documentElement;else{const e=new a({hasAttributes:!0});try{e.parseFromString(t["xdp:xdp"])}catch(t){}this.node=e.node}}getValue(t){if(!this.node||!t)return"";const e=this.node.searchNode((0,n.parseXFAPath)(t),0);if(!e)return"";const i=e.firstChild;return i&&"value"===i.nodeName?e.children.map((t=>s(t.textContent))):s(e.textContent)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XRef=void 0;var r=i(2),n=i(5),o=i(8),s=i(27),a=i(9),l=i(74);e.XRef=class{constructor(t,e){this.stream=t,this.pdfManager=e,this.entries=[],this.xrefstms=Object.create(null),this._cacheMap=new Map,this._pendingRefs=new n.RefSet,this.stats=new o.DocStats(e.msgHandler),this._newRefNum=null}getNewRef(){return null===this._newRefNum&&(this._newRefNum=this.entries.length),n.Ref.get(this._newRefNum++,0)}resetNewRef(){this._newRefNum=null}setStartXRef(t){this.startXRefQueue=[t]}parse(t=!1){let e,i,s;t?((0,r.warn)("Indexing all PDF objects"),e=this.indexObjects()):e=this.readXRef(),e.assignXref(this),this.trailer=e;try{i=e.get("Encrypt")}catch(t){if(t instanceof o.MissingDataException)throw t;(0,r.warn)(`XRef.parse - Invalid "Encrypt" reference: "${t}".`)}if(i instanceof n.Dict){const t=e.get("ID"),r=t&&t.length?t[0]:"";i.suppressEncryption=!0,this.encrypt=new l.CipherTransformFactory(i,r,this.pdfManager.password)}try{s=e.get("Root")}catch(t){if(t instanceof o.MissingDataException)throw t;(0,r.warn)(`XRef.parse - Invalid "Root" reference: "${t}".`)}if(s instanceof n.Dict)try{if(s.get("Pages")instanceof n.Dict)return void(this.root=s)}catch(t){if(t instanceof o.MissingDataException)throw t;(0,r.warn)(`XRef.parse - Invalid "Pages" reference: "${t}".`)}if(!t)throw new o.XRefParseException;throw new r.InvalidPDFException("Invalid Root reference.")}processXRefTable(t){"tableState"in this||(this.tableState={entryNum:0,streamPos:t.lexer.stream.pos,parserBuf1:t.buf1,parserBuf2:t.buf2});const e=this.readXRefTable(t);if(!(0,n.isCmd)(e,"trailer"))throw new r.FormatError("Invalid XRef table: could not find trailer dictionary");let i=t.getObj();if(i instanceof n.Dict||!i.dict||(i=i.dict),!(i instanceof n.Dict))throw new r.FormatError("Invalid XRef table: could not parse trailer dictionary");return delete this.tableState,i}readXRefTable(t){const e=t.lexer.stream,i=this.tableState;let o;for(e.pos=i.streamPos,t.buf1=i.parserBuf1,t.buf2=i.parserBuf2;;){if(!("firstEntryNum"in i)||!("entryCount"in i)){if((0,n.isCmd)(o=t.getObj(),"trailer"))break;i.firstEntryNum=o,i.entryCount=t.getObj()}let s=i.firstEntryNum;const a=i.entryCount;if(!Number.isInteger(s)||!Number.isInteger(a))throw new r.FormatError("Invalid XRef table: wrong types in subsection header");for(let o=i.entryNum;o<a;o++){i.streamPos=e.pos,i.entryNum=o,i.parserBuf1=t.buf1,i.parserBuf2=t.buf2;const l={};l.offset=t.getObj(),l.gen=t.getObj();const c=t.getObj();if(c instanceof n.Cmd)switch(c.cmd){case"f":l.free=!0;break;case"n":l.uncompressed=!0}if(!Number.isInteger(l.offset)||!Number.isInteger(l.gen)||!l.free&&!l.uncompressed)throw new r.FormatError(`Invalid entry in XRef subsection: ${s}, ${a}`);0===o&&l.free&&1===s&&(s=0),this.entries[o+s]||(this.entries[o+s]=l)}i.entryNum=0,i.streamPos=e.pos,i.parserBuf1=t.buf1,i.parserBuf2=t.buf2,delete i.firstEntryNum,delete i.entryCount}if(this.entries[0]&&!this.entries[0].free)throw new r.FormatError("Invalid XRef table: unexpected first object");return o}processXRefStream(t){if(!("streamState"in this)){const e=t.dict,i=e.get("W");let r=e.get("Index");r||(r=[0,e.get("Size")]),this.streamState={entryRanges:r,byteWidths:i,entryNum:0,streamPos:t.pos}}return this.readXRefStream(t),delete this.streamState,t.dict}readXRefStream(t){const e=this.streamState;t.pos=e.streamPos;const[i,n,o]=e.byteWidths,s=e.entryRanges;for(;s.length>0;){const[a,l]=s;if(!Number.isInteger(a)||!Number.isInteger(l))throw new r.FormatError(`Invalid XRef range fields: ${a}, ${l}`);if(!Number.isInteger(i)||!Number.isInteger(n)||!Number.isInteger(o))throw new r.FormatError(`Invalid XRef entry fields length: ${a}, ${l}`);for(let s=e.entryNum;s<l;++s){e.entryNum=s,e.streamPos=t.pos;let l=0,c=0,h=0;for(let e=0;e<i;++e){const e=t.getByte();if(-1===e)throw new r.FormatError("Invalid XRef byteWidths 'type'.");l=l<<8|e}0===i&&(l=1);for(let e=0;e<n;++e){const e=t.getByte();if(-1===e)throw new r.FormatError("Invalid XRef byteWidths 'offset'.");c=c<<8|e}for(let e=0;e<o;++e){const e=t.getByte();if(-1===e)throw new r.FormatError("Invalid XRef byteWidths 'generation'.");h=h<<8|e}const u={};switch(u.offset=c,u.gen=h,l){case 0:u.free=!0;break;case 1:u.uncompressed=!0;break;case 2:break;default:throw new r.FormatError(`Invalid XRef entry type: ${l}`)}this.entries[a+s]||(this.entries[a+s]=u)}e.entryNum=0,e.streamPos=t.pos,s.splice(0,2)}}indexObjects(){function t(t,e){let i="",r=t[e];for(;10!==r&&13!==r&&60!==r&&!(++e>=t.length);)i+=String.fromCharCode(r),r=t[e];return i}function e(t,e,i){const r=i.length,n=t.length;let o=0;for(;e<n;){let n=0;for(;n<r&&t[e+n]===i[n];)++n;if(n>=r)break;e++,o++}return o}const i=/^(\d+)\s+(\d+)\s+obj\b/,a=/\bendobj[\b\s]$/,l=/\s+(\d+\s+\d+\s+obj[\b\s<])$/,c=new Uint8Array([116,114,97,105,108,101,114]),h=new Uint8Array([115,116,97,114,116,120,114,101,102]),u=new Uint8Array([111,98,106]),p=new Uint8Array([47,88,82,101,102]);this.entries.length=0,this._cacheMap.clear();const d=this.stream;d.pos=0;const f=d.getBytes(),g=f.length;let m=d.start;const y=[],v=[];for(;m<g;){let n=f[m];if(9===n||10===n||13===n||32===n){++m;continue}if(37===n){do{if(++m,m>=g)break;n=f[m]}while(10!==n&&13!==n);continue}const b=t(f,m);let w;if(b.startsWith("xref")&&(4===b.length||/\s/.test(b[4])))m+=e(f,m,c),y.push(m),m+=e(f,m,h);else if(w=i.exec(b)){const t=0|w[1],i=0|w[2];let n,c=m+b.length,h=!1;if(this.entries[t]){if(this.entries[t].gen===i)try{new s.Parser({lexer:new s.Lexer(d.makeSubStream(c))}).getObj(),h=!0}catch(t){t instanceof o.ParserEOFException?(0,r.warn)(`indexObjects -- checking object (${b}): "${t}".`):h=!0}}else h=!0;for(h&&(this.entries[t]={offset:m-d.start,gen:i,uncompressed:!0});c<f.length;){const t=c+e(f,c,u)+4;n=t-m;const i=Math.max(t-25,c),o=(0,r.bytesToString)(f.subarray(i,t));if(a.test(o))break;{const t=l.exec(o);if(t&&t[1]){(0,r.warn)('indexObjects: Found new "obj" inside of another "obj", caused by missing "endobj" -- trying to recover.'),n-=t[1].length;break}}c=t}const g=f.subarray(m,m+n),y=e(g,0,p);y<n&&g[y+5]<64&&(v.push(m-d.start),this.xrefstms[m-d.start]=1),m+=n}else b.startsWith("trailer")&&(7===b.length||/\s/.test(b[7]))?(y.push(m),m+=e(f,m,h)):m+=b.length+1}for(let t=0,e=v.length;t<e;++t)this.startXRefQueue.push(v[t]),this.readXRef(!0);let b;for(let t=0,e=y.length;t<e;++t){d.pos=y[t];const e=new s.Parser({lexer:new s.Lexer(d),xref:this,allowStreams:!0,recoveryMode:!0}),i=e.getObj();if(!(0,n.isCmd)(i,"trailer"))continue;const r=e.getObj();if(r instanceof n.Dict){try{const t=r.get("Root");if(!(t instanceof n.Dict))continue;const e=t.get("Pages");if(!(e instanceof n.Dict))continue;const i=e.get("Count");if(!Number.isInteger(i))continue}catch(t){continue}if(r.has("ID"))return r;b=r}}if(b)return b;if(this.topDict)return this.topDict;throw new r.InvalidPDFException("Invalid PDF structure.")}readXRef(t=!1){const e=this.stream,i=new Set;try{for(;this.startXRefQueue.length;){const t=this.startXRefQueue[0];if(i.has(t)){(0,r.warn)("readXRef - skipping XRef table since it was already parsed."),this.startXRefQueue.shift();continue}i.add(t),e.pos=t+e.start;const o=new s.Parser({lexer:new s.Lexer(e),xref:this,allowStreams:!0});let l,c=o.getObj();if((0,n.isCmd)(c,"xref")){if(l=this.processXRefTable(o),this.topDict||(this.topDict=l),c=l.get("XRefStm"),Number.isInteger(c)){const t=c;t in this.xrefstms||(this.xrefstms[t]=1,this.startXRefQueue.push(t))}}else{if(!Number.isInteger(c))throw new r.FormatError("Invalid XRef stream header");if(!(Number.isInteger(o.getObj())&&(0,n.isCmd)(o.getObj(),"obj")&&(c=o.getObj())instanceof a.BaseStream))throw new r.FormatError("Invalid XRef stream");if(l=this.processXRefStream(c),this.topDict||(this.topDict=l),!l)throw new r.FormatError("Failed to read XRef stream")}c=l.get("Prev"),Number.isInteger(c)?this.startXRefQueue.push(c):c instanceof n.Ref&&this.startXRefQueue.push(c.num),this.startXRefQueue.shift()}return this.topDict}catch(t){if(t instanceof o.MissingDataException)throw t;(0,r.info)("(while reading XRef): "+t),this.startXRefQueue.shift()}if(!t)throw new o.XRefParseException}getEntry(t){const e=this.entries[t];return e&&!e.free&&e.offset?e:null}fetchIfRef(t,e=!1){return t instanceof n.Ref?this.fetch(t,e):t}fetch(t,e=!1){if(!(t instanceof n.Ref))throw new Error("ref object is not a reference");const i=t.num,o=this._cacheMap.get(i);if(void 0!==o)return o instanceof n.Dict&&!o.objId&&(o.objId=t.toString()),o;let s=this.getEntry(i);if(null===s)return this._cacheMap.set(i,s),s;if(this._pendingRefs.has(t))return this._pendingRefs.remove(t),(0,r.warn)(`Ignoring circular reference: ${t}.`),n.CIRCULAR_REF;this._pendingRefs.put(t);try{s=s.uncompressed?this.fetchUncompressed(t,s,e):this.fetchCompressed(t,s,e),this._pendingRefs.remove(t)}catch(e){throw this._pendingRefs.remove(t),e}return s instanceof n.Dict?s.objId=t.toString():s instanceof a.BaseStream&&(s.dict.objId=t.toString()),s}fetchUncompressed(t,e,i=!1){const r=t.gen;let l=t.num;if(e.gen!==r)throw new o.XRefEntryException(`Inconsistent generation in XRef: ${t}`);const c=this.stream.makeSubStream(e.offset+this.stream.start),h=new s.Parser({lexer:new s.Lexer(c),xref:this,allowStreams:!0}),u=h.getObj(),p=h.getObj(),d=h.getObj();if(u!==l||p!==r||!(d instanceof n.Cmd))throw new o.XRefEntryException(`Bad (uncompressed) XRef entry: ${t}`);if("obj"!==d.cmd){if(d.cmd.startsWith("obj")&&(l=parseInt(d.cmd.substring(3),10),!Number.isNaN(l)))return l;throw new o.XRefEntryException(`Bad (uncompressed) XRef entry: ${t}`)}return(e=this.encrypt&&!i?h.getObj(this.encrypt.createCipherTransform(l,r)):h.getObj())instanceof a.BaseStream||this._cacheMap.set(l,e),e}fetchCompressed(t,e,i=!1){const l=e.offset,c=this.fetch(n.Ref.get(l,0));if(!(c instanceof a.BaseStream))throw new r.FormatError("bad ObjStm stream");const h=c.dict.get("First"),u=c.dict.get("N");if(!Number.isInteger(h)||!Number.isInteger(u))throw new r.FormatError("invalid first and n parameters for ObjStm stream");let p=new s.Parser({lexer:new s.Lexer(c),xref:this,allowStreams:!0});const d=new Array(u),f=new Array(u);for(let t=0;t<u;++t){const e=p.getObj();if(!Number.isInteger(e))throw new r.FormatError(`invalid object number in the ObjStm stream: ${e}`);const i=p.getObj();if(!Number.isInteger(i))throw new r.FormatError(`invalid object offset in the ObjStm stream: ${i}`);d[t]=e,f[t]=i}const g=(c.start||0)+h,m=new Array(u);for(let t=0;t<u;++t){const e=t<u-1?f[t+1]-f[t]:void 0;if(e<0)throw new r.FormatError("Invalid offset in the ObjStm stream.");p=new s.Parser({lexer:new s.Lexer(c.makeSubStream(g+f[t],e,c.dict)),xref:this,allowStreams:!0});const i=p.getObj();if(m[t]=i,i instanceof a.BaseStream)continue;const n=d[t],o=this.entries[n];o&&o.offset===l&&o.gen===t&&this._cacheMap.set(n,i)}if(void 0===(e=m[e.gen]))throw new o.XRefEntryException(`Bad (compressed) XRef entry: ${t}`);return e}async fetchIfRefAsync(t,e){return t instanceof n.Ref?this.fetchAsync(t,e):t}async fetchAsync(t,e){try{return this.fetch(t,e)}catch(i){if(!(i instanceof o.MissingDataException))throw i;return await this.pdfManager.requestRange(i.begin,i.end),this.fetchAsync(t,e)}}getCatalogObj(){return this.root}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var r=i(2);const n=1,o=2,s=1,a=2,l=3,c=4,h=5,u=6,p=7,d=8;function f(t){switch(t instanceof Error||"object"==typeof t&&null!==t||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new r.AbortException(t.message);case"MissingPDFException":return new r.MissingPDFException(t.message);case"PasswordException":return new r.PasswordException(t.message,t.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new r.UnknownErrorException(t.message,t.details);default:return new r.UnknownErrorException(t.message,t.toString())}}e.MessageHandler=class{constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=t=>{const e=t.data;if(e.targetName!==this.sourceName)return;if(e.stream)return void this._processStreamMessage(e);if(e.callback){const t=e.callbackId,i=this.callbackCapabilities[t];if(!i)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],e.callback===n)i.resolve(e.data);else{if(e.callback!==o)throw new Error("Unexpected callback case");i.reject(f(e.reason))}return}const r=this.actionHandler[e.action];if(!r)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const t=this.sourceName,s=e.sourceName;new Promise((function(t){t(r(e.data))})).then((function(r){i.postMessage({sourceName:t,targetName:s,callback:n,callbackId:e.callbackId,data:r})}),(function(r){i.postMessage({sourceName:t,targetName:s,callback:o,callbackId:e.callbackId,reason:f(r)})}))}else e.streamId?this._createStreamSink(e):r(e.data)},i.addEventListener("message",this._onComObjOnMessage)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const n=this.callbackId++,o=(0,r.createPromiseCapability)();this.callbackCapabilities[n]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:e},i)}catch(t){o.reject(t)}return o.promise}sendWithStream(t,e,i,n){const o=this.streamId++,a=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:i=>{const s=(0,r.createPromiseCapability)();return this.streamControllers[o]={controller:i,startCall:s,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:l,action:t,streamId:o,data:e,desiredSize:i.desiredSize},n),s.promise},pull:t=>{const e=(0,r.createPromiseCapability)();return this.streamControllers[o].pullCall=e,c.postMessage({sourceName:a,targetName:l,stream:u,streamId:o,desiredSize:t.desiredSize}),e.promise},cancel:t=>{(0,r.assert)(t instanceof Error,"cancel must have a valid reason");const e=(0,r.createPromiseCapability)();return this.streamControllers[o].cancelCall=e,this.streamControllers[o].isClosed=!0,c.postMessage({sourceName:a,targetName:l,stream:s,streamId:o,reason:f(t)}),e.promise}},i)}_createStreamSink(t){const e=t.streamId,i=this.sourceName,n=t.sourceName,o=this.comObj,s=this,a=this.actionHandler[t.action],u={enqueue(t,s=1,a){if(this.isCancelled)return;const l=this.desiredSize;this.desiredSize-=s,l>0&&this.desiredSize<=0&&(this.sinkCapability=(0,r.createPromiseCapability)(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:i,targetName:n,stream:c,streamId:e,chunk:t},a)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:n,stream:l,streamId:e}),delete s.streamSinks[e])},error(t){(0,r.assert)(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:n,stream:h,streamId:e,reason:f(t)}))},sinkCapability:(0,r.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[e]=u,new Promise((function(e){e(a(t.data,u))})).then((function(){o.postMessage({sourceName:i,targetName:n,stream:d,streamId:e,success:!0})}),(function(t){o.postMessage({sourceName:i,targetName:n,stream:d,streamId:e,reason:f(t)})}))}_processStreamMessage(t){const e=t.streamId,i=this.sourceName,n=t.sourceName,o=this.comObj,g=this.streamControllers[e],m=this.streamSinks[e];switch(t.stream){case d:t.success?g.startCall.resolve():g.startCall.reject(f(t.reason));break;case p:t.success?g.pullCall.resolve():g.pullCall.reject(f(t.reason));break;case u:if(!m){o.postMessage({sourceName:i,targetName:n,stream:p,streamId:e,success:!0});break}m.desiredSize<=0&&t.desiredSize>0&&m.sinkCapability.resolve(),m.desiredSize=t.desiredSize,new Promise((function(t){t(m.onPull&&m.onPull())})).then((function(){o.postMessage({sourceName:i,targetName:n,stream:p,streamId:e,success:!0})}),(function(t){o.postMessage({sourceName:i,targetName:n,stream:p,streamId:e,reason:f(t)})}));break;case c:if((0,r.assert)(g,"enqueue should have stream controller"),g.isClosed)break;g.controller.enqueue(t.chunk);break;case l:if((0,r.assert)(g,"close should have stream controller"),g.isClosed)break;g.isClosed=!0,g.controller.close(),this._deleteStreamController(g,e);break;case h:(0,r.assert)(g,"error should have stream controller"),g.controller.error(f(t.reason)),this._deleteStreamController(g,e);break;case a:t.success?g.cancelCall.resolve():g.cancelCall.reject(f(t.reason)),this._deleteStreamController(g,e);break;case s:if(!m)break;new Promise((function(e){e(m.onCancel&&m.onCancel(f(t.reason)))})).then((function(){o.postMessage({sourceName:i,targetName:n,stream:a,streamId:e,success:!0})}),(function(t){o.postMessage({sourceName:i,targetName:n,stream:a,streamId:e,reason:f(t)})})),m.sinkCapability.reject(f(t.reason)),m.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(t,e){await Promise.allSettled([t.startCall&&t.startCall.promise,t.pullCall&&t.pullCall.promise,t.cancelCall&&t.cancelCall.promise]),delete this.streamControllers[e]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFWorkerStream=void 0;var r=i(2);e.PDFWorkerStream=class{constructor(t){this._msgHandler=t,this._contentLength=null,this._fullRequestReader=null,this._rangeRequestReaders=[]}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFWorkerStream.getFullReader can only be called once."),this._fullRequestReader=new n(this._msgHandler),this._fullRequestReader}getRangeReader(t,e){const i=new o(t,e,this._msgHandler);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}};class n{constructor(t){this._msgHandler=t,this.onProgress=null,this._contentLength=null,this._isRangeSupported=!1,this._isStreamingSupported=!1;const e=this._msgHandler.sendWithStream("GetReader");this._reader=e.getReader(),this._headersReady=this._msgHandler.sendWithPromise("ReaderHeadersReady").then((t=>{this._isStreamingSupported=t.isStreamingSupported,this._isRangeSupported=t.isRangeSupported,this._contentLength=t.contentLength}))}get headersReady(){return this._headersReady}get contentLength(){return this._contentLength}get isStreamingSupported(){return this._isStreamingSupported}get isRangeSupported(){return this._isRangeSupported}async read(){const{value:t,done:e}=await this._reader.read();return e?{value:void 0,done:!0}:{value:t.buffer,done:!1}}cancel(t){this._reader.cancel(t)}}class o{constructor(t,e,i){this._msgHandler=i,this.onProgress=null;const r=this._msgHandler.sendWithStream("GetRangeReader",{begin:t,end:e});this._reader=r.getReader()}get isStreamingSupported(){return!1}async read(){const{value:t,done:e}=await this._reader.read();return e?{value:void 0,done:!0}:{value:t.buffer,done:!1}}cancel(t){this._reader.cancel(t)}}}],e={};function i(r){var n=e[r];if(void 0!==n)return n.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,i),o.exports}i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{var t=r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"WorkerMessageHandler",{enumerable:!0,get:function(){return e.WorkerMessageHandler}});var e=i(1)})(),r})(),t.exports=e()},414:()=>{},172:()=>{},1:()=>{},779:()=>{},558:()=>{},258:()=>{}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var i=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(i.exports,i,i.exports,__webpack_require__),i.exports}__webpack_require__.d=(t,e)=>{for(var i in e)__webpack_require__.o(e,i)&&!__webpack_require__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__={};return(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Component:()=>V,FormKeyTrap:()=>_e,GridBase:()=>Ri,Key:()=>ge,KeyCode:()=>fe,KeyModifiers:()=>me,NavigationService:()=>we,Platform:()=>Te,ResizeService:()=>$i,ScrollSync:()=>Ie,Shortcut:()=>ye,TabKeyTrap:()=>Se,addClass:()=>Z,addComponentSuffix:()=>le,appendChildren:()=>Ht,areElementsOverlapping:()=>Ft,childrenWidth:()=>$t,clamp:()=>ue,closestAll:()=>Yt,closestDivisibleTo:()=>pe,columnResizableAutoFitAllColumns:()=>DI,columnResizableAutoFitColumns:()=>II,columnResizableSetColumns:()=>FI,converToKeyboardEventArgs:()=>P,convertToHtml:()=>j,convertToMouseEventArgs:()=>I,createCancellableTimerPromise:()=>A,deepExtend:()=>g,delay:()=>C,destroyChart:()=>VE,destroyColumnDraggable:()=>uI,destroyColumnReorderable:()=>yI,destroyColumnResizable:()=>PI,destroyComponent:()=>te,destroyGrid:()=>kq,destroyGroupable:()=>QP,destroyTileLayout:()=>oY,destroyTreeList:()=>AY,destroyVirtualColumnScroller:()=>hJ,disableFormTabKeyTrap:()=>Ae,enableFormTabKeyTrap:()=>Ce,extend:()=>u,findEditable:()=>pt,findFocusable:()=>ut,findNextSiblings:()=>yt,findPreviousSiblings:()=>mt,firstVisibleItem:()=>Dt,focusElement:()=>st,focusElementInNextFrame:()=>ot,focusFirstFocusableChild:()=>dt,focusInNextFrameAsync:()=>nt,focusTimePickerInput:()=>CP,getComponentInstance:()=>re,getComponentInstanceBySelector:()=>ne,getElementByDataId:()=>K,getElementById:()=>G,getElementIndex:()=>Bt,getElementScrollHeight:()=>X,getIntersectionRect:()=>Rt,getLocationHost:()=>h,getMaxScrollLeft:()=>It,getScrollBarHeight:()=>Ct,getScrollBarWidth:()=>kt,getSiblings:()=>bt,getSlotMetrics:()=>AK,groupBy:()=>z,guid:()=>m,hasAncestor:()=>lt,hasAnyClass:()=>et,hasClass:()=>tt,hasValue:()=>k,haveSameParent:()=>Nt,hideAnimationGroup:()=>hr,hideAnimationGroupAsync:()=>cr,hideElement:()=>J,htmlEncode:()=>_,initActionSheet:()=>Xi,initAnimationGroup:()=>ar,initAutoComplete:()=>YI,initBreadcrumb:()=>EE,initCalendar:()=>RP,initCheckBox:()=>Oq,initChip:()=>OJ,initChipList:()=>MJ,initColorGradient:()=>eM,initColorPalette:()=>GE,initColorPicker:()=>JE,initColumnDraggable:()=>hI,initColumnMenu:()=>lM,initColumnReorderable:()=>mI,initColumnResizable:()=>MI,initComboBox:()=>QI,initComponent:()=>Qt,initComponentLoaderContainer:()=>Bi,initContextMenu:()=>uM,initDateInput:()=>dP,initDatePicker:()=>vP,initDateRangePicker:()=>HP,initDateTimePicker:()=>BP,initDayTable:()=>SK,initDialog:()=>WP,initDrawer:()=>jI,initDropDownGroupHeader:()=>xD,initDropDownList:()=>oD,initEditor:()=>IV,initFileManager:()=>RV,initFileSelect:()=>nJ,initFilter:()=>$V,initFilterMenu:()=>XV,initFilterRow:()=>eq,initFlatColorPicker:()=>nM,initGantt:()=>sq,initGanttTimeline:()=>aq,initGrid:()=>Sq,initGroupable:()=>ZP,initListFilter:()=>vD,initMaskedTextBox:()=>Yq,initMediaQuery:()=>xX,initMenuItem:()=>OW,initMonthTable:()=>kK,initMultiColumnComboBox:()=>dD,initMultiSelect:()=>cD,initNumericTextBox:()=>iW,initOrUpdateArcGauge:()=>dq,initOrUpdateBarcode:()=>kE,initOrUpdateChart:()=>HE,initOrUpdateCircularGauge:()=>gq,initOrUpdateLinearGauge:()=>yq,initOrUpdateMap:()=>gX,initOrUpdateQRCode:()=>AE,initOrUpdateRadialGauge:()=>bq,initOrUpdateSignature:()=>MK,initPager:()=>OX,initPanelBar:()=>DX,initPdfViewer:()=>vG,initPopup:()=>lK,initRangeSlider:()=>kW,initScheduler:()=>xK,initSlider:()=>bW,initSplitButton:()=>zK,initSplitter:()=>tY,initStepper:()=>DW,initSwitch:()=>dW,initTabStrip:()=>VW,initTextArea:()=>cW,initTextBox:()=>hW,initTileLayout:()=>nY,initTimeCarousel:()=>AP,initTimePicker:()=>kP,initTimelineTable:()=>CK,initToggleButton:()=>cY,initToolBar:()=>hX,initTooltip:()=>xY,initTreeList:()=>CY,initTreeView:()=>YW,initUpload:()=>rJ,initVirtualColumnScroller:()=>cJ,initVirtualScroller:()=>dJ,initWindow:()=>kJ,invokeComponentMethod:()=>he,isArray:()=>b,isChild:()=>it,isDefined:()=>x,isDomElement:()=>f,isFocusable:()=>ht,isFunction:()=>y,isHtmlElement:()=>d,isNotNull:()=>S,isObject:()=>p,isString:()=>v,isTargetAfterElement:()=>Lt,isVisible:()=>ct,isWholeElementInView:()=>Pt,mousewheelDelta:()=>$,noop:()=>T,offsetWidth:()=>Ut,ownsElement:()=>q,ownsElementOrSelf:()=>W,parseAttrToInt:()=>N,parseStyleAttrToInt:()=>B,removeChildren:()=>Vt,removeClass:()=>Q,removeComponentInstance:()=>se,removeComponentSuffix:()=>ce,roughlyEqual:()=>de,runInNextFrameAsync:()=>rt,saveFile:()=>O,scrollListToItem:()=>St,setCarouselSelectedIndex:()=>_P,setComponentInstance:()=>oe,setComponentOptions:()=>ee,setElementValue:()=>at,setIndeterminate:()=>wt,setOptions:()=>ie,setPosition:()=>xt,setScrollbarSizeCssVariables:()=>jt,showAnimationGroup:()=>ur,showAnimationGroupAsync:()=>lr,showElement:()=>Y,stringifyToStyle:()=>E,supportsTouchEvents:()=>c,toArray:()=>w,toAttrQuerySelector:()=>F,toAttrValueQuerySelector:()=>R,toClassSelector:()=>L,toDataAttr:()=>D,toPixel:()=>U,unwrapElement:()=>Gt,unwrapElements:()=>Kt,updateDateInputValue:()=>fP,wrapElement:()=>qt,wrapElements:()=>Wt,wrapInnerElement:()=>Xt});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{IntlError:()=>gr,cldr:()=>br,currencyDisplay:()=>vn,currencyDisplays:()=>yn,currencyFractionOptions:()=>bn,dateFieldName:()=>on,dateFormatNames:()=>sn,errors:()=>vr,firstDay:()=>An,format:()=>ms,formatDate:()=>Bo,formatNumber:()=>Qn,load:()=>rn,localeCurrency:()=>xn,localeInfo:()=>xr,numberSymbols:()=>On,parseDate:()=>ls,parseNumber:()=>oo,setData:()=>nn,splitDateFormat:()=>ds,territoryCurrencyCode:()=>wn,toIntlErrors:()=>yr,toString:()=>gs,weekendRange:()=>Tn});var e={};__webpack_require__.r(e),__webpack_require__.d(e,{DEG_TO_RAD:()=>Wa,LRUCache:()=>kl,MAX_NUM:()=>Xa,MIN_NUM:()=>Ga,TextMetrics:()=>Pl,append:()=>za,arabicToRoman:()=>$a,bindEvents:()=>cl,createPromise:()=>Ha,defined:()=>ea,definitionId:()=>qa,deg:()=>Ka,elementOffset:()=>hl,elementPadding:()=>gl,elementScale:()=>xl,elementSize:()=>dl,elementStyles:()=>ul,encodeBase64:()=>Za,eventCoordinates:()=>Qa,eventElement:()=>tl,hashKey:()=>Tl,isTransparent:()=>el,last:()=>il,limitValue:()=>rl,measureText:()=>Il,mergeSort:()=>nl,normalizeText:()=>Al,now:()=>ol,objectKey:()=>_l,promiseAll:()=>sl,rad:()=>al,round:()=>Ea,unbindEvents:()=>fl,valueOrDefault:()=>ll});var i={};function r(t,e,i){void 0===i&&(i={});var r=l;if(i.forceProxy&&!i.proxyURL)throw new Error("No proxyURL is set, but forceProxy is true");i.forceProxy||(o()&&(r=a),navigator.msSaveBlob&&(r=s)),r(t,e,i)}__webpack_require__.r(i),__webpack_require__.d(i,{easeOutElastic:()=>_u,linear:()=>Au,swing:()=>Cu});var n=function(){return document.createElement("a")},o=function(){return"download"in n()};function s(t,e){var i=t;if("string"==typeof t){for(var r=t.split(";base64,"),n=r[0],o=atob(r[1]),s=new Uint8Array(o.length),a=0;a<o.length;a++)s[a]=o.charCodeAt(a);i=new Blob([s.buffer],{type:n})}navigator.msSaveBlob(i,e)}function a(t,e){var i=t;window.Blob&&t instanceof Blob&&(i=URL.createObjectURL(t));var r=n();r.download=e,r.href=i;var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(o),setTimeout((function(){return URL.revokeObjectURL(i)}))}function l(t,e,i){if(i.proxyURL){var r=document.createElement("form");r.setAttribute("action",i.proxyURL),r.setAttribute("method","POST"),r.setAttribute("target",i.proxyTarget||"_self");var n=i.proxyData||{};n.fileName=e;var o=t.split(";base64,");for(var s in n.contentType=o[0].replace("data:",""),n.base64=o[1],n)if(n.hasOwnProperty(s)){var a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name",s),a.setAttribute("value",n[s]),r.appendChild(a)}document.body.appendChild(r),r.submit(),document.body.removeChild(r)}}String.fromCharCode;var c=()=>{var t="ontouchstart"in window;return Boolean(t)},h=()=>window.location.host,u=function(){return Object.assign(...arguments)},p=t=>t&&"object"==typeof t&&!Array.isArray(t),d=t=>t instanceof HTMLElement,f=t=>t instanceof Element,g=function t(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];if(!r.length)return e;var o=r.shift();if(p(e)&&p(o))for(var s in o)d(o[s])?e[s]=o[s]:p(o[s])?(e[s]||u(e,{[s]:{}}),t(e[s],o[s])):u(e,{[s]:o[s]});return t(e,...r)},m=()=>{var t,e,i="";for(t=0;t<32;t++)e=16*Math.random()|0,8!==t&&12!==t&&16!==t&&20!==t||(i+="-"),i+=(12===t?4:16===t?3&e|8:e).toString(16);return i},y=t=>"function"==typeof t,v=t=>"string"==typeof t,b=t=>Array.isArray(t),w=t=>Array.from(t),x=t=>void 0!==t,S=t=>null!==t,k=t=>x(t)&&S(t),C=t=>new Promise((e=>setTimeout(e,t))),A=t=>{var e,i;return{promise:new Promise((function(r,n){i=n,e=setTimeout((function(){r("timer done")}),t)})),cancel:function(){clearTimeout(e),i()}}},_=t=>String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),T=function(){},O=(t,e)=>{r(e,t)},E=t=>{var e=[],i=Object.entries(t);for(var[r,n]of i)if(x(n)){var o="".concat(M(r),": ").concat(n);e.push(o.toLowerCase())}return e.join("; ")},M=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2"),P=t=>({type:t.type,key:t.key,code:(t.keyCode||"").toString(),ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey}),I=t=>({type:t.type,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY,button:t.button,buttons:t.buttons,detail:t.detail,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey}),D=t=>"data-".concat(t),F=t=>"[".concat(t,"]"),R=(t,e)=>"[".concat(t,'="').concat(e,'"]'),L=t=>".".concat(t),N=(t,e)=>{if(!e)return-1;var i=e.getAttribute(t),r=parseInt(i,10);return Number.isNaN(r)?-1:r},B=(t,e)=>{if(!e)return 0;var i=e.style[t],r=parseInt(i,10);return Number.isNaN(r)?0:r},j=(t,e)=>{var i=(e||document).createElement("template");i.innerHTML=t.trim();var r=i.content;return r.childNodes.length>1?r.childNodes:r.firstChild},z=(t,e)=>t.reduce((function(t,i){var r=e instanceof Function?e(i):i[e];return(t[r]=t[r]||[]).push(i),t}),{}),U=t=>parseFloat(t)+"px",$=t=>{var e=0;return t.wheelDelta?e=-t.wheelDelta/120:t.detail&&(e=t.detail/3),e=e>0?Math.ceil(e):Math.floor(e)};function H(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class V{constructor(t,e){H(this,"options",{dotNetInstance:null,events:{}}),this.element=t,this.dotNetInstance=e.dotNetInstance}destroy(){this.element=null,this.dotNetInstance=null}extendOptions(t){this.options=g(this.options,t)}setOptions(t){this.options=t}invokeMethodAsync(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.dotNetInstance;if(i&&i.invokeMethodAsync&&t)return i.invokeMethodAsync(t,e)}trigger(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={defaultPrevented:!1,preventDefault:()=>{i.defaultPrevented=!0}};if(y(this.options.events[t]))return this.options.events[t](u(i,e,{sender:this})),i.defaultPrevented}}function q(t,e){if(!e)return!1;for(var i=e.parentNode;null!==i;){if(i===t)return!0;i=i.parentNode}return!1}function W(t,e){return t===e||q(t,e)}function X(t){return(K(t)||document.getElementById(t)).scrollHeight.toString()}function G(t,e){var i=R("id",t);return(e||document).querySelector(i)}function K(t,e){return(e||document).querySelector('[data-id="'.concat(t,'"]'))}var Y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t instanceof HTMLElement&&(t.style.display=e)},J=t=>{t instanceof HTMLElement&&(t.style.display="none")},Z=(t,e)=>{e.classList.add(t)},Q=(t,e)=>{e.classList.remove(t)},tt=(t,e)=>{if(e instanceof HTMLElement)return e.classList.contains(t)},et=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,i=0;i<t.length;i++)if(tt(t[i],e))return!0},it=(t,e)=>{for(var i=t;i&&i!==document;){if(e.indexOf(i)>=0)return!0;i=i.parentElement}return!1},rt=t=>C(33).then((()=>t())),nt=(t,e)=>rt((()=>{t&&t.focus&&t.focus({preventScroll:e})})),ot=(t,e)=>{var i=K(t);i&&nt(i,e)},st=(t,e)=>{var i=K(t);i instanceof HTMLElement&&i.focus({preventScroll:e})},at=(t,e)=>{var i=K(t);i instanceof HTMLElement&&(i.value=e)},lt=function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t instanceof HTMLElement&&t.closest(e);return i?Boolean(r):r&&!t.matches(e)},ct=t=>"none"!==window.getComputedStyle(t).display,ht=t=>{var e=t.nodeName.toLowerCase(),i=/input|^a$|area|iframe|select|textarea|button|object/.test(e),r=t.tabIndex>-1;return(i||r)&&ct(t)&&!t.disabled},ut=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=gt(t,ht,e);return i},pt=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=gt(t,ft,e);return i},dt=(t,e)=>{var i=K(t)||document.getElementById(t);if(i){var r=ut(i,!1);r instanceof HTMLElement&&setTimeout((()=>{r.focus({preventScroll:e})}),33)}},ft=t=>{var e=ht(t),i=(t.tagName||"").toLowerCase(),r="span"===i,n=r&&t.classList.contains("k-switch"),o=r&&t.classList.contains("k-dropdownlist");return e&&i&&(/input|^a$|area|select|textarea|button/.test(i)||n||o)},gt=function t(e,i){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return null;if(r&&i(e))return e;for(e=e.firstElementChild;e;){var n=t(e,i,!0);if(n)return n;e=e.nextElementSibling}},mt=(t,e)=>vt(t,e,"previousElementSibling"),yt=(t,e)=>vt(t,e,"nextElementSibling"),vt=(t,e,i)=>{if(!t)return null;for(var r=[],n=t[i];n;)(!e||y(e)&&e(n))&&r.push(n),n=n[i];return r},bt=t=>t&&t.parentNode?Array.from(t.parentNode.children):[],wt=(t,e)=>{var i=K(t)||document.getElementById(t);i&&(i.indeterminate=e)},xt=(t,e,i)=>{var r=K(t)||document.getElementById(t);r&&(r.style.top=e,r.style.left=i)},St=(t,e,i)=>{var r=K(t)||document.getElementById(t),n="UL"===r.tagName?r:r.getElementsByTagName("ul")[0],o=n.getElementsByTagName("li")[e],s=i&&Tt(n.parentElement)?n.parentElement:null,a=s||n.offsetParent;if(o&&a){var l=a.scrollTop,c=l+a.offsetHeight,h=o.offsetTop,u=h+o.offsetHeight;u>c?a.scrollTop+=u-c:h<l&&(a.scrollTop=h)}},kt=t=>!t||t&&Tt(t)?At().width:0,Ct=t=>!t||t&&_t(t)?At().height:0,At=()=>{var t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",document.body.appendChild(t);var e=document.createElement("div");t.appendChild(e);var i=t.offsetWidth-e.offsetWidth,r=t.offsetHeight-e.offsetHeight;return t.parentNode.removeChild(t),{width:i,height:r}},_t=t=>Ot(t)&&t.clientWidth<t.scrollWidth,Tt=t=>Et(t)&&t.clientHeight<t.scrollHeight,Ot=t=>Mt(t,"overflow-x"),Et=t=>Mt(t,"overflow-y"),Mt=(t,e)=>{var i=window.getComputedStyle(t)[e];return i.indexOf("auto")>-1||i.indexOf("scroll")>-1},Pt=(t,e)=>{if(!t||!e)return!1;var i=t.getBoundingClientRect(),r=e.getBoundingClientRect();return i.top+i.height>=r.top&&i.bottom<=r.bottom&&i.left+i.width>=r.left&&i.right<=r.right},It=t=>d(t)?t.scrollWidth-t.clientWidth:0,Dt=(t,e)=>{for(var i,r=t.scrollTop,n=t.querySelectorAll(e),o=0;o<n.length;o++)if(n[o].offsetTop+n[o].clientHeight>r){i=n[o];break}return i},Ft=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!t||!e||t===e)return!1;var r=t.getBoundingClientRect(),n=e.getBoundingClientRect(),o=r.top+i<=n.bottom&&r.bottom-i>=n.top&&r.left+i<=n.right&&r.right-i>=n.left;return o},Rt=(t,e)=>{var i=Ft(t,e);if(!t||!e||t===e||!i)return{width:0,height:0};var r=t.getBoundingClientRect(),n=e.getBoundingClientRect(),o=Math.max(r.left,n.left),s=Math.max(r.top,n.top),a=Math.min(r.right,n.right),l=Math.min(r.bottom,n.bottom);return{x:o,y:s,top:s,left:o,right:a,bottom:l,width:a-o,height:l-s}},Lt=(t,e)=>!(!t||!e)&&(Nt(t,e)&&Bt(t)>Bt(e)),Nt=(t,e)=>!(!d(t)||!d(e))&&t.parentNode===e.parentNode,Bt=(t,e)=>{if(!t)return[].indexOf(t);var i=Array.from(t.parentElement.children);return e&&(i=i.filter((t=>t.matches(e)))),Array.from(i).indexOf(t)},jt=()=>{var t=At();zt("--kendo-scrollbar-width","".concat(t.width,"px")),zt("--kendo-scrollbar-height","".concat(t.height,"px"))},zt=(t,e)=>{var i=document.documentElement;i&&i.style.setProperty(t,e)},Ut=t=>{var e=window.getComputedStyle(t),i=parseFloat(e.marginLeft)+parseFloat(e.marginRight);return t.offsetWidth+i},$t=t=>{if(t)return[...t.children].reduce(((t,e)=>t+Ut(e)),0)},Ht=(t,e)=>{if(e)for(var i=0;i<t.length;i++)e.appendChild(t[i])},Vt=t=>{if(t)for(;t.firstChild;)t.removeChild(t.firstChild)},qt=(t,e)=>{var i;t&&t.parentNode&&e&&(v(e)?i=j(e):f(e)&&(i=e),t.parentNode.insertBefore(i,t),i.appendChild(t))},Wt=(t,e)=>{if(t&&t.length&&!(t.length<=0)&&e)for(var i=0;i<t.length;i++)qt(t[i],e)},Xt=(t,e)=>{var i;if(t&&t.parentNode&&e)for(v(e)?i=j(e):f(e)&&(i=e),t.appendChild(i);t.firstChild!==i;)i.appendChild(t.firstChild)},Gt=t=>{var e=t.parentElement;t&&e.replaceWith(...e.childNodes)},Kt=t=>{if(t&&t.length&&!(t.length<=0))for(var e=0;e<t.length;e++)Gt(t[e])},Yt=(t,e)=>{for(var i=[],r=t.parentNode;r&&r!==document;)e?(r.matches(e)&&i.push(r),r=r.parentNode):(i.push(r),r=r.parentNode);return i},Jt="telerik",Zt=new RegExp("-".concat(Jt,"-.*$"),"ig");function Qt(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ce(e),n=K(r),o=re(e);if(!o){var s=new t(n,i);oe(e,s)}}function te(t){var e=re(t);e&&e.destroy&&(e.destroy(),e=null),se(t)}function ee(t,e){t&&t.setOptions&&t.setOptions(e)}function ie(t,e){ee(ae()[t],e)}function re(t){return ae()[t]}function ne(t,e){var i=t&&t.closest(e);return i?re(i.getAttribute("data-id")):null}function oe(t,e){ae()[t]=e}function se(t){delete(window.TelerikBlazor._instances||{})[t]}var ae=()=>{if(void 0===window.TelerikBlazor)throw new Error("The telerik-blazor.js script is not loaded");return window.TelerikBlazor._instances=window.TelerikBlazor._instances||{},window.TelerikBlazor._instances},le=(t,e)=>"".concat(t,"-").concat(Jt,"-").concat(e),ce=t=>t.replace(Zt,"");function he(t,e,i){var r=re(e);if(r&&y(r[t]))return r[t](i)}var ue=(t,e,i)=>Math.min(i,Math.max(e,t));function pe(t,e){var i=t%e,r=t-i,n=t+e-i;return r+n<2*t?n:r}function de(t,e,i){var{decimals:r=0}=i;if(t&&e)return t.toFixed(r)===e.toFixed(r)}var fe={DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,ARROWLEFT:37,ARROWUP:38,ARROWRIGHT:39,ARROWDOWN:40,SPACE:32,END:35,HOME:36,PAGE_UP:33,PAGE_DOWN:34,PAGEUP:33,PAGEDOWN:34},ge={DELETE:"Delete",BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESC:"Escape",ARROWLEFT:"ArrowLeft",ARROWUP:"ArrowUp",ARROWRIGHT:"ArrowRight",ARROWDOWN:"ArrowDown",SPACE:"Space",END:"End",HOME:"Home",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown"},me={CTRL:"CTRL",ALT:"ALT",SHIFT:"SHIFT"};class ye{static equals(t,e){return t.ctrl===e.ctrl&&t.alt===e.alt&&t.shift===e.shift&&t.code===e.code}constructor(t){"string"==typeof t?this._initFromString(t):t instanceof KeyboardEvent&&this._initFromEvent(t)}_initFromString(t){var e=t.toUpperCase().split(/[\t-\r \+\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/);for(var i of e)switch(i){case me.CTRL:this.ctrl=!0;break;case me.ALT:this.alt=!0;break;case me.SHIFT:this.shift=!0;break;default:this.code=this._toNormalizedCode(i)}this.name=t}_initFromEvent(t){this.name="",t.ctrlKey&&(this.ctrl=t.ctrlKey,this.name+="".concat(me.CTRL," ")),t.shiftKey&&(this.shift=t.shiftKey,this.name+="".concat(me.SHIFT," ")),t.altKey&&(this.alt=t.altKey,this.name+="".concat(me.ALT," ")),this.code=t.keyCode,this.name+=t.key}_toNormalizedCode(t){return fe[t.toUpperCase()]}}function ve(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var be="keydown";class we{constructor(t){ve(this,"onNavigate",(t=>{var e=new ye(t),i=1===e.name.length,r=this.shortcuts.find((t=>ye.equals(t,e)))||i&&this.shortcuts.find((t=>"printableKey"===t.name));r&&this.callbacks[r.name].forEach((i=>{i(e,t)||(t.preventDefault(),t.stopPropagation())}))})),this.element=t,this.callbacks={},this.shortcuts=[],this.bindEvents()}destroy(){this.unbindEvents(),this.element=this.callbacks=this.shortcuts=null}bindEvents(){this.element.addEventListener(be,this.onNavigate)}unbindEvents(){this.element.removeEventListener(be,this.onNavigate)}bind(t,e){var i=Array.isArray(t)?t:[t];for(var r of i){var n=new ye(r);this.callbacks[n.name]=this.callbacks[n.name]||[],this.shortcuts.push(n),this.callbacks[n.name].push(e)}}}function xe(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class Se{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex], *[contenteditable]";xe(this,"disableTabKeyTrap",(()=>{this.element&&this.element.removeEventListener("keydown",this.onKeyDown)})),xe(this,"onKeyDown",(t=>{this.tryFindEdgeElements()?t.keyCode===fe.TAB&&(t.shiftKey?document.activeElement===this.firstElement&&(this.lastElement.focus(),t.preventDefault()):document.activeElement===this.lastElement&&(this.firstElement.focus(),t.preventDefault())):this.element.removeEventListener("keydown",this.onKeyDown)})),this.element=t,this.focusableElementsSelector=e}destroy(){this.disableTabKeyTrap(),this.element=null,this.firstElement=null,this.lastElement=null}enableKeyTrap(){this.element&&this.element.addEventListener("keydown",this.onKeyDown)}tryFindEdgeElements(){return this.findEdgeElements(),this.firstElement&&this.lastElement}findEdgeElements(){var t=this.element.querySelectorAll(this.focusableElementsSelector);this.firstElement=t[0],this.lastElement=t[t.length-1]}}function ke(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Ce=t=>{_e&&_e.instanceMap&&rt((()=>{var e=K(t);if(e&&!_e.instanceMap[t]){var i=new _e(e);_e.instanceMap[t]=i,i.enableKeyTrap()}}))},Ae=t=>{if(_e&&_e.instanceMap){var e=_e.instanceMap[t];e&&e.disableTabKeyTrap()}};class _e{constructor(t){ke(this,"disableTabKeyTrap",(()=>{this.firstElement&&this.firstElement.removeEventListener("keydown",this.onFirstElementKeyDown),this.lastElement&&this.lastElement.removeEventListener("keydown",this.onLastElementKeyDown)})),ke(this,"onFirstElementKeyDown",(t=>{t.keyCode===fe.TAB&&t.shiftKey&&(t.preventDefault(),this.lastElement&&this.lastElement.focus())})),ke(this,"onLastElementKeyDown",(t=>{t.keyCode!==fe.TAB||t.shiftKey||(t.preventDefault(),this.firstElement&&this.firstElement.focus())})),t&&(this.element=t,this.firstElement=ut(t,!1),this.lastElement=(t=>{if(t.length)return t[t.length-1]})(t.querySelectorAll("button, .k-button")))}destroy(){this.disableTabKeyTrap(),this.element=null,this.firstElement=null,this.lastElement=null}enableKeyTrap(){this.element&&this.firstElement&&this.lastElement&&(this.firstElement.addEventListener("keydown",this.onFirstElementKeyDown),this.lastElement.addEventListener("keydown",this.onLastElementKeyDown))}}ke(_e,"instanceMap",{});class Te{static get webAssembly(){return Boolean(window.Blazor&&window.Blazor.platform)}static get serverSideBlazor(){return Boolean(window.Blazor&&window.Blazor.reconnect)}static get firefox(){return Boolean(/Firefox/i.test(navigator.userAgent))}}function Oe(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Ee="scroll",Me="scrollLeft",Pe="horizontal";class Ie extends V{constructor(t,e){super(t,e),Oe(this,"options",{horizontal:!0,vertical:!0,minScrollDelta:1,syncFromConnections:!1,connections:[]}),Oe(this,"onScroll",(t=>{var e=t.currentTarget;(this.options.syncFromConnections?this.scrollableElements:this.connections).filter((t=>t!==e)).forEach((t=>{this.syncScroll(e,t,{orientation:Pe}),this.syncScroll(e,t,{orientation:"vertical"})}))})),this.extendOptions(e),this.connections=this.options.connections.filter(d),this.scrollableElements=this.getScrollableElements(),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.forEachScrollableElement((t=>{t.addEventListener(Ee,this.onScroll)}))}unbindEvents(){this.forEachScrollableElement((t=>{t.removeEventListener(Ee,this.onScroll)}))}syncScroll(t,e,i){var{orientation:r=Pe}=i,n=r===Pe?Me:"scrollTop",o=n===Me?"dataScrollLeft":"dataScrollTop",s=t[n],a=t[o]||0,l=e[n],c=e[o],h=a!==s||c!==s,u=It(this.element)>0;if(this.options[r]&&h&&u){var p=Math.abs(a-s),d=Math.abs(l-s),f=this.options.minScrollDelta;(p>=f||d>=10*f)&&(e[o]=s,e[n]=s)}}getScrollableElements(){var t=[];return this.options.syncFromConnections&&(t=this.connections),[this.element,...t]}forEachScrollableElement(t){this.forEachElement(this.scrollableElements,t)}forEachConnection(t){this.forEachElement(this.connections,t)}forEachElement(){var t=arguments.length>1?arguments[1]:void 0;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((e=>{d(e)&&y(t)&&t(e)}))}}var De=t=>et(["k-grid-content-sticky","k-grid-header-sticky","k-grid-footer-sticky"],t);function Fe(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Re="data-col-index",Le="data-render-row-index",Ne="nearest",Be=Array.from,je="right",ze="left";class Ue extends V{constructor(t,e){super(t,e),Fe(this,"options",{navigable:!1,incellEdit:!1,columnVirtualization:!1,virtualScrollDelay:66.66666666666667,events:{removeFocus:null,blur:null,incellEditBlur:null},rowSelector:t=>"tr[data-render-row-index='".concat(t,"']"),columnSelector:t=>"[".concat(Re,"='").concat(t,"']"),cellNavigationSelector:t=>"[".concat("data-cell-navigation-id","='").concat(t,"']"),groupRowClass:"k-grouping-row",headerClass:"k-grid-header",contentClass:"k-grid-content",editRowClass:"k-grid-edit-row",filterRowClass:"k-filter-row",lockedHeaderClass:"k-grid-header-sticky"}),Fe(this,"onClick",(t=>{"input"===t.target.tagName.toLowerCase()&&t.stopPropagation()})),Fe(this,"onKeyDown",(t=>{var e=this.options.navigable&&[fe.ARROWRIGHT,fe.ARROWLEFT,fe.ARROWUP,fe.ARROWDOWN,fe.PAGE_DOWN,fe.PAGE_UP,fe.HOME,fe.END,fe.SPACE].includes(t.keyCode),i=t.keyCode===fe.SPACE&&tt("k-checkbox",t.target),r=e&&!i&&(t.target.matches("td")||t.target.matches("th")),n=t.keyCode===fe.TAB&&this.options.incellEdit&&t.target.closest(".k-grid-edit-row");(r||n)&&t.preventDefault()})),Fe(this,"onFocusOut",(t=>{var e=t.target.closest("[".concat(Re,"]")),i=e?e.closest("tr"):null,r=i&&i.hasAttribute(Le)?parseInt(i.getAttribute(Le)):null,n=e&&e.hasAttribute(Re)?parseInt(e.getAttribute(Re)):null,o={originalEvent:t};null!==r&&null!==n&&(o.rowIndex=r,o.columnIndex=n,o.isChildFocused=e&&!t.target.hasAttribute(Re)),this.options.incellEdit&&t.target&&t.target.closest(".k-grid-edit-cell")&&(!t.relatedTarget&&document.activeElement===document.body||t.relatedTarget&&!this.element.contains(t.relatedTarget)&&!t.relatedTarget.closest(".k-popup")||t.relatedTarget&&t.relatedTarget.closest(".k-detail-row,.k-grid-search,.k-filter-row,.k-pager")&&this.element.contains(t.relatedTarget.closest(".k-detail-row,.k-grid-search,.k-filter-row,.k-pager")))&&this.triggerIncellEditBlur(o),this.options.navigable&&(!t.relatedTarget||this.element.contains(t.relatedTarget)&&!t.relatedTarget.closest(".k-detail-row,.k-grid-toolbar")||t.relatedTarget.closest(".k-window")||t.relatedTarget.closest(".k-grid-filter-popup")?this.triggerBlur(o):this.triggerRemoveFocus())})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener("keydown",this.onKeyDown),this.element.addEventListener("focusout",this.onFocusOut),this.options.navigable&&this.element.addEventListener("click",this.onClick)}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown),this.element.removeEventListener("focusout",this.onFocusOut),this.options.navigable&&this.element.removeEventListener("click",this.onClick)}focusCell(t){var{rowIndex:e,columnIndex:i,isChildFocused:r,cellNavigationId:n,keyboardEventArgs:o}=t,s=this.getRow(e),a=n>=0?this.element.querySelector(this.options.cellNavigationSelector(n)):null;if(a)this.focusElement(a);else if(s){if(tt("k-grouping-row",s))a=s.querySelector("td[role='gridcell']");else if(!(a=s.querySelector(this.options.columnSelector(i)))){if(this.hasNavigableVirtualColumns())return;var l=s.querySelector("[".concat(Re,"]"));parseInt(l.attributes["".concat(Re)].value)>i&&(a=l)}if(a)if(this.hasNavigableVirtualColumns()){var c=this.hasEditRow(),h=this.isCellInFilterRow(e,i);if(r&&(c||h))this.focusEditable({rowIndex:e,columnIndex:i});else{var u=this.getKeyboardDirection(o);this.scrollIntoView(a,u),this.focusElement(a)}}else this.focusElement(a)}}focusElement(t){t instanceof HTMLElement&&t!==document.activeElement&&t.focus()}selectElement(t){t instanceof HTMLElement&&y(t.select)&&t.select()}selectAndFocusElement(t){t!==document.activeElement&&(this.selectElement(t),this.focusElement(t))}focusEditable(t){var{rowIndex:e,columnIndex:i}=t;clearTimeout(this.selectAndFocusTimeout),setTimeout((()=>{var t=this.getCell(e,i),r=pt(t,!1);if(d(r)&&r.tabIndex<0){var n=ut(t,!1);r=n||t}this.scrollIntoView(t),this.options.columnVirtualization?this.selectAndFocusTimeout=setTimeout((()=>{this.selectAndFocusElement(r)}),2*this.options.virtualScrollDelay):this.selectAndFocusElement(r)}),1)}focusFirstFocusable(t){var{rowIndex:e,columnIndex:i}=t;setTimeout((()=>{this.focusCellChild(e,i,ut)}),1)}focusCellChild(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ut,r=this.getCell(t,e),n=r?i(r,!1):null;this.focusElement(n)}getRow(t){var e=this.element.parentElement.closest(".k-grid");return e&&e!==this.element?this.element.querySelector(this.options.rowSelector(t)):Array.from(this.element.querySelectorAll(this.options.rowSelector(t))).filter((t=>null===t.closest(".k-detail-row")))[0]}getCell(t,e){var i=this.getRow(t);if(i)return i.querySelector(this.options.columnSelector(e))}triggerRemoveFocus(){this.trigger("removeFocus")}triggerBlur(t){this.trigger("blur",t)}triggerIncellEditBlur(t){this.trigger("incellEditBlur",t)}scrollIntoView(t,e){if(this.preventScrollIntoView)this.preventScrollIntoView=!1;else{var i=t.closest(F(Re)),r=i?i.closest("tr"):null;if(t&&i&&!De(i)&&r){var n=this.getClosestOverlappingLockedCell(i),o=this.hasSpaceToScrollIntoView(i),s=Pt(i,this.getContentElement());n&&o?(s||this.scrollElementIntoView(i),this.scrollToLockedCell(n,i,e)):!this.hasLockedColumns()||s||o?n||!o?this.scrollToCell(i):this.scrollElementIntoView(t):this.scrollToCell(i)}}}scrollToCell(t){var e=this.getContentElement(),i=mt(t,(t=>!De(t))),r=this.getTotalCellsWidth(i);r!==e.scrollLeft&&(this.preventScrollIntoView=!0,e.scrollLeft=r)}scrollToLockedCell(t,e,i){var r=this.getContentElement(),n=this.getIntersectionOffset(e,t,i);0!==n&&(this.preventScrollIntoView=!0,r.scrollLeft+=n)}scrollElementIntoView(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{horizontalAlign:Ne,verticalAlign:Ne};t&&t.scrollIntoView&&t.scrollIntoView({inline:e.horizontalAlign||Ne,block:e.verticalAlign||Ne})}scrollAndFocusFirstCell(t){this.scrollAndFocusCell({scrollLeft:0,rowIndex:t.rowIndex,columnIndex:t.columnIndex})}scrollAndFocusLastCell(t){var e=this.getContentElement(),i=It(e);this.scrollAndFocusCell({scrollLeft:i,rowIndex:t.rowIndex,columnIndex:t.columnIndex})}scrollAndFocusCell(t){var{scrollLeft:e,rowIndex:i,columnIndex:r}=t;this.getContentElement().scrollLeft=e,setTimeout((()=>{this.focusCell({rowIndex:i,columnIndex:r})}),2*this.options.virtualScrollDelay)}getHeaderElement(){return this.element.querySelector(L(this.options.headerClass))}getContentElement(){return this.element.querySelector(L(this.options.contentClass))}hasEditRow(){var t=this.getContentElement();return t&&t.querySelector(L(this.options.editRowClass))}isCellInFilterRow(t,e){var i=this.getHeaderElement(),r=i?i.querySelector(L(this.options.filterRowClass)):null;if(!k(r))return!1;if(N(Le,r)===t){var n=Be(r.querySelectorAll("th[".concat(Re,"]")));return k(n[e])}return!1}hasLockedColumns(){var t=this.getHeaderElement();return t&&t.querySelector(L(this.options.lockedHeaderClass))}hasNavigableVirtualColumns(){return this.options.navigable&&this.options.columnVirtualization}hasSpaceToScrollIntoView(t){var e=bt(t).filter(De),i=this.getContentElement();return this.getTotalCellsWidth(e)+t.getBoundingClientRect().width<i.clientWidth}getTotalCellsWidth(t){return t.reduce(((t,e)=>t+e.getBoundingClientRect().width),0)}getClosestOverlappingLockedCell(t){if(!this.hasLockedColumns())return null;var e=mt(t),i=yt(t),r=e.concat(i).filter(De),n=null;for(var o of r)if(Ft(t,o)){n=o;break}return n}getKeyboardDirection(t){if(!t)return null;var e=t.key;return e===ge.ARROWRIGHT||e===ge.END?je:e===ge.ARROWLEFT||e===ge.HOME?ze:null}getIntersectionOffset(t,e,i){if(!Nt(t,e))return 0;var r=t.getBoundingClientRect(),n=e.getBoundingClientRect(),o=n.left<=r.left&&n.right<=r.right,s=r.left<=n.left&&r.right<=n.right,a=n.left<r.left&&n.right>r.right,l=r.left<n.left&&r.right>n.right,c=r.left===n.left&&r.right===n.right,h=Rt(t,e).width,u=r.width,p=n.width,d=0;return c?i===ze?d=-1*h:i===je&&(d=h):o?d=-1*h:s?d=-1*(u-h+p):a?d=n.right-r.right+u:l&&(d=-1*(n.right-r.left)),d}}var $e="col-initialization-index",He="cell-navigation-id",Ve=t=>R(D($e),t),qe=t=>{if(t.length)return t[t.length-1]},We=t=>{var{clientX:e,clientY:i}=t;if(x(e)&&x(i))return document.elementFromPoint(e,i)},Xe=t=>{var e=N(D("level"),t);return e>=0?e:1},Ge=t=>(t.getAttribute(D("has-children"))||"").toLowerCase()===(!0).toString(),Ke=t=>Je(t,D($e)),Ye=t=>Je(t,D("parent-col-initialization-index")),Je=(t,e)=>t?N(e,t):[].indexOf(t),Ze=(t,e)=>{for(var i=Ke(t),r=Qe(e),n=[],o=0;o<e.length;o++){var s=e[o],a=Ye(s),l=Ke(s),c=r.indexOf(s);if(a===i){n.push({parentIndex:a,index:l,leafIndex:c,element:s});var h=Ze(s,e);n=n.concat(h)}}return n},Qe=t=>t.filter((e=>t.every((t=>!ii(e,t))))),ti=(t,e)=>{var i=N(D(He),t),r=N(D(He),e);return i>r?1:i<r?-1:0},ei=(t,e)=>{var i=Ke(t),r=Ke(e);return i>r?1:i<r?-1:0},ii=(t,e)=>Ke(t)===Ye(e),ri=t=>{t.preventDefault&&t.preventDefault(),t.originalEvent&&t.originalEvent.preventDefault()},ni=t=>{var{clientTop:e,clientLeft:i}=(t=>t.ownerDocument.documentElement)(t),{pageYOffset:r,pageXOffset:n}=(t=>t.ownerDocument.defaultView)(t),{top:o,left:s}=t.getBoundingClientRect();return{top:o+r-e,left:s+n-i}},oi=t=>".".concat(t),si=function(t,e){return function(i){return e(t(i))}},ai=function(t,e,i){return t.addEventListener&&t.addEventListener(e,i)},li=function(t,e,i){return t&&t.removeEventListener&&t.removeEventListener(e,i)},ci=function(){},hi=function(t){return t.preventDefault()},ui=/touch/;function pi(t){return t.type.match(ui)?{pageX:t.changedTouches[0].pageX,pageY:t.changedTouches[0].pageY,clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY,type:t.type,originalEvent:t,isTouch:!0}:{pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY,offsetX:t.offsetX,offsetY:t.offsetY,type:t.type,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,originalEvent:t}}var di=function(t){var e=this,i=t.press;void 0===i&&(i=ci);var r=t.drag;void 0===r&&(r=ci);var n=t.release;void 0===n&&(n=ci);var o=t.mouseOnly;void 0===o&&(o=!1),this._pressHandler=si(pi,i),this._dragHandler=si(pi,r),this._releaseHandler=si(pi,n),this._ignoreMouse=!1,this._mouseOnly=o,this._touchstart=function(t){1===t.touches.length&&e._pressHandler(t)},this._touchmove=function(t){1===t.touches.length&&e._dragHandler(t)},this._touchend=function(t){0===t.touches.length&&1===t.changedTouches.length&&(e._releaseHandler(t),e._ignoreMouse=!0,setTimeout(e._restoreMouse,2e3))},this._restoreMouse=function(){e._ignoreMouse=!1},this._mousedown=function(t){var i=t.which;i&&i>1||e._ignoreMouse||(ai(e.document,"mousemove",e._mousemove),ai(e.document,"mouseup",e._mouseup),e._pressHandler(t))},this._mousemove=function(t){e._dragHandler(t)},this._mouseup=function(t){li(e.document,"mousemove",e._mousemove),li(e.document,"mouseup",e._mouseup),e._releaseHandler(t)},this._pointerdown=function(t){t.isPrimary&&0===t.button&&(ai(e.document,"pointermove",e._pointermove),ai(e.document,"pointerup",e._pointerup),ai(e.document,"pointercancel",e._pointerup),ai(e.document,"contextmenu",hi),e._pressHandler(t))},this._pointermove=function(t){t.isPrimary&&e._dragHandler(t)},this._pointerup=function(t){t.isPrimary&&(li(e.document,"pointermove",e._pointermove),li(e.document,"pointerup",e._pointerup),li(e.document,"pointercancel",e._pointerup),li(e.document,"contextmenu",hi),e._releaseHandler(t))}},fi={document:{configurable:!0}};di.supportPointerEvent=function(){return"undefined"!=typeof window&&window.PointerEvent},fi.document.get=function(){return this._element?this._element.ownerDocument:document},di.prototype.bindTo=function(t){t!==this._element&&(this._element&&this._unbindFromCurrent(),this._element=t,this._bindToCurrent())},di.prototype._bindToCurrent=function(){var t=this._element;this._usePointers()?ai(t,"pointerdown",this._pointerdown):(ai(t,"mousedown",this._mousedown),this._mouseOnly||(ai(t,"touchstart",this._touchstart),ai(t,"touchmove",this._touchmove),ai(t,"touchend",this._touchend)))},di.prototype._unbindFromCurrent=function(){var t=this._element;if(this._usePointers())return li(t,"pointerdown",this._pointerdown),li(this.document,"pointermove",this._pointermove),li(this.document,"pointerup",this._pointerup),li(this.document,"contextmenu",hi),void li(this.document,"pointercancel",this._pointerup);li(t,"mousedown",this._mousedown),this._mouseOnly||(li(t,"touchstart",this._touchstart),li(t,"touchmove",this._touchmove),li(t,"touchend",this._touchend))},di.prototype._usePointers=function(){return!this._mouseOnly&&di.supportPointerEvent()},di.prototype.update=function(t){var e=t.press;void 0===e&&(e=ci);var i=t.drag;void 0===i&&(i=ci);var r=t.release;void 0===r&&(r=ci);var n=t.mouseOnly;void 0===n&&(n=!1),this._pressHandler=si(pi,e),this._dragHandler=si(pi,i),this._releaseHandler=si(pi,r),this._mouseOnly=n},di.prototype.destroy=function(){this._unbindFromCurrent(),this._element=null},Object.defineProperties(di.prototype,fi),di.default=di;function gi(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class mi extends V{constructor(t,e){super(t,e),gi(this,"options",{id:m(),group:null,itemSelector:"",allowsDragFrom:()=>!0,allowsDropFrom:()=>!0,events:{dragEnter:null,dragLeave:null,dragOver:null,drop:null}}),this.extendOptions(e),oe(this.options.id,this),mi.InstancesByGroup[this.options.group]||(mi.InstancesByGroup[this.options.group]=new Set),mi.InstancesByGroup[this.options.group].add(this)}destroy(){mi.InstancesByGroup[this.options.group]&&mi.InstancesByGroup[this.options.group].delete(this),se(this.options.id),super.destroy()}triggerDragEnter(t){this.trigger("dragEnter",t)}triggerDragLeave(t){this.trigger("dragLeave",t)}triggerDragOver(t){this.trigger("dragOver",t)}triggerDrop(t){this.trigger("drop",t)}allowsDragFrom(t,e){return t&&t.options.group===this.options.group&&this.options.allowsDragFrom(t,e)}allowsDropFrom(t,e){return t&&t.options.group===this.options.group&&this.options.allowsDropFrom(t,e)}}function yi(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}gi(mi,"InstancesByGroup",{}),gi(mi,"forEachInstanceInGroup",((t,e)=>{var i=mi.InstancesByGroup[t]||new Set;for(var r of i)r&&r instanceof mi&&e(r)}));var vi=(t,e)=>!(!e||!t||!t.closest(e)&&!t.matches(e));class bi extends V{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),yi(this,"options",{events:{dragStart:null,drag:null,dragEnd:null,dropTargetEnter:null},offset:{x:0,y:0},filter:null,ignore:"",hint:null,group:null,ignoreElementUnderCursor:()=>!1,touchAction:"none"}),yi(this,"onPress",(t=>{this.dragStarted=!1,vi(t.originalEvent.target,this.options.ignore)?this.originalCurrentTarget=null:vi(t.originalEvent.target,this.options.filter)?(ri(t),this.originalCurrentTarget=t.originalEvent.target.closest(this.options.filter),this.dragStarted=!0,this.triggerDragStart(t)):this.originalCurrentTarget=null})),yi(this,"onDrag",(t=>{var e=u(t,{originalCurrentTarget:this.originalCurrentTarget});if(this.originalCurrentTarget&&(ri(e),this.dragStarted&&(this.processDropTargetIntersection(e),!this.triggerDrag(u(e,{dropTarget:this.getLastDropTarget()}))))){!this.hint&&this.options.hint&&(this.createHint(this.originalCurrentTarget),this.appendHint());var i=this.getOffset();this.dragHint({top:e.pageY+i.y,left:e.pageX+i.x}),this.triggerDropTargetDragOver(e)}})),yi(this,"onRelease",(t=>{this.originalCurrentTarget&&(ri(t),this.processDropTargetDrop(t),this.destroyHint(),this.triggerDragEnd(t))})),this.extendOptions(e),this.initDraggableEvents(t)}destroy(){this.destroyDraggableEvents(),this.destroyHint(),this.lastDropTargetId=null,this.originalCurrentTarget=null,super.destroy()}initDraggableEvents(){this.destroyDraggableEvents(),this.draggableEvents=new di({press:this.onPress,drag:this.onDrag,release:this.onRelease}),this.draggableEvents.bindTo(this.element),this.element.style.touchAction=this.options.touchAction}destroyDraggableEvents(){this.draggableEvents&&this.draggableEvents.destroy&&this.draggableEvents.destroy()}triggerDragStart(t){this.trigger("dragStart",t)}triggerDrag(t){return this.trigger("drag",t)}triggerDragEnd(t){this.trigger("dragEnd",t)}trigger(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return super.trigger(t,u(e,{originalCurrentTarget:this.originalCurrentTarget,elementUnderCursor:this.getElementUnderCursor(e)}))}triggerDropTargetDragEnter(t,e){t&&(t.triggerDragEnter(u(e,{draggable:this})),this.triggerDropTargetEnter(u(e,{dropTarget:t})))}triggerDropTargetEnter(t){this.trigger("dropTargetEnter",t)}triggerDropTargetDragLeave(t,e){t&&(t.triggerDragLeave(u(e,{draggable:this})),this.triggerDropTargetLeave(u(e,{dropTarget:t})))}triggerDropTargetLeave(t){this.trigger("dropTargetLeave",u(t,{dropTarget:this.dropTarget}))}triggerDropTargetDragOver(t){if(this.lastDropTargetId){var e=this.getLastDropTarget();if(!e)return;e.triggerDragOver(u(t,{draggable:this})),this.triggerDropTargetOver(u(t,{dropTarget:e}))}}triggerDropTargetOver(t){this.trigger("dropTargetOver",t)}triggerDropTargetDrop(t,e){var i=u(e,{elementUnderCursor:this.getElementUnderCursor(e)});t&&(t.allowsDropFrom(this,i)&&t.triggerDrop(u(i,{draggable:this})),this.triggerDrop(u(i,{dropTarget:t})))}triggerDrop(t){this.trigger("drop",t)}processDropTargetIntersection(t){var e=this.getElementUnderCursor(t),i=!1;this.forEachDropTarget((r=>{var n=r.element.contains(e);i=i||n,n&&this.lastDropTargetId!==r.options.id&&(this.triggerDropTargetDragLeave(this.getLastDropTarget(),t),this.lastDropTargetId=r.options.id,this.triggerDropTargetDragEnter(r,t))})),i||(this.triggerDropTargetDragLeave(this.getLastDropTarget(),t),this.lastDropTargetId=null)}processDropTargetDrop(t){this.forEachDropTarget((e=>{var i=this.getElementUnderCursor(t);e.element.contains(i)&&(this.lastDropTargetId=null,this.triggerDropTargetDrop(e,t))}))}getOffset(){return y(this.options.offset)?this.options.offset(this.hint):this.options.offset}createHint(t){this.hint=y(this.options.hint)?this.options.hint(t):this.options.hint}destroyHint(){this.hint&&(this.removeHint(),this.hint=null)}showHint(){Y(this.hint)}hideHint(){J(this.hint)}appendHint(){document.body.appendChild(this.hint)}removeHint(){document.body.removeChild(this.hint)}dragHint(t){var{top:e,left:i}=t;this.setHintState({top:e,left:i})}setHintState(t){var{top:e,left:i}=t;this.hint&&this.setHintPosition({top:e,left:i})}setHintPosition(t){var{top:e=0,left:i=0}=t,{width:r,height:n}=this.hint.getBoundingClientRect(),o=e-n/2,s=i-r/2;this.hint.style.top="".concat(o,"px"),this.hint.style.left="".concat(s,"px")}getElementUnderCursor(t){var e=We(t);if(this.hint&&this.hint.contains(e)){if(this.hideHint(),e=We(t),this.options.ignoreElementUnderCursor(e)){var i=e;J(i);var r=We(t);r&&(e=r),Y(i)}this.showHint()}return e}forEachDropTarget(t){mi.forEachInstanceInGroup(this.options.group,t)}getLastDropTarget(){return re(this.lastDropTargetId)}}function wi(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class xi{constructor(t){var e;wi(this,"options",{appendTo:document.body,template:(e=E({position:"absolute","z-index":1e4}),'<div class="k-grouping-dropclue" style="'.concat(e,'" />'))}),this.extendOptions(t),this.initElement(),this.append()}destroy(){this.remove()}extendOptions(t){this.options=u(this.options,t)}initElement(){this.element=j(this.options.template)}append(){this.hide(),this.options.appendTo.appendChild(this.element)}remove(){this.options.appendTo.removeChild(this.element),this.element=null}show(){Y(this.element)}hide(){J(this.element)}setState(t){var{top:e,left:i,height:r,visible:n}=t;this.setPosition({top:e,left:i}),this.setVisibility(n),this.setSize({height:r})}setSize(t){var{height:e}=t;this.element.style.height="".concat(e,"px")}getIsVisible(){return ct(this.element)}getSize(){var t=this.element.style.display,e=this.element.style.visibility;this.element.style.visibility="hidden",this.element.style.display="block";var i=this.element.offsetWidth,r=this.element.offsetHeight;return this.element.style.display=t,this.element.style.visibility=e,{width:i,height:r}}setVisibility(t){t?this.show():this.hide()}setPosition(t){var{top:e=0,left:i=0}=t;this.element.style.top="".concat(e,"px"),this.element.style.left="".concat(i,"px")}getOffsetState(t,e){var i=ni(t),{offsetWidth:r,offsetHeight:n}=t;return{top:i.top,left:i.left+(e?r:0),height:n}}}function Si(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var ki={forbidden:"k-i-cancel",before:"k-i-insert-middle",after:"k-i-insert-middle",over:"k-i-plus"},Ci="forbidden",Ai="before",_i="after",Ti="over",Oi="[data-draggable]";class Ei extends V{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),Si(this,"options",{group:"",filter:"",itemSelector:"",dropClueTemplate:'<div class="k-drop-hint k-drop-hint-h" style="position: absolute; z-index: 10000;">\n                               <div class="k-drop-hint-start"></div>\n                               <div class="k-drop-hint-line"></div>\n                           </div>',hint:null,allowDropOver:!0,events:{itemDragStart:null,itemDrop:null}}),Si(this,"onDragStart",(t=>{var e=this.getItem(t.originalCurrentTarget);e.closest(Oi)===this.element?(this.dragging=!0,this.trigger("itemDragStart",u(t,{sourceItem:e})),this.createDropClue()):this.dragging=!1})),Si(this,"onDrag",(t=>{if(this.dragging){var e,i,r=this.getElementUnderCursor(t),n=ne(r,Oi);n&&n.getDropSettings?(e=n.getDropSettings(),n.getDropPosition?this.lastDropPosition=n.getDropPosition(t):this.lastDropPosition=this.getDropPosition(t,e)):this.lastDropPosition=Ci,this.updateDragClueState(this.draggable.hint);var o=e&&e.offsetDropClue;e&&e.dropClueTargetSelector&&(i=r&&r.closest(e.dropClueTargetSelector)),this.updateDropClueState(i,o)}})),Si(this,"onDragEnd",(t=>{if(this.dragging&&(this.destroyDropClue(),this.lastDropPosition!==Ci)){var e=this.getItem(t.originalCurrentTarget),i=this.getElementUnderCursor(t),r=this.getItem(i),n="",o="",s=ne(i,Oi);s&&(n=s.getId(),o=s.getDropItemIndex(i,t)),e&&e!==r&&this.trigger("itemDrop",u(t,{sourceItem:e,destinationIndex:o,destinationElement:i,destinationComponentId:n,dropPosition:this.lastDropPosition}))}})),this.extendOptions(e),this.createDraggable()}destroy(){this.draggable&&this.draggable.destroy(),super.destroy()}createDraggable(){if(this.element){var t=this.options.hint;this.draggable=new bi(this.element,g(this.options,{offset:t=>{var e=t.getBoundingClientRect();return{x:e.width/2+10,y:e.height/2+10}},hint:e=>{var i=t(e);return this.updateDragClueState(i),i},events:{dragStart:this.onDragStart,drag:this.onDrag,dragEnd:this.onDragEnd}}))}}getItem(t){return t.closest(this.options.itemSelector)}createDropClue(){this.dropClue||(this.dropClue=new xi({template:this.options.dropClueTemplate}))}destroyDropClue(){this.dropClue&&(this.dropClue.destroy(),this.dropClue=null)}getDropPosition(t,e){var i=this.getElementUnderCursor(t),r=i&&i.closest(e.dropClueTargetSelector);if(e.dropClueEmptySelector&&i&&i.closest(e.dropClueEmptySelector))return Ti;if(!e.dropClueTargetSelector||!r||r===t.originalCurrentTarget.closest(e.dropClueTargetSelector))return Ci;var n=r.getBoundingClientRect(),o=e.allowDropOver?4:2,s=n.height/o,a=t.clientY,l=n.top;return a<l+s?Ai:a>=l+n.height-s?_i:Ti}updateDragClueState(t){if(t){var e=t.querySelector(".k-icon");Q(this.dropStatusClass,e),this.dropStatusClass=ki[this.lastDropPosition],Z(this.dropStatusClass,e)}}updateDropClueState(t,e){if(!this.shouldHideDropClue()&&t){this.dropClue.show();var i=ni(t),r=i.top,n=i.left;this.lastDropPosition===_i&&(r+=t.offsetHeight),e||(n+=this.dropClue.element.offsetWidth/2),this.dropClue.setPosition({top:r,left:n})}else this.dropClue.hide()}shouldHideDropClue(){return this.lastDropPosition===Ti||this.lastDropPosition===Ci}getElementUnderCursor(t){var e,i=this.dropClue&&this.dropClue.getIsVisible();return i&&this.dropClue.hide(),e=document.elementFromPoint(t.clientX,t.clientY),i&&this.dropClue.show(),e}}function Mi(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Pi="k-grid-header-wrap",Ii="k-grid-footer-wrap",Di="k-grid-content",Fi="mousedown";class Ri extends V{constructor(t,e){super(t,e),Mi(this,"options",{dotNetInstance:null,incellEdit:!1,columnVirtualization:!1,virtualScrollDelay:66.66666666666667,rowDraggable:!1,draggedItemsHint:"",componentSelector:"",jsinterop:{removeFocus:"",blur:"",incellEditBlur:"",rowDragStart:"",rowDrop:""}}),Mi(this,"onMouseDown",(t=>{t.shiftKey&&t.preventDefault()})),Mi(this,"onNavigationRemoveFocus",(()=>{this.removeFocus()})),Mi(this,"onNavigationBlur",(t=>{this.blur(t)})),Mi(this,"onIncellEditBlur",(t=>{this.incellEditBlur(t)})),Mi(this,"createHint",(t=>{var e=this.getDragHintText(t);return j('<div class="k-header k-drag-clue">\n                <span class="k-icon k-drag-status k-icon-with-modifier">\n                    <span class="k-icon k-icon-modifier"></span>\n                </span>\n                '.concat(e,"\n            </div>"))})),Mi(this,"getDragHintText",(t=>{if(tt("k-selected",t.closest("tr"))){var e=this.element.querySelectorAll("tr.k-master-row.k-selected").length;if(e>1)return e+" "+this.options.draggedItemsHint}return t.closest("td").getAttribute("data-drag-clue-text")})),Mi(this,"onItemDragStart",(t=>{this.invokeMethodAsync(this.options.jsinterop.rowDragStart,{sourceIndex:this.getDropItemIndex(t.sourceItem)})})),Mi(this,"onItemDrop",(t=>{this.invokeMethodAsync(this.options.jsinterop.rowDrop,{destinationIndex:t.destinationIndex,destinationComponentId:t.destinationComponentId,dotNetInstance:this.getDestinationComponent(t.destinationElement),dropPosition:t.dropPosition})})),Mi(this,"setSearchBoxValue",(t=>{var e=this.element.querySelector(".k-grid-search input");e&&(e.value=t)})),this.extendOptions(e),this.content=this.getChildElement(Di),this.header=this.getChildElement(Pi),this.adjustScrollbarPadding(),this.bindEvents(),this.createNavigationService(),this.setSearchBoxValue(e.searchString),this.setRowDraggable(e.rowDraggable)}setRowDraggable(t){t?this.createRowDraggable():this.destroyRowDraggable()}setOptions(t){this.options.rowDraggable!==t.rowDraggable&&this.setRowDraggable(t.rowDraggable),this.extendOptions(t)}getChildElement(t){return this.element.getElementsByClassName(t)[0]}destroy(){this.destroyRowDraggable(),this.unbindEvents(),this.destroyNavigationService(),this.content=null,this.header=null,super.destroy()}adjustScrollbarPadding(){jt()}bindEvents(){this.createContentScrollSync(),this.content.addEventListener(Fi,this.onMouseDown)}unbindEvents(){this.destroyContentScrollSync(),this.content.removeEventListener(Fi,this.onMouseDown)}createContentScrollSync(){this.contentScrollSync&&this.destroyContentScrollSync();var t=this.element.querySelector(oi(Ii));this.contentScrollSync=new Ie(this.content,{horizontal:!0,vertical:!1,syncFromConnections:this.hasNavigableVirtualColumns(),connections:[this.header,t]})}destroyContentScrollSync(){this.contentScrollSync&&(this.contentScrollSync.destroy(),this.contentScrollSync=null)}createNavigationService(){this.navigationService=new Ue(this.element,{navigable:this.options.navigable,incellEdit:this.options.incellEdit,columnVirtualization:this.options.columnVirtualization,virtualScrollDelay:this.options.virtualScrollDelay,events:{removeFocus:this.onNavigationRemoveFocus,blur:this.onNavigationBlur,incellEditBlur:this.onIncellEditBlur}})}destroyNavigationService(){this.navigationService&&(this.navigationService.destroy(),this.navigationService=null)}hasNavigableVirtualColumns(){return this.options.navigable&&this.options.columnVirtualization}focusCell(t){this.navigationService.focusCell(t)}focusEditable(t){this.navigationService.focusEditable(t)}focusFirstFocusable(t){this.navigationService.focusFirstFocusable(t)}scrollAndFocusFirstCell(t){this.navigationService.scrollAndFocusFirstCell(t)}scrollAndFocusLastCell(t){this.navigationService.scrollAndFocusLastCell(t)}scrollContent(t){this.content.scrollLeft=t}removeFocus(){this.invokeMethodAsync(this.options.jsinterop.removeFocus)}blur(t){this.invokeDefferedMethodAsync(this.options.jsinterop.blur,t)}incellEditBlur(t){this.invokeDefferedMethodAsync(this.options.jsinterop.incellEditBlur,t)}invokeDefferedMethodAsync(t,e){Te.webAssembly?setTimeout((()=>{e.deferred=!0,document.body.contains(e.originalEvent.target)&&this.invokeMethodAsync(t,e)}),1):this.invokeMethodAsync(t,e)}createRowDraggable(){this.element&&(this.rowDraggable=new Ei(this.element,{group:".k-grid-table",filter:".k-i-reorder",itemSelector:"tr.k-master-row",hint:this.createHint,events:{itemDragStart:this.onItemDragStart,itemDrop:this.onItemDrop}}))}destroyRowDraggable(){this.rowDraggable&&this.rowDraggable.destroy()}getDestinationComponent(t){var e=ne(t,this.options.componentSelector);return e&&e.dotNetInstance}getDropItemIndex(t){return t?t.closest(this.options.dropOptions.dropClueEmptySelector)?"-1":t.closest("tr.k-master-row").getAttribute("data-render-row-index"):""}getId(){return this.element.id}getDropSettings(){return this.options.dropOptions}}function Li(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class Ni extends V{constructor(t,e){super(t,e),Li(this,"options",{showDelay:600}),Li(this,"_loaderIntervals",[]),this.extendOptions(e)}startLoaderShowTimer(){this.addShowTimer()}showLoader(){Y(this.element)}hideLoader(){this.removeShowTimer(),this._loaderIntervals.length||J(this.element)}addShowTimer(){this._loaderIntervals.push(setTimeout((()=>this.showLoader()),this.options.showDelay))}removeShowTimer(){clearTimeout(this._loaderIntervals.shift())}}function Bi(t,e){Qt(Ni,t,e)}var ji=function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=function r(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];var a=this;r.context=this,r.args=o,r.pending=!0,clearTimeout(e),e=setTimeout((()=>{clearTimeout(e),r.pending=!1,t.call(a,...o)}),i)};return r.pending=!1,r.callback=t,r.stop=function(){clearTimeout(e)},r.runCallback=function(){t.call(r.context,r.args)},r},zi=function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;return!i||i<=0?t:function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];var a=this,l=0,c=()=>{t.call(a,...o),r=performance.now()};if(r||(r=performance.now(),e=setTimeout(c,i)),(l=performance.now()-r)>3*i)return clearTimeout(e),void(r=0);clearTimeout(e),l>i?c():e=setTimeout(c,i-l)}};function Ui(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class $i{constructor(t){Ui(this,"onResize",(t=>{t[0].target===this.element&&this.resizeCallback()})),this.element=t.element,this.resizeCallback=t.onResize,this.initResizeObserver()}destroy(){this.destroyResizeObserver(),this.element=null}initResizeObserver(){this.debounceResize=ji(this.onResize,50),this.resizeObserver=new ResizeObserver(this.debounceResize),this.resizeObserver.observe(this.element)}destroyResizeObserver(){this.resizeObserver&&this.resizeObserver.unobserve(this.element),this.resizeObserver=this.debounceResize=this.resizeCallback=null}}function Hi(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Vi="keydown",qi=[fe.ARROWLEFT,fe.ARROWRIGHT,fe.ARROWUP,fe.ARROWDOWN];class Wi extends V{constructor(t,e){super(t,e),Hi(this,"options",{dotNetInstance:null,toggleElementSelector:"",toggleOn:"click",jsinterop:{openAsync:null,closeAsync:null,keydown:null}}),Hi(this,"onKeyDown",(t=>{"input"!==t.target.tagName.toLowerCase()&&(qi.includes(t.keyCode)&&t.preventDefault(),this.invokeKeyDown(t))})),Hi(this,"toggle",(t=>{t.target.closest(".k-clear-value")||t.target.closest(".k-chip")||(this.visible?this.closeAsync():this.openAsync())})),this.extendOptions(e),this.toggleElement=this.getToggleElement(),this.visible=!1,this.bindEvents(),this.bindToggleElementEvents()}destroy(){this.disableTabKeyTrap(),this.unbindEvents(),this.unbindToggleElementEvents(),super.destroy()}bindEvents(){this.element.addEventListener(Vi,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(Vi,this.onKeyDown)}bindToggleElementEvents(){this.toggleElement&&this.options.toggleOn&&this.toggleElement.addEventListener(this.options.toggleOn,this.toggle)}unbindToggleElementEvents(){this.toggleElement&&this.options.toggleOn&&this.toggleElement.removeEventListener(this.options.toggleOn,this.toggle)}enableTabKeyTrap(){this.formKeyTrap=new _e(this.element),this.formKeyTrap.enableKeyTrap()}disableTabKeyTrap(){this.formKeyTrap&&this.formKeyTrap.disableTabKeyTrap()}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.key)}onOpen(){this.visible=!0}onClose(){this.visible=!1}getToggleElement(){return document.querySelector(this.options.toggleElementSelector)}openAsync(){this.invokeMethodAsync(this.options.jsinterop.openAsync)}closeAsync(){this.invokeMethodAsync(this.options.jsinterop.closeAsync)}onAfterOpen(){this.formKeyTrap&&this.formKeyTrap.destroy(),this.enableTabKeyTrap(),this.focusElement()}onAfterClose(){this.formKeyTrap&&this.formKeyTrap.destroy(),this.restoreFocus()}focusElement(){var t=this.element.querySelector("input");t&&ht(t)?nt(t):dt(this.element.id)}restoreFocus(){if(this.toggleElement)if(ht(this.toggleElement))nt(this.toggleElement);else{var t=ut(this.toggleElement,!0);nt(t)}}}function Xi(t,e){Qt(Wi,t,e)}function Gi(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Ki(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Gi(Object(i),!0).forEach((function(e){Yi(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Gi(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Yi(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Ji="none",Zi="k-animation-container-shown",Qi="reveal-vertical",tr="reveal-horizontal",er={"slide-down":"slide-up","push-down":"push-up"},ir={appear:"appear",exit:"exit"},rr=()=>C(20),nr=(t,e)=>"k-".concat(t,"-").concat(e),or=t=>Object.keys(ir).reduce(((e,i)=>Ki(Ki({},e),{},{[i]:{base:nr(t,i),active:nr(t,"".concat(i,"-active"))}})),{});class sr extends V{constructor(t,e){super(t,e),Yi(this,"options",{dotNetInstance:null,animationName:"slide-down",duration:300,showDelay:10,hideDelay:10,parentMethodsToInvokeBeforeShow:"",parentMethodsToInvokeDuringShow:"",parentMethodsToInvokeAfterShow:"",parentMethodsToInvokeBeforeHide:"",parentMethodsToInvokeDuringHide:"",parentMethodsToInvokeAfterHide:"",jsinterop:{showStart:null,hideStart:null}}),this.extendOptions(e),this.element.parentElement.style.display=Ji,this.animationClasses=or(this.options.animationName)}setOptions(t){super.setOptions(t),this.animationClasses=or(this.options.animationName)}destroy(){this.cancelCallback(),this.parentComponent=null,super.destroy()}showAsync(){return this.cancelCallback(),this.onAppearStart().then((()=>this.onAppearing())).then((()=>this.onTransitionEnd(this.onAppearEnd.bind(this))))}hideAsync(){return this.cancelCallback(),this.onExitStart().then(this.onExiting()).then((()=>this.onTransitionEnd(this.onExitEnd.bind(this))))}show(){this.cancelCallback(),this.removeClasses(ir.exit),this.removeClasses(ir.appear),this.element.style.display=null,this.element.parentElement.style.display=null,this.triggerOpen(),this.callParentMethods(this.options.parentMethodsToInvokeDuringShow)}hide(){this.cancelCallback(),this.removeClasses(ir.exit),this.removeClasses(ir.appear),this.element.style.display=Ji,this.element.parentElement.style.display=Ji,this.triggerClose(),this.callParentMethods(this.options.parentMethodsToInvokeDuringHide)}onAppearStart(){return this.updateAppearStartState().then((()=>{this.callParentMethods(this.options.parentMethodsToInvokeBeforeShow);var t=this.getParentPosition(),e=this.options.animationName;return this.maxDimensions(),t&&t.flipped&&er[e]?(this.element.style.display=Ji,this.element.parentElement.style.display=Ji,rr().then((()=>(this.removeClasses(ir.appear),this.animationClasses=or(er[e]),this.updateAppearStartState())))):Promise.resolve()}))}updateAppearStartState(){return this.removeClasses(ir.exit),this.addClasses(this.animationClasses[ir.appear].base),rr().then((()=>{this.element&&(this.element.style.display=null,this.element.parentElement.style.display=null)}))}onAppearing(){return this.triggerOpen(),this.callParentMethods(this.options.parentMethodsToInvokeDuringShow),rr().then((()=>{this.addClasses(this.animationClasses[ir.appear].active)}))}onAppearEnd(){var t=ir.appear;this.callParentMethods(this.options.parentMethodsToInvokeAfterShow),rr().then((()=>{this.removeClasses(t),this.removeMaxDimensions(),this.isPopup()&&Z(Zi,this.element.parentElement)}))}onExitStart(){return rr().then((()=>{this.callParentMethods(this.options.parentMethodsToInvokeBeforeHide);var t=this.getParentPosition(),e=this.options.animationName;t&&t.flipped&&er[e]&&(this.animationClasses=or(er[e])),this.removeClasses(ir.appear),this.addClasses(this.animationClasses[ir.exit].base)}))}onExiting(){return this.triggerClose(),this.callParentMethods(this.options.parentMethodsToInvokeDuringHide),this.maxDimensions(),rr().then((()=>{this.addClasses(this.animationClasses[ir.exit].active),this.isPopup()&&Q(Zi,this.element.parentElement)}))}onExitEnd(){this.callParentMethods(this.options.parentMethodsToInvokeAfterHide),this.removeClasses(ir.exit),this.removeMaxDimensions(),this.element.style.display=Ji,this.element.parentElement.style.display=Ji}onTransitionEnd(t){var e=this.options,i=e.duration+e.showDelay;return this.timer=A(i),this.timer.promise.then(t)}cancelCallback(){this.timer&&this.timer.cancel(),this.timer=null}getParentComponent(){if(this.parentComponent)return this.parentComponent;if(!this.element)return null;var t=this.element.closest(".k-animation-container");if(!t)return null;var e=t.getAttribute("data-id");return this.parentComponent=re(e),this.parentComponent}callParentMethods(t){t&&t.forEach((t=>{this.callParentMethod(t)}))}callParentMethod(t,e){var i=this.getParentComponent();if(i&&y(i[t]))return i[t](e)}getParentPosition(){return this.callParentMethod("getElementPosition")}triggerOpen(){this.invokeMethodAsync(this.options.jsinterop.showStart)}triggerClose(){this.invokeMethodAsync(this.options.jsinterop.hideStart)}removeClasses(t){var e=this.animationClasses[t];this.element&&(this.element.classList.remove(e.base),this.element.classList.remove(e.active))}addClasses(t){var e=this;t&&t.split(/\s+/).forEach((t=>{e.element&&e.element.classList.add(t)}))}maxDimensions(){var t=this.options,e=this.element,i="".concat(e.scrollHeight,"px"),r="".concat(e.scrollWidth,"px");return t.animationName.includes(Qi)?(e.style.maxHeight=i,"max-height: ".concat(i)):t.animationName.includes(tr)?(e.style.maxWidth=r,"max-width: ".concat(r)):""}removeMaxDimensions(){var t=this.options.animationName.includes(Qi)||this.options.animationName.includes(tr);this.element&&t&&(this.element.style.maxHeight=null,this.element.style.maxWidth=null)}isPopup(){return this.element&&this.element.firstElementChild&&tt("k-popup",this.element.firstElementChild)&&this.element.parentElement}isAnimationInProgress(){return this.element&&Array.from(this.element.classList).some((t=>t.endsWith("-".concat(ir.appear))))}}function ar(t,e){Qt(sr,t,e)}function lr(t,e){var i=re(t);return i?(i.setOptions(e),i.showAsync().catch(T)):null}function cr(t,e){var i=re(t);return i?(i.setOptions(e),i.hideAsync().catch(T)):null}function hr(t){var e=re(t);e&&e.hide()}function ur(t){var e=re(t);e&&e.show()}const pr={en:{name:"en",identity:{version:{_unicodeVersion:"14.0.0",_cldrVersion:"41"},language:"en"},territory:"US",numbers:{symbols:{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"×",perMille:"‰",infinity:"∞",nan:"NaN",timeSeparator:":",approximatelySign:"~"},decimal:{patterns:["n"],groupSize:[3]},scientific:{patterns:["nEn"],groupSize:[]},percent:{patterns:["n%"],groupSize:[3]},currency:{patterns:["$n"],groupSize:[3],"unitPattern-count-one":"n $","unitPattern-count-other":"n $"},currencies:{BGN:{displayName:"Bulgarian Lev","displayName-count-one":"Bulgarian lev","displayName-count-other":"Bulgarian leva",symbol:"BGN"},EUR:{displayName:"Euro","displayName-count-one":"euro","displayName-count-other":"euros",symbol:"€","symbol-alt-narrow":"€"},USD:{displayName:"US Dollar","displayName-count-one":"US dollar","displayName-count-other":"US dollars",symbol:"$","symbol-alt-narrow":"$"}},localeCurrency:"USD",accounting:{patterns:["$n","($n)"],groupSize:[3]}},calendar:{gmtFormat:"GMT{0}",gmtZeroFormat:"GMT",patterns:{d:"M/d/y",D:"EEEE, MMMM d, y",m:"MMM d",M:"MMMM d",y:"MMM y",Y:"MMMM y",F:"EEEE, MMMM d, y h:mm:ss a",g:"M/d/y h:mm a",G:"M/d/y h:mm:ss a",t:"h:mm a",T:"h:mm:ss a",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{Bh:"h B",Bhm:"h:mm B",Bhms:"h:mm:ss B",d:"d",E:"ccc",EBhm:"E h:mm B",EBhms:"E h:mm:ss B",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMd:"M/d/y GGGGG",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d","MMMMW-count-one":"'week' W 'of' MMMM","MMMMW-count-other":"'week' W 'of' MMMM",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y","yw-count-one":"'week' w 'of' Y","yw-count-other":"'week' w 'of' Y"}},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},days:{format:{abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},"stand-alone":{abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},months:{format:{abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},"stand-alone":{abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]}},quarters:{format:{abbreviated:["Q1","Q2","Q3","Q4"],narrow:["1","2","3","4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},"stand-alone":{abbreviated:["Q1","Q2","Q3","Q4"],narrow:["1","2","3","4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]}},dayPeriods:{format:{abbreviated:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"in the morning",afternoon1:"in the afternoon",evening1:"in the evening",night1:"at night"},narrow:{midnight:"mi",am:"a","am-alt-variant":"am",noon:"n",pm:"p","pm-alt-variant":"pm",morning1:"in the morning",afternoon1:"in the afternoon",evening1:"in the evening",night1:"at night"},wide:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"in the morning",afternoon1:"in the afternoon",evening1:"in the evening",night1:"at night"}},"stand-alone":{abbreviated:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"morning",afternoon1:"afternoon",evening1:"evening",night1:"night"},narrow:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"morning",afternoon1:"afternoon",evening1:"evening",night1:"night"},wide:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"morning",afternoon1:"afternoon",evening1:"evening",night1:"night"}}},eras:{format:{wide:{0:"Before Christ",1:"Anno Domini","0-alt-variant":"Before Common Era","1-alt-variant":"Common Era"},abbreviated:{0:"BC",1:"AD","0-alt-variant":"BCE","1-alt-variant":"CE"},narrow:{0:"B",1:"A","0-alt-variant":"BCE","1-alt-variant":"CE"}}},dateFields:{era:{wide:"era",short:"era",narrow:"era"},year:{wide:"year",short:"yr.",narrow:"yr."},quarter:{wide:"quarter",short:"qtr.",narrow:"qtr."},month:{wide:"month",short:"mo.",narrow:"mo."},week:{wide:"week",short:"wk.",narrow:"wk."},weekOfMonth:{wide:"week of month",short:"wk. of mo.",narrow:"wk. of mo."},day:{wide:"day",short:"day",narrow:"day"},dayOfYear:{wide:"day of year",short:"day of yr.",narrow:"day of yr."},weekday:{wide:"day of the week",short:"day of wk.",narrow:"day of wk."},weekdayOfMonth:{wide:"weekday of the month",short:"wkday. of mo.",narrow:"wkday. of mo."},dayperiod:{short:"AM/PM",wide:"AM/PM",narrow:"AM/PM"},hour:{wide:"hour",short:"hr.",narrow:"hr."},minute:{wide:"minute",short:"min.",narrow:"min."},second:{wide:"second",short:"sec.",narrow:"sec."},zone:{wide:"time zone",short:"zone",narrow:"zone"},millisecond:{narrow:"ms",short:"ms",wide:"millisecond"}}}},supplemental:{likelySubtags:{en:"en-Latn-US"},currencyData:{region:{US:[{USD:{_from:"1792-01-01"}}]}},weekData:{firstDay:{US:"sun"},weekendStart:{"001":"sat"},weekendEnd:{"001":"sun"}}}};function dr(t){return"string"==typeof t}var fr=/\{(\d+)}?\}/g,gr=function(t){var e=t.name,i=t.message;if(!e||!i)throw new Error("{ name: string, message: string } object is required!");this.name=e,this.message=i};gr.prototype.formatMessage=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=mr(t),r=this.message.replace(fr,(function(t,e){return i[parseInt(e,10)]}));return this.name+": "+r},gr.prototype.error=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new Error(this.formatMessage(t))};var mr=function(t){return t.reduce((function(t,e){return t.concat(e)}),[])},yr=function(t){return Object.keys(t).reduce((function(e,i){return e[i]=new gr({name:i,message:t[i]}),e}),{})},vr=yr({NoLocale:"Missing locale info for '{0}'",NoCurrency:"Cannot determine currency information. Please load the locale currencies data.",NoSupplementalCurrency:"Cannot determine currency. Please load the supplemental currencyData.",NoCurrencyRegion:"No currency data for region '{0}'",NoCurrencyDisplay:"Cannot determine currency display information. Please load the locale currencies data. The default culture does not include the all currencies data.",NoGMTInfo:"Cannot determine locale GMT format. Please load the locale timeZoneNames data.",NoWeekData:"Cannot determine locale first day of week. Please load the supplemental weekData.",NoFirstDay:"Cannot determine locale first day of week. Please load the supplemental weekData. The default culture includes only the 'en-US' first day info.",NoValidCurrency:"Cannot determine a default currency for the {0} locale. Please specify explicitly the currency with the format options.",NoDateFieldNames:"Cannot determine the locale date field names. Please load the locale dateFields data."});var br=pr;function wr(t){return dr(t)?xr(t):t}function xr(t){if(br[t])return br[t];if(br.supplemental.likelySubtags){var e=t.split("-"),i=e[0],r=e.slice(1),n=function(t,e){for(var i=br.supplemental.likelySubtags,r=0;r<e.length;r++){var n=i[t+"-"+e[r]];if(n)return n}if(i[t])return i[t]}(i,r),o=n?function(t,e){var i=t.split("-"),r=i[0],n=i[1],o=i[2];return br[t]||-1!==e.indexOf(o)&&br[r+"-"+o]||-1!==e.indexOf(n)&&br[r+"-"+n]||br[r]}(n,r):null;if(o)return o}throw vr.NoLocale.error(t)}var Sr="decimal",kr="currency",Cr="accounting",Ar="percent",_r="scientific",Tr="$",Or="n",Er=".",Mr="",Pr="en",Ir="Formats-numberSystem-latn",Dr=/([#,0.]+)/g,Fr=/¤/g;function Rr(t){return Dr.lastIndex=0,t.replace(Fr,Tr).replace(Dr,Or).split(";")}function Lr(t){return Dr.lastIndex=0,Dr.exec(t.split(";")[0])[0].split(Er)[0].split(",").slice(1).map((function(t){return t.length})).reverse()}function Nr(t,e){for(var i in e)i.startsWith("unitPattern")&&(t[i]=e[i].replace("{0}",Or).replace("{1}",Tr))}function Br(t,e){var i=br[t],r=i.numbers=i.numbers||{};for(var n in r.symbols=r.symbols||{},e)if("symbols-numberSystem-latn"===n)Object.assign(r.symbols,e[n]);else if(n.includes(Ir)){var o=n.substr(0,n.indexOf(Ir)),s=e[n].standard;r[o]={patterns:Rr(s)},o===kr?(r[o].groupSize=Lr((e[Sr+Ir]||e[n]).standard),Nr(r[o],e[n]),r.accounting={patterns:Rr(e[n].accounting),groupSize:r[o].groupSize}):r[o].groupSize=Lr(s)}else"currencies"===n&&(r.currencies=e[n])}var jr={s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'"},zr=/y+/g,Ur=[["dateFormats","short"]],$r={D:[["dateFormats","full"]],m:[["dateTimeFormats","availableFormats","MMMd"]],M:[["dateTimeFormats","availableFormats","MMMMd"]],y:[["dateTimeFormats","availableFormats","yMMM"]],Y:[["dateTimeFormats","availableFormats","yMMMM"]],F:[["dateFormats","full"],["timeFormats","medium"]],g:[["dateTimeFormats","availableFormats","yMd"],["timeFormats","short"]],G:[["dateTimeFormats","availableFormats","yMd"],["timeFormats","medium"]],t:[["timeFormats","short"]],T:[["timeFormats","medium"]]};function Hr(t){for(var e=[],i=Object.getOwnPropertyNames(t),r=0;r<i.length;r++){var n=t[i[r]];e.push(n)}return e}function Vr(t,e){var i={};for(var r in t){var n=i[r]={};for(var o in t[r]){var s=t[r][o];n[o]=e?s:Hr(s)}}return i}function qr(t,e){var i=br[t].calendar;i.days=Vr(e.days),i.months=Vr(e.months),i.quarters=Vr(e.quarters),i.dayPeriods=Vr(e.dayPeriods,!0),i.eras=function(t){var e={},i=e.format={},r={eraAbbr:"abbreviated",eraNames:"wide",eraNarrow:"narrow"};for(var n in t)i[r[n]]=t[n];return e}(e.eras)}function Wr(t,e){var i=br[t].calendar,r={};for(var n in e){var o=n.split("-"),s=o[0],a=o[1];void 0===a&&(a="wide");var l=r[s]||{},c=e[n].displayName;c&&(l[a]=c,r[s]=l)}i.dateFields=r}function Xr(t,e){for(var i=[],r=0;r<t.length;r++){for(var n=t[r],o=e,s=0;s<n.length;s++)o=o[n[s]];i.push(o)}return i.join(" ")}function Gr(t,e){var i=br[t].calendar,r=i.patterns={};for(var n in r.d=Xr(Ur,e).replace(zr,"y"),$r)r[n]=Xr($r[n],e);for(var o in jr)r[o]=jr[o];var s=e.dateTimeFormats;i.dateTimeFormats={full:s.full,long:s.long,medium:s.medium,short:s.short,availableFormats:s.availableFormats},i.timeFormats=e.timeFormats,i.dateFormats=e.dateFormats}function Kr(t,e){var i=br[t].calendar=br[t].calendar||{};for(var r in e)"timeZoneNames"===r?(i.gmtFormat=e[r].gmtFormat,i.gmtZeroFormat=e[r].gmtZeroFormat):"calendars"===r&&e[r].gregorian?(Gr(t,e[r].gregorian),qr(t,e[r].gregorian)):"fields"===r&&Wr(t,e.fields)}function Yr(t){if(t.territory)return t.territory;var e,i=t.name,r=t.identity;return e=r&&r.territory?r.territory:function(t,e){var i=br.supplemental.likelySubtags,r=t.split("-");if(i){var n=i[t]||i[r[0]];n&&(r=n.split("-"))}if(e)for(var o=r.length-1;o>=1;o--){var s=r[o];s!==e.variant&&s!==e.script||r.splice(o,1)}var a=r.length;if(a>1)return r[a-1].toUpperCase()}(i,r),t.territory=e,e}var Jr="duration-millisecond",Zr=/\{0\}\s?/;function Qr(t){return(t["unitPattern-count-one"]||t["unitPattern-count-other"]).replace(Zr,"")}function tn(t,e){t.calendar.dateFields.millisecond={narrow:Qr(e.narrow[Jr]),short:Qr(e.short[Jr]),wide:Qr(e.long[Jr])}}function en(t,e){for(var i in e)"numbers"===i?Br(t,e[i]):"dates"===i&&Kr(t,e[i])}function rn(){for(var t=arguments,e=arguments.length,i=0;i<e;i++){var r=t[i];if(r.main){var n=Object.keys(r.main)[0],o=r.main[n],s=br[n]=br[n]||{};o.units?tn(s,o.units):(s.name=s.name||n,s.identity=s.identity||o.identity,Yr(s),en(n,o))}else if(r.supplemental)if(r.supplemental.weekData)br.supplemental.weekData={firstDay:r.supplemental.weekData.firstDay,weekendStart:r.supplemental.weekData.weekendStart,weekendEnd:r.supplemental.weekData.weekendEnd};else if(r.supplemental.likelySubtags)br.supplemental.likelySubtags=Object.assign(br.supplemental.likelySubtags,r.supplemental.likelySubtags);else if(r.supplemental.currencyData){var a=br.supplemental.currencyData;a.region=Object.assign(a.region||{},r.supplemental.currencyData.region),a.fractions=Object.assign(a.fractions||{},r.supplemental.currencyData.fractions)}}}function nn(t){var e=t.name,i=br[e]=br[e]||{},r=br.supplemental=br.supplemental||{};t.likelySubtags&&(r.likelySubtags=Object.assign(r.likelySubtags||{},t.likelySubtags)),t.currencyData&&(r.currencyData=r.currencyData||{},r.currencyData.fractions=Object.assign(r.currencyData.fractions||{},t.currencyData));var n=i.numbers;Object.assign(i,t),n&&t.numbers&&(i.numbers=Object.assign({},n,t.numbers))}function on(t,e){void 0===e&&(e=Pr);var i=xr(e).calendar.dateFields;if(!i)throw vr.NoDateFieldNames.error();var r=i[t.type]||{};return r[t.nameType]||r.wide}function sn(t,e){var i=e.type,r=e.nameType,n=e.standAlone,o=e.lower,s=wr(t),a=n?"stand-alone":"format",l=(o?"lower-":Mr)+r,c=s.calendar[i][a],h=c[l];return!h&&o&&(h=c[l]=function(t){var e=Array.isArray(t)?function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].toLowerCase());return e}(t):function(t){var e={};for(var i in t)e[i]=t[i].toLowerCase();return e}(t);return e}(c[r])),h}function an(t){var e=t.split("-"),i=parseInt(e[0],10),r=parseInt(e[1],10)-1,n=parseInt(e[2],10);return new Date(i,r,n)}var ln=vr.NoCurrency,cn=vr.NoCurrencyDisplay,hn=vr.NoSupplementalCurrency,un=vr.NoCurrencyRegion,pn=vr.NoValidCurrency,dn="symbol",fn={"001":"USD",150:"EUR"};function gn(t,e,i){var r=wr(t).numbers.currencies;if(r){var n=r[e];if(n)return n;if(i)throw cn.error()}else if(i)throw ln.error()}function mn(t,e){return e.length-t.length}function yn(t,e,i){void 0===i&&(i=!0);var r=gn(t,e,i);if(r){if(!r.displays){var n=[e];for(var o in r)n.push(r[o]);n.sort(mn),r.displays=n}return r.displays}}function vn(t,e){var i=e.value,r=e.currency,n=e.currencyDisplay;if(void 0===n&&(n=dn),"code"===n)return r;var o=gn(t,r,!0);return n===dn?o["symbol-alt-narrow"]||o.symbol:void 0===i||1!==i?o["displayName-count-other"]:o["displayName-count-one"]}function bn(t){var e=2,i=2,r=((br.supplemental.currencyData||{}).fractions||{})[t];return r&&r._digits&&(i=e=parseInt(r._digits,10)),{minimumFractionDigits:e,maximumFractionDigits:i}}function wn(t,e){if(void 0===e&&(e=!0),fn[t])return fn[t];var i=br.supplemental.currencyData;if(i){var r=i.region[t];if(r){var n=function(t){for(var e,i,r,n,o=0;o<t.length;o++){var s=t[o],a=Object.keys(s)[0],l=s[a];if("XXX"!==a&&"false"!==l._tender&&l._from)if(l._to){if(!r){var c=an(l._from),h=an(l._to);(!i||i.to<h||i.from<c)&&(e=a,i={from:c,to:h})}}else{var u=an(l._from);(!n||n<u)&&(r=a,n=u)}}return r||e}(r);return n}if(e)throw un.error(t)}else if(e)throw hn.error()}function xn(t,e){var i=wr(t),r=i.numbers;if(!r.localeCurrency){var n=wn(Yr(i),e);if(!n&&e)throw pn.error(i.name);r.localeCurrency=n}return r.localeCurrency}var Sn=["sun","mon","tue","wed","thu","fri","sat"],kn=vr.NoWeekData,Cn=vr.NoFirstDay;function An(t){var e=wr(t);if(!isNaN(e.firstDay))return e.firstDay;var i=br.supplemental.weekData;if(!i)throw kn.error();var r=i.firstDay[Yr(e)]||i.firstDay["001"];if(!r)throw Cn.error();return e.firstDay=Sn.indexOf(r),e.firstDay}var _n=vr.NoWeekData;function Tn(t){var e=wr(t);if(e.weekendRange)return e.weekendRange;var i=br.supplemental.weekData;if(!i)throw _n.error();var r=Yr(e),n=i.weekendStart[r]||i.weekendStart["001"],o=i.weekendEnd[r]||i.weekendEnd["001"];return e.weekendRange={start:Sn.indexOf(n),end:Sn.indexOf(o)},e.weekendRange}function On(t){return wr(t).numbers.symbols}function En(t){return 1/t==-1/0}function Mn(t,e){return void 0===e&&(e={}),e.currency||(e.currency=xn(t,!0)),vn(t,e)}function Pn(t,e,i,r,n){var o=n.numbers.symbols,s=t.indexOf(o.decimal),a=r.groupSize.slice(),l=a.shift(),c=-1!==s?s:i+1,h=t.substring(e,c),u=t,p=h.length;if(p>=l){for(var d=p,f=[];d>-1;){var g=h.substring(d-l,d);g&&f.push(g),d-=l;var m=a.shift();if(0===(l=void 0!==m?m:l)){(g=h.substring(0,d))&&f.push(g);break}}h=f.reverse().join(o.group),u=t.substring(0,e)+h+t.substring(c)}return u}function In(t){return t===kr||t===Cr}function Dn(t,e,i){void 0===e&&(e=2),void 0===i&&(i=!1);var r=e-String(t).length,n=t;if(r>0){var o=new Array(r+1).join("0");n=i?t+o:o+t}return n}function Fn(t,e){var i=t,r=e||0;return i=i.toString().split("e"),i=(i=Math.round(Number(i[0]+"e"+(i[1]?Number(i[1])+r:r)))).toString().split("e"),(i=Number(i[0]+"e"+(i[1]?Number(i[1])-r:-r))).toFixed(Math.min(r,20))}var Rn=/0+$/;function Ln(t,e,i){var r=i.numbers.symbols,n=e.style,o=In(n);if(n===_r)return(void 0!==e.minimumFractionDigits?t.toExponential(e.minimumFractionDigits):t.toExponential()).replace(Er,r.decimal);var s,a=t;o&&(e.value=a,s=Mn(i,e)),n===Ar&&(a*=100,s=r.percentSign);var l=function(t){var e,i=t.minimumFractionDigits,r=t.maximumFractionDigits,n=t.style,o=In(n);return o&&(e=bn(t.currency)),void 0===i&&(i=o?e.minimumFractionDigits:0),void 0===r&&(r=n===Ar?Math.max(i,0):o?Math.max(i,e.maximumFractionDigits):Math.max(i,3)),{minimumFractionDigits:i,maximumFractionDigits:r}}(e),c=l.minimumFractionDigits,h=(a=Fn(a,l.maximumFractionDigits))<0,u=En(t),p=a.split(Er),d=p[0],f=Dn(p[1]?p[1].replace(Rn,Mr):Mr,c,!0);h&&(d=d.substring(1)),e.minimumIntegerDigits&&(d=Dn(d,e.minimumIntegerDigits));var g,m=!1!==e.useGrouping?Pn(d,0,d.length,e,i):d;if(f&&(m+=r.decimal+f),o&&"name"===e.currencyDisplay)g=function(t,e){var i=t.numbers.currency,r=1!==e?i["unitPattern-count-other"]:i["unitPattern-count-one"];return e<0&&(r=r.replace(Or,"-n")),r}(i,t);else{var y=e.patterns;g=h||u?y[1]||"-"+y[0]:y[0]}if(g===Or&&!h)return m;var v=function(t,e,i){for(var r=Mr,n=0,o=e.length;n<o;n++){var s=e.charAt(n);r+=s===Or?t:s===Tr||"%"===s?i:s}return r}(m,g,s);return v}var Nn=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,Bn="__??__";function jn(t,e){var i=t.format;-1!==i.indexOf("%")&&(t.style=Ar,t.symbol=e.numbers.symbols.percentSign,t.number*=100),-1!==i.indexOf(Tr)&&(t.style=kr,t.symbol=Mn(e))}function zn(t){var e=t.format;if(e.indexOf("'")>-1||e.indexOf('"')>-1||e.indexOf("\\")>-1){var i=t.literals=[];t.format=e.replace(Nn,(function(t){var e=t.charAt(0).replace("\\",Mr),r=t.slice(1).replace(e,Mr);return i.push(r),Bn}))}}var Un="#",$n="0",Hn=/(\.(?:[0-9]*[1-9])?)0+$/g,Vn=/\.$/,qn=/,/g;function Wn(t){var e,i,r,n=t.number,o=t.format,s=o.indexOf(Er);if(-1!==s){var a=o.lastIndexOf($n)-s,l=o.lastIndexOf(Un)-s,c=a>-1,h=l>-1,u=n.toString().split("e"),p=(u=(u=u[1]?Fn(n,Math.abs(u[1])):u[0]).split(Er)[1]||Mr).length,d=-1;c||h?c&&a>l?p=a:l>a&&(h&&p>l?p=l:c&&p<a&&(p=a),d=c?a:0):(t.format=o.substring(0,s)+o.substring(s+1),s=-1,p=0),p>-1&&(n=Fn(n,p),d>-1&&(e=n,r=0===(i=d)?Hn:new RegExp("(\\.[0-9]{"+i+"}[1-9]*)0+$","g"),n=e.replace(r,"$1").replace(Vn,Mr)))}else n=Fn(n);t.negative&&-1*n>=0&&!t.negativeZero&&(t.negative=!1),t.number=n,t.decimalIndex=s}function Xn(t){var e=t.number,i=t.format;if(i=i.split(";"),(t.negative||t.negativeZero)&&i[1])i=i[1],t.hasNegativeFormat=!0;else if(0===e){var r=i[2];i=r||i[0],r&&function(t){return-1===t.indexOf(Un)&&-1===t.indexOf($n)}(r)&&(t.constant=r)}else i=i[0];t.format=i}function Gn(t,e,i){return-1===t&&-1!==e?e:-1!==t&&-1===e?t:i?Math.min(t,e):Math.max(t,e)}function Kn(t,e){var i=t.number;return-1!==t.start&&(i=function(t,e){var i=t.start,r=t.end,n=t.negative,o=t.negativeZero,s=t.format,a=t.decimalIndex,l=t.lastZeroIndex,c=t.hasNegativeFormat,h=t.hasGroup,u=t.number,p=u.toString().split(Er),d=s.length,f=p[0],g=p[1]||Mr,m=f.length,y=Mr;u=s.substring(0,i),!n&&!o||c||(u+="-");for(var v=i;v<d;v++){var b=s.charAt(v);if(-1===a){if(r-v<m){u+=f;break}}else if(-1!==l&&l<v&&(y=Mr),a-v<=m&&a-v>-1&&(u+=f,v=a),a===v){u+=(g?e.numbers.symbols.decimal:Mr)+g,v+=r-a+1;continue}b===$n?(u+=b,y=b):b===Un&&(u+=y)}return h&&(u=Pn(u,i+(n&&!c?1:0),Math.max(r,m+i),e.numbers.decimal,e)),r>=i&&(u+=s.substring(r+1)),u}(t,e),i=function(t,e,i){var r=t;if(e===kr||e===Ar){r=Mr;for(var n=0,o=t.length;n<o;n++){var s=t.charAt(n);r+=s===Tr||"%"===s?i:s}}return r}(i,t.style,t.symbol),i=function(t,e){var i=t;if(e)for(var r=e.length,n=0;n<r;n++)i=i.replace(Bn,e[n]);return i}(i,t.literals)),i}function Yn(t,e,i){var r={negative:t<0,number:Math.abs(t),negativeZero:En(t),format:e};return Xn(r),r.constant?r.constant:(zn(r),jn(r,i),function(t){t.hasGroup=t.format.indexOf(",")>-1,t.hasGroup&&(t.format=t.format.replace(qn,Mr))}(r),Wn(r),function(t){var e=t.format,i=e.indexOf(Un),r=e.indexOf($n),n=Gn(i,r,!0),o=Gn(i=e.lastIndexOf(Un),r=e.lastIndexOf($n));n===e.length&&(o=n),t.start=n,t.end=o,t.lastZeroIndex=r}(r),Kn(r,i))}var Jn=/^(n|c|p|e|a)(\d*)$/i;function Zn(t){var e;return e=dr(t)?function(t){var e=Jn.exec(t);if(e){var i={style:Sr},r=e[1].toLowerCase();return"c"===r?i.style=kr:"a"===r?i.style=Cr:"p"===r?i.style=Ar:"e"===r&&(i.style=_r),e[2]&&(i.minimumFractionDigits=i.maximumFractionDigits=parseInt(e[2],10)),i}}(t):t,e}function Qn(t,e,i){if(void 0===e&&(e=Or),void 0===i&&(i=Pr),null==t)return Mr;if(!isFinite(t))return String(t);var r,n=xr(i),o=Zn(e);if(o){var s=o.style||Sr;r=Ln(t,Object.assign({},n.numbers[s],o),n)}else r=Yn(t,e,n);return r}function to(t){return"number"==typeof t}var eo=/[eE][-+]?[0-9]+/,io=/\u00A0/g;function ro(t,e){if(e.length>1){var i=(e[1]||Mr).replace(Tr,Mr).split(Or);if(t.indexOf(i[0])>-1&&t.indexOf(i[1])>-1)return t.replace(i[0],Mr).replace(i[1],Mr)}}function no(t,e,i){var r,n=Zn(i)||{},o=In(n.style),s=t,a=n.currency||xn(e,o);if(a){var l=yn(e,a,o);if(l)for(var c=0;c<l.length;c++){var h=l[c];if(s.includes(h)){s=s.replace(h,Mr),o=!0;break}}if(o){var u=ro(s,e.numbers.currency.patterns)||ro(s,e.numbers.accounting.patterns);u&&(r=!0,s=u)}}return{number:s,negative:r}}function oo(t,e,i){if(void 0===e&&(e=Pr),void 0===i&&(i={}),!t&&0!==t)return null;if(to(t))return t;var r,n=xr(e),o=n.numbers.symbols,s=t.toString(),a=i||{};if(dr(i)&&(zn(a={format:i}),s=function(t,e){var i=e.literals,r=t;if(i)for(var n=0;n<i.length;n++)r=r.replace(i[n],Mr);return r}(s,a),jn(a,n)),(a.style===Ar||s.indexOf(o.percentSign)>-1)&&(s=s.replace(o.percentSign,Mr),r=!0),eo.test(s))return s=parseFloat(s.replace(o.decimal,Er)),isNaN(s)?null:s;var l=no(s,n,a),c=l.negative,h=l.number,u=(s=String(h).trim()).indexOf("-");if(u>0)return null;var p=u>-1;return p=void 0!==c?c:p,s=s.replace("-",Mr).replace(io," ").split(o.group.replace(io," ")).join(Mr).replace(o.decimal,Er),s=parseFloat(s),isNaN(s)?s=null:p&&(s*=-1),s&&r&&(s=function(t){var e=String(t),i=e.indexOf(Er),r=t/Math.pow(10,2);if(-1===i||String(r).length<=e.length+2)return r;var n=e.length-i+1+2;return parseFloat(r.toFixed(n))}(s)),s}var so=/\{(\d+)}/g;function ao(t){var e=arguments;return t.replace(so,(function(t,i){return e[parseInt(i,10)+1]}))}var lo=[2,1,5,3,4],co={};co[(-2).toString()]=8,co[(-1).toString()]=6,co[2..toString()]=6,co[1..toString()]=3;var ho={numeric:1,"2-digit":2,short:3,long:4,narrow:5},uo=/[hHmsSzZoOvVxX]/;var po=[{key:"era",specifier:"G"},{key:"year",specifier:"y"},{key:"month",specifier:"M"},{key:"day",specifier:"d"},{key:"weekday",specifier:"E"},{key:"hour",getSpecifier:function(t){return t.hour12?"h":"H"}},{key:"minute",specifier:"m"},{key:"second",specifier:"s"},{key:"timeZoneName",specifier:"z"}],fo={e:"c",E:"c",M:"L",Q:"q"},go={},mo={};function yo(t){return go[t]||(go[t]=new RegExp(t+"+")),go[t]}function vo(t){for(var e=[],i=t.charAt(0),r=i,n=1;n<t.length;n++){var o=t.charAt(n);o===r?i+=o:(e.push(i),i=r=o)}return e.push(i),e}function bo(t,e){var i,r,n=t.length,o=-Number.MAX_VALUE;for(var s in e){for(var a=[],l=s.replace("v","z"),c=0,h=0;h<n;h++){var u=t[h],p=(yo(u[0]).exec(l)||[])[0];if(p){if(l=l.replace(p,Mr),p.length!==u.length){var d=Math.max(Math.min(lo[p.length]-lo[u.length],2),-2);c-=co[d]}}else c-=120;if(a.push(p),c<o)break}l.length&&(c-=20*vo(l).length),c>o&&(o=c,i=a,r=e[s])}r=r.replace("v","z");for(var f=0;f<n;f++){var g=i[f];if(g&&g!==t[f]){var m=i[f][0];r=r.replace(yo(m),t[f]),fo[m]&&(r=r.replace(yo(fo[m]),t[f]))}}return r}function wo(t,e){var i=e.calendar.dateTimeFormats.availableFormats;if(i[t])return i[t];if(mo[e.name]&&mo[e.name][t])return mo[e.name][t];var r,n=t.search(uo);if(n>0){var o=t.substr(0,n),s=t.substr(n);r=ao(e.calendar.dateTimeFormats.short,i[s]||bo(vo(s),i),i[o]||bo(vo(o),i))}else r=bo(vo(t),i);return function(t,e,i){mo[i]||(mo[i]={}),mo[i][t]=e}(t,r,e.name),r}function xo(t,e){var i,r=e.calendar;if(dr(t))i=r.patterns[t]?r.patterns[t]:t;else if(t){if(t.pattern)return t.pattern;var n=t.skeleton;n||(t.datetime?i=ao(r.dateTimeFormats[t.datetime],r.timeFormats[t.datetime],r.dateFormats[t.datetime]):t.date?i=r.dateFormats[t.date]:t.time?i=r.timeFormats[t.time]:n=function(t){for(var e=[],i=0;i<po.length;i++){var r=po[i],n=t[r.key];if(n){var o=r.specifier||r.getSpecifier(t);e.push(o.repeat(ho[n]))}}return e.join(Mr)}(t)),n&&(i=wo(n,e))}return i||(i=r.patterns.d),i}function So(t){var e;return t<=3?e="abbreviated":4===t?e="wide":5===t?e="narrow":6===t&&(e="short"),e}function ko(t,e,i,r,n){return sn(t,{type:e,nameType:So(i),standAlone:r,lower:n})}function Co(t){return"function"==typeof t}function Ao(t){return Boolean(t)&&Co(t.getTime)&&Co(t.getMonth)}var _o="month",To="hour",Oo="zone",Eo="weekday",Mo="quarter",Po={G:"era",y:"year",q:Mo,Q:Mo,M:_o,L:_o,d:"day",E:Eo,c:Eo,e:Eo,h:To,H:To,k:To,K:To,m:"minute",s:"second",S:"millisecond",a:"dayperiod",x:Oo,X:Oo,z:Oo,Z:Oo},Io=/d{1,2}|E{1,6}|e{1,6}|c{3,6}|c{1}|M{1,5}|L{1,5}|y{1,4}|H{1,2}|h{1,2}|k{1,2}|K{1,2}|m{1,2}|a{1,5}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|x{1,5}|X{1,5}|G{1,5}|q{1,5}|Q{1,5}|"[^"]*"|'[^']*'/g;function Do(t,e,i,r){return e<=2?Dn(t+1,e):ko(i,"months",e,r)[t]}function Fo(t,e,i,r){var n=Math.floor(t.getMonth()/3);return e<3?n+1:ko(i,"quarters",e,r)[n]}function Ro(t,e,i){var r=i.shortHours,n=i.optionalMinutes,o=i.separator,s=i.localizedName,a=i.zZeroOffset,l=t.getTimezoneOffset()/60;if(0===l&&a)return"Z";var c=l<=0?"+":"-",h=Math.abs(l).toString().split("."),u=h[1]||0,p=c+(r?h[0]:Dn(h[0],2));(!u&&n||(p+=(o?":":Mr)+Dn(u,2)),s)&&(p=ao(0===l?e.calendar.gmtZeroFormat:e.calendar.gmtFormat,p));return p}function Lo(t,e,i,r){var n;return n=e<3?function(t,e,i){var r=An(i);return(t<r?7-r+t:t-r)+1}(t.getDay(),0,i):ko(i,"days",e,r)[t.getDay()],n}var No={};function Bo(t,e,i){if(void 0===i&&(i=Pr),!Ao(t))return null==t?Mr:t;var r=xr(i);return xo(e,r).replace(Io,(function(e){var i=e.length;return e.includes("'")||e.includes('"')?e.slice(1,i-1):No[e[0]](t,i,r)}))}function jo(t,e,i){var r=t.getTimezoneOffset(),n=new Date(t.getTime()+6e4*(e-i)),o=n.getTimezoneOffset();return new Date(n.getTime()+6e4*(o-r))}No.d=function(t,e){return Dn(t.getDate(),e)},No.E=function(t,e,i){return ko(i,"days",e)[t.getDay()]},No.M=function(t,e,i){return Do(t.getMonth(),e,i,!1)},No.L=function(t,e,i){return Do(t.getMonth(),e,i,!0)},No.y=function(t,e){var i=t.getFullYear();return 2===e&&(i%=100),Dn(i,e)},No.h=function(t,e){return Dn(t.getHours()%12||12,e)},No.H=function(t,e){return Dn(t.getHours(),e)},No.k=function(t,e){return Dn(t.getHours()||24,e)},No.K=function(t,e){return Dn(t.getHours()%12,e)},No.m=function(t,e){return Dn(t.getMinutes(),e)},No.s=function(t,e){return Dn(t.getSeconds(),e)},No.S=function(t,e){var i=t.getMilliseconds();return 0!==i?Dn(String(i/1e3).split(".")[1].substr(0,e),e,!0):Dn(Mr,e)},No.a=function(t,e,i){return ko(i,"dayPeriods",e)[t.getHours()<12?"am":"pm"]},No.z=function(t,e,i){return Ro(t,i,{shortHours:e<4,optionalMinutes:e<4,separator:!0,localizedName:!0})},No.Z=function(t,e,i){return Ro(t,i,{separator:e>3,localizedName:4===e,zZeroOffset:5===e})},No.x=function(t,e,i){return Ro(t,i,{optionalMinutes:1===e,separator:3===e||5===e})},No.X=function(t,e,i){return Ro(t,i,{optionalMinutes:1===e,separator:3===e||5===e,zZeroOffset:!0})},No.G=function(t,e,i){var r=t.getFullYear()>=0?1:0;return ko(i,"eras",e)[r]},No.e=Lo,No.c=function(t,e,i){return Lo(t,e,i,!0)},No.q=function(t,e,i){return Fo(t,e,i,!0)},No.Q=Fo;var zo=/([+|-]\d{1,2})(:?)(\d{2})?/,Uo=/^\/Date\((.*?)\)\/$/,$o=/[+-]\d*/,Ho={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},Vo=/\d+/,qo=/^ */,Wo=/ *$/,Xo=["yyyy/MM/dd HH:mm:ss","yyyy/MM/dd HH:mm","yyyy/MM/dd","E MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:ss.SSSSSSSXXX","yyyy-MM-ddTHH:mm:ss.SSSXXX","yyyy-MM-ddTHH:mm:ss.SSXXX","yyyy-MM-ddTHH:mm:ssXXX","yyyy-MM-ddTHH:mm:ss.SSSSSSS","yyyy-MM-ddTHH:mm:ss.SSS","yyyy-MM-ddTHH:mmXXX","yyyy-MM-ddTHH:mmX","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd","HH:mm:ss","HH:mm"],Go=["G","g","F","Y","y","M","m","D","d","y","T","t"];function Ko(t,e,i){return!(t>=e&&t<=i)}function Yo(t,e){for(var i=e.format,r=e.idx,n=0;i[r]===t;)n++,r++;return n>0&&(r-=1),e.idx=r,n}function Jo(t,e){var i=t?Ho[t]||new RegExp("^\\d{1,"+t+"}"):Vo,r=e.value.substr(e.valueIdx,t).match(i);return r?(r=r[0],e.valueIdx+=r.length,parseInt(r,10)):null}function Zo(t,e,i){for(var r,n,o,s=0,a=t.length,l=0,c=0;s<a;s++)n=(r=t[s]).length,o=e.value.substr(e.valueIdx,n),i&&(o=o.toLowerCase()),o===r&&n>l&&(l=n,c=s);return l?(e.valueIdx+=l,c+1):null}function Qo(t){var e=!1;return t.value.charAt(t.valueIdx)===t.format[t.idx]&&(t.valueIdx++,e=!0),e}function ts(t,e,i){var r=i.shortHours,n=i.noSeparator,o=i.optionalMinutes,s=i.localizedName,a=i.zLiteral;if(t.UTC=!0,a&&"Z"===t.value.charAt(t.valueIdx))return t.valueIdx++,!1;if(s&&!Zo(function(t){var e=t.gmtFormat,i=t.gmtZeroFormat;if(!e)throw vr.NoGMTInfo.error();return[e.replace("{0}",Mr).toLowerCase(),i.replace("{0}",Mr).toLowerCase()]}(e.calendar),t,!0))return!0;var l=zo.exec(t.value.substr(t.valueIdx,6));if(!l)return!s;var c=l[1],h=l[3],u=parseInt(c,10),p=l[2],d=parseInt(h,10);return!!(isNaN(u)||!r&&3!==c.length||!o&&isNaN(d)||n&&p)||(isNaN(d)&&(d=null),!!(Ko(u,-12,13)||d&&Ko(d,0,59))||(t.valueIdx+=l[0].length,t.hoursOffset=u,void(t.minutesOffset=d)))}function es(t,e,i){var r=Yo(t,e),n=ko(i,"months",r,"L"===t,!0),o=r<3?Jo(2,e):Zo(n,e,!0);if(null===o||Ko(o,1,12))return!0;e.month=o-1}function is(t,e,i){var r=Yo(t,e),n=ko(i,"days",r,"c"===t,!0),o=r<3?Jo(1,e):Zo(n,e,!0);if(!o&&0!==o||Ko(o,1,7))return!0}var rs={};function ns(t,e){return""+qo.exec(e)[0]+t+Wo.exec(e)[0]}function ss(t,e,i){for(var r=xo(e,i).split(Mr),n={format:r,idx:0,value:ns(t,e),valueIdx:0,year:null,month:null,day:null,hours:null,minutes:null,seconds:null,milliseconds:null},o=r.length,s=!1;n.idx<o;n.idx++){var a=r[n.idx];if(s)"'"===a&&(s=!1),Qo(n);else if(rs[a]){if(rs[a](n,i))return null}else if("'"===a)s=!0,Qo(n);else if(!Qo(n))return null}return n.valueIdx<t.length?null:function(t){var e,i=t.year,r=t.month,n=t.day,o=t.hours,s=t.minutes,a=t.seconds,l=t.milliseconds,c=t.pmHour,h=t.UTC,u=t.hoursOffset,p=t.minutesOffset,d=null!==o||null!==s||a||null,f=new Date;return null===i&&null===r&&null===n&&d?(i=f.getFullYear(),r=f.getMonth(),n=f.getDate()):(null===i&&(i=f.getFullYear()),null===n&&(n=1)),c&&o<12&&(o+=12),h?(u&&(o+=-u),p&&(s+=-p*(u<0?-1:1)),e=new Date(Date.UTC(i,r,n,o,s,a,l))):function(t,e){e||23!==t.getHours()||t.setHours(t.getHours()+2)}(e=new Date(i,r,n,o,s,a,l),o),i<100&&e.setFullYear(i),e.getDate()!==n&&void 0===h?null:e}(n)||null}function as(t){if(t&&0===t.indexOf("/D")){var e=Uo.exec(t);if(e){e=e[1];var i=$o.exec(e.substring(1));return e=new Date(parseInt(e,10)),i&&(i=function(t){var e="-"===t.substr(0,1)?-1:1,i=t.substring(1);return e*(60*parseInt(i.substr(0,2),10)+parseInt(i.substring(2),10))}(i[0]),e=jo(e,e.getTimezoneOffset(),0),e=jo(e,0,-1*i)),e}}}function ls(t,e,i){if(void 0===i&&(i=Pr),!t)return null;if(Ao(t))return t;var r=String(t).trim(),n=as(r);if(n)return n;for(var o=xr(i),s=e||function(t){for(var e=[],i=t.patterns,r=Go.length,n=0;n<r;n++)e.push(i[Go[n]]);return e.concat(Xo)}(o.calendar),a=(s=Array.isArray(s)?s:[s]).length,l=0;l<a;l++)if(n=ss(r,s[l],o))return n;return n}rs.d=function(t){Yo("d",t);var e=Jo(2,t);if(null===e||Ko(e,1,31))return!0;null===t.day&&(t.day=e)},rs.E=function(t,e){if(null===Zo(ko(e,"days",Yo("E",t),!1,!0),t,!0))return!0},rs.M=function(t,e){return es("M",t,e)},rs.L=function(t,e){return es("L",t,e)},rs.y=function(t){var e=Yo("y",t),i=Jo(1===e?void 0:e,t);if(null===i)return!0;if(2===e){var r=(new Date).getFullYear();(i=r-r%100+i)>2029&&(i-=100)}t.year=i},rs.h=function(t){Yo("h",t);var e=Jo(2,t);if(12===e&&(e=0),null===e||Ko(e,0,11))return!0;t.hours=e},rs.K=function(t){Yo("K",t);var e=Jo(2,t);if(null===e||Ko(e,0,11))return!0;t.hours=e},rs.a=function(t,e){var i=ko(e,"dayPeriods",Yo("a",t),!1,!0),r=Zo([i.pm],t,!0);if(!r&&!Zo([i.am],t,!0))return!0;t.pmHour=r},rs.H=function(t){Yo("H",t);var e=Jo(2,t);if(null===e||Ko(e,0,23))return!0;t.hours=e},rs.k=function(t){Yo("k",t);var e=Jo(2,t);if(null===e||Ko(e,1,24))return!0;t.hours=24===e?0:e},rs.m=function(t){Yo("m",t);var e=Jo(2,t);if(null===e||Ko(e,0,59))return!0;t.minutes=e},rs.s=function(t){Yo("s",t);var e=Jo(2,t);if(null===e||Ko(e,0,59))return!0;t.seconds=e},rs.S=function(t){var e=Yo("S",t),i=t.value.substr(t.valueIdx,e),r=null;if(isNaN(parseInt(i,10))||(r=Fn(r=parseFloat("0."+i,10),3),r*=1e3,t.valueIdx+=e),null===r||Ko(r,0,999))return!0;t.milliseconds=r},rs.z=function(t,e){var i=Yo("z",t)<4,r=ts(t,e,{shortHours:i,optionalMinutes:i,localizedName:!0});if(r)return r},rs.Z=function(t,e){var i=Yo("Z",t),r=ts(t,e,{noSeparator:i<4,zLiteral:5===i,localizedName:4===i});if(r)return r},rs.x=function(t,e){var i=Yo("x",t),r=ts(t,e,{noSeparator:3!==i&&5!==i,optionalMinutes:1===i});if(r)return r},rs.X=function(t,e){var i=Yo("X",t),r=ts(t,e,{noSeparator:3!==i&&5!==i,optionalMinutes:1===i,zLiteral:!0});if(r)return r},rs.G=function(t,e){var i=ko(e,"eras",Yo("G",t),!1,!0);if(null===Zo([i[0],i[1]],t,!0))return!0},rs.e=function(t,e){return is("e",t,e)},rs.c=function(t,e){return is("c",t,e)};var cs={month:{type:"months",minLength:3,standAlone:"L"},quarter:{type:"quarters",minLength:3,standAlone:"q"},weekday:{type:"days",minLength:{E:0,c:3,e:3},standAlone:"c"},dayperiod:{type:"dayPeriods",minLength:0},era:{type:"eras",minLength:0}},hs="literal";function us(t,e){var i=t[t.length-1];i&&i.type===hs?i.pattern+=e:t.push({type:hs,pattern:e})}function ps(t){return"h"===t||"K"===t}function ds(t,e){void 0===e&&(e=Pr);for(var i=xo(t,xr(e)),r=[],n=Io.lastIndex=0,o=Io.exec(i);o;){var s=o[0];if(n<o.index&&us(r,i.substring(n,o.index)),s.startsWith('"')||s.startsWith("'"))us(r,s);else{var a=s[0],l=Po[a],c={type:l,pattern:s};"hour"===l&&(c.hour12=ps(s));var h=cs[l];if(h){var u=to(h.minLength)?h.minLength:h.minLength[a],p=s.length;p>=u&&(c.names={type:h.type,nameType:So(p),standAlone:h.standAlone===a})}r.push(c)}n=Io.lastIndex,o=Io.exec(i)}return n<i.length&&us(r,i.substring(n)),r}var fs=/\{(\d+)(:[^}]+)?\}/g;function gs(t,e,i){if(e){if(Ao(t))return Bo(t,e,i);if(to(t))return Qn(t,e,i)}return null!=t?t:Mr}function ms(t,e,i){return t.replace(fs,(function(t,r,n){return gs(e[parseInt(r,10)],n?n.substring(1):Mr,i)}))}class ys{static setLocale(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};nn(g({},xr("en"),t)),this.localeId=t.name}static format(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return ms(t,i,this.localeId)}static toString(t,e,i){var r=t;return new RegExp("^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(.[0-9]+)?(Z)?$").test(t)&&(r=new Date(t)),gs(r,e,this.localeId||i)}static parseDate(t,e,i){return ls(t,e,this.localeId||i)}}var vs=/\$\{([^}]*)\}/g,bs=/\\\}/g,ws=/__CURLY__/g,xs=/\\#/g,Ss=/__SHARP__/g;class ks{static htmlEncode(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}static render(t,e){var i,r,n="";for(i=0,r=e.length;i<r;i++)n+=t(e[i]);return n}static compile(t){var e,i,r="var $kendoOutput, $kendoHtmlEncode = htmlEncode;",n=ks.options.paramName,o=ks.options.useWithBlock;if("function"==typeof t)return t;for(r+=o?"with("+n+"){":"",r+="$kendoOutput=",e=t.replace(bs,"__CURLY__").replace(vs,"#=$kendoHtmlEncode($1)#").replace(ws,"}").replace(xs,"__SHARP__").split("#"),i=0;i<e.length;i++)r+=ks.compilePart(e[i],i%2==0);r+=o?";}":";",r=(r+="return $kendoOutput;").replace(Ss,"#");try{var s=new Function(n,"htmlEncode",r);return function(t){return s(t,ks.htmlEncode)}}catch(e){throw new Error("Invalid template:'"+t+"' Generated code:'"+r+"'")}}static compilePart(t,e){if(e)return"'"+t.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";var i=t.charAt(0),r=t.substring(1);return"="===i?"+("+r+")+":":"===i?"+$kendoHtmlEncode("+r+")+":";"+t+";$kendoOutput+="}}!function(t,e,i){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(ks,"options",{useWithBlock:!0,paramName:"dataItem"});class Cs{static compile(t){return ks.compile(t)}}var As="arc",_s="#000",Ts="bottom",Os="center",Es="circle",Ms="cross",Ps="date",Is="12px sans-serif",Ds=10,Fs=/\{\d+:?/,Rs="height",Ls="inside",Ns="left",Bs=Number.MAX_VALUE,js=-Number.MAX_VALUE,zs="none",Us="object",$s="outside",Hs="right",Vs="roundedRect",qs="string",Ws="top",Xs="value",Gs="#fff",Ks="width",Ys="x",Js="y";function Zs(t){return Array.isArray(t)}function Qs(t,e){for(var i=Zs(e)?e:[e],r=0;r<i.length;r++){var n=i[r];-1===t.className.indexOf(n)&&(t.className+=" "+n)}}var ta=/\s+/g;function ea(t){return void 0!==t}function ia(t){var e=.5;t.options.stroke&&ea(t.options.stroke.width)&&t.options.stroke.width%2==0&&(e=0);for(var i=0;i<t.segments.length;i++)t.segments[i].anchor().round(0).translate(e,e);return t}function ra(t,e){return-t.x*e.y+t.y*e.x<0}function na(t){return"number"==typeof t&&!isNaN(t)}function oa(t){return typeof t===qs}function sa(t){return na(t)||oa(t)&&isFinite(t)}function aa(t){return"function"==typeof t}var la="object";function ca(t,e){for(var i in e){var r=e[i],n=typeof r,o=void 0;if((o=n===la&&null!==r?r.constructor:null)&&o!==Array)if(r instanceof Date)t[i]=new Date(r.getTime());else if(aa(r.clone))t[i]=r.clone();else{var s=t[i];t[i]=typeof s===la&&s||{},ca(t[i],r)}else"undefined"!==n&&(t[i]=r)}return t}function ha(t){for(var e=arguments,i=arguments.length,r=1;r<i;r++)ca(t,e[r]);return t}function ua(t){return"object"==typeof t}function pa(t){return na(t)?t+"px":t}var da=/width|height|top|left|bottom|right/i;function fa(t){return da.test(t)}function ga(t,e){var i=oa(e)?[e]:e;if(Zs(i)){for(var r={},n=window.getComputedStyle(t),o=0;o<i.length;o++){var s=i[o];r[s]=fa(s)?parseFloat(n[s]):n[s]}return r}if(ua(e))for(var a in e)t.style[a]=pa(e[a])}function ma(t,e){void 0===e&&(e=0);var i={top:0,right:0,bottom:0,left:0};return"number"==typeof t?i.top=i.right=i.bottom=i.left=t:(i.top=t.top||e,i.right=t.right||e,i.bottom=t.bottom||e,i.left=t.left||e),i}var ya={compile:function(t){return t}},va=function(){};va.register=function(t){ya=t},va.compile=function(t){return ya.compile(t)};const ba=va;function wa(t){var e;return void 0===t&&(t={}),t.template?t.template=e=ba.compile(t.template):aa(t.content)&&(e=t.content),e}var xa=/\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g,Sa={};function ka(t){if(Sa[t])return Sa[t];var e=[];return t.replace(xa,(function(t,i,r,n){e.push(ea(i)?i:r||n)})),Sa[t]=function(t){for(var i=t,r=0;r<e.length&&i;r++)i=i[e[r]];return i},Sa[t]}function Ca(t,e){for(var i=t.length,r=[],n=0;n<i;n++)e(t[n])&&r.push(t[n]);return r}function Aa(t,e){if(t.className)for(var i=e.split(" "),r=0;r<i.length;r++)if(-1!==t.className.indexOf(i[r]))return!0}Sa[void 0]=function(t){return t};var _a=function(){this._map={}};_a.prototype.get=function(t){return this._map[this._key(t)]},_a.prototype.set=function(t,e){this._map[this._key(t)]=e},_a.prototype._key=function(t){return t instanceof Date?t.getTime():t};const Ta=_a;function Oa(t,e){if(e)return-1!==e.indexOf(t)}function Ea(t,e){var i,r=(i=e)?Math.pow(10,i):1;return Math.round(t*r)/r}function Ma(t,e,i){return Ea(t+(e-t)*i,3)}var Pa="trigger",Ia=function(t,e){this.observer=t,this.handlerMap=ha({},this.handlerMap,e)};Ia.prototype.trigger=function(t,e){var i,r=this.observer,n=this.handlerMap;return n[t]?i=this.callObserver(n[t],e):r.trigger&&(i=this.callObserver(Pa,t,e)),i},Ia.prototype.callObserver=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return this.observer[t].apply(this.observer,e)},Ia.prototype.requiresHandlers=function(t){if(this.observer.requiresHandlers)return this.observer.requiresHandlers(t);for(var e=0;e<t.length;e++)if(this.handlerMap[t[e]])return!0};const Da=Ia;function Fa(t,e){for(var i=t.length,r=[],n=0;n<i;n++){var o=e(t[n]);ea(o)&&r.push(o)}return r}var Ra=null,La={get browser(){return"undefined"==typeof window||Ra||(Ra=function(t){var e={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+))/i},i={};for(var r in e)if(e.hasOwnProperty(r)){var n=t.match(e[r]);if(n){i[r]=!0,i[n[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,i.version=parseInt(document.documentMode||n[2],10);break}}return i}(window.navigator.userAgent)),Ra}};const Na=La;var Ba=Na.browser||{};function ja(t){var e=0;return t.wheelDelta?(e=-t.wheelDelta/120,Ba.webkit&&(e/=2*Math.max(window.devicePixelRatio,.625))):t.detail&&(e=t.detail/3),e=e>0?Math.ceil(e):Math.floor(e)}function za(t,e){return t.push.apply(t,e),t}var Ua={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1e3:"m"};function $a(t){for(var e=[1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],i="";t>0;)t<e[0]?e.shift():(i+=Ua[e[0]],t-=e[0]);return i}function Ha(){var t,e,i=new Promise((function(r,n){t=function(t){return i._state="resolved",r(t),i},e=function(t){return i._state="rejected",n(t),i}}));return i._state="pending",i.resolve=t,i.reject=e,i.state=function(){return i._state},i}var Va=1;function qa(){return"kdef"+Va++}var Wa=Math.PI/180,Xa=Number.MAX_VALUE,Ga=-Number.MAX_VALUE;function Ka(t){return t/Wa}var Ya=String.fromCharCode;var Ja="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Za(t){for(var e="",i=0,r=function(t){for(var e="",i=0;i<t.length;i++){var r=t.charCodeAt(i);if(55296<=r&&r<=56319){var n=r,o=t.charCodeAt(++i);isNaN(o)||(r=1024*(n-55296)+(o-56320)+65536)}r<128?e+=Ya(r):r<2048?(e+=Ya(192|r>>>6),e+=Ya(128|63&r)):r<65536?(e+=Ya(224|r>>>12),e+=Ya(128|r>>>6&63),e+=Ya(128|63&r)):r<1114111&&(e+=Ya(240|r>>>18),e+=Ya(128|r>>>12&63),e+=Ya(128|r>>>6&63),e+=Ya(128|63&r))}return e}(t);i<r.length;){var n=r.charCodeAt(i++),o=r.charCodeAt(i++),s=r.charCodeAt(i++),a=n>>2,l=(3&n)<<4|o>>4,c=(15&o)<<2|s>>6,h=63&s;isNaN(o)?c=h=64:isNaN(s)&&(h=64),e=e+Ja.charAt(a)+Ja.charAt(l)+Ja.charAt(c)+Ja.charAt(h)}return e}function Qa(t){return ea((t.x||{}).location)?{x:t.x.location,y:t.y.location}:{x:t.pageX||t.clientX||0,y:t.pageY||t.clientY||0}}function tl(t){return void 0===t&&(t={}),t.touch?t.touch.initialTouch:t.target}function el(t){return""===t||null===t||"none"===t||"transparent"===t||!ea(t)}function il(t){if(t)return t[t.length-1]}function rl(t,e,i){return Math.max(Math.min(t,i),e)}function nl(t,e){if(t.length<2)return t.slice();return function t(i){if(i.length<=1)return i;var r=Math.floor(i.length/2),n=i.slice(0,r),o=i.slice(r);return function(t,i){for(var r=[],n=0,o=0,s=0;n<t.length&&o<i.length;)e(t[n],i[o])<=0?r[s++]=t[n++]:r[s++]=i[o++];return n<t.length&&r.push.apply(r,t.slice(n)),o<i.length&&r.push.apply(r,i.slice(o)),r}(n=t(n),o=t(o))}(t)}const ol=Date.now||function(){return(new Date).getTime()};function sl(t){return Promise.all(t)}function al(t){return t*Wa}function ll(t,e){return ea(t)?t:e}function cl(t,e){for(var i in e)for(var r=i.trim().split(" "),n=0;n<r.length;n++)t.addEventListener(r[n],e[i],!1)}function hl(t){var e=t.getBoundingClientRect(),i=document.documentElement;return{top:e.top+(window.pageYOffset||i.scrollTop)-(i.clientTop||0),left:e.left+(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}}function ul(t,e){for(var i={},r=window.getComputedStyle(t)||{},n=Array.isArray(e)?e:[e],o=0;o<n.length;o++){var s=n[o];i[s]=r[s]}return i}function pl(t){return isNaN(t)?t:t+"px"}function dl(t,e){if(!e){var i=ul(t,["width","height"]);return{width:parseInt(i.width,10),height:parseInt(i.height,10)}}var r=e.width,n=e.height;ea(r)&&(t.style.width=pl(r)),ea(n)&&(t.style.height=pl(n))}function fl(t,e){for(var i in void 0===e&&(e={}),e)for(var r=i.trim().split(" "),n=0;n<r.length;n++)t.removeEventListener(r[n],e[i],!1)}function gl(t){var e=ul(t,["paddingLeft","paddingTop"]),i=e.paddingLeft,r=e.paddingTop;return{top:parseFloat(r),left:parseFloat(i)}}const ml=function(){};var yl=function(t){function e(e,i,r,n,o,s){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=0),t.call(this),this.a=e,this.b=i,this.c=r,this.d=n,this.e=o,this.f=s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.multiplyCopy=function(t){return new e(this.a*t.a+this.c*t.b,this.b*t.a+this.d*t.b,this.a*t.c+this.c*t.d,this.b*t.c+this.d*t.d,this.a*t.e+this.c*t.f+this.e,this.b*t.e+this.d*t.f+this.f)},e.prototype.invert=function(){var t=this,i=t.a,r=t.b,n=t.c,o=t.d,s=t.e,a=t.f,l=i*o-r*n;return 0===l?null:new e(o/l,-r/l,-n/l,i/l,(n*a-o*s)/l,(r*s-i*a)/l)},e.prototype.clone=function(){return new e(this.a,this.b,this.c,this.d,this.e,this.f)},e.prototype.equals=function(t){return!!t&&(this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f)},e.prototype.round=function(t){return this.a=Ea(this.a,t),this.b=Ea(this.b,t),this.c=Ea(this.c,t),this.d=Ea(this.d,t),this.e=Ea(this.e,t),this.f=Ea(this.f,t),this},e.prototype.toArray=function(t){var e=[this.a,this.b,this.c,this.d,this.e,this.f];if(ea(t))for(var i=0;i<e.length;i++)e[i]=Ea(e[i],t);return e},e.prototype.toString=function(t,e){return void 0===e&&(e=","),this.toArray(t).join(e)},e.translate=function(t,i){return new e(1,0,0,1,t,i)},e.unit=function(){return new e(1,0,0,1,0,0)},e.rotate=function(t,i,r){var n=new e;return n.a=Math.cos(al(t)),n.b=Math.sin(al(t)),n.c=-n.b,n.d=n.a,n.e=i-i*n.a+r*n.b||0,n.f=r-r*n.a-i*n.b||0,n},e.scale=function(t,i){return new e(t,0,0,i,0,0)},e}(ml);yl.IDENTITY=yl.unit();const vl=yl;var bl=/matrix\((.*)\)/;function wl(t){var e=getComputedStyle(t).transform;return"none"===e?vl.unit():function(t){var e=t.match(bl);if(null===e||2!==e.length)return vl.unit();var i=e[1].split(",").map((function(t){return parseFloat(t)}));return new(Function.prototype.bind.apply(vl,[null].concat(i)))}(e)}function xl(t){if(!t)return vl.unit();for(var e=wl(t),i=t.parentElement;i;){var r=wl(i);e=e.multiplyCopy(r),i=i.parentElement}return e.b=e.c=e.e=e.f=0,e}var Sl=function(t){function e(e){t.call(this),this._size=e,this._length=0,this._map={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.put=function(t,e){var i=this._map,r={key:t,value:e};i[t]=r,this._head?(this._tail.newer=r,r.older=this._tail,this._tail=r):this._head=this._tail=r,this._length>=this._size?(i[this._head.key]=null,this._head=this._head.newer,this._head.older=null):this._length++},e.prototype.get=function(t){var e=this._map[t];if(e)return e===this._head&&e!==this._tail&&(this._head=e.newer,this._head.older=null),e!==this._tail&&(e.older&&(e.older.newer=e.newer,e.newer.older=e.older),e.older=this._tail,e.newer=null,this._tail.newer=e,this._tail=e),e.value},e}(ml);const kl=Sl;var Cl=/\r?\n|\r|\t/g;function Al(t){return String(t).replace(Cl," ")}function _l(t){var e=[];for(var i in t)e.push(i+t[i]);return e.sort().join("")}function Tl(t){for(var e=2166136261,i=0;i<t.length;++i)e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24),e^=t.charCodeAt(i);return e>>>0}var Ol,El={baselineMarkerSize:1};"undefined"!=typeof document&&((Ol=document.createElement("div")).style.cssText="position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: pre!important;");var Ml=function(t){function e(e){t.call(this),this._cache=new kl(1e3),this.options=Object.assign({},El,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.measure=function(t,e,i){if(void 0===i&&(i={}),null==t)return{width:0,height:0,baseline:0};var r=Tl(t+_l(e)),n=this._cache.get(r);if(n)return n;var o={width:0,height:0,baseline:0},s=i.box||Ol,a=this._baselineMarker().cloneNode(!1);for(var l in e){var c=e[l];void 0!==c&&(s.style[l]=c)}var h=!1!==i.normalizeText?Al(t):String(t);return s.textContent=h,s.appendChild(a),document.body.appendChild(s),h.length&&(o.width=s.offsetWidth-this.options.baselineMarkerSize,o.height=s.offsetHeight,o.baseline=a.offsetTop+this.options.baselineMarkerSize),o.width>0&&o.height>0&&this._cache.put(r,o),s.parentNode.removeChild(s),o},e.prototype._baselineMarker=function(){var t=document.createElement("div");return t.style.cssText="display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;",t},e}(ml);Ml.current=new Ml;const Pl=Ml;function Il(t,e,i){return Pl.current.measure(t,e,i)}function Dl(t){var e=window.console;void 0!==e&&e.log&&e.log(t)}var Fl=e.append,Rl=e.bindEvents,Ll=e.defined,Nl=e.deg,Bl=e.elementOffset,jl=e.elementSize,zl=e.eventCoordinates,Ul=e.eventElement,$l=e.hashKey,Hl=e.last,Vl=e.limitValue,ql=e.objectKey,Wl=e.rad,Xl=e.round,Gl=e.unbindEvents,Kl=e.valueOrDefault,Yl=function(){};Yl.fetchFonts=function(t,e,i){void 0===i&&(i={depth:0});!t||i.depth>5||!document.fonts||Object.keys(t).forEach((function(r){var n=t[r];"dataSource"!==r&&"$"!==r[0]&&n&&("font"===r?e.push(n):"object"==typeof n&&(i.depth++,Yl.fetchFonts(n,e,i),i.depth--))}))},Yl.loadFonts=function(t,e){var i=[];if(t.length>0&&document.fonts){try{i=t.map((function(t){return document.fonts.load(t)}))}catch(t){Dl(t)}Promise.all(i).then(e,e)}else e()},Yl.preloadFonts=function(t,e){var i=[];Yl.fetchFonts(t,i),Yl.loadFonts(i,e)};const Jl=Yl;function Zl(t,e){var i=t.prototype;i.options?i.options=ha({},i.options,e):i.options=e}function Ql(t){for(var e=Bs,i=js,r=0,n=t.length;r<n;r++){var o=t[r];null!==o&&isFinite(o)&&(e=Math.min(e,o),i=Math.max(i,o))}return{min:e===Bs?void 0:e,max:i===js?void 0:i}}function tc(t,e){for(var i=0;i<t.length;i++){var r=t[i];if(e(r,i,t))return r}}var ec=vl,ic=/matrix\((.*)\)/;function rc(t){var e=getComputedStyle(t).transform;return"none"===e?ec.unit():function(t){var e=t.match(ic);if(null===e||2!==e.length)return ec.unit();var i=e[1].split(",").map((function(t){return parseFloat(t)}));return new(Function.prototype.bind.apply(ec,[null].concat(i)))}(e)}const nc={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};var oc=Na.browser,sc=function(t){var e=Object.keys(nc);e.push("transparent");var i=new RegExp("^("+e.join("|")+")(\\W|$)","i");return sc=function(t){return i.exec(t)},i.exec(t)},ac=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toHSV=function(){return this},e.prototype.toRGB=function(){return this},e.prototype.toHex=function(t){return this.toBytes().toHex(t)},e.prototype.toBytes=function(){return this},e.prototype.toCss=function(t){return"#"+this.toHex(t)},e.prototype.toCssRgba=function(){var t=this.toBytes();return"rgba("+t.r+", "+t.g+", "+t.b+", "+parseFloat(Number(this.a).toFixed(3))+")"},e.prototype.toDisplay=function(){return oc.msie&&oc.version<9?this.toCss():this.toCssRgba()},e.prototype.equals=function(t){return t===this||null!=t&&this.toCssRgba()===gc(t).toCssRgba()},e.prototype.diff=function(t){if(null===t)return NaN;var e=this.toBytes(),i=t.toBytes();return Math.sqrt(Math.pow(.3*(e.r-i.r),2)+Math.pow(.59*(e.g-i.g),2)+Math.pow(.11*(e.b-i.b),2))},e.prototype.clone=function(){var t=this.toBytes();return t===this&&(t=new cc(t.r,t.g,t.b,t.a)),t},e}(ml),lc=function(t){function e(e,i,r,n){t.call(this),this.r=e,this.g=i,this.b=r,this.a=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toHSV=function(){var t,e,i=this,r=i.r,n=i.g,o=i.b,s=Math.min(r,n,o),a=Math.max(r,n,o),l=a-s,c=a;return 0===l?new uc(0,0,c,this.a):(0!==a?(e=l/a,t=r===a?(n-o)/l:n===a?2+(o-r)/l:4+(r-n)/l,(t*=60)<0&&(t+=360)):(e=0,t=-1),new uc(t,e,c,this.a))},e.prototype.toHSL=function(){var t,e,i=this,r=i.r,n=i.g,o=i.b,s=Math.max(r,n,o),a=Math.min(r,n,o),l=(s+a)/2;if(s===a)t=e=0;else{var c=s-a;switch(e=l>.5?c/(2-s-a):c/(s+a),s){case r:t=(n-o)/c+(n<o?6:0);break;case n:t=(o-r)/c+2;break;case o:t=(r-n)/c+4}}return new pc(60*t,100*e,100*l,this.a)},e.prototype.toBytes=function(){return new cc(255*this.r,255*this.g,255*this.b,this.a)},e}(ac),cc=function(t){function e(e,i,r,n){t.call(this,Math.round(e),Math.round(i),Math.round(r),n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toRGB=function(){return new t(this.r/255,this.g/255,this.b/255,this.a)},e.prototype.toHSV=function(){return this.toRGB().toHSV()},e.prototype.toHSL=function(){return this.toRGB().toHSL()},e.prototype.toHex=function(t){var e=hc(this.r,2)+hc(this.g,2)+hc(this.b,2);return t&&t.alpha&&(e+=hc(Math.round(255*this.a),2)),e},e.prototype.toBytes=function(){return this},e}(lc);function hc(t,e,i){void 0===i&&(i="0");for(var r=t.toString(16);e>r.length;)r=i+r;return r}var uc=function(t){function e(e,i,r,n){t.call(this),this.h=e,this.s=i,this.v=r,this.a=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toRGB=function(){var t,e,i,r=this,n=r.h,o=r.s,s=r.v;if(0===o)t=e=i=s;else{n/=60;var a=Math.floor(n),l=n-a,c=s*(1-o),h=s*(1-o*l),u=s*(1-o*(1-l));switch(a){case 0:t=s,e=u,i=c;break;case 1:t=h,e=s,i=c;break;case 2:t=c,e=s,i=u;break;case 3:t=c,e=h,i=s;break;case 4:t=u,e=c,i=s;break;default:t=s,e=c,i=h}}return new lc(t,e,i,this.a)},e.prototype.toHSL=function(){return this.toRGB().toHSL()},e.prototype.toBytes=function(){return this.toRGB().toBytes()},e}(ac),pc=function(t){function e(e,i,r,n){t.call(this),this.h=e,this.s=i,this.l=r,this.a=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toRGB=function(){var t,e,i,r=this.h/360,n=this.s/100,o=this.l/100;if(0===n)t=e=i=o;else{var s=o<.5?o*(1+n):o+n-o*n,a=2*o-s;t=dc(a,s,r+1/3),e=dc(a,s,r),i=dc(a,s,r-1/3)}return new lc(t,e,i,this.a)},e.prototype.toHSV=function(){return this.toRGB().toHSV()},e.prototype.toBytes=function(){return this.toRGB().toBytes()},e}(ac);function dc(t,e,i){var r=i;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function fc(t){return parseFloat(parseFloat(parseInt(t,16)/255).toFixed(3))}function gc(t,e){var i,r;if(null==t||"none"===t)return null;if(t instanceof ac)return t;var n=t.toLowerCase();if(i=sc(n))return(n="transparent"===i[1]?new lc(1,1,1,0):gc(nc[i[1]],e)).match=[i[1]],n;if((i=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(n))?r=new cc(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),1):(i=/^#?([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(n))?r=new cc(parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16),1):(i=/^#?([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(n))?r=new cc(parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16),fc(i[4]+i[4])):(i=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(n))?r=new cc(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),fc(i[4])):(i=/^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/.exec(n))?r=new cc(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),1):(i=/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)/.exec(n))?r=new cc(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),parseFloat(i[4])):(i=/^rgb\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*\)/.exec(n))?r=new lc(parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])/100,1):(i=/^rgba\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9.]+)\s*\)/.exec(n))&&(r=new lc(parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])/100,parseFloat(i[4]))),r)r.match=i;else if(!e)throw new Error("Cannot parse color: "+n);return r}var mc=function(t){function e(i){var r=this;if(t.call(this),1===arguments.length)for(var n=e.formats,o=this.resolveColor(i),s=0;s<n.length;s++){var a=n[s].re,l=n[s].process,c=a.exec(o);if(c){var h=l(c);r.r=h[0],r.g=h[1],r.b=h[2]}}else this.r=arguments[0],this.g=arguments[1],this.b=arguments[2];this.r=this.normalizeByte(this.r),this.g=this.normalizeByte(this.g),this.b=this.normalizeByte(this.b)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toHex=function(){var t=this.padDigit,e=this.r.toString(16),i=this.g.toString(16),r=this.b.toString(16);return"#"+t(e)+t(i)+t(r)},e.prototype.resolveColor=function(t){var i=t||"black";return"#"===i.charAt(0)&&(i=i.substr(1,6)),i=(i=i.replace(/ /g,"")).toLowerCase(),i=e.namedColors[i]||i},e.prototype.normalizeByte=function(t){return t<0||isNaN(t)?0:t>255?255:t},e.prototype.padDigit=function(t){return 1===t.length?"0"+t:t},e.prototype.brightness=function(t){var e=Math.round;return this.r=e(this.normalizeByte(this.r*t)),this.g=e(this.normalizeByte(this.g*t)),this.b=e(this.normalizeByte(this.b*t)),this},e.prototype.percBrightness=function(){return Math.sqrt(.241*this.r*this.r+.691*this.g*this.g+.068*this.b*this.b)},e.prototype.isDark=function(){return this.percBrightness()<180},e.fromBytes=function(t,e,i,r){return new cc(t,e,i,null!=r?r:1)},e.fromRGB=function(t,e,i,r){return new lc(t,e,i,null!=r?r:1)},e.fromHSV=function(t,e,i,r){return new uc(t,e,i,null!=r?r:1)},e.fromHSL=function(t,e,i,r){return new pc(t,e,i,null!=r?r:1)},e}(ml);mc.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],mc.namedColors=nc;const yc=mc;const vc=function(t){return new yc(t).isDark()?Gs:_s};var bc={},wc=function(t){this._index={},this._values=t?t.slice(0):[];for(var e=0;e<this._values.length;e++)this._index[this._values[e]]=e},xc={size:{configurable:!0}};wc.prototype.values=function(){return this._values.filter((function(t){return t!==bc}))},wc.prototype.has=function(t){return void 0!==this._index[t]},wc.prototype.add=function(t){this.has(t)||(this._index[t]=this._values.length,this._values.push(t))},wc.prototype.delete=function(t){var e=this._index[t];void 0!==e&&(this._values[e]=bc,delete this._index[t])},wc.prototype.clear=function(){this._index={},this._values=[]},xc.size.get=function(){return this._values.length},Object.defineProperties(wc.prototype,xc);var Sc=function(t){this._set=new Set(t)},kc={size:{configurable:!0}};Sc.prototype.values=function(){return Array.from(this._set)},Sc.prototype.has=function(t){return this._set.has(t)},Sc.prototype.add=function(t){this._set.add(t)},Sc.prototype.delete=function(t){this._set.delete(t)},Sc.prototype.clear=function(){this._set.clear()},kc.size.get=function(){return this._set.size},Object.defineProperties(Sc.prototype,kc);function Cc(t){return e=!1,"function"==typeof Set&&(e=new Set([1]).has(1)),e?new Sc(t):new wc(t);var e}function Ac(t){throw t}const _c={INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110};function Tc(t,e){var i=Xl(e-t,9);if(0===i){if(0===e)return.1;i=Math.abs(e)}var r=Math.pow(10,Math.floor(Math.log(i)/Math.log(10))),n=Xl(i/r,Ds);return Xl(r*(n<1.904762?.2:n<4.761904?.5:n<9.523809?1:2),Ds)}var Oc=function(t){function e(e,i){t.call(this),this.x=e||0,this.y=i||0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y},e.prototype.rotate=function(t,e){var i=Wl(e),r=Math.cos(i),n=Math.sin(i),o=t.x,s=t.y,a=this.x,l=this.y;return this.x=Xl(o+(a-o)*r+(l-s)*n,3),this.y=Xl(s+(l-s)*r-(a-o)*n,3),this},e.prototype.multiply=function(t){return this.x*=t,this.y*=t,this},e.prototype.distanceTo=function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},e.onCircle=function(t,i,r){var n=Wl(i);return new e(t.x-r*Math.cos(n),t.y-r*Math.sin(n))},e}(ml);const Ec=Oc;var Mc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.observers=function(){return this._observers=this._observers||[],this._observers},e.prototype.addObserver=function(t){return this._observers?this._observers.push(t):this._observers=[t],this},e.prototype.removeObserver=function(t){var e=this.observers(),i=e.indexOf(t);return-1!==i&&e.splice(i,1),this},e.prototype.trigger=function(t,e){var i=this._observers;if(i&&!this._suspended)for(var r=0;r<i.length;r++){var n=i[r];n[t]&&n[t](e)}return this},e.prototype.optionsChange=function(t){void 0===t&&(t={}),t.element=this,this.trigger("optionsChange",t)},e.prototype.geometryChange=function(){this.trigger("geometryChange",{element:this})},e.prototype.suspend=function(){return this._suspended=(this._suspended||0)+1,this},e.prototype.resume=function(){return this._suspended=Math.max((this._suspended||0)-1,0),this},e.prototype._observerField=function(t,e){this[t]&&this[t].removeObserver(this),this[t]=e,e.addObserver(this)},e}(ml);const Pc=Mc;function Ic(t){return function(e){return this[t]!==e&&(this[t]=e,this.geometryChange()),this}}function Dc(t){return function(){return this[t]}}const Fc=function(t,e){var i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t);return function(t,e){for(var i=0;i<e.length;i++){var r=e[i],n=r.charAt(0).toUpperCase()+r.substring(1,r.length);t["set"+n]=Ic(r),t["get"+n]=Dc(r)}}(i.prototype,e),i};function Rc(t){return t&&"function"==typeof t.matrix?t.matrix():t}var Lc=function(t){function e(e,i){t.call(this),this.x=e||0,this.y=i||0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={ZERO:{configurable:!0}};return e.prototype.equals=function(t){return t&&t.x===this.x&&t.y===this.y},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.rotate=function(t,i){var r=e.create(i)||e.ZERO;return this.transform(vl.rotate(t,r.x,r.y))},e.prototype.translate=function(t,e){return this.x+=t,this.y+=e,this.geometryChange(),this},e.prototype.translateWith=function(t){return this.translate(t.x,t.y)},e.prototype.move=function(t,e){return this.x=this.y=0,this.translate(t,e)},e.prototype.scale=function(t,e){return void 0===e&&(e=t),this.x*=t,this.y*=e,this.geometryChange(),this},e.prototype.scaleCopy=function(t,e){return this.clone().scale(t,e)},e.prototype.transform=function(t){var e=Rc(t),i=this.x,r=this.y;return this.x=e.a*i+e.c*r+e.e,this.y=e.b*i+e.d*r+e.f,this.geometryChange(),this},e.prototype.transformCopy=function(t){var e=this.clone();return t&&e.transform(t),e},e.prototype.distanceTo=function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},e.prototype.round=function(t){return this.x=Ea(this.x,t),this.y=Ea(this.y,t),this.geometryChange(),this},e.prototype.toArray=function(t){var e=ea(t);return[e?Ea(this.x,t):this.x,e?Ea(this.y,t):this.y]},e.prototype.toString=function(t,e){void 0===e&&(e=" ");var i=this.x,r=this.y;return ea(t)&&(i=Ea(i,t),r=Ea(r,t)),i+e+r},e.create=function(t,i){if(ea(t))return t instanceof e?t:1===arguments.length&&2===t.length?new e(t[0],t[1]):new e(t,i)},e.min=function(){for(var t=arguments,i=Xa,r=Xa,n=0;n<arguments.length;n++){var o=t[n];i=Math.min(o.x,i),r=Math.min(o.y,r)}return new e(i,r)},e.max=function(){for(var t=arguments,i=Ga,r=Ga,n=0;n<arguments.length;n++){var o=t[n];i=Math.max(o.x,i),r=Math.max(o.y,r)}return new e(i,r)},e.minPoint=function(){return new e(Ga,Ga)},e.maxPoint=function(){return new e(Xa,Xa)},i.ZERO.get=function(){return new e(0,0)},Object.defineProperties(e,i),e}(Fc(Pc,["x","y"]));const Nc=Lc;var Bc=function(t){function e(e,i){t.call(this),this.width=e||0,this.height=i||0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={ZERO:{configurable:!0}};return e.prototype.equals=function(t){return t&&t.width===this.width&&t.height===this.height},e.prototype.clone=function(){return new e(this.width,this.height)},e.prototype.toArray=function(t){var e=ea(t);return[e?Ea(this.width,t):this.width,e?Ea(this.height,t):this.height]},e.create=function(t,i){if(ea(t))return t instanceof e?t:1===arguments.length&&2===t.length?new e(t[0],t[1]):new e(t,i)},i.ZERO.get=function(){return new e(0,0)},Object.defineProperties(e,i),e}(Fc(Pc,["width","height"]));const jc=Bc;var zc=function(t){function e(e,i,r){void 0===e&&(e=new Nc),void 0===i&&(i=new jc),void 0===r&&(r=0),t.call(this),this.setOrigin(e),this.setSize(i),this.setCornerRadius(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.origin.clone(),this.size.clone())},e.prototype.equals=function(t){return t&&t.origin.equals(this.origin)&&t.size.equals(this.size)},e.prototype.setOrigin=function(t){return this._observerField("origin",Nc.create(t)),this.geometryChange(),this},e.prototype.getOrigin=function(){return this.origin},e.prototype.setCornerRadius=function(t){return this.cornerRadius=Array.isArray(t)?t:[t,t],this.geometryChange(),this},e.prototype.getCornerRadius=function(){return this.cornerRadius},e.prototype.setSize=function(t){return this._observerField("size",jc.create(t)),this.geometryChange(),this},e.prototype.getSize=function(){return this.size},e.prototype.width=function(){return this.size.width},e.prototype.height=function(){return this.size.height},e.prototype.topLeft=function(){return this.origin.clone()},e.prototype.bottomRight=function(){return this.origin.clone().translate(this.width(),this.height())},e.prototype.topRight=function(){return this.origin.clone().translate(this.width(),0)},e.prototype.bottomLeft=function(){return this.origin.clone().translate(0,this.height())},e.prototype.center=function(){return this.origin.clone().translate(this.width()/2,this.height()/2)},e.prototype.bbox=function(t){var i=this.topLeft().transformCopy(t),r=this.topRight().transformCopy(t),n=this.bottomRight().transformCopy(t),o=this.bottomLeft().transformCopy(t);return e.fromPoints(i,r,n,o)},e.prototype.transformCopy=function(t){return e.fromPoints(this.topLeft().transform(t),this.bottomRight().transform(t))},e.prototype.expand=function(t,e){return void 0===e&&(e=t),this.size.width+=2*t,this.size.height+=2*e,this.origin.translate(-t,-e),this},e.prototype.expandCopy=function(t,e){return this.clone().expand(t,e)},e.prototype.containsPoint=function(t){var e=this.origin,i=this.bottomRight();return!(t.x<e.x||t.y<e.y||i.x<t.x||i.y<t.y)},e.prototype._isOnPath=function(t,e){var i=this.expandCopy(e,e),r=this.expandCopy(-e,-e);return i.containsPoint(t)&&!r.containsPoint(t)},e.fromPoints=function(){var t=Nc.min.apply(null,arguments),i=Nc.max.apply(null,arguments),r=new jc(i.x-t.x,i.y-t.y);return new e(t,r)},e.union=function(t,i){return e.fromPoints(Nc.min(t.topLeft(),i.topLeft()),Nc.max(t.bottomRight(),i.bottomRight()))},e.intersect=function(t,i){var r={left:t.topLeft().x,top:t.topLeft().y,right:t.bottomRight().x,bottom:t.bottomRight().y},n={left:i.topLeft().x,top:i.topLeft().y,right:i.bottomRight().x,bottom:i.bottomRight().y};if(r.left<=n.right&&n.left<=r.right&&r.top<=n.bottom&&n.top<=r.bottom)return e.fromPoints(new Nc(Math.max(r.left,n.left),Math.max(r.top,n.top)),new Nc(Math.min(r.right,n.right),Math.min(r.bottom,n.bottom)))},e}(Pc);const Uc=zc;var $c=function(t){function e(e,i,r,n){t.call(this),this.x1=e||0,this.y1=i||0,this.x2=r||0,this.y2=n||0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.equals=function(t){return this.x1===t.x1&&this.x2===t.x2&&this.y1===t.y1&&this.y2===t.y2},e.prototype.width=function(){return this.x2-this.x1},e.prototype.height=function(){return this.y2-this.y1},e.prototype.translate=function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},e.prototype.move=function(t,e){var i=this.height(),r=this.width();return Ll(t)&&(this.x1=t,this.x2=this.x1+r),Ll(e)&&(this.y1=e,this.y2=this.y1+i),this},e.prototype.wrap=function(t){return this.x1=Math.min(this.x1,t.x1),this.y1=Math.min(this.y1,t.y1),this.x2=Math.max(this.x2,t.x2),this.y2=Math.max(this.y2,t.y2),this},e.prototype.wrapPoint=function(t){var i=Zs(t),r=i?t[0]:t.x,n=i?t[1]:t.y;return this.wrap(new e(r,n,r,n)),this},e.prototype.snapTo=function(t,e){return e!==Ys&&e||(this.x1=t.x1,this.x2=t.x2),e!==Js&&e||(this.y1=t.y1,this.y2=t.y2),this},e.prototype.alignTo=function(t,e){var i=this.height(),r=this.width(),n=e===Ws||e===Ts?Js:Ys,o=n===Js?i:r;if(e===Os){var s=t.center(),a=this.center();this.x1+=s.x-a.x,this.y1+=s.y-a.y}else this[n+1]=e===Ws||e===Ns?t[n+1]-o:t[n+2];return this.x2=this.x1+r,this.y2=this.y1+i,this},e.prototype.shrink=function(t,e){return this.x2-=t,this.y2-=e,this},e.prototype.expand=function(t,e){return this.shrink(-t,-e),this},e.prototype.pad=function(t){var e=ma(t);return this.x1-=e.left,this.x2+=e.right,this.y1-=e.top,this.y2+=e.bottom,this},e.prototype.unpad=function(t){var e=ma(t);return e.left=-e.left,e.top=-e.top,e.right=-e.right,e.bottom=-e.bottom,this.pad(e)},e.prototype.clone=function(){return new e(this.x1,this.y1,this.x2,this.y2)},e.prototype.center=function(){return new Ec(this.x1+this.width()/2,this.y1+this.height()/2)},e.prototype.containsPoint=function(t){return t.x>=this.x1&&t.x<=this.x2&&t.y>=this.y1&&t.y<=this.y2},e.prototype.points=function(){return[new Ec(this.x1,this.y1),new Ec(this.x2,this.y1),new Ec(this.x2,this.y2),new Ec(this.x1,this.y2)]},e.prototype.getHash=function(){return[this.x1,this.y1,this.x2,this.y2].join(",")},e.prototype.overlaps=function(t){return!(t.y2<this.y1||this.y2<t.y1||t.x2<this.x1||this.x2<t.x1)},e.prototype.rotate=function(t){var e=this.width(),i=this.height(),r=this.center(),n=r.x,o=r.y,s=Hc(0,0,n,o,t),a=Hc(e,0,n,o,t),l=Hc(e,i,n,o,t),c=Hc(0,i,n,o,t);return e=Math.max(s.x,a.x,l.x,c.x)-Math.min(s.x,a.x,l.x,c.x),i=Math.max(s.y,a.y,l.y,c.y)-Math.min(s.y,a.y,l.y,c.y),this.x2=this.x1+e,this.y2=this.y1+i,this},e.prototype.toRect=function(){return new Uc([this.x1,this.y1],[this.width(),this.height()])},e.prototype.hasSize=function(){return 0!==this.width()&&0!==this.height()},e.prototype.align=function(t,e,i){var r=e+1,n=e+2,o=e===Ys?Ks:Rs,s=this[o]();Oa(i,[Ns,Ws])?(this[r]=t[r],this[n]=this[r]+s):Oa(i,[Hs,Ts])?(this[n]=t[n],this[r]=this[n]-s):i===Os&&(this[r]=t[r]+(t[o]()-s)/2,this[n]=this[r]+s)},e}(ml);function Hc(t,e,i,r,n){var o=Wl(n);return new Ec(i+(t-i)*Math.cos(o)+(e-r)*Math.sin(o),r-(t-i)*Math.sin(o)+(e-r)*Math.cos(o))}const Vc=$c;var qc=function(t){function e(e,i,r,n,o){t.call(this),this.center=e,this.innerRadius=i,this.radius=r,this.startAngle=n,this.angle=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.center,this.innerRadius,this.radius,this.startAngle,this.angle)},e.prototype.middle=function(){return this.startAngle+this.angle/2},e.prototype.setRadius=function(t,e){return e?this.innerRadius=t:this.radius=t,this},e.prototype.point=function(t,e){var i=Wl(t),r=Math.cos(i),n=Math.sin(i),o=e?this.innerRadius:this.radius,s=Xl(this.center.x-r*o,3),a=Xl(this.center.y-n*o,3);return new Ec(s,a)},e.prototype.adjacentBox=function(t,e,i){var r=this.clone().expand(t),n=r.middle(),o=r.point(n),s=e/2,a=i/2,l=Math.sin(Wl(n)),c=Math.cos(Wl(n)),h=o.x-s,u=o.y-a;return Math.abs(l)<.9&&(h+=s*-c/Math.abs(c)),Math.abs(c)<.9&&(u+=a*-l/Math.abs(l)),new Vc(h,u,h+e,u+i)},e.prototype.containsPoint=function(t){var e=this.center,i=this.innerRadius,r=this.radius,n=this.startAngle,o=this.startAngle+this.angle,s=t.x-e.x,a=t.y-e.y,l=new Ec(s,a),c=this.point(n),h=new Ec(c.x-e.x,c.y-e.y),u=this.point(o),p=new Ec(u.x-e.x,u.y-e.y),d=Xl(s*s+a*a,3);return(h.equals(l)||ra(h,l))&&!ra(p,l)&&d>=i*i&&d<=r*r},e.prototype.getBBox=function(){var t,e=new Vc(Bs,Bs,js,js),i=Xl(this.startAngle%360),r=Xl((i+this.angle)%360),n=this.innerRadius,o=[0,90,180,270,i,r].sort(Wc),s=o.indexOf(i),a=o.indexOf(r);t=i===r?o:s<a?o.slice(s,a+1):[].concat(o.slice(0,a+1),o.slice(s,o.length));for(var l=0;l<t.length;l++){var c=this.point(t[l]);e.wrapPoint(c),e.wrapPoint(c,n)}return n||e.wrapPoint(this.center),e},e.prototype.expand=function(t){return this.radius+=t,this},e}(ml);function Wc(t,e){return t-e}const Xc=qc;!function(t){function e(e,i,r,n){t.call(this,e,0,i,r,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.expand=function(e){return t.prototype.expand.call(this,e)},e.prototype.clone=function(){return new e(this.center,this.radius,this.startAngle,this.angle)},e.prototype.setRadius=function(t){return this.radius=t,this}}(Xc);var Gc=10;function Kc(t,e,i){return void 0===i&&(i=Gc),0===Ea(Math.abs(t-e),i)}function Yc(t,e,i){return t<e||Kc(t,e,i)}function Jc(t,e,i,r){var n=0,o=0;return r&&(n=Math.atan2(r.c*i,r.a*e),0!==r.b&&(o=Math.atan2(r.d*i,r.b*e))),{x:n,y:o}}var Zc=function(t){function e(e){void 0===e&&(e=vl.unit()),t.call(this),this._matrix=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this._matrix.clone())},e.prototype.equals=function(t){return t&&t._matrix.equals(this._matrix)},e.prototype.translate=function(t,e){return this._matrix=this._matrix.multiplyCopy(vl.translate(t,e)),this._optionsChange(),this},e.prototype.scale=function(t,e,i){void 0===e&&(e=t),void 0===i&&(i=null);var r=i;return r&&(r=Nc.create(r),this._matrix=this._matrix.multiplyCopy(vl.translate(r.x,r.y))),this._matrix=this._matrix.multiplyCopy(vl.scale(t,e)),r&&(this._matrix=this._matrix.multiplyCopy(vl.translate(-r.x,-r.y))),this._optionsChange(),this},e.prototype.rotate=function(t,e){var i=Nc.create(e)||Nc.ZERO;return this._matrix=this._matrix.multiplyCopy(vl.rotate(t,i.x,i.y)),this._optionsChange(),this},e.prototype.multiply=function(t){var e=Rc(t);return this._matrix=this._matrix.multiplyCopy(e),this._optionsChange(),this},e.prototype.matrix=function(t){return t?(this._matrix=t,this._optionsChange(),this):this._matrix},e.prototype._optionsChange=function(){this.optionsChange({field:"transform",value:this})},e}(Pc);const Qc=Zc;function th(t){return null===t?null:t instanceof Qc?t:new Qc(t)}var eh=Math.pow,ih=function(t){function e(e,i){void 0===e&&(e=new Nc),void 0===i&&(i={}),t.call(this),this.setCenter(e),this.radiusX=i.radiusX,this.radiusY=i.radiusY||i.radiusX,this.startAngle=i.startAngle,this.endAngle=i.endAngle,this.anticlockwise=i.anticlockwise||!1,this.xRotation=i.xRotation}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.center,{radiusX:this.radiusX,radiusY:this.radiusY,startAngle:this.startAngle,endAngle:this.endAngle,anticlockwise:this.anticlockwise})},e.prototype.setCenter=function(t){return this._observerField("center",Nc.create(t)),this.geometryChange(),this},e.prototype.getCenter=function(){return this.center},e.prototype.pointAt=function(t){var e=this.center,i=al(t);return new Nc(e.x+this.radiusX*Math.cos(i),e.y+this.radiusY*Math.sin(i))},e.prototype.curvePoints=function(){var t,e=this.startAngle,i=this.anticlockwise?-1:1,r=[this.pointAt(e)],n=this._arcInterval(),o=n.endAngle-n.startAngle,s=Math.ceil(o/45),a=o/s,l=e;this.xRotation&&(t=th().rotate(this.xRotation,this.center));for(var c=1;c<=s;c++){var h=l+i*a,u=this._intervalCurvePoints(l,h,t);r.push(u.cp1,u.cp2,u.p2),l=h}return r},e.prototype.bbox=function(t){for(var e=this._arcInterval(),i=e.startAngle,r=e.endAngle,n=Jc(this.center,this.radiusX,this.radiusY,t),o=Ka(n.x),s=Ka(n.y),a=this.pointAt(r).transformCopy(t),l=nh(o,i),c=nh(s,i),h=this.pointAt(i).transformCopy(t),u=Nc.min(h,a),p=Nc.max(h,a);l<r||c<r;){var d=void 0;l<r&&(d=this.pointAt(l).transformCopy(t),l+=90);var f=void 0;c<r&&(f=this.pointAt(c).transformCopy(t),c+=90),h=new Nc(d.x,f.y),u=Nc.min(u,h),p=Nc.max(p,h)}return Uc.fromPoints(u,p)},e.prototype._arcInterval=function(){var t=this,e=t.startAngle,i=t.endAngle,r=t.anticlockwise;if(r){var n=e;e=i,i=n}return(e>i||r&&e===i)&&(i+=360),{startAngle:e,endAngle:i}},e.prototype._intervalCurvePoints=function(t,e,i){var r=this.pointAt(t),n=this.pointAt(e),o=this._derivativeAt(t),s=this._derivativeAt(e),a=(al(e)-al(t))/3,l=new Nc(r.x+a*o.x,r.y+a*o.y),c=new Nc(n.x-a*s.x,n.y-a*s.y);return i&&(r.transform(i),n.transform(i),l.transform(i),c.transform(i)),{p1:r,cp1:l,cp2:c,p2:n}},e.prototype._derivativeAt=function(t){var e=al(t);return new Nc(-this.radiusX*Math.sin(e),this.radiusY*Math.cos(e))},e.prototype.containsPoint=function(t){var e,i=this._arcInterval(),r=i.endAngle-i.startAngle,n=this,o=n.center,s=n.radiusX,a=n.radiusY,l=o.distanceTo(t),c=Math.atan2(t.y-o.y,t.x-o.x),h=s*a/Math.sqrt(eh(s,2)*eh(Math.sin(c),2)+eh(a,2)*eh(Math.cos(c),2)),u=this.pointAt(this.startAngle).round(Gc),p=this.pointAt(this.endAngle).round(Gc),d=function(t,e,i,r){var n=e.x-t.x,o=r.x-i.x,s=e.y-t.y,a=r.y-i.y,l=t.x-i.x,c=t.y-i.y,h=n*a-o*s,u=(n*c-s*l)/h,p=(o*c-a*l)/h;if(u>=0&&u<=1&&p>=0&&p<=1)return new Nc(t.x+p*n,t.y+p*s)}(o,t.round(Gc),u,p);if(r<180)e=d&&Yc(o.distanceTo(d),l)&&Yc(l,h);else{var f=rh(o.x,o.y,s,a,t.x,t.y);360!==f&&(f=(360+f)%360);var g=i.startAngle<=f&&f<=i.endAngle;e=g&&Yc(l,h)||!g&&(!d||d.equals(t))}return e},e.prototype._isOnPath=function(t,e){var i=this._arcInterval(),r=this.center,n=rh(r.x,r.y,this.radiusX,this.radiusY,t.x,t.y);return 360!==n&&(n=(360+n)%360),i.startAngle<=n&&n<=i.endAngle&&this.pointAt(n).distanceTo(t)<=e},e.fromPoints=function(t,i,r,n,o,s,a){var l=function(t){var e=t.x1,i=t.y1,r=t.x2,n=t.y2,o=t.rx,s=t.ry,a=t.largeArc,l=t.swipe,c=t.rotation;void 0===c&&(c=0);var h=al(c),u=Math.cos(h),p=Math.sin(h),d=u*(e-r)/2+p*(i-n)/2,f=-p*(e-r)/2+u*(i-n)/2,g=a!==l?1:-1,m=Math.pow(d,2),y=Math.pow(f,2),v=Math.pow(o,2),b=Math.pow(s,2),w=m/v+y/b;w>1&&(o*=w=Math.sqrt(m/v+y/b),v=Math.pow(o,2),s*=w,b=Math.pow(s,2));var x=g*Math.sqrt((v*b-v*y-b*m)/(v*y+b*m));isNaN(x)&&(x=0);var S=x*(o*f)/s,k=s*d*-x/o,C=u*S-p*k+(e+r)/2,A=p*S+u*k+(i+n)/2,_=(d-S)/o,T=(f-k)/s,O=-(d+S)/o,E=-(f+k)/s,M=(T>=0?1:-1)*Ka(Math.acos(_/Math.sqrt(_*_+T*T))),P=Ea((_*O+T*E)/(Math.sqrt(_*_+T*T)*Math.sqrt(O*O+E*E)),10),I=(_*E-T*O>=0?1:-1)*Ka(Math.acos(P));!l&&I>0&&(I-=360);l&&I<0&&(I+=360);var D=M+I,F=D>=0?1:-1;return D=Math.abs(D)%360*F,{center:new Nc(C,A),startAngle:M,endAngle:D,radiusX:o,radiusY:s,xRotation:c}}({x1:t.x,y1:t.y,x2:i.x,y2:i.y,rx:r,ry:n,largeArc:o,swipe:s,rotation:a});return new e(l.center,{startAngle:l.startAngle,endAngle:l.endAngle,radiusX:l.radiusX,radiusY:l.radiusY,xRotation:l.xRotation,anticlockwise:0===s})},e}(Fc(Pc,["radiusX","radiusY","startAngle","endAngle","anticlockwise"]));function rh(t,e,i,r,n,o){var s=Ea((n-t)/i,3),a=Ea((o-e)/r,3);return Ea(Ka(Math.atan2(a,s)))}function nh(t,e){for(var i=t;i<e;)i+=90;return i}const oh=ih;var sh=[].push,ah=[].pop,lh=[].splice,ch=[].shift,hh=[].slice,uh=[].unshift,ph=function(t){function e(e){void 0===e&&(e=[]),t.call(this),this.length=0,this._splice(0,e.length,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.elements=function(t){return t?(this._splice(0,this.length,t),this._change(),this):this.slice(0)},e.prototype.push=function(){var t=arguments,e=sh.apply(this,t);return this._add(t),e},e.prototype.slice=function(){return hh.call(this)},e.prototype.pop=function(){var t=this.length,e=ah.apply(this);return t&&this._remove([e]),e},e.prototype.splice=function(t,e){var i=hh.call(arguments,2),r=this._splice(t,e,i);return this._change(),r},e.prototype.shift=function(){var t=this.length,e=ch.apply(this);return t&&this._remove([e]),e},e.prototype.unshift=function(){var t=arguments,e=uh.apply(this,t);return this._add(t),e},e.prototype.indexOf=function(t){for(var e=this.length,i=0;i<e;i++)if(this[i]===t)return i;return-1},e.prototype._splice=function(t,e,i){var r=lh.apply(this,[t,e].concat(i));return this._clearObserver(r),this._setObserver(i),r},e.prototype._add=function(t){this._setObserver(t),this._change()},e.prototype._remove=function(t){this._clearObserver(t),this._change()},e.prototype._setObserver=function(t){for(var e=0;e<t.length;e++)t[e].addObserver(this)},e.prototype._clearObserver=function(t){for(var e=0;e<t.length;e++)t[e].removeObserver(this)},e.prototype._change=function(){},e}(Pc);const dh=ph;var fh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._change=function(){this.geometryChange()},e}(dh);const gh=fh;var mh={}.toString,yh=function(t){function e(e,i){for(var r in void 0===i&&(i=""),t.call(this),this.prefix=i,e){var n=e[r];n=this._wrap(n,r),this[r]=n}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){for(var e=t.split("."),i=this;e.length&&i;){i=i[e.shift()]}return i},e.prototype.set=function(t,e){this.get(t)!==e&&(this._set(t,this._wrap(e,t)),this.optionsChange({field:this.prefix+t,value:e}))},e.prototype._set=function(t,i){var r=t.indexOf(".")>=0,n=this,o=t;if(r){for(var s=o.split("."),a=this.prefix;s.length>1;){a+=(o=s.shift())+".";var l=n[o];l||((l=new e({},a)).addObserver(this),n[o]=l),n=l}o=s[0]}n._clear(o),n[o]=i},e.prototype._clear=function(t){var e=this[t];e&&e.removeObserver&&e.removeObserver(this)},e.prototype._wrap=function(t,i){var r=mh.call(t),n=t;return null!==n&&ea(n)&&"[object Object]"===r&&(t instanceof e||t instanceof ml||(n=new e(n,this.prefix+i+".")),n.addObserver(this)),n},e}(Pc);const vh=yh;var bh=function(t){function e(e){t.call(this),this._initOptions(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Rect"},e.prototype._initOptions=function(t){void 0===t&&(t={});var e=t.clip,i=t.transform;i&&(t.transform=th(i)),e&&!e.id&&(e.id=qa()),this.options=new vh(t),this.options.addObserver(this)},e.prototype.transform=function(t){if(!ea(t))return this.options.get("transform");this.options.set("transform",th(t))},e.prototype.parentTransform=function(){for(var t,e=this;e.parent;){var i=(e=e.parent).transform();i&&(t=i.matrix().multiplyCopy(t||vl.unit()))}if(t)return th(t)},e.prototype.currentTransform=function(t){void 0===t&&(t=this.parentTransform());var e,i=Rc(this.transform()),r=Rc(t);if(e=i&&r?r.multiplyCopy(i):i||r)return th(e)},e.prototype.visible=function(t){return ea(t)?(this.options.set("visible",t),this):!1!==this.options.get("visible")},e.prototype.clip=function(t){var e=this.options;return ea(t)?(t&&!t.id&&(t.id=qa()),e.set("clip",t),this):e.get("clip")},e.prototype.opacity=function(t){return ea(t)?(this.options.set("opacity",t),this):ll(this.options.get("opacity"),1)},e.prototype.clippedBBox=function(t){var e=this._clippedBBox(t);if(e){var i=this.clip();return i?Uc.intersect(e,i.bbox(t)):e}},e.prototype.containsPoint=function(t,e){if(this.visible()){var i=this.currentTransform(e),r=t;return i&&(r=t.transformCopy(i.matrix().invert())),this._hasFill()&&this._containsPoint(r)||this._isOnPath&&this._hasStroke()&&this._isOnPath(r)}return!1},e.prototype._hasFill=function(){var t=this.options.fill;return t&&!el(t.color)},e.prototype._hasStroke=function(){var t=this.options.stroke;return t&&t.width>0&&!el(t.color)},e.prototype._clippedBBox=function(t){return this.bbox(t)},Object.defineProperties(e.prototype,i),e}(Pc);const wh=bh;function xh(t,e,i){var r=Ka(Math.atan2(e.y-t.y,e.x-t.x));return i.transformCopy(th().rotate(-r,t)).x<t.x}function Sh(t,e,i){var r=1-t;return Math.pow(r,3)*i[0][e]+3*Math.pow(r,2)*t*i[1][e]+3*Math.pow(t,2)*r*i[2][e]+Math.pow(t,3)*i[3][e]}function kh(t,e){return[-t[0][e]+3*t[1][e]-3*t[2][e]+t[3][e],3*(t[0][e]-2*t[1][e]+t[2][e]),3*(-t[0][e]+t[1][e]),t[0][e]]}var Ch=function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=0),t.call(this),this.real=e,this.img=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.add=function(t){return new e(Ea(this.real+t.real,Gc),Ea(this.img+t.img,Gc))},e.prototype.addConstant=function(t){return new e(this.real+t,this.img)},e.prototype.negate=function(){return new e(-this.real,-this.img)},e.prototype.multiply=function(t){return new e(this.real*t.real-this.img*t.img,this.real*t.img+this.img*t.real)},e.prototype.multiplyConstant=function(t){return new e(this.real*t,this.img*t)},e.prototype.nthRoot=function(t){var i=Math.atan2(this.img,this.real),r=Math.sqrt(Math.pow(this.img,2)+Math.pow(this.real,2)),n=Math.pow(r,1/t);return new e(n*Math.cos(i/t),n*Math.sin(i/t))},e.prototype.equals=function(t){return this.real===t.real&&this.img===t.img},e.prototype.isReal=function(){return 0===this.img},e}(ml);const Ah=Ch;function _h(t){return t<0?-1:1}function Th(t,e,i,r){if(0===t)return function(t,e,i){var r=Math.sqrt(Math.pow(e,2)-4*t*i);return[(-e+r)/(2*t),(-e-r)/(2*t)]}(e,i,r);var n,o,s,a,l,c,h,u=(3*t*i-Math.pow(e,2))/(3*Math.pow(t,2)),p=(2*Math.pow(e,3)-9*t*e*i+27*Math.pow(t,2)*r)/(27*Math.pow(t,3)),d=Math.pow(u/3,3)+Math.pow(p/2,2),f=new Ah(0,1),g=-e/(3*t);d<0?(n=new Ah(-p/2,Math.sqrt(-d)).nthRoot(3),o=new Ah(-p/2,-Math.sqrt(-d)).nthRoot(3)):(n=-p/2+Math.sqrt(d),n=new Ah(_h(n)*Math.pow(Math.abs(n),1/3)),o=-p/2-Math.sqrt(d),o=new Ah(_h(o)*Math.pow(Math.abs(o),1/3))),s=n.add(o),c=n.add(o).multiplyConstant(-.5),h=n.add(o.negate()).multiplyConstant(Math.sqrt(3)/2),a=c.add(f.multiply(h)),l=c.add(f.negate().multiply(h));var m=[];return s.isReal()&&m.push(Ea(s.real+g,Gc)),a.isReal()&&m.push(Ea(a.real+g,Gc)),l.isReal()&&m.push(Ea(l.real+g,Gc)),m}function Oh(t,e,i,r,n){for(var o,s=kh(t,r),a=Th(s[0],s[1],s[2],s[3]-e[r]),l=0;l<a.length;l++)if(0<=a[l]&&a[l]<=1&&(o=Sh(a[l],i,t),Math.abs(o-e[i])<=n))return!0}function Eh(t,e,i){var r;if(t.x!==e.x){var n=Math.min(t.x,e.x),o=Math.max(t.x,e.x),s=Math.min(t.y,e.y),a=Math.max(t.y,e.y),l=n<=i.x&&i.x<o;r=s===a?i.y<=s&&l:l&&(a-s)*((t.x-e.x)*(t.y-e.y)>0?i.x-n:o-i.x)/(o-n)+s-i.y>=0}return r?1:0}function Mh(t){var e="_"+t;return function(t){return ea(t)?(this._observerField(e,Nc.create(t)),this.geometryChange(),this):this[e]}}const Ph=function(t,e){var i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t);return function(t,e){for(var i=0;i<e.length;i++)t[e[i]]=Mh(e[i])}(i.prototype,e),i};var Ih=function(t){function e(e,i,r){t.call(this),this.anchor(e||new Nc),this.controlIn(i),this.controlOut(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bboxTo=function(t,e){var i=this.anchor().transformCopy(e),r=t.anchor().transformCopy(e);return this.controlOut()&&t.controlIn()?this._curveBoundingBox(i,this.controlOut().transformCopy(e),t.controlIn().transformCopy(e),r):this._lineBoundingBox(i,r)},e.prototype._lineBoundingBox=function(t,e){return Uc.fromPoints(t,e)},e.prototype._curveBoundingBox=function(t,e,i,r){var n=[t,e,i,r],o=this._curveExtremesFor(n,"x"),s=this._curveExtremesFor(n,"y"),a=Dh([o.min,o.max,t.x,r.x]),l=Dh([s.min,s.max,t.y,r.y]);return Uc.fromPoints(new Nc(a.min,l.min),new Nc(a.max,l.max))},e.prototype._curveExtremesFor=function(t,e){var i=this._curveExtremes(t[0][e],t[1][e],t[2][e],t[3][e]);return{min:Sh(i.min,e,t),max:Sh(i.max,e,t)}},e.prototype._curveExtremes=function(t,e,i,r){var n=t-3*e+3*i-r,o=-2*(t-2*e+i),s=t-e,a=Math.sqrt(o*o-4*n*s),l=0,c=1;0===n?0!==o&&(l=c=-s/o):isNaN(a)||(l=(-o+a)/(2*n),c=(-o-a)/(2*n));var h=Math.max(Math.min(l,c),0);(h<0||h>1)&&(h=0);var u=Math.min(Math.max(l,c),1);return(u>1||u<0)&&(u=1),{min:h,max:u}},e.prototype._intersectionsTo=function(t,e){var i;return i=this.controlOut()&&t.controlIn()?function(t,e,i){for(var r,n=kh(t,"x"),o=Th(n[0],n[1],n[2],n[3]-e.x),s=0,a=0;a<o.length;a++)(Kc(r=Sh(o[a],"y",t),e.y)||r>e.y)&&((0===o[a]||1===o[a])&&i.bottomRight().x>e.x||0<o[a]&&o[a]<1)&&s++;return s}([this.anchor(),this.controlOut(),t.controlIn(),t.anchor()],e,this.bboxTo(t)):Eh(this.anchor(),t.anchor(),e),i},e.prototype._isOnCurveTo=function(t,e,i,r){if(this.bboxTo(t).expand(i,i).containsPoint(e)){var n=this.anchor(),o=this.controlOut(),s=t.controlIn(),a=t.anchor();if("start"===r&&n.distanceTo(e)<=i)return!xh(n,o,e);if("end"===r&&a.distanceTo(e)<=i)return!xh(a,s,e);var l=[n,o,s,a];if(Oh(l,e,"x","y",i)||Oh(l,e,"y","x",i))return!0;var c=th().rotate(45,e),h=[n.transformCopy(c),o.transformCopy(c),s.transformCopy(c),a.transformCopy(c)];return Oh(h,e,"x","y",i)||Oh(h,e,"y","x",i)}},e.prototype._isOnLineTo=function(t,e,i){var r=this.anchor(),n=t.anchor(),o=Ka(Math.atan2(n.y-r.y,n.x-r.x));return new Uc([r.x,r.y-i/2],[r.distanceTo(n),i]).containsPoint(e.transformCopy(th().rotate(-o,r)))},e.prototype._isOnPathTo=function(t,e,i,r){return this.controlOut()&&t.controlIn()?this._isOnCurveTo(t,e,i/2,r):this._isOnLineTo(t,e,i)},e}(Ph(Pc,["anchor","controlIn","controlOut"]));function Dh(t){for(var e=t.length,i=Xa,r=Ga,n=0;n<e;n++)r=Math.max(r,t[n]),i=Math.min(i,t[n]);return{min:i,max:r}}const Fh=Ih;var Rh="x",Lh="y";function Nh(t,e){var i=t.slice(0),r=[],n=i.length;if(n>2&&(Bh(0,i),n=i.length),n<2||2===n&&i[0].equals(i[1]))return r;var o,s,a=i[0],l=i[1],c=i[2];for(r.push(new Fh(a));a.equals(i[n-1]);)e=!0,i.pop(),n--;if(2===n){var h=$h(a,l,Rh,Lh);return il(r).controlOut(Vh(h,a,l,Rh,Lh)),r.push(new Fh(l,qh(h,a,l,Rh,Lh))),r}if(e){var u=zh(a=i[n-1],l=i[0],c=i[1]);o=u[1],s=u[0]}else{o=Vh($h(a,l,Rh,Lh),a,l,Rh,Lh)}for(var p=o,d=0;d<=n-3;d++)if(Bh(d,i),d+3<=(n=i.length)){var f=zh(a=i[d],l=i[d+1],c=i[d+2]);il(r).controlOut(p),p=f[1];var g=f[0];r.push(new Fh(l,g))}if(e){var m=zh(a=i[n-2],l=i[n-1],c=i[0]);il(r).controlOut(p),r.push(new Fh(l,m[0])),il(r).controlOut(m[1]),r.push(new Fh(c,s))}else{var y=$h(l,c,Rh,Lh);il(r).controlOut(p),r.push(new Fh(c,qh(y,l,c,Rh,Lh)))}return r}function Bh(t,e){for(;e[t+1]&&(e[t].equals(e[t+1])||e[t+1].equals(e[t+2]));)e.splice(t+1,1)}function jh(t,e){var i=(e.y-t.y)/(e.x-t.x);return[t.y-i*t.x,i]}function zh(t,e,i){var r,n=Rh,o=Lh,s=!1,a=!1;if(function(t,e,i){var r=Xh(jh(t,e),i.x);return t.x===e.x&&e.x===i.x||Ea(r,1)===Ea(i.y,1)}(t,e,i))r=$h(t,e,Rh,Lh);else{var l={x:Hh(t,e,i,Rh),y:Hh(t,e,i,Lh)};if(l.x&&l.y)r=$h(t,i,Rh,Lh),s=!0;else if(function(t,e,i){var r=!1;if(t.x===e.x)r=!0;else if(e.x===i.x)(e.y<i.y&&t.y<=e.y||i.y<e.y&&e.y<=t.y)&&(r=!0);else{var n=Xh(jh(t,e),i.x);t.y<=e.y&&i.y<=n||e.y<=t.y&&i.y>=n||(r=!0)}return r}(t,e,i)&&(n=Lh,o=Rh),l[n])r=0;else r=.01*(i[o]<t[o]&&t[o]<=e[o]||t[o]<i[o]&&e[o]<=t[o]?Gh((i[o]-t[o])*(e[n]-t[n])):-Gh((i[n]-t[n])*(e[o]-t[o]))),a=!0}var c=qh(r,t,e,n,o);if(a){var h=n;n=o,o=h}var u=Vh(r,e,i,n,o);return s&&(Uh(t,e,c,r),Uh(e,i,u,r)),[c,u]}function Uh(t,e,i,r){t.y<e.y?e.y<i.y?(i.x=t.x+(e.y-t.y)/r,i.y=e.y):i.y<t.y&&(i.x=e.x-(e.y-t.y)/r,i.y=t.y):i.y<e.y?(i.x=t.x-(t.y-e.y)/r,i.y=e.y):t.y<i.y&&(i.x=e.x+(t.y-e.y)/r,i.y=t.y)}function $h(t,e,i,r){var n=e[i]-t[i],o=e[r]-t[r];return 0===n?0:o/n}function Hh(t,e,i,r){return i[r]>e[r]&&e[r]>t[r]||i[r]<e[r]&&e[r]<t[r]}function Vh(t,e,i,r,n){var o=e[r],s=.333*(i[r]-o);return Wh(o+s,e[n]+s*t,r,n)}function qh(t,e,i,r,n){var o=e[r],s=i[r],a=.333*(s-o);return Wh(s-a,i[n]-a*t,r,n)}function Wh(t,e,i,r){var n=new Nc;return n[i]=t,n[r]=e,n}function Xh(t,e){for(var i=t.length,r=0,n=0;n<i;n++)r+=Math.pow(e,n)*t[n];return r}function Gh(t){return t<=0?-1:1}const Kh=function(t){return function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fill=function(t,e){var i=this.options;if(ea(t)){if(t&&"Gradient"!==t.nodeType){var r={color:t};ea(e)&&(r.opacity=e),i.set("fill",r)}else i.set("fill",t);return this}return i.get("fill")},e.prototype.stroke=function(t,e,i){return ea(t)?(this.options.set("stroke.color",t),ea(e)&&this.options.set("stroke.width",e),ea(i)&&this.options.set("stroke.opacity",i),this):this.options.get("stroke")},e}(t)};var Yh=vl.IDENTITY.toString();const Jh=function(t){return function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bbox=function(t){var e,i=Rc(this.currentTransform(t)),r=i?i.toString():Yh;this._bboxCache&&this._matrixHash===r?e=this._bboxCache.clone():(e=this._bbox(i),this._bboxCache=e?e.clone():null,this._matrixHash=r);var n=this.options.get("stroke.width");return n&&e&&e.expand(n/2),e},e.prototype.geometryChange=function(){delete this._bboxCache,this.trigger("geometryChange",{element:this})},e}(t)};var Zh={l:function(t,e){for(var i=e.parameters,r=e.position,n=0;n<i.length;n+=2){var o=new Nc(i[n],i[n+1]);e.isRelative&&o.translateWith(r),t.lineTo(o.x,o.y),r.x=o.x,r.y=o.y}},c:function(t,e){for(var i=e.parameters,r=e.position,n=0;n<i.length;n+=6){var o=new Nc(i[n],i[n+1]),s=new Nc(i[n+2],i[n+3]),a=new Nc(i[n+4],i[n+5]);e.isRelative&&(s.translateWith(r),o.translateWith(r),a.translateWith(r)),t.curveTo(o,s,a),r.x=a.x,r.y=a.y}},v:function(t,e){var i=e.isRelative?0:e.position.x;Qh(e.parameters,!0,i),this.l(t,e)},h:function(t,e){var i=e.isRelative?0:e.position.y;Qh(e.parameters,!1,i),this.l(t,e)},a:function(t,e){for(var i=e.parameters,r=e.position,n=0;n<i.length;n+=7){var o=i[n],s=i[n+1],a=i[n+2],l=i[n+3],c=i[n+4],h=new Nc(i[n+5],i[n+6]);e.isRelative&&h.translateWith(r),r.x===h.x&&r.y===h.y||(t.arcTo(h,o,s,l,c,a),r.x=h.x,r.y=h.y)}},s:function(t,e){var i,r=e.parameters,n=e.position,o=e.previousCommand;"s"!==o&&"c"!==o||(i=il(il(t.paths).segments).controlIn());for(var s=0;s<r.length;s+=4){var a=new Nc(r[s],r[s+1]),l=new Nc(r[s+2],r[s+3]),c=void 0;e.isRelative&&(a.translateWith(n),l.translateWith(n)),c=i?tu(i,n):n.clone(),i=a,t.curveTo(c,a,l),n.x=l.x,n.y=l.y}},q:function(t,e){for(var i=e.parameters,r=e.position,n=0;n<i.length;n+=4){var o=new Nc(i[n],i[n+1]),s=new Nc(i[n+2],i[n+3]);e.isRelative&&(o.translateWith(r),s.translateWith(r));var a=iu(r,o,s);t.curveTo(a.controlOut,a.controlIn,s),r.x=s.x,r.y=s.y}},t:function(t,e){var i,r=e.parameters,n=e.position,o=e.previousCommand;"q"!==o&&"t"!==o||(i=il(il(t.paths).segments).controlIn().clone().translateWith(n.scaleCopy(-1/3)).scale(1.5));for(var s=0;s<r.length;s+=2){var a=new Nc(r[s],r[s+1]);e.isRelative&&a.translateWith(n),i=i?tu(i,n):n.clone();var l=iu(n,i,a);t.curveTo(l.controlOut,l.controlIn,a),n.x=a.x,n.y=a.y}}};function Qh(t,e,i){for(var r=e?0:1,n=0;n<t.length;n+=2)t.splice(n+r,0,i)}function tu(t,e){if(t&&e)return e.scaleCopy(2).translate(-t.x,-t.y)}var eu=1/3;function iu(t,e,i){var r=e.clone().scale(2/3);return{controlOut:r.clone().translateWith(t.scaleCopy(eu)),controlIn:r.translateWith(i.scaleCopy(eu))}}const ru=Zh;var nu=/([a-df-z]{1})([^a-df-z]*)(z)?/gi,ou=/[,\s]?([+\-]?(?:\d*\.\d+|\d+)(?:[eE][+\-]?\d+)?)/g;const su=function(t,e){var i,r=new Nc;return e.replace(nu,(function(e,n,o,s){var a=n.toLowerCase(),l=a===n,c=function(t){var e=[];return t.replace(ou,(function(t,i){e.push(parseFloat(i))})),e}(o.trim());if("m"===a&&(l?(r.x+=c[0],r.y+=c[1]):(r.x=c[0],r.y=c[1]),t.moveTo(r.x,r.y),c.length>2&&(a="l",c.splice(0,2))),ru[a])ru[a](t,{parameters:c,position:r,isRelative:l,previousCommand:i}),s&&"z"===s.toLowerCase()&&t.close();else if("m"!==a)throw new Error("Error while parsing SVG path. Unsupported command: "+a);i=a})),t};function au(t,e,i){for(var r,n=0;n<t.length;n++){var o=t[n];if(o.visible()){var s=e?o.bbox(i):o.rawBBox();s&&(r=r?Uc.union(r,s):s)}}return r}function lu(t,e){for(var i,r=0;r<t.length;r++){var n=t[r];if(n.visible()){var o=n.clippedBBox(e);o&&(i=i?Uc.union(i,o):o)}}return i}var cu=" ",hu=function(t){function e(e){t.call(this,e),this.segments=new gh,this.segments.addObserver(this),ea(this.options.stroke)||(this.stroke("#000"),ea(this.options.stroke.lineJoin)||this.options.set("stroke.lineJoin","miter"))}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Path"},e.prototype.moveTo=function(t,e){return this.suspend(),this.segments.elements([]),this.resume(),this.lineTo(t,e),this},e.prototype.lineTo=function(t,e){var i=ea(e)?new Nc(t,e):t,r=new Fh(i);return this.segments.push(r),this},e.prototype.curveTo=function(t,e,i){if(this.segments.length>0){var r=il(this.segments),n=new Fh(i,e);this.suspend(),r.controlOut(t),this.resume(),this.segments.push(n)}return this},e.prototype.arc=function(t,e,i,r,n){if(this.segments.length>0){var o=il(this.segments).anchor(),s=al(t),a=new Nc(o.x-i*Math.cos(s),o.y-r*Math.sin(s)),l=new oh(a,{startAngle:t,endAngle:e,radiusX:i,radiusY:r,anticlockwise:n});this._addArcSegments(l)}return this},e.prototype.arcTo=function(t,e,i,r,n,o){if(this.segments.length>0){var s=il(this.segments).anchor(),a=oh.fromPoints(s,Nc.create(t),e,i,r,n,o);this._addArcSegments(a)}return this},e.prototype._addArcSegments=function(t){this.suspend();for(var e=t.curvePoints(),i=1;i<e.length;i+=3)this.curveTo(e[i],e[i+1],e[i+2]);this.resume(),this.geometryChange()},e.prototype.close=function(){return this.options.closed=!0,this.geometryChange(),this},e.prototype.rawBBox=function(){return this._bbox()},e.prototype.toString=function(t){var e,i,r,n="",o=this.segments,s=o.length;if(s>0){for(var a,l=[],c=(r=t,function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t.map((function(t){return t.toString(r)})).join(cu)}),h=1;h<s;h++){var u=(e=o[h-1],i=o[h],e.controlOut()&&i.controlIn()?"C":"L");u!==a&&(a=u,l.push(u)),"L"===u?l.push(c(o[h].anchor())):l.push(c(o[h-1].controlOut(),o[h].controlIn(),o[h].anchor()))}n="M"+c(o[0].anchor())+cu+l.join(cu),this.options.closed&&(n+="Z")}return n},e.prototype._containsPoint=function(t){for(var e,i,r=this.segments,n=r.length,o=0,s=1;s<n;s++)e=r[s-1],i=r[s],o+=e._intersectionsTo(i,t);return!this.options.closed&&r[0].anchor().equals(r[n-1].anchor())||(o+=Eh(r[0].anchor(),r[n-1].anchor(),t)),o%2!=0},e.prototype._isOnPath=function(t,e){var i=this.segments,r=i.length,n=e||this.options.stroke.width;if(r>1){if(i[0]._isOnPathTo(i[1],t,n,"start"))return!0;for(var o=2;o<=r-2;o++)if(i[o-1]._isOnPathTo(i[o],t,n))return!0;if(i[r-2]._isOnPathTo(i[r-1],t,n,"end"))return!0}return!1},e.prototype._bbox=function(t){var e,i=this.segments,r=i.length;if(1===r){var n=i[0].anchor().transformCopy(t);e=new Uc(n,jc.ZERO)}else if(r>0)for(var o=1;o<r;o++){var s=i[o-1].bboxTo(i[o],t);e=e?Uc.union(e,s):s}return e},e.parse=function(t,e){return uu.parse(t,e)},e.fromRect=function(t,i){var r=new e(i),n=t.cornerRadius,o=n[0],s=n[1];if(0===o&&0===s)r.moveTo(t.topLeft()).lineTo(t.topRight()).lineTo(t.bottomRight()).lineTo(t.bottomLeft()).close();else{var a=t.origin,l=a.x,c=a.y,h=t.width(),u=t.height();o=rl(o,0,h/2),s=rl(s,0,u/2),r.moveTo(l+o,c).lineTo(l+h-o,c).arcTo([l+h,c+s],o,s,!1).lineTo(l+h,c+u-s).arcTo([l+h-o,c+u],o,s,!1).lineTo(l+o,c+u).arcTo([l,c+u-s],o,s,!1).lineTo(l,c+s).arcTo([l+o,c],o,s,!1)}return r},e.fromPoints=function(t,i){if(t){for(var r=new e(i),n=0;n<t.length;n++){var o=Nc.create(t[n]);o&&(0===n?r.moveTo(o):r.lineTo(o))}return r}},e.curveFromPoints=function(t,i){if(t){var r=Nh(t),n=new e(i);return n.segments.push.apply(n.segments,r),n}},e.fromArc=function(t,i){var r=new e(i),n=t.startAngle,o=t.pointAt(n);return r.moveTo(o.x,o.y),r.arc(n,t.endAngle,t.radiusX,t.radiusY,t.anticlockwise),r},Object.defineProperties(e.prototype,i),e}(Kh(Jh(wh))),uu=function(t){function e(e){t.call(this,e),this.paths=new gh,this.paths.addObserver(this),ea(this.options.stroke)||this.stroke("#000")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return e.parse=function(t,i){var r=new e(i);return su(r,t)},e.prototype.toString=function(t){var e=this.paths,i="";if(e.length>0){for(var r=[],n=0;n<e.length;n++)r.push(e[n].toString(t));i=r.join(cu)}return i},i.nodeType.get=function(){return"MultiPath"},e.prototype.moveTo=function(t,e){var i=new hu;return i.moveTo(t,e),this.paths.push(i),this},e.prototype.lineTo=function(t,e){return this.paths.length>0&&il(this.paths).lineTo(t,e),this},e.prototype.curveTo=function(t,e,i){return this.paths.length>0&&il(this.paths).curveTo(t,e,i),this},e.prototype.arc=function(t,e,i,r,n){return this.paths.length>0&&il(this.paths).arc(t,e,i,r,n),this},e.prototype.arcTo=function(t,e,i,r,n,o){return this.paths.length>0&&il(this.paths).arcTo(t,e,i,r,n,o),this},e.prototype.close=function(){return this.paths.length>0&&il(this.paths).close(),this},e.prototype._bbox=function(t){return au(this.paths,!0,t)},e.prototype.rawBBox=function(){return au(this.paths,!1)},e.prototype._containsPoint=function(t){for(var e=this.paths,i=0;i<e.length;i++)if(e[i]._containsPoint(t))return!0;return!1},e.prototype._isOnPath=function(t){for(var e=this.paths,i=this.options.stroke.width,r=0;r<e.length;r++)if(e[r]._isOnPath(t,i))return!0;return!1},e.prototype._clippedBBox=function(t){return lu(this.paths,this.currentTransform(t))},Object.defineProperties(e.prototype,i),e}(Kh(Jh(wh))),pu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRing=function(t,e){var i=t.startAngle+180,r=t.angle+i;t.angle>0&&i===r&&(r+=.001);var n=new Nc(t.center.x,t.center.y),o=Math.max(t.radius,0),s=Math.max(t.innerRadius,0),a=new oh(n,{startAngle:i,endAngle:r,radiusX:o,radiusY:o}),l=hu.fromArc(a,e).close();if(s){a.radiusX=a.radiusY=s;var c=a.pointAt(r);l.lineTo(c.x,c.y),l.arc(r,i,s,s,!0)}else l.lineTo(n.x,n.y);return l},e}(ml);pu.current=new pu;const du=pu;var fu=Math.PI/2,gu=function(t){function e(e,i){void 0===e&&(e=new Nc),void 0===i&&(i=0),t.call(this),this.setCenter(e),this.setRadius(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setCenter=function(t){return this._observerField("center",Nc.create(t)),this.geometryChange(),this},e.prototype.getCenter=function(){return this.center},e.prototype.equals=function(t){return t&&t.center.equals(this.center)&&t.radius===this.radius},e.prototype.clone=function(){return new e(this.center.clone(),this.radius)},e.prototype.pointAt=function(t){return this._pointAt(al(t))},e.prototype.bbox=function(t){for(var e=Jc(this.center,this.radius,this.radius,t),i=Nc.maxPoint(),r=Nc.minPoint(),n=0;n<4;n++){var o=this._pointAt(e.x+n*fu).transformCopy(t),s=this._pointAt(e.y+n*fu).transformCopy(t),a=new Nc(o.x,s.y);i=Nc.min(i,a),r=Nc.max(r,a)}return Uc.fromPoints(i,r)},e.prototype._pointAt=function(t){var e=this.center,i=this.radius;return new Nc(e.x+i*Math.cos(t),e.y+i*Math.sin(t))},e.prototype.containsPoint=function(t){var e=this.center,i=this.radius;return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(i,2)},e.prototype._isOnPath=function(t,e){var i=this.center,r=this.radius,n=i.distanceTo(t);return r-e<=n&&n<=r+e},e}(Fc(Pc,["radius"]));const mu=gu;function yu(t){var e="_"+t;return function(t){return ea(t)?(this._observerField(e,t),this.geometryChange(),this):this[e]}}const vu=function(t,e){void 0===e&&(e=["geometry"]);var i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t);return function(t,e){for(var i=0;i<e.length;i++)t[e[i]]=yu(e[i])}(i.prototype,e),i};var bu=function(t){function e(e,i){void 0===e&&(e=new mu),void 0===i&&(i={}),t.call(this,i),this.geometry(e),ea(this.options.stroke)||this.stroke("#000")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Circle"},e.prototype.rawBBox=function(){return this._geometry.bbox()},e.prototype._bbox=function(t){return this._geometry.bbox(t)},e.prototype._containsPoint=function(t){return this.geometry().containsPoint(t)},e.prototype._isOnPath=function(t){return this.geometry()._isOnPath(t,this.options.stroke.width/2)},Object.defineProperties(e.prototype,i),e}(Kh(Jh(vu(wh))));const wu=bu;const xu=function(t,e){return function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.traverse=function(t){for(var i=this[e],r=0;r<i.length;r++){var n=i[r];n.traverse?n.traverse(t):t(n)}return this},i}(t)};var Su=function(t){function e(e){t.call(this,e),this.children=[]}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Group"},e.prototype.childrenChange=function(t,e,i){this.trigger("childrenChange",{action:t,items:e,index:i})},e.prototype.append=function(){return za(this.children,arguments),this._reparent(arguments,this),this.childrenChange("add",arguments),this},e.prototype.insert=function(t,e){return this.children.splice(t,0,e),e.parent=this,this.childrenChange("add",[e],t),this},e.prototype.insertAt=function(t,e){return this.insert(e,t)},e.prototype.remove=function(t){var e=this.children.indexOf(t);return e>=0&&(this.children.splice(e,1),t.parent=null,this.childrenChange("remove",[t],e)),this},e.prototype.removeAt=function(t){if(0<=t&&t<this.children.length){var e=this.children[t];this.children.splice(t,1),e.parent=null,this.childrenChange("remove",[e],t)}return this},e.prototype.clear=function(){var t=this.children;return this.children=[],this._reparent(t,null),this.childrenChange("remove",t,0),this},e.prototype.bbox=function(t){return au(this.children,!0,this.currentTransform(t))},e.prototype.rawBBox=function(){return au(this.children,!1)},e.prototype._clippedBBox=function(t){return lu(this.children,this.currentTransform(t))},e.prototype.currentTransform=function(t){return wh.prototype.currentTransform.call(this,t)||null},e.prototype.containsPoint=function(t,e){if(this.visible())for(var i=this.children,r=this.currentTransform(e),n=0;n<i.length;n++)if(i[n].containsPoint(t,r))return!0;return!1},e.prototype._reparent=function(t,e){for(var i=0;i<t.length;i++){var r=t[i],n=r.parent;n&&n!==this&&n.remove&&n.remove(r),r.parent=e}},Object.defineProperties(e.prototype,i),e}(xu(wh,"children"));const ku=Su;function Cu(t){return.5-Math.cos(t*Math.PI)/2}function Au(t){return t}function _u(t,e,i,r){var n=1.70158,o=0,s=r;return 0===t?i:1===t?i+r:(o||(o=.5),s<Math.abs(r)?(s=r,n=o/4):n=o/(2*Math.PI)*Math.asin(r/s),s*Math.pow(2,-10*t)*Math.sin((Number(t)-n)*(1.1*Math.PI)/o)+r+i)}var Tu=function(t){var e="undefined"!=typeof window?window:{},i=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)};Tu=function(t){return i.call(e,t)},Tu(t)};const Ou=Tu;var Eu,Mu=function(t){function e(){t.call(this),this._items=[]}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={current:{configurable:!0}};return i.current.get=function(){return Eu||(Eu=new e),Eu},e.prototype.register=function(t,e){this._items.push({name:t,type:e})},e.prototype.create=function(t,e){var i,r=this._items;if(e&&e.type)for(var n=e.type.toLowerCase(),o=0;o<r.length;o++)if(r[o].name.toLowerCase()===n){i=r[o];break}if(i)return new i.type(t,e)},Object.defineProperties(e,i),e}(ml);const Pu=Mu;var Iu=function(t){function e(e,i){t.call(this),this.options=Object.assign({},this.options,i),this.element=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={options:{configurable:!0}};return e.create=function(t,e,i){return Pu.current.create(t,e,i)},r.options.get=function(){return this._options||{duration:500,easing:"swing"}},r.options.set=function(t){this._options=t},e.prototype.setup=function(){},e.prototype.step=function(){},e.prototype.play=function(){var t=this,e=this.options,r=e.duration,n=e.delay;void 0===n&&(n=0);var o=i[e.easing],s=ol()+n,a=s+r;0===r?(this.step(1),this.abort()):setTimeout((function(){var e=function(){if(!t._stopped){var i=ol(),n=rl(i-s,0,r),l=o(n/r,n,0,1,r);t.step(l),i<a?Ou(e):t.abort()}};e()}),n)},e.prototype.abort=function(){this._stopped=!0},e.prototype.destroy=function(){this.abort()},Object.defineProperties(e.prototype,r),e}(ml);const Du=Iu;var Fu=function(t){function e(e){t.call(this),this.children=[],this.options=ha({},this.options,this.initUserOptions(e))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initUserOptions=function(t){return t},e.prototype.reflow=function(t){for(var e,i=this.children,r=0;r<i.length;r++){var n=i[r];n.reflow(t),e=e?e.wrap(n.box):n.box.clone()}this.box=e||t},e.prototype.destroy=function(){var t=this.children;this.animation&&this.animation.destroy();for(var e=0;e<t.length;e++)t[e].destroy()},e.prototype.getRoot=function(){var t=this.parent;return t?t.getRoot():null},e.prototype.getSender=function(){var t=this.getService();if(t)return t.sender},e.prototype.getService=function(){for(var t=this;t;){if(t.chartService)return t.chartService;t=t.parent}},e.prototype.translateChildren=function(t,e){for(var i=this.children,r=i.length,n=0;n<r;n++)i[n].box.translate(t,e)},e.prototype.append=function(){for(var t=arguments,e=this,i=0;i<arguments.length;i++){var r=t[i];e.children.push(r),r.parent=e}},e.prototype.renderVisual=function(){!1!==this.options.visible&&(this.createVisual(),this.addVisual(),this.renderChildren(),this.createAnimation(),this.renderComplete())},e.prototype.addVisual=function(){this.visual&&(this.visual.chartElement=this,this.parent&&this.parent.appendVisual(this.visual))},e.prototype.renderChildren=function(){for(var t=this.children,e=t.length,i=0;i<e;i++)t[i].renderVisual()},e.prototype.createVisual=function(){this.visual=new ku({zIndex:this.options.zIndex,visible:Kl(this.options.visible,!0)})},e.prototype.createAnimation=function(){this.visual&&this.options.animation&&(this.animation=Du.create(this.visual,this.options.animation))},e.prototype.appendVisual=function(t){t.chartElement||(t.chartElement=this),t.options.noclip?this.clipRoot().visual.append(t):Ll(t.options.zIndex)?this.stackRoot().stackVisual(t):this.isStackRoot?this.stackVisual(t):this.visual?this.visual.append(t):this.parent.appendVisual(t)},e.prototype.clipRoot=function(){return this.parent?this.parent.clipRoot():this},e.prototype.stackRoot=function(){return this.parent?this.parent.stackRoot():this},e.prototype.stackVisual=function(t){var e,i=t.options.zIndex||0,r=this.visual.children,n=r.length;for(e=0;e<n;e++){var o=r[e];if(Kl(o.options.zIndex,0)>i)break}this.visual.insert(e,t)},e.prototype.traverse=function(t){for(var e=this.children,i=e.length,r=0;r<i;r++){var n=e[r];t(n),n.traverse&&n.traverse(t)}},e.prototype.closest=function(t){for(var e=this,i=!1;e&&!i;)(i=t(e))||(e=e.parent);if(i)return e},e.prototype.renderComplete=function(){},e.prototype.hasHighlight=function(){var t=(this.options||{}).highlight;return!(!this.createHighlight||t&&!1===t.visible)},e.prototype.toggleHighlight=function(t,e){var i=this,r=(this.options||{}).highlight||{},n=r.visual,o=this._highlight;if(!o){var s={fill:{color:Gs,opacity:e||.2},stroke:{color:Gs,width:1,opacity:e||.2}};if(n){if(!(o=this._highlight=n(Object.assign(this.highlightVisualArgs(),{createVisual:function(){return i.createHighlight(s)},sender:this.getSender(),series:this.series,dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,runningTotal:this.runningTotal,total:this.total}))))return}else o=this._highlight=this.createHighlight(s);Ll(o.options.zIndex)||(o.options.zIndex=Kl(r.zIndex,this.options.zIndex)),this.appendVisual(o)}o.visible(t)},e.prototype.createGradientOverlay=function(t,e,i){var r=new hu(Object.assign({stroke:{color:"none"},fill:this.createGradient(i),closed:t.options.closed},e));return r.segments.elements(t.segments.elements()),r},e.prototype.createGradient=function(t){if(this.parent)return this.parent.createGradient(t)},e.prototype.supportsPointInactiveOpacity=function(){return!0},e}(ml);Fu.prototype.options={};const Ru=Fu;var Lu=function(t){function e(e){t.call(this,e),this.options.margin=ma(this.options.margin),this.options.padding=ma(this.options.padding)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(e){var i,r=this,n=this.options,o=n.width,s=n.height,a=n.shrinkToFit,l=o&&s,c=n.margin,h=n.padding,u=n.border.width,p=function(){r.align(e,Ys,n.align),r.align(e,Js,n.vAlign),r.paddingBox=i.clone().unpad(c).unpad(u)},d=e.clone();l&&(d.x2=d.x1+o,d.y2=d.y1+s),a&&d.unpad(c).unpad(u).unpad(h),t.prototype.reflow.call(this,d),i=l?this.box=new Vc(0,0,o,s):this.box,a&&l?(p(),d=this.contentBox=this.paddingBox.clone().unpad(h)):(d=this.contentBox=i.clone(),i.pad(h).pad(u).pad(c),p()),this.translateChildren(i.x1-d.x1+c.left+u+h.left,i.y1-d.y1+c.top+u+h.top);for(var f=this.children,g=0;g<f.length;g++){var m=f[g];m.reflow(m.box)}},e.prototype.align=function(t,e,i){this.box.align(t,e,i)},e.prototype.hasBox=function(){var t=this.options;return t.border.width||t.background},e.prototype.createVisual=function(){t.prototype.createVisual.call(this),this.options.visible&&this.hasBox()&&this.visual.append(hu.fromRect(this.paddingBox.toRect(),this.visualStyle()))},e.prototype.visualStyle=function(){var t=this.options,e=t.border||{};return{stroke:{width:e.width,color:e.color,opacity:Kl(e.opacity,t.opacity),dashType:e.dashType},fill:{color:t.background,opacity:t.opacity},cursor:t.cursor}},e}(Ru);Zl(Lu,{align:Ns,vAlign:Ws,margin:{},padding:{},border:{color:_s,width:0},background:"",shrinkToFit:!1,width:0,height:0,visible:!0});const Nu=Lu;var Bu=function(t){function e(e,i){t.call(this,e),this.pointData=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){var t=this.options,e=this.paddingBox,i=t.type,r=t.rotation,n=e.center(),o=e.width()/2,s=e.height()/2;if(!t.visible||!this.hasBox())return null;var a,l=this.visualStyle();if(i===Es)a=new wu(new mu([Xl(e.x1+o,3),Xl(e.y1+s,3)],Math.min(o,s)),l);else if("triangle"===i)a=hu.fromPoints([[e.x1+o,e.y1],[e.x1,e.y2],[e.x2,e.y2]],l).close();else if(i===Ms)(a=new uu(l)).moveTo(e.x1,e.y1).lineTo(e.x2,e.y2),a.moveTo(e.x1,e.y2).lineTo(e.x2,e.y1);else{var c=e.toRect();if(i===Vs){var h=Kl(t.borderRadius,c.width()/5);c.setCornerRadius(h)}a=hu.fromRect(c,l)}return r&&a.transform(th().rotate(-r,[n.x,n.y])),a.options.zIndex=t.zIndex,a},e.prototype.createElement=function(){var t=this,e=this.options.visual,i=this.pointData||{};return e?e({value:i.value,dataItem:i.dataItem,sender:this.getSender(),series:i.series,category:i.category,rect:this.paddingBox.toRect(),options:this.visualOptions(),createVisual:function(){return t.getElement()}}):this.getElement()},e.prototype.visualOptions=function(){var t=this.options;return{background:t.background,border:t.border,margin:t.margin,padding:t.padding,type:t.type,size:t.width,visible:t.visible}},e.prototype.createVisual=function(){this.visual=this.createElement()},e}(Nu);Zl(Bu,{type:Es,align:Os,vAlign:Os});const ju=Bu;var zu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._change=function(){this.optionsChange({field:"stops"})},e}(dh);const Uu=zu;function $u(t){return function(e){return ea(e)?(this.options.set(t,e),this):this.options.get(t)}}const Hu=function(t,e){var i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t);return function(t,e){for(var i=0;i<e.length;i++)t[e[i]]=$u(e[i])}(i.prototype,e),i};var Vu=function(t){function e(e,i,r){t.call(this),this.options=new vh({offset:e,color:i,opacity:ea(r)?r:1}),this.options.addObserver(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t){if(ea(t))return t instanceof e?t:t.length>1?new e(t[0],t[1],t[2]):new e(t.offset,t.color,t.opacity)},e}(Hu(Pc,["offset","color","opacity"]));const qu=Vu;var Wu=function(t){function e(e){void 0===e&&(e={}),t.call(this),this.stops=new Uu(this._createStops(e.stops)),this.stops.addObserver(this),this._userSpace=e.userSpace,this.id=qa()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Gradient"},e.prototype.userSpace=function(t){return ea(t)?(this._userSpace=t,this.optionsChange(),this):this._userSpace},e.prototype._createStops=function(t){void 0===t&&(t=[]);for(var e=[],i=0;i<t.length;i++)e.push(qu.create(t[i]));return e},e.prototype.addStop=function(t,e,i){this.stops.push(new qu(t,e,i))},e.prototype.removeStop=function(t){var e=this.stops.indexOf(t);e>=0&&this.stops.splice(e,1)},e.prototype.optionsChange=function(t){this.trigger("optionsChange",{field:"gradient"+(t?"."+t.field:""),value:this})},e.prototype.geometryChange=function(){this.optionsChange()},Object.defineProperties(e.prototype,i),e}(Pc);const Xu=Wu;var Gu=function(t){function e(e){void 0===e&&(e={}),t.call(this,e),this.start(e.start||new Nc),this.end(e.end||new Nc(1,0))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ph(Xu,["start","end"]));const Ku=Gu;var Yu=function(t){function e(e){void 0===e&&(e={}),t.call(this,e),this.center(e.center||new Nc),this._radius=ea(e.radius)?e.radius:1,this._fallbackFill=e.fallbackFill}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.radius=function(t){return ea(t)?(this._radius=t,this.geometryChange(),this):this._radius},e.prototype.fallbackFill=function(t){return ea(t)?(this._fallbackFill=t,this.optionsChange(),this):this._fallbackFill},e}(Ph(Xu,["center"]));const Ju=Yu;var Zu="radial";const Qu={glass:{type:"linear",rotation:0,stops:[{offset:0,color:Gs,opacity:0},{offset:.25,color:Gs,opacity:.3},{offset:1,color:Gs,opacity:0}]},sharpBevel:{type:Zu,stops:[{offset:0,color:Gs,opacity:.55},{offset:.65,color:Gs,opacity:0},{offset:.95,color:Gs,opacity:.25}]},roundedBevel:{type:Zu,stops:[{offset:.33,color:Gs,opacity:.06},{offset:.83,color:Gs,opacity:.2},{offset:.95,color:Gs,opacity:0}]},roundedGlass:{type:Zu,supportVML:!1,stops:[{offset:0,color:Gs,opacity:0},{offset:.5,color:Gs,opacity:.3},{offset:.99,color:Gs,opacity:0}]},sharpGlass:{type:Zu,supportVML:!1,stops:[{offset:0,color:Gs,opacity:.2},{offset:.15,color:Gs,opacity:.15},{offset:.17,color:Gs,opacity:.35},{offset:.85,color:Gs,opacity:.05},{offset:.87,color:Gs,opacity:.15},{offset:.99,color:Gs,opacity:0}]},bubbleShadow:{type:Zu,center:[.5,.5],radius:.5}};function tp(t,e){if(t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2)return e;var i=Math.min(t.x1,e.x1),r=Math.max(t.x1,e.x1),n=Math.min(t.x2,e.x2),o=Math.max(t.x2,e.x2),s=Math.min(t.y1,e.y1),a=Math.max(t.y1,e.y1),l=Math.min(t.y2,e.y2),c=Math.max(t.y2,e.y2),h=[];return h[0]=new Vc(r,s,n,a),h[1]=new Vc(i,a,r,l),h[2]=new Vc(n,a,o,l),h[3]=new Vc(r,l,n,c),t.x1===i&&t.y1===s||e.x1===i&&e.y1===s?(h[4]=new Vc(i,s,r,a),h[5]=new Vc(n,l,o,c)):(h[4]=new Vc(n,s,o,a),h[5]=new Vc(i,l,r,c)),Ca(h,(function(t){return t.height()>0&&t.width()>0}))[0]}var ep=function(t){function e(e){t.call(this,e);var i=this.options;i.width=parseInt(i.width,10),i.height=parseInt(i.height,10),this.gradients={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(){var t=this.options,e=this.children,i=new Vc(0,0,t.width,t.height);this.box=i.unpad(t.margin);for(var r=0;r<e.length;r++)e[r].reflow(i),i=tp(i,e[r].box)||new Vc},e.prototype.createVisual=function(){this.visual=new ku,this.createBackground()},e.prototype.createBackground=function(){var t=this.options,e=t.border||{},i=this.box.clone().pad(t.margin).unpad(e.width),r=hu.fromRect(i.toRect(),{stroke:{color:e.width?e.color:"",width:e.width,dashType:e.dashType},fill:{color:t.background,opacity:t.opacity},zIndex:-10});this.visual.append(r)},e.prototype.getRoot=function(){return this},e.prototype.createGradient=function(t){var e,i=this.gradients,r=ql(t),n=Qu[t.gradient];if(i[r])e=i[r];else{var o=Object.assign({},n,t);"linear"===n.type?e=new Ku(o):(t.innerRadius&&(o.stops=function(t){for(var e=t.stops,i=t.innerRadius/t.radius*100,r=e.length,n=[],o=0;o<r;o++){var s=Object.assign({},e[o]);s.offset=(s.offset*(100-i)+i)/100,n.push(s)}return n}(o)),(e=new Ju(o)).supportVML=!1!==n.supportVML),i[r]=e}return e},e.prototype.cleanGradients=function(){var t=this.gradients;for(var e in t)t[e]._observers=[]},e.prototype.size=function(){var t=this.options;return new Vc(0,0,t.width,t.height)},e}(Ru);Zl(ep,{width:600,height:400,background:Gs,border:{color:_s,width:0},margin:ma(5),zIndex:-2});const ip=ep;var rp=function(t){function e(e){t.call(this,e),this._initDirection()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initDirection=function(){var t=this.options;t.vertical?(this.groupAxis=Ys,this.elementAxis=Js,this.groupSizeField=Ks,this.elementSizeField=Rs,this.groupSpacing=t.spacing,this.elementSpacing=t.vSpacing):(this.groupAxis=Js,this.elementAxis=Ys,this.groupSizeField=Rs,this.elementSizeField=Ks,this.groupSpacing=t.vSpacing,this.elementSpacing=t.spacing)},e.prototype.reflow=function(t){this.box=t.clone(),this.reflowChildren()},e.prototype.reflowChildren=function(){var t=this,e=this,i=e.box,r=e.elementAxis,n=e.groupAxis,o=e.elementSizeField,s=e.groupSizeField,a=this.groupOptions(),l=a.groups,c=a.groupsSize,h=a.maxGroupElementsSize,u=l.length,p=i[n+1]+this.alignStart(c,i[s]());if(u){for(var d=p,f=0;f<u;f++){for(var g=l[f],m=g.groupElements,y=i[r+1],v=m.length,b=0;b<v;b++){var w=m[b],x=t.elementSize(w),S=d+t.alignStart(x[s],g.groupSize),k=new Vc;k[n+1]=S,k[n+2]=S+x[s],k[r+1]=y,k[r+2]=y+x[o],w.reflow(k),y+=x[o]+t.elementSpacing}d+=g.groupSize+t.groupSpacing}i[n+1]=p,i[n+2]=p+c,i[r+2]=i[r+1]+h}},e.prototype.alignStart=function(t,e){var i=0,r=this.options.align;return r===Hs||r===Ts?i=e-t:r===Os&&(i=(e-t)/2),i},e.prototype.groupOptions=function(){for(var t=this,e=t.box,i=t.children,r=t.elementSizeField,n=t.groupSizeField,o=t.elementSpacing,s=t.groupSpacing,a=Xl(e[r]()),l=i.length,c=[],h=0,u=0,p=0,d=0,f=[],g=0;g<l;g++){var m=i[g];m.box||m.reflow(e);var y=this.elementSize(m);this.options.wrap&&Xl(u+o+y[r])>a&&(c.push({groupElements:f,groupSize:h,groupElementsSize:u}),d=Math.max(d,u),p+=s+h,h=0,u=0,f=[]),h=Math.max(h,y[n]),u>0&&(u+=o),u+=y[r],f.push(m)}return c.push({groupElements:f,groupSize:h,groupElementsSize:u}),{groups:c,groupsSize:p+=h,maxGroupElementsSize:d=Math.max(d,u)}},e.prototype.elementSize=function(t){return{width:t.box.width(),height:t.box.height()}},e.prototype.createVisual=function(){},e}(Ru);Zl(rp,{vertical:!0,wrap:!0,vSpacing:0,spacing:0});const np=rp;var op=function(t){function e(e,i,r){void 0===i&&(i=new Nc),void 0===r&&(r={}),t.call(this,r),this.content(e),this.position(i),this.options.font||(this.options.font="12px sans-serif"),ea(this.options.fill)||this.fill("#000")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Text"},e.prototype.content=function(t){return ea(t)?(this.options.set("content",t),this):this.options.get("content")},e.prototype.measure=function(){return Il(this.content(),{font:this.options.get("font")})},e.prototype.rect=function(){var t=this.measure(),e=this.position().clone();return new Uc(e,[t.width,t.height])},e.prototype.bbox=function(t){var e=Rc(this.currentTransform(t));return this.rect().bbox(e)},e.prototype.rawBBox=function(){return this.rect().bbox()},e.prototype._containsPoint=function(t){return this.rect().containsPoint(t)},Object.defineProperties(e.prototype,i),e}(Kh(Ph(wh,["position"])));const sp=op;var ap=sp,lp=function(t){function e(e,i){t.call(this,i),this.content=e,this.reflow(new Vc)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.options,i=e.size=Il(this.content,{font:e.font});this.baseline=i.baseline,this.box=new Vc(t.x1,t.y1,t.x1+i.width,t.y1+i.height)},e.prototype.createVisual=function(){var t=this.options,e=t.font,i=t.color,r=t.opacity,n=t.cursor;this.visual=new ap(this.content,this.box.toRect().topLeft(),{font:e,fill:{color:i,opacity:r},cursor:n})},e}(Ru);Zl(lp,{font:Is,color:_s});const cp=lp;function hp(t){var e=t.origin,i=t.bottomRight();return new Vc(e.x,e.y,i.x,i.y)}var up=/\n/m,pp=function(t){function e(e,i,r){t.call(this,i),this.content=e,this.data=r,this._initContainer(),!1!==this.options._autoReflow&&this.reflow(new Vc)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initContainer=function(){var t=this.options,e=String(this.content).split(up),i=new np({vertical:!0,align:t.align,wrap:!1}),r=ha({},t,{opacity:1,animation:null});this.container=i,this.append(i);for(var n=0;n<e.length;n++){var o=new cp(e[n].trim(),r);i.append(o)}},e.prototype.reflow=function(e){var i=this.options,r=i.visual;if(this.container.options.align=i.align,r&&!this._boxReflow){var n=e;n.hasSize()||(this._boxReflow=!0,this.reflow(n),this._boxReflow=!1,n=this.box);var o=this.visual=r(this.visualContext(n));o&&(n=hp(o.clippedBBox()||new Uc),o.options.zIndex=i.zIndex),this.box=this.contentBox=this.paddingBox=n}else if(t.prototype.reflow.call(this,e),i.rotation){var s=ma(i.margin),a=this.box.unpad(s);this.targetBox=e,this.normalBox=a.clone(),(a=this.rotate()).translate(s.left-s.right,s.top-s.bottom),this.rotatedBox=a.clone(),a.pad(s)}},e.prototype.createVisual=function(){var t=this.options;if(this.visual=new ku({transform:this.rotationTransform(),zIndex:t.zIndex,noclip:t.noclip}),this.hasBox()){var e=hu.fromRect(this.paddingBox.toRect(),this.visualStyle());this.visual.append(e)}},e.prototype.renderVisual=function(){if(this.options.visible)if(this.options.visual){var e=this.visual;e&&!Ll(e.options.noclip)&&(e.options.noclip=this.options.noclip),this.addVisual(),this.createAnimation()}else t.prototype.renderVisual.call(this)},e.prototype.visualContext=function(t){var e=this,i={text:this.content,rect:t.toRect(),sender:this.getSender(),options:this.options,createVisual:function(){return e._boxReflow=!0,e.reflow(t),e._boxReflow=!1,e.getDefaultVisual()}};return this.data&&Object.assign(i,this.data),i},e.prototype.getDefaultVisual=function(){this.createVisual(),this.renderChildren();var t=this.visual;return delete this.visual,t},e.prototype.rotate=function(){var t=this.options;return this.box.rotate(t.rotation),this.align(this.targetBox,Ys,t.align),this.align(this.targetBox,Js,t.vAlign),this.box},e.prototype.rotationTransform=function(){var t=this.options.rotation;if(!t)return null;var e=this.normalBox.center(),i=e.x,r=e.y,n=this.rotatedBox.center();return th().translate(n.x-i,n.y-r).rotate(t,[i,r])},e}(Nu);const dp=pp;var fp=function(t){function e(e){t.call(this,e),this._textBox=new dp(this.options.text,Object.assign({},this.options,{vAlign:this.options.position})),this.append(this._textBox)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(e){t.prototype.reflow.call(this,e),this.box.snapTo(e,Ys)},e.buildTitle=function(t,i){var r,n=t;return"string"==typeof t&&(n={text:t}),(n=Object.assign({visible:!0},i,n))&&n.visible&&n.text&&(r=new e(n)),r},e.orderTitles=function(t){var e=[].concat(t),i=e.filter((function(t){return t&&t.options.position!==Ts})),r=e.filter((function(t){return t&&t.options.position===Ts}));return gp(i),gp(r),r.reverse(),i.concat(r)},e}(Ru);function gp(t){for(var e=1;e<t.length;e++){var i=t[e]._textBox,r=t[e-1]._textBox;r.options.margin=Object.assign(ma(r.options.margin),{bottom:0}),i.options.margin=Object.assign(ma(i.options.margin),{top:0})}}Zl(fp,{color:_s,position:Ws,align:Os,margin:ma(5),padding:ma(5)});const mp=fp;var yp=function(t){function e(e,i,r,n,o){t.call(this,i,o),this.text=i,this.value=e,this.index=r,this.dataItem=n,this.reflow(new Vc)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.visualContext=function(e){var i=t.prototype.visualContext.call(this,e);return i.value=this.value,i.dataItem=this.dataItem,i.format=this.options.format,i.culture=this.options.culture,i},e.prototype.click=function(t,e){t.trigger("axisLabelClick",{element:Ul(e),value:this.value,text:this.text,index:this.index,dataItem:this.dataItem,axis:this.parent.options})},e.prototype.rotate=function(){if(this.options.alignRotation!==Os){var e=this.normalBox.toRect(),i=this.rotationTransform();this.box=hp(e.bbox(i.matrix()))}else t.prototype.rotate.call(this);return this.box},e.prototype.rotationTransform=function(){var e=this.options,i=e.rotation;if(!i)return null;if(e.alignRotation===Os)return t.prototype.rotationTransform.call(this);var r=th().rotate(i).matrix(),n=this.normalBox.toRect(),o=this.targetBox.toRect(),s=e.rotationOrigin||Ws,a=s===Ws||s===Ts?Ys:Js,l=s===Ws||s===Ts?Js:Ys,c=s===Ws||s===Ns?o.origin:o.bottomRight(),h=n.topLeft().transformCopy(r),u=n.topRight().transformCopy(r),p=n.bottomRight().transformCopy(r),d=n.bottomLeft().transformCopy(r),f=Uc.fromPoints(h,u,p,d),g={};g[l]=o.origin[l]-f.origin[l];var m,y,v=Math.abs(h[l]+g[l]-c[l]),b=Math.abs(u[l]+g[l]-c[l]);Xl(v,Ds)===Xl(b,Ds)?(m=h,y=u):b<v?(m=u,y=p):(m=h,y=d);var w=m[a]+(y[a]-m[a])/2;return g[a]=o.center()[a]-w,th().translate(g.x,g.y).rotate(i)},e}(dp);Zl(yp,{_autoReflow:!1});const vp=yp;var bp=function(t){function e(e,i,r){t.call(this,i),this.fields=e,this.chartService=r,this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hide=function(){this.options.visible=!1},e.prototype.show=function(){this.options.visible=!0},e.prototype.render=function(){var t=this,e=this.options;if(e.visible){var i,r,n=e.label,o=e.icon,s=new Vc,a=function(){return t},l=o.size,c=this.fields.text;if(Ll(n)&&n.visible){var h=wa(n);h?c=h(this.fields):n.format&&(c=this.chartService.format.auto(n.format,c)),n.color||(n.color=n.position===Ls?"#fff":o.background),this.label=new dp(c,ha({},n)),this.label.aliasFor=a,n.position!==Ls||Ll(l)||(o.type===Es?l=Math.max(this.label.box.width(),this.label.box.height()):(i=this.label.box.width(),r=this.label.box.height()),s.wrap(this.label.box))}o.width=i||l||7,o.height=r||l||7;var u=new ju(ha({},o));u.aliasFor=a,this.marker=u,this.append(u),this.label&&this.append(this.label),u.reflow(new Vc),this.wrapperBox=s.wrap(u.box)}},e.prototype.reflow=function(t){var e,i,r,n=this,o=n.options,s=n.label,a=n.marker,l=n.wrapperBox,c=t.center(),h=o.line.length,u=o.position;o.visible&&(Oa(u,[Ns,Hs])?u===Ns?(r=l.alignTo(t,u).translate(-h,t.center().y-l.center().y),o.line.visible&&(e=[t.x1,c.y],this.linePoints=[e,[r.x2,c.y]],i=r.clone().wrapPoint(e))):(r=l.alignTo(t,u).translate(h,t.center().y-l.center().y),o.line.visible&&(e=[t.x2,c.y],this.linePoints=[e,[r.x1,c.y]],i=r.clone().wrapPoint(e))):u===Ts?(r=l.alignTo(t,u).translate(t.center().x-l.center().x,h),o.line.visible&&(e=[c.x,t.y2],this.linePoints=[e,[c.x,r.y1]],i=r.clone().wrapPoint(e))):(r=l.alignTo(t,u).translate(t.center().x-l.center().x,-h),o.line.visible&&(e=[c.x,t.y1],this.linePoints=[e,[c.x,r.y2]],i=r.clone().wrapPoint(e))),a&&a.reflow(r),s&&(s.reflow(r),a&&(o.label.position===$s&&s.box.alignTo(a.box,u),s.reflow(s.box))),this.contentBox=r,this.targetBox=t,this.box=i||r)},e.prototype.createVisual=function(){t.prototype.createVisual.call(this),this.visual.options.noclip=this.options.noclip,this.options.visible&&this.createLine()},e.prototype.renderVisual=function(){var e=this,i=this.options,r=i.visual;i.visible&&r?(this.visual=r(Object.assign(this.fields,{sender:this.getSender(),rect:this.targetBox.toRect(),options:{background:i.background,border:i.background,icon:i.icon,label:i.label,line:i.line,position:i.position,visible:i.visible},createVisual:function(){e.createVisual(),e.renderChildren();var t=e.visual;return delete e.visual,t}})),this.addVisual()):t.prototype.renderVisual.call(this)},e.prototype.createLine=function(){var t=this.options.line;if(this.linePoints){var e=hu.fromPoints(this.linePoints,{stroke:{color:t.color,width:t.width,dashType:t.dashType}});ia(e),this.visual.append(e)}},e.prototype.click=function(t,e){var i=this.eventArgs(e);t.trigger("noteClick",i)||e.preventDefault()},e.prototype.over=function(t,e){var i=this.eventArgs(e);t.trigger("noteHover",i)||e.preventDefault()},e.prototype.out=function(t,e){var i=this.eventArgs(e);t.trigger("noteLeave",i)},e.prototype.eventArgs=function(t){var e=this.options;return Object.assign(this.fields,{element:Ul(t),text:Ll(e.label)?e.label.text:"",visual:this.visual})},e}(Nu);Zl(bp,{icon:{visible:!0,type:Es},label:{position:Ls,visible:!0,align:Os,vAlign:Os},line:{visible:!0},visible:!0,position:Ws,zIndex:2});const wp=bp;var xp={format:function(t,e){return e},toString:function(t){return t},parseDate:function(t){return new Date(t)},firstDay:function(){return 0}},Sp=function(){},kp={implementation:{configurable:!0}};Sp.register=function(t){xp=t},kp.implementation.get=function(){return xp},Object.defineProperties(Sp,kp);const Cp=Sp;var Ap=/\{(\d+)(:[^\}]+)?\}/g,_p=function(t){this._intlService=t},Tp={intl:{configurable:!0}};Tp.intl.get=function(){return this._intlService||Cp.implementation},Tp.intl.set=function(t){this._intlService=t},_p.prototype.auto=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];var r=this.intl;return oa(t)&&t.match(Fs)?r.format.apply(r,[t].concat(e)):r.toString(e[0],t)},_p.prototype.localeAuto=function(t,e,i){var r=this.intl;return oa(t)&&t.match(Fs)?t.replace(Ap,(function(t,n,o){var s=e[parseInt(n,10)];return r.toString(s,o?o.substring(1):"",i)})):r.toString(e[0],t,i)},Object.defineProperties(_p.prototype,Tp);const Op=_p;var Ep=function(t,e){void 0===e&&(e={}),this._intlService=e.intlService,this.sender=e.sender||t,this.format=new Op(e.intlService),this.chart=t,this.rtl=Boolean(e.rtl)},Mp={intl:{configurable:!0}};Mp.intl.get=function(){return this._intlService||Cp.implementation},Mp.intl.set=function(t){this._intlService=t,this.format.intl=t},Ep.prototype.notify=function(t,e){this.chart&&this.chart.trigger(t,e)},Ep.prototype.isPannable=function(t){var e=((this.chart||{}).options||{}).pannable;return e&&e.lock!==t},Object.defineProperties(Ep.prototype,Mp);const Pp=Ep;var Ip,Dp=function(){};Dp.register=function(t){Ip=t},Dp.create=function(t,e){if(Ip)return Ip.create(t,e)};const Fp=Dp;function Rp(t,e){var i=t.tickX,r=t.tickY,n=t.position,o=new hu({stroke:{width:e.width,color:e.color}});return t.vertical?o.moveTo(i,n).lineTo(i+e.size,n):o.moveTo(n,r).lineTo(n,r+e.size),ia(o),o}function Lp(t,e){var i=t.lineStart,r=t.lineEnd,n=t.position,o=new hu({stroke:{width:e.width,color:e.color,dashType:e.dashType}});return t.vertical?o.moveTo(i,n).lineTo(r,n):o.moveTo(n,i).lineTo(n,r),ia(o),o}var Np=function(t){function e(e,i){void 0===i&&(i=new Pp),t.call(this,e),this.chartService=i,this.options.visible||(this.options=ha({},this.options,{labels:{visible:!1},line:{visible:!1},margin:0,majorTickSize:0,minorTickSize:0})),this.options.minorTicks=ha({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.minorTickType!==zs},this.options.minorTicks,{size:this.options.minorTickSize,align:this.options.minorTickType}),this.options.majorTicks=ha({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.majorTickType!==zs},this.options.majorTicks,{size:this.options.majorTickSize,align:this.options.majorTickType}),this.initFields(),this.options._deferLabels||this.createLabels(),this.createTitle(),this.createNotes()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){},e.prototype.labelsRange=function(){return{min:this.options.labels.skip,max:this.labelsCount()}},e.prototype.normalizeLabelRotation=function(t){var e=t.rotation;ua(e)&&(t.alignRotation=e.align,t.rotation=e.angle)},e.prototype.createLabels=function(){var t=this,e=this.options,i=e.vertical?Hs:Os,r=ha({},e.labels,{align:i,zIndex:e.zIndex}),n=Math.max(1,r.step);if(this.clearLabels(),r.visible){this.normalizeLabelRotation(r),"auto"===r.rotation&&(r.rotation=0,e.autoRotateLabels=!0);for(var o=this.labelsRange(),s=o.min;s<o.max;s+=n){var a={index:s,count:o.max},l=t.createAxisLabel(s,r,a);l&&(t.append(l),t.labels.push(l))}}},e.prototype.clearLabels=function(){this.children=Ca(this.children,(function(t){return!(t instanceof vp)})),this.labels=[]},e.prototype.clearTitle=function(){var t=this;this.title&&(this.children=Ca(this.children,(function(e){return e!==t.title})),this.title=void 0)},e.prototype.clear=function(){this.clearLabels(),this.clearTitle()},e.prototype.lineBox=function(){var t=this.options,e=this.box,i=t.vertical,r=t.labels.mirror,n=r?e.x1:e.x2,o=r?e.y2:e.y1,s=t.line.width||0;return i?new Vc(n,e.y1,n,e.y2-s):new Vc(e.x1,o,e.x2-s,o)},e.prototype.createTitle=function(){var t=this.options,e=ha({rotation:t.vertical?-90:0,text:"",zIndex:1,visualSize:!0},t.title);if(e.visible&&e.text){var i=new dp(e.text,e);this.append(i),this.title=i}},e.prototype.createNotes=function(){var t=this,e=this.options,i=e.notes,r=i.data||[];this.notes=[];for(var n=0;n<r.length;n++){var o=ha({},i,r[n]);o.value=t.parseNoteValue(o.value);var s=new wp({value:o.value,text:o.label.text,dataItem:o},o,t.chartService);s.options.visible&&(Ll(s.options.position)?e.vertical&&!Oa(s.options.position,[Ns,Hs])?s.options.position=e.reverse?Ns:Hs:e.vertical||Oa(s.options.position,[Ws,Ts])||(s.options.position=e.reverse?Ts:Ws):e.vertical?s.options.position=e.reverse?Ns:Hs:s.options.position=e.reverse?Ts:Ws,t.append(s),t.notes.push(s))}},e.prototype.parseNoteValue=function(t){return t},e.prototype.renderVisual=function(){t.prototype.renderVisual.call(this),this.createPlotBands()},e.prototype.createVisual=function(){t.prototype.createVisual.call(this),this.createBackground(),this.createLine()},e.prototype.gridLinesVisual=function(){var t=this._gridLines;return t||(t=this._gridLines=new ku({zIndex:-2}),this.appendVisual(this._gridLines)),t},e.prototype.createTicks=function(t){var e=this.options,i=this.lineBox(),r=e.labels.mirror,n=e.majorTicks.visible?e.majorUnit:0,o={vertical:e.vertical};function s(e,n,s){var a=e.length,l=Math.max(1,n.step);if(n.visible)for(var c=n.skip;c<a;c+=l)Ll(s)&&c%s==0||(o.tickX=r?i.x2:i.x2-n.size,o.tickY=r?i.y1-n.size:i.y1,o.position=e[c],t.append(Rp(o,n)))}s(this.getMajorTickPositions(),e.majorTicks),s(this.getMinorTickPositions(),e.minorTicks,n/e.minorUnit)},e.prototype.createLine=function(){var t=this.options,e=t.line,i=this.lineBox();if(e.width>0&&e.visible){var r=new hu({stroke:{width:e.width,color:e.color,dashType:e.dashType}});r.moveTo(i.x1,i.y1).lineTo(i.x2,i.y2),t._alignLines&&ia(r);var n=this._lineGroup=new ku;n.append(r),this.visual.append(n),this.createTicks(n)}},e.prototype.getActualTickSize=function(){var t=this.options,e=0;return t.majorTicks.visible&&t.minorTicks.visible?e=Math.max(t.majorTicks.size,t.minorTicks.size):t.majorTicks.visible?e=t.majorTicks.size:t.minorTicks.visible&&(e=t.minorTicks.size),e},e.prototype.createBackground=function(){var t=this.options,e=this.box,i=t.background;i&&(this._backgroundPath=hu.fromRect(e.toRect(),{fill:{color:i},stroke:null}),this.visual.append(this._backgroundPath))},e.prototype.createPlotBands=function(){var t=this,e=this.options,i=e.plotBands||[],r=e.vertical,n=this.plotArea;if(0!==i.length){for(var o=this._plotbandGroup=new ku({zIndex:-1}),s=Ca(this.pane.axes,(function(e){return e.options.vertical!==t.options.vertical}))[0],a=0;a<i.length;a++){var l=i[a],c=void 0,h=void 0,u=l.label,p=void 0;if(r?(c=(s||n.axisX).lineBox(),h=t.getSlot(l.from,l.to,!0)):(c=t.getSlot(l.from,l.to,!0),h=(s||n.axisY).lineBox()),u&&(u.vAlign=u.position||Ns,p=t.createPlotBandLabel(u,l,new Vc(c.x1,h.y1,c.x2,h.y2))),0!==c.width()&&0!==h.height()){var d=new Uc([c.x1,h.y1],[c.width(),h.height()]),f=hu.fromRect(d,{fill:{color:l.color,opacity:l.opacity},stroke:null});o.append(f),p&&o.append(p)}}this.appendVisual(o)}},e.prototype.createPlotBandLabel=function(t,e,i){if(!1===t.visible)return null;var r,n=t.text;if(Ll(t)&&t.visible){var o=wa(t);o?n=o({text:n,item:e}):t.format&&(n=this.chartService.format.auto(t.format,n)),t.color||(t.color=this.options.labels.color)}return(r=new dp(n,t)).reflow(i),r.renderVisual(),r.visual},e.prototype.createGridLines=function(t){var e=this.options,i=e.minorGridLines,r=e.majorGridLines,n=e.minorUnit,o=e.vertical,s=t.options.line.visible,a=r.visible?e.majorUnit:0,l=t.lineBox(),c=l[o?"y1":"x1"],h={lineStart:l[o?"x1":"y1"],lineEnd:l[o?"x2":"y2"],vertical:o},u=[],p=this.gridLinesVisual();function d(t,e,i){var r=t.length,n=Math.max(1,e.step);if(e.visible)for(var o=e.skip;o<r;o+=n){var a=Xl(t[o]);Oa(a,u)||o%i==0||s&&c===a||(h.position=a,p.append(Lp(h,e)),u.push(a))}}return d(this.getMajorTickPositions(),r),d(this.getMinorTickPositions(),i,a/n),p.children},e.prototype.reflow=function(t){for(var e=this,i=e.options,r=e.labels,n=e.title,o=i.vertical,s=r.length,a=o?Ks:Rs,l=n?n.box[a]():0,c=this.getActualTickSize()+i.margin+l,h=((this.getRoot()||{}).box||t)[a](),u=0,p=0;p<s;p++){var d=r[p].box[a]();d+c<=h&&(u=Math.max(u,d))}this.box=o?new Vc(t.x1,t.y1,t.x1+u+c,t.y2):new Vc(t.x1,t.y1,t.x2,t.y1+u+c),this.arrangeTitle(),this.arrangeLabels(),this.arrangeNotes()},e.prototype.getLabelsTickPositions=function(){return this.getMajorTickPositions()},e.prototype.labelTickIndex=function(t){return t.index},e.prototype.arrangeLabels=function(){for(var t=this.options,e=this.labels,i=this.labelsBetweenTicks(),r=t.vertical,n=t.labels.mirror,o=this.getLabelsTickPositions(),s=0;s<e.length;s++){var a=e[s],l=this.labelTickIndex(a),c=r?a.box.height():a.box.width(),h=o[l],u=o[l+1],p=void 0,d=void 0;if(r){if(i)p=h+(u-h)/2-c/2;else p=h-c/2;d=p}else i?(p=h,d=u):d=(p=h-c/2)+c;this.positionLabel(a,n,p,d)}},e.prototype.positionLabel=function(t,e,i,r){void 0===r&&(r=i);var n,o=this.options,s=o.vertical,a=this.lineBox(),l=this.getActualTickSize()+o.margin;if(s){var c=a.x2;e?(c+=l,t.options.rotationOrigin=Ns):(c-=l+t.box.width(),t.options.rotationOrigin=Hs),n=t.box.move(c,i)}else{var h=a.y1;e?(h-=l+t.box.height(),t.options.rotationOrigin=Ts):(h+=l,t.options.rotationOrigin=Ws),n=new Vc(i,h,r,h+t.box.height())}t.reflow(n)},e.prototype.autoRotateLabelAngle=function(t,e){return t.width()<e?0:t.height()>e?-90:-45},e.prototype.autoRotateLabels=function(){if(!this.options.autoRotateLabels||this.options.vertical)return!1;for(var t=this.getMajorTickPositions(),e=this.labels,i=Math.min(e.length,t.length-1),r=0,n=0;n<i;n++){var o=Math.abs(t[n+1]-t[n]),s=e[n].box,a=this.autoRotateLabelAngle(s,o);if(0!==a&&(r=a),-90===r)break}if(0!==r){for(var l=0;l<e.length;l++)e[l].options.rotation=r,e[l].reflow(new Vc);return!0}},e.prototype.arrangeTitle=function(){var t=this.options,e=this.title,i=t.labels.mirror,r=t.vertical;e&&(r?(e.options.align=i?Hs:Ns,e.options.vAlign=e.options.position):(e.options.align=e.options.position,e.options.vAlign=i?Ws:Ts),e.reflow(this.box))},e.prototype.arrangeNotes=function(){for(var t=this,e=0;e<this.notes.length;e++){var i=t.notes[e],r=i.options.value,n=void 0;Ll(r)?(t.shouldRenderNote(r)?i.show():i.hide(),n=t.noteSlot(r)):i.hide(),i.reflow(n||t.lineBox())}},e.prototype.noteSlot=function(t){return this.getSlot(t)},e.prototype.alignTo=function(t){var e=t.lineBox(),i=this.options.vertical,r=i?Js:Ys;this.box.snapTo(e,r),i?this.box.shrink(0,this.lineBox().height()-e.height()):this.box.shrink(this.lineBox().width()-e.width(),0),this.box[r+1]-=this.lineBox()[r+1]-e[r+1],this.box[r+2]-=this.lineBox()[r+2]-e[r+2]},e.prototype.axisLabelText=function(t,e,i){var r,n=this,o=wa(e),s=function(){return e.format?n.chartService.format.localeAuto(e.format,[t],e.culture):t};o?r=o(Object.assign({},i,{get text(){return s()},value:t,format:e.format,culture:e.culture})):r=s();return r},e.prototype.slot=function(t,e,i){var r=this.getSlot(t,e,i);if(r)return r.toRect()},e.prototype.contentBox=function(){var t=this.box.clone(),e=this.labels;if(e.length){var i=this.options.vertical?Js:Ys;if(this.chartService.isPannable(i)){var r=this.maxLabelOffset();t[i+1]-=r.start,t[i+2]+=r.end}else{e[0].options.visible&&t.wrap(e[0].box);var n=e[e.length-1];n.options.visible&&t.wrap(n.box)}}return t},e.prototype.maxLabelOffset=function(){for(var t=this.options,e=t.vertical,i=t.reverse,r=this.labelsBetweenTicks(),n=this.getLabelsTickPositions(),o=e?Js:Ys,s=this.labels,a=i?1:0,l=i?0:1,c=0,h=0,u=0;u<s.length;u++){var p=s[u],d=this.labelTickIndex(p),f=void 0,g=void 0;r?(f=n[d+a],g=n[d+l]):f=g=n[d],c=Math.max(c,f-p.box[o+1]),h=Math.max(h,p.box[o+2]-g)}return{start:c,end:h}},e.prototype.limitRange=function(t,e,i,r,n){var o=this.options;if(t<i&&n<0&&(!Ll(o.min)||o.min<=i)||r<e&&n>0&&(!Ll(o.max)||r<=o.max))return null;if(e<i&&n>0||r<t&&n<0)return{min:t,max:e};var s=e-t,a=t,l=e;return t<i&&n<0?(a=Vl(t,i,r),l=Vl(t+s,i+s,r)):e>r&&n>0&&(l=Vl(e,i,r),a=Vl(e-s,i,r-s)),{min:a,max:l}},e.prototype.valueRange=function(){return{min:this.seriesMin,max:this.seriesMax}},e.prototype.lineDir=function(){var t=this.options;return(t.vertical?-1:1)*(t.reverse?-1:1)},e.prototype.lineInfo=function(){var t=this.options.vertical,e=this.lineBox(),i=t?e.height():e.width(),r=t?Js:Ys,n=this.lineDir(),o=r+(1===n?1:2).toString();return{axis:r,axisOrigin:o,axisDir:n,lineBox:e,lineSize:i,lineStart:e[o]}},e.prototype.pointOffset=function(t){var e=this.lineInfo(),i=e.axis,r=e.axisDir,n=e.axisOrigin,o=e.lineBox,s=e.lineSize;return(r>0?t[i]-o[n]:o[n]-t[i])/s},e.prototype.scaleToDelta=function(t,e){var i=Vl(t,-.999,.999);return i>0?e*Math.min(1,i):e-e/(1+i)},e.prototype.labelsBetweenTicks=function(){return!this.options.justified},e.prototype.prepareUserOptions=function(){},e}(Ru);Zl(Np,{labels:{visible:!0,rotation:0,mirror:!1,step:1,skip:0},line:{width:1,color:_s,visible:!0},title:{visible:!0,position:Os},majorTicks:{align:$s,size:4,skip:0,step:1},minorTicks:{align:$s,size:3,skip:0,step:1},axisCrossingValue:0,majorTickType:$s,minorTickType:zs,majorGridLines:{skip:0,step:1},minorGridLines:{visible:!1,width:1,color:_s,skip:0,step:1},margin:5,visible:!0,reverse:!1,justified:!0,notes:{label:{text:""}},_alignLines:!0,_deferLabels:!1});const Bp=Np;var jp="milliseconds",zp="seconds",Up="minutes",$p="hours",Hp="days",Vp="weeks",qp="months",Wp="years",Xp=1e3,Gp=6e4,Kp=36e5,Yp=864e5,Jp=6048e5,Zp=26784e5,Qp=31536e6,td={years:Qp,months:Zp,weeks:Jp,days:Yp,hours:Kp,minutes:Gp,seconds:Xp,milliseconds:1};function ed(t,e){return t.getTime()-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Gp}function id(t,e){return new Date(t.getTime()+e)}function rd(t){var e;return t instanceof Date?e=t:t&&(e=new Date(t)),e}function nd(t,e){return 0===e&&23===t.getHours()&&(t.setHours(t.getHours()+2),!0)}function od(t,e,i,r){var n=t;if(t){var o=rd(t),s=o.getHours();i===Wp?nd(n=new Date(o.getFullYear()+e,0,1),0):i===qp?nd(n=new Date(o.getFullYear(),o.getMonth()+e,1),s):i===Vp?(n=od(function(t,e){void 0===e&&(e=0);var i=0,r=t.getDay();if(!isNaN(r))for(;r!==e;)0===r?r=6:r--,i++;return id(t,-i*Yp)}(o,r),7*e,Hp),nd(n,s)):i===Hp?nd(n=new Date(o.getFullYear(),o.getMonth(),o.getDate()+e),s):i===$p?n=function(t,e){var i=new Date(t);i.setMinutes(0,0,0);var r=(t.getTimezoneOffset()-i.getTimezoneOffset())*Gp;return id(i,r+e*Kp)}(o,e):i===Up?(n=id(o,e*Gp)).getSeconds()>0&&n.setSeconds(0):i===zp?n=id(o,e*Xp):i===jp&&(n=id(o,e)),i!==jp&&n.getMilliseconds()>0&&n.setMilliseconds(0)}return n}function sd(t,e,i){return od(rd(t),0,e,i)}function ad(t,e,i){var r=rd(t);return r&&sd(r,e,i).getTime()===r.getTime()?r:od(r,1,e,i)}function ld(t,e){return t&&e?t.getTime()-e.getTime():-1}function cd(t,e){return t.getTime()-e}function hd(t){if(Zs(t)){for(var e=[],i=0;i<t.length;i++)e.push(hd(t[i]));return e}if(t)return rd(t).getTime()}function ud(t,e){return t&&e?hd(t)===hd(e):t===e}function pd(t,e,i){return ed(t,e)/td[i]}function dd(t,e,i,r){var n=rd(t),o=rd(e);return(i===qp?n.getMonth()-o.getMonth()+12*(n.getFullYear()-o.getFullYear())+pd(n,new Date(n.getFullYear(),n.getMonth()),Hp)/new Date(n.getFullYear(),n.getMonth()+1,0).getDate():i===Wp?n.getFullYear()-o.getFullYear()+dd(n,new Date(n.getFullYear(),0),qp,1)/12:i===Hp||i===Vp?pd(n,o,i):cd(n,e)/td[i])/r}function fd(t,e,i){return i===Wp?e.getFullYear()-t.getFullYear():i===qp?12*fd(t,e,Wp)+e.getMonth()-t.getMonth():i===Hp?Math.floor(cd(e,t)/Yp):Math.floor(cd(e,t)/td[i])}function gd(t,e){return oa(e)&&t.parseDate(e)||rd(e)}function md(t,e){if(Zs(e)){for(var i=[],r=0;r<e.length;r++)i.push(gd(t,e[r]));return i}return gd(t,e)}function yd(t,e){return na(t.weekStartDay)?t.weekStartDay:e&&e.firstDay?e.firstDay():0}var vd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){this._ticks={}},e.prototype.categoriesHash=function(){return""},e.prototype.clone=function(){var t=new e(Object.assign({},this.options,{categories:this.options.srcCategories}),this.chartService);return t.createLabels(),t},e.prototype.initUserOptions=function(t){var e=t.categories||[],i=Ll(t.min),r=Ll(t.max);if(t.srcCategories=t.categories=e,(i||r)&&e.length){var n,o=i?Math.floor(t.min):0;n=r?t.justified?Math.floor(t.max)+1:Math.ceil(t.max):e.length,t.categories=t.categories.slice(o,n)}return t},e.prototype.rangeIndices=function(){var t=this.options,e=t.categories.length||1;return{min:na(t.min)?t.min%1:0,max:na(t.max)&&t.max%1!=0&&t.max<this.totalRange().max?e-(1-t.max%1):e-(t.justified?1:0)}},e.prototype.totalRangeIndices=function(t){var e,i=this.options,r=na(i.min)?i.min:0;if(e=na(i.max)?i.max:na(i.min)?r+i.categories.length:this.totalRange().max||1,t){var n=this.totalRange();r=Vl(r,0,n.max),e=Vl(e,0,n.max)}return{min:r,max:e}},e.prototype.range=function(){var t=this.options;return{min:na(t.min)?t.min:0,max:na(t.max)?t.max:this.totalRange().max}},e.prototype.roundedRange=function(){return this.range()},e.prototype.totalRange=function(){var t=this.options;return{min:0,max:Math.max(this._seriesMax||0,t.srcCategories.length)-(t.justified?1:0)}},e.prototype.scaleOptions=function(){var t=this.rangeIndices(),e=t.min,i=t.max,r=this.lineBox();return{scale:(this.options.vertical?r.height():r.width())/(i-e||1)*(this.options.reverse?-1:1),box:r,min:e,max:i}},e.prototype.arrangeLabels=function(){t.prototype.arrangeLabels.call(this),this.hideOutOfRangeLabels()},e.prototype.hideOutOfRangeLabels=function(){var t=this.box,e=this.labels;if(e.length>0){var i=this.options.vertical?Js:Ys,r=t[i+1],n=t[i+2],o=e[0],s=Hl(e);(o.box[i+1]>n||o.box[i+2]<r)&&(o.options.visible=!1),(s.box[i+1]>n||s.box[i+2]<r)&&(s.options.visible=!1)}},e.prototype.getMajorTickPositions=function(){return this.getTicks().majorTicks},e.prototype.getMinorTickPositions=function(){return this.getTicks().minorTicks},e.prototype.getLabelsTickPositions=function(){return this.getTicks().labelTicks},e.prototype.tickIndices=function(t){for(var e=this.rangeIndices(),i=e.min,r=e.max,n=Math.ceil(r),o=Math.floor(i),s=[];o<=n;)s.push(o),o+=t;return s},e.prototype.getTickPositions=function(t){for(var e=this.options,i=e.vertical,r=e.reverse,n=this.scaleOptions(),o=n.scale,s=n.box,a=n.min,l=s[(i?Js:Ys)+(r?2:1)],c=this.tickIndices(t),h=[],u=0;u<c.length;u++)h.push(l+Xl(o*(c[u]-a),3));return h},e.prototype.getTicks=function(){var t=this.options,e=this._ticks,i=this.rangeIndices(),r=this.lineBox(),n=r.getHash()+i.min+","+i.max+t.reverse+t.justified;if(e._hash!==n){var o=t.minorTicks.visible||t.minorGridLines.visible;e._hash=n,e.labelTicks=this.getTickPositions(1),e.majorTicks=this.filterOutOfRangePositions(e.labelTicks,r),e.minorTicks=o?this.filterOutOfRangePositions(this.getTickPositions(.5),r):[]}return e},e.prototype.filterOutOfRangePositions=function(t,e){if(!t.length)return t;for(var i=this.options.vertical?Js:Ys,r=function(t){return e[i+1]<=t&&t<=e[i+2]},n=t.length-1,o=0;!r(t[o])&&o<=n;)o++;for(var s=n;!r(t[s])&&s>=0;)s--;return t.slice(o,s+1)},e.prototype.lineInfo=function(){var t=this.options,e=t.vertical,i=t.reverse,r=this.lineBox(),n=e?r.height():r.width(),o=e?Js:Ys,s=i?-1:1,a=o+(1===s?1:2).toString();return{axis:o,axisOrigin:a,axisDir:s,lineBox:r,lineSize:n,lineStart:r[a]}},e.prototype.lineDir=function(){return this.options.reverse?-1:1},e.prototype.getSlot=function(t,e,i){var r=this.options,n=r.reverse,o=r.justified,s=this.scaleOptions(),a=s.scale,l=s.box,c=s.min,h=this.lineInfo(),u=h.axis,p=h.lineStart,d=l.clone(),f=!Ll(e),g=Kl(t,0),m=Kl(e,g);m=Math.max(m-1,g);var y=p+(g-c)*a,v=p+((m=Math.max(g,m))+1-c)*a;return f&&o&&(v=y),i&&(y=Vl(y,l[u+1],l[u+2]),v=Vl(v,l[u+1],l[u+2])),d[u+1]=n?v:y,d[u+2]=n?y:v,d},e.prototype.limitSlot=function(t){var e=this.options.vertical?Js:Ys,i=this.lineBox(),r=t.clone();return r[e+1]=Vl(t[e+1],i[e+1],i[e+2]),r[e+2]=Vl(t[e+2],i[e+1],i[e+2]),r},e.prototype.slot=function(e,i,r){var n=Math.floor(this.options.min||0),o=e,s=i;return"string"==typeof o?o=this.categoryIndex(o):na(o)&&(o-=n),"string"==typeof s?s=this.categoryIndex(s):na(s)&&(s-=n),t.prototype.slot.call(this,o,s,r)},e.prototype.pointCategoryIndex=function(t){var e=this.options,i=e.reverse,r=e.justified,n=e.vertical?Js:Ys,o=this.scaleOptions(),s=o.scale,a=o.box,l=o.min,c=o.max,h=i?c:l,u=a[n+1],p=a[n+2],d=t[n];if(d<u||d>p)return null;var f=h+(d-u)/s,g=f%1;return r?f=Math.round(f):0===g&&f>0&&f--,Math.floor(f)},e.prototype.getCategory=function(t){var e=this.pointCategoryIndex(t);return null===e?null:this.options.categories[e]},e.prototype.categoryIndex=function(t){return this.totalIndex(t)-Math.floor(this.options.min||0)},e.prototype.categoryAt=function(t,e){var i=this.options;return(e?i.srcCategories:i.categories)[t]},e.prototype.categoriesCount=function(){return(this.options.categories||[]).length},e.prototype.translateRange=function(t){var e=this.options,i=this.lineBox(),r=e.vertical?i.height():i.width(),n=e.categories.length,o=Xl(t/(r/n),Ds);return{min:o,max:n+o}},e.prototype.scaleRange=function(t,e){var i=Math.abs(this.pointOffset(e)),r=this.totalRangeIndices(),n=r.max-r.min,o=this.scaleToDelta(t,n),s=i*o,a=(1-i)*o,l=r.min+s,c=r.max-a;return c-l<.1&&(c=l+.1),{min:l,max:c}},e.prototype.zoomRange=function(t,e){var i=this.totalRange(),r=i.min,n=i.max,o=this.scaleRange(t,e);return{min:Vl(o.min,r,n),max:Vl(o.max,r,n)}},e.prototype.labelsCount=function(){var t=this.labelsRange();return t.max-t.min},e.prototype.labelsRange=function(){var t=this.options,e=t.justified,i=t.labels,r=this.totalRangeIndices(!0),n=r.min,o=r.max,s=Math.floor(n);return e?(n=Math.ceil(n),o=Math.floor(o)):(n=Math.floor(n),o=Math.ceil(o)),{min:(n>i.skip?i.skip+i.step*Math.ceil((n-i.skip)/i.step):i.skip)-s,max:(t.categories.length?o+(e?1:0):0)-s}},e.prototype.createAxisLabel=function(t,e,i){var r=this.options,n=r.dataItems?r.dataItems[t]:null,o=Kl(r.categories[t],"");i.dataItem=n;var s=this.axisLabelText(o,e,i);return new vp(o,s,t,n,e)},e.prototype.shouldRenderNote=function(t){var e=this.totalRangeIndices();return Math.floor(e.min)<=t&&t<=Math.ceil(e.max)},e.prototype.noteSlot=function(t){var e=this.options,i=t-Math.floor(e.min||0);return this.getSlot(i)},e.prototype.arrangeNotes=function(){t.prototype.arrangeNotes.call(this),this.hideOutOfRangeNotes()},e.prototype.hideOutOfRangeNotes=function(){var t=this.notes,e=this.box;if(t&&t.length)for(var i=this.options.vertical?Js:Ys,r=e[i+1],n=e[i+2],o=0;o<t.length;o++){var s=t[o];s.box&&(n<s.box[i+1]||s.box[i+2]<r)&&s.hide()}},e.prototype.pan=function(t){var e=this.totalRangeIndices(!0),i=this.scaleOptions().scale,r=Xl(t/i,Ds),n=this.totalRange(),o=e.min+r,s=e.max+r;return this.limitRange(o,s,0,n.max,r)},e.prototype.pointsRange=function(t,e){var i=this.options,r=i.reverse,n=i.vertical?Js:Ys,o=this.totalRangeIndices(!0),s=this.scaleOptions(),a=s.scale,l=s.box[n+(r?2:1)],c=t[n]-l,h=e[n]-l,u=o.min+c/a,p=o.min+h/a,d=Math.min(u,p),f=Math.max(u,p);if(f-d>=.01)return{min:d,max:f}},e.prototype.valueRange=function(){return this.range()},e.prototype.totalIndex=function(t){var e=this.options,i=this._categoriesMap?this._categoriesMap.get(t):function(t,e){if(t instanceof Date){for(var i=e.length,r=0;r<i;r++)if(ud(e[r],t))return r;return-1}return e.indexOf(t)}(t,e.srcCategories);return i},e.prototype.currentRangeIndices=function(){var t=this.options,e=0;return na(t.min)&&(e=Math.floor(t.min)),{min:e,max:na(t.max)?t.justified?Math.floor(t.max):Math.ceil(t.max)-1:this.totalCount()-1}},e.prototype.mapCategories=function(){if(!this._categoriesMap)for(var t=this._categoriesMap=new Ta,e=this.options.srcCategories,i=0;i<e.length;i++)t.set(e[i],i)},e.prototype.totalCount=function(){return Math.max(this.options.srcCategories.length,this._seriesMax||0)},e}(Bp);Zl(vd,{type:"category",vertical:!1,majorGridLines:{visible:!1,width:1,color:_s},labels:{zIndex:1},justified:!1,_deferLabels:!0});const bd=vd;var wd=3e5,xd={milliseconds:"HH:mm:ss.fff",seconds:"HH:mm:ss",minutes:"HH:mm",hours:"HH:mm",days:"M/d",weeks:"M/d",months:"MMM 'yy",years:"yyyy"},Sd=[jp,zp,Up,$p,Hp,Vp,qp,Wp],kd="fit";function Cd(t){var e=t._range;return e||((e=t._range=Ql(t)).min=rd(e.min),e.max=rd(e.max)),e}var Ad=function(t){this.options=t};Ad.prototype.displayIndices=function(){return{min:0,max:1}},Ad.prototype.displayRange=function(){return{}},Ad.prototype.total=function(){return{}},Ad.prototype.valueRange=function(){return{}},Ad.prototype.valueIndex=function(){return-1},Ad.prototype.values=function(){return[]},Ad.prototype.totalIndex=function(){return-1},Ad.prototype.valuesCount=function(){return 0},Ad.prototype.totalCount=function(){return 0},Ad.prototype.dateAt=function(){return null};var _d=function(t,e,i){this.options=i,i.baseUnitStep=i.baseUnitStep||1;var r=i.roundToBaseUnit,n=i.justified;this.start=od(t,0,i.baseUnit,i.weekStartDay);var o=this.roundToTotalStep(e),s=!n&&ud(e,o)&&!i.justifyEnd;this.end=this.roundToTotalStep(e,!n,s?1:0);var a=i.min||t;this.valueStart=this.roundToTotalStep(a),this.displayStart=r?this.valueStart:a;var l=i.max;if(l){var c=!n&&ud(l,this.roundToTotalStep(l))?-1:0;this.valueEnd=this.roundToTotalStep(l,!1,c),this.displayEnd=r?this.roundToTotalStep(l,!n):i.max}else this.valueEnd=o,this.displayEnd=r||s?this.end:e;this.valueEnd<this.valueStart&&(this.valueEnd=this.valueStart),this.displayEnd<=this.displayStart&&(this.displayEnd=this.roundToTotalStep(this.displayStart,!1,1))};function Td(t,e,i){for(var r,n,o,s=Cd(t.categories),a=(t.max||s.max)-(t.min||s.min),l=t.autoBaseUnitSteps,c=t.maxDateGroups,h=t.baseUnit===kd,u=e?Sd.indexOf(e):0,p=h?Sd[u++]:t.baseUnit,d=a/td[p],f=d;!n||d>=c;){r=r||l[p].slice(0);do{o=r.shift()}while(o&&e===p&&o<i);if(o)d=f/(n=o);else{if(p===Hl(Sd)){n=Math.ceil(f/c);break}if(!h){d>c&&(n=Math.ceil(f/c));break}p=Sd[u++]||Hl(Sd),f=a/td[p],r=null}}t.baseUnitStep=n,t.baseUnit=p}function Od(t){var e=(t.baseUnit||"").toLowerCase();return e!==kd&&!Oa(e,Sd)&&function(t){for(var e,i,r=t.categories,n=Ll(r)?r.length:0,o=Bs,s=0;s<n;s++){var a=r[s];if(a&&e){var l=ed(a,e);l>0&&(i=(o=Math.min(o,l))>=Qp?Wp:o>=24192e5?qp:o>=Jp?Vp:o>=Yp?Hp:o>=Kp?$p:o>=Gp?Up:zp)}e=a}t.baseUnit=i||Hp}(t),e!==kd&&"auto"!==t.baseUnitStep||Td(t),t}_d.prototype.displayRange=function(){return{min:this.displayStart,max:this.displayEnd}},_d.prototype.displayIndices=function(){if(!this._indices){var t=this.options,e=t.baseUnit,i=t.baseUnitStep,r=dd(this.displayStart,this.valueStart,e,i),n=dd(this.displayEnd,this.valueStart,e,i);this._indices={min:r,max:n}}return this._indices},_d.prototype.total=function(){return{min:this.start,max:this.end}},_d.prototype.totalCount=function(){return this.totalIndex(this.end)+(this.options.justified?1:0)},_d.prototype.valueRange=function(){return{min:this.valueStart,max:this.valueEnd}},_d.prototype.valueIndex=function(t){var e=this.options;return Math.floor(dd(t,this.valueStart,e.baseUnit,e.baseUnitStep))},_d.prototype.totalIndex=function(t){var e=this.options;return Math.floor(dd(t,this.start,e.baseUnit,e.baseUnitStep))},_d.prototype.dateIndex=function(t){var e=this.options;return dd(t,this.valueStart,e.baseUnit,e.baseUnitStep)},_d.prototype.valuesCount=function(){return this.valueIndex(this.valueEnd)+1},_d.prototype.values=function(){var t=this._values;if(!t){var e=this.options,i=this.valueRange();this._values=t=[];for(var r=i.min;r<=i.max;)t.push(r),r=od(r,e.baseUnitStep,e.baseUnit,e.weekStartDay)}return t},_d.prototype.dateAt=function(t,e){var i=this.options;return od(e?this.start:this.valueStart,i.baseUnitStep*t,i.baseUnit,i.weekStartDay)},_d.prototype.roundToTotalStep=function(t,e,i){var r=this.options,n=r.baseUnit,o=r.baseUnitStep,s=r.weekStartDay,a=this.start,l=dd(t,a,n,o),c=e?Math.ceil(l):Math.floor(l);return i&&(c+=i),od(a,c*o,n,s)};var Ed=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e(Object.assign({},this.options),this.chartService);return t.createLabels(),t},e.prototype.categoriesHash=function(){var t=this.dataRange.total().min;return this.options.baseUnit+this.options.baseUnitStep+t},e.prototype.initUserOptions=function(t){return t},e.prototype.initFields=function(){t.prototype.initFields.call(this);var e=this.chartService,i=e.intl,r=this.options,n=r.categories||[];if(n._parsed||((n=md(i,n))._parsed=!0),r=ha({roundToBaseUnit:!0},r,{categories:n,min:gd(i,r.min),max:gd(i,r.max),weekStartDay:yd(r,i)}),e.panning&&e.isPannable(r.vertical?Js:Ys)&&(r.roundToBaseUnit=!1),r.userSetBaseUnit=r.userSetBaseUnit||r.baseUnit,r.userSetBaseUnitStep=r.userSetBaseUnitStep||r.baseUnitStep,this.options=r,r.srcCategories=n,n.length>0){var o=Cd(n),s=r.maxDivisions;if(this.dataRange=new _d(o.min,o.max,Od(r)),s){var a=this.dataRange.displayRange(),l=Object.assign({},r,{justified:!0,roundToBaseUnit:!1,baseUnit:"fit",min:a.min,max:a.max,maxDateGroups:s}),c=this.dataRange.options;Td(l,c.baseUnit,c.baseUnitStep),this.divisionRange=new _d(o.min,o.max,l)}else this.divisionRange=this.dataRange}else r.baseUnit=r.baseUnit||Hp,this.dataRange=this.divisionRange=new Ad(r);this.rangeLabels=[]},e.prototype.tickIndices=function(e){var i=this.dataRange,r=this.divisionRange,n=r.valuesCount();if(!this.options.maxDivisions||!n)return t.prototype.tickIndices.call(this,e);var o=[],s=r.values(),a=0;this.options.justified||(s=s.concat(r.dateAt(n)),a=.5);for(var l=0;l<s.length;l++)if(o.push(i.dateIndex(s[l])+a),1!==e&&l>=1){var c=o.length-1;o.splice(l,0,o[c-1]+(o[c]-o[c-1])*e)}return o},e.prototype.shouldRenderNote=function(t){var e=this.range(),i=this.options.categories||[];return ld(t,e.min)>=0&&ld(t,e.max)<=0&&i.length},e.prototype.parseNoteValue=function(t){return gd(this.chartService.intl,t)},e.prototype.noteSlot=function(t){return this.getSlot(t)},e.prototype.translateRange=function(t){var e=this.options,i=e.baseUnit,r=e.weekStartDay,n=e.vertical,o=this.lineBox(),s=n?o.height():o.width(),a=this.range(),l=s/(a.max-a.min),c=Xl(t/l,Ds);if(a.min&&a.max){var h=id(e.min||a.min,c),u=id(e.max||a.max,c);a={min:od(h,0,i,r),max:od(u,0,i,r)}}return a},e.prototype.labelsRange=function(){return{min:this.options.labels.skip,max:this.divisionRange.valuesCount()}},e.prototype.pan=function(t){if(this.isEmpty())return null;var e=this.options,i=this.lineBox(),r=e.vertical?i.height():i.width(),n=this.dataRange.displayRange(),o=n.min,s=n.max,a=this.dataRange.total(),l=Xl(t/(r/(s-o)),Ds)*(e.reverse?-1:1),c=id(o,l),h=id(s,l),u=this.limitRange(hd(c),hd(h),hd(a.min),hd(a.max),l);return u?(u.min=rd(u.min),u.max=rd(u.max),u.baseUnit=e.baseUnit,u.baseUnitStep=e.baseUnitStep||1,u.userSetBaseUnit=e.userSetBaseUnit,u.userSetBaseUnitStep=e.userSetBaseUnitStep,u):void 0},e.prototype.pointsRange=function(e,i){if(this.isEmpty())return null;var r=t.prototype.pointsRange.call(this,e,i),n=this.dataRange.displayRange(),o=this.dataRange.displayIndices(),s=cd(n.max,n.min)/(o.max-o.min),a=this.options;return{min:id(n.min,r.min*s),max:id(n.min,r.max*s),baseUnit:a.userSetBaseUnit||a.baseUnit,baseUnitStep:a.userSetBaseUnitStep||a.baseUnitStep}},e.prototype.scaleRange=function(t,e){if(this.isEmpty())return{};var i=this.options,r=i.userSetBaseUnit===kd,n=this.dataRange.total(),o=this.dataRange.displayRange(),s=o.min,a=o.max,l=Math.abs(this.pointOffset(e)),c=a-s,h=this.scaleToDelta(t,c),u=Math.round(l*h),p=Math.round((1-l)*h),d=this.dataRange.options.baseUnit,f=new Date(s.getTime()+u),g=new Date(a.getTime()-p);if(r){var m,y,v=i.autoBaseUnitSteps,b=i.maxDateGroups,w=Hl(v[d])*b*td[d],x=cd(a,s),S=cd(g,f),k=Sd.indexOf(d);if(S<td[d]&&d!==jp)d=Sd[k-1],f=id(s,y=(x-(b-1)*(m=Hl(v[d]))*td[d])/2),g=id(a,-y);else if(S>w&&d!==Wp){var C=0;do{k++,d=Sd[k],C=0,y=2*td[d];do{m=v[d][C],C++}while(C<v[d].length&&y*m<x)}while(d!==Wp&&y*m<x);(y=(y*m-x)/2)>0&&(f=id(s,-y),g=id(a,y),f=id(f,Vl(g,n.min,n.max)-g),g=id(g,Vl(f,n.min,n.max)-f))}}return f&&g&&cd(g,f)>0?{min:f,max:g,baseUnit:i.userSetBaseUnit||i.baseUnit,baseUnitStep:i.userSetBaseUnitStep||i.baseUnitStep}:void 0},e.prototype.zoomRange=function(t,e){var i=this.dataRange.total(),r=this.scaleRange(t,e);return r&&(r.min<i.min&&(r.min=i.min),r.max>i.max&&(r.max=i.max)),r},e.prototype.range=function(){return this.dataRange.displayRange()},e.prototype.createLabels=function(){t.prototype.createLabels.call(this),this.createRangeLabels()},e.prototype.clearLabels=function(){t.prototype.clearLabels.call(this),this.rangeLabels=[]},e.prototype.arrangeLabels=function(){this.arrangeRangeLabels(),t.prototype.arrangeLabels.call(this)},e.prototype.arrangeRangeLabels=function(){var t=this.options,e=this.rangeLabels;if(0!==e.length){var i=this.lineBox(),r=t.vertical,n=t.rangeLabels.mirror||t.labels.mirror,o=e[0];if(o){var s=r?i.y1-o.box.height()/2:i.x1;this.positionLabel(o,n,s)}var a=e[1];if(a){var l=r?i.y2-a.box.height()/2:i.x2;this.positionLabel(a,n,l)}}},e.prototype.autoRotateLabels=function(){t.prototype.autoRotateLabels.call(this),this.autoRotateRangeLabels()},e.prototype.hideOutOfRangeLabels=function(){t.prototype.hideOutOfRangeLabels.call(this),this.hideOverlappingLabels()},e.prototype.hideOverlappingLabels=function(){var t=this.rangeLabels,e=this.labels;if(0!==t.length){var i=t[0];if(i&&i.options.visible)for(var r=0;r<e.length;r++){if(!s(i,e[r]))break}var n=t[1];if(n&&n.options.visible)for(var o=e.length-1;o>0;--o){if(!s(n,e[o]))break}}function s(t,e){return!(e.options.visible&&!e.box.overlaps(t.box))&&(e.options.visible=!1,!0)}},e.prototype.contentBox=function(){for(var e=t.prototype.contentBox.call(this),i=this.rangeLabels,r=0;r<i.length;r++){var n=i[r];n.options.visible&&e.wrap(n.box)}return e},e.prototype.createAxisLabel=function(t,e,i){void 0===i&&(i={});var r=this.options,n=r.dataItems&&!r.maxDivisions?r.dataItems[t]:null,o=this.divisionRange.dateAt(t),s=e.dateFormats[this.divisionRange.options.baseUnit];e.format=e.format||s,i.dataItem=n;var a=this.axisLabelText(o,e,i);if(a)return new vp(o,a,t,n,e)},e.prototype.createRangeLabels=function(){var t=this,e=this.divisionRange,i=e.displayStart,r=e.displayEnd,n=this.options,o=Object.assign({},n.labels,n.rangeLabels,{align:Os,zIndex:n.zIndex});if(!0===o.visible){this.normalizeLabelRotation(o),o.alignRotation=Os,"auto"===o.rotation&&(o.rotation=0,n.autoRotateRangeLabels=!0);var s=o.dateFormats[this.divisionRange.options.baseUnit];o.format=o.format||s;var a=function(e,i,r){if(r){var n=new vp(i,r,e,null,o);t.append(n),t.rangeLabels.push(n)}};a(0,i,this.axisLabelText(i,o,{index:0,count:2})),a(1,r,this.axisLabelText(r,o,{index:1,count:2}))}},e.prototype.autoRotateRangeLabels=function(){var t=this,e=this.rangeLabels;if(this.options.autoRotateRangeLabels&&!this.options.vertical&&2===e.length){var i=function(e,i,r){var n=2*Math.abs(i[r+1]-i[r]),o=t.autoRotateLabelAngle(e.box,n);0!==o&&(e.options.rotation=o,e.reflow(new Vc))},r=this.getMajorTickPositions();i(e[0],r,0),i(e[1],r,r.length-2)}},e.prototype.categoryIndex=function(t){return this.dataRange.valueIndex(t)},e.prototype.slot=function(t,e,i){var r=this.dataRange,n=t,o=e;n instanceof Date&&(n=r.dateIndex(n)),o instanceof Date&&(o=r.dateIndex(o));var s=this.getSlot(n,o,i);if(s)return s.toRect()},e.prototype.getSlot=function(e,i,r){var n=e,o=i;return typeof n===Us&&(n=this.categoryIndex(n)),typeof o===Us&&(o=this.categoryIndex(o)),t.prototype.getSlot.call(this,n,o,r)},e.prototype.valueRange=function(){var t=Cd(this.options.srcCategories);return{min:rd(t.min),max:rd(t.max)}},e.prototype.categoryAt=function(t,e){return this.dataRange.dateAt(t,e)},e.prototype.categoriesCount=function(){return this.dataRange.valuesCount()},e.prototype.rangeIndices=function(){return this.dataRange.displayIndices()},e.prototype.labelsBetweenTicks=function(){return!this.divisionRange.options.justified},e.prototype.prepareUserOptions=function(){this.isEmpty()||(this.options.categories=this.dataRange.values())},e.prototype.getCategory=function(t){var e=this.pointCategoryIndex(t);return null===e?null:this.dataRange.dateAt(e)},e.prototype.totalIndex=function(t){return this.dataRange.totalIndex(t)},e.prototype.currentRangeIndices=function(){var t=this.dataRange.valueRange();return{min:this.dataRange.totalIndex(t.min),max:this.dataRange.totalIndex(t.max)}},e.prototype.totalRange=function(){return this.dataRange.total()},e.prototype.totalCount=function(){return this.dataRange.totalCount()},e.prototype.isEmpty=function(){return!this.options.srcCategories.length},e.prototype.roundedRange=function(){if(!1!==this.options.roundToBaseUnit||this.isEmpty())return this.range();var t=this.options,e=Cd(t.srcCategories);return new _d(e.min,e.max,Object.assign({},t,{justified:!1,roundToBaseUnit:!0,justifyEnd:t.justified})).displayRange()},e}(bd);Zl(Ed,{type:Ps,labels:{dateFormats:xd},rangeLabels:{visible:!1},autoBaseUnitSteps:{milliseconds:[1,10,100],seconds:[1,2,5,15,30],minutes:[1,2,5,15,30],hours:[1,2,3],days:[1,2,3],weeks:[1,2],months:[1,2,3,6],years:[1,2,3,5,10,25,50]},maxDateGroups:10});const Md=Ed;function Pd(t,e){return Xl(Math.floor(t/e)*e,Ds)}function Id(t,e){return Xl(Math.ceil(t/e)*e,Ds)}function Dd(t){return Math.max(Math.min(t,wd),-3e5)}var Fd=Math.pow(10,-9),Rd=function(t){function e(e,i,r,n){t.call(this,Object.assign({},r,{seriesMin:e,seriesMax:i}),n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initUserOptions=function(t){var e=function(t,e,i){var r=i.narrowRange,n=function(t,e,i){if(!t&&!e)return 0;var r;if(t>=0&&e>=0){var n=t===e?0:t;if(!1===i||!i&&(e-n)/e>.2)return 0;r=Math.max(0,n-(e-n)/2)}else r=t;return r}(t,e,r),o=function(t,e,i){if(!t&&!e)return 1;var r;if(t<=0&&e<=0){var n=t===e?0:e,o=Math.abs((n-t)/n);if(!1===i||!i&&o>.2)return 0;r=Math.min(0,n-(t-n)/2)}else r=e;return r}(t,e,r),s=Tc(n,o),a={majorUnit:s};!1!==i.roundToMajorUnit&&(n<0&&Ld(n,s,1/3)&&(n-=s),o>0&&Ld(o,s,1/3)&&(o+=s));return a.min=Pd(n,s),a.max=Id(o,s),a}(t.seriesMin,t.seriesMax,t);return this.totalOptions=function(t,e){return{min:Ll(e.min)?Math.min(t.min,e.min):t.min,max:Ll(e.max)?Math.max(t.max,e.max):t.max,majorUnit:t.majorUnit}}(e,t),function(t,e){var i,r,n=e;if(e){!function(t,e){for(var i=0;i<e.length;i++){var r=e[i];null===t[r]&&(t[r]=void 0)}}(e,["min","max"]),i=Ll(e.min),r=Ll(e.max);var o=i||r;o&&e.min===e.max&&(e.min>0?e.min=0:e.max=1),e.majorUnit?(t.min=Pd(t.min,e.majorUnit),t.max=Id(t.max,e.majorUnit)):o&&(n=ha(t,e),t.majorUnit=Tc(n.min,n.max))}t.minorUnit=(n.majorUnit||t.majorUnit)/5;var s=ha(t,n);s.min>=s.max&&(i&&!r?s.max=s.min+s.majorUnit:!i&&r&&(s.min=s.max-s.majorUnit));return s}(e,t)},e.prototype.initFields=function(){this.totalMin=this.totalOptions.min,this.totalMax=this.totalOptions.max,this.totalMajorUnit=this.totalOptions.majorUnit,this.seriesMin=this.options.seriesMin,this.seriesMax=this.options.seriesMax},e.prototype.clone=function(){return new e(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)},e.prototype.startValue=function(){return 0},e.prototype.range=function(){var t=this.options;return{min:t.min,max:t.max}},e.prototype.getDivisions=function(t){if(0===t)return 1;var e=this.options,i=e.max-e.min;return Math.floor(Xl(i/t,3))+1},e.prototype.getTickPositions=function(t,e){var i=this.options,r=this.lineInfo(),n=r.axisDir,o=r.axisOrigin,s=r.lineBox,a=t*(r.lineSize/(i.max-i.min)),l=this.getDivisions(t),c=[],h=s[o],u=0;e&&(u=e/t);for(var p=0;p<l;p++)p%u!=0&&c.push(Xl(h,3)),h+=a*n;return c},e.prototype.getMajorTickPositions=function(){return this.getTickPositions(this.options.majorUnit)},e.prototype.getMinorTickPositions=function(){return this.getTickPositions(this.options.minorUnit)},e.prototype.getSlot=function(t,e,i){void 0===i&&(i=!1);var r=this.options,n=this.lineInfo(),o=n.axis,s=n.axisDir,a=n.lineBox,l=n.lineSize,c=n.lineStart,h=s*(l/(r.max-r.min)),u=Kl(t,e||0),p=Kl(e,t||0);i&&(u=Vl(u,r.min,r.max),p=Vl(p,r.min,r.max));var d=Math.min(u,p)-r.min,f=Math.max(u,p)-r.min,g=new Vc(a.x1,a.y1,a.x1,a.y1);return g[o+1]=Dd(c+h*(s>0?d:f)),g[o+2]=Dd(c+h*(s>0?f:d)),g},e.prototype.getValue=function(t){var e=this.options,i=Number(e.max),r=Number(e.min),n=this.pointOffset(t);return n<0||n>1?null:Xl(r+n*(i-r),Ds)},e.prototype.translateRange=function(t){var e=this.options,i=e.vertical,r=e.reverse,n=e.max,o=e.min,s=this.lineInfo().lineSize,a=Xl(t/(s/(n-o)),Ds);return!i&&!r||i&&r||(a=-a),{min:o+a,max:n+a,offset:a}},e.prototype.labelsCount=function(){return this.getDivisions(this.options.majorUnit)},e.prototype.createAxisLabel=function(t,e,i){var r=this.options,n=Xl(r.min+t*r.majorUnit,Ds),o=this.axisLabelText(n,e,i);return new vp(n,o,t,null,e)},e.prototype.shouldRenderNote=function(t){var e=this.range();return e.min<=t&&t<=e.max},e.prototype.pan=function(t){var e=this.translateRange(t);return this.limitRange(e.min,e.max,this.totalMin,this.totalMax,e.offset)},e.prototype.pointsRange=function(t,e){var i=this.getValue(t),r=this.getValue(e),n=Math.min(i,r),o=Math.max(i,r);if(this.isValidRange(n,o))return{min:n,max:o}},e.prototype.scaleRange=function(t,e){var i=Math.abs(this.pointOffset(e)),r=this.options.max-this.options.min,n=this.scaleToDelta(t,r),o=i*n,s=(1-i)*n,a=Xl(this.options.min+o,Ds),l=Xl(this.options.max-s,Ds);return l-a<Fd&&(l=a+Fd),{min:a,max:l}},e.prototype.zoomRange=function(t,e){var i=this.totalMin,r=this.totalMax,n=this.scaleRange(t,e);return{min:Vl(n.min,i,r),max:Vl(n.max,i,r),narrowRange:!1}},e.prototype.isValidRange=function(t,e){return e-t>Fd},e}(Bp);function Ld(t,e,i){var r=Xl(Math.abs(t%e),Ds);return 0===r||r>e*(1-i)}Zl(Rd,{type:"numeric",min:0,max:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:_s},labels:{format:"#.####################"},zIndex:1});const Nd=Rd;var Bd=function(t){function e(e,i,r,n){var o=rd(e),s=rd(i),a=n.intl,l=r||{};l=function(t,e,i){var r=i.min||t,n=i.max||e,o=i.baseUnit||(n&&r?function(t){var e=$p;t>=Qp?e=Wp:t>=Zp?e=qp:t>=Jp?e=Vp:t>=Yp&&(e=Hp);return e}(ed(n,r)):$p),s=td[o],a=i.weekStartDay||0,l=sd(hd(r)-1,o,a)||rd(n),c=ad(hd(n)+1,o,a),h=(i.majorUnit?i.majorUnit:void 0)||Id(Tc(l.getTime(),c.getTime()),s)/s,u=fd(l,c,o),p=Id(u,h)-u,d=Math.floor(p/2),f=p-d;i.baseUnit||delete i.baseUnit;return i.baseUnit=i.baseUnit||o,i.min=i.min||od(l,-d,o,a),i.max=i.max||od(c,f,o,a),i.minorUnit=i.minorUnit||h/5,i.majorUnit=h,i}(o,s,l=ha(l||{},{min:gd(a,l.min),max:gd(a,l.max),axisCrossingValue:md(a,l.axisCrossingValues||l.axisCrossingValue),weekStartDay:yd(l,a)})),t.call(this,l,n),this.intlService=a,this.seriesMin=o,this.seriesMax=s;var c=l.weekStartDay||0;this.totalMin=hd(sd(hd(o)-1,l.baseUnit,c)),this.totalMax=hd(ad(hd(s)+1,l.baseUnit,c))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)},e.prototype.range=function(){var t=this.options;return{min:t.min,max:t.max}},e.prototype.getDivisions=function(t){var e=this.options;return Math.floor(fd(e.min,e.max,e.baseUnit)/t+1)},e.prototype.getTickPositions=function(t){for(var e=this.options,i=this.lineInfo(),r=i.axisDir,n=i.lineSize,o=i.lineStart,s=this.getDivisions(t),a=n/cd(e.max,e.min),l=e.weekStartDay||0,c=[o],h=1;h<s;h++){var u=o+cd(od(e.min,h*t,e.baseUnit,l),e.min)*a*r;c.push(Xl(u,3))}return c},e.prototype.getMajorTickPositions=function(){return this.getTickPositions(this.options.majorUnit)},e.prototype.getMinorTickPositions=function(){return this.getTickPositions(this.options.minorUnit)},e.prototype.getSlot=function(t,e,i){return Nd.prototype.getSlot.call(this,gd(this.intlService,t),gd(this.intlService,e),i)},e.prototype.getValue=function(t){var e=Nd.prototype.getValue.call(this,t);return null!==e?rd(e):null},e.prototype.labelsCount=function(){return this.getDivisions(this.options.majorUnit)},e.prototype.createAxisLabel=function(t,e,i){var r=this.options,n=t*r.majorUnit,o=r.weekStartDay||0,s=r.min;n>0&&(s=od(s,n,r.baseUnit,o));var a=e.dateFormats[r.baseUnit];e.format=e.format||a;var l=this.axisLabelText(s,e,i);return new vp(s,l,t,null,e)},e.prototype.translateRange=function(t){var e=this.options,i=this.lineBox(),r=e.vertical,n=e.reverse,o=r?i.height():i.width(),s=this.range(),a=o/cd(s.max,s.min),l=Xl(t/a,Ds);return!r&&!n||r&&n||(l=-l),{min:id(e.min,l),max:id(e.max,l),offset:l}},e.prototype.shouldRenderNote=function(t){var e=this.range();return ld(t,e.min)>=0&&ld(t,e.max)<=0},e.prototype.pan=function(t){var e=this.translateRange(t,!0),i=this.limitRange(hd(e.min),hd(e.max),this.totalMin,this.totalMax,e.offset);if(i)return{min:rd(i.min),max:rd(i.max)}},e.prototype.pointsRange=function(t,e){var i=this.getValue(t),r=this.getValue(e),n=Math.min(i,r),o=Math.max(i,r);return{min:rd(n),max:rd(o)}},e.prototype.scaleRange=function(t,e){var i=Math.abs(this.pointOffset(e)),r=this.options.max-this.options.min,n=this.scaleToDelta(t,r),o=i*n,s=(1-i)*n,a=rd(hd(this.options.min)+o),l=rd(hd(this.options.max)-s);return l-a<1e3&&(l=rd(hd(a)+1e3)),{min:a,max:l}},e.prototype.zoomRange=function(t,e){var i=this.scaleRange(t,e);return{min:rd(Vl(hd(i.min),this.totalMin,this.totalMax)),max:rd(Vl(hd(i.max),this.totalMin,this.totalMax))}},e}(Bp);Zl(Bd,{type:Ps,majorGridLines:{visible:!0,width:1,color:_s},labels:{dateFormats:xd}});const jd=Bd;var zd=1e-6,Ud=function(t){function e(e,i,r,n){var o=ha({majorUnit:10,min:e,max:i},r),s=o.majorUnit,a=function(t,e){var i,r=Xl(Hd(t,e),Ds)%1;i=t<=0?e:0!==r&&(r<.3||r>.9)?Math.pow(e,Hd(t,e)+.2):Math.pow(e,Math.ceil(Hd(t,e)));return i}(i,s),l=function(t,e,i){var r=i.majorUnit,n=t;t<=0?n=e<=1?Math.pow(r,-2):1:i.narrowRange||(n=Math.pow(r,Math.floor(Hd(t,r))));return n}(e,i,o),c=function(t,e,i,r){var n=i.min,o=i.max;Ll(i.axisCrossingValue)&&i.axisCrossingValue<=0&&$d();Ll(r.max)?r.max<=0&&$d():o=e;Ll(r.min)?r.min<=0&&$d():n=t;return{min:n,max:o}}(l,a,o,r);o.max=c.max,o.min=c.min,o.minorUnit=r.minorUnit||Xl(s-1,Ds),t.call(this,o,n),this.totalMin=Ll(r.min)?Math.min(l,r.min):l,this.totalMax=Ll(r.max)?Math.max(a,r.max):a,this.logMin=Xl(Hd(c.min,s),Ds),this.logMax=Xl(Hd(c.max,s),Ds),this.seriesMin=e,this.seriesMax=i,this.createLabels()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)},e.prototype.startValue=function(){return this.options.min},e.prototype.getSlot=function(t,e,i){var r=this,n=r.options,o=r.logMin,s=r.logMax,a=n.majorUnit,l=n.min,c=n.max,h=this.lineInfo(),u=h.axis,p=h.axisDir,d=h.lineBox,f=h.lineSize,g=h.lineStart,m=p*(f/(s-o)),y=Kl(t,e||1),v=Kl(e,t||1);if(y<=0||v<=0)return null;i&&(y=Vl(y,l,c),v=Vl(v,l,c)),y=Hd(y,a),v=Hd(v,a);var b=Math.min(y,v)-o,w=Math.max(y,v)-o,x=new Vc(d.x1,d.y1,d.x1,d.y1);return x[u+1]=Dd(g+m*(p>0?b:w)),x[u+2]=Dd(g+m*(p>0?w:b)),x},e.prototype.getValue=function(t){var e=this,i=e.options,r=e.logMin,n=e.logMax,o=i.majorUnit,s=this.lineInfo(),a=s.axis,l=s.axisDir,c=s.lineStart,h=s.lineSize,u=(n-r)/h,p=l*(t[a]-c);if(p<0||p>h)return null;var d=r+p*u;return Xl(Math.pow(o,d),Ds)},e.prototype.range=function(){var t=this.options;return{min:t.min,max:t.max}},e.prototype.translateRange=function(t){var e=this,i=e.options,r=e.logMin,n=e.logMax,o=i.reverse,s=i.vertical,a=i.majorUnit,l=this.lineBox(),c=s?l.height():l.width(),h=Xl(t/(c/(n-r)),Ds);return!s&&!o||s&&o||(h=-h),{min:Math.pow(a,r+h),max:Math.pow(a,n+h),offset:h}},e.prototype.labelsCount=function(){var t=Math.floor(this.logMax);return Math.floor(t-this.logMin)+1},e.prototype.getMajorTickPositions=function(){var t=[];return this.traverseMajorTicksPositions((function(e){t.push(e)}),{step:1,skip:0}),t},e.prototype.createTicks=function(t){var e=this.options,i=e.majorTicks,r=e.minorTicks,n=e.vertical,o=e.labels.mirror,s=this.lineBox(),a={vertical:n};function l(e,i){a.tickX=o?s.x2:s.x2-i.size,a.tickY=o?s.y1-i.size:s.y1,a.position=e,t.append(Rp(a,i))}return i.visible&&this.traverseMajorTicksPositions(l,i),r.visible&&this.traverseMinorTicksPositions(l,r),[]},e.prototype.createGridLines=function(t){var e=this.options,i=e.minorGridLines,r=e.majorGridLines,n=e.vertical,o=t.lineBox(),s={lineStart:o[n?"x1":"y1"],lineEnd:o[n?"x2":"y2"],vertical:n},a=[],l=this.gridLinesVisual();function c(t,e){Oa(t,a)||(s.position=t,l.append(Lp(s,e)),a.push(t))}return r.visible&&this.traverseMajorTicksPositions(c,r),i.visible&&this.traverseMinorTicksPositions(c,i),l.children},e.prototype.traverseMajorTicksPositions=function(t,e){for(var i=this.lineInfo(),r=i.lineStart,n=i.step,o=this.logMin,s=this.logMax,a=Math.ceil(o)+e.skip;a<=s;a+=e.step){t(Xl(r+n*(a-o),Ds),e)}},e.prototype.traverseMinorTicksPositions=function(t,e){for(var i=this.options,r=i.min,n=i.max,o=i.minorUnit,s=i.majorUnit,a=this.lineInfo(),l=a.lineStart,c=a.step,h=this.logMin,u=this.logMax,p=Math.floor(h);p<u;p++)for(var d=this._minorIntervalOptions(p),f=e.skip;f<o;f+=e.step){var g=d.value+f*d.minorStep;if(g>n)break;if(g>=r)t(Xl(l+c*(Hd(g,s)-h),Ds),e)}},e.prototype.createAxisLabel=function(t,e,i){var r=Math.ceil(this.logMin+t),n=Math.pow(this.options.majorUnit,r),o=this.axisLabelText(n,e,i);return new vp(n,o,t,null,e)},e.prototype.shouldRenderNote=function(t){var e=this.range();return e.min<=t&&t<=e.max},e.prototype.pan=function(t){var e=this.translateRange(t);return this.limitRange(e.min,e.max,this.totalMin,this.totalMax,e.offset)},e.prototype.pointsRange=function(t,e){var i=this.getValue(t),r=this.getValue(e);return{min:Math.min(i,r),max:Math.max(i,r)}},e.prototype.scaleRange=function(t,e){var i=this.options.majorUnit,r=Hd(this.options.min,i),n=Hd(this.options.max,i),o=Math.abs(this.pointOffset(e)),s=n-r,a=this.scaleToDelta(t,s),l=Math.pow(i,r+o*a),c=Math.pow(i,n-(1-o)*a);return c-l<zd&&(c=l+zd),{min:l,max:c}},e.prototype.zoomRange=function(t,e){var i=this.scaleRange(t,e),r=this.totalMin,n=this.totalMax;return{min:Vl(i.min,r,n),max:Vl(i.max,r,n)}},e.prototype._minorIntervalOptions=function(t){var e=this.options,i=e.minorUnit,r=e.majorUnit,n=Math.pow(r,t);return{value:n,minorStep:(Math.pow(r,t+1)-n)/i}},e.prototype.lineInfo=function(){var e=t.prototype.lineInfo.call(this);return e.step=e.axisDir*(e.lineSize/(this.logMax-this.logMin)),e},e}(Bp);function $d(){throw new Error("Non positive values cannot be used for a logarithmic axis")}function Hd(t,e){return Math.log(t)/Math.log(e)}Zl(Ud,{type:"log",majorUnit:10,minorUnit:1,axisCrossingValue:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:_s},zIndex:1,_deferLabels:!0});const Vd=Ud;var qd={createGridLines:function(t){var e,i,r=this.options,n=Math.abs(this.box.center().y-t.lineBox().y1),o=[],s=!1;return r.majorGridLines.visible&&(e=this.majorGridLineAngles(t),s=!0,o=this.renderMajorGridLines(e,n,r.majorGridLines)),r.minorGridLines.visible&&(i=this.minorGridLineAngles(t,s),Fl(o,this.renderMinorGridLines(i,n,r.minorGridLines,t,s))),o},renderMajorGridLines:function(t,e,i){return this.renderGridLines(t,e,i)},renderMinorGridLines:function(t,e,i,r,n){var o=this.radiusCallback&&this.radiusCallback(e,r,n);return this.renderGridLines(t,e,i,o)},renderGridLines:function(t,e,i,r){for(var n={stroke:{width:i.width,color:i.color,dashType:i.dashType}},o=this.box.center(),s=new mu([o.x,o.y],e),a=this.gridLinesVisual(),l=0;l<t.length;l++){var c=new hu(n);r&&(s.radius=r(t[l])),c.moveTo(s.center).lineTo(s.pointAt(t[l]+180)),a.append(c)}return a.children},gridLineAngles:function(t,e,i,r,n){var o=this,s=this.intervals(e,i,r,n),a=t.options,l=a.visible&&!1!==(a.line||{}).visible;return Fa(s,(function(t){var e=o.intervalAngle(t);if(!l||90!==e)return e}))}};const Wd=qd;var Xd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.range=function(){return{min:0,max:this.options.categories.length}},e.prototype.reflow=function(t){this.box=t,this.reflowLabels()},e.prototype.lineBox=function(){return this.box},e.prototype.reflowLabels=function(){for(var t=this.labels,e=this.options.labels,i=e.skip||0,r=e.step||1,n=new Vc,o=0;o<t.length;o++){t[o].reflow(n);var s=t[o].box;t[o].reflow(this.getSlot(i+o*r).adjacentBox(0,s.width(),s.height()))}},e.prototype.intervals=function(t,e,i,r){void 0===r&&(r=!1);for(var n=this.options,o=n.categories.length/t||1,s=360/o,a=i||1,l=[],c=0,h=e||0;h<o;h+=a)c=n.reverse?360-h*s:h*s,c=Xl(c,3)%360,r&&Oa(c,r)||l.push(c);return l},e.prototype.majorIntervals=function(){return this.intervals(1)},e.prototype.minorIntervals=function(){return this.intervals(.5)},e.prototype.intervalAngle=function(t){return(360+t+this.options.startAngle)%360},e.prototype.majorAngles=function(){var t=this;return Fa(this.majorIntervals(),(function(e){return t.intervalAngle(e)}))},e.prototype.createLine=function(){return[]},e.prototype.majorGridLineAngles=function(t){var e=this.options.majorGridLines;return this.gridLineAngles(t,1,e.skip,e.step)},e.prototype.minorGridLineAngles=function(t,e){var i=this.options,r=i.minorGridLines,n=i.majorGridLines,o=e?this.intervals(1,n.skip,n.step):null;return this.gridLineAngles(t,.5,r.skip,r.step,o)},e.prototype.radiusCallback=function(t,e,i){if(e.options.type!==As){var r=Wl(360/(2*this.options.categories.length)),n=Math.cos(r)*t,o=this.majorAngles(),s=function(e){return!i&&Oa(e,o)?t:n};return s}},e.prototype.createPlotBands=function(){for(var t=this.options.plotBands||[],e=this._plotbandGroup=new ku({zIndex:-1}),i=0;i<t.length;i++){var r=t[i],n=this.plotBandSlot(r),o=this.getSlot(r.from),s=r.from-Math.floor(r.from);n.startAngle+=s*o.angle;var a=Math.ceil(r.to)-r.to;n.angle-=(a+s)*o.angle;var l=du.current.createRing(n,{fill:{color:r.color,opacity:r.opacity},stroke:{opacity:r.opacity}});e.append(l)}this.appendVisual(e)},e.prototype.plotBandSlot=function(t){return this.getSlot(t.from,t.to-1)},e.prototype.getSlot=function(t,e){var i=this.options,r=i.justified,n=this.box,o=this.majorAngles(),s=o.length,a=360/s,l=t;i.reverse&&!r&&(l=(l+1)%s);var c=o[l=Vl(Math.floor(l),0,s-1)];r&&(c-=a/2)<0&&(c+=360);var h=a*(Vl(Math.ceil(e||l),l,s-1)-l+1);return new Xc(n.center(),0,n.height()/2,c,h)},e.prototype.slot=function(t,e){var i=this.getSlot(t,e),r=i.startAngle+180,n=r+i.angle;return new oh([i.center.x,i.center.y],{startAngle:r,endAngle:n,radiusX:i.radius,radiusY:i.radius})},e.prototype.pointCategoryIndex=function(t){for(var e=this.options.categories.length,i=null,r=0;r<e;r++){if(this.getSlot(r).containsPoint(t)){i=r;break}}return i},e}(bd);Zl(Xd,{startAngle:90,labels:{margin:ma(10)},majorGridLines:{visible:!0},justified:!0}),ha(Xd.prototype,Wd);const Gd=Xd;var Kd=function(t){function e(e,i){t.call(this,e,i);var r=this.options;r.minorUnit=r.minorUnit||r.majorUnit/2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDivisions=function(t){return Nd.prototype.getDivisions.call(this,t)-1},e.prototype.reflow=function(t){this.box=t,this.reflowLabels()},e.prototype.reflowLabels=function(){for(var t=this,e=t.options,i=t.labels,r=t.options.labels,n=r.skip||0,o=r.step||1,s=new Vc,a=this.intervals(e.majorUnit,n,o),l=0;l<i.length;l++){i[l].reflow(s);var c=i[l].box;i[l].reflow(this.getSlot(a[l]).adjacentBox(0,c.width(),c.height()))}},e.prototype.lineBox=function(){return this.box},e.prototype.intervals=function(t,e,i,r){void 0===r&&(r=!1);for(var n=this.options.min,o=this.getDivisions(t),s=[],a=i||1,l=e||0;l<o;l+=a){var c=(360+n+l*t)%360;r&&Oa(c,r)||s.push(c)}return s},e.prototype.majorIntervals=function(){return this.intervals(this.options.majorUnit)},e.prototype.minorIntervals=function(){return this.intervals(this.options.minorUnit)},e.prototype.intervalAngle=function(t){return(540-t-this.options.startAngle)%360},e.prototype.createLine=function(){return[]},e.prototype.majorGridLineAngles=function(t){var e=this.options.majorGridLines;return this.gridLineAngles(t,this.options.majorUnit,e.skip,e.step)},e.prototype.minorGridLineAngles=function(t,e){var i=this.options,r=i.minorGridLines,n=i.majorGridLines,o=e?this.intervals(i.majorUnit,n.skip,n.step):null;return this.gridLineAngles(t,i.minorUnit,r.skip,r.step,o)},e.prototype.plotBandSlot=function(t){return this.getSlot(t.from,t.to)},e.prototype.getSlot=function(t,e){var i=this.options,r=this.box,n=i.startAngle,o=Vl(t,i.min,i.max),s=Vl(e||o,o,i.max);if(i.reverse&&(o*=-1,s*=-1),(s=(540-s-n)%360)<(o=(540-o-n)%360)){var a=o;o=s,s=a}return new Xc(r.center(),0,r.height()/2,o,s-o)},e.prototype.slot=function(t,e){void 0===e&&(e=t);var i,r,n=this.options,o=360-n.startAngle,s=this.getSlot(t,e),a=Math.min(t,e),l=Math.max(t,e);return n.reverse?(i=a,r=l):(i=360-l,r=360-a),i=(i+o)%360,r=(r+o)%360,new oh([s.center.x,s.center.y],{startAngle:i,endAngle:r,radiusX:s.radius,radiusY:s.radius})},e.prototype.getValue=function(t){var e=this.options,i=this.box.center(),r=t.x-i.x,n=t.y-i.y,o=Math.round(Nl(Math.atan2(n,r))),s=e.startAngle;return e.reverse||(o*=-1,s*=-1),(o+s+360)%360},e.prototype.valueRange=function(){return{min:0,max:2*Math.PI}},e}(Bp);Zl(Kd,{type:"polar",startAngle:0,reverse:!1,majorUnit:60,min:0,max:360,labels:{margin:ma(10)},majorGridLines:{color:_s,visible:!0,width:1},minorGridLines:{color:"#aaa"}}),ha(Kd.prototype,Wd,{createPlotBands:Gd.prototype.createPlotBands,majorAngles:Gd.prototype.majorAngles,range:Nd.prototype.range,labelsCount:Nd.prototype.labelsCount,createAxisLabel:Nd.prototype.createAxisLabel});const Yd=Kd;var Jd={options:{majorGridLines:{visible:!0}},createPlotBands:function(){var t=this.options,e=t.majorGridLines.type,i=t.plotBands;void 0===i&&(i=[]);for(var r=this.plotArea.polarAxis,n=r.majorAngles(),o=r.box.center(),s=this._plotbandGroup=new ku({zIndex:-1}),a=0;a<i.length;a++){var l=i[a],c={fill:{color:l.color,opacity:l.opacity},stroke:{opacity:l.opacity}},h=this.getSlot(l.from,l.to,!0),u=new Xc(o,o.y-h.y2,o.y-h.y1,0,360),p=void 0;p=e===As?du.current.createRing(u,c):hu.fromPoints(this.plotBandPoints(u,n),c).close(),s.append(p)}this.appendVisual(s)},plotBandPoints:function(t,e){for(var i=[],r=[],n=[t.center.x,t.center.y],o=new mu(n,t.innerRadius),s=new mu(n,t.radius),a=0;a<e.length;a++)i.push(o.pointAt(e[a]+180)),r.push(s.pointAt(e[a]+180));return i.reverse(),i.push(i[0]),r.push(r[0]),r.concat(i)},createGridLines:function(t){var e=this.options,i=this.radarMajorGridLinePositions(),r=t.majorAngles(),n=t.box.center(),o=[];if(e.majorGridLines.visible&&(o=this.renderGridLines(n,i,r,e.majorGridLines)),e.minorGridLines.visible){var s=this.radarMinorGridLinePositions();Fl(o,this.renderGridLines(n,s,r,e.minorGridLines))}return o},renderGridLines:function(t,e,i,r){var n={stroke:{width:r.width,color:r.color,dashType:r.dashType}},o=r.skip;void 0===o&&(o=0);var s=r.step;void 0===s&&(s=0);for(var a=this.gridLinesVisual(),l=o;l<e.length;l+=s){var c=t.y-e[l];if(c>0){var h=new mu([t.x,t.y],c);if(r.type===As)a.append(new wu(h,n));else{for(var u=new hu(n),p=0;p<i.length;p++)u.lineTo(h.pointAt(i[p]+180));u.close(),a.append(u)}}}return a.children},getValue:function(t){var e=this.lineBox(),i=this.plotArea.polarAxis,r=i.majorAngles(),n=i.box.center(),o=t.distanceTo(n),s=o;if(this.options.majorGridLines.type!==As&&r.length>1){var a=t.x-n.x,l=t.y-n.y,c=(Nl(Math.atan2(l,a))+540)%360;r.sort((function(t,e){return Zd(t,c)-Zd(e,c)}));var h=90-Zd(r[0],r[1])/2,u=180-Zd(c,r[0])-h;s=o*(Math.sin(Wl(u))/Math.sin(Wl(h)))}return this.axisType().prototype.getValue.call(this,new Ec(e.x1,e.y2-s))}};function Zd(t,e){return 180-Math.abs(Math.abs(t-e)-180)}const Qd=Jd;var tf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.radarMajorGridLinePositions=function(){return this.getTickPositions(this.options.majorUnit)},e.prototype.radarMinorGridLinePositions=function(){var t=this.options,e=0;return t.majorGridLines.visible&&(e=t.majorUnit),this.getTickPositions(t.minorUnit,e)},e.prototype.axisType=function(){return t},e}(Nd);ha(tf.prototype,Qd);const ef=tf;var rf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.radarMajorGridLinePositions=function(){var t=[];return this.traverseMajorTicksPositions((function(e){t.push(e)}),this.options.majorGridLines),t},e.prototype.radarMinorGridLinePositions=function(){var t=[];return this.traverseMinorTicksPositions((function(e){t.push(e)}),this.options.minorGridLines),t},e.prototype.axisType=function(){return t},e}(Vd);ha(rf.prototype,Qd);const nf=rf;var of=function(t){function e(e){t.call(this),this.closed=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.process=function(t){var e=t.slice(0),i=[],r=this.closed,n=e.length;if(n>2&&(this.removeDuplicates(0,e),n=e.length),n<2||2===n&&e[0].equals(e[1]))return i;var o,s,a=e[0],l=e[1],c=e[2];for(i.push(new Fh(a));a.equals(e[n-1]);)r=!0,e.pop(),n--;if(2===n){var h=this.tangent(a,l,Ys,Js);return Hl(i).controlOut(this.firstControlPoint(h,a,l,Ys,Js)),i.push(new Fh(l,this.secondControlPoint(h,a,l,Ys,Js))),i}if(r){a=e[n-1],l=e[0],c=e[1];var u=this.controlPoints(a,l,c);o=u[1],s=u[0]}else{var p=this.tangent(a,l,Ys,Js);o=this.firstControlPoint(p,a,l,Ys,Js)}for(var d=o,f=0;f<=n-3;f++)if(this.removeDuplicates(f,e),f+3<=(n=e.length)){a=e[f],l=e[f+1],c=e[f+2];var g=this.controlPoints(a,l,c);Hl(i).controlOut(d),d=g[1];var m=g[0];i.push(new Fh(l,m))}if(r){a=e[n-2],l=e[n-1],c=e[0];var y=this.controlPoints(a,l,c);Hl(i).controlOut(d),i.push(new Fh(l,y[0])),Hl(i).controlOut(y[1]),i.push(new Fh(c,s))}else{var v=this.tangent(l,c,Ys,Js);Hl(i).controlOut(d),i.push(new Fh(c,this.secondControlPoint(v,l,c,Ys,Js)))}return i},e.prototype.removeDuplicates=function(t,e){for(;e[t+1]&&(e[t].equals(e[t+1])||e[t+1].equals(e[t+2]));)e.splice(t+1,1)},e.prototype.invertAxis=function(t,e,i){var r=!1;if(t.x===e.x)r=!0;else if(e.x===i.x)(e.y<i.y&&t.y<=e.y||i.y<e.y&&e.y<=t.y)&&(r=!0);else{var n=this.lineFunction(t,e),o=this.calculateFunction(n,i.x);t.y<=e.y&&i.y<=o||e.y<=t.y&&i.y>=o||(r=!0)}return r},e.prototype.isLine=function(t,e,i){var r=this.lineFunction(t,e),n=this.calculateFunction(r,i.x);return t.x===e.x&&e.x===i.x||Xl(n,1)===Xl(i.y,1)},e.prototype.lineFunction=function(t,e){var i=(e.y-t.y)/(e.x-t.x);return[t.y-i*t.x,i]},e.prototype.controlPoints=function(t,e,i){var r,n=Ys,o=Js,s=!1,a=!1;if(this.isLine(t,e,i))r=this.tangent(t,e,Ys,Js);else{var l={x:this.isMonotonicByField(t,e,i,Ys),y:this.isMonotonicByField(t,e,i,Js)};if(l.x&&l.y)r=this.tangent(t,i,Ys,Js),s=!0;else if(this.invertAxis(t,e,i)&&(n=Js,o=Ys),l[n])r=0;else r=.01*(i[o]<t[o]&&t[o]<=e[o]||t[o]<i[o]&&e[o]<=t[o]?sf((i[o]-t[o])*(e[n]-t[n])):-sf((i[n]-t[n])*(e[o]-t[o]))),a=!0}var c=this.secondControlPoint(r,t,e,n,o);if(a){var h=n;n=o,o=h}var u=this.firstControlPoint(r,e,i,n,o);return s&&(this.restrictControlPoint(t,e,c,r),this.restrictControlPoint(e,i,u,r)),[c,u]},e.prototype.restrictControlPoint=function(t,e,i,r){t.y<e.y?e.y<i.y?(i.x=t.x+(e.y-t.y)/r,i.y=e.y):i.y<t.y&&(i.x=e.x-(e.y-t.y)/r,i.y=t.y):i.y<e.y?(i.x=t.x-(t.y-e.y)/r,i.y=e.y):t.y<i.y&&(i.x=e.x+(t.y-e.y)/r,i.y=t.y)},e.prototype.tangent=function(t,e,i,r){var n,o=e[i]-t[i],s=e[r]-t[r];return n=0===o?0:s/o,n},e.prototype.isMonotonicByField=function(t,e,i,r){return i[r]>e[r]&&e[r]>t[r]||i[r]<e[r]&&e[r]<t[r]},e.prototype.firstControlPoint=function(t,e,i,r,n){var o=e[r],s=.333*(i[r]-o);return this.point(o+s,e[n]+s*t,r,n)},e.prototype.secondControlPoint=function(t,e,i,r,n){var o=e[r],s=i[r],a=.333*(s-o);return this.point(s-a,i[n]-a*t,r,n)},e.prototype.point=function(t,e,i,r){var n=new Nc;return n[i]=t,n[r]=e,n},e.prototype.calculateFunction=function(t,e){for(var i=t.length,r=0,n=0;n<i;n++)r+=Math.pow(e,n)*t[n];return r},e}(ml);function sf(t){return t<=0?-1:1}const af=of;var lf=function(t){function e(e){t.call(this),this._axis=e,this.options=e.options}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.value=function(t){var e=this._axis,i=e.getCategory?e.getCategory(t):e.getValue(t);return i},e.prototype.slot=function(t,e,i){return void 0===i&&(i=!0),this._axis.slot(t,e,i)},e.prototype.range=function(){return this._axis.range()},e.prototype.valueRange=function(){return this._axis.valueRange()},e}(ml);const cf=lf;function hf(t,e){for(var i=0;i<e.length;i++)if(e[i].options.name===t)return e[i].prepareUserOptions(),new cf(e[i])}var uf=function(t){this.visual=t.visual,this.chartsVisual=t.chartContainer.visual,this._pane=t};uf.prototype.findAxisByName=function(t){return hf(t,this._pane.axes)};const pf=uf;var df=function(t){function e(e){t.call(this),this._plotArea=e,this.visual=e.visual,this.backgroundVisual=e._bgVisual}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ml);const ff=df;function gf(t){for(var e=t.length,i=0,r=0;r<e;r++){na(t[r])&&i++}return i}var mf={min:function(t){for(var e=t.length,i=Bs,r=0;r<e;r++){var n=t[r];na(n)&&(i=Math.min(i,n))}return i===Bs?t[0]:i},max:function(t){for(var e=t.length,i=js,r=0;r<e;r++){var n=t[r];na(n)&&(i=Math.max(i,n))}return i===js?t[0]:i},sum:function(t){for(var e=t.length,i=0,r=0;r<e;r++){var n=t[r];na(n)&&(i+=n)}return i},sumOrNull:function(t){var e=null;return gf(t)&&(e=mf.sum(t)),e},count:function(t){for(var e=t.length,i=0,r=0;r<e;r++){var n=t[r];null!==n&&Ll(n)&&i++}return i},avg:function(t){var e=gf(t),i=t[0];return e>0&&(i=mf.sum(t)/e),i},first:function(t){for(var e=t.length,i=0;i<e;i++){var r=t[i];if(null!==r&&Ll(r))return r}return t[0]}};const yf=mf;function vf(t,e){return null===e?e:ka(t)(e)}var bf=function(t){function e(){t.call(this),this._valueFields={},this._otherFields={},this._nullValue={},this._undefinedValue={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.register=function(t,e,i){var r=this;void 0===e&&(e=[Xs]),void 0===i&&(i={});for(var n=0;n<t.length;n++){var o=t[n];r._valueFields[o]=e,r._otherFields[o]=i,r._nullValue[o]=r._makeValue(e,null),r._undefinedValue[o]=r._makeValue(e,void 0)}},e.prototype.canonicalFields=function(t){return this.valueFields(t).concat(this.otherFields(t))},e.prototype.valueFields=function(t){return this._valueFields[t.type]||[Xs]},e.prototype.otherFields=function(t){return this._otherFields[t.type]||[Xs]},e.prototype.bindPoint=function(t,e,i){var r,n,o=t.data,s=Ll(i)?i:o[e],a={valueFields:{value:s}},l=this.valueFields(t),c=this._otherFields[t.type];if(null===s)n=this._nullValue[t.type];else if(Ll(s)){if(Array.isArray(s)){var h=s.slice(l.length);n=this._bindFromArray(s,l),r=this._bindFromArray(h,c)}else if("object"==typeof s){var u=this.sourceFields(t,l),p=this.sourceFields(t,c);n=this._bindFromObject(s,l,u),r=this._bindFromObject(s,c,p)}}else n=this._undefinedValue[t.type];return Ll(n)&&(1===l.length?a.valueFields.value=n[l[0]]:a.valueFields=n),a.fields=r||{},a},e.prototype._makeValue=function(t,e){for(var i={},r=t.length,n=0;n<r;n++){i[t[n]]=e}return i},e.prototype._bindFromArray=function(t,e){var i={};if(e)for(var r=Math.min(e.length,t.length),n=0;n<r;n++)i[e[n]]=t[n];return i},e.prototype._bindFromObject=function(t,e,i){void 0===i&&(i=e);var r={};if(e)for(var n=e.length,o=0;o<n;o++){var s=e[o],a=i[o];null!==a&&(r[s]=vf(a,t))}return r},e.prototype.sourceFields=function(t,e){var i=[];if(e)for(var r=e.length,n=0;n<r;n++){var o=e[n],s=o===Xs?"field":o+"Field";i.push(null!==t[s]?t[s]||o:null)}return i},e}(ml);bf.current=new bf;const wf=bf;var xf=/percent(?:\w*)\((\d+)\)/,Sf=new RegExp("^stddev(?:\\((\\d+(?:\\.\\d+)?)\\))?$"),kf=function(t){function e(e,i,r){t.call(this),this.initGlobalRanges(e,i,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initGlobalRanges=function(t,e,i){var r=e.data,n=Sf.exec(t);if(n){this.valueGetter=this.createValueGetter(e,i);var o=this.getAverage(r),s=this.getStandardDeviation(r,o,!1),a=n[1]?parseFloat(n[1]):1,l={low:o.value-s*a,high:o.value+s*a};this.globalRange=function(){return l}}else if(t.indexOf&&t.indexOf("stderr")>=0){this.valueGetter=this.createValueGetter(e,i);var c=this.getStandardError(r,this.getAverage(r));this.globalRange=function(t){return{low:t-c,high:t+c}}}},e.prototype.createValueGetter=function(t,e){var i,r=t.data,n=wf.current,o=n.valueFields(t),s=Ll(r[0])?r[0]:{};if(Zs(s))i=ka("["+(e?o.indexOf(e):0)+"]");else if(na(s))i=ka();else if(typeof s===Us){i=ka(n.sourceFields(t,o)[o.indexOf(e)])}return i},e.prototype.getErrorRange=function(t,e){var i,r,n;if(!Ll(e))return null;if(this.globalRange)return this.globalRange(t);if(Zs(e))i=t-e[0],r=t+e[1];else if(na(n=parseFloat(e)))i=t-n,r=t+n;else{if(!(n=xf.exec(e)))throw new Error("Invalid ErrorBar value: "+e);var o=t*(parseFloat(n[1])/100);i=t-Math.abs(o),r=t+Math.abs(o)}return{low:i,high:r}},e.prototype.getStandardError=function(t,e){return this.getStandardDeviation(t,e,!0)/Math.sqrt(e.count)},e.prototype.getStandardDeviation=function(t,e,i){for(var r=t.length,n=i?e.count-1:e.count,o=0,s=0;s<r;s++){var a=this.valueGetter(t[s]);na(a)&&(o+=Math.pow(a-e.value,2))}return Math.sqrt(o/n)},e.prototype.getAverage=function(t){for(var e=t.length,i=0,r=0,n=0;n<e;n++){var o=this.valueGetter(t[n]);na(o)&&(i+=o,r++)}return{value:i/r,count:r}},e}(ml);const Cf=kf;var Af=Na.browser||{},_f=600,Tf="fadeIn",Of=.8,Ef=Af.msie?.001:0,Mf="errorLow",Pf="errorHigh",If="zero",Df="interpolate",Ff="above",Rf="below",Lf="smooth",Nf="step",Bf="area",jf="bar",zf="boxPlot",Uf="bubble",$f="bullet",Hf="candlestick",Vf="column",qf="donut",Wf="funnel",Xf="heatmap",Gf="horizontalWaterfall",Kf="line",Yf="ohlc",Jf="pie",Zf="polarArea",Qf="polarLine",tg="polarScatter",eg="radarArea",ig="radarColumn",rg="radarLine",ng="rangeArea",og="rangeBar",sg="rangeColumn",ag="scatter",lg="scatterLine",cg="verticalArea",hg="verticalBoxPlot",ug="verticalBullet",pg="verticalLine",dg="verticalRangeArea",fg="waterfall",gg=[jf,Vf,Yf,Hf,zf,hg,$f,sg,og,fg,Gf],mg="seriesHover",yg="plotAreaHover",vg="plotAreaLeave",bg="drag",wg="dragEnd",xg="dragStart",Sg="zoomStart",kg="zoom",Cg="zoomEnd",Ag="selectStart",_g="select",Tg="selectEnd",Og="showTooltip",Eg="hideTooltip",Mg="log",Pg="category",Ig="insideEnd",Dg="outsideEnd",Fg="DOMMouseScroll mousewheel",Rg=function(t){function e(e,i,r,n,o,s){t.call(this,s),this.low=e,this.high=i,this.isVertical=r,this.chart=n,this.series=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e,i=this.options.endCaps,r=this.isVertical,n=this.getAxis().getSlot(this.low,this.high),o=t.center(),s=this.getCapsWidth(t,r),a=r?o.x:o.y,l=a-s,c=a+s;r?(e=[new Ec(o.x,n.y1),new Ec(o.x,n.y2)],i&&e.push(new Ec(l,n.y1),new Ec(c,n.y1),new Ec(l,n.y2),new Ec(c,n.y2)),this.box=new Vc(l,n.y1,c,n.y2)):(e=[new Ec(n.x1,o.y),new Ec(n.x2,o.y)],i&&e.push(new Ec(n.x1,l),new Ec(n.x1,c),new Ec(n.x2,l),new Ec(n.x2,c)),this.box=new Vc(n.x1,l,n.x2,c)),this.linePoints=e},e.prototype.getCapsWidth=function(t,e){var i=e?t.width():t.height();return Math.min(Math.floor(i/2),4)||4},e.prototype.createVisual=function(){var t=this,e=this.options,i=e.visual;i?this.visual=i({low:this.low,high:this.high,rect:this.box.toRect(),sender:this.getSender(),options:{endCaps:e.endCaps,color:e.color,line:e.line},createVisual:function(){t.createDefaultVisual();var e=t.visual;return delete t.visual,e}}):this.createDefaultVisual()},e.prototype.createDefaultVisual=function(){var e=this.options,i=this.linePoints,r={stroke:{color:e.color,width:e.line.width,dashType:e.line.dashType}};t.prototype.createVisual.call(this);for(var n=0;n<i.length;n+=2){var o=new hu(r).moveTo(i[n].x,i[n].y).lineTo(i[n+1].x,i[n+1].y);ia(o),this.visual.append(o)}},e}(Ru);Zl(Rg,{animation:{type:Tf,delay:_f},endCaps:!0,line:{width:2},zIndex:1});const Lg=Rg;var Ng=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getAxis=function(){return this.chart.seriesValueAxis(this.series)},e}(Lg);const Bg=Ng;function jg(t,e,i,r){void 0===i&&(i={}),void 0===r&&(r=!1);var n=i.defaults=i.defaults||{},o=i.depth=i.depth||0,s=!1;if(i.excluded=i.excluded||[],o>5)return null;for(var a in t)if(!Oa(a,i.excluded)&&t.hasOwnProperty(a)){var l=t[a];aa(l)?(s=!0,r||(t[a]=Kl(l(e),n[a]))):ua(l)&&(r||(i.defaults=n[a]),i.depth++,s=jg(l,e,i,r)||s,i.depth--)}return s}function zg(t){for(var e=t.length,i=0,r=0;r<e;r++)i=Math.max(i,t[r].data.length);return i}var Ug=function(t){function e(e,i){t.call(this,i),this.plotArea=e,this.chartService=e.chartService,this.categoryAxis=e.seriesCategoryAxis(i.series[0]),this.valueAxisRanges={},this.points=[],this.categoryPoints=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[],this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.traverseDataPoints(this.addValue.bind(this))},e.prototype.pointOptions=function(t,e){var i=this.seriesOptions[e];if(!i){var r=this.pointType().prototype.defaults;this.seriesOptions[e]=i=ha({},r,{vertical:!this.options.invertAxes},t)}return i},e.prototype.plotValue=function(t){if(!t)return 0;if(this.options.isStacked100&&na(t.value)){for(var e=t.categoryIx,i=this.categoryPoints[e],r=[],n=0,o=0;o<i.length;o++){var s=i[o];if(s){var a=t.series.stack,l=s.series.stack;if(a&&l&&a.group!==l.group)continue;na(s.value)&&(n+=Math.abs(s.value),r.push(Math.abs(s.value)))}}if(n>0)return t.value/n}return t.value},e.prototype.plotRange=function(t,e){void 0===e&&(e=0);var i=this.categoryPoints[t.categoryIx];if(this.options.isStacked){for(var r=this.plotValue(t),n=r>=0,o=e,s=!1,a=0;a<i.length;a++){var l=i[a];if(t===l)break;var c=t.series.stack,h=l.series.stack;if(c&&h){if(typeof c===qs&&c!==h)continue;if(c.group&&c.group!==h.group)continue}var u=this.plotValue(l);(u>=0&&n||u<0&&!n)&&(o+=u,r+=u,s=!0,this.options.isStacked100&&(r=Math.min(r,1)))}return s&&(o-=e),[o,r]}var p=t.series,d=this.seriesValueAxis(p),f=this.categoryAxisCrossingValue(d);return[f,sa(t.value)?t.value:f]},e.prototype.stackLimits=function(t,e){for(var i=Bs,r=js,n=0;n<this.categoryPoints.length;n++){var o=this.categoryPoints[n];if(o)for(var s=0;s<o.length;s++){var a=o[s];if(a&&(a.series.stack===e||a.series.axis===t)){var l=this.plotRange(a,0)[1];Ll(l)&&isFinite(l)&&(r=Math.max(r,l),i=Math.min(i,l))}}}return{min:i,max:r}},e.prototype.updateStackRange=function(){var t=this,e=this.options,i=e.isStacked,r=e.series,n={};if(i)for(var o=0;o<r.length;o++){var s=r[o],a=s.axis,l=a+s.stack,c=n[l];if(!c){c=t.stackLimits(a,s.stack);var h=t.errorTotals;h&&(h.negative.length&&(c.min=Math.min(c.min,Ql(h.negative).min)),h.positive.length&&(c.max=Math.max(c.max,Ql(h.positive).max))),c.min!==Bs||c.max!==js?n[l]=c:c=null}c&&(t.valueAxisRanges[a]=c)}},e.prototype.addErrorBar=function(t,e,i){var r,n=t.value,o=t.series,s=t.seriesIx,a=t.options.errorBars,l=e.fields.errorLow,c=e.fields.errorHigh;na(l)&&na(c)?r={low:l,high:c}:a&&Ll(a.value)&&(this.seriesErrorRanges=this.seriesErrorRanges||[],this.seriesErrorRanges[s]=this.seriesErrorRanges[s]||new Cf(a.value,o,Xs),r=this.seriesErrorRanges[s].getErrorRange(n,a.value)),r&&(t.low=r.low,t.high=r.high,this.addPointErrorBar(t,i))},e.prototype.addPointErrorBar=function(t,e){var i=!this.options.invertAxes,r=t.options.errorBars,n=t.series,o=t.low,s=t.high;if(this.options.isStacked){var a=this.stackedErrorRange(t,e);o=a.low,s=a.high}else{var l={categoryIx:e,series:n};this.updateRange({value:o},l),this.updateRange({value:s},l)}var c=new Bg(o,s,i,this,n,r);t.errorBars=[c],t.append(c)},e.prototype.stackedErrorRange=function(t,e){var i=this.plotRange(t,0)[1]-t.value,r=t.low+i,n=t.high+i;return this.errorTotals=this.errorTotals||{positive:[],negative:[]},r<0&&(this.errorTotals.negative[e]=Math.min(this.errorTotals.negative[e]||0,r)),n>0&&(this.errorTotals.positive[e]=Math.max(this.errorTotals.positive[e]||0,n)),{low:r,high:n}},e.prototype.addValue=function(t,e){var i=e.categoryIx,r=e.series,n=e.seriesIx,o=this.categoryPoints[i];o||(this.categoryPoints[i]=o=[]);var s=this.seriesPoints[n];s||(this.seriesPoints[n]=s=[]);var a=this.createPoint(t,e);a&&(Object.assign(a,e),a.owner=this,a.noteText=t.fields.noteText,Ll(a.dataItem)||(a.dataItem=r.data[i]),this.addErrorBar(a,t,i)),this.points.push(a),s.push(a),o.push(a),this.updateRange(t.valueFields,e)},e.prototype.evalPointOptions=function(t,e,i,r,n,o){var s={defaults:n._defaults,excluded:["data","aggregate","_events","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint"]},a=this._evalSeries[o];Ll(a)||(this._evalSeries[o]=a=jg(t,{},s,!0));var l=t;return a&&jg(l=ha({},l),{value:e,category:i,index:r,series:n,dataItem:n.data[r]},s),l},e.prototype.updateRange=function(t,e){var i=e.series.axis,r=t.value,n=this.valueAxisRanges[i];isFinite(r)&&null!==r&&((n=this.valueAxisRanges[i]=n||{min:Bs,max:js}).min=Math.min(n.min,r),n.max=Math.max(n.max,r))},e.prototype.seriesValueAxis=function(t){var e=this.plotArea,i=t.axis,r=i?e.namedValueAxes[i]:e.valueAxis;if(!r)throw new Error("Unable to locate value axis with name "+i);return r},e.prototype.reflow=function(t){var e=this,i=this.categorySlots=[],r=this.points,n=this.categoryAxis,o=0;this.traverseDataPoints((function(t,s){var a=s.categoryIx,l=s.series,c=e.seriesValueAxis(l),h=r[o++],u=i[a];if(u||(i[a]=u=e.categorySlot(n,a,c)),h){var p=e.plotRange(h,c.startValue()),d=e.valueSlot(c,p);if(d){var f=e.pointSlot(u,d);h.aboveAxis=e.aboveAxis(h,c),h.stackValue=p[1],e.options.isStacked100&&(h.percentage=e.plotValue(h)),e.reflowPoint(h,f)}else h.visible=!1}})),this.reflowCategories(i),!this.options.clip&&this.options.limitPoints&&this.points.length&&this.limitPoints(),this.box=t},e.prototype.valueSlot=function(t,e){return t.getSlot(e[0],e[1],!this.options.clip)},e.prototype.limitPoints=function(){for(var t=this.categoryPoints,e=t[0].concat(Hl(t)),i=0;i<e.length;i++)e[i]&&this.limitPoint(e[i])},e.prototype.limitPoint=function(t){var e=this.categoryAxis.limitSlot(t.box);e.equals(t.box)||t.reflow(e)},e.prototype.aboveAxis=function(t,e){var i=this.categoryAxisCrossingValue(e),r=t.value;return e.options.reverse?r<i:r>=i},e.prototype.categoryAxisCrossingValue=function(t){var e=this.categoryAxis,i=t.options;return[].concat(i.axisCrossingValues||i.axisCrossingValue)[e.axisIndex||0]||0},e.prototype.reflowPoint=function(t,e){t.reflow(e)},e.prototype.reflowCategories=function(){},e.prototype.pointSlot=function(t,e){var i=this.options.invertAxes,r=i?e:t,n=i?t:e;return new Vc(r.x1,n.y1,r.x2,n.y2)},e.prototype.categorySlot=function(t,e){return t.getSlot(e)},e.prototype.traverseDataPoints=function(t){for(var e=this,i=this.options.series,r=zg(i),n=i.length,o=0;o<n;o++)e._outOfRangeCallback(i[o],"_outOfRangeMinPoint",o,t);for(var s=0;s<r;s++)for(var a=0;a<n;a++){var l=i[a],c=e.categoryAxis.categoryAt(s);t(e._bindPoint(l,a,s),{category:c,categoryIx:s,categoriesCount:r,series:l,seriesIx:a})}for(var h=0;h<n;h++)e._outOfRangeCallback(i[h],"_outOfRangeMaxPoint",h,t)},e.prototype._outOfRangeCallback=function(t,e,i,r){var n=t[e];if(n){var o=n.categoryIx;r(this._bindPoint(t,i,o,n.item),{category:n.category,categoryIx:o,series:t,seriesIx:i,dataItem:n.item})}},e.prototype._bindPoint=function(t,e,i,r){this._bindCache||(this._bindCache=[]);var n=this._bindCache[e];n||(n=this._bindCache[e]=[]);var o=n[i];return o||(o=n[i]=wf.current.bindPoint(t,i,r)),o},e.prototype.formatPointValue=function(t,e){return null===t.value?"":this.chartService.format.auto(e,t.value)},e.prototype.pointValue=function(t){return t.valueFields.value},e}(Ru);Zl(Ug,{series:[],invertAxes:!1,isStacked:!1,clip:!0,limitPoints:!0});const $g=Ug;var Hg={click:function(t,e){return t.trigger("seriesClick",this.eventArgs(e))},hover:function(t,e){return t.trigger(mg,this.eventArgs(e))},over:function(t,e){return t.trigger("seriesOver",this.eventArgs(e))},out:function(t,e){return t.trigger("seriesLeave",this.eventArgs(e))},eventArgs:function(t){return{value:this.value,percentage:this.percentage,stackValue:this.stackValue,category:this.category,series:this.series,dataItem:this.dataItem,runningTotal:this.runningTotal,total:this.total,element:Ul(t),originalEvent:t,point:this}}};const Vg=Hg;var qg={createNote:function(){var t=this.options.notes,e=this.noteText||t.label.text;!1!==t.visible&&Ll(e)&&null!==e&&(this.note=new wp({value:this.value,text:e,dataItem:this.dataItem,category:this.category,series:this.series},this.options.notes,this.owner.chartService),this.append(this.note))}};const Wg=qg;var Xg=function(t){function e(e,i){t.call(this),this.value=e,this.options=i,this.aboveAxis=Kl(this.options.aboveAxis,!0),this.tooltipTracking=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.options,e=t.markers,i=t.labels;if(!this._rendered){if(this._rendered=!0,e.visible&&e.size&&(this.marker=this.createMarker(),this.append(this.marker)),i.visible){var r=wa(i),n=this.pointData(),o=this.value;r?o=r(n):i.format&&(o=this.formatValue(i.format)),this.label=new dp(o,ha({align:Os,vAlign:Os,margin:{left:5,right:5},zIndex:Kl(i.zIndex,this.series.zIndex)},i),n),this.append(this.label)}this.createNote(),this.errorBar&&this.append(this.errorBar)}},e.prototype.markerBorder=function(){var t=this.options.markers,e=t.background,i=ha({color:this.color},t.border);return Ll(i.color)||(i.color=new yc(e).brightness(Of).toHex()),i},e.prototype.createVisual=function(){},e.prototype.createMarker=function(){var t=this.options.markers;return new ju({type:t.type,width:t.size,height:t.size,rotation:t.rotation,background:t.background,border:this.markerBorder(),opacity:this.series.opacity||t.opacity,zIndex:Kl(t.zIndex,this.series.zIndex),animation:t.animation,visual:t.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category})},e.prototype.markerBox=function(){return this.marker||(this.marker=this.createMarker(),this.marker.reflow(this._childBox)),this.marker.box},e.prototype.reflow=function(t){var e=this.options,i=this.aboveAxis,r=e.vertical;this.render(),this.box=t;var n=t.clone();if(r?i?n.y1-=n.height():n.y2+=n.height():i?n.x1+=n.width():n.x2-=n.width(),this._childBox=n,this.marker&&this.marker.reflow(n),this.reflowLabel(n),this.errorBars)for(var o=0;o<this.errorBars.length;o++)this.errorBars[o].reflow(n);if(this.note){var s=this.markerBox();if(!e.markers.visible||!e.markers.size){var a=s.center();s=new Vc(a.x,a.y,a.x,a.y)}this.note.reflow(s)}},e.prototype.reflowLabel=function(t){var e=this.options,i=this.label,r=e.labels.position;i&&(r=(r=r===Ff?Ws:r)===Rf?Ts:r,i.reflow(t),i.box.alignTo(this.markerBox(),r),i.reflow(i.box))},e.prototype.createHighlight=function(){var t=this.options.highlight.markers,e=this.markerBorder().color,i=this.options.markers,r=i.size+(i.border.width||0)+(t.border.width||0),n=new ju({type:i.type,width:r,height:r,rotation:i.rotation,background:t.color||e,border:{color:t.border.color,width:t.border.width,opacity:Kl(t.border.opacity,1)},opacity:Kl(t.opacity,1)});return n.reflow(this._childBox),n.getElement()},e.prototype.highlightVisual=function(){return(this.marker||{}).visual},e.prototype.highlightVisualArgs=function(){var t,e,i=this.marker;if(i)e=i.paddingBox.toRect(),t=i.visual;else{var r=this.options.markers.size,n=r/2,o=this.box.center();e=new Uc([o.x-n,o.y-n],[r,r])}return{options:this.options,rect:e,visual:t}},e.prototype.tooltipAnchor=function(){var t=this.markerBox(),e=this.owner.pane.clipBox();if(!e||e.overlaps(t)){var i,r,n=t.x2+5;return this.aboveAxis?(i=t.y1,r=Ts):(i=t.y2,r=Ws),{point:new Ec(n,i),align:{horizontal:"left",vertical:r}}}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.overlapsBox=function(t){return this.markerBox().overlaps(t)},e.prototype.unclipElements=function(){this.label&&(this.label.options.noclip=!0),this.note&&(this.note.options.noclip=!0)},e.prototype.pointData=function(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,series:this.series}},e}(Ru);Xg.prototype.defaults={vertical:!0,markers:{visible:!0,background:Gs,size:8,type:Es,border:{width:2},opacity:1},labels:{visible:!1,position:Ff,margin:ma(3),padding:ma(4),animation:{type:Tf,delay:_f}},notes:{label:{}},highlight:{markers:{border:{color:"#fff",width:2}},zIndex:100},errorBars:{line:{width:1}}},ha(Xg.prototype,Vg),ha(Xg.prototype,Wg);const Gg=Xg;var Kg=function(t){function e(e,i,r){t.call(this),this.linePoints=e,this.series=i,this.seriesIx=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.points=function(){return this.toGeometryPoints(this.linePoints)},e.prototype.toGeometryPoints=function(t){for(var e=[],i=0,r=t.length;i<r;i++)t[i]&&!1!==t[i].visible&&e.push(t[i]._childBox.toRect().center());return e},e.prototype.createVisual=function(){var t=this,e=this.series.visual;e?(this.visual=e({points:this.toGeometryPoints(this.linePoints),series:this.series,sender:this.getSender(),createVisual:function(){return t.segmentVisual(),t.visual}}),this.visual&&!Ll(this.visual.options.zIndex)&&(this.visual.options.zIndex=this.series.zIndex)):this.segmentVisual()},e.prototype.segmentVisual=function(){var t=this.options,e=this.series,i=e.color,r=e._defaults;aa(i)&&r&&(i=r.color);var n=hu.fromPoints(this.points(),{stroke:{color:i,width:e.width,opacity:e.opacity,dashType:e.dashType},zIndex:e.zIndex});t.closed&&n.close(),this.visual=n},e.prototype.aliasFor=function(t,e){return this.parent.getNearestPoint(e.x,e.y,this.seriesIx)},e}(Ru);Zl(Kg,{closed:!1});const Yg=Kg;var Jg={calculateStepPoints:function(t){for(var e=this.parent.plotArea.seriesCategoryAxis(this.series).options,i=e.justified,r=e.vertical,n=e.reverse,o=r?Ys:Js,s=r?Js:Ys,a=n?2:1,l=a,c=Zg(t[0],o,a,s,l),h=[c],u=1;u<t.length;u++){var p=Zg(t[u],o,a,s,l);if(c[o]!==p[o]){var d=new Nc;d[o]=c[o],d[s]=p[s],h.push(d,p)}c=p}return i?c!==Hl(h)&&h.push(c):h.push(Zg(Hl(t),o,a,s,n?1:2)),h}};function Zg(t,e,i,r,n){var o=t.box,s=new Nc;return s[e]=o[e+i],s[r]=o[r+n],s}const Qg=Jg;var tm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.points=function(){return this.calculateStepPoints(this.linePoints)},e}(Yg);ha(tm.prototype,Qg);const em=tm;var im=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.segmentVisual=function(){var t=this.series,e=t._defaults,i=t.color;aa(i)&&e&&(i=e.color);var r=new af(this.options.closed).process(this.points()),n=new hu({stroke:{color:i,width:t.width,opacity:t.opacity,dashType:t.dashType},zIndex:t.zIndex});n.segments.push.apply(n.segments,r),this.visual=n},e}(Yg);const rm=im;var nm={renderSegments:function(){var t,e=this,i=this.options,r=this.seriesPoints,n=i.series,o=r.length;this._segments=[];for(var s=0;s<o;s++){for(var a=n[s],l=e.sortPoints(r[s]),c=l.length,h=[],u=0;u<c;u++){var p=l[u];p?h.push(p):e.seriesMissingValues(a)!==Df&&(h.length>1&&(t=e.createSegment(h,a,s,t),e._addSegment(t)),h=[])}h.length>1&&(t=e.createSegment(h,a,s,t),e._addSegment(t))}this.children.unshift.apply(this.children,this._segments)},_addSegment:function(t){this._segments.push(t),t.parent=this},sortPoints:function(t){return t},seriesMissingValues:function(t){var e=t.missingValues;return!e&&this.options.isStacked?If:e||Df},getNearestPoint:function(t,e,i){for(var r,n=new Ec(t,e),o=this.seriesPoints[i],s=Bs,a=0;a<o.length;a++){var l=o[a];if(l&&Ll(l.value)&&null!==l.value&&!1!==l.visible){var c=l.box.center().distanceTo(n);c<s&&(r=l,s=c)}}return r}};const om=nm;var sm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){this._setEnd(this.options.box.x1)},e.prototype.step=function(t){var e=this.options.box;this._setEnd(Ma(e.x1,e.x2,t))},e.prototype._setEnd=function(t){var e=this.element,i=e.segments,r=i[1].anchor(),n=i[2].anchor();e.suspend(),r.setX(t),e.resume(),n.setX(t)},e}(Du);Zl(sm,{duration:_f}),Pu.current.register("clip",sm);const am=sm;function lm(t){for(var e=0;e<t.length;e++)if(Ll(t[e].zIndex))return!0}var cm={createAnimation:function(){var t=this.getRoot();if(t&&!1!==(t.options||{}).transitions){var e=t.size(),i=hu.fromRect(e.toRect());this.visual.clip(i),this.animation=new am(i,{box:e}),lm(this.options.series)&&this._setChildrenAnimation(i)}},_setChildrenAnimation:function(t){for(var e=this.animationPoints(),i=0;i<e.length;i++){var r=e[i];r&&r.visual&&Ll(r.visual.options.zIndex)&&r.visual.clip(t)}}};const hm=cm;var um=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.updateStackRange(),this.renderSegments()},e.prototype.pointType=function(){return Gg},e.prototype.createPoint=function(t,e){var i=e.categoryIx,r=e.category,n=e.series,o=e.seriesIx,s=this.seriesMissingValues(n),a=t.valueFields.value;if(!Ll(a)||null===a){if(s!==If)return null;a=0}var l=this.pointOptions(n,o);l=this.evalPointOptions(l,a,r,i,n,o);var c=t.fields.color||n.color;aa(n.color)&&(c=l.color);var h=new Gg(a,l);return h.color=c,this.append(h),h},e.prototype.plotRange=function(t){var e=this.plotValue(t);if(this.options.isStacked)for(var i=t.categoryIx,r=this.categoryPoints[i],n=0;n<r.length;n++){var o=r[n];if(t===o)break;e+=this.plotValue(o),this.options.isStacked100&&(e=Math.min(e,1))}return[e,e]},e.prototype.createSegment=function(t,e,i){var r=e.style;return new(r===Nf?em:r===Lf?rm:Yg)(t,e,i)},e.prototype.animationPoints=function(){for(var t=this.points,e=[],i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e.concat(this._segments)},e.prototype.supportsPointInactiveOpacity=function(){return!1},e}($g);ha(um.prototype,om,hm);const pm=um;var dm=function(t){function e(e,i,r,n,o){t.call(this,e,i,r),this.prevSegment=n,this.stackPoints=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createVisual=function(){var t=this.series,e=t._defaults,i=t.line||{},r=t.color;aa(r)&&e&&(r=e.color),this.visual=new ku({zIndex:t.zIndex}),this.createFill({fill:{color:r,opacity:t.opacity},stroke:null}),i.width>0&&!1!==i.visible&&this.createStroke({stroke:ha({color:r,opacity:t.opacity,lineCap:"butt"},i)})},e.prototype.strokeSegments=function(){var t=this._strokeSegments;return t||(t=this._strokeSegments=this.createStrokeSegments()),t},e.prototype.createStrokeSegments=function(){return this.segmentsFromPoints(this.points())},e.prototype.stackSegments=function(){return this.prevSegment?this.prevSegment.createStackSegments(this.stackPoints):this.createStackSegments(this.stackPoints)},e.prototype.createStackSegments=function(t){return this.segmentsFromPoints(this.toGeometryPoints(t)).reverse()},e.prototype.segmentsFromPoints=function(t){return t.map((function(t){return new Fh(t)}))},e.prototype.createStroke=function(t){var e=new hu(t);e.segments.push.apply(e.segments,this.strokeSegments()),this.visual.append(e)},e.prototype.hasStackSegment=function(){return this.prevSegment||this.stackPoints&&this.stackPoints.length},e.prototype.createFill=function(t){var e=this.strokeSegments(),i=e.slice(0),r=this.hasStackSegment();if(r){var n=this.stackSegments();Fl(i,n)}var o=new hu(t);o.segments.push.apply(o.segments,i),!r&&e.length>1&&this.fillToAxes(o),this.visual.append(o)},e.prototype.fillToAxes=function(t){var e=this.parent,i=e.options.invertAxes,r=e.seriesValueAxis(this.series),n=e.categoryAxisCrossingValue(r),o=r.getSlot(n,n,!0),s=this.strokeSegments(),a=s[0].anchor(),l=Hl(s).anchor(),c=i?o.x1:o.y1;i?t.lineTo(c,l.y).lineTo(c,a.y):t.lineTo(l.x,c).lineTo(a.x,c)},e}(Yg);const fm=dm;var gm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){return this.segmentsFromPoints(this.calculateStepPoints(this.linePoints))},e.prototype.createStackSegments=function(t){return this.segmentsFromPoints(this.calculateStepPoints(t)).reverse()},e}(fm);ha(gm.prototype,Qg);const mm=gm;var ym=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){var t=new af(this.options.closed),e=this.points();return t.process(e)},e.prototype.createStackSegments=function(){for(var t=this.strokeSegments(),e=[],i=t.length-1;i>=0;i--){var r=t[i];e.push(new Fh(r.anchor(),r.controlOut(),r.controlIn()))}return e},e}(fm);const vm=ym;var bm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createSegment=function(t,e,i,r){var n,o,s=this.options.isStacked,a=(e.line||{}).style;s&&i>0&&r&&("gap"!==this.seriesMissingValues(e)?(o=r.linePoints,n=r):o=this._gapStackPoints(t,i,a));return new(a===Nf?mm:a===Lf?vm:fm)(t,e,i,n,o)},e.prototype.reflow=function(e){t.prototype.reflow.call(this,e);var i=this._stackPoints;if(i)for(var r=0;r<i.length;r++){var n=i[r],o=this.categoryAxis.getSlot(n.categoryIx);n.reflow(o)}},e.prototype._gapStackPoints=function(t,e,i){var r=this,n=this.seriesPoints,o=t[0].categoryIx,s=t.length;o<0&&(o=0,s--);var a=o+s,l=this.seriesOptions[0]._outOfRangeMinPoint?1:0,c=[];this._stackPoints=this._stackPoints||[];for(var h=o;h<a;h++){var u=h+l,p=e,d=void 0;do{d=n[--p][u]}while(p>0&&!d);if(d)i!==Nf&&h>o&&!n[p][u-1]&&c.push(r._previousSegmentPoint(h,u,u-1,p)),c.push(d),i!==Nf&&h+1<a&&!n[p][u+1]&&c.push(r._previousSegmentPoint(h,u,u+1,p));else{var f=r._createGapStackPoint(h);r._stackPoints.push(f),c.push(f)}}return c},e.prototype._previousSegmentPoint=function(t,e,i,r){for(var n,o=this.seriesPoints,s=r;s>0&&!n;)n=o[--s][i];return n?n=o[s][e]:(n=this._createGapStackPoint(t),this._stackPoints.push(n)),n},e.prototype._createGapStackPoint=function(t){var e=this.pointOptions({},0),i=new Gg(0,e);return i.categoryIx=t,i.series={},i},e.prototype.seriesMissingValues=function(t){return t.missingValues||If},e.prototype.supportsPointInactiveOpacity=function(){return!1},e}(pm);const wm=bm;var xm=function(t){function e(){t.call(this),this.axisRanges={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(t){var e=this.axisRanges;for(var i in t){var r=t[i],n=e[i];e[i]=n=n||{min:Bs,max:js},n.min=Math.min(n.min,r.min),n.max=Math.max(n.max,r.max)}},e.prototype.reset=function(t){this.axisRanges[t]=void 0},e.prototype.query=function(t){return this.axisRanges[t]},e}(ml);const Sm=xm;var km=function(t){function e(e,i,r){t.call(this,i),this.textBox=new dp(e,this.options,r),this.append(this.textBox)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createVisual=function(){this.textBox.options.noclip=this.options.noclip},e.prototype.reflow=function(t){var e=this.options,i=e.vertical,r=e.aboveAxis,n=this.children[0],o=n.options,s=n.box,a=n.options.padding,l=t;o.align=i?Os:Ns,o.vAlign=i?Ws:Os,e.position===Ig?i?(o.vAlign=Ws,!r&&s.height()<t.height()&&(o.vAlign=Ts)):o.align=r?Hs:Ns:e.position===Os?(o.vAlign=Os,o.align=Os):"insideBase"===e.position?i?o.vAlign=r?Ts:Ws:o.align=r?Ns:Hs:e.position===Dg&&(i?l=r?new Vc(t.x1,t.y1-s.height(),t.x2,t.y1):new Vc(t.x1,t.y2,t.x2,t.y2+s.height()):(o.align=Os,l=r?new Vc(t.x2,t.y1,t.x2+s.width(),t.y2):new Vc(t.x1-s.width(),t.y1,t.x1,t.y2))),e.rotation||(i?a.left=a.right=(l.width()-n.contentBox.width())/2:a.top=a.bottom=(l.height()-n.contentBox.height())/2),n.reflow(l)},e.prototype.alignToClipBox=function(t){var e=this.options.vertical?Js:Ys,i=e+"1",r=e+"2",n=this.children[0],o=this.parent.box;if(o[i]<t[i]||t[r]<o[r]){var s=n.paddingBox.clone();s[i]=Math.max(o[i],t[i]),s[r]=Math.min(o[r],t[r]),this.reflow(s)}},e}(Ru);Zl(km,{position:Dg,margin:ma(3),padding:ma(4),color:_s,background:"",border:{width:1,color:""},aboveAxis:!0,vertical:!1,animation:{type:Tf,delay:_f},zIndex:2});const Cm=km;function Am(t){var e=t.overlay;return e&&e.gradient&&"none"!==e.gradient}var _m=function(t){function e(e,i){t.call(this),this.options=i,this.color=i.color||Gs,this.aboveAxis=Kl(this.options.aboveAxis,!0),this.value=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this._rendered||(this._rendered=!0,this.createLabel(),this.createNote(),this.errorBar&&this.append(this.errorBar))},e.prototype.createLabel=function(){var t=this.options,e=t.labels;if(e.visible){var i,r=this.pointData(),n=wa(e);i=n?n(r):this.formatValue(e.format),this.label=new Cm(i,ha({vertical:t.vertical},e),r),this.append(this.label)}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.reflow=function(t){this.render();var e=this.label;if(this.box=t,e&&(e.options.aboveAxis=this.aboveAxis,e.reflow(t)),this.note&&this.note.reflow(t),this.errorBars)for(var i=0;i<this.errorBars.length;i++)this.errorBars[i].reflow(t)},e.prototype.createVisual=function(){var e=this,i=this.box,r=this.options,n=r.visual;if(!1!==this.visible)if(t.prototype.createVisual.call(this),n){var o=this.rectVisual=n({category:this.category,dataItem:this.dataItem,value:this.value,sender:this.getSender(),series:this.series,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,rect:i.toRect(),createVisual:function(){var t=new ku;return e.createRect(t),t},options:r});o&&this.visual.append(o)}else i.width()>0&&i.height()>0&&this.createRect(this.visual)},e.prototype.createRect=function(t){var e=this.options,i=e.border,r=Ll(i.opacity)?i.opacity:e.opacity,n=this.box.toRect();n.size.width=Math.round(n.size.width);var o=this.rectVisual=hu.fromRect(n,{fill:{color:this.color,opacity:e.opacity},stroke:{color:this.getBorderColor(),width:i.width,opacity:r,dashType:i.dashType}}),s=this.box.width(),a=this.box.height();if((e.vertical?s:a)>6&&(ia(o),(s<1||a<1)&&(o.options.stroke.lineJoin="round")),t.append(o),Am(e)){var l=this.createGradientOverlay(o,{baseColor:this.color},ha({end:e.vertical?void 0:[0,1]},e.overlay));t.append(l)}},e.prototype.createHighlight=function(t){return ia(hu.fromRect(this.box.toRect(),t))},e.prototype.highlightVisual=function(){return this.rectVisual},e.prototype.highlightVisualArgs=function(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},e.prototype.getBorderColor=function(){var t=this.color,e=this.options.border,i=e._brightness||Of,r=e.color;return Ll(r)||(r=new yc(t).brightness(i).toHex()),r},e.prototype.tooltipAnchor=function(){var t,e,i=this,r=i.options,n=i.box,o=i.aboveAxis,s=this.owner.pane.clipBox()||n,a=Ns,l=Ws;if(r.vertical)t=Math.min(n.x2,s.x2)+5,o?e=Math.max(n.y1,s.y1):(e=Math.min(n.y2,s.y2),l=Ts);else{var c=Math.max(n.x1,s.x1),h=Math.min(n.x2,s.x2);r.isStacked?(l=Ts,o?(a=Hs,t=h):t=c,e=Math.max(n.y1,s.y1)-5):(o?t=h+5:(t=c-5,a=Hs),e=Math.max(n.y1,s.y1))}return{point:new Ec(t,e),align:{horizontal:a,vertical:l}}},e.prototype.overlapsBox=function(t){return this.box.overlaps(t)},e.prototype.pointData=function(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,series:this.series}},e}(Ru);ha(_m.prototype,Vg),ha(_m.prototype,Wg),_m.prototype.defaults={border:{width:1},vertical:!0,overlay:{gradient:"glass"},labels:{visible:!1,format:"{0}"},opacity:1,notes:{label:{}}};const Tm=_m;function Om(t,e){t.forEach(e)}function Em(t,e){for(var i=t.length,r=i-1;r>=0;r--)e(t[r],r-i-1)}var Mm=function(t){function e(e){t.call(this,e),this.forEach=e.rtl?Em:Om}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.options,i=e.vertical,r=e.gap,n=e.spacing,o=this.children,s=o.length,a=i?Js:Ys,l=s+r+n*(s-1),c=(i?t.height():t.width())/l,h=t[a+1]+c*(r/2);this.forEach(o,(function(e,i){var r=(e.box||t).clone();r[a+1]=h,r[a+2]=h+c,e.reflow(r),i<s-1&&(h+=c*n),h+=c}))},e}(Ru);Zl(Mm,{vertical:!1,gap:0,spacing:0});const Pm=Mm;var Im=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){for(var e=this.options.vertical?Ys:Js,i=this.children,r=i.length,n=this.box=new Vc,o=0;o<r;o++){var s=i[o];if(!1!==s.visible){var a=s.box.clone();a.snapTo(t,e),0===o&&(n=this.box=a.clone()),s.reflow(a),n.wrap(a)}}},e}(Ru);Zl(Im,{vertical:!0});const Dm=Im;var Fm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.updateStackRange()},e.prototype.pointType=function(){return Tm},e.prototype.clusterType=function(){return Pm},e.prototype.stackType=function(){return Dm},e.prototype.stackLimits=function(e,i){return t.prototype.stackLimits.call(this,e,i)},e.prototype.createPoint=function(t,e){var i=e.categoryIx,r=e.category,n=e.series,o=e.seriesIx,s=this.options,a=this.children,l=s.isStacked,c=this.pointValue(t),h=this.pointOptions(n,o),u=h.labels;l&&u.position===Dg&&(u.position=Ig),h.isStacked=l;var p=t.fields.color||n.color;c<0&&h.negativeColor&&(p=h.negativeColor),h=this.evalPointOptions(h,c,r,i,n,o),aa(n.color)&&(p=h.color);var d=new(this.pointType())(c,h);d.color=p;var f=a[i];f||(f=new(this.clusterType())({vertical:s.invertAxes,gap:s.gap,spacing:s.spacing,rtl:!s.invertAxes&&(this.chartService||{}).rtl}),this.append(f));l?this.getStackWrap(n,f).append(d):f.append(d);return d},e.prototype.getStackWrap=function(t,e){var i,r=t.stack,n=r&&r.group||r,o=e.children;if(typeof n===qs){for(var s=0;s<o.length;s++)if(o[s]._stackGroup===n){i=o[s];break}}else i=o[0];i||((i=new(this.stackType())({vertical:!this.options.invertAxes}))._stackGroup=n,e.append(i));return i},e.prototype.categorySlot=function(t,e,i){var r=this.options,n=t.getSlot(e),o=i.startValue();if(r.isStacked){var s=i.getSlot(o,o,!0),a=r.invertAxes?Ys:Js;n[a+1]=n[a+2]=s[a+1]}return n},e.prototype.reflowCategories=function(t){for(var e=this.children,i=e.length,r=0;r<i;r++)e[r].reflow(t[r])},e.prototype.createAnimation=function(){this._setAnimationOptions(),t.prototype.createAnimation.call(this),lm(this.options.series)&&this._setChildrenAnimation()},e.prototype._setChildrenAnimation=function(){for(var t=this.points,e=0;e<t.length;e++){var i=t[e],r=i.visual;r&&Ll(r.options.zIndex)&&(i.options.animation=this.options.animation,i.createAnimation())}},e.prototype._setAnimationOptions=function(){var t,e=this.options,i=e.animation||{};if(e.isStacked){var r=this.seriesValueAxis(e.series[0]);t=r.getSlot(r.startValue())}else t=this.categoryAxis.getSlot(0);i.origin=new Nc(t.x1,t.y1),i.vertical=!e.invertAxes},e}($g);Zl(Fm,{animation:{type:jf}});const Rm=Fm;var Lm=function(t){function e(e,i){t.call(this,i),this.value=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this,i=e.options,r=e.value,n=e.owner.seriesValueAxis(i),o=n.getSlot(r.open,r.close),s=n.getSlot(r.low,r.high);o.x1=s.x1=t.x1,o.x2=s.x2=t.x2,this.realBody=o;var a=s.center().x,l=[];l.push([[a,s.y1],[a,o.y1]]),l.push([[a,o.y2],[a,s.y2]]),this.lines=l,this.box=s.clone().wrap(o),this._rendered||(this._rendered=!0,this.createNote()),this.reflowNote()},e.prototype.reflowNote=function(){this.note&&this.note.reflow(this.box)},e.prototype.createVisual=function(){t.prototype.createVisual.call(this),this._mainVisual=this.mainVisual(this.options),this.visual.append(this._mainVisual),this.createOverlay()},e.prototype.mainVisual=function(t){var e=new ku;return this.createBody(e,t),this.createLines(e,t),e},e.prototype.createBody=function(t,e){var i=hu.fromRect(this.realBody.toRect(),{fill:{color:this.color,opacity:e.opacity},stroke:null});e.border.width>0&&i.options.set("stroke",{color:this.getBorderColor(),width:e.border.width,dashType:e.border.dashType,opacity:Kl(e.border.opacity,e.opacity)}),ia(i),t.append(i),Am(e)&&t.append(this.createGradientOverlay(i,{baseColor:this.color},ha({end:e.vertical?void 0:[0,1]},e.overlay)))},e.prototype.createLines=function(t,e){this.drawLines(t,e,this.lines,e.line)},e.prototype.drawLines=function(t,e,i,r){if(i)for(var n={stroke:{color:r.color||this.color,opacity:Kl(r.opacity,e.opacity),width:r.width,dashType:r.dashType,lineCap:"butt"}},o=0;o<i.length;o++){var s=hu.fromPoints(i[o],n);ia(s),t.append(s)}},e.prototype.getBorderColor=function(){var t=this.options.border,e=t.color;return Ll(e)||(e=new yc(this.color).brightness(t._brightness).toHex()),e},e.prototype.createOverlay=function(){var t=hu.fromRect(this.box.toRect(),{fill:{color:Gs,opacity:0},stroke:null});this.visual.append(t)},e.prototype.createHighlight=function(){var t=this.options.highlight,e=this.color;this.color=t.color||this.color;var i=this.mainVisual(ha({},this.options,{line:{color:this.getBorderColor()}},t));return this.color=e,i},e.prototype.highlightVisual=function(){return this._mainVisual},e.prototype.highlightVisualArgs=function(){return{options:this.options,rect:this.box.toRect(),visual:this._mainVisual}},e.prototype.tooltipAnchor=function(){var t=this.box,e=this.owner.pane.clipBox()||t;return{point:new Ec(t.x2+5,Math.max(t.y1,e.y1)+5),align:{horizontal:Ns,vertical:Ws}}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.overlapsBox=function(t){return this.box.overlaps(t)},e}(Ru);Zl(Lm,{vertical:!0,border:{_brightness:.8},line:{width:2},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{4:d}</th></tr><tr><td>Open:</td><td>{0:C}</td></tr><tr><td>High:</td><td>{1:C}</td></tr><tr><td>Low:</td><td>{2:C}</td></tr><tr><td>Close:</td><td>{3:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}}}),ha(Lm.prototype,Vg),ha(Lm.prototype,Wg);const Nm=Lm;function Bm(t){return gf(t)===t.length}var jm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflowCategories=function(t){for(var e=this.children,i=e.length,r=0;r<i;r++)e[r].reflow(t[r])},e.prototype.addValue=function(t,e){var i,r=e.categoryIx,n=e.category,o=e.series,s=e.seriesIx,a=this.children,l=this.options,c=t.valueFields,h=Bm(this.splitValue(c)),u=o.data[r],p=this.categoryPoints[r];p||(this.categoryPoints[r]=p=[]),h&&(i=this.createPoint(t,e));var d=a[r];d||(d=new Pm({vertical:l.invertAxes,gap:l.gap,spacing:l.spacing,rtl:!l.invertAxes&&(this.chartService||{}).rtl}),this.append(d)),i&&(this.updateRange(c,e),d.append(i),i.categoryIx=r,i.category=n,i.series=o,i.seriesIx=s,i.owner=this,i.dataItem=u,i.noteText=t.fields.noteText),this.points.push(i),p.push(i)},e.prototype.pointType=function(){return Nm},e.prototype.createPoint=function(t,e){var i=e.categoryIx,r=e.category,n=e.series,o=e.seriesIx,s=this.pointType(),a=t.valueFields,l=ha({},n),c=t.fields.color||n.color;l=this.evalPointOptions(l,a,r,i,n,o),n.type===Hf&&a.open>a.close&&(c=t.fields.downColor||n.downColor||n.color),aa(n.color)&&(c=l.color),l.vertical=!this.options.invertAxes;var h=new s(a,l);return h.color=c,h},e.prototype.splitValue=function(t){return[t.low,t.open,t.close,t.high]},e.prototype.updateRange=function(t,e){var i=e.series.axis,r=this.splitValue(t),n=this.valueAxisRanges[i];n=this.valueAxisRanges[i]=n||{min:Bs,max:js},n=this.valueAxisRanges[i]={min:Math.min.apply(Math,r.concat([n.min])),max:Math.max.apply(Math,r.concat([n.max]))}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.open,i.high,i.low,i.close,t.category)},e.prototype.animationPoints=function(){return this.points},e}($g);ha(jm.prototype,hm);const zm=jm;var Um=function(t){function e(e,i){t.call(this,e,i),this.createNote()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e,i,r=this,n=r.options,o=r.value,s=r.owner.seriesValueAxis(n);this.boxSlot=i=s.getSlot(o.q1,o.q3),this.realBody=i,this.reflowBoxSlot(t),this.whiskerSlot=e=s.getSlot(o.lower,o.upper),this.reflowWhiskerSlot(t);var a=s.getSlot(o.median);if(o.mean){var l=s.getSlot(o.mean);this.meanPoints=this.calcMeanPoints(t,l)}this.whiskerPoints=this.calcWhiskerPoints(i,e),this.medianPoints=this.calcMedianPoints(t,a),this.box=e.clone().wrap(i),this.reflowNote()},e.prototype.reflowBoxSlot=function(t){this.boxSlot.x1=t.x1,this.boxSlot.x2=t.x2},e.prototype.reflowWhiskerSlot=function(t){this.whiskerSlot.x1=t.x1,this.whiskerSlot.x2=t.x2},e.prototype.calcMeanPoints=function(t,e){return[[[t.x1,e.y1],[t.x2,e.y1]]]},e.prototype.calcWhiskerPoints=function(t,e){var i=e.center().x;return[[[i-5,e.y1],[i+5,e.y1],[i,e.y1],[i,t.y1]],[[i-5,e.y2],[i+5,e.y2],[i,e.y2],[i,t.y2]]]},e.prototype.calcMedianPoints=function(t,e){return[[[t.x1,e.y1],[t.x2,e.y1]]]},e.prototype.renderOutliers=function(t){for(var e=this.value,i=e.outliers||[],r=3*Math.abs(e.q3-e.q1),n=[],o=t.markers||{},s=0;s<i.length;s++){var a=i[s],l=ha({},(o=a<e.q3+r&&a>e.q1-r?t.outliers:t.extremes).border);Ll(l.color)||(Ll(this.color)?l.color=this.color:l.color=new yc(o.background).brightness(Of).toHex());var c=new ju({type:o.type,width:o.size,height:o.size,rotation:o.rotation,background:o.background,border:l,opacity:o.opacity});c.value=a,n.push(c)}return this.reflowOutliers(n),n},e.prototype.reflowOutliers=function(t){for(var e=this,i=this.owner.seriesValueAxis(this.options),r=this.box.center(),n=0;n<t.length;n++){var o=t[n].value,s=i.getSlot(o);e.options.vertical?s.move(r.x):s.move(void 0,r.y),e.box=e.box.wrap(s),t[n].reflow(s)}},e.prototype.mainVisual=function(e){for(var i=t.prototype.mainVisual.call(this,e),r=this.renderOutliers(e),n=0;n<r.length;n++){var o=r[n].getElement();o&&i.append(o)}return i},e.prototype.createLines=function(t,e){this.drawLines(t,e,this.whiskerPoints,e.whiskers),this.drawLines(t,e,this.medianPoints,e.median),this.drawLines(t,e,this.meanPoints,e.mean)},e.prototype.getBorderColor=function(){return(this.options.border||{}).color?this.options.border.color:this.color?this.color:t.prototype.getBorderColor.call(this)},e}(Nm);Zl(Um,{border:{_brightness:.8},line:{width:2},median:{color:"#f6f6f6"},mean:{width:2,dashType:"dash",color:"#f6f6f6"},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{6:d}</th></tr><tr><td>Lower:</td><td>{0:C}</td></tr><tr><td>Q1:</td><td>{1:C}</td></tr><tr><td>Median:</td><td>{2:C}</td></tr><tr><td>Mean:</td><td>{5:C}</td></tr><tr><td>Q3:</td><td>{3:C}</td></tr><tr><td>Upper:</td><td>{4:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},outliers:{visible:!0,size:8,type:Ms,background:Gs,border:{width:2,opacity:1},opacity:0},extremes:{visible:!0,size:8,type:Es,background:Gs,border:{width:2,opacity:1},opacity:0}}),ha(Um.prototype,Vg);const $m=Um;var Hm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflowBoxSlot=function(t){this.boxSlot.y1=t.y1,this.boxSlot.y2=t.y2},e.prototype.reflowWhiskerSlot=function(t){this.whiskerSlot.y1=t.y1,this.whiskerSlot.y2=t.y2},e.prototype.calcMeanPoints=function(t,e){return[[[e.x1,t.y1],[e.x1,t.y2]]]},e.prototype.calcWhiskerPoints=function(t,e){var i=e.center().y;return[[[e.x1,i-5],[e.x1,i+5],[e.x1,i],[t.x1,i]],[[e.x2,i-5],[e.x2,i+5],[e.x2,i],[t.x2,i]]]},e.prototype.calcMedianPoints=function(t,e){return[[[e.x1,t.y1],[e.x1,t.y2]]]},e}($m);const Vm=Hm;var qm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addValue=function(t,e){var i,r=e.categoryIx,n=e.category,o=e.series,s=e.seriesIx,a=this.children,l=this.options,c=t.valueFields,h=Bm(this.splitValue(c)),u=o.data[r],p=this.categoryPoints[r];p||(this.categoryPoints[r]=p=[]),h&&(i=this.createPoint(t,e));var d=a[r];d||(d=new Pm({vertical:l.invertAxes,gap:l.gap,spacing:l.spacing,rtl:!l.invertAxes&&(this.chartService||{}).rtl}),this.append(d)),i&&(this.updateRange(c,e),d.append(i),i.categoryIx=r,i.category=n,i.series=o,i.seriesIx=s,i.owner=this,i.dataItem=u),this.points.push(i),p.push(i)},e.prototype.pointType=function(){return this.options.invertAxes?Vm:$m},e.prototype.splitValue=function(t){return[t.lower,t.q1,t.median,t.q3,t.upper]},e.prototype.updateRange=function(t,e){var i=e.series.axis,r=this.valueAxisRanges[i],n=this.splitValue(t).concat(this.filterOutliers(t.outliers));Ll(t.mean)&&(n=n.concat(t.mean)),r=this.valueAxisRanges[i]=r||{min:Bs,max:js},r=this.valueAxisRanges[i]={min:Math.min.apply(Math,n.concat([r.min])),max:Math.max.apply(Math,n.concat([r.max]))}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.lower,i.q1,i.median,i.q3,i.upper,i.mean,t.category)},e.prototype.filterOutliers=function(t){for(var e=(t||[]).length,i=[],r=0;r<e;r++){var n=t[r];Ll(n)&&null!==n&&i.push(n)}return i},e.prototype.supportsPointInactiveOpacity=function(){return!1},e}(zm);const Wm=qm;var Xm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getAxis=function(){var t=this.chart.seriesAxes(this.series);return this.isVertical?t.y:t.x},e}(Lg);const Gm=Xm;function Km(t){return Ll(t)&&null!==t}var Ym=function(t){function e(e,i){t.call(this,i),this.plotArea=e,this.chartService=e.chartService,this._initFields(),this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initFields=function(){this.xAxisRanges={},this.yAxisRanges={},this.points=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[]},e.prototype.render=function(){this.traverseDataPoints(this.addValue.bind(this))},e.prototype.addErrorBar=function(t,e,i){var r,n=t.value[e],o=e+"Value",s=e+"ErrorLow",a=e+"ErrorHigh",l=i.seriesIx,c=i.series,h=t.options.errorBars,u=i[s],p=i[a];na(n)&&(na(u)&&na(p)&&(r={low:u,high:p}),h&&Ll(h[o])&&(this.seriesErrorRanges=this.seriesErrorRanges||{x:[],y:[]},this.seriesErrorRanges[e][l]=this.seriesErrorRanges[e][l]||new Cf(h[o],c,e),r=this.seriesErrorRanges[e][l].getErrorRange(n,h[o])),r&&this.addPointErrorBar(r,t,e))},e.prototype.addPointErrorBar=function(t,e,i){var r=t.low,n=t.high,o=e.series,s=e.options.errorBars,a=i===Js,l={};e[i+"Low"]=r,e[i+"High"]=n,e.errorBars=e.errorBars||[];var c=new Gm(r,n,a,this,o,s);e.errorBars.push(c),e.append(c),l[i]=r,this.updateRange(l,o),l[i]=n,this.updateRange(l,o)},e.prototype.addValue=function(t,e){var i,r=t.x,n=t.y,o=e.seriesIx,s=this.options.series[o],a=this.seriesMissingValues(s),l=this.seriesPoints[o],c=t;Km(r)&&Km(n)||(c=this.createMissingValue(c,a)),c&&((i=this.createPoint(c,e))&&(Object.assign(i,e),this.addErrorBar(i,Ys,e),this.addErrorBar(i,Js,e)),this.updateRange(c,e.series)),this.points.push(i),l.push(i)},e.prototype.seriesMissingValues=function(t){return t.missingValues},e.prototype.createMissingValue=function(){},e.prototype.updateRange=function(t,e){var i=this.chartService.intl,r=e.xAxis,n=e.yAxis,o=t.x,s=t.y,a=this.xAxisRanges[r],l=this.yAxisRanges[n];Km(o)&&(a=this.xAxisRanges[r]=a||{min:Bs,max:js},oa(o)&&(o=gd(i,o)),a.min=Math.min(a.min,o),a.max=Math.max(a.max,o)),Km(s)&&(l=this.yAxisRanges[n]=l||{min:Bs,max:js},oa(s)&&(s=gd(i,s)),l.min=Math.min(l.min,s),l.max=Math.max(l.max,s))},e.prototype.evalPointOptions=function(t,e,i){var r=i.series,n=i.seriesIx,o={defaults:r._defaults,excluded:["data","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint"]},s=this._evalSeries[n];Ll(s)||(this._evalSeries[n]=s=jg(t,{},o,!0));var a=t;return s&&jg(a=ha({},t),{value:e,series:r,dataItem:i.dataItem},o),a},e.prototype.pointType=function(){return Gg},e.prototype.pointOptions=function(t,e){var i=this.seriesOptions[e];if(!i){var r=this.pointType().prototype.defaults;this.seriesOptions[e]=i=ha({},r,{markers:{opacity:t.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},t)}return i},e.prototype.createPoint=function(t,e){var i=e.series,r=this.pointOptions(i,e.seriesIx),n=e.color||i.color;r=this.evalPointOptions(r,t,e),aa(i.color)&&(n=r.color);var o=new Gg(t,r);return o.color=n,this.append(o),o},e.prototype.seriesAxes=function(t){var e=t.xAxis,i=t.yAxis,r=this.plotArea,n=e?r.namedXAxes[e]:r.axisX,o=i?r.namedYAxes[i]:r.axisY;if(!n)throw new Error("Unable to locate X axis with name "+e);if(!o)throw new Error("Unable to locate Y axis with name "+i);return{x:n,y:o}},e.prototype.reflow=function(t){var e=this,i=this.points,r=!this.options.clip,n=0;this.traverseDataPoints((function(t,o){var s=i[n++],a=e.seriesAxes(o.series),l=a.x.getSlot(t.x,t.x,r),c=a.y.getSlot(t.y,t.y,r);if(s)if(l&&c){var h=e.pointSlot(l,c);s.reflow(h)}else s.visible=!1})),this.box=t},e.prototype.pointSlot=function(t,e){return new Vc(t.x1,e.y1,t.x2,e.y2)},e.prototype.traverseDataPoints=function(t){for(var e=this.options.series,i=this.seriesPoints,r=0;r<e.length;r++){var n=e[r];i[r]||(i[r]=[]);for(var o=0;o<n.data.length;o++){var s=this._bindPoint(n,r,o),a=s.valueFields,l=s.fields;t(a,ha({pointIx:o,series:n,seriesIx:r,dataItem:n.data[o],owner:this},l))}}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.x,i.y)},e.prototype.animationPoints=function(){for(var t=this.points,e=[],i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e},e}(Ru);Zl(Ym,{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"},clip:!0}),ha(Ym.prototype,hm,{_bindPoint:$g.prototype._bindPoint});const Jm=Ym;var Zm=function(t){function e(e,i){t.call(this,e,i),this.category=e.category}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createHighlight=function(){var t=this.options.highlight,e=t.border,i=this.options.markers,r=this.box.center(),n=(i.size+i.border.width+e.width)/2,o=new ku,s=new wu(new mu([r.x,r.y+n/5+e.width/2],n+e.width/2),{stroke:{color:"none"},fill:this.createGradient({gradient:"bubbleShadow",color:i.background,stops:[{offset:0,color:i.background,opacity:.3},{offset:1,color:i.background,opacity:0}]})}),a=new wu(new mu([r.x,r.y],n),{stroke:{color:e.color||new yc(i.background).brightness(Of).toHex(),width:e.width,opacity:e.opacity},fill:{color:i.background,opacity:t.opacity}});return o.append(s,a),o},e}(Gg);Zm.prototype.defaults=ha({},Zm.prototype.defaults,{labels:{position:Os},highlight:{opacity:1,border:{color:"#fff",width:2,opacity:1}}}),Zm.prototype.defaults.highlight.zIndex=void 0;const Qm=Zm;var ty=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initFields=function(){this._maxSize=js,t.prototype._initFields.call(this)},e.prototype.addValue=function(e,i){null!==e.size&&(e.size>0||e.size<0&&i.series.negativeValues.visible)?(this._maxSize=Math.max(this._maxSize,Math.abs(e.size)),t.prototype.addValue.call(this,e,i)):(this.points.push(null),this.seriesPoints[i.seriesIx].push(null))},e.prototype.reflow=function(e){this.updateBubblesSize(e),t.prototype.reflow.call(this,e)},e.prototype.pointType=function(){return Qm},e.prototype.createPoint=function(t,e){var i=e.series,r=i.data.length,n=e.pointIx*(_f/r),o={delay:n,duration:_f-n,type:Uf},s=e.color||i.color;t.size<0&&i.negativeValues.visible&&(s=Kl(i.negativeValues.color,s));var a=ha({labels:{animation:{delay:n,duration:_f-n}}},this.pointOptions(i,e.seriesIx),{markers:{type:Es,border:i.border,opacity:i.opacity,animation:o}});a=this.evalPointOptions(a,t,e),aa(i.color)&&(s=a.color),a.markers.background=s;var l=new Qm(t,a);return l.color=s,this.append(l),l},e.prototype.updateBubblesSize=function(t){for(var e=this.options.series,i=Math.min(t.width(),t.height()),r=0;r<e.length;r++)for(var n=e[r],o=this.seriesPoints[r],s=(n.minSize||Math.max(.02*i,10))/2,a=(n.maxSize||.2*i)/2,l=Math.PI*s*s,c=(Math.PI*a*a-l)/this._maxSize,h=0;h<o.length;h++){var u=o[h];if(u){var p=Math.abs(u.value.size)*c,d=Math.sqrt((l+p)/Math.PI),f=Kl(u.options.zIndex,0)+(1-d/a);ha(u.options,{zIndex:f,markers:{size:2*d,zIndex:f},labels:{zIndex:f+1}})}}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.x,i.y,i.size,t.category)},e.prototype.createAnimation=function(){},e.prototype.createVisual=function(){},e}(Jm);Zl(ty,{tooltip:{format:"{3}"},labels:{format:"{3}"}});const ey=ty;var iy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ju);ha(iy.prototype,Vg);const ry=iy;var ny=function(t){function e(e,i){t.call(this,i),this.aboveAxis=this.options.aboveAxis,this.color=i.color||Gs,this.value=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.options;this._rendered||(this._rendered=!0,Ll(this.value.target)&&(this.target=new ry({type:t.target.shape,background:t.target.color||this.color,opacity:t.opacity,zIndex:t.zIndex,border:t.target.border,vAlign:Ws,align:Hs}),this.target.value=this.value,this.target.dataItem=this.dataItem,this.target.series=this.series,this.append(this.target)),this.createLabel(),this.createNote())},e.prototype.createLabel=function(){var t=this.options.labels;if(t.visible){var e,i=this.pointData(),r=wa(t);e=r?r(i):this.formatValue(t.format),this.label=new Cm(e,t,i),this.append(this.label)}},e.prototype.reflow=function(t){this.render();var e=this,i=e.options,r=e.target,n=e.owner,o=i.invertAxes,s=n.seriesValueAxis(this.options),a=n.categorySlot(n.categoryAxis,i.categoryIx,s),l=s.getSlot(this.value.target),c=o?l:a,h=o?a:l;if(r){var u=new Vc(c.x1,h.y1,c.x2,h.y2);r.options.height=o?u.height():i.target.line.width,r.options.width=o?i.target.line.width:u.width(),r.reflow(u)}var p=this.label;p&&(p.options.aboveAxis=this.aboveAxis,p.reflow(t)),this.note&&this.note.reflow(t),this.box=t},e.prototype.createVisual=function(){t.prototype.createVisual.call(this);var e=this.options,i=hu.fromRect(this.box.toRect(),{fill:{color:this.color,opacity:e.opacity},stroke:null});e.border.width>0&&i.options.set("stroke",{color:e.border.color||this.color,width:e.border.width,dashType:e.border.dashType,opacity:Kl(e.border.opacity,e.opacity)}),this.bodyVisual=i,ia(i),this.visual.append(i)},e.prototype.createAnimation=function(){this.bodyVisual&&(this.animation=Du.create(this.bodyVisual,this.options.animation))},e.prototype.createHighlight=function(t){return hu.fromRect(this.box.toRect(),t)},e.prototype.highlightVisual=function(){return this.bodyVisual},e.prototype.highlightVisualArgs=function(){return{rect:this.box.toRect(),visual:this.bodyVisual,options:this.options}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.pointData=function(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series}},e.prototype.overlapsBox=function(t){return this.box.overlaps(t)},e}(Ru);ny.prototype.tooltipAnchor=Tm.prototype.tooltipAnchor,Zl(ny,{border:{width:1},vertical:!1,opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},labels:{visible:!1},tooltip:{format:"Current: {0}<br />Target: {1}"},notes:{label:{}}}),ha(ny.prototype,Vg),ha(ny.prototype,Wg);const oy=ny;var sy=function(t){function e(e,i){!function(t){for(var e=t.series,i=0;i<e.length;i++){var r=e[i],n=r.data;!n||Zs(n[0])||ua(n[0])||(r.data=[n])}}(i),t.call(this,e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflowCategories=function(t){for(var e=this.children,i=e.length,r=0;r<i;r++)e[r].reflow(t[r])},e.prototype.plotRange=function(t){var e=t.series,i=this.seriesValueAxis(e),r=this.categoryAxisCrossingValue(i);return[r,t.value.current||r]},e.prototype.createPoint=function(t,e){var i=e.categoryIx,r=e.category,n=e.series,o=e.seriesIx,s=this.options,a=this.children,l=t.valueFields,c=ha({vertical:!s.invertAxes,overlay:n.overlay,categoryIx:i,invertAxes:s.invertAxes},n),h=t.fields.color||n.color;c=this.evalPointOptions(c,l,r,i,n,o),aa(n.color)&&(h=c.color);var u=new oy(l,c);u.color=h;var p=a[i];return p||(p=new Pm({vertical:s.invertAxes,gap:s.gap,spacing:s.spacing,rtl:!s.invertAxes&&(this.chartService||{}).rtl}),this.append(p)),p.append(u),u},e.prototype.updateRange=function(t,e){var i=t.current,r=t.target,n=e.series.axis,o=this.valueAxisRanges[n];Ll(i)&&!isNaN(i)&&Ll(r&&!isNaN(r))&&((o=this.valueAxisRanges[n]=o||{min:Bs,max:js}).min=Math.min(o.min,i,r),o.max=Math.max(o.max,i,r))},e.prototype.formatPointValue=function(t,e){return this.chartService.format.auto(e,t.value.current,t.value.target)},e.prototype.pointValue=function(t){return t.valueFields.current},e.prototype.aboveAxis=function(t){return t.value.current>0},e.prototype.createAnimation=function(){var t=this.points;this._setAnimationOptions();for(var e=0;e<t.length;e++){var i=t[e];i.options.animation=this.options.animation,i.createAnimation()}},e}($g);sy.prototype._setAnimationOptions=Rm.prototype._setAnimationOptions,Zl(sy,{animation:{type:jf}});const ay=sy;var ly=function(t){function e(e,i){t.call(this),this.chartService=e,this.options=ha({},this.options,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getStyle=function(t,e){var i=t.background,r=t.border.color;if(e){var n=e.color||e.options.color;i=Kl(i,n),r=Kl(r,n)}var o=ma(t.padding||{},"auto");return{backgroundColor:i,borderColor:r,font:t.font,color:t.color,opacity:t.opacity,borderWidth:pa(t.border.width),paddingTop:pa(o.top),paddingBottom:pa(o.bottom),paddingLeft:pa(o.left),paddingRight:pa(o.right)}},e.prototype.show=function(t,e,i){t.format=e.format;var r=this.getStyle(e,i);t.style=r;var n=new yc(r.backgroundColor);Ll(e.color)||n.isDark()||(t.className="k-chart-tooltip-inverse"),this.chartService.notify(Og,t),this.visible=!0},e.prototype.hide=function(){this.chartService&&this.chartService.notify(Eg),this.visible=!1},e.prototype.destroy=function(){delete this.chartService},e}(ml);Zl(ly,{border:{width:1},opacity:1});const cy=ly;var hy=function(t){function e(e,i,r){t.call(this,e,r),this.crosshair=i,this.formatService=e.format,this.initAxisName()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initAxisName=function(){var t,e=this.crosshair.axis;t=e.plotArea.categoryAxis?e.getCategory?"categoryAxis":"valueAxis":e.options.vertical?"yAxis":"xAxis",this.axisName=t},e.prototype.showAt=function(t){var e=this.crosshair.axis,i=this.options,r=e[i.stickyMode?"getCategory":"getValue"](t),n=r;i.format?n=this.formatService.auto(i.format,r):e.options.type===Ps&&(n=this.formatService.auto(e.options.labels.dateFormats[e.options.baseUnit],r)),this.show({point:t,anchor:this.getAnchor(),crosshair:this.crosshair,value:n,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex},this.options)},e.prototype.hide=function(){this.chartService.notify(Eg,{crosshair:this.crosshair,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex})},e.prototype.getAnchor=function(){var t,e,i,r=this.crosshair,n=this.options,o=n.position,s=n.padding,a=!r.axis.options.vertical,l=r.line.bbox();return a?(t=Os,o===Ts?(e=Ws,i=l.bottomLeft().translate(0,s)):(e=Ts,i=l.topLeft().translate(0,-s))):(e=Os,o===Ns?(t=Hs,i=l.topLeft().translate(-s,0)):(t=Ns,i=l.topRight().translate(s,0))),{point:i,align:{horizontal:t,vertical:e}}},e}(cy);Zl(hy,{padding:10});const uy=hy;var py=function(t){function e(e,i,r){t.call(this,r),this.axis=i,this.stickyMode=i instanceof bd;var n=this.options.tooltip;n.visible&&(this.tooltip=new uy(e,this,ha({},n,{stickyMode:this.stickyMode})))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.showAt=function(t){this.point=t,this.moveLine(),this.line.visible(!0),this.tooltip&&this.tooltip.showAt(t)},e.prototype.hide=function(){this.line.visible(!1),this.tooltip&&this.tooltip.hide()},e.prototype.moveLine=function(){var t,e=this.axis,i=this.point,r=e.options.vertical,n=this.getBox(),o=r?Js:Ys,s=new Nc(n.x1,n.y1);if(t=r?new Nc(n.x2,n.y1):new Nc(n.x1,n.y2),i)if(this.stickyMode){var a=e.getSlot(e.pointCategoryIndex(i));s[o]=t[o]=a.center()[o]}else s[o]=t[o]=i[o];this.box=n,this.line.moveTo(s).lineTo(t)},e.prototype.getBox=function(){for(var t,e=this.axis,i=e.pane.axes,r=i.length,n=e.options.vertical,o=e.lineBox().clone(),s=n?Ys:Js,a=0;a<r;a++){var l=i[a];l.options.vertical!==n&&(t?t.wrap(l.lineBox()):t=l.lineBox().clone())}return o[s+1]=t[s+1],o[s+2]=t[s+2],o},e.prototype.createVisual=function(){t.prototype.createVisual.call(this);var e=this.options;this.line=new hu({stroke:{color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType},visible:!1}),this.moveLine(),this.visual.append(this.line)},e.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),t.prototype.destroy.call(this)},e}(Ru);Zl(py,{color:_s,width:2,zIndex:-1,tooltip:{visible:!1}});const dy=py;var fy=function(t){function e(e,i){t.call(this,e),this.pane=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.shouldClip=function(){for(var t=this.children,e=t.length,i=0;i<e;i++)if(!0===t[i].options.clip)return!0;return!1},e.prototype._clipBox=function(){return this.pane.chartsBox()},e.prototype.createVisual=function(){if(this.visual=new ku({zIndex:0}),this.shouldClip()){var t=(this.clipBox=this._clipBox()).toRect(),e=hu.fromRect(t);ia(e),this.visual.clip(e),this.unclipLabels()}},e.prototype.stackRoot=function(){return this},e.prototype.unclipLabels=function(){for(var t=this.children,e=this.clipBox,i=0;i<t.length;i++)for(var r=t[i].points||{},n=r.length,o=0;o<n;o++){var s=r[o];if(s&&!1!==s.visible&&s.overlapsBox&&s.overlapsBox(e))if(s.unclipElements)s.unclipElements();else{var a=s.label,l=s.note;a&&a.options.visible&&(a.alignToClipBox&&a.alignToClipBox(e),a.options.noclip=!0),l&&l.options.visible&&(l.options.noclip=!0)}}},e.prototype.destroy=function(){t.prototype.destroy.call(this),delete this.parent},e}(Ru);fy.prototype.isStackRoot=!0;const gy=fy;var my=function(t){function e(e){t.call(this,e),this.id="pane"+yy++,this.createTitle(),this.content=new Ru,this.chartContainer=new gy({},this),this.append(this.content),this.axes=[],this.charts=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createTitle=function(){var t=this.options.title;ua(t)&&(t=ha({},t,{align:t.position,position:Ws})),this.title=mp.buildTitle(t,e.prototype.options.title),this.title&&this.append(this.title)},e.prototype.appendAxis=function(t){this.content.append(t),this.axes.push(t),t.pane=this},e.prototype.appendAxisAt=function(t,e){this.content.append(t),this.axes.splice(e,0,t),t.pane=this},e.prototype.appendChart=function(t){this.chartContainer.parent!==this.content&&this.content.append(this.chartContainer),this.charts.push(t),this.chartContainer.append(t),t.pane=this},e.prototype.empty=function(){var t=this.parent;if(t){for(var e=0;e<this.axes.length;e++)t.removeAxis(this.axes[e]);for(var i=0;i<this.charts.length;i++)t.removeChart(this.charts[i])}this.axes=[],this.charts=[],this.content.destroy(),this.content.children=[],this.chartContainer.children=[]},e.prototype.reflow=function(e){var i;Hl(this.children)===this.content&&(i=this.children.pop()),t.prototype.reflow.call(this,e),i&&this.children.push(i),this.title&&(this.contentBox.y1+=this.title.box.height())},e.prototype.visualStyle=function(){var e=t.prototype.visualStyle.call(this);return e.zIndex=-10,e},e.prototype.renderComplete=function(){this.options.visible&&this.createGridLines()},e.prototype.stackRoot=function(){return this},e.prototype.clipRoot=function(){return this},e.prototype.createGridLines=function(){for(var t=this.axes,e=t.concat(this.parent.axes),i=[],r=[],n=0;n<t.length;n++)for(var o=t[n],s=o.options.vertical,a=s?i:r,l=0;l<e.length;l++)if(0===a.length){var c=e[l];s!==c.options.vertical&&Fl(a,o.createGridLines(c))}},e.prototype.refresh=function(){this.visual.clear(),this.content.parent=null,this.content.createGradient=this.createGradient.bind(this),this.content.renderVisual(),this.content.parent=this,this.title&&this.visual.append(this.title.visual),this.visual.append(this.content.visual),this.renderComplete(),this.notifyRender()},e.prototype.chartsBox=function(){for(var t=this.axes,e=t.length,i=new Vc,r=0;r<e;r++){var n=t[r],o=n.options.vertical?Js:Ys,s=n.lineBox();i[o+1]=s[o+1],i[o+2]=s[o+2]}if(0===i.x2)for(var a=this.parent.axes,l=a.length,c=0;c<l;c++){var h=a[c];if(!h.options.vertical){var u=h.lineBox();i.x1=u.x1,i.x2=u.x2}}return i},e.prototype.clipBox=function(){return this.chartContainer.clipBox},e.prototype.notifyRender=function(){var t=this.getService();t&&t.notify("paneRender",{pane:new pf(this),index:this.paneIndex,name:this.options.name})},e}(Nu),yy=1;my.prototype.isStackRoot=!0,Zl(my,{zIndex:-1,shrinkToFit:!0,title:{align:Ns},visible:!0});const vy=my;function by(t,e){null!==e&&t.push(e)}function wy(t,e,i){var r=e.visible;if(Ll(r))return r;var n=t.pointVisibility;return n?n[i]:void 0}function xy(t){for(var e=t.data,i=[],r=0,n=0,o=0;o<e.length;o++){var s=wf.current.bindPoint(t,o),a=s.valueFields.value;oa(a)&&(a=parseFloat(a)),na(a)?(s.visible=!1!==wy(t,s.fields,o),s.value=Math.abs(a),i.push(s),s.visible&&(r+=s.value),0!==a&&n++):i.push(null)}return{total:r,points:i,count:n}}function Sy(t,e){return t&&e?t.toLowerCase()===e.toLowerCase():t===e}function ky(t,e){for(var i=[],r=[].concat(e),n=0;n<t.length;n++){var o=t[n];Oa(o.type,r)&&i.push(o)}return i}function Cy(t,e,i){if(null===e)return e;var r="_date_"+t,n=e[r];return n||(n=gd(i,ka(t)(e)),e[r]=n),n}function Ay(t,e){var i=t.type,r=e instanceof Date;return!i&&r||Sy(i,Ps)}function _y(t){return 1===t.length?t[0]:t}var Ty=/area/i;function Oy(t,e){var i=wf.current.bindPoint(t,null,e).valueFields;for(var r in i)if(sa(i[r]))return!0}function Ey(t){var e,i,r=t.start,n=t.dir,o=t.min,s=t.max,a=t.getter,l=t.hasItem,c=t.series,h=r;do{l(h+=n)&&(e=Oy(c,(i=a(h)).item))}while(o<=h&&h<=s&&!e);if(e)return i}function My(t,e,i,r,n){var o=e.min,s=e.max,a=o>0&&o<i,l=s+1<i;if(a||l){var c,h,u,p=function(t){return t.missingValues?t.missingValues:Ty.test(t.type)||t.stack?If:Df}(t);if(p!==Df)a&&(c=r(o-1)),l&&(h=r(s+1));else a&&(c=Oy(t,(u=r(o-1)).item)?u:Ey({start:o,dir:-1,min:0,max:i-1,getter:r,hasItem:n,series:t})),l&&(h=Oy(t,(u=r(s+1)).item)?u:Ey({start:s,dir:1,min:0,max:i-1,getter:r,hasItem:n,series:t}));c&&(t._outOfRangeMinPoint=c),h&&(t._outOfRangeMaxPoint=h)}}var Py=function(t){function e(e,i,r){t.call(this,i),this.initFields(e,i),this.series=e,this.initSeries(),this.charts=[],this.options.legend=this.options.legend||{},this.options.legend.items=[],this.axes=[],this.crosshairs=[],this.chartService=r,this.originalOptions=i,this.createPanes(),this.render(),this.createCrosshairs()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){},e.prototype.initSeries=function(){for(var t=this.series,e=0;e<t.length;e++)t[e].index=e},e.prototype.createPanes=function(){for(var t=this.options.title||{},e=this.options.paneDefaults,i=this.options.panes||[],r=Math.max(i.length,1),n=[],o=ha({title:{color:t.color}},e),s=0;s<r;s++){var a=ha({},o,i[s]);oa(a.title)&&(a.title=ha({text:a.title},o.title));var l=new vy(a);l.paneIndex=s,n.push(l),this.append(l)}this.panes=n},e.prototype.crosshairOptions=function(t){return t.options.crosshair},e.prototype.createCrosshairs=function(t){var e=this;void 0===t&&(t=this.panes);for(var i=0;i<t.length;i++)for(var r=t[i],n=0;n<r.axes.length;n++){var o=r.axes[n],s=e.crosshairOptions(o);if(s&&s.visible){var a=new dy(e.chartService,o,s);e.crosshairs.push(a),r.content.append(a)}}},e.prototype.removeCrosshairs=function(t){for(var e=this.crosshairs,i=t.axes,r=e.length-1;r>=0;r--)for(var n=0;n<i.length;n++)if(e[r].axis===i[n]){e.splice(r,1);break}},e.prototype.hideCrosshairs=function(){for(var t=this.crosshairs,e=0;e<t.length;e++)t[e].hide()},e.prototype.findPane=function(t){for(var e,i=this.panes,r=0;r<i.length;r++)if(i[r].options.name===t){e=i[r];break}return e||i[0]},e.prototype.findPointPane=function(t){for(var e,i=this.panes,r=0;r<i.length;r++)if(i[r].box.containsPoint(t)){e=i[r];break}return e},e.prototype.appendAxis=function(t){this.findPane(t.options.pane).appendAxis(t),this.axes.push(t),t.plotArea=this},e.prototype.removeAxis=function(t){for(var e=[],i=0;i<this.axes.length;i++){var r=this.axes[i];t!==r?e.push(r):r.destroy()}this.axes=e},e.prototype.appendChart=function(t,e){this.charts.push(t),e?e.appendChart(t):this.append(t)},e.prototype.removeChart=function(t){for(var e=[],i=0;i<this.charts.length;i++){var r=this.charts[i];r!==t?e.push(r):r.destroy()}this.charts=e},e.prototype.addToLegend=function(t){for(var e=t.length,i=this.options.legend,r=i.labels||{},n=i.inactiveItems||{},o=n.labels||{},s=[],a=0;a<e;a++){var l=t[a],c=!1!==l.visible;if(!1!==l.visibleInLegend){var h=l.name,u=c?wa(r):wa(o)||wa(r);u&&(h=u({text:Km(h)?h:"",series:l}));var p=l._defaults,d=l.color;aa(d)&&p&&(d=p.color);var f=void 0,g=void 0;c?(f={},g=d):(f={color:o.color,font:o.font},g=n.markers.color),Km(h)&&""!==h&&s.push({text:h,labels:f,markerColor:g,series:l,active:c})}}Fl(i.items,s)},e.prototype.groupAxes=function(t){for(var e=[],i=[],r=0;r<t.length;r++)for(var n=t[r].axes,o=0;o<n.length;o++){var s=n[o];s.options.vertical?i.push(s):e.push(s)}return{x:e,y:i,any:e.concat(i)}},e.prototype.groupSeriesByPane=function(){for(var t=this.series,e={},i=0;i<t.length;i++){var r=t[i],n=this.seriesPaneName(r);e[n]?e[n].push(r):e[n]=[r]}return e},e.prototype.filterVisibleSeries=function(t){for(var e=[],i=0;i<t.length;i++){var r=t[i];!1!==r.visible&&e.push(r)}return e},e.prototype.reflow=function(t){var e=this.options.plotArea,i=this.panes,r=ma(e.margin);this.box=t.clone().unpad(r),this.reflowPanes(),this.detachLabels(),this.reflowAxes(i),this.reflowCharts(i)},e.prototype.redraw=function(t){var e=[].concat(t);this.initSeries();var i=this.getRoot();i&&i.cleanGradients();for(var r=0;r<e.length;r++)this.removeCrosshairs(e[r]),e[r].empty();this.render(e),this.detachLabels(),this.reflowAxes(this.panes),this.reflowCharts(e),this.createCrosshairs(e);for(var n=0;n<e.length;n++)e[n].refresh()},e.prototype.axisCrossingValues=function(t,e){for(var i=t.options,r=[].concat(i.axisCrossingValues||i.axisCrossingValue),n=e.length-r.length,o=r[0]||0,s=0;s<n;s++)r.push(o);return r},e.prototype.alignAxisTo=function(t,e,i,r){var n=t.getSlot(i,i,!0),o=t.options.reverse?2:1,s=e.getSlot(r,r,!0),a=e.options.reverse?2:1,l=t.box.translate(s[Ys+a]-n[Ys+o],s[Js+a]-n[Js+o]);t.pane!==e.pane&&l.translate(0,t.pane.box.y1-e.pane.box.y1),t.reflow(l)},e.prototype.alignAxes=function(t,e){for(var i=this,r=t[0],n=e[0],o=this.axisCrossingValues(r,e),s=this.axisCrossingValues(n,t),a={},l={},c={},h={},u=0;u<e.length;u++){var p=e[u],d=p.pane,f=d.id,g=!1!==p.options.visible,m=Fy(t,d)||r,y=o;m!==r&&(y=i.axisCrossingValues(m,e)),i.alignAxisTo(p,m,s[u],y[u]),p.options._overlap||(Xl(p.lineBox().x1)===Xl(m.lineBox().x1)&&(a[f]&&p.reflow(p.box.alignTo(a[f].box,Ns).translate(-p.options.margin,0)),g&&(a[f]=p)),Xl(p.lineBox().x2)===Xl(m.lineBox().x2)&&(p._mirrored||(p.options.labels.mirror=!p.options.labels.mirror,p._mirrored=!0),i.alignAxisTo(p,m,s[u],y[u]),l[f]&&p.reflow(p.box.alignTo(l[f].box,Hs).translate(p.options.margin,0)),g&&(l[f]=p)),0!==u&&n.pane===p.pane&&(p.alignTo(n),p.reflow(p.box)))}for(var v=0;v<t.length;v++){var b=t[v],w=b.pane,x=w.id,S=!1!==b.options.visible,k=Fy(e,w)||n,C=s;k!==n&&(C=i.axisCrossingValues(k,t)),i.alignAxisTo(b,k,o[v],C[v]),b.options._overlap||(Xl(b.lineBox().y1)===Xl(k.lineBox().y1)&&(b._mirrored||(b.options.labels.mirror=!b.options.labels.mirror,b._mirrored=!0),i.alignAxisTo(b,k,o[v],C[v]),c[x]&&b.reflow(b.box.alignTo(c[x].box,Ws).translate(0,-b.options.margin)),S&&(c[x]=b)),Xl(b.lineBox().y2,3)===Xl(k.lineBox().y2,3)&&(h[x]&&b.reflow(b.box.alignTo(h[x].box,Ts).translate(0,b.options.margin)),S&&(h[x]=b)),0!==v&&(b.alignTo(r),b.reflow(b.box)))}},e.prototype.shrinkAxisWidth=function(t){for(var e=this.groupAxes(t).any,i=Dy(e),r=0,n=0;n<t.length;n++){var o=t[n];o.axes.length>0&&(r=Math.max(r,i.width()-o.contentBox.width()))}if(0!==r)for(var s=0;s<e.length;s++){var a=e[s];a.options.vertical||a.reflow(a.box.shrink(r,0))}},e.prototype.shrinkAxisHeight=function(t){for(var e,i=0;i<t.length;i++){var r=t[i],n=r.axes,o=Math.max(0,Dy(n).height()-r.contentBox.height());if(0!==o){for(var s=0;s<n.length;s++){var a=n[s];a.options.vertical&&a.reflow(a.box.shrink(0,o))}e=!0}}return e},e.prototype.fitAxes=function(t){for(var e=this.groupAxes(t).any,i=0,r=0;r<t.length;r++){var n=t[r],o=n.axes,s=n.contentBox;if(o.length>0){var a=Dy(o),l=Math.max(s.y1-a.y1,s.y2-a.y2);i=Math.max(i,s.x1-a.x1);for(var c=0;c<o.length;c++){var h=o[c];h.reflow(h.box.translate(0,l))}}}for(var u=0;u<e.length;u++){var p=e[u];p.reflow(p.box.translate(i,0))}},e.prototype.reflowAxes=function(t){for(var e=this.groupAxes(t),i=0;i<t.length;i++)this.reflowPaneAxes(t[i]);e.x.length>0&&e.y.length>0&&(this.alignAxes(e.x,e.y),this.shrinkAxisWidth(t),this.autoRotateAxisLabels(e),this.alignAxes(e.x,e.y),this.shrinkAxisWidth(t)&&this.alignAxes(e.x,e.y),this.shrinkAxisHeight(t),this.alignAxes(e.x,e.y),this.shrinkAxisHeight(t)&&this.alignAxes(e.x,e.y),this.fitAxes(t))},e.prototype.autoRotateAxisLabels=function(t){for(var e,i=this.panes,r=Ry(i),n=0;n<r.length;n++){r[n].autoRotateLabels()&&(e=!0)}if(e){for(var o=0;o<i.length;o++)this.reflowPaneAxes(i[o]);t.x.length>0&&t.y.length>0&&(this.alignAxes(t.x,t.y),this.shrinkAxisWidth(i))}},e.prototype.reflowPaneAxes=function(t){var e=t.axes,i=e.length;if(i>0)for(var r=0;r<i;r++)e[r].reflow(t.contentBox)},e.prototype.reflowCharts=function(t){for(var e=this.charts,i=e.length,r=this.box,n=0;n<i;n++){var o=e[n].pane;o&&!Oa(o,t)||e[n].reflow(r)}},e.prototype.reflowPanes=function(){for(var t=this.box,e=this.panes,i=e.length,r=t.height(),n=0,o=t.y1,s=0;s<i;s++){var a=e[s],l=a.options.height;if(a.options.width=t.width(),a.options.height){if(l.indexOf&&l.indexOf("%")){var c=parseInt(l,10)/100;a.options.height=c*t.height()}a.reflow(t.clone()),r-=a.options.height}else n++}for(var h=0;h<i;h++){var u=e[h];u.options.height||(u.options.height=r/n)}for(var p=0;p<i;p++){var d=e[p],f=t.clone().move(t.x1,o);d.reflow(f),o+=d.options.height}},e.prototype.backgroundBox=function(){for(var t,e=this.axes,i=e.length,r=0;r<i;r++)for(var n=e[r],o=0;o<i;o++){var s=e[o];if(n.options.vertical!==s.options.vertical){var a=n.lineBox().clone().wrap(s.lineBox());t=t?t.wrap(a):a}}return t||this.box},e.prototype.chartsBoxes=function(){for(var t=this.panes,e=[],i=0;i<t.length;i++)e.push(t[i].chartsBox());return e},e.prototype.addBackgroundPaths=function(t){for(var e=this.chartsBoxes(),i=0;i<e.length;i++)t.paths.push(hu.fromRect(e[i].toRect()))},e.prototype.backgroundContainsPoint=function(t){for(var e=this.chartsBoxes(),i=0;i<e.length;i++)if(e[i].containsPoint(t))return!0},e.prototype.createVisual=function(){t.prototype.createVisual.call(this);var e,i=this.options.plotArea,r=i.opacity,n=i.background,o=i.border;void 0===o&&(o={}),""!==(e=n)&&null!==e&&"none"!==e&&"transparent"!==e&&Ll(e)||(n=Gs,r=0);var s=this._bgVisual=new uu({fill:{color:n,opacity:r},stroke:{color:o.width?o.color:"",width:o.width,dashType:o.dashType},zIndex:-1});this.addBackgroundPaths(s),this.appendVisual(s)},e.prototype.pointsByCategoryIndex=function(t){var e=this.charts,i=[];if(null!==t)for(var r=0;r<e.length;r++){if("_navigator"!==e[r].pane.options.name){var n=e[r].categoryPoints[t];if(n&&n.length)for(var o=0;o<n.length;o++){var s=n[o];s&&Ll(s.value)&&null!==s.value&&i.push(s)}}}return i},e.prototype.pointsBySeriesIndex=function(t){return this.filterPoints((function(e){return e.series.index===t}))},e.prototype.pointsBySeriesName=function(t){return this.filterPoints((function(e){return e.series.name===t}))},e.prototype.filterPoints=function(t){for(var e=this.charts,i=[],r=0;r<e.length;r++)for(var n=e[r].points,o=0;o<n.length;o++){var s=n[o];s&&!1!==s.visible&&t(s)&&i.push(s)}return i},e.prototype.findPoint=function(t){for(var e=this.charts,i=0;i<e.length;i++)for(var r=e[i].points,n=0;n<r.length;n++){var o=r[n];if(o&&!1!==o.visible&&t(o))return o}},e.prototype.paneByPoint=function(t){for(var e=this.panes,i=0;i<e.length;i++){var r=e[i];if(r.box.containsPoint(t))return r}},e.prototype.detachLabels=function(){var t=this.groupAxes(this.panes),e=t.x,i=t.y;this.detachAxisGroupLabels(i,e),this.detachAxisGroupLabels(e,i)},e.prototype.detachAxisGroupLabels=function(t,e){for(var i=0,r=0;r<t.length;r++){var n=t[r],o=n.pane,s=Fy(e,o)||e[0],a=r+i,l=this.createLabelAxis(n,a,s);if(l){i++;var c=o.axes.indexOf(n)+i;o.appendAxisAt(l,c)}}},e.prototype.createLabelAxis=function(t,e,i){var r=t.options.labels,n=r.position,o="end"!==n&&"start"!==n,s=r.visible;if(o||!1===s)return null;var a=this.groupAxes(this.panes),l=i.options.vertical?a.x:a.y,c=this.axisCrossingValues(i,l),h="end"===n,u=i.range(),p=h?u.max:u.min;if(Vl(c[e],u.min,u.max)-p==0)return null;c.splice(e+1,0,p),i.options.axisCrossingValues=c;var d=t.clone();return t.clear(),d.options.name=void 0,d.options.line.visible=!1,d.options.crosshair=void 0,d.options.notes=void 0,d.options.plotBands=void 0,d},e}(Ru);function Iy(t){return!t.pane.axes.some((function(e){return e.options.vertical===t.options.vertical&&e!==t&&!1!==e.options.visible}))}function Dy(t){for(var e,i=t.length,r=0;r<i;r++){var n=t[r],o=!1!==n.options.visible;if(o||Iy(n)){var s=o?n.contentBox():n.lineBox();e?e.wrap(s):e=s.clone()}}return e||new Vc}function Fy(t,e){for(var i=0;i<t.length;i++){var r=t[i];if(r&&r.pane===e)return r}}var Ry=function(t){return t.reduce((function(t,e){return t.concat(e.axes)}),[])};Zl(Py,{series:[],plotArea:{margin:{}},background:"",border:{color:_s,width:0},paneDefaults:{title:{}},legend:{inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}}});const Ly=Py;var Ny={hover:function(t,e){this._dispatchEvent(t,e,yg)},click:function(t,e){this._dispatchEvent(t,e,"plotAreaClick")}};const By=Ny;var jy=function(t){function e(e,i,r){t.call(this);var n=i.canonicalFields(e),o=i.valueFields(e),s=i.sourceFields(e,n),a=this._seriesFields=[],l=r.query(e.type),c=e.aggregate||l;this._series=e,this._binder=i;for(var h=0;h<n.length;h++){var u=n[h],p=void 0;if(ua(c))p=c[u];else{if(0!==h&&!Oa(u,o))break;p=c}p&&a.push({canonicalName:u,name:s[h],transform:aa(p)?p:yf[p]})}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.aggregatePoints=function(t,e){var i=this._series,r=this._seriesFields,n=this._bindPoints(t||[]),o=n.dataItems[0],s={};if(o&&!na(o)&&!Zs(o)){var a=function(){};a.prototype=o,s=new a}for(var l=0;l<r.length;l++){var c=r[l],h=this._bindField(n.values,c.canonicalName),u=c.transform(h,i,n.dataItems,e);if(!(null===u||!ua(u)||Ll(u.length)||u instanceof Date)){s=u;break}Ll(u)&&zy(c.name,s,u)}return s},e.prototype._bindPoints=function(t){for(var e=this._binder,i=this._series,r=[],n=[],o=0;o<t.length;o++){var s=t[o];r.push(e.bindPoint(i,s)),n.push(i.data[s])}return{values:r,dataItems:n}},e.prototype._bindField=function(t,e){for(var i=[],r=t.length,n=0;n<r;n++){var o=t[n],s=o.valueFields,a=void 0;a=Ll(s[e])?s[e]:o.fields[e],i.push(a)}return i},e}(ml);function zy(t,e,i){var r=e,n=t;if(t.indexOf(".")>-1){for(var o=t.split(".");o.length>1;)n=o.shift(),Ll(r[n])||(r[n]={}),r=r[n];n=o.shift()}r[n]=i}const Uy=jy;var $y=function(t){function e(){t.call(this),this._defaults={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.register=function(t,e){for(var i=0;i<t.length;i++)this._defaults[t[i]]=e},e.prototype.query=function(t){return this._defaults[t]},e}(ml);$y.current=new $y;const Hy=$y;var Vy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createLabel=function(){var t=this.options.labels,e=ha({},t,t.from),i=ha({},t,t.to);e.visible&&(this.labelFrom=this._createLabel(e),this.append(this.labelFrom)),i.visible&&(this.labelTo=this._createLabel(i),this.append(this.labelTo))},e.prototype._createLabel=function(t){var e,i=wa(t),r=this.pointData();return e=i?i(r):this.formatValue(t.format),new Cm(e,ha({vertical:this.options.vertical},t),r)},e.prototype.reflow=function(t){this.render();var e=this,i=e.labelFrom,r=e.labelTo,n=e.value;this.box=t,i&&(i.options.aboveAxis=n.from>n.to,i.reflow(t)),r&&(r.options.aboveAxis=n.to>n.from,r.reflow(t)),this.note&&this.note.reflow(t)},e}(Tm);Vy.prototype.defaults=ha({},Vy.prototype.defaults,{labels:{format:"{0} - {1}"},tooltip:{format:"{1}"}});const qy=Vy;var Wy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointType=function(){return qy},e.prototype.pointValue=function(t){return t.valueFields},e.prototype.formatPointValue=function(t,e){return null===t.value.from&&null===t.value.to?"":this.chartService.format.auto(e,t.value.from,t.value.to)},e.prototype.plotRange=function(t){return t?[t.value.from,t.value.to]:0},e.prototype.updateRange=function(t,e){var i=e.series.axis,r=t.from,n=t.to,o=this.valueAxisRanges[i];null!==t&&na(r)&&na(n)&&((o=this.valueAxisRanges[i]=o||{min:Bs,max:js}).min=Math.min(o.min,r),o.max=Math.max(o.max,r),o.min=Math.min(o.min,n),o.max=Math.max(o.max,n))},e.prototype.aboveAxis=function(t){var e=t.value;return e.from<e.to},e}(Rm);Wy.prototype.plotLimits=$g.prototype.plotLimits;const Xy=Wy;var Gy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.aliasFor=function(){return this.parent},e}(Gg);const Ky=Gy;var Yy="auto",Jy=function(t){function e(e,i){t.call(this),this.value=e,this.options=i,this.aboveAxis=Kl(this.options.aboveAxis,!0),this.tooltipTracking=!0,this.initLabelsFormat()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){if(!this._rendered){this._rendered=!0;var t=this.options,e=t.markers,i=t.labels,r=this.value,n=this.fromPoint=new Ky(r,ha({},this.options,{labels:i.from,markers:e.from})),o=this.toPoint=new Ky(r,ha({},this.options,{labels:i.to,markers:e.to}));this.copyFields(n),this.copyFields(o),this.append(n),this.append(o)}},e.prototype.reflow=function(t){this.render();var e=t.from,i=t.to;this.positionLabels(e,i),this.fromPoint.reflow(e),this.toPoint.reflow(i),this.box=this.fromPoint.markerBox().clone().wrap(this.toPoint.markerBox())},e.prototype.createHighlight=function(){var t=new ku;return t.append(this.fromPoint.createHighlight()),t.append(this.toPoint.createHighlight()),t},e.prototype.highlightVisual=function(){return this.visual},e.prototype.highlightVisualArgs=function(){return{options:this.options,from:this.fromPoint.highlightVisualArgs(),to:this.toPoint.highlightVisualArgs()}},e.prototype.tooltipAnchor=function(){var t=this.owner.pane.clipBox();if(!t||t.overlaps(this.box)){var e,i,r,n=this.box,o=n.center();return this.options.vertical?(e=o.x,i=n.y1-5,r=Ts):(e=n.x2+5,i=o.y,r=Os),{point:new Ec(e,i),align:{horizontal:"left",vertical:r}}}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.overlapsBox=function(t){return this.box.overlaps(t)},e.prototype.unclipElements=function(){this.fromPoint.unclipElements(),this.toPoint.unclipElements()},e.prototype.initLabelsFormat=function(){var t=this.options.labels;t.format||(t.from&&t.from.format||(t.from=Object.assign({},t.from,{format:"{0}"})),t.to&&t.to.format||(t.to=Object.assign({},t.to,{format:"{1}"})))},e.prototype.positionLabels=function(t,e){var i,r,n=this.options,o=n.labels,s=n.vertical;o.position===Yy&&(s?e.y1<=t.y1?(r=Ff,i=Rf):(r=Rf,i=Ff):e.x1<=t.x1?(r=Ns,i=Hs):(r=Hs,i=Ns),o.from&&o.from.position||(this.fromPoint.options.labels.position=i),o.to&&o.to.position||(this.toPoint.options.labels.position=r))},e.prototype.copyFields=function(t){t.dataItem=this.dataItem,t.category=this.category,t.series=this.series,t.color=this.color,t.owner=this.owner},e}(Ru);ha(Jy.prototype,Vg),ha(Jy.prototype,Wg),Jy.prototype.defaults={markers:{visible:!1,background:Gs,size:8,type:Es,border:{width:2},opacity:1},labels:{visible:!1,margin:ma(3),padding:ma(4),animation:{type:Tf,delay:_f},position:Yy},notes:{label:{}},highlight:{markers:{border:{color:Gs,width:2}},zIndex:100},tooltip:{format:"{0} - {1}"}};const Zy=Jy;var Qy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){return this.segmentsFromPoints(this.toGeometryPoints(this.toPoints()))},e.prototype.stackSegments=function(){var t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.segmentsFromPoints(this.toGeometryPoints(this.fromPoints().reverse()))),t},e.prototype.createStroke=function(t){var e=new hu(t),i=new hu(t);e.segments.push.apply(e.segments,this.strokeSegments()),i.segments.push.apply(i.segments,this.stackSegments()),this.visual.append(e),this.visual.append(i)},e.prototype.hasStackSegment=function(){return!0},e.prototype.fromPoints=function(){return this.linePoints.map((function(t){return t.fromPoint}))},e.prototype.toPoints=function(){return this.linePoints.map((function(t){return t.toPoint}))},e}(fm);const tv=Qy;var ev=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){return this.createCurveSegments(this.toPoints())},e.prototype.stackSegments=function(){var t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.createCurveSegments(this.fromPoints().reverse())),t},e.prototype.createCurveSegments=function(t){return(new af).process(this.toGeometryPoints(t))},e}(tv);const iv=ev;var rv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){return this.segmentsFromPoints(this.calculateStepPoints(this.toPoints()))},e.prototype.stackSegments=function(){var t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.segmentsFromPoints(this.calculateStepPoints(this.fromPoints()))).reverse(),t},e}(tv);ha(rv.prototype,Qg);const nv=rv;var ov=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.renderSegments()},e.prototype.pointType=function(){return Zy},e.prototype.createPoint=function(t,e){var i=e.categoryIx,r=e.category,n=e.series,o=e.seriesIx,s=t.valueFields;if(!Km(s.from)&&!Km(s.to)){if(this.seriesMissingValues(n)!==If)return null;s={from:0,to:0}}var a=this.pointOptions(n,o);a=this.evalPointOptions(a,s,r,i,n,o);var l=t.fields.color||n.color;aa(n.color)&&(l=a.color);var c=new Zy(s,a);return c.color=l,this.append(c),c},e.prototype.createSegment=function(t,e,i){var r=(e.line||{}).style;return new("smooth"===r?iv:"step"===r?nv:tv)(t,e,i)},e.prototype.plotRange=function(t,e){return t?[t.value.from,t.value.to]:[e,e]},e.prototype.valueSlot=function(t,e){var i=t.getSlot(e[0],e[0],!this.options.clip),r=t.getSlot(e[1],e[1],!this.options.clip);if(i&&r)return{from:i,to:r}},e.prototype.pointSlot=function(t,e){var i,r,n=e.from,o=e.to;return this.options.invertAxes?(i=new Vc(n.x1,t.y1,n.x2,t.y2),r=new Vc(o.x1,t.y1,o.x2,t.y2)):(i=new Vc(t.x1,n.y1,t.x2,n.y2),r=new Vc(t.x1,o.y1,t.x2,o.y2)),{from:i,to:r}},e.prototype.addValue=function(e,i){var r=e.valueFields;na(r.from)||(r.from=r.to),na(r.to)||(r.to=r.from),t.prototype.addValue.call(this,e,i)},e.prototype.updateRange=function(t,e){if(null!==t&&na(t.from)&&na(t.to)){var i=e.series.axis,r=this.valueAxisRanges[i]=this.valueAxisRanges[i]||{min:Bs,max:js},n=t.from,o=t.to;r.min=Math.min(r.min,n,o),r.max=Math.max(r.max,n,o)}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.from,i.to)},e.prototype.animationPoints=function(){for(var t=this.points,e=[],i=0;i<t.length;i++){var r=t[i];r&&(e.push((r.fromPoint||{}).marker),e.push((r.toPoint||{}).marker))}return e.concat(this._segments)},e}($g);ha(ov.prototype,om,hm);const sv=ov;var av=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this,i=e.options,r=e.value,n=e.owner.seriesValueAxis(i),o=[],s=[],a=[],l=n.getSlot(r.low,r.high),c=n.getSlot(r.open,r.open),h=n.getSlot(r.close,r.close);c.x1=h.x1=l.x1=t.x1,c.x2=h.x2=l.x2=t.x2;var u=l.center().x;o.push([c.x1,c.y1]),o.push([u,c.y1]),s.push([u,h.y1]),s.push([h.x2,h.y1]),a.push([u,l.y1]),a.push([u,l.y2]),this.lines=[o,s,a],this.box=l.clone().wrap(c.clone().wrap(h)),this.reflowNote()},e.prototype.createBody=function(){},e}(Nm);const lv=av;var cv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointType=function(){return lv},e}(zm);const hv=cv;var uv=function(t){function e(e,i,r){t.call(this),this.from=e,this.to=i,this.series=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linePoints=function(){var t=this.from,e=this.from.box,i=this.to.box,r=[];if(t.isVertical){var n=t.aboveAxis?e.y1:e.y2;r.push([e.x1,n],[i.x2,n])}else{var o=t.aboveAxis?e.x2:e.x1;r.push([o,e.y1],[o,i.y2])}return r},e.prototype.createVisual=function(){t.prototype.createVisual.call(this);var e=this.series.line||{},i=hu.fromPoints(this.linePoints(),{stroke:{color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType}});ia(i),this.visual.append(i)},e}(Ru);Zl(uv,{animation:{type:Tf,delay:_f}});const pv=uv;var dv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.createSegments()},e.prototype.traverseDataPoints=function(t){for(var e=this.options.series,i=zg(e),r=!this.options.invertAxes,n=0;n<e.length;n++)for(var o=e[n],s=0,a=0,l=0;l<i;l++){var c=wf.current.bindPoint(o,l),h=c.valueFields.value,u=c.fields.summary,p=s,d=void 0;u?"total"===u.toLowerCase()?(c.valueFields.value=s,p=0,d=s):(c.valueFields.value=a,d=p-a,a=0):na(h)&&(a+=h,d=s+=h),t(c,{category:this.categoryAxis.categoryAt(l),categoryIx:l,series:o,seriesIx:n,total:s,runningTotal:a,from:p,to:d,isVertical:r})}},e.prototype.updateRange=function(e,i){t.prototype.updateRange.call(this,{value:i.to},i)},e.prototype.aboveAxis=function(t){return t.value>=0},e.prototype.plotRange=function(t){return[t.from,t.to]},e.prototype.createSegments=function(){for(var t=this.options.series,e=this.seriesPoints,i=this.segments=[],r=0;r<t.length;r++){var n=t[r],o=e[r];if(o)for(var s=void 0,a=0;a<o.length;a++){var l=o[a];if(l&&s){var c=new pv(s,l,n);i.push(c),this.append(c)}s=l}}},e}(Rm);const fv=dv;var gv=[Bf,cg,ng,dg],mv=[Kf,pg].concat(gv),yv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(t){if(this.namedCategoryAxes={},this.namedValueAxes={},this.valueAxisRangeTracker=new Sm,t.length>0){this.invertAxes=Oa(t[0].type,[jf,$f,pg,cg,dg,og,Gf,hg]);for(var e=0;e<t.length;e++){var i=t[e].stack;if(i&&"100%"===i.type){this.stack100=!0;break}}}},e.prototype.render=function(t){void 0===t&&(t=this.panes),this.createCategoryAxes(t),this.aggregateCategories(t),this.createCategoryAxesLabels(t),this.createCharts(t),this.createValueAxes(t)},e.prototype.removeAxis=function(e){var i=e.options.name;t.prototype.removeAxis.call(this,e),e instanceof bd?delete this.namedCategoryAxes[i]:(this.valueAxisRangeTracker.reset(i),delete this.namedValueAxes[i]),e===this.categoryAxis&&delete this.categoryAxis,e===this.valueAxis&&delete this.valueAxis},e.prototype.createCharts=function(t){for(var e=this,i=this.groupSeriesByPane(),r=0;r<t.length;r++){var n=t[r],o=i[n.options.name||"default"]||[];e.addToLegend(o);var s=e.filterVisibleSeries(o);if(s)for(var a=e.groupSeriesByCategoryAxis(s),l=0;l<a.length;l++)e.createChartGroup(a[l],n)}},e.prototype.createChartGroup=function(t,e){this.createAreaChart(ky(t,[Bf,cg]),e),this.createRangeAreaChart(ky(t,[ng,dg]),e),this.createBarChart(ky(t,[Vf,jf]),e),this.createRangeBarChart(ky(t,[sg,og]),e),this.createBulletChart(ky(t,[$f,ug]),e),this.createCandlestickChart(ky(t,Hf),e),this.createBoxPlotChart(ky(t,[zf,hg]),e),this.createOHLCChart(ky(t,Yf),e),this.createWaterfallChart(ky(t,[fg,Gf]),e),this.createLineChart(ky(t,[Kf,pg]),e)},e.prototype.aggregateCategories=function(t){var e=this,i=this.srcSeries||this.series,r=[];this._currentPointsCache={},this._seriesPointsCache=this._seriesPointsCache||{};for(var n=0;n<i.length;n++){var o=i[n],s=e.seriesCategoryAxis(o),a=e.findPane(s.options.pane);o=(Sy(s.options.type,Ps)||o.categoryField)&&Oa(a,t)?e.aggregateSeries(o,s):e.filterSeries(o,s),r.push(o)}this._seriesPointsCache=this._currentPointsCache,this._currentPointsCache=null,this.srcSeries=i,this.series=r},e.prototype.filterSeries=function(t,e){var i=(t.data||{}).length;if(e._seriesMax=Math.max(e._seriesMax||0,i),!na(e.options.min)&&!na(e.options.max))return t;var r=e.currentRangeIndices(),n=Oa(t.type,mv),o=ha({},t);return o.data=(o.data||[]).slice(r.min,r.max+1),n&&My(o,r,i,(function(i){return{item:t.data[i],category:e.categoryAt(i,!0),categoryIx:i-r.min}}),(function(e){return Ll(t.data[e])})),o},e.prototype.clearSeriesPointsCache=function(){this._seriesPointsCache={}},e.prototype.seriesSourcePoints=function(t,e){var i=t.index+";"+e.categoriesHash();if(this._seriesPointsCache[i])return this._currentPointsCache[i]=this._seriesPointsCache[i],this._seriesPointsCache[i];var r=e.options,n=r.srcCategories,o=Sy(r.type,Ps),s=t.data,a=o?Cy:vf,l=[];o||e.mapCategories();for(var c=0;c<s.length;c++){var h=void 0;if(h=t.categoryField?a(t.categoryField,s[c],this.chartService.intl):n[c],Ll(h)&&null!==h){var u=e.totalIndex(h);l[u]=l[u]||{items:[],category:h},l[u].items.push(c)}}return this._currentPointsCache[i]=l,l},e.prototype.aggregateSeries=function(t,e){if(!t.data.length)return t;for(var i=this.seriesSourcePoints(t,e),r=ha({},t),n=new Uy(ha({},t),wf.current,Hy.current),o=r.data=[],s=e.options.dataItems||[],a=e.currentRangeIndices(),l=function(t){var r=t-a.min,o=i[t];if(o||(o=i[t]={}),o.categoryIx=r,!o.item){var s=e.categoryAt(t,!0);o.category=s,o.item=n.aggregatePoints(o.items,s)}return o},c=a.min;c<=a.max;c++){var h=l(c);o[h.categoryIx]=h.item,h.items&&h.items.length&&(s[h.categoryIx]=h.item)}return Oa(r.type,mv)&&My(r,a,e.totalCount(),l,(function(t){return i[t]})),e.options.dataItems=s,r},e.prototype.appendChart=function(e,i){var r=e.options.series,n=this.seriesCategoryAxis(r[0]),o=n.options.categories,s=Math.max(0,zg(r)-o.length);if(s>0)for(o=n.options.categories=n.options.categories.slice(0);s--;)o.push("");this.valueAxisRangeTracker.update(e.valueAxisRanges),t.prototype.appendChart.call(this,e,i)},e.prototype.seriesPaneName=function(t){var e=this.options,i=t.axis,r=Ca([].concat(e.valueAxis),(function(t){return t.name===i}))[0],n=((e.panes||[{}])[0]||{}).name||"default";return(r||{}).pane||n},e.prototype.seriesCategoryAxis=function(t){var e=t.categoryAxis,i=e?this.namedCategoryAxes[e]:this.categoryAxis;if(!i)throw new Error("Unable to locate category axis with name "+e);return i},e.prototype.stackableChartOptions=function(t,e){var i=t.stack;return{isStacked:i,isStacked100:i&&"100%"===i.type,clip:e.options.clip}},e.prototype.groupSeriesByCategoryAxis=function(t){for(var e=[],i={},r=0;r<t.length;r++){var n=t[r].categoryAxis||"$$default$$";i.hasOwnProperty(n)||(i[n]=!0,e.push(n))}for(var o=[],s=0;s<e.length;s++){var a=bv(t,e[s],s);0!==a.length&&o.push(a)}return o},e.prototype.createBarChart=function(t,e){if(0!==t.length){var i=t[0],r=new Rm(this,Object.assign({series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing},this.stackableChartOptions(i,e)));this.appendChart(r,e)}},e.prototype.createRangeBarChart=function(t,e){if(0!==t.length){var i=t[0],r=new Xy(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing});this.appendChart(r,e)}},e.prototype.createBulletChart=function(t,e){if(0!==t.length){var i=t[0],r=new ay(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing,clip:e.options.clip});this.appendChart(r,e)}},e.prototype.createLineChart=function(t,e){if(0!==t.length){var i=t[0],r=new pm(this,Object.assign({invertAxes:this.invertAxes,series:t},this.stackableChartOptions(i,e)));this.appendChart(r,e)}},e.prototype.createAreaChart=function(t,e){if(0!==t.length){var i=t[0],r=new wm(this,Object.assign({invertAxes:this.invertAxes,series:t},this.stackableChartOptions(i,e)));this.appendChart(r,e)}},e.prototype.createRangeAreaChart=function(t,e){if(0!==t.length){var i=new sv(this,{invertAxes:this.invertAxes,series:t,clip:e.options.clip});this.appendChart(i,e)}},e.prototype.createOHLCChart=function(t,e){if(0!==t.length){var i=t[0],r=new hv(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(r,e)}},e.prototype.createCandlestickChart=function(t,e){if(0!==t.length){var i=t[0],r=new zm(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(r,e)}},e.prototype.createBoxPlotChart=function(t,e){if(0!==t.length){var i=t[0],r=new Wm(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(r,e)}},e.prototype.createWaterfallChart=function(t,e){if(0!==t.length){var i=t[0],r=new fv(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing});this.appendChart(r,e)}},e.prototype.axisRequiresRounding=function(t,e){for(var i=ky(this.series,gg),r=0;r<this.series.length;r++){var n=this.series[r];if(Oa(n.type,gv)){var o=n.line;o&&o.style===Nf&&i.push(n)}}for(var s=0;s<i.length;s++){var a=i[s].categoryAxis||"";if(a===t||!a&&0===e)return!0}},e.prototype.aggregatedAxis=function(t,e){for(var i=this.series,r=0;r<i.length;r++){var n=i[r].categoryAxis||"";if((n===t||!n&&0===e)&&i[r].categoryField)return!0}},e.prototype.createCategoryAxesLabels=function(){for(var t=this.axes,e=0;e<t.length;e++)t[e]instanceof bd&&t[e].createLabels()},e.prototype.createCategoryAxes=function(t){for(var e=this,i=this.invertAxes,r=[].concat(this.options.categoryAxis),n=[],o=0;o<r.length;o++){var s=r[o];if(Oa(e.findPane(s.pane),t)){var a=s.name,l=s.categories;void 0===l&&(l=[]),s=ha({vertical:i,reverse:!i&&e.chartService.rtl,axisCrossingValue:i?Bs:0},s),Ll(s.justified)||(s.justified=e.isJustified()),e.axisRequiresRounding(a,o)&&(s.justified=!1);var c=void 0;if(c=Ay(s,l[0])?new Md(s,e.chartService):new bd(s,e.chartService),r[o].categories=c.options.srcCategories,a){if(e.namedCategoryAxes[a])throw new Error("Category axis with name "+a+" is already defined");e.namedCategoryAxes[a]=c}c.axisIndex=o,n.push(c),e.appendAxis(c)}}var h=this.categoryAxis||n[0];this.categoryAxis=h,i?this.axisY=h:this.axisX=h},e.prototype.isJustified=function(){for(var t=this.series,e=0;e<t.length;e++){if(!Oa(t[e].type,gv))return!1}return!0},e.prototype.createValueAxes=function(t){var e=this,i=this.valueAxisRangeTracker,r=i.query(),n=[].concat(this.options.valueAxis),o=this.invertAxes,s={vertical:!o,reverse:o&&this.chartService.rtl},a=[];this.stack100&&(s.roundToMajorUnit=!1,s.labels={format:"P0"});for(var l=0;l<n.length;l++){var c=n[l];if(Oa(e.findPane(c.pane),t)){var h=c.name,u=Sy(c.type,Mg)?{min:.1,max:1}:{min:0,max:1},p=i.query(h)||r||u;0===l&&p&&r&&(p.min=Math.min(p.min,r.min),p.max=Math.max(p.max,r.max));var d=new(Sy(c.type,Mg)?Vd:Nd)(p.min,p.max,ha({},s,c),e.chartService);if(h){if(e.namedValueAxes[h])throw new Error("Value axis with name "+h+" is already defined");e.namedValueAxes[h]=d}d.axisIndex=l,a.push(d),e.appendAxis(d)}}var f=this.valueAxis||a[0];this.valueAxis=f,o?this.axisX=f:this.axisY=f},e.prototype._dispatchEvent=function(t,e,i){var r=t._eventCoordinates(e),n=new Ec(r.x,r.y),o=this.pointPane(n),s=[],a=[];if(o){for(var l=o.axes,c=0;c<l.length;c++){var h=l[c];h.getValue?by(a,h.getValue(n)):by(s,h.getCategory(n))}0===s.length&&by(s,this.categoryAxis.getCategory(n)),s.length>0&&a.length>0&&t.trigger(i,{element:Ul(e),originalEvent:e,category:_y(s),value:_y(a)})}},e.prototype.pointPane=function(t){for(var e=this.panes,i=0;i<e.length;i++){var r=e[i];if(r.contentBox.containsPoint(t))return r}},e.prototype.updateAxisOptions=function(t,e){vv(this.options,t,e),vv(this.originalOptions,t,e)},e}(Ly);function vv(t,e,i){ha([].concat(e instanceof bd?t.categoryAxis:t.valueAxis)[e.axisIndex],i)}function bv(t,e,i){return Ca(t,(function(t){return 0===i&&!t.categoryAxis||t.categoryAxis===e}))}Zl(yv,{categoryAxis:{},valueAxis:{}}),ha(yv.prototype,By);const wv=yv;var xv=function(t){function e(){t.call(this),this._events={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(t,e,i){var r=arguments,n=this,o=kv(t),s=Sv(e),a=o.length;if(void 0===e){for(var l in t)n.bind(l,t[l]);return this}for(var c=function(t){var a=o[t],l=s?e:e[a];if(l){if(i){var c=l;(l=function(){n.unbind(a,l),c.apply(n,r)}).original=c}(n._events[a]=n._events[a]||[]).push(l)}},h=0;h<a;h++)c(h);return this},e.prototype.one=function(t,e){return this.bind(t,e,!0)},e.prototype.first=function(t,e){for(var i=kv(t),r=Sv(e),n=0,o=i.length;n<o;n++){var s=i[n],a=r?e:e[s];if(a)(this._events[s]=this._events[s]||[]).unshift(a)}return this},e.prototype.trigger=function(t,e){void 0===e&&(e={});var i=this._events[t];if(i){var r=i.length;e.sender=this,e._defaultPrevented=!1,e.preventDefault=Cv,e.isDefaultPrevented=Av,i=i.slice();for(var n=0;n<r;n++)i[n].call(this,e);return!0===e._defaultPrevented}return!1},e.prototype.unbind=function(t,e){var i=this._events[t];if(void 0===t)this._events={};else if(i)if(e)for(var r=i.length-1;r>=0;r--)i[r]!==e&&i[r].original!==e||i.splice(r,1);else this._events[t]=[];return this},e}(ml);function Sv(t){return"function"==typeof t}function kv(t){return"string"==typeof t?[t]:t}function Cv(){this._defaultPrevented=!0}function Av(){return!0===this._defaultPrevented}var _v=["click","mouseenter","mouseleave","mousemove","resize"],Tv=function(t){function e(e,i){t.call(this),this.options=Object.assign({},i),this.element=e,this.element._kendoExportVisual=this.exportVisual.bind(this),this._click=this._handler("click"),this._mouseenter=this._handler("mouseenter"),this._mouseleave=this._handler("mouseleave"),this._mousemove=this._handler("mousemove"),this._visual=new ku,dl(e,this.options),this.bind(_v,this.options),this._enableTracking()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.draw=function(t){this._visual.children.push(t)},e.prototype.clear=function(){this._visual.children=[]},e.prototype.destroy=function(){this._visual=null,this.element._kendoExportVisual=null,this.unbind()},e.prototype.eventTarget=function(t){for(var e,i=tl(t);!e&&i&&(e=i._kendoNode,i!==this.element);)i=i.parentElement;if(e)return e.srcElement},e.prototype.exportVisual=function(){return this._visual},e.prototype.getSize=function(){return dl(this.element)},e.prototype.currentSize=function(t){if(!t)return this._size;this._size=t},e.prototype.setSize=function(t){dl(this.element,t),this.currentSize(t),this._resize()},e.prototype.resize=function(t){var e=this.getSize(),i=this.currentSize();(t||(e.width>0||e.height>0)&&(!i||e.width!==i.width||e.height!==i.height))&&(this.currentSize(e),this._resize(e,t),this.trigger("resize",e))},e.prototype.size=function(t){if(!t)return this.getSize();this.setSize(t)},e.prototype.suspendTracking=function(){this._suspendedTracking=!0},e.prototype.resumeTracking=function(){this._suspendedTracking=!1},e.prototype._enableTracking=function(){},e.prototype._resize=function(){},e.prototype._handler=function(t){var e=this;return function(i){var r=e.eventTarget(i);r&&!e._suspendedTracking&&e.trigger(t,{element:r,originalEvent:i,type:t})}},e.prototype._elementOffset=function(){var t=this.element,e=gl(t),i=hl(t),r=i.left,n=i.top;return{left:r+e.left,top:n+e.top}},e.prototype._surfacePoint=function(t){var e=this._elementOffset(),i=Qa(t),r=i.x-e.left,n=i.y-e.top,o=xl(this.element).invert();return new Nc(r,n).transform(o)},e}(xv);const Ov=Tv;var Ev=function(t){function e(e){t.call(this),this.childNodes=[],this.parent=null,e&&(this.srcElement=e,this.observe())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.srcElement&&this.srcElement.removeObserver(this);for(var t=this.childNodes,e=0;e<t.length;e++)this.childNodes[e].destroy();this.parent=null},e.prototype.load=function(){},e.prototype.observe=function(){this.srcElement&&this.srcElement.addObserver(this)},e.prototype.append=function(t){this.childNodes.push(t),t.parent=this},e.prototype.insertAt=function(t,e){this.childNodes.splice(e,0,t),t.parent=this},e.prototype.remove=function(t,e){for(var i=t+e,r=t;r<i;r++)this.childNodes[r].removeSelf();this.childNodes.splice(t,e)},e.prototype.removeSelf=function(){this.clear(),this.destroy()},e.prototype.clear=function(){this.remove(0,this.childNodes.length)},e.prototype.invalidate=function(){this.parent&&this.parent.invalidate()},e.prototype.geometryChange=function(){this.invalidate()},e.prototype.optionsChange=function(){this.invalidate()},e.prototype.childrenChange=function(t){"add"===t.action?this.load(t.items,t.index):"remove"===t.action&&this.remove(t.index,t.items.length),this.invalidate()},e}(ml);const Mv=Ev;function Pv(t,e){return ea(e)&&null!==e?" "+t+'="'+e+'" ':""}function Iv(t){for(var e="",i=0;i<t.length;i++)e+=Pv(t[i][0],t[i][1]);return e}function Dv(t){for(var e="",i=0;i<t.length;i++){var r=t[i][1];ea(r)&&(e+=t[i][0]+":"+r+";")}if(""!==e)return e}const Fv={};var Rv="http://www.w3.org/2000/svg",Lv="none",Nv=function(t,e){t.innerHTML=e};if("undefined"!=typeof document){var Bv=document.createElement("div"),jv="undefined"!=typeof DOMParser;Bv.innerHTML="<svg xmlns='http://www.w3.org/2000/svg'></svg>",jv&&Bv.firstChild.namespaceURI!==Rv&&(Nv=function(t,e){var i=(new DOMParser).parseFromString(e,"text/xml"),r=document.adoptNode(i.documentElement);t.innerHTML="",t.appendChild(r)})}const zv=Nv;var Uv="transform",$v={clip:"clip-path",fill:"fill"};function Hv(t,e){return"clip"===t||"fill"===t&&(!e||"Gradient"===e.nodeType)}var Vv=function(t){function e(e,i){t.call(this,e),this.definitions={},this.options=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.element&&(this.element._kendoNode=null,this.element=null),this.clearDefinitions(),t.prototype.destroy.call(this)},e.prototype.load=function(t,e){for(var i=this,r=0;r<t.length;r++){var n=t[r],o=n.children,s=new Fv[n.nodeType](n,i.options);ea(e)?i.insertAt(s,e):i.append(s),s.createDefinitions(),o&&o.length>0&&s.load(o);var a=i.element;a&&s.attachTo(a,e)}},e.prototype.root=function(){for(var t=this;t.parent;)t=t.parent;return t},e.prototype.attachTo=function(t,e){var i=document.createElement("div");zv(i,"<svg xmlns='"+Rv+"' version='1.1'>"+this.render()+"</svg>");var r=i.firstChild.firstChild;r&&(ea(e)?t.insertBefore(r,t.childNodes[e]||null):t.appendChild(r),this.setElement(r))},e.prototype.setElement=function(t){this.element&&(this.element._kendoNode=null),this.element=t,this.element._kendoNode=this;for(var e=this.childNodes,i=0;i<e.length;i++){var r=t.childNodes[i];e[i].setElement(r)}},e.prototype.clear=function(){this.clearDefinitions(),this.element&&(this.element.innerHTML="");for(var t=this.childNodes,e=0;e<t.length;e++)t[e].destroy();this.childNodes=[]},e.prototype.removeSelf=function(){if(this.element){var e=this.element.parentNode;e&&e.removeChild(this.element),this.element=null}t.prototype.removeSelf.call(this)},e.prototype.template=function(){return this.renderChildren()},e.prototype.render=function(){return this.template()},e.prototype.renderChildren=function(){for(var t=this.childNodes,e="",i=0;i<t.length;i++)e+=t[i].render();return e},e.prototype.optionsChange=function(e){var i=e.field,r=e.value;"visible"===i?this.css("display",r?"":Lv):$v[i]&&Hv(i,r)?this.updateDefinition(i,r):"opacity"===i?this.attr("opacity",r):"cursor"===i?this.css("cursor",r):"id"===i&&(r?this.attr("id",r):this.removeAttr("id")),t.prototype.optionsChange.call(this,e)},e.prototype.attr=function(t,e){this.element&&this.element.setAttribute(t,e)},e.prototype.allAttr=function(t){for(var e=0;e<t.length;e++)this.attr(t[e][0],t[e][1])},e.prototype.css=function(t,e){this.element&&(this.element.style[t]=e)},e.prototype.allCss=function(t){for(var e=0;e<t.length;e++)this.css(t[e][0],t[e][1])},e.prototype.removeAttr=function(t){this.element&&this.element.removeAttribute(t)},e.prototype.mapTransform=function(t){var e=[];return t&&e.push([Uv,"matrix("+t.matrix().toString(6)+")"]),e},e.prototype.renderTransform=function(){return Iv(this.mapTransform(this.srcElement.transform()))},e.prototype.transformChange=function(t){t?this.allAttr(this.mapTransform(t)):this.removeAttr(Uv)},e.prototype.mapStyle=function(){var t=this.srcElement.options,e=[["cursor",t.cursor]];return!1===t.visible&&e.push(["display",Lv]),e},e.prototype.renderStyle=function(){return Pv("style",Dv(this.mapStyle(!0)))},e.prototype.renderOpacity=function(){return Pv("opacity",this.srcElement.options.opacity)},e.prototype.renderId=function(){return Pv("id",this.srcElement.options.id)},e.prototype.createDefinitions=function(){var t=this.srcElement,e=this.definitions;if(t){var i,r=t.options;for(var n in $v){var o=r.get(n);o&&Hv(n,o)&&(e[n]=o,i=!0)}i&&this.definitionChange({action:"add",definitions:e})}},e.prototype.definitionChange=function(t){this.parent&&this.parent.definitionChange(t)},e.prototype.updateDefinition=function(t,e){var i=this.definitions,r=i[t],n=$v[t],o={};r&&(o[t]=r,this.definitionChange({action:"remove",definitions:o}),delete i[t]),e?(o[t]=e,this.definitionChange({action:"add",definitions:o}),i[t]=e,this.attr(n,this.refUrl(e.id))):r&&this.removeAttr(n)},e.prototype.clearDefinitions=function(){var t=this.definitions;this.definitionChange({action:"remove",definitions:t}),this.definitions={}},e.prototype.renderDefinitions=function(){return Iv(this.mapDefinitions())},e.prototype.mapDefinitions=function(){var t=this.definitions,e=[];for(var i in t)e.push([$v[i],this.refUrl(t[i].id)]);return e},e.prototype.refUrl=function(t){var e=(this.options||{}).skipBaseHref,i=this.baseUrl().replace(/'/g,"\\'");return"url("+(e?"":i)+"#"+t+")"},e.prototype.baseUrl=function(){return function(){var t=document.getElementsByTagName("base")[0],e=document.location.href,i="";if(t&&!(Na.browser||{}).msie){var r=e.indexOf("#");-1!==r&&(e=e.substring(0,r)),i=e}return i}()},e}(Mv);const qv=Vv;const Wv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<stop "+this.renderOffset()+" "+this.renderStyle()+" />"},e.prototype.renderOffset=function(){return Pv("offset",this.srcElement.offset())},e.prototype.mapStyle=function(){var t=this.srcElement;return[["stop-color",t.color()],["stop-opacity",t.opacity()]]},e.prototype.optionsChange=function(t){"offset"===t.field?this.attr(t.field,t.value):"color"!==t.field&&"opacity"!==t.field||this.css("stop-"+t.field,t.value)},e}(qv);const Xv=function(t){function e(e){t.call(this,e),this.id=e.id,this.loadStops()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.loadStops=function(){for(var t=this.srcElement.stops,e=this.element,i=0;i<t.length;i++){var r=new Wv(t[i]);this.append(r),e&&r.attachTo(e)}},e.prototype.optionsChange=function(t){"gradient.stops"===t.field?(Mv.prototype.clear.call(this),this.loadStops()):"gradient"===t.field&&this.allAttr(this.mapCoordinates())},e.prototype.renderCoordinates=function(){return Iv(this.mapCoordinates())},e.prototype.mapSpace=function(){return["gradientUnits",this.srcElement.userSpace()?"userSpaceOnUse":"objectBoundingBox"]},e}(qv);var Gv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<linearGradient id='"+this.id+"' "+this.renderCoordinates()+">"+this.renderChildren()+"</linearGradient>"},e.prototype.mapCoordinates=function(){var t=this.srcElement,e=t.start(),i=t.end();return[["x1",e.x],["y1",e.y],["x2",i.x],["y2",i.y],this.mapSpace()]},e}(Xv);const Kv=Gv;var Yv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<radialGradient id='"+this.id+"' "+this.renderCoordinates()+">"+this.renderChildren()+"</radialGradient>"},e.prototype.mapCoordinates=function(){var t=this.srcElement,e=t.center(),i=t.radius();return[["cx",e.x],["cy",e.y],["r",i],this.mapSpace()]},e}(Xv);const Jv=Yv;const Zv=function(t){function e(e){t.call(this),this.srcElement=e,this.id=e.id,this.load([e])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<clipPath id='"+this.id+"'>"+this.renderChildren()+"</clipPath>"},e}(qv);var Qv=function(t){function e(){t.call(this),this.definitionMap={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.attachTo=function(t){this.element=t},e.prototype.template=function(){return"<defs>"+this.renderChildren()+"</defs>"},e.prototype.definitionChange=function(t){var e=t.definitions,i=t.action;"add"===i?this.addDefinitions(e):"remove"===i&&this.removeDefinitions(e)},e.prototype.createDefinition=function(t,e){var i;return"clip"===t?i=Zv:"fill"===t&&(e instanceof Ku?i=Kv:e instanceof Ju&&(i=Jv)),new i(e)},e.prototype.addDefinitions=function(t){for(var e in t)this.addDefinition(e,t[e])},e.prototype.addDefinition=function(t,e){var i=this.element,r=this.definitionMap,n=e.id,o=r[n];if(o)o.count++;else{var s=this.createDefinition(t,e);r[n]={element:s,count:1},this.append(s),i&&s.attachTo(this.element)}},e.prototype.removeDefinitions=function(t){for(var e in t)this.removeDefinition(t[e])},e.prototype.removeDefinition=function(t){var e=this.definitionMap,i=t.id,r=e[i];r&&(r.count--,0===r.count&&(this.remove(this.childNodes.indexOf(r.element),1),delete e[i]))},e}(qv);const tb=Qv;var eb=function(t){function e(e){t.call(this),this.options=e,this.defs=new tb}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.attachTo=function(t){this.element=t,this.defs.attachTo(t.firstElementChild)},e.prototype.clear=function(){Mv.prototype.clear.call(this)},e.prototype.template=function(){return this.defs.render()+this.renderChildren()},e.prototype.definitionChange=function(t){this.defs.definitionChange(t)},e}(qv);const ib=eb;var rb={dot:[1.5,3.5],dash:[4,3.5],longdash:[8,3.5],dashdot:[3.5,3.5,1.5,3.5],longdashdot:[8,3.5,1.5,3.5],longdashdotdot:[8,3.5,1.5,3.5,1.5,3.5]},nb="solid",ob="butt",sb={"fill.opacity":"fill-opacity","stroke.color":"stroke","stroke.width":"stroke-width","stroke.opacity":"stroke-opacity"},ab=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){this.attr("d",this.renderData()),this.invalidate()},e.prototype.optionsChange=function(e){switch(e.field){case"fill":e.value?this.allAttr(this.mapFill(e.value)):this.removeAttr("fill");break;case"fill.color":this.allAttr(this.mapFill({color:e.value}));break;case"stroke":e.value?this.allAttr(this.mapStroke(e.value)):this.removeAttr("stroke");break;case"transform":this.transformChange(e.value);break;default:var i=sb[e.field];i&&this.attr(i,e.value)}t.prototype.optionsChange.call(this,e)},e.prototype.content=function(){this.element&&(this.element.textContent=this.srcElement.content())},e.prototype.renderData=function(){return this.srcElement.toString(3)||void 0},e.prototype.mapStroke=function(t){var e=[];return t&&!el(t.color)?(e.push(["stroke",t.color]),e.push(["stroke-width",t.width]),e.push(["stroke-linecap",this.renderLinecap(t)]),e.push(["stroke-linejoin",t.lineJoin]),ea(t.opacity)&&e.push(["stroke-opacity",t.opacity]),ea(t.dashType)&&e.push(["stroke-dasharray",this.renderDashType(t)])):e.push(["stroke",Lv]),e},e.prototype.renderStroke=function(){return Iv(this.mapStroke(this.srcElement.options.stroke))},e.prototype.renderDashType=function(t){var e=t.dashType,i=t.width;if(void 0===i&&(i=1),e&&e!==nb){for(var r=rb[e.toLowerCase()],n=[],o=0;o<r.length;o++)n.push(r[o]*i);return n.join(" ")}},e.prototype.renderLinecap=function(t){var e=t.dashType,i=t.lineCap;return e&&"solid"!==e?ob:i},e.prototype.mapFill=function(t){var e=[];return t&&"Gradient"===t.nodeType||(t&&!el(t.color)?(e.push(["fill",t.color]),ea(t.opacity)&&e.push(["fill-opacity",t.opacity])):e.push(["fill",Lv])),e},e.prototype.renderFill=function(){return Iv(this.mapFill(this.srcElement.options.fill))},e.prototype.template=function(){return"<path "+this.renderId()+" "+this.renderStyle()+" "+this.renderOpacity()+" "+Pv("d",this.renderData())+this.renderStroke()+this.renderFill()+this.renderDefinitions()+this.renderTransform()+"></path>"},e}(qv);const lb=ab;var cb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderData=function(){return this.srcElement.toPath().toString(3)},e}(lb);const hb=cb;var ub=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){var t=this.center();this.attr("cx",t.x),this.attr("cy",t.y),this.attr("r",this.radius()),this.invalidate()},e.prototype.center=function(){return this.srcElement.geometry().center},e.prototype.radius=function(){return this.srcElement.geometry().radius},e.prototype.template=function(){return"<circle "+this.renderId()+" "+this.renderStyle()+" "+this.renderOpacity()+"cx='"+this.center().x+"' cy='"+this.center().y+"' r='"+this.radius()+"'"+this.renderStroke()+" "+this.renderFill()+" "+this.renderDefinitions()+this.renderTransform()+" ></circle>"},e}(lb);const pb=ub;const db=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<g"+(this.renderId()+this.renderTransform()+this.renderStyle()+this.renderOpacity()+this.renderDefinitions())+">"+this.renderChildren()+"</g>"},e.prototype.optionsChange=function(e){"transform"===e.field&&this.transformChange(e.value),t.prototype.optionsChange.call(this,e)},e}(qv);var fb=/&/g,gb=/</g,mb=/"/g,yb=/'/g,vb=/>/g;function bb(t){return String(t).replace(fb,"&amp;").replace(gb,"&lt;").replace(vb,"&gt;").replace(mb,"&quot;").replace(yb,"&#39;")}var wb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){this.allAttr(this.mapPosition()),this.invalidate()},e.prototype.optionsChange=function(e){"src"===e.field&&this.allAttr(this.mapSource()),t.prototype.optionsChange.call(this,e)},e.prototype.mapPosition=function(){var t=this.srcElement.rect(),e=t.topLeft();return[["x",e.x],["y",e.y],["width",t.width()+"px"],["height",t.height()+"px"]]},e.prototype.renderPosition=function(){return Iv(this.mapPosition())},e.prototype.mapSource=function(t){var e=this.srcElement.src();return t&&(e=bb(e)),[["xlink:href",e]]},e.prototype.renderSource=function(){return Iv(this.mapSource(!0))},e.prototype.template=function(){return"<image preserveAspectRatio='none' "+this.renderId()+" "+this.renderStyle()+" "+this.renderTransform()+" "+this.renderOpacity()+this.renderPosition()+" "+this.renderSource()+" "+this.renderDefinitions()+"></image>"},e}(lb);const xb=wb;var Sb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderData=function(){return this.srcElement.toString(3)||"undefined"},e}(lb);const kb=Sb;var Cb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){var t=this.srcElement.geometry();this.attr("x",t.origin.x),this.attr("y",t.origin.y),this.attr("width",t.size.width),this.attr("height",t.size.height),this.attr("rx",t.cornerRadius[0]),this.attr("ry",t.cornerRadius[1]),this.invalidate()},e.prototype.size=function(){return this.srcElement.geometry().size},e.prototype.origin=function(){return this.srcElement.geometry().origin},e.prototype.rx=function(){return this.srcElement.geometry().cornerRadius[0]},e.prototype.ry=function(){return this.srcElement.geometry().cornerRadius[1]},e.prototype.template=function(){return"<rect "+this.renderId()+" "+this.renderStyle()+" "+this.renderOpacity()+" x='"+this.origin().x+"' y='"+this.origin().y+"' rx='"+this.rx()+"' ry='"+this.ry()+"' width='"+this.size().width+"' height='"+this.size().height+"' "+this.renderStroke()+" "+this.renderFill()+" "+this.renderDefinitions()+" "+this.renderTransform()+" />"},e}(lb);const Ab=Cb;var _b=/&(?:[a-zA-Z]+|#\d+);/g;function Tb(t){if(!t||"string"!=typeof t||!_b.test(t))return t;var e=Tb._element;return _b.lastIndex=0,t.replace(_b,(function(t){return e.innerHTML=t,e.textContent||e.innerText}))}"undefined"!=typeof document&&(Tb._element=document.createElement("span"));var Ob=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){var t=this.pos();this.attr("x",t.x),this.attr("y",t.y),this.invalidate()},e.prototype.optionsChange=function(e){"font"===e.field?(this.attr("style",Dv(this.mapStyle())),this.geometryChange()):"content"===e.field&&t.prototype.content.call(this,this.srcElement.content()),t.prototype.optionsChange.call(this,e)},e.prototype.mapStyle=function(e){var i=t.prototype.mapStyle.call(this,e),r=this.srcElement.options.font;return e&&(r=bb(r)),i.push(["font",r],["white-space","pre"]),i},e.prototype.pos=function(){var t=this.srcElement.position(),e=this.srcElement.measure();return t.clone().setY(t.y+e.baseline)},e.prototype.renderContent=function(){var t=this.srcElement.content();return Al(t=bb(t=Tb(t)))},e.prototype.renderTextAnchor=function(){var t;return!(this.options||{}).rtl||Na.browser.msie||Na.browser.edge||(t="end"),Pv("text-anchor",t)},e.prototype.template=function(){return"<text "+this.renderId()+" "+this.renderTextAnchor()+" "+this.renderStyle()+" "+this.renderOpacity()+"x='"+this.pos().x+"' y='"+this.pos().y+"' "+this.renderStroke()+" "+this.renderTransform()+" "+this.renderDefinitions()+this.renderFill()+">"+this.renderContent()+"</text>"},e}(lb);const Eb=Ob;Fv.Arc=hb,Fv.Circle=pb,Fv.Group=db,Fv.Image=xb,Fv.MultiPath=kb,Fv.Path=lb,Fv.Rect=Ab,Fv.Text=Eb;var Mb=function(t){function e(e,i){t.call(this,e,i),this._root=new ib(Object.assign({rtl:"rtl"===ul(e,"direction").direction},this.options)),zv(this.element,this._template("")),this._rootElement=this.element.firstElementChild,this._rootElement.style.width="100%",this._rootElement.style.height="100%",this._rootElement.style.overflow="hidden",function(t){var e;try{e=t.getScreenCTM?t.getScreenCTM():null}catch(t){}if(e){var i=-e.e%1,r=-e.f%1,n=t.style;0===i&&0===r||(n.left=i+"px",n.top=r+"px")}}(this._rootElement),this._root.attachTo(this._rootElement),cl(this.element,{click:this._click,mouseover:this._mouseenter,mouseout:this._mouseleave,mousemove:this._mousemove}),this.resize()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{configurable:!0}};return i.type.get=function(){return"svg"},e.prototype.destroy=function(){this._root&&(this._root.destroy(),this._root=null,this._rootElement=null,fl(this.element,{click:this._click,mouseover:this._mouseenter,mouseout:this._mouseleave,mousemove:this._mousemove})),t.prototype.destroy.call(this)},e.prototype.translate=function(t){var e=Math.round(t.x)+" "+Math.round(t.y)+" "+this._size.width+" "+this._size.height;this._offset=t,this._rootElement.setAttribute("viewBox",e)},e.prototype.draw=function(e){t.prototype.draw.call(this,e),this._root.load([e])},e.prototype.clear=function(){t.prototype.clear.call(this),this._root.clear()},e.prototype.svg=function(){return"<?xml version='1.0' ?>"+this._template()},e.prototype.exportVisual=function(){var t=this._visual,e=this._offset;if(e){var i=new ku;i.children.push(t),i.transform(th().translate(-e.x,-e.y)),t=i}return t},e.prototype._resize=function(){this._offset&&this.translate(this._offset)},e.prototype._template=function(t){return"<svg "+("string"==typeof t?t:"style='width: 100%; height: 100%; overflow: hidden;' ")+"xmlns='"+Rv+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>"+this._root.render()+"</svg>"},Object.defineProperties(e.prototype,i),e}(Ov);const Pb=Mb;const Ib={};function Db(t,e){var i=e.segments;if(0!==i.length){var r=i[0],n=r.anchor();t.moveTo(n.x,n.y);for(var o=1;o<i.length;o++){n=(r=i[o]).anchor();var s=i[o-1].controlOut(),a=r.controlIn();s&&a?t.bezierCurveTo(s.x,s.y,a.x,a.y,n.x,n.y):t.lineTo(n.x,n.y)}e.options.closed&&t.closePath()}}var Fb=function(t){function e(e){t.call(this,e),e&&this.initClip()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initClip=function(){var t=this.srcElement.clip();t&&(this.clip=t,t.addObserver(this))},e.prototype.clear=function(){this.srcElement&&this.srcElement.removeObserver(this),this.clearClip(),t.prototype.clear.call(this)},e.prototype.clearClip=function(){this.clip&&(this.clip.removeObserver(this),delete this.clip)},e.prototype.setClip=function(t){this.clip&&(t.beginPath(),Db(t,this.clip),t.clip())},e.prototype.optionsChange=function(e){"clip"===e.field&&(this.clearClip(),this.initClip()),t.prototype.optionsChange.call(this,e)},e.prototype.setTransform=function(t){if(this.srcElement){var e=this.srcElement.transform();e&&t.transform.apply(t,e.matrix().toArray(6))}},e.prototype.loadElements=function(t,e,i){for(var r=0;r<t.length;r++){var n=t[r],o=n.children,s=new Ib[n.nodeType](n,i);o&&o.length>0&&s.load(o,e,i),ea(e)?this.insertAt(s,e):this.append(s)}},e.prototype.load=function(t,e,i){this.loadElements(t,e,i),this.invalidate()},e.prototype.setOpacity=function(t){if(this.srcElement){var e=this.srcElement.opacity();ea(e)&&this.globalAlpha(t,e)}},e.prototype.globalAlpha=function(t,e){var i=e;i&&t.globalAlpha&&(i*=t.globalAlpha),t.globalAlpha=i},e.prototype.visible=function(){var t=this.srcElement;return!t||t&&!1!==t.options.visible},e}(Mv);const Rb=Fb;var Lb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderTo=function(t){if(this.visible()){t.save(),this.setTransform(t),this.setClip(t),this.setOpacity(t);for(var e=this.childNodes,i=0;i<e.length;i++){var r=e[i];r.visible()&&r.renderTo(t)}t.restore()}},e}(xu(Rb,"childNodes"));const Nb=Lb;function Bb(t,e){var i,r=0;if(!e||e<=0)return t;var n=function(){var n=ol()-r,o=arguments,s=function(){t.apply(null,o),r=ol()};if(!r)return s();i&&clearTimeout(i),n>e?s():i=setTimeout(s,e-n)};return n.cancel=function(){clearTimeout(i)},n}var jb=function(t){function e(e,i){t.call(this),this.canvas=e,this.size=i,this.ctx=e.getContext("2d");var r=this._invalidate.bind(this);this.invalidate=Bb((function(){Ou(r)}),16.666666666666668)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){t.prototype.destroy.call(this),this.canvas=null,this.ctx=null},e.prototype.load=function(t,e,i){this.loadElements(t,e,i),this._invalidate()},e.prototype._rescale=function(t){var e=this.canvas,i=this.size;e.width=i.width*t,e.height=i.height*t,this.ctx.scale(t,t)},e.prototype._devicePixelRatio=function(){return"number"==typeof window.devicePixelRatio?window.devicePixelRatio:1},e.prototype._invalidate=function(t){if(this.ctx){var e=t&&t.fixedScale?1:this._devicePixelRatio();this._rescale(e),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderTo(this.ctx)}},e}(xu(Nb,"childNodes"));const zb=jb;var Ub=function(t){function e(){t.call(this),this.shapes=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._add=function(t,e){this.shapes.push({bbox:e,shape:t}),t._quadNode=this},e.prototype.pointShapes=function(t){for(var e=this.shapes,i=e.length,r=[],n=0;n<i;n++)e[n].bbox.containsPoint(t)&&r.push(e[n].shape);return r},e.prototype.insert=function(t,e){this._add(t,e)},e.prototype.remove=function(t){for(var e=this.shapes,i=e.length,r=0;r<i;r++)if(e[r].shape===t){e.splice(r,1);break}},e}(ml);const $b=Ub;var Hb=function(t){function e(e){t.call(this),this.children=[],this.rect=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.inBounds=function(t){var e=this.rect,i=e.bottomRight(),r=t.bottomRight(),n=e.origin.x<=t.origin.x&&e.origin.y<=t.origin.y&&r.x<=i.x&&r.y<=i.y;return n},e.prototype.pointShapes=function(e){for(var i=this.children,r=i.length,n=t.prototype.pointShapes.call(this,e),o=0;o<r;o++)za(n,i[o].pointShapes(e));return n},e.prototype.insert=function(t,e){var i=this.children,r=!1;if(this.inBounds(e)){if(this.shapes.length<4)this._add(t,e);else{i.length||this._initChildren();for(var n=0;n<i.length;n++)if(i[n].insert(t,e)){r=!0;break}r||this._add(t,e)}r=!0}return r},e.prototype._initChildren=function(){var t=this.rect,i=this.children,r=t.center(),n=t.width()/2,o=t.height()/2;i.push(new e(new Uc([t.origin.x,t.origin.y],[n,o])),new e(new Uc([r.x,t.origin.y],[n,o])),new e(new Uc([t.origin.x,r.y],[n,o])),new e(new Uc([r.x,r.y],[n,o])))},e}($b);const Vb=Hb;var qb=3e3,Wb=function(t){function e(){t.call(this),this.initRoots()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initRoots=function(){this.rootMap={},this.root=new $b,this.rootElements=[]},e.prototype.clear=function(){for(var t=this.rootElements,e=0;e<t.length;e++)this.remove(t[e]);this.initRoots()},e.prototype.pointShape=function(t){var e=(this.rootMap[Math.floor(t.x/qb)]||{})[Math.floor(t.y/qb)],i=this.root.pointShapes(t);e&&(i=i.concat(e.pointShapes(t))),this.assignZindex(i),i.sort(Xb);for(var r=0;r<i.length;r++)if(i[r].containsPoint(t))return i[r]},e.prototype.assignZindex=function(t){for(var e=0;e<t.length;e++){for(var i=t[e],r=0,n=Math.pow(1e4,75),o=[];i;)o.push(i),i=i.parent;for(;o.length;)r+=(((i=o.pop()).parent?i.parent.children:this.rootElements).indexOf(i)+1)*n,n/=1e4;t[e]._zIndex=r}},e.prototype.optionsChange=function(t){"transform"!==t.field&&"stroke.width"!==t.field||this.bboxChange(t.element)},e.prototype.geometryChange=function(t){this.bboxChange(t.element)},e.prototype.bboxChange=function(t){if("Group"===t.nodeType)for(var e=0;e<t.children.length;e++)this.bboxChange(t.children[e]);else t._quadNode&&t._quadNode.remove(t),this._insertShape(t)},e.prototype.add=function(t){var e=Array.isArray(t)?t.slice(0):[t];za(this.rootElements,e),this._insert(e)},e.prototype.childrenChange=function(t){if("remove"===t.action)for(var e=0;e<t.items.length;e++)this.remove(t.items[e]);else this._insert(Array.prototype.slice.call(t.items,0))},e.prototype._insert=function(t){for(var e;t.length>0;)(e=t.pop()).addObserver(this),"Group"===e.nodeType?za(t,e.children):this._insertShape(e)},e.prototype._insertShape=function(t){var e=t.bbox();if(e){var i=this.getSectors(e),r=i[0][0],n=i[1][0];if(this.inRoot(i))this.root.insert(t,e);else{var o=this.rootMap;o[r]||(o[r]={}),o[r][n]||(o[r][n]=new Vb(new Uc([r*qb,n*qb],[qb,qb]))),o[r][n].insert(t,e)}}},e.prototype.remove=function(t){if(t.removeObserver(this),"Group"===t.nodeType)for(var e=t.children,i=0;i<e.length;i++)this.remove(e[i]);else t._quadNode&&(t._quadNode.remove(t),delete t._quadNode)},e.prototype.inRoot=function(t){return t[0].length>1||t[1].length>1},e.prototype.getSectors=function(t){for(var e=t.bottomRight(),i=Math.floor(e.x/qb),r=Math.floor(e.y/qb),n=[[],[]],o=Math.floor(t.origin.x/qb);o<=i;o++)n[0].push(o);for(var s=Math.floor(t.origin.y/qb);s<=r;s++)n[1].push(s);return n},e}(ml);function Xb(t,e){return t._zIndex<e._zIndex?1:t._zIndex>e._zIndex?-1:0}const Gb=Wb;var Kb=function(t){t.bind("mouseenter",this._mouseenter.bind(this)),t.bind("mouseleave",this._mouseleave.bind(this)),this.element=t.element};Kb.prototype.clear=function(){this._resetCursor()},Kb.prototype.destroy=function(){this._resetCursor(),delete this.element},Kb.prototype._mouseenter=function(t){var e=this._shapeCursor(t);e?(this._current||(this._defaultCursor=this._getCursor()),this._setCursor(e)):this._resetCursor()},Kb.prototype._mouseleave=function(){this._resetCursor()},Kb.prototype._shapeCursor=function(t){for(var e=t.element;e&&!ea(e.options.cursor);)e=e.parent;if(e)return e.options.cursor},Kb.prototype._getCursor=function(){if(this.element)return this.element.style.cursor},Kb.prototype._setCursor=function(t){this.element&&(this.element.style.cursor=t,this._current=t)},Kb.prototype._resetCursor=function(){this._current&&(this._setCursor(this._defaultCursor||""),delete this._current)};const Yb=Kb;var Jb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderTo=function(t){t.save(),this.setTransform(t),this.setClip(t),this.setOpacity(t),t.beginPath(),this.renderPoints(t,this.srcElement),this.setLineDash(t),this.setLineCap(t),this.setLineJoin(t),this.setFill(t),this.setStroke(t),t.restore()},e.prototype.setFill=function(t){var e=this.srcElement.options.fill,i=!1;return e&&("Gradient"===e.nodeType?(this.setGradientFill(t,e),i=!0):el(e.color)||(t.fillStyle=e.color,t.save(),this.globalAlpha(t,e.opacity),t.fill(),t.restore(),i=!0)),i},e.prototype.setGradientFill=function(t,e){var i,r=this.srcElement.rawBBox();if(e instanceof Ku){var n=e.start(),o=e.end();i=t.createLinearGradient(n.x,n.y,o.x,o.y)}else if(e instanceof Ju){var s=e.center();i=t.createRadialGradient(s.x,s.y,0,s.x,s.y,e.radius())}!function(t,e){for(var i=0;i<e.length;i++){var r=e[i],n=gc(r.color());n.a*=r.opacity(),t.addColorStop(r.offset(),n.toCssRgba())}}(i,e.stops),t.save(),e.userSpace()||t.transform(r.width(),0,0,r.height(),r.origin.x,r.origin.y),t.fillStyle=i,t.fill(),t.restore()},e.prototype.setStroke=function(t){var e=this.srcElement.options.stroke;if(e&&!el(e.color)&&e.width>0)return t.strokeStyle=e.color,t.lineWidth=ll(e.width,1),t.save(),this.globalAlpha(t,e.opacity),t.stroke(),t.restore(),!0},e.prototype.dashType=function(){var t=this.srcElement.options.stroke;if(t&&t.dashType)return t.dashType.toLowerCase()},e.prototype.setLineDash=function(t){var e=this.dashType();if(e&&e!==nb){var i=rb[e];t.setLineDash?t.setLineDash(i):(t.mozDash=i,t.webkitLineDash=i)}},e.prototype.setLineCap=function(t){var e=this.dashType(),i=this.srcElement.options.stroke;e&&e!==nb?t.lineCap=ob:i&&i.lineCap&&(t.lineCap=i.lineCap)},e.prototype.setLineJoin=function(t){var e=this.srcElement.options.stroke;e&&e.lineJoin&&(t.lineJoin=e.lineJoin)},e.prototype.renderPoints=function(t,e){Db(t,e)},e}(Rb);const Zb=Jb;var Qb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderPoints=function(t){Db(t,this.srcElement.toPath())},e}(Zb);const tw=Qb;var ew=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderPoints=function(t){var e=this.srcElement.geometry(),i=e.center,r=e.radius;t.arc(i.x,i.y,r,0,2*Math.PI)},e}(Zb);const iw=ew;var rw=function(t){function e(e,i){t.call(this,e),this.onLoad=this.onLoad.bind(this),this.onError=this.onError.bind(this),this.loading=Ha();var r=this.img=new Image,n=e.src();i&&!/^data:/i.test(n)&&(r.crossOrigin=i),n&&(r.src=n),r.complete?this.onLoad():(r.onload=this.onLoad,r.onerror=this.onError)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderTo=function(t){"resolved"===this.loading.state()&&(t.save(),this.setTransform(t),this.setClip(t),this.drawImage(t),t.restore())},e.prototype.optionsChange=function(e){"src"===e.field?(this.loading=Ha(),this.img.src=this.srcElement.src()):t.prototype.optionsChange.call(this,e)},e.prototype.onLoad=function(){this.loading.resolve(),this.invalidate()},e.prototype.onError=function(){this.loading.reject(new Error("Unable to load image '"+this.img.src+"'. Check for connectivity and verify CORS headers."))},e.prototype.drawImage=function(t){var e=this.srcElement.rect(),i=e.topLeft();t.drawImage(this.img,i.x,i.y,e.width(),e.height())},e}(Zb);const nw=rw;var ow=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderPoints=function(t){for(var e=this.srcElement.paths,i=0;i<e.length;i++)Db(t,e[i])},e}(Zb);const sw=ow;var aw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderPoints=function(e){var i=this.srcElement.geometry(),r=i.cornerRadius,n=r[0],o=r[1];if(0===n&&0===o){var s=i.origin,a=i.size;e.rect(s.x,s.y,a.width,a.height)}else t.prototype.renderPoints.call(this,e,hu.fromRect(i))},e}(Zb);const lw=aw;var cw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderTo=function(t){var e=this.srcElement,i=e.position(),r=e.measure();t.save(),this.setTransform(t),this.setClip(t),this.setOpacity(t),t.beginPath(),t.font=e.options.font,t.textAlign="left",this.setFill(t)&&t.fillText(e.content(),i.x,i.y+r.baseline),this.setStroke(t)&&(this.setLineDash(t),t.strokeText(e.content(),i.x,i.y+r.baseline)),t.restore()},e}(Zb);const hw=cw;Ib.Arc=tw,Ib.Circle=iw,Ib.Group=Nb,Ib.Image=nw,Ib.MultiPath=sw,Ib.Path=Zb,Ib.Rect=lw,Ib.Text=hw;var uw=function(t){function e(e,i){t.call(this,e,i),this.element.innerHTML=this._template(this);var r=this.element.firstElementChild;r.style.width="100%",r.style.height="100%";var n=dl(e);r.width=n.width,r.height=n.height,this._rootElement=r,this._root=new zb(r,n),this._mouseTrackHandler=this._trackMouse.bind(this),cl(this.element,{click:this._mouseTrackHandler,mousemove:this._mouseTrackHandler})}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{configurable:!0}};return i.type.get=function(){return"canvas"},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._root&&(this._root.destroy(),this._root=null),this._searchTree&&(this._searchTree.clear(),delete this._searchTree),this._cursor&&(this._cursor.destroy(),delete this._cursor),fl(this.element,{click:this._mouseTrackHandler,mousemove:this._mouseTrackHandler})},e.prototype.draw=function(e){t.prototype.draw.call(this,e),this._root.load([e],void 0,this.options.cors),this._searchTree&&this._searchTree.add([e])},e.prototype.clear=function(){t.prototype.clear.call(this),this._root.clear(),this._searchTree&&this._searchTree.clear(),this._cursor&&this._cursor.clear()},e.prototype.eventTarget=function(t){if(this._searchTree){var e=this._surfacePoint(t);return this._searchTree.pointShape(e)}},e.prototype.image=function(){var t=this._root,e=this._rootElement,i=[];t.traverse((function(t){t.loading&&i.push(t.loading)}));var r=Ha(),n=function(){t._invalidate({fixedScale:!0});try{var i=e.toDataURL();r.resolve(i)}catch(t){r.reject(t)}};return sl(i).then(n,n),r},e.prototype.suspendTracking=function(){t.prototype.suspendTracking.call(this),this._searchTree&&(this._searchTree.clear(),delete this._searchTree)},e.prototype.resumeTracking=function(){if(t.prototype.resumeTracking.call(this),!this._searchTree){this._searchTree=new Gb;for(var e=this._root.childNodes,i=[],r=0;r<e.length;r++)i.push(e[r].srcElement);this._searchTree.add(i)}},e.prototype._resize=function(){this._rootElement.width=this._size.width,this._rootElement.height=this._size.height,this._root.size=this._size,this._root.invalidate()},e.prototype._template=function(){return"<canvas></canvas>"},e.prototype._enableTracking=function(){this._searchTree=new Gb,this._cursor=new Yb(this),t.prototype._enableTracking.call(this)},e.prototype._trackMouse=function(t){if(!this._suspendedTracking){var e=this.eventTarget(t);if("click"!==t.type){var i=this._currentShape;i&&i!==e&&this.trigger("mouseleave",{element:i,originalEvent:t,type:"mouseleave"}),e&&i!==e&&this.trigger("mouseenter",{element:e,originalEvent:t,type:"mouseenter"}),this.trigger("mousemove",{element:e,originalEvent:t,type:"mousemove"}),this._currentShape=e}else e&&this.trigger("click",{element:e,originalEvent:t,type:"click"})}},Object.defineProperties(e.prototype,i),e}(Ov);const pw=uw;var dw,fw,gw=function(){return"undefined"!=typeof document},mw=function(t){function e(){t.call(this),this._items=[{name:"svg",type:Pb},{name:"canvas",type:pw}]}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={support:{configurable:!0},current:{configurable:!0}};return i.support.get=function(){return fw||(fw={canvas:gw()&&document.createElement("canvas").getContext,svg:gw()&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}),fw},i.current.get=function(){return dw||(dw=new e),dw},e.prototype.create=function(t,e){var i=this._items,r=i[0];if(e&&e.type)for(var n=e.type.toLowerCase(),o=0;o<i.length;o++)if(i[o].name===n){r=i[o];break}if(r)return new r.type(t,e);Dl("Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\n- The browser does not support SVG and Canvas. User agent: "+navigator.userAgent)},Object.defineProperties(e,i),e}(ml);const yw=mw;var vw=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={support:{configurable:!0}};return i.support.get=function(){return yw.support},e.create=function(t,e){return yw.current.create(t,e)},Object.defineProperties(e,i),e}(Ov);const bw=vw;var ww=function(t){function e(){t.call(this),this._points=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this._points=[]},e.prototype.show=function(t,e){var i=[].concat(t);this.hide();for(var r=0;r<i.length;r++){var n=i[r];n&&n.toggleHighlight&&n.hasHighlight()&&(this.togglePointHighlight(n,!0,e),this._points.push(n))}},e.prototype.togglePointHighlight=function(t,e,i){var r=(t.options.highlight||{}).toggle;if(r){var n={category:t.category,series:t.series,dataItem:t.dataItem,value:t.value,stackValue:t.stackValue,preventDefault:xw,visual:t.highlightVisual(),show:e};r(n),n._defaultPrevented||t.toggleHighlight(e,i)}else t.toggleHighlight(e,i)},e.prototype.hide=function(){for(var t=this._points;t.length;)this.togglePointHighlight(t.pop(),!1)},e.prototype.isHighlighted=function(t){for(var e=this._points,i=0;i<e.length;i++){if(t===e[i])return!0}return!1},e}(ml);function xw(){this._defaultPrevented=!0}const Sw=ww;function kw(t,e){var i=(e||"").toLowerCase(),r=t.event;return"none"===i&&!(r.ctrlKey||r.shiftKey||r.altKey)||r[i+"Key"]}function Cw(t){for(var e={},i=0;i<t.length;i++){var r=t[i];r.axis.options.name&&(e[r.axis.options.name]={min:r.range.min,max:r.range.max})}return e}var Aw=function(t){function e(e,i){t.call(this),this.plotArea=e,this.options=ha({},this.options,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.start=function(t){return this._active=kw(t,this.options.key),this._active},e.prototype.move=function(t){if(this._active){var e=this.axisRanges=this._panAxes(t,Ys).concat(this._panAxes(t,Js));if(e.length)return this.axisRanges=e,Cw(e)}},e.prototype.end=function(){var t=this._active;return this._active=!1,t},e.prototype.pan=function(){var t=this.plotArea,e=this.axisRanges;if(e.length){for(var i=0;i<e.length;i++){var r=e[i];t.updateAxisOptions(r.axis,r.range)}t.redraw(t.panes)}},e.prototype.destroy=function(){delete this.plotArea},e.prototype._panAxes=function(t,e){var i=this.plotArea,r=-t[e].delta,n=(this.options.lock||"").toLowerCase(),o=[];if(0!==r&&(n||"").toLowerCase()!==e)for(var s=i.axes,a=0;a<s.length;a++){var l=s[a];if(e===Ys&&!l.options.vertical||e===Js&&l.options.vertical){var c=l.pan(r);c&&(c.limitRange=!0,o.push({axis:l,range:c}))}}return o},e}(ml);Aw.prototype.options={key:"none",lock:"none"};const _w=Aw;var Tw=function(t){function e(e,i){t.call(this),this.chart=e,this.options=ha({},this.options,i),this.createElement()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createElement=function(){var t=this._marquee=document.createElement("div");t.className="k-marquee";var e=document.createElement("div");e.className="k-marquee-color",t.appendChild(e)},e.prototype.removeElement=function(){this._marquee.parentNode&&this._marquee.parentNode.removeChild(this._marquee)},e.prototype.setStyles=function(t){ga(this._marquee,t)},e.prototype.start=function(t){if(kw(t,this.options.key)){var e=this.chart,i=e._eventCoordinates(t),r=this._zoomPane=e._plotArea.paneByPoint(i),n=r?r.chartsBox().clone():null;if(r&&n){var o=this._elementOffset();return n.translate(o.left,o.top),this._zoomPaneClipBox=n,document.body.appendChild(this._marquee),this.setStyles({left:t.pageX+1,top:t.pageY+1,width:0,height:0}),!0}}return!1},e.prototype._elementOffset=function(){var t=this.chart.element,e=ga(t,["paddingLeft","paddingTop"]),i=e.paddingLeft,r=e.paddingTop,n=Bl(t);return{left:i+n.left,top:r+n.top}},e.prototype.move=function(t){this._zoomPane&&this.setStyles(this._selectionPosition(t))},e.prototype.end=function(t){if(this._zoomPane){var e=this._elementOffset(),i=this._selectionPosition(t);i.left-=e.left,i.top-=e.top;var r={x:i.left,y:i.top},n={x:i.left+i.width,y:i.top+i.height};return this._updateAxisRanges(r,n),this.removeElement(),delete this._zoomPane,Cw(this.axisRanges)}},e.prototype.zoom=function(){var t=this.axisRanges;if(t&&t.length){for(var e=this.chart._plotArea,i=0;i<t.length;i++){var r=t[i];e.updateAxisOptions(r.axis,r.range)}e.redraw(e.panes)}},e.prototype.destroy=function(){this.removeElement(),delete this._marquee,delete this.chart},e.prototype._updateAxisRanges=function(t,e){for(var i=(this.options.lock||"").toLowerCase(),r=[],n=this._zoomPane.axes,o=0;o<n.length;o++){var s=n[o],a=s.options.vertical;if((i!==Ys||a)&&(i!==Js||!a)&&Ll(s.axisIndex)){var l=s.pointsRange(t,e);l&&r.push({axis:s,range:l})}}this.axisRanges=r},e.prototype._selectionPosition=function(t){var e=this._zoomPaneClipBox,i={x:t.x.startLocation,y:t.y.startLocation},r=t.x.location,n=t.y.location,o=(this.options.lock||"").toLowerCase(),s=Math.min(i.x,r),a=Math.min(i.y,n),l=Math.abs(i.x-r),c=Math.abs(i.y-n);return o===Ys&&(s=e.x1,l=e.width()),o===Js&&(a=e.y1,c=e.height()),r>e.x2&&(l=e.x2-i.x),r<e.x1&&(l=i.x-e.x1),n>e.y2&&(c=e.y2-i.y),n<e.y1&&(c=i.y-e.y1),{left:Math.max(s,e.x1),top:Math.max(a,e.y1),width:l,height:c}},e}(ml);Tw.prototype.options={key:"shift",lock:"none"};const Ow=Tw;var Ew=function(t){function e(e,i){t.call(this),this.chart=e,this.options=ha({rate:.3},this.options,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.updateRanges=function(t,e){for(var i=(this.options.lock||"").toLowerCase(),r=[],n=this.chart._plotArea.axes,o=0;o<n.length;o++){var s=n[o],a=s.options.vertical;if((i!==Ys||a)&&(i!==Js||!a)&&s.zoomRange){var l=Vl(this.options.rate,.01,.9),c=s.zoomRange(-t*l,e);c&&r.push({axis:s,range:c})}}return this.axisRanges=r,Cw(r)},e.prototype.zoom=function(){var t=this.axisRanges,e=this.chart._plotArea;if(t&&t.length&&e.updateAxisOptions){for(var i=0;i<t.length;i++){var r=t[i];e.updateAxisOptions(r.axis,r.range)}e.redraw(e.panes)}},e.prototype.destroy=function(){delete this.chart},e}(ml);const Mw=Ew;function Pw(t,e,i,r,n){return"start"===i?e.origin[r]:"end"===i?e.origin[r]+e.size[n]-t:e.origin[r]+(e.size[n]-t)/2}function Iw(t,e,i,r,n){return"start"===i?e.origin[r]+e.size[n]-t:"end"===i?e.origin[r]:e.origin[r]+(e.size[n]-t)/2}var Dw={alignContent:"start",justifyContent:"start",alignItems:"start",spacing:0,orientation:"horizontal",lineSpacing:0,wrap:!0,revers:!1},Fw=function(t,e){t.forEach(e)},Rw=function(t,e){for(var i=t.length-1;i>=0;i--)e(t[i],i)},Lw=function(t){function e(e,i){t.call(this,Object.assign({},Dw,i)),this._rect=e,this._fieldMap={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.rect=function(t){return t?(this._rect=t,this):this._rect},e.prototype._initMap=function(){var t=this.options,e=this._fieldMap;"horizontal"===t.orientation?(e.sizeField="width",e.groupsSizeField="height",e.groupAxis="x",e.groupsAxis="y"):(e.sizeField="height",e.groupsSizeField="width",e.groupAxis="y",e.groupsAxis="x"),t.reverse?(this.forEach=Rw,this.justifyAlign=Iw):(this.forEach=Fw,this.justifyAlign=Pw)},e.prototype.reflow=function(){if(this._rect&&0!==this.children.length){this._initMap(),this.options.transform&&this.transform(null);for(var t,e,i,r=this.options,n=this._rect,o=this._initGroups(),s=o.groups,a=o.groupsSize,l=this._fieldMap,c=l.sizeField,h=l.groupsSizeField,u=l.groupAxis,p=l.groupsAxis,d=new Nc,f=new Nc,g=new jc,m=Pw(a,n,r.alignContent,p,h),y=function(n,o){var s=e.elements[o];f[u]=t,f[p]=Pw(n.size[h],i,r.alignItems,p,h),function(t,e,i){var r=i.transform()||th(),n=r.matrix();n.e+=t.x-e.origin.x,n.f+=t.y-e.origin.y,r.matrix(n),i.transform(r)}(f,n,s),t+=n.size[c]+r.spacing},v=0;v<s.length;v++)e=s[v],d[u]=t=this.justifyAlign(e.size,n,r.justifyContent,u,c),d[p]=m,g[c]=e.size,g[h]=e.lineSize,i=new Uc(d,g),this.forEach(e.bboxes,y),m+=e.lineSize+r.lineSpacing;if(!r.wrap&&e.size>n.size[c]){var b=n.size[c]/i.size[c],w=i.topLeft().scale(b,b),x=Pw(i.size[h]*b,n,r.alignContent,p,h),S=th();"x"===u?S.translate(n.origin.x-w.x,x-w.y):S.translate(x-w.x,n.origin.y-w.y),S.scale(b,b),this.transform(S)}}},e.prototype._initGroups=function(){for(var t=this,e=this.options,i=this.children,r=e.lineSpacing,n=e.wrap,o=e.spacing,s=this._fieldMap.sizeField,a=this._newGroup(),l=[],c=function(){l.push(a),h+=a.lineSize+r},h=-r,u=0;u<i.length;u++){var p=i[u],d=i[u].clippedBBox();p.visible()&&d&&(n&&a.size+d.size[s]+o>t._rect.size[s]?0===a.bboxes.length?(t._addToGroup(a,d,p),c(),a=t._newGroup()):(c(),a=t._newGroup(),t._addToGroup(a,d,p)):t._addToGroup(a,d,p))}return a.bboxes.length&&c(),{groups:l,groupsSize:h}},e.prototype._addToGroup=function(t,e,i){t.size+=e.size[this._fieldMap.sizeField]+this.options.spacing,t.lineSize=Math.max(e.size[this._fieldMap.groupsSizeField],t.lineSize),t.bboxes.push(e),t.elements.push(i)},e.prototype._newGroup=function(){return{lineSize:0,size:-this.options.spacing,bboxes:[],elements:[]}},e}(ku);const Nw=Lw;var Bw=function(t){function e(e,i){t.call(this,e),this.chartService=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.children,e=this.options,i=e.vertical;this.visual=new Nw(null,{spacing:i?0:e.spacing,lineSpacing:i?e.spacing:0,orientation:i?"vertical":"horizontal",reverse:e.rtl,alignItems:i?"start":"center"});for(var r=0;r<t.length;r++){var n=t[r];n.reflow(new Vc),n.renderVisual()}},e.prototype.reflow=function(t){this.visual.rect(t.toRect()),this.visual.reflow();var e=this.visual.clippedBBox();this.box=e?hp(e):new Vc},e.prototype.renderVisual=function(){this.addVisual()},e.prototype.createVisual=function(){},e}(Ru);const jw=Bw;var zw=function(t){function e(e){t.call(this,e),this.createContainer(),e.rtl?(this.createLabel(),this.createMarker()):(this.createMarker(),this.createLabel())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createContainer=function(){this.container=new np({vertical:!1,wrap:!1,align:Os,spacing:this.options.spacing}),this.append(this.container)},e.prototype.createMarker=function(){this.container.append(new ju(this.markerOptions()))},e.prototype.markerOptions=function(){var t=this.options,e=t.markerColor;return ha({},t.markers,{background:e,border:{color:e}})},e.prototype.createLabel=function(){var t=this.options,e=ha({},t.labels);this.container.append(new dp(t.text,e))},e.prototype.renderComplete=function(){t.prototype.renderComplete.call(this);var e=this.options.cursor||{},i=this._itemOverlay=hu.fromRect(this.container.box.toRect(),{fill:{color:Gs,opacity:0},stroke:null,cursor:e.style||e});this.appendVisual(i)},e.prototype.click=function(t,e){var i=this.eventArgs(e);!t.trigger("legendItemClick",i)&&e&&"contextmenu"===e.type&&e.preventDefault()},e.prototype.over=function(t,e){var i=this.eventArgs(e);return t.trigger("legendItemHover",i)||t._legendItemHover(i.seriesIndex,i.pointIndex),!0},e.prototype.out=function(t,e){t._unsetActivePoint(),t.trigger("legendItemLeave",this.eventArgs(e))},e.prototype.eventArgs=function(t){var e=this.options;return{element:Ul(t),text:e.text,series:e.series,seriesIndex:e.series.index,pointIndex:e.pointIndex}},e.prototype.renderVisual=function(){var e=this,i=this.options,r=i.visual;r?(this.visual=r({active:i.active,series:i.series,sender:this.getSender(),pointIndex:i.pointIndex,options:{markers:this.markerOptions(),labels:i.labels},createVisual:function(){e.createVisual(),e.renderChildren(),e.renderComplete();var t=e.visual;return delete e.visual,t}}),this.addVisual()):t.prototype.renderVisual.call(this)},e}(Nu);const Uw=zw;var $w="horizontal",Hw="custom",Vw=function(t){function e(e,i){void 0===i&&(i={}),t.call(this,e),this.chartService=i,Oa(this.options.position,[Ws,Hs,Ts,Ns,Hw])||(this.options.position=Hs),this.createContainers(),this.createLegendTitle(e.title),this.createItems()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createContainers=function(){var t=this.options,e=t.position,i=t.align,r=e,n=Os;e===Hw?r=Ns:Oa(e,[Ws,Ts])?(r="start"===i?Ns:"end"===i?Hs:Os,n=e):i&&("start"===i?n=Ws:"end"===i&&(n=Ts)),this.container=new Nu({margin:t.margin,padding:t.padding,background:t.background,border:t.border,vAlign:n,align:r,zIndex:t.zIndex,shrinkToFit:!0}),this.hasTitle()?this.itemsContainer=new Nu({vAlign:n,align:r,zIndex:t.zIndex,shrinkToFit:!0}):this.itemsContainer=this.container,this.append(this.container)},e.prototype.createItems=function(){var t=this.getService(),e=this.options,i=this.isVertical(),r=new jw({vertical:i,spacing:e.spacing,rtl:t.rtl},t),n=e.items;e.reverse&&(n=n.slice(0).reverse());for(var o=n.length,s=0;s<o;s++){var a=n[s];r.append(new Uw(ha({},{markers:e.markers,labels:e.labels,rtl:t.rtl},e.item,a)))}r.render(),this.itemsContainer.append(r)},e.prototype.isVertical=function(){var t=this.options,e=t.orientation,i=t.position;return i===Hw&&e!==$w||(Ll(e)?e!==$w:Oa(i,[Ns,Hs]))},e.prototype.hasItems=function(){return this.container.children[0].children.length>0},e.prototype.reflow=function(t){var e=this.options,i=t.clone();this.hasItems()?(e.position===Hw?(this.containerCustomReflow(i),this.box=i):this.containerReflow(i),this.hasTitle()&&this.title.reflow(new Vc(this.container.box.x1,this.title.box.y1,this.container.box.x2,this.title.box.y2))):this.box=i},e.prototype.containerReflow=function(t){var e=this.options,i=this.container,r=e.position,n=e.width,o=e.height,s=r===Ws||r===Ts?Ys:Js,a=this.isVertical(),l=t.clone(),c=t.clone();r!==Ns&&r!==Hs||(c.y1=l.y1=0),a&&o?(c.y2=c.y1+o,c.align(l,Js,i.options.vAlign)):!a&&n&&(c.x2=c.x1+n,c.align(l,Ys,i.options.align)),i.reflow(c);var h=(c=i.box).clone();(e.offsetX||e.offsetY)&&(c.translate(e.offsetX,e.offsetY),i.reflow(c)),h[s+1]=t[s+1],h[s+2]=t[s+2],this.box=h},e.prototype.containerCustomReflow=function(t){var e=this.options,i=this.container,r=e.offsetX,n=e.offsetY,o=e.width,s=e.height,a=this.isVertical(),l=t.clone();a&&s?l.y2=l.y1+s:!a&&o&&(l.x2=l.x1+o),i.reflow(l),l=i.box,i.reflow(new Vc(r,n,r+l.width(),n+l.height()))},e.prototype.renderVisual=function(){this.hasItems()&&t.prototype.renderVisual.call(this)},e.prototype.createLegendTitle=function(t){var e=ha({},{color:_s,position:Ws,align:Os},t),i=e.text;if(t&&!1!==t.visible){if(Ll(e)&&e.visible){var r=wa(e);r?i=r({text:i}):e.format&&(i=this.chartService.format.auto(e.format,i))}this.title=new dp(i,e),this.createTitleLayout(),this.appendTitleLayoutContent()}},e.prototype.createTitleLayout=function(){this.layout=new np({vertical:!0,wrap:!1}),this.container.append(this.layout)},e.prototype.hasTitle=function(){return Boolean(this.options.title&&!1!==this.options.title.visible)},e.prototype.appendTitleLayoutContent=function(){this.options.title.position===Ts?(this.layout.append(this.itemsContainer),this.layout.append(this.title)):(this.layout.append(this.title),this.layout.append(this.itemsContainer))},e}(Ru);Zl(Vw,{position:Hs,items:[],offsetX:0,offsetY:0,margin:ma(5),padding:ma(5),border:{color:_s,width:0},item:{cursor:"pointer",spacing:6},spacing:6,background:"",zIndex:1,markers:{border:{width:0},width:15,height:3,type:"rect",align:Ns,vAlign:Os}});const qw=Vw;var Ww=function(t){function e(){t.call(this),this._registry=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.register=function(t,e){this._registry.push({type:t,seriesTypes:e})},e.prototype.create=function(t,e,i){for(var r,n=this._registry,o=n[0],s=0;s<n.length;s++){var a=n[s];if((r=ky(t,a.seriesTypes)).length>0){o=a;break}}return new o.type(r,e,i)},e}(ml);Ww.current=new Ww;const Xw=Ww;function Gw(t){var e=document.createElement("div");return t&&(e.className=t),e}function Kw(t){for(var e=t;e&&!Aa(e,"k-handle");)e=e.parentNode;return e}var Yw=function(t){function e(e,i,r,n){t.call(this);var o=e.element;this.options=ha({},this.options,r),this.chart=e,this.observer=n,this.chartElement=o,this.categoryAxis=i,this._dateAxis=this.categoryAxis instanceof Md,this.initOptions(),this.visible=this.options.visible&&o.offsetHeight,this.visible&&(this.createElements(),this.set(this._index(this.options.from),this._index(this.options.to)),this.bindEvents())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onPane=function(t){return this.categoryAxis.pane===t},e.prototype.createElements=function(){var t=this.options,e=this.wrapper=Gw("k-selector");ga(e,{top:t.offset.top,left:t.offset.left,width:t.width,height:t.height,direction:"ltr"});var i=this.selection=Gw("k-selection");this.leftMask=Gw("k-mask"),this.rightMask=Gw("k-mask"),e.appendChild(this.leftMask),e.appendChild(this.rightMask),e.appendChild(i),i.appendChild(Gw("k-selection-bg"));var r=this.leftHandle=Gw("k-handle k-left-handle"),n=this.rightHandle=Gw("k-handle k-right-handle");r.appendChild(Gw()),n.appendChild(Gw()),i.appendChild(r),i.appendChild(n),this.chartElement.appendChild(e);var o=ga(i,["borderLeftWidth","borderRightWidth","height"]),s=ga(r,"height").height,a=ga(n,"height").height;t.selection={border:{left:o.borderLeftWidth,right:o.borderRightWidth}},ga(r,{top:(o.height-s)/2}),ga(n,{top:(o.height-a)/2}),e.style.cssText=e.style.cssText},e.prototype.bindEvents=function(){var t;!1!==this.options.mousewheel&&(this._mousewheelHandler=this._mousewheel.bind(this),Rl(this.wrapper,((t={})[Fg]=this._mousewheelHandler,t))),this._domEvents=Fp.create(this.wrapper,{stopPropagation:!0,start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),press:this._press.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)})},e.prototype.initOptions=function(){var t=this.options,e=this.categoryAxis.pane.chartsBox(),i=this.chart.chartService.intl;this._dateAxis&&ha(t,{min:gd(i,t.min),max:gd(i,t.max),from:gd(i,t.from),to:gd(i,t.to)});var r=ga(this.chartElement,["paddingLeft","paddingTop"]),n=r.paddingLeft,o=r.paddingTop;this.options=ha({},{width:e.width(),height:e.height()+.1,padding:{left:n,top:o},offset:{left:e.x1+n,top:e.y1+o},from:t.min,to:t.max},t)},e.prototype.destroy=function(){var t;this._domEvents&&(this._domEvents.destroy(),delete this._domEvents),clearTimeout(this._mwTimeout),this._state=null,this.wrapper&&(this._mousewheelHandler&&(Gl(this.wrapper,((t={})[Fg]=this._mousewheelHandler,t)),this._mousewheelHandler=null),this.chartElement.removeChild(this.wrapper),this.wrapper=null)},e.prototype._rangeEventArgs=function(t){return{axis:this.categoryAxis.options,from:this._value(t.from),to:this._value(t.to)}},e.prototype._start=function(t){var e=this.options,i=Ul(t);if(!this._state&&i){this.chart._unsetActivePoint(),this._state={moveTarget:Kw(i)||i,startLocation:t.x?t.x.location:0,range:{from:this._index(e.from),to:this._index(e.to)}};var r=this._rangeEventArgs({from:this._index(e.from),to:this._index(e.to)});this.trigger(Ag,r)&&(this._state=null)}},e.prototype._press=function(t){var e;(e=this._state?this._state.moveTarget:Kw(Ul(t)))&&Qs(e,"k-handle-active")},e.prototype._move=function(t){if(this._state){var e=this,i=e._state,r=e.options,n=e.categoryAxis,o=i.range,s=i.moveTarget,a=n.options.reverse,l=this._index(r.from),c=this._index(r.to),h=this._index(r.min),u=this._index(r.max),p=i.startLocation-t.x.location,d=o.from,f=o.to,g=o.to-o.from,m=ga(this.wrapper,"width").width/(n.categoriesCount()-1),y=Math.round(p/m)*(a?-1:1);if(s){var v=Aa(s,"k-left-handle"),b=Aa(s,"k-right-handle");Aa(s,"k-selection k-selection-bg")?(o.from=Math.min(Math.max(h,l-y),u-g),o.to=Math.min(o.from+g,u)):v&&!a||b&&a?(o.from=Math.min(Math.max(h,l-y),u-1),o.to=Math.max(o.from+1,o.to)):(v&&a||b&&!a)&&(o.to=Math.min(Math.max(h+1,c-y),u),o.from=Math.min(o.to-1,o.from)),o.from===d&&o.to===f||(this.move(o.from,o.to),this.trigger(_g,this._rangeEventArgs(o)))}}},e.prototype._end=function(){if(this._state){var t=this._state.moveTarget;t&&(r="k-handle-active",(i=t)&&i.className&&(i.className=i.className.replace(r,"").replace(ta," ")));var e=this._state.range;this.set(e.from,e.to),this.trigger(Tg,this._rangeEventArgs(e)),delete this._state}var i,r},e.prototype._tap=function(t){var e=this.options,i=this.categoryAxis,r=this.chart._eventCoordinates(t),n=i.pointCategoryIndex(new Ec(r.x,i.box.y1)),o=this._index(e.from),s=this._index(e.to),a=this._index(e.min),l=this._index(e.max),c=s-o,h=o+c/2,u={},p=3===t.event.which,d=Math.round(h-n);this._state||p||(this.chart._unsetActivePoint(),i.options.justified||d--,u.from=Math.min(Math.max(a,o-d),l-c),u.to=Math.min(u.from+c,l),this._start(t),this._state&&(this._state.range=u,this.trigger(_g,this._rangeEventArgs(u)),this._end()))},e.prototype._mousewheel=function(t){var e=this,i=ja(t);if(this._start({target:this.selection}),this._state){var r=this._state.range;t.preventDefault(),t.stopPropagation(),Math.abs(i)>1&&(i*=3),this.options.mousewheel.reverse&&(i*=-1),this.expand(i)&&this.trigger(_g,{axis:this.categoryAxis.options,delta:i,originalEvent:t,from:this._value(r.from),to:this._value(r.to)}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout((function(){e._end()}),150)}},e.prototype._gesturestart=function(t){var e=this.options;this._state={range:{from:this._index(e.from),to:this._index(e.to)}};var i=this._rangeEventArgs(this._state.range);this.trigger(Ag,i)?this._state=null:t.preventDefault()},e.prototype._gestureend=function(){this._state&&(this.trigger(Tg,this._rangeEventArgs(this._state.range)),delete this._state)},e.prototype._gesturechange=function(t){var e=this,i=e.chart,r=e._state,n=e.options,o=e.categoryAxis,s=r.range,a=i._toModelCoordinates(t.touches[0].x.location).x,l=i._toModelCoordinates(t.touches[1].x.location).x,c=Math.min(a,l),h=Math.max(a,l);t.preventDefault(),s.from=o.pointCategoryIndex(new Ec(c))||n.min,s.to=o.pointCategoryIndex(new Ec(h))||n.max,this.move(s.from,s.to),this.trigger(_g,this._rangeEventArgs(s))},e.prototype._index=function(t){var e=t;return t instanceof Date&&(e=this.categoryAxis.categoryIndex(t)),e},e.prototype._value=function(t){var e=t;return this._dateAxis&&(e=this.categoryAxis.categoryAt(t))>this.options.max&&(e=this.options.max),e},e.prototype._slot=function(t){var e=this.categoryAxis,i=this._index(t);return e.getSlot(i,i,!0)},e.prototype.move=function(t,e){var i=this.options,r=this.categoryAxis.options.reverse,n=i.offset,o=i.padding,s=i.selection.border,a=r?e:t,l=r?t:e,c="x"+(r?2:1),h=this._slot(a),u=Xl(h[c]-n.left+o.left);ga(this.leftMask,{width:u}),ga(this.selection,{left:u}),h=this._slot(l);var p=Xl(i.width-(h[c]-n.left+o.left));ga(this.rightMask,{width:p});var d=i.width-p;d!==i.width&&(d+=s.right),ga(this.rightMask,{left:d}),ga(this.selection,{width:Math.max(i.width-(u+p)-s.right,0)})},e.prototype.set=function(t,e){var i=this.options,r=this._index(i.min),n=this._index(i.max),o=Vl(this._index(t),r,n),s=Vl(this._index(e),o+1,n);i.visible&&this.move(o,s),i.from=this._value(o),i.to=this._value(s)},e.prototype.expand=function(t){var e=this.options,i=this._index(e.min),r=this._index(e.max),n=e.mousewheel.zoom,o=this._index(e.from),s=this._index(e.to),a={from:o,to:s},l=ha({},a);if(this._state&&(a=this._state.range),n!==Hs&&(a.from=Vl(Vl(o-t,0,s-1),i,r)),n!==Ns&&(a.to=Vl(Vl(s+t,a.from+1,r),i,r)),a.from!==l.from||a.to!==l.to)return this.set(a.from,a.to),!0},e.prototype.zoom=function(t,e){var i=this.options,r=this._index(i.min),n=this._index(i.max),o=this._index(i.from),s=this._index(i.to),a={from:o,to:s},l=ha({},a),c=this.categoryAxis.options.reverse,h=Ys+(c?"2":"1"),u=this.categoryAxis.lineBox(),p=Math.abs(u[h]-e.x),d=u.width(),f=Xl(p/d,2),g=Xl(f*t),m=Xl((1-f)*t);if(this._state&&(a=this._state.range),a.from=Vl(Vl(o-g,0,s-1),r,n),a.to=Vl(Vl(s+m,a.from+1,n),r,n),a.from!==l.from||a.to!==l.to)return this.set(a.from,a.to),!0},e.prototype.trigger=function(t,e){return(this.observer||this.chart).trigger(t,e)},e}(ml);Zl(Yw,{visible:!0,mousewheel:{zoom:"both"},min:js,max:Bs});const Jw=Yw;var Zw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.show=function(e){if(e&&e.tooltipAnchor&&(!this._current||this._current!==e)){var i=ha({},this.options,e.options.tooltip),r=e.tooltipAnchor();r?(this._current=e,t.prototype.show.call(this,{point:e,anchor:r},i,e)):this.hide()}},e.prototype.hide=function(){delete this._current,t.prototype.hide.call(this)},e}(cy);const Qw=Zw;var tx=function(t){function e(e,i){t.call(this,e.chartService,i),this.plotArea=e,this.formatService=e.chartService.format}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.showAt=function(t,e){var i=Ca(t,(function(t){var e=t.series.tooltip;return!(e&&!1===e.visible)}));if(i.length>0){var r=i[0],n=this.plotArea.categoryAxis.getSlot(r.categoryIx),o=e?this._slotAnchor(e,n):this._defaultAnchor(r,n);this.show({anchor:o,shared:!0,points:t,category:r.category,categoryText:this.formatService.auto(this.options.categoryFormat,r.category),series:this.plotArea.series},this.options)}},e.prototype._slotAnchor=function(t,e){return this.plotArea.categoryAxis.options.vertical||(t.x=e.center().x),{point:t,align:{horizontal:"left",vertical:"center"}}},e.prototype._defaultAnchor=function(t,e){var i=t.owner.pane.chartsBox(),r=this.plotArea.categoryAxis.options.vertical,n=i.center(),o=e.center();return{point:r?new Ec(n.x,o.y):new Ec(o.x,n.y),align:{horizontal:"center",vertical:"center"}}},e}(cy);Zl(tx,{categoryFormat:"{0:d}"});const ex=tx;var ix=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){var t=this.element,e=this.options;if(t.bbox()){this.origin=e.origin;var i=e.vertical?Js:Ys,r=this.fromScale=new Nc(1,1);r[i]=Ef,t.transform(th().scale(r.x,r.y))}else this.abort()},e.prototype.step=function(t){var e=Ma(this.fromScale.x,1,t),i=Ma(this.fromScale.y,1,t);this.element.transform(th().scale(e,i,this.origin))},e.prototype.abort=function(){t.prototype.abort.call(this),this.element.transform(null)},e}(Du);Zl(ix,{duration:_f}),Pu.current.register(jf,ix);var rx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){var t=this.center=this.element.bbox().center();this.element.transform(th().scale(Ef,Ef,t))},e.prototype.step=function(t){this.element.transform(th().scale(t,t,this.center))},e}(Du);Zl(rx,{easing:"easeOutElastic"}),Pu.current.register(Uf,rx);var nx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){this.fadeTo=this.element.opacity(),this.element.opacity(0)},e.prototype.step=function(t){this.element.opacity(t*this.fadeTo)},e}(Du);Zl(nx,{duration:200,easing:"linear"}),Pu.current.register(Tf,nx);var ox=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){this.element.transform(th().scale(Ef,Ef,this.options.center))},e.prototype.step=function(t){this.element.transform(th().scale(t,t,this.options.center))},e}(Du);Zl(ox,{easing:"easeOutElastic",duration:_f}),Pu.current.register(Jf,ox);var sx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.renderSegments()},e.prototype.createSegment=function(t,e,i){return new(e.style===Lf?rm:Yg)(t,e,i)},e.prototype.animationPoints=function(){return t.prototype.animationPoints.call(this).concat(this._segments)},e.prototype.createMissingValue=function(t,e){if(e===If){var i={x:t.x,y:t.y};return Km(i.x)||(i.x=0),Km(i.y)||(i.y=0),i}},e}(Jm);ha(sx.prototype,om);const ax=sx;var lx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){this.namedXAxes={},this.namedYAxes={},this.xAxisRangeTracker=new Sm,this.yAxisRangeTracker=new Sm},e.prototype.render=function(t){var e=this;void 0===t&&(t=this.panes);for(var i=this.groupSeriesByPane(),r=0;r<t.length;r++){var n=t[r],o=i[n.options.name||"default"]||[];e.addToLegend(o);var s=e.filterVisibleSeries(o);s&&(e.createScatterChart(ky(s,ag),n),e.createScatterLineChart(ky(s,lg),n),e.createBubbleChart(ky(s,Uf),n))}this.createAxes(t)},e.prototype.appendChart=function(e,i){this.xAxisRangeTracker.update(e.xAxisRanges),this.yAxisRangeTracker.update(e.yAxisRanges),t.prototype.appendChart.call(this,e,i)},e.prototype.removeAxis=function(e){var i=e.options.name;t.prototype.removeAxis.call(this,e),e.options.vertical?(this.yAxisRangeTracker.reset(i),delete this.namedYAxes[i]):(this.xAxisRangeTracker.reset(i),delete this.namedXAxes[i]),e===this.axisX&&delete this.axisX,e===this.axisY&&delete this.axisY},e.prototype.seriesPaneName=function(t){var e=this.options,i=t.xAxis,r=Ca([].concat(e.xAxis),(function(t){return t.name===i}))[0],n=t.yAxis,o=Ca([].concat(e.yAxis),(function(t){return t.name===n}))[0],s=(e.panes||[{}])[0].name||"default";return(r||{}).pane||(o||{}).pane||s},e.prototype.createScatterChart=function(t,e){t.length>0&&this.appendChart(new Jm(this,{series:t,clip:e.options.clip}),e)},e.prototype.createScatterLineChart=function(t,e){t.length>0&&this.appendChart(new ax(this,{series:t,clip:e.options.clip}),e)},e.prototype.createBubbleChart=function(t,e){t.length>0&&this.appendChart(new ey(this,{series:t,clip:e.options.clip}),e)},e.prototype.createXYAxis=function(t,e,i){for(var r,n=t.name,o=e?this.namedYAxes:this.namedXAxes,s=e?this.yAxisRangeTracker:this.xAxisRangeTracker,a=ha({reverse:!e&&this.chartService.rtl},t,{vertical:e}),l=Sy(a.type,Mg),c=s.query(),h=l?{min:.1,max:1}:{min:0,max:1},u=s.query(n)||c||h,p=[a.min,a.max],d=this.series,f=0;f<d.length;f++){var g=d[f],m=g[e?"yAxis":"xAxis"];if(m===a.name||0===i&&!m){var y=wf.current.bindPoint(g,0).valueFields;p.push(y[e?"y":"x"]);break}}0===i&&c&&(u.min=Math.min(u.min,c.min),u.max=Math.max(u.max,c.max));for(var v=0;v<p.length;v++)if(p[v]instanceof Date){r=!0;break}var b=new(Sy(a.type,Ps)||!a.type&&r?jd:l?Vd:Nd)(u.min,u.max,a,this.chartService);if(b.axisIndex=i,n){if(o[n])throw new Error((e?"Y":"X")+" axis with name "+n+" is already defined");o[n]=b}return this.appendAxis(b),b},e.prototype.createAxes=function(t){for(var e=this,i=this.options,r=[].concat(i.xAxis),n=[],o=[].concat(i.yAxis),s=[],a=0;a<r.length;a++){Oa(e.findPane(r[a].pane),t)&&n.push(e.createXYAxis(r[a],!1,a))}for(var l=0;l<o.length;l++){Oa(e.findPane(o[l].pane),t)&&s.push(e.createXYAxis(o[l],!0,l))}this.axisX=this.axisX||n[0],this.axisY=this.axisY||s[0]},e.prototype._dispatchEvent=function(t,e,i){for(var r=t._eventCoordinates(e),n=new Ec(r.x,r.y),o=this.axes,s=o.length,a=[],l=[],c=0;c<s;c++){var h=o[c],u=h.options.vertical?l:a,p=h.getValue(n);null!==p&&u.push(p)}a.length>0&&l.length>0&&t.trigger(i,{element:Ul(e),originalEvent:e,x:_y(a),y:_y(l)})},e.prototype.updateAxisOptions=function(t,e){var i=t.options.vertical,r=this.groupAxes(this.panes),n=(i?r.y:r.x).indexOf(t);cx(this.options,n,i,e),cx(this.originalOptions,n,i,e)},e}(Ly);function cx(t,e,i,r){ha([].concat(i?t.yAxis:t.xAxis)[e],r)}Zl(lx,{xAxis:{},yAxis:{}}),ha(lx.prototype,By);const hx=lx;var ux=function(t){function e(e,i,r){t.call(this,r),this.value=e,this.sector=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.options.labels,e=this.owner.chartService,i=this.value;if(!this._rendered&&!1!==this.visible){this._rendered=!0;var r=wa(t),n=this.pointData();if(r?i=r(n):t.format&&(i=e.format.auto(t.format,i)),t.visible&&(i||0===i)){if(t.position===Os||t.position===Ig)t.color||(t.color=vc(this.options.color)),t.background||(t.background=this.options.color);else{var o=e.theme.seriesDefaults.labels;t.color=t.color||o.color,t.background=t.background||o.background}this.label=new dp(i,ha({},t,{align:Os,vAlign:"",animation:{type:Tf,delay:this.animationDelay}}),n),this.append(this.label)}}},e.prototype.reflow=function(t){this.render(),this.box=t,this.reflowLabel()},e.prototype.reflowLabel=function(){var t=this.options.labels,e=this.label,i=this.sector.clone(),r=t.distance,n=i.middle();if(e){var o,s=e.box.height(),a=e.box.width();if(t.position===Os)i.radius=Math.abs((i.radius-s)/2)+s,o=i.point(n),e.reflow(new Vc(o.x,o.y-s/2,o.x,o.y));else if(t.position===Ig)i.radius=i.radius-s/2,o=i.point(n),e.reflow(new Vc(o.x,o.y-s/2,o.x,o.y));else{var l;(o=i.clone().expand(r).point(n)).x>=i.center.x?(l=o.x+a,e.orientation=Hs):(l=o.x-a,e.orientation=Ns),e.reflow(new Vc(l,o.y-s,o.x,o.y))}}},e.prototype.createVisual=function(){var e=this,i=this.sector,r=this.options;if(t.prototype.createVisual.call(this),this.value)if(r.visual){var n=(i.startAngle+180)%360,o=r.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,center:new Nc(i.center.x,i.center.y),radius:i.radius,innerRadius:i.innerRadius,startAngle:n,endAngle:n+i.angle,options:r,sender:this.getSender(),createVisual:function(){var t=new ku;return e.createSegmentVisual(t),t}});o&&this.visual.append(o)}else this.createSegmentVisual(this.visual)},e.prototype.createSegmentVisual=function(t){var e=this.sector,i=this.options,r=i.border||{},n=r.width>0?{stroke:{color:r.color,width:r.width,opacity:r.opacity,dashType:r.dashType}}:{},o=i.color,s={color:o,opacity:i.opacity},a=this.createSegment(e,ha({fill:s,stroke:{opacity:i.opacity},zIndex:i.zIndex},n));t.append(a),Am(i)&&t.append(this.createGradientOverlay(a,{baseColor:o,fallbackFill:s},ha({center:[e.center.x,e.center.y],innerRadius:e.innerRadius,radius:e.radius,userSpace:!0},i.overlay)))},e.prototype.createSegment=function(t,e){return e.singleSegment?new wu(new mu(new Nc(t.center.x,t.center.y),t.radius),e):du.current.createRing(t,e)},e.prototype.createAnimation=function(){var e=this.options,i=this.sector.center;ha(e,{animation:{center:[i.x,i.y],delay:this.animationDelay}}),t.prototype.createAnimation.call(this)},e.prototype.createHighlight=function(t){var e=this.options.highlight||{},i=e.border||{};return this.createSegment(this.sector,ha({},t,{fill:{color:e.color,opacity:e.opacity},stroke:{opacity:i.opacity,width:i.width,color:i.color}}))},e.prototype.highlightVisual=function(){return this.visual.children[0]},e.prototype.highlightVisualArgs=function(){var t=this.sector;return{options:this.options,radius:t.radius,innerRadius:t.innerRadius,center:new Nc(t.center.x,t.center.y),startAngle:t.startAngle,endAngle:t.angle+t.startAngle,visual:this.visual}},e.prototype.tooltipAnchor=function(){var t=this.sector.clone().expand(5),e=t.middle();return{point:t.point(e),align:fx(e+180)}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.pointData=function(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage}},e}(Ru),px=Xl(Wl(30),Ds),dx=Xl(Wl(60),Ds);function fx(t){var e=Wl(t),i=Xl(Math.sin(e),Ds),r=Xl(Math.cos(e),Ds);return{horizontal:Math.abs(i)>dx?Os:r<0?Hs:Ns,vertical:Math.abs(i)<px?Os:i<0?Ts:Ws}}Zl(ux,{color:Gs,overlay:{gradient:"roundedBevel"},border:{width:.5},labels:{visible:!1,distance:35,font:Is,margin:ma(.5),align:Es,zIndex:1,position:Dg},animation:{type:Jf},highlight:{visible:!0,border:{width:1}},visible:!0}),ha(ux.prototype,Vg);const gx=ux;var mx={createLegendItem:function(t,e,i){var r=this.options.legend||{},n=r.labels||{},o=r.inactiveItems||{},s=o.labels||{};if(i&&!1!==i.visibleInLegend){var a,l,c=!1!==i.visible,h=c?wa(n):wa(s)||wa(n),u=i.category;h&&(u=h({text:u,series:i.series,dataItem:i.dataItem,percentage:i.percentage,value:t})),c?(a={},l=e.color):(a={color:s.color,font:s.font},l=(o.markers||{}).color),Km(u)&&""!==u&&this.legendItems.push({active:c,pointIndex:i.index,text:u,series:i.series,markerColor:l,labels:a})}}};const yx=mx;var vx=function(t){function e(e,i){t.call(this,i),this.plotArea=e,this.chartService=e.chartService,this.points=[],this.legendItems=[],this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.traverseDataPoints(this.addValue.bind(this))},e.prototype.traverseDataPoints=function(t){var e=this.options,i=this.plotArea.options.seriesColors;void 0===i&&(i=[]);for(var r=i.length,n=e.series,o=n.length,s=0;s<o;s++){var a=n[s],l=a.data,c=xy(a),h=c.total,u=c.points,p=c.count,d=360/h,f=void 0;isFinite(d)||(f=360/p);var g=void 0;g=Ll(a.startAngle)?a.startAngle:e.startAngle,s!==o-1&&a.labels.position===Dg&&(a.labels.position=Os);for(var m=0;m<u.length;m++){var y=u[m];if(y){var v=y.fields,b=y.value,w=y.visible,x=0!==b?f||b*d:0,S=1!==l.length&&Boolean(v.explode);aa(a.color)||(a.color=v.color||i[m%r]),t(b,new Xc(null,0,0,g,x),{owner:this,category:Ll(v.category)?v.category:"",index:m,series:a,seriesIx:s,dataItem:l[m],percentage:0!==h?b/h:0,explode:S,visibleInLegend:v.visibleInLegend,visible:w,zIndex:o-s,animationDelay:this.animationDelay(m,s,o)}),!1!==w&&(g+=x)}}}},e.prototype.evalSegmentOptions=function(t,e,i){var r=i.series;jg(t,{value:e,series:r,dataItem:i.dataItem,category:i.category,percentage:i.percentage},{defaults:r._defaults,excluded:["data","content","template","visual","toggle"]})},e.prototype.addValue=function(t,e,i){var r=ha({},i.series,{index:i.index});if(this.evalSegmentOptions(r,t,i),this.createLegendItem(t,r,i),!1!==i.visible){var n=new gx(t,e,r);Object.assign(n,i),this.append(n),this.points.push(n)}},e.prototype.reflow=function(t){var e=this,i=e.options,r=e.points,n=e.seriesConfigs;void 0===n&&(n=[]);var o=r.length,s=t.clone(),a=Math.min(s.width(),s.height()),l=a/2,c=a-.85*a,h=new Vc(s.x1,s.y1,s.x1+a,s.y1+a),u=h.center(),p=s.center(),d=i.series.length,f=[],g=[],m=Kl(i.padding,c);this.targetBox=t,m=m>l-5?l-5:m,h.translate(p.x-u.x,p.y-u.y);for(var y=l-m,v=new Ec(y+h.x1+m,y+h.y1+m),b=0;b<o;b++){var w=r[b],x=w.sector,S=w.seriesIx;if(x.radius=y,x.center=v,n.length){var k=n[S];x.innerRadius=k.innerRadius,x.radius=k.radius}S===d-1&&w.explode&&(x.center=x.clone().setRadius(.15*x.radius).point(x.middle())),w.reflow(h);var C=w.label;C&&C.options.position===Dg&&S===d-1&&(C.orientation===Hs?g.push(C):f.push(C))}f.length>0&&(f.sort(this.labelComparator(!0)),this.leftLabelsReflow(f)),g.length>0&&(g.sort(this.labelComparator(!1)),this.rightLabelsReflow(g)),this.box=h},e.prototype.leftLabelsReflow=function(t){var e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)},e.prototype.rightLabelsReflow=function(t){var e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)},e.prototype.distanceBetweenLabels=function(t){var e=Hl(this.points),i=e.sector,r=t.length-1,n=i.radius+e.options.labels.distance,o=[],s=t[0].box,a=Xl(s.y1-(i.center.y-n-s.height()-s.height()/2));o.push(a);for(var l=0;l<r;l++){var c=t[l+1].box;s=t[l].box,a=Xl(c.y1-s.y2),o.push(a)}return a=Xl(i.center.y+n-t[r].box.y2-t[r].box.height()/2),o.push(a),o},e.prototype.distributeLabels=function(t,e){for(var i,r,n,o=t.length,s=0;s<o;s++)for(n=-t[s],i=r=s;n>0&&(i>=0||r<o);)n=this._takeDistance(t,s,--i,n),n=this._takeDistance(t,s,++r,n);this.reflowLabels(t,e)},e.prototype._takeDistance=function(t,e,i,r){var n=r;if(t[i]>0){var o=Math.min(t[i],n);n-=o,t[i]-=o,t[e]+=o}return n},e.prototype.reflowLabels=function(t,e){var i,r=Hl(this.points),n=r.sector,o=r.options.labels,s=e.length,a=o.distance,l=n.center.y-(n.radius+a)-e[0].box.height();t[0]+=2;for(var c=0;c<s;c++){var h=e[c],u=h.box;l+=t[c],i=this.hAlignLabel(u.x2,n.clone().expand(a),l,l+u.height(),h.orientation===Hs),h.orientation===Hs?(o.align!==Es&&(i=n.radius+n.center.x+a),h.reflow(new Vc(i+u.width(),l,i,l))):(o.align!==Es&&(i=n.center.x-n.radius-a),h.reflow(new Vc(i-u.width(),l,i,l))),l+=u.height()}},e.prototype.createVisual=function(){var e=this,i=this.options.connectors,r=this.points,n=r.length;t.prototype.createVisual.call(this),this._connectorLines=[];for(var o=0;o<n;o++){var s=r[o],a=s.sector,l=s.label,c=a.middle(),h=(s.options.connectors||{}).color||i.color;if(l){var u=new hu({stroke:{color:h,width:i.width},animation:{type:Tf,delay:s.animationDelay}});if(l.options.position===Dg){var p=l.box,d=a.center,f=a.point(c),g=new Ec(p.x1,p.center().y),m=void 0,y=void 0,v=void 0;f=a.clone().expand(i.padding).point(c),u.moveTo(f.x,f.y),l.orientation===Hs?(v=bx(d,f,g,y=new Ec(p.x1-i.padding,p.center().y)),g=new Ec(y.x-4,y.y),(v=v||g).x=Math.min(v.x,g.x),e.pointInCircle(v,a.center,a.radius+4)||v.x<a.center.x?(m=a.center.x+a.radius+4,s.options.labels.align!==Vf?m<g.x?u.lineTo(m,f.y):u.lineTo(f.x+8,f.y):u.lineTo(m,f.y),u.lineTo(g.x,y.y)):(v.y=y.y,u.lineTo(v.x,v.y))):(v=bx(d,f,g,y=new Ec(p.x2+i.padding,p.center().y)),g=new Ec(y.x+4,y.y),(v=v||g).x=Math.max(v.x,g.x),e.pointInCircle(v,a.center,a.radius+4)||v.x>a.center.x?(m=a.center.x-a.radius-4,s.options.labels.align!==Vf?m>g.x?u.lineTo(m,f.y):u.lineTo(f.x-8,f.y):u.lineTo(m,f.y),u.lineTo(g.x,y.y)):(v.y=y.y,u.lineTo(v.x,v.y))),u.lineTo(y.x,y.y),e._connectorLines.push(u),e.visual.append(u)}}}},e.prototype.renderVisual=function(){if(t.prototype.renderVisual.call(this),tc(this.options.series,(function(t){return t.autoFit}))){var e=this.targetBox,i=this.box.center(),r=this.visual.bbox();if(!r)return;var n=r.bottomRight(),o=Math.min((i.y-e.y1)/(i.y-r.origin.y),(e.y2-i.y)/(n.y-i.y),(i.x-e.x1)/(i.x-r.origin.x),(e.x2-i.x)/(n.x-i.x));o<1&&this.visual.transform(th().scale(o,o,[i.x,i.y]))}},e.prototype.labelComparator=function(t){var e=t?-1:1;return function(t,i){return((t.parent.sector.middle()+270)%360-(i.parent.sector.middle()+270)%360)*e}},e.prototype.hAlignLabel=function(t,e,i,r,n){var o=e.radius,s=e.center,a=s.x,l=s.y,c=Math.min(Math.abs(l-i),Math.abs(l-r));return c>o?t:a+Math.sqrt(o*o-c*c)*(n?1:-1)},e.prototype.pointInCircle=function(t,e,i){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(i,2)},e.prototype.formatPointValue=function(t,e){return this.chartService.format.auto(e,t.value)},e.prototype.animationDelay=function(t){return 70*t},e.prototype.stackRoot=function(){return this},e}(Ru);function bx(t,e,i,r){var n,o=(r.x-i.x)*(t.y-i.y)-(r.y-i.y)*(t.x-i.x),s=(r.y-i.y)*(e.x-t.x)-(r.x-i.x)*(e.y-t.y);if(0!==s){var a=o/s;n=new Ec(t.x+a*(e.x-t.x),t.y+a*(e.y-t.y))}return n}Zl(vx,{startAngle:90,connectors:{width:2,color:"#939393",padding:8},inactiveItems:{markers:{},labels:{}}}),ha(vx.prototype,yx),vx.prototype.isStackRoot=!0;const wx=vx;var xx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.createPieChart(this.series)},e.prototype.createPieChart=function(t){var e=t[0],i=new wx(this,{series:t,padding:e.padding,startAngle:e.startAngle,connectors:e.connectors,legend:this.options.legend});this.appendChart(i)},e.prototype.appendChart=function(e,i){t.prototype.appendChart.call(this,e,i),Fl(this.options.legend.items,e.legendItems)},e}(Ly);const Sx=xx;var kx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflowLabel=function(){var e=this.options.labels,i=this.label,r=this.sector.clone(),n=r.middle();if(i){var o=i.box.height();if(e.position===Os){r.radius-=(r.radius-r.innerRadius)/2;var s=r.point(n);i.reflow(new Vc(s.x,s.y-o/2,s.x,s.y))}else t.prototype.reflowLabel.call(this)}},e.prototype.createSegment=function(t,e){return du.current.createRing(t,e)},e}(gx);Zl(kx,{overlay:{gradient:"roundedGlass"},labels:{position:Os},animation:{type:Jf}}),ha(kx.prototype,Vg);const Cx=kx;var Ax=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addValue=function(t,e,i){var r=ha({},i.series,{index:i.index});if(this.evalSegmentOptions(r,t,i),this.createLegendItem(t,r,i),!1!==i.visible){var n=new Cx(t,e,r);Object.assign(n,i),this.append(n),this.points.push(n)}},e.prototype.reflow=function(e){for(var i,r=this.options,n=e.clone(),o=Math.min(n.width(),n.height()),s=o/2,a=o-.85*o,l=r.series,c=l.length,h=Kl(r.padding,a),u=s-(h=h>s-5?s-5:h),p=0,d=0;d<c;d++){var f=l[d];0===d&&Ll(f.holeSize)&&(i=f.holeSize,u-=f.holeSize),Ll(f.size)?u-=f.size:p++,Ll(f.margin)&&d!==c-1&&(u-=f.margin)}Ll(i)||(u-=i=.75*((s-h)/(c+.75)));var g,m=i,y=0;this.seriesConfigs=[];for(var v=0;v<c;v++){var b=l[v];g=(m+=y)+Kl(b.size,u/p),this.seriesConfigs.push({innerRadius:m,radius:g}),y=b.margin||0,m=g}t.prototype.reflow.call(this,e)},e.prototype.animationDelay=function(t,e,i){return 50*t+_f*(e+1)/(i+1)},e}(wx);Zl(Ax,{startAngle:90,connectors:{width:2,color:"#939393",padding:8}});const _x=Ax;var Tx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.createDonutChart(this.series)},e.prototype.createDonutChart=function(t){var e=t[0],i=new _x(this,{series:t,padding:e.padding,connectors:e.connectors,legend:this.options.legend});this.appendChart(i)},e}(Sx);const Ox=Tx;var Ex=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){this.valueAxisRangeTracker=new Sm},e.prototype.render=function(){this.addToLegend(this.series),this.createPolarAxis(),this.createCharts(),this.createValueAxis()},e.prototype.alignAxes=function(){var t=this.valueAxis,e=t.range(),i=t.options.reverse?e.max:e.min,r=t.getSlot(i),n=this.polarAxis.getSlot(0).center,o=t.box.translate(n.x-r.x1,n.y-r.y1);t.reflow(o)},e.prototype.createValueAxis=function(){var t,e,i=this.valueAxisRangeTracker,r=i.query(),n=this.valueAxisOptions({roundToMajorUnit:!1,zIndex:-1});n.type===Mg?(t=nf,e={min:.1,max:1}):(t=ef,e={min:0,max:1});var o=i.query(name)||r||e;o&&r&&(o.min=Math.min(o.min,r.min),o.max=Math.max(o.max,r.max));var s=new t(o.min,o.max,n,this.chartService);this.valueAxis=s,this.appendAxis(s)},e.prototype.reflowAxes=function(){var t=this,e=t.options.plotArea,i=t.valueAxis,r=t.polarAxis,n=t.box,o=.15*Math.min(n.width(),n.height()),s=ma(e.padding||{},o),a=n.clone().unpad(s),l=a.clone();l.y2=l.y1+Math.min(l.width(),l.height()),l.align(a,Js,Os);var c=l.clone().shrink(0,l.height()/2);r.reflow(l),i.reflow(c);var h=i.lineBox().height()-i.box.height();i.reflow(i.box.unpad({top:h})),this.axisBox=l,this.alignAxes(l)},e.prototype.backgroundBox=function(){return this.box},e.prototype.detachLabels=function(){},e}(Ly);const Mx=Ex;var Px=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointSlot=function(t,e){var i=t.center.y-e.y1,r=Ec.onCircle(t.center,t.startAngle,i);return new Vc(r.x,r.y,r.x,r.y)},e}(Jm);Zl(Px,{clip:!1});const Ix=Px;var Dx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ax);Dx.prototype.pointSlot=Ix.prototype.pointSlot,Zl(Dx,{clip:!1});const Fx=Dx;var Rx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fillToAxes=function(t){var e=this._polarAxisCenter();t.lineTo(e.x,e.y)},e.prototype._polarAxisCenter=function(){return this.parent.plotArea.polarAxis.box.center()},e.prototype.strokeSegments=function(){var t=this._strokeSegments;if(!t){var e=this._polarAxisCenter(),i=new af(!1),r=this.points();r.push(e),(t=this._strokeSegments=i.process(r)).pop()}return t},e}(vm);const Lx=Rx;var Nx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fillToAxes=function(t){var e=this.parent.plotArea.polarAxis.box.center(),i=new Fh([e.x,e.y]);t.segments.unshift(i),t.segments.push(i)},e}(fm);const Bx=Nx;var jx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createSegment=function(t,e,i){return(e.line||{}).style===Lf?new Lx(t,e,i):new Bx(t,e,i)},e.prototype.createMissingValue=function(t,e){var i;return Km(t.x)&&e!==Df&&(i={x:t.x,y:t.y},e===If&&(i.y=0)),i},e.prototype.seriesMissingValues=function(t){return t.missingValues||If},e.prototype._hasMissingValuesGap=function(){for(var t=this.options.series,e=0;e<t.length;e++)if("gap"===this.seriesMissingValues(t[e]))return!0},e.prototype.sortPoints=function(t){if(t.sort(zx),this._hasMissingValuesGap())for(var e=0;e<t.length;e++){var i=t[e];if(i)Km(i.value.y)||"gap"!==this.seriesMissingValues(i.series)||delete t[e]}return t},e}(Fx);function zx(t,e){return t.value.x-e.value.x}const Ux=jx;var $x=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createPolarAxis=function(){var t=new Yd(this.options.xAxis,this.chartService);this.polarAxis=t,this.axisX=t,this.appendAxis(t)},e.prototype.valueAxisOptions=function(t){return ha(t,{majorGridLines:{type:As},minorGridLines:{type:As}},this.options.yAxis)},e.prototype.createValueAxis=function(){t.prototype.createValueAxis.call(this),this.axisY=this.valueAxis},e.prototype.appendChart=function(t,e){this.valueAxisRangeTracker.update(t.yAxisRanges),Ly.prototype.appendChart.call(this,t,e)},e.prototype.createCharts=function(){var t=this.filterVisibleSeries(this.series),e=this.panes[0];this.createLineChart(ky(t,[Qf]),e),this.createScatterChart(ky(t,[tg]),e),this.createAreaChart(ky(t,[Zf]),e)},e.prototype.createLineChart=function(t,e){if(0!==t.length){var i=new Fx(this,{series:t});this.appendChart(i,e)}},e.prototype.createScatterChart=function(t,e){if(0!==t.length){var i=new Ix(this,{series:t});this.appendChart(i,e)}},e.prototype.createAreaChart=function(t,e){if(0!==t.length){var i=new Ux(this,{series:t});this.appendChart(i,e)}},e.prototype._dispatchEvent=function(t,e,i){var r=t._eventCoordinates(e),n=new Ec(r.x,r.y),o=this.axisX.getValue(n),s=this.axisY.getValue(n);null!==o&&null!==s&&t.trigger(i,{element:Ul(e),x:o,y:s})},e.prototype.createCrosshairs=function(){},e}(Mx);Zl($x,{xAxis:{},yAxis:{}}),ha($x.prototype,By);const Hx=$x;var Vx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointSlot=function(t,e){var i=t.center.y-e.y1,r=Ec.onCircle(t.center,t.middle(),i);return new Vc(r.x,r.y,r.x,r.y)},e.prototype.renderSegments=function(){if(t.prototype.renderSegments.call(this),this._segments&&this._segments.length>1)for(var e=function(t){for(var e=[],i=0;i<t.length;i++){var r=t[i];e[r.seriesIx]=e[r.seriesIx]||[],e[r.seriesIx].push(r)}return e}(this._segments),i=0;i<e.length;i++){var r=e[i];if(r&&r.length>1){var n=r[0].linePoints[0],o=Hl(r),s=Hl(o.linePoints),a=0===n.categoryIx,l=s.categoryIx===s.categoriesCount-1;a&&l&&Hl(r).linePoints.push(n)}}},e.prototype.createSegment=function(t,e,i){var r=new(e.style===Lf?rm:Yg)(t,e,i),n=this.seriesMissingValues(e);return t.length!==e.data.length&&n!==Df||(r.options.closed=!0),r},e}(pm);Zl(Vx,{clip:!1,limitPoints:!1});const qx=Vx;var Wx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fillToAxes=function(){},e}(vm);const Xx=Wx;var Gx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fillToAxes=function(){},e}(fm);const Kx=Gx;var Yx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createSegment=function(t,e,i,r){var n,o,s,a=this.options.isStacked,l=(e.line||{}).style;return a&&i>0&&r&&(o=r.linePoints.slice(0),n=r),l===Lf?(s=new Xx(t,e,i,n,o)).options.closed=!0:(t.push(t[0]),s=new Kx(t,e,i,n,o)),s},e.prototype.seriesMissingValues=function(t){return t.missingValues||If},e}(qx);const Jx=Yx;var Zx=function(t){function e(e,i){t.call(this,e,null,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Cx);Zl(Zx,{overlay:{gradient:"none"},labels:{distance:10}});const Qx=Zx;var tS=function(t){function e(e){t.call(this,e),this.forEach=e.rtl?Em:Om}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.options,i=this.children,r=e.gap,n=e.spacing,o=i.length,s=o+r+n*(o-1),a=t.angle/s,l=t.startAngle+a*(r/2);this.forEach(i,(function(e){var i=t.clone();i.startAngle=l,i.angle=a,e.sector&&(i.radius=e.sector.radius),e.reflow(i),e.sector=i,l+=a+a*n}))},e}(Ru);Zl(tS,{gap:1,spacing:0});const eS=tS;var iS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.options.reverse,i=this.children,r=i.length,n=e?r-1:0,o=e?-1:1;this.box=new Vc;for(var s=n;s>=0&&s<r;s+=o){var a=i[s].sector;a.startAngle=t.startAngle,a.angle=t.angle}},e}(Ru);const rS=iS;var nS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointType=function(){return Qx},e.prototype.clusterType=function(){return eS},e.prototype.stackType=function(){return rS},e.prototype.categorySlot=function(t,e){return t.getSlot(e)},e.prototype.pointSlot=function(t,e){var i=t.clone(),r=t.center.y;return i.radius=r-e.y1,i.innerRadius=r-e.y2,i},e.prototype.reflowPoint=function(t,e){t.sector=e,t.reflow()},e.prototype.createAnimation=function(){this.options.animation.center=this.box.toRect().center(),t.prototype.createAnimation.call(this)},e}(Rm);nS.prototype.reflow=$g.prototype.reflow,Zl(nS,{clip:!1,limitPoints:!1,animation:{type:"pie"}});const oS=nS;var sS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createPolarAxis=function(){var t=new Gd(this.options.categoryAxis,this.chartService);this.polarAxis=t,this.categoryAxis=t,this.appendAxis(t),this.aggregateCategories(),this.createCategoryAxesLabels()},e.prototype.valueAxisOptions=function(t){return this._hasBarCharts&&ha(t,{majorGridLines:{type:As},minorGridLines:{type:As}}),this._isStacked100&&ha(t,{roundToMajorUnit:!1,labels:{format:"P0"}}),ha(t,this.options.valueAxis)},e.prototype.aggregateCategories=function(){wv.prototype.aggregateCategories.call(this,this.panes)},e.prototype.createCategoryAxesLabels=function(){wv.prototype.createCategoryAxesLabels.call(this,this.panes)},e.prototype.filterSeries=function(t){return t},e.prototype.createCharts=function(){var t=this.filterVisibleSeries(this.series),e=this.panes[0];this.createAreaChart(ky(t,[eg]),e),this.createLineChart(ky(t,[rg]),e),this.createBarChart(ky(t,[ig]),e)},e.prototype.chartOptions=function(t){var e={series:t},i=t[0];if(i){var r=this.filterVisibleSeries(t),n=i.stack;e.isStacked=n&&r.length>1,e.isStacked100=n&&"100%"===n.type&&r.length>1,e.isStacked100&&(this._isStacked100=!0)}return e},e.prototype.createAreaChart=function(t,e){if(0!==t.length){var i=new Jx(this,this.chartOptions(t));this.appendChart(i,e)}},e.prototype.createLineChart=function(t,e){if(0!==t.length){var i=new qx(this,this.chartOptions(t));this.appendChart(i,e)}},e.prototype.createBarChart=function(t,e){if(0!==t.length){var i=t[0],r=this.chartOptions(t);r.gap=i.gap,r.spacing=i.spacing;var n=new oS(this,r);this.appendChart(n,e),this._hasBarCharts=!0}},e.prototype.seriesCategoryAxis=function(){return this.categoryAxis},e.prototype._dispatchEvent=function(t,e,i){var r=t._eventCoordinates(e),n=new Ec(r.x,r.y),o=this.categoryAxis.getCategory(n),s=this.valueAxis.getValue(n);null!==o&&null!==s&&t.trigger(i,{element:Ul(e),category:o,value:s})},e.prototype.createCrosshairs=function(){},e}(Mx);ha(sS.prototype,By,{appendChart:wv.prototype.appendChart,aggregateSeries:wv.prototype.aggregateSeries,seriesSourcePoints:wv.prototype.seriesSourcePoints}),Zl(sS,{categoryAxis:{categories:[]},valueAxis:{}});const aS=sS;var lS=function(t){function e(e,i,r){t.call(this,i),this.value=e,this.options.index=r.index}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.points,i=this.children[0];this.box=new Vc(e[0].x,e[0].y,e[1].x,e[2].y),i&&i.reflow(new Vc(t.x1,e[0].y,t.x2,e[2].y))},e.prototype.createVisual=function(){var e,i=this,r=this.options;t.prototype.createVisual.call(this),(e=r.visual?r.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,points:this.points,options:r,sender:this.getSender(),createVisual:function(){return i.createPath()}}):this.createPath())&&this.visual.append(e)},e.prototype.createPath=function(){var t=this.options,e=t.border;return hu.fromPoints(this.points,{fill:{color:t.color,opacity:t.opacity},stroke:{color:e.color,opacity:e.opacity,width:e.width}}).close()},e.prototype.createHighlight=function(t){return hu.fromPoints(this.points,t)},e.prototype.highlightVisual=function(){return this.visual.children[0]},e.prototype.highlightVisualArgs=function(){var t=hu.fromPoints(this.points).close();return{options:this.options,path:t}},e.prototype.tooltipAnchor=function(){var t=this.box;return{point:new Ec(t.center().x,t.y1),align:{horizontal:"center",vertical:"top"}}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e}(Ru);Zl(lS,{color:Gs,border:{width:1}}),ha(lS.prototype,Vg);const cS=lS;var hS=function(t){function e(e,i){t.call(this,i),this.plotArea=e,this.points=[],this.labels=[],this.legendItems=[],this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.formatPointValue=function(t,e){return this.chartService.format.auto(e,t.value)},e.prototype.render=function(){var t=this,e=this.options,i=this.plotArea.options.seriesColors;void 0===i&&(i=[]);var r=e.series[0],n=r.data;if(n)for(var o=xy(r),s=o.total,a=o.points,l=0;l<a.length;l++){var c=a[l];if(c){var h=c.fields;aa(r.color)||(r.color=h.color||i[l%i.length]),h=ha({index:l,owner:t,series:r,dataItem:n[l],percentage:c.value/s},h,{visible:c.visible});var u=c.valueFields.value,p=t.createSegment(u,h),d=t.createLabel(u,h);p&&d&&p.append(d)}}},e.prototype.evalSegmentOptions=function(t,e,i){var r=i.series;jg(t,{value:e,series:r,dataItem:i.dataItem,index:i.index},{defaults:r._defaults,excluded:["data","content","template","toggle","visual"]})},e.prototype.createSegment=function(t,e){var i=ha({},e.series);if(this.evalSegmentOptions(i,t,e),this.createLegendItem(t,i,e),!1!==e.visible){var r=new cS(t,i,e);return Object.assign(r,e),this.append(r),this.points.push(r),r}},e.prototype.createLabel=function(t,e){var i=e.series,r=e.dataItem,n=ha({},this.options.labels,i.labels),o=t;if(n.visible){var s=wa(n),a={dataItem:r,value:t,percentage:e.percentage,category:e.category,series:i};s?o=s(a):n.format&&(o=this.plotArea.chartService.format.auto(n.format,o)),n.color||(n.color=vc(i.color),n.background||(n.background=i.color)),this.evalSegmentOptions(n,t,e);var l=new dp(o,ha({vAlign:n.position},n),a);return this.labels.push(l),l}},e.prototype.labelPadding=function(){for(var t=this.labels,e={left:0,right:0},i=0;i<t.length;i++){var r=t[i].options.align;if(r!==Os){var n=t[i].box.width();r===Ns?e.left=Math.max(e.left,n):e.right=Math.max(e.right,n)}}return e},e.prototype.dynamicSlopeReflow=function(t,e,i){for(var r=this.options,n=this.points,o=n.length,s=n[0],a=s,l=0;l<n.length;l++)n[l].percentage>a.percentage&&(a=n[l]);for(var c=s.percentage/a.percentage*e,h=(e-c)/2,u=0,p=0;p<o;p++){var d=n[p].percentage,f=n[p+1],g=f?f.percentage:d,m=n[p].points=[],y=r.dynamicHeight?i*d:i/o,v=void 0;v=Vl(v=d?(e-c*(g/d))/2:g?0:e/2,0,e),m.push(new Nc(t.x1+h,t.y1+u)),m.push(new Nc(t.x1+e-h,t.y1+u)),m.push(new Nc(t.x1+e-v,t.y1+y+u)),m.push(new Nc(t.x1+v,t.y1+y+u)),h=v,u+=y+r.segmentSpacing,c=Vl(e-2*v,0,e)}},e.prototype.constantSlopeReflow=function(t,e,i){for(var r=this.options,n=this.points,o=n.length,s=r.neckRatio<=1,a=s?r.neckRatio*e:e,l=s?0:(e-e/r.neckRatio)/2,c=((s?e:e-2*l)-a)/2,h=0,u=0;u<o;u++){var p=n[u].points=[],d=n[u].percentage,f=r.dynamicHeight?c*d:c/o,g=r.dynamicHeight?i*d:i/o;p.push(new Nc(t.x1+l,t.y1+h)),p.push(new Nc(t.x1+e-l,t.y1+h)),p.push(new Nc(t.x1+e-l-f,t.y1+g+h)),p.push(new Nc(t.x1+l+f,t.y1+g+h)),l+=f,h+=g+r.segmentSpacing}},e.prototype.reflow=function(t){var e=this.points,i=e.length;if(i){var r=this.options,n=t.clone().unpad(this.labelPadding()),o=n.height()-r.segmentSpacing*(i-1),s=n.width();r.dynamicSlope?this.dynamicSlopeReflow(n,s,o):this.constantSlopeReflow(n,s,o);for(var a=0;a<i;a++)e[a].reflow(t)}},e}(Ru);Zl(hS,{neckRatio:.3,width:300,dynamicSlope:!1,dynamicHeight:!0,segmentSpacing:0,labels:{visible:!1,align:Os,position:Os,zIndex:1}}),ha(hS.prototype,yx);const uS=hS;var pS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.createFunnelChart(this.series)},e.prototype.createFunnelChart=function(t){var e=t[0],i=new uS(this,{series:t,legend:this.options.legend,neckRatio:e.neckRatio,dynamicHeight:e.dynamicHeight,dynamicSlope:e.dynamicSlope,segmentSpacing:e.segmentSpacing,highlight:e.highlight});this.appendChart(i)},e.prototype.appendChart=function(e,i){t.prototype.appendChart.call(this,e,i),Fl(this.options.legend.items,e.legendItems)},e}(Ly);const dS=pS;const fS=function(t,e){void 0===e&&(e=.05);var i=gc(t),r=1-e;return function(t){var e=i.toHSL(),n=100-e.l,o=r-t;return e.l+=Math.min(o*n,n),e.toCss()}};var gS=function(t){function e(e,i){t.call(this),this.options=i,this.color=i.color||Gs,this.value=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this._rendered||(this._rendered=!0,this.createMarker(),this.createLabel(),this.createNote())},e.prototype.createLabel=function(){var t=this.options.labels;if(t.visible){var e,i=this.pointData(),r=wa(t),n=t.color;e=r?r(i):this.formatValue(t.format),n||(n=vc(this.color)),this.label=new dp(e,ha({align:Os,vAlign:Os,margin:{left:5,right:5},zIndex:Kl(t.zIndex,this.series.zIndex)},t,{color:n}),i),this.append(this.label)}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.reflow=function(t){this.render();var e=this.label;this.box=t,e&&e.reflow(this.markerBox()),this.note&&this.note.reflow(t),this.marker.reflow(this.markerBox())},e.prototype.markerBox=function(){var t=this.options.markers,e=t.border,i=this.box.toRect(),r=Kl(t.type,"rect")===Vs,n=Kl(e.width,r?1:0),o=Math.round(n/2);if(t.size){var s=i.center();i.size.width=i.size.height=t.size,i.origin.x=Math.round(s.x-i.size.width/2),i.origin.y=Math.round(s.y-i.size.height/2)}return i.size.width-=n,i.size.height-=n,i.origin.y+=o+.5,i.origin.x+=o+.5,hp(i)},e.prototype.markerBorder=function(){var t=this.options,e=t.markers.border,i=Kl(e.opacity,t.opacity);return{color:e.color||this.color,width:e.width,opacity:i,dashType:e.dashType}},e.prototype.createMarker=function(){var t=this.options,e=t.markers,i=new ju({type:Kl(e.type,"rect"),width:e.size,height:e.size,rotation:e.rotation,background:this.color,border:this.markerBorder(),borderRadius:e.borderRadius,opacity:this.series.opacity||t.opacity,zIndex:Kl(t.zIndex,this.series.zIndex),animation:t.animation,visual:t.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category});this.marker=i,this.append(i)},e.prototype.createHighlight=function(t){var e=this.options,i=this.options.highlight.markers||this.options.markers,r=new ju({type:Kl(i.type,"rect"),width:i.size,height:i.size,rotation:i.rotation,background:i.color||this.color,border:this.markerBorder(),borderRadius:i.borderRadius,opacity:this.series.opacity||e.opacity,zIndex:Kl(e.zIndex,this.series.zIndex)});r.reflow(this.markerBox());var n=r.getElement();return n.options.fill=t.fill,n.options.stroke=t.stroke,n},e.prototype.highlightVisual=function(){return this.rectVisual},e.prototype.highlightVisualArgs=function(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},e.prototype.tooltipAnchor=function(){var t=this.box.center().x,e=this.box.y1-5;return{point:new Ec(t,e),align:{horizontal:Os,vertical:Ts}}},e.prototype.overlapsBox=function(t){return this.box.overlaps(t)},e.prototype.unclipElements=function(){},e.prototype.pointData=function(){return{x:this.value.x,y:this.value.y,value:this.value.value,dataItem:this.dataItem,series:this.series}},e}(Ru);ha(gS.prototype,Vg),ha(gS.prototype,Wg),gS.prototype.defaults={markers:{type:"rect",borderRadius:4,border:{color:"transparent"}},padding:{top:1},labels:{visible:!1,padding:3},opacity:1,notes:{label:{}}};const mS=gS;var yS=function(t){function e(e,i){t.call(this,i),this.plotArea=e,this.chartService=e.chartService,this._initFields(),this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initFields=function(){this.points=[],this.seriesOptions=[],this.valueRange={min:Bs,max:js},this._evalSeries=[]},e.prototype.render=function(){this.setRange(),this.traverseDataPoints(this.addValue.bind(this))},e.prototype.setRange=function(){for(var t=this,e=this.options.series,i=0;i<e.length;i++)for(var r=e[i],n=0;n<r.data.length;n++){var o=t._bindPoint(r,i,n).valueFields;Ll(o.value)&&null!==o.value&&(t.valueRange.min=Math.min(t.valueRange.min,o.value),t.valueRange.max=Math.max(t.valueRange.max,o.value))}},e.prototype.addValue=function(t,e){var i;t&&Ll(t.value)&&null!==t.value&&(i=this.createPoint(t,e))&&Object.assign(i,e),this.points.push(i)},e.prototype.evalPointOptions=function(t,e,i){var r=i.series,n=i.seriesIx,o={defaults:r._defaults,excluded:["data","tooltip","content","template","visual","toggle"]},s=this._evalSeries[n];Ll(s)||(this._evalSeries[n]=s=jg(t,{},o,!0));var a=t;return s&&jg(a=ha({},t),{value:e,series:r,dataItem:i.dataItem,min:this.valueRange.min,max:this.valueRange.max},o),a},e.prototype.pointType=function(){return mS},e.prototype.pointOptions=function(t,e){var i=this.seriesOptions[e];if(!i){var r=this.pointType().prototype.defaults;this.seriesOptions[e]=i=ha({},r,{markers:{opacity:t.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},t)}return i},e.prototype.createPoint=function(t,e){var i=e.series,r=this.pointOptions(i,e.seriesIx),n=e.color||i.color;if(r=this.evalPointOptions(r,t,e),aa(i.color))n=r.color;else if(0!==this.valueRange.max){n=fS(n)(t.value/this.valueRange.max)}var o=new mS(t,r);return o.color=n,this.append(o),o},e.prototype.seriesAxes=function(t){var e=t.xAxis,i=t.yAxis,r=this.plotArea,n=e?r.namedXAxes[e]:r.axisX,o=i?r.namedYAxes[i]:r.axisY;if(!n)throw new Error("Unable to locate X axis with name "+e);if(!o)throw new Error("Unable to locate Y axis with name "+i);return{xAxis:n,yAxis:o}},e.prototype.reflow=function(t){var e=this,i=this.points,r=!this.options.clip,n=0;this.traverseDataPoints((function(t,o){var s=i[n++],a=e.seriesAxes(o.series),l=a.xAxis,c=a.yAxis,h=l.categoryIndex(t.x),u=c.categoryIndex(t.y),p=l.getSlot(h,h,r),d=c.getSlot(u,u,r);if(s)if(p&&d){var f=e.pointSlot(p,d);s.reflow(f)}else s.visible=!1})),this.box=t},e.prototype.pointSlot=function(t,e){return new Vc(t.x1,e.y1,t.x2,e.y2)},e.prototype.traverseDataPoints=function(t){for(var e=this,i=this.options.series,r=0;r<i.length;r++)for(var n=i[r],o=e.seriesAxes(n),s=o.xAxis,a=o.yAxis,l=s.currentRangeIndices(),c=a.currentRangeIndices(),h=0;h<n.data.length;h++){var u=e._bindPoint(n,r,h),p=u.valueFields,d=u.fields,f=s.totalIndex(p.x),g=a.totalIndex(p.y),m=l.min<=f&&f<=l.max,y=c.min<=g&&g<=c.max;m&&y&&t(p,ha({pointIx:h,series:n,seriesIx:r,dataItem:n.data[h],owner:e},d))}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.x,i.y,i.value)},e.prototype.animationPoints=function(){for(var t=this.points,e=[],i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e},e}(Ru);Zl(yS,{series:[],tooltip:{format:"{0}, {1}: {2}"},labels:{format:"{2}"},clip:!0}),ha(yS.prototype,{_bindPoint:$g.prototype._bindPoint});const vS=yS;var bS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){this.namedXAxes={},this.namedYAxes={}},e.prototype.render=function(t){void 0===t&&(t=this.panes),this.bindCategories(),this.createAxes(t),this.createCharts(t),this.createAxisLabels()},e.prototype.bindCategories=function(){for(var t=this.srcSeries||this.series,e=0;e<t.length;e++){for(var i=t[e],r=i.data||[],n=this.seriesAxes(i),o=n.xAxis,s=n.yAxis,a=Cc(o.categories||[]),l=Cc(s.categories||[]),c=0;c<r.length;c++){var h=wf.current.bindPoint(i,c).valueFields,u=h.x,p=h.y;a.has(u)||a.add(u),l.has(p)||l.add(p)}o.categories=a.values(),s.categories=l.values()}},e.prototype.createCharts=function(t){for(var e=this,i=this.groupSeriesByPane(),r=0;r<t.length;r++){var n=t[r],o=i[n.options.name||"default"]||[];e.addToLegend(o);var s=e.filterVisibleSeries(o);s&&e.createHeatmapChart(ky(s,[Xf]),n)}},e.prototype.createHeatmapChart=function(t,e){var i=new vS(this,{series:t});this.appendChart(i,e)},e.prototype.seriesPaneName=function(t){var e=this.options,i=t.xAxis,r=Ca([].concat(e.xAxis),(function(t){return t.name===i}))[0],n=t.yAxis,o=Ca([].concat(e.yAxis),(function(t){return t.name===n}))[0],s=(e.panes||[{}])[0].name||"default";return(r||{}).pane||(o||{}).pane||s},e.prototype.seriesAxes=function(t){var e,i,r=this.options,n=[].concat(r.xAxis),o=t.xAxis;e=o?n.find((function(t){return t.name===o})):n[0];var s=[].concat(r.yAxis),a=t.yAxis;if(i=a?s.find((function(t){return t.name===a})):s[0],!e)throw new Error("Unable to locate X axis with name "+o);if(!i)throw new Error("Unable to locate Y axis with name "+a);return{xAxis:e,yAxis:i}},e.prototype.createAxisLabels=function(){for(var t=this.axes,e=0;e<t.length;e++)t[e].createLabels()},e.prototype.createXYAxis=function(t,e,i){for(var r,n=t.name,o=e?this.namedYAxes:this.namedXAxes,s=Object.assign({axisCrossingValue:0},t,{vertical:e,reverse:e||this.chartService.rtl?!t.reverse:t.reverse,justified:!1}),a=s.categories?s.categories[0]:null,l=[s.min,s.max,a],c=this.series,h=0;h<c.length;h++){var u=c[h],p=u[e?"yAxis":"xAxis"];if(p===s.name||0===i&&!p){var d=wf.current.bindPoint(u,0).valueFields;l.push(d[e?"y":"x"]);break}}for(var f=0;f<l.length;f++)if(l[f]instanceof Date){r=!0;break}var g=new(Sy(s.type,Ps)||!s.type&&r?Md:bd)(s,this.chartService);if(g.axisIndex=i,n){if(o[n])throw new Error((e?"Y":"X")+" axis with name "+n+" is already defined");o[n]=g}return this.appendAxis(g),g.mapCategories(),g},e.prototype.createAxes=function(t){for(var e=this,i=this.options,r=[].concat(i.xAxis),n=[],o=[].concat(i.yAxis),s=[],a=0;a<r.length;a++){Oa(e.findPane(r[a].pane),t)&&n.push(e.createXYAxis(r[a],!1,a))}for(var l=0;l<o.length;l++){Oa(e.findPane(o[l].pane),t)&&s.push(e.createXYAxis(o[l],!0,l))}this.axisX=this.axisX||n[0],this.axisY=this.axisY||s[0]},e.prototype.removeAxis=function(e){var i=e.options.name;t.prototype.removeAxis.call(this,e),e.options.vertical?delete this.namedYAxes[i]:delete this.namedXAxes[i],e===this.axisX&&delete this.axisX,e===this.axisY&&delete this.axisY},e.prototype._dispatchEvent=function(t,e,i){for(var r=t._eventCoordinates(e),n=new Ec(r.x,r.y),o=this.axes,s=o.length,a=[],l=[],c=0;c<s;c++){var h=o[c];by(h.options.vertical?l:a,h.getCategory(n))}a.length>0&&l.length>0&&t.trigger(i,{element:Ul(e),originalEvent:e,x:_y(a),y:_y(l)})},e.prototype.updateAxisOptions=function(t,e){var i=t.options.vertical,r=this.groupAxes(this.panes),n=(i?r.y:r.x).indexOf(t);wS(this.options,n,i,e),wS(this.originalOptions,n,i,e)},e.prototype.crosshairOptions=function(t){return Object.assign({},t.options.crosshair,{zIndex:0})},e}(Ly);function wS(t,e,i,r){ha([].concat(i?t.yAxis:t.xAxis)[e],r)}Zl(bS,{xAxis:{},yAxis:{}}),ha(bS.prototype,By);const xS=bS;var SS="color",kS="first",CS="max",AS="min",_S="noteText";Xw.current.register(wv,[jf,Vf,Kf,pg,Bf,cg,Hf,Yf,$f,ug,zf,hg,sg,og,fg,Gf,ng,dg]),Xw.current.register(hx,[ag,lg,Uf]),Xw.current.register(Sx,[Jf]),Xw.current.register(Ox,[qf]),Xw.current.register(dS,[Wf]),Xw.current.register(Hx,[Zf,Qf,tg]),Xw.current.register(aS,[eg,ig,rg]),Xw.current.register(xS,[Xf]),wf.current.register([jf,Vf,Kf,pg,Bf,cg],[Xs],[Pg,SS,_S,Mf,Pf]),wf.current.register([sg,og,ng,dg],["from","to"],[Pg,SS,_S]),wf.current.register([fg,Gf],[Xs],[Pg,SS,_S,"summary"]),wf.current.register([Zf,Qf,tg],[Ys,Js],[SS]),wf.current.register([eg,ig,rg],[Xs],[SS]),wf.current.register([Wf],[Xs],[Pg,SS,"visibleInLegend","visible"]),Hy.current.register([jf,Vf,Kf,pg,Bf,cg,fg,Gf],{value:CS,color:kS,noteText:kS,errorLow:AS,errorHigh:CS}),Hy.current.register([sg,og,ng,dg],{from:AS,to:CS,color:kS,noteText:kS}),Hy.current.register([eg,ig,rg],{value:CS,color:kS}),wf.current.register([ag,lg,Uf],[Ys,Js],[SS,_S,"xErrorLow","xErrorHigh","yErrorLow","yErrorHigh"]),wf.current.register([Uf],[Ys,Js,"size"],[SS,Pg,_S]),wf.current.register([Xf],[Ys,Js,Xs],[SS,_S]),wf.current.register([Hf,Yf],["open","high","low","close"],[Pg,SS,"downColor",_S]),Hy.current.register([Hf,Yf],{open:CS,high:CS,low:AS,close:CS,color:kS,downColor:kS,noteText:kS}),wf.current.register([zf,hg],["lower","q1","median","q3","upper","mean","outliers"],[Pg,SS,_S]),Hy.current.register([zf,hg],{lower:CS,q1:CS,median:CS,q3:CS,upper:CS,mean:CS,outliers:kS,color:kS,noteText:kS}),wf.current.register([$f,ug],["current","target"],[Pg,SS,"visibleInLegend",_S]),Hy.current.register([$f,ug],{current:CS,target:CS,color:kS,noteText:kS}),wf.current.register([Jf,qf],[Xs],[Pg,SS,"explode","visibleInLegend","visible"]);var TS=[Pg,Xs,Ys,Js],OS=function(t){function e(e,i,r,n){var o=this;void 0===n&&(n={}),t.call(this),this.observers=[],this.addObserver(n.observer),this.chartService=new Pp(this,n),this.chartService.theme=r,this._initElement(e);var s=ha({},this.options,i);this._originalOptions=ha({},s),this._theme=r,this._initTheme(s,r),this._initHandlers(),this._initSurface(),this.bindCategories(),Jl.preloadFonts(i,(function(){o.fontLoaded=!0,o._destroyed||(o.trigger("init"),o._redraw(),o._attachEvents())}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initElement=function(t){for(this._setElementClass(t),t.style.position="relative";t.firstChild;)t.removeChild(t.firstChild);this.element=t},e.prototype._setElementClass=function(t){Qs(t,"k-chart")},e.prototype._initTheme=function(t,e){for(var i=[],r=t.series||[],n=0;n<r.length;n++)i.push(Object.assign({},r[n]));t.series=i,function(t){for(var e=TS,i=0;i<e.length;i++){var r=e[i]+"Axes";t[r]&&(t[e[i]+"Axis"]=t[r],delete t[r])}}(t),this.applyDefaults(t,e),null===t.seriesColors&&delete t.seriesColors,this.options=ha({},e,t),this.applySeriesColors()},e.prototype.getSize=function(){var t=this.options.chartArea||{};return{width:t.width?parseInt(t.width,10):Math.floor(this.element.offsetWidth),height:t.height?parseInt(t.height,10):Math.floor(this.element.offsetHeight)}},e.prototype.resize=function(t){var e=this.getSize(),i=this._size,r=e.width>0||e.height>0;t||r&&(!i||e.width!==i.width||e.height!==i.height)?(this._size=e,this._resize(e,t),this.trigger("resize",e)):r&&this._selections&&tc(this._selections,(function(t){return!t.visible}))&&(this._destroySelections(),this._setupSelection())},e.prototype._resize=function(){this._noTransitionsRedraw()},e.prototype.redraw=function(t){if(this.applyDefaults(this.options),this.applySeriesColors(),t){var e=this._model._plotArea,i=e.findPane(t);e.redraw(i)}else this._redraw()},e.prototype.getAxis=function(t){return hf(t,this._plotArea.axes)},e.prototype.findAxisByName=function(t){return this.getAxis(t)},e.prototype.findPaneByName=function(t){for(var e=this._plotArea.panes,i=0;i<e.length;i++)if(e[i].options.name===t)return new pf(e[i])},e.prototype.findPaneByIndex=function(t){var e=this._plotArea.panes;if(e[t])return new pf(e[t])},e.prototype.plotArea=function(){return new ff(this._plotArea)},e.prototype.toggleHighlight=function(t,e){var i,r,n,o=this._plotArea,s=(o.srcSeries||o.series||[])[0];aa(e)?i=o.filterPoints(e):(ua(e)?(r=e.series,n=e.category):r=n=e,i=s.type===qf?ES(o.pointsBySeriesName(r),n):s.type===Jf||s.type===Wf?ES((o.charts[0]||{}).points,n):o.pointsBySeriesName(r));i&&this.togglePointsHighlight(t,i)},e.prototype.togglePointsHighlight=function(t,e){for(var i=this._highlight,r=0;r<e.length;r++)i.togglePointHighlight(e[r],t)},e.prototype.showTooltip=function(t){var e,i,r=this._sharedTooltip(),n=this._tooltip,o=this._plotArea;if(aa(t)?(e=o.findPoint(t))&&r&&(i=e.categoryIx):r&&Ll(t)&&(i=o.categoryAxis.categoryIndex(t)),r){if(i>=0){var s=this._plotArea.pointsByCategoryIndex(i);n.showAt(s)}}else e&&n.show(e)},e.prototype.hideTooltip=function(){this._tooltip.hide()},e.prototype._initSurface=function(){var t=this.surface,e=this._surfaceWrap(),i=this.options.chartArea||{};i.width&&jl(e,{width:i.width}),i.height&&jl(e,{height:i.height}),t&&t.options.type===this.options.renderAs?(this.surface.clear(),this.surface.resize()):(this._destroySurface(),this.surface=bw.create(e,{type:this.options.renderAs}),this.surface.bind("mouseenter",this._surfaceMouseenterHandler),this.surface.bind("mouseleave",this._surfaceMouseleaveHandler))},e.prototype._surfaceWrap=function(){return this.element},e.prototype._redraw=function(){var t=this._getModel();this._size={width:t.options.width,height:t.options.height},this._destroyView(),this._model=t,this._plotArea=t._plotArea,t.renderVisual(),!1!==this.options.transitions&&t.traverse((function(t){t.animation&&t.animation.setup()})),this._initSurface(),this.surface.draw(t.visual),!1!==this.options.transitions&&t.traverse((function(t){t.animation&&t.animation.play()})),this._tooltip=this._createTooltip(),this._highlight=new Sw,this._setupSelection(),this._createPannable(),this._createZoomSelection(),this._createMousewheelZoom(),this.trigger("render"),FS(this._plotArea.panes),this._navState||this._cancelDomEvents()},e.prototype.exportVisual=function(t){var e;if(t&&(t.width||t.height||t.options)){var i=this.options,r=ha({},t.options,{chartArea:{width:t.width,height:t.height}});DS(this._originalOptions,r),this.options=ha({},this._originalOptions,r),this._initTheme(this.options,this._theme),this.bindCategories();var n=this._getModel();n.renderVisual(),FS(n._plotArea.panes),e=n.visual,this.options=i}else e=this.surface.exportVisual();return e},e.prototype._sharedTooltip=function(){return this._plotArea instanceof wv&&this.options.tooltip&&this.options.tooltip.shared},e.prototype._createPannable=function(){var t=this.options;!1!==t.pannable&&(this._pannable=new _w(this._plotArea,t.pannable))},e.prototype._createZoomSelection=function(){var t=this.options.zoomable,e=(t||{}).selection;!1!==t&&!1!==e&&(this._zoomSelection=new Ow(this,e))},e.prototype._createMousewheelZoom=function(){var t=this.options.zoomable,e=(t||{}).mousewheel;!1!==t&&!1!==e&&(this._mousewheelZoom=new Mw(this,e))},e.prototype._toggleDragZoomEvents=function(){var t=this.options.pannable,e=this.options.zoomable,i=(e||{}).selection,r=(e||{}).mousewheel,n=!(t||!1!==e&&!1!==i||this.requiresHandlers([xg,bg,wg])),o=(!1===e||!1===r)&&!this.requiresHandlers([Sg,kg,Cg]),s=this.element;this._dragZoomEnabled&&n&&o?(s.style.touchAction=this._touchAction||"",this._dragZoomEnabled=!1):this._dragZoomEnabled||n&&o||(s.style.touchAction="none",this._dragZoomEnabled=!0),this._toggleDomEvents(!n,!o)},e.prototype._toggleDomEvents=function(t,e){var i=this.domEvents;i&&(i.toggleDrag&&i.toggleDrag(t),i.toggleZoom&&i.toggleZoom(e))},e.prototype._createTooltip=function(){var t=this.options.tooltip;return this._sharedTooltip()?this._createSharedTooltip(t):new Qw(this.chartService,t)},e.prototype._createSharedTooltip=function(t){return new ex(this._plotArea,t)},e.prototype.applyDefaults=function(t,e){!function(t,e){var i,r,n,o=(e||{}).axisDefaults||{};function s(t){var e=(t||{}).color||r.color,n=ha({},o,o[i],r,r[i],{line:{color:e},labels:{color:e},title:{color:e}},t);return delete n[i],n}for(var a=0;a<TS.length;a++)i=TS[a]+"Axis",r=t.axisDefaults||{},n=(n=[].concat(t[i])).map(s),t[i]=n.length>1?n:n[0]}(t,e),function(t,e){var i=t.series,r=i.length,n=t.seriesDefaults,o=ha({},t.seriesDefaults),s=e?ha({},e.seriesDefaults):{},a=ha({},s);MS(o),MS(a);for(var l=0;l<r;l++){var c=i[l].type||t.seriesDefaults.type,h=ha({data:[]},a,s[c],{tooltip:t.tooltip},o,n[c]);i[l]._defaults=h,i[l]=ha({},h,i[l]),i[l].data=i[l].data||[]}}(t,e)},e.prototype.applySeriesColors=function(){for(var t=this.options,e=t.series,i=t.seriesColors||[],r=0;r<e.length;r++){var n=e[r],o=i[r%i.length],s=n._defaults;n.color=n.color||o,s&&(s.color=s.color||o)}},e.prototype._getModel=function(){var t=this.options,e=this._createPlotArea(),i=new ip(this._modelOptions());i.chart=this,i._plotArea=e;var r=mp.buildTitle(t.title),n=mp.buildTitle(t.subtitle,{align:t.title.align,position:t.title.position});return i.append.apply(i,mp.orderTitles([r,n])),t.legend&&t.legend.visible&&i.append(new qw(e.options.legend,this.chartService)),i.append(e),i.reflow(),i},e.prototype._modelOptions=function(){var t=this.options,e=this.getSize();return ha({transitions:t.transitions,width:e.width||600,height:e.height||400},t.chartArea)},e.prototype._createPlotArea=function(t){var e=this.options;return Xw.current.create(t?[]:e.series,e,this.chartService)},e.prototype._setupSelection=function(){for(var t=this._plotArea.axes,e=this._selections=[],i=0;i<t.length;i++){var r=t[i],n=r.options;if(r instanceof bd&&n.select&&!n.vertical){var o=r.range(),s=new Jw(this,r,ha({min:o.min,max:o.max},n.select));e.push(s)}}},e.prototype._selectStart=function(t){return this.trigger(Ag,t)},e.prototype._select=function(t){return this.trigger(_g,t)},e.prototype._selectEnd=function(t){return this.trigger(Tg,t)},e.prototype._initHandlers=function(){this._clickHandler=this._click.bind(this),this._mousewheelHandler=this._mousewheel.bind(this),this._mouseleaveHandler=this._mouseleave.bind(this),this._surfaceMouseenterHandler=this._mouseover.bind(this),this._surfaceMouseleaveHandler=this._mouseout.bind(this),this._mousemove=Bb(this._mousemove.bind(this),20)},e.prototype.addObserver=function(t){t&&this.observers.push(t)},e.prototype.removeObserver=function(t){var e=this.observers.indexOf(t);e>=0&&this.observers.splice(e,1)},e.prototype.requiresHandlers=function(t){for(var e=this.observers,i=0;i<e.length;i++)if(e[i].requiresHandlers(t))return!0},e.prototype.trigger=function(t,e){void 0===e&&(e={}),t===Og&&(e.anchor.point=this._toDocumentCoordinates(e.anchor.point)),e.sender=this;for(var i=this.observers,r=!1,n=0;n<i.length;n++)i[n].trigger(t,e)&&(r=!0);return r},e.prototype._attachEvents=function(){var t,e,i=this.element;this._touchAction=i.style.touchAction,Rl(i,((t={}).contextmenu=this._clickHandler,t[Fg]=this._mousewheelHandler,t.mouseleave=this._mouseleaveHandler,t)),this._shouldAttachMouseMove()&&Rl(i,((e={}).mousemove=this._mousemove,e)),this.domEvents=Fp.create(this.element,{start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)}),this._toggleDragZoomEvents()},e.prototype._mouseleave=function(t){this._hoveredPoint&&(this._hoveredPoint.out(this,t),this._hoveredPoint=null),this._plotAreaHovered&&(this._plotAreaHovered=!1,this.trigger(vg))},e.prototype._cancelDomEvents=function(){this.domEvents&&this.domEvents.cancel&&this.domEvents.cancel()},e.prototype._gesturestart=function(t){this._mousewheelZoom&&!this._stopChartHandlers(t)&&(this._gestureDistance=t.distance,this._unsetActivePoint(),this.surface.suspendTracking())},e.prototype._gestureend=function(t){this._zooming&&!this._stopChartHandlers(t)&&(this.surface&&this.surface.resumeTracking(),this._zooming=!1,this.trigger(Cg,{}))},e.prototype._gesturechange=function(t){var e=this._mousewheelZoom;if(e&&!this._stopChartHandlers(t)){t.preventDefault();var i=this._gestureDistance,r=-t.distance/i+1;if(Math.abs(r)>=.1){r=Math.round(10*r),this._gestureDistance=t.distance;var n={delta:r,axisRanges:PS(this._plotArea.axes),originalEvent:t};if(this._zooming||!this.trigger(Sg,n)){var o=this._eventCoordinates(t);this._zooming||(this._zooming=!0),(n.axisRanges=e.updateRanges(r,o))&&!this.trigger(kg,n)&&e.zoom()}}}},e.prototype._mouseout=function(t){if(t.element){var e=this._drawingChartElement(t.element,t);e&&e.leave&&e.leave(this,t.originalEvent)}},e.prototype._start=function(t){var e=this._eventCoordinates(t);!this._stopChartHandlers(t)&&this._plotArea.backgroundContainsPoint(e)&&(this.requiresHandlers([xg,bg,wg])&&this._startNavigation(t,e,xg),this._pannable&&this._pannable.start(t)&&(this.surface.suspendTracking(),this._unsetActivePoint(),this._suppressHover=!0,this.chartService.panning=!0),this._zoomSelection&&this._zoomSelection.start(t)&&this.trigger(Sg,{axisRanges:PS(this._plotArea.axes),originalEvent:t}))},e.prototype._move=function(t){var e=this._navState,i=this._pannable;if(!this._stopChartHandlers(t)){if(i){var r=i.move(t);r&&!this.trigger(bg,{axisRanges:r,originalEvent:t})&&i.pan()}else if(e){for(var n={},o=e.axes,s=0;s<o.length;s++){var a=o[s];if(a.options.name){var l=a.options.vertical?t.y:t.x,c=l.startLocation-l.location;0!==c&&(n[a.options.name]=a.translateRange(c))}}e.axisRanges=n,this.trigger(bg,{axisRanges:n,originalEvent:t})}this._zoomSelection&&this._zoomSelection.move(t)}},e.prototype._end=function(t){if(!this._stopChartHandlers(t)){var e=this._pannable;if(e&&e.end(t)?(this.surface.resumeTracking(),this.trigger(wg,{axisRanges:PS(this._plotArea.axes),originalEvent:t}),this._suppressHover=!1,this.chartService.panning=!1):this._endNavigation(t,wg),this._zoomSelection){var i=this._zoomSelection.end(t);i&&!this.trigger(kg,{axisRanges:i,originalEvent:t})&&(this._zoomSelection.zoom(),this.trigger(Cg,{axisRanges:i,originalEvent:t}))}}},e.prototype._stopChartHandlers=function(t){var e=this._selections||[];if(!e.length)return!1;var i=this._eventCoordinates(t),r=this._plotArea.paneByPoint(i);if(r)for(var n=0;n<e.length;n++)if(e[n].onPane(r))return!0},e.prototype._mousewheelZoomRate=function(){var t=(this.options.zoomable||{}).mousewheel||{};return Kl(t.rate,.3)},e.prototype._mousewheel=function(t){var e=this,i=ja(t),r=this._mousewheelZoom,n=this._eventCoordinates(t);if(!this._stopChartHandlers(t)&&this._plotArea.backgroundContainsPoint(n))if(r){var o={delta:i,axisRanges:PS(this._plotArea.axes),originalEvent:t};!this._zooming&&this.trigger(Sg,o)||(t.preventDefault(),this._zooming||(this._unsetActivePoint(),this.surface.suspendTracking(),this._zooming=!0),this._mwTimeout&&clearTimeout(this._mwTimeout),o.axisRanges=r.updateRanges(i,n),o.axisRanges&&!this.trigger(kg,o)&&r.zoom(),this._mwTimeout=setTimeout((function(){e.trigger(Cg,o),e._zooming=!1,e.surface&&e.surface.resumeTracking()}),150))}else{var s=this._navState;if(!s)this._startNavigation(t,n,Sg)||(s=this._navState);if(s){var a=s.totalDelta||i;s.totalDelta=a+i;for(var l=this._navState.axes,c={},h=0;h<l.length;h++){var u=l[h],p=u.options.name;p&&(c[p]=u.scaleRange(-a*e._mousewheelZoomRate(),n))}this.trigger(kg,{delta:i,axisRanges:c,originalEvent:t}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout((function(){e._endNavigation(t,Cg)}),150)}}},e.prototype._startNavigation=function(t,e,i){var r=this._model._plotArea,n=r.findPointPane(e),o=r.axes.slice(0);if(n){var s=PS(o);this.trigger(i,{axisRanges:s,originalEvent:t})?this._cancelDomEvents():(this._suppressHover=!0,this._unsetActivePoint(),this._navState={axisRanges:s,pane:n,axes:o})}},e.prototype._endNavigation=function(t,e){this._navState&&(this.trigger(e,{axisRanges:this._navState.axisRanges,originalEvent:t}),this._suppressHover=!1,this._navState=null)},e.prototype._getChartElement=function(t,e){var i=this.surface.eventTarget(t);if(i)return this._drawingChartElement(i,t,e)},e.prototype._drawingChartElement=function(t,e,i){for(var r,n=t;n&&!r;)r=n.chartElement,n=n.parent;if(r)return r.aliasFor&&(r=r.aliasFor(e,this._eventCoordinates(e))),i&&(r=r.closest(i))&&r.aliasFor&&(r=r.aliasFor()),r},e.prototype._eventCoordinates=function(t){var e=zl(t);return this._toModelCoordinates(e.x,e.y)},e.prototype._elementPadding=function(){if(!this._padding){var t=ga(this.element,["paddingLeft","paddingTop"]),e=t.paddingLeft,i=t.paddingTop;this._padding={top:i,left:e}}return this._padding},e.prototype._toDocumentCoordinates=function(t){var e=this._elementPadding(),i=Bl(this.element);return{left:Xl(t.x+e.left+i.left),top:Xl(t.y+e.top+i.top)}},e.prototype._toModelCoordinates=function(t,e){var i=this.element,r=Bl(i),n=this._elementPadding(),o=function(t){if(!t)return ec.unit();for(var e=rc(t),i=t.parentElement;i;){var r=rc(i);e=e.multiplyCopy(r),i=i.parentElement}return e.b=e.c=e.e=e.f=0,e}(i).invert(),s=new Nc(t-r.left-n.left,e-r.top-n.top).transform(o);return new Ec(s.x,s.y)},e.prototype._tap=function(t){var e=this,i=this.surface.eventTarget(t),r=this._drawingChartElement(i,t),n=this._sharedTooltip();this._startHover(i,t)||n||this._unsetActivePoint(),n&&this._trackSharedTooltip(this._eventCoordinates(t),t,!0),this._propagateClick(r,t),this.handlingTap=!0,setTimeout((function(){e.handlingTap=!1}),0)},e.prototype._click=function(t){var e=this._getChartElement(t);this._propagateClick(e,t)},e.prototype._propagateClick=function(t,e){for(var i=t;i;)i.click&&i.click(this,e),i=i.parent},e.prototype._startHover=function(t,e){if(this._suppressHover)return!1;var i=this._drawingChartElement(t,e,(function(t){return(t.hover||t.over)&&!(t instanceof Ly)})),r=this._activePoint,n=this._plotArea.series.length>1,o=this._hasInactiveOpacity();return this._updateHoveredPoint(i,e),i&&r!==i&&i.hover?(this._activePoint=i,this._sharedTooltip()||i.hover(this,e)||(this._displayTooltip(i),o?this._displayInactiveOpacity(i,n):this._highlight.show(i))):!i&&o&&(n&&this._activeChartInstance&&(this._updateSeriesOpacity(i,!0),this._applySeriesOpacity(this._activeChartInstance.children,null,!0),this._activeChartInstance=null),this._highlight&&this._highlight.hide(),this._activePoint=null),i},e.prototype._displayTooltip=function(t){ha({},this.options.tooltip,t.options.tooltip).visible&&this._tooltip.show(t)},e.prototype._displayInactiveOpacity=function(t,e,i){var r=this._activeChartInstance=this._chartInstanceFromPoint(t);if(r)if(e)this._updateSeriesOpacity(t),this._applySeriesOpacity(r.children,null,!0),this._applySeriesOpacity(r.children,t.series),this._highlight.show(i||t);else{var n;if(!r.supportsPointInactiveOpacity())return void this._highlight.show(t);(n=this._getInactivePoints(t,r))&&n.length&&this._highlight.show(n,1-this._getInactiveOpacityForSeries(t.series))}},e.prototype._getInactivePoints=function(t,e){return this._getAllPointsOfType(e,t.constructor).filter((function(e){return e!==t}))},e.prototype._getAllPointsOfType=function(t,e){for(var i=[],r=0;r<t.children.length;r++){var n=t.children[r];n.constructor===e?i.push(n):n.children&&n.children.length&&(i=i.concat(this._getAllPointsOfType(n,e)))}return i},e.prototype._updateHoveredPoint=function(t,e){var i=this._hoveredPoint;i&&i!==t&&(i.out(this,e),this._hoveredPoint=null),t&&i!==t&&t.over&&(this._hoveredPoint=t,t.over(this,e))},e.prototype._updateSeriesOpacity=function(t,e){for(var i=this._plotArea,r=i.series.length,n=0;n<r;n++){var o=i.series[n],s=this._getDefaultOpacityForSeries(o),a=this._getInactiveOpacityForSeries(o);e||o===t.series?(o.opacity=s,o.line&&(o.line.opacity=s)):(o.defaultOpacity=s,o.opacity=a,o.line&&(o.line.opacity=a))}},e.prototype._applySeriesOpacity=function(t,e,i,r){for(var n=0;n<t.length;n++){var o=t[n],s=o.series||r;if(s&&(s.highlight||{}).visible&&o.visual){var a=r?r.opacity:o.series.opacity;(s!==e||i)&&o.visual.opacity(i?1:a)}o.children&&o.children.length&&this._applySeriesOpacity(o.children,e,i,o.series)}},e.prototype._chartInstanceFromPoint=function(t){for(var e=t.parent;e&&!e.plotArea;)e=e.parent;return e},e.prototype._hasInactiveOpacity=function(){var t=void 0!==this.options.seriesDefaults.highlight.inactiveOpacity,e=this.options.series.filter((function(t){return void 0!==t.highlight.inactiveOpacity})).length>0;return t||e},e.prototype._getInactiveOpacityForSeries=function(t){var e=this.options.seriesDefaults.highlight.inactiveOpacity;return t.highlight.inactiveOpacity||e||t.opacity||1},e.prototype._getDefaultOpacityForSeries=function(t){return t.defaultOpacity||t.opacity||1},e.prototype._mouseover=function(t){var e,i=this._startHover(t.element,t.originalEvent);i&&i.tooltipTracking&&!this._mouseMoveTrackHandler&&!this._sharedTooltip()&&(this._mouseMoveTrackHandler=this._mouseMoveTracking.bind(this),Rl(document,((e={}).mousemove=this._mouseMoveTrackHandler,e)))},e.prototype._mouseMoveTracking=function(t){var e,i=this,r=i.options,n=i._tooltip,o=i._highlight,s=i._activePoint,a=this._eventCoordinates(t);if(this._plotArea.box.containsPoint(a)){if(s&&s.tooltipTracking&&s.series&&s.parent.getNearestPoint){var l=s.parent.getNearestPoint(a.x,a.y,s.seriesIx);if(l&&l!==s)if(this._activePoint=l,!l.hover(this,t))ha({},r.tooltip,l.options.tooltip).visible&&n.show(l),o.show(l)}}else Gl(document,((e={}).mousemove=this._mouseMoveTrackHandler,e)),this._unsetActivePoint(),this._mouseMoveTrackHandler=null},e.prototype._mousemove=function(t){var e=this._eventCoordinates(t),i=this._plotArea;if(this._trackCrosshairs(e),i.hover){var r=i.backgroundContainsPoint(e);r?(this._plotAreaHovered=!0,this._plotArea.hover(this,t)):this._plotAreaHovered&&!r&&(this._plotAreaHovered=!1,this.trigger(vg))}this._sharedTooltip()&&this._trackSharedTooltip(e,t)},e.prototype._trackCrosshairs=function(t){for(var e=this._plotArea.crosshairs,i=0;i<e.length;i++){var r=e[i];r.box.containsPoint(t)?r.showAt(t):r.hide()}},e.prototype._trackSharedTooltip=function(t,e,i){if(!this._suppressHover){var r=this,n=r.options.tooltip,o=r._plotArea,s=r._plotArea.categoryAxis,a=r._tooltip,l=r._highlight;if(o.backgroundContainsPoint(t)){var c=s.pointCategoryIndex(t);if(c!==this._tooltipCategoryIx||!this._sharedHighlight&&i){var h=o.pointsByCategoryIndex(c),u=h.map((function(t){return t.eventArgs(e)})),p=u[0]||{};p.categoryPoints=u,h.length>0&&!this.trigger(mg,p)?(n.visible&&a.showAt(h,t),l.show(h),this._sharedHighlight=!0):a.hide(),this._tooltipCategoryIx=c}else i&&this._sharedHighlight&&(l.hide(),a.hide(),this._sharedHighlight=!1)}else this._sharedHighlight&&(l.hide(),a.hide(),this._tooltipCategoryIx=null,this._sharedHighlight=!1)}},e.prototype.hideElements=function(t){var e=this._plotArea;this._mousemove.cancel(),e.hideCrosshairs(),this._unsetActivePoint(t)},e.prototype._unsetActivePoint=function(t){var e=this._tooltip,i=this._highlight;this._activePoint=null,this._hoveredPoint=null,!e||t&&t.keepTooltipOpen||e.hide(),this._tooltipCategoryIx=null,this._sharedHighlight=!1,i&&i.hide()},e.prototype._deferRedraw=function(){this._redraw()},e.prototype._clearRedrawTimeout=function(){this._redrawTimeout&&(clearInterval(this._redrawTimeout),this._redrawTimeout=null)},e.prototype.bindCategories=function(){for(var t=this.options,e=[].concat(t.categoryAxis),i=0;i<e.length;i++){var r=e[i];!1!==r.autoBind&&this.bindCategoryAxisFromSeries(r,i)}},e.prototype.bindCategoryAxisFromSeries=function(t,e){for(var i,r=this.options.series,n=r.length,o=new Ta,s=[],a=!1,l=0;l<n;l++){var c=r[l],h=c.categoryAxis===t.name||!c.categoryAxis&&0===e,u=c.data,p=u.length,d=c.categoryField&&h;if(a=d||a,d&&p>0)for(var f=(i=Ay(t,vf(c.categoryField,u[0])))?Cy:vf,g=0;g<p;g++){var m=u[g],y=f(c.categoryField,m,this.chartService.intl);!i&&o.get(y)||(s.push([y,m]),i||o.set(y,!0))}}if(s.length>0){i&&(s=function(t,e){void 0===e&&(e=ld);for(var i=function(t,e){void 0===e&&(e=ld);for(var i=1,r=t.length;i<r;i++)if(e(t[i],t[i-1])<0){t.sort(e);break}return t}(t,e),r=i.length,n=r>0?[i[0]]:[],o=1;o<r;o++)0!==e(i[o],Hl(n))&&n.push(i[o]);return n}(s,(function(t,e){return ld(t[0],e[0])})));var v=function(t){for(var e=t.length,i=[],r=0;r<e;r++)for(var n=t[r],o=n.length,s=0;s<o;s++)i[s]=i[s]||[],i[s].push(n[s]);return i}(s);t.categories=v[0]}else a&&(t.categories=[])},e.prototype._isBindable=function(t){for(var e=wf.current.valueFields(t),i=!0,r=0;r<e.length;r++){var n=e[r];if(n===Xs?n="field":n+="Field",!Ll(t[n])){i=!1;break}}return i},e.prototype._noTransitionsRedraw=function(){var t,e=this.options;!1!==e.transitions&&(e.transitions=!1,t=!0),this._redraw(),t&&(e.transitions=!0)},e.prototype._legendItemHover=function(t,e){var i,r=this._plotArea,n=this._highlight,o=(r.srcSeries||r.series)[t];if(i=Oa(o.type,[Jf,qf,Wf])?r.findPoint((function(i){return i.series.index===t&&i.index===e})):r.pointsBySeriesIndex(t),this._hasInactiveOpacity()&&o.visible&&i){var s=r.series.length>1,a=i.length?i[0]:i;this._displayInactiveOpacity(a,s,i)}else n.show(i)},e.prototype._shouldAttachMouseMove=function(){return this._plotArea.crosshairs.length||this._tooltip&&this._sharedTooltip()||this.requiresHandlers([yg,vg])},e.prototype.updateMouseMoveHandler=function(){var t,e;Gl(this.element,((t={}).mousemove=this._mousemove,t)),this._shouldAttachMouseMove()&&Rl(this.element,((e={}).mousemove=this._mousemove,e))},e.prototype.applyOptions=function(t,e){DS(this._originalOptions,t),this._originalOptions=ha(this._originalOptions,t),this.options=ha({},this._originalOptions),e&&(this._theme=e,this.chartService.theme=e),this._initTheme(this.options,this._theme),this._toggleDragZoomEvents()},e.prototype.setOptions=function(t,e){this.applyOptions(t,e),this.bindCategories(),this.redraw(),this.updateMouseMoveHandler()},e.prototype.setDirection=function(t){this.chartService.rtl=Boolean(t),this.surface&&"svg"===this.surface.type&&this._destroySurface()},e.prototype.setIntlService=function(t){this.chartService.intl=t},e.prototype.noTransitionsRedraw=function(){this._noTransitionsRedraw()},e.prototype.destroy=function(){var t,e;this._destroyed=!0,Gl(this.element,((t={}).contextmenu=this._clickHandler,t[Fg]=this._mousewheelHandler,t.mousemove=this._mousemove,t.mouseleave=this._mouseleaveHandler,t)),this.domEvents&&(this.domEvents.destroy(),delete this.domEvents),this._mouseMoveTrackHandler&&Gl(document,((e={}).mousemove=this._mouseMoveTrackHandler,e)),this._destroyView(),this._destroySurface(),this._clearRedrawTimeout()},e.prototype._destroySurface=function(){var t=this.surface;t&&(t.unbind("mouseenter",this._surfaceMouseenterHandler),t.unbind("mouseleave",this._surfaceMouseleaveHandler),t.destroy(),this.surface=null)},e.prototype._destroySelections=function(){var t=this._selections;if(t)for(;t.length>0;)t.shift().destroy()},e.prototype._destroyView=function(){var t=this._model;t&&(t.destroy(),this._model=null),this._unsetActivePoint(),this._destroySelections(),this._tooltip&&this._tooltip.destroy(),this._highlight&&this._highlight.destroy(),this._zoomSelection&&(this._zoomSelection.destroy(),delete this._zoomSelection),this._pannable&&(this._pannable.destroy(),delete this._pannable),this._mousewheelZoom&&(this._mousewheelZoom.destroy(),delete this._mousewheelZoom)},e}(ml);function ES(t,e){if(t)for(var i=0;i<t.length;i++)if(t[i].category===e)return[t[i]]}function MS(t){delete t.bar,delete t.column,delete t.rangeColumn,delete t.line,delete t.verticalLine,delete t.pie,delete t.donut,delete t.area,delete t.verticalArea,delete t.scatter,delete t.scatterLine,delete t.bubble,delete t.candlestick,delete t.ohlc,delete t.boxPlot,delete t.bullet,delete t.verticalBullet,delete t.polarArea,delete t.polarLine,delete t.radarArea,delete t.radarLine,delete t.waterfall}function PS(t){for(var e={},i=0;i<t.length;i++){var r=t[i],n=r.options.name;n&&(e[n]=r.range())}return e}var IS=["data","categories"];function DS(t,e){for(var i in e)if(!Oa(i,IS)&&e.hasOwnProperty(i)){var r=e[i],n=t[i];if(Ll(n)){var o=null===r;o||!Ll(r)?(delete t[i],o&&delete e[i]):n&&ua(r)&&ua(n)&&DS(n,r)}}}function FS(t){for(var e=0;e<t.length;e++)t[e].notifyRender()}Zl(OS,{renderAs:"",chartArea:{},legend:{visible:!0,labels:{}},categoryAxis:{},seriesDefaults:{type:Vf,data:[],highlight:{visible:!0},labels:{},negativeValues:{visible:!1}},series:[],seriesColors:null,tooltip:{visible:!1},transitions:!0,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:!1,zoomable:!1});const RS=OS;var LS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._slotAnchor=function(t,e){var i=this.plotArea.categoryAxis.options.vertical,r=i?{horizontal:"left",vertical:"center"}:{horizontal:"center",vertical:"bottom"};return{point:i?new Ec(this.plotArea.box.x2,e.center().y):new Ec(e.center().x,-2),align:r}},e.prototype._defaultAnchor=function(t,e){return this._slotAnchor({},e)},e}(ex);const NS=LS;var BS=[jf,$f];function jS(t){for(var e=[],i=0;i<t.length;i++){var r=t[i];e[i]=r.style.display,r.style.display="none"}return e}function zS(t,e){for(var i=0;i<t.length;i++)t[i].style.display=e[i]}function US(t){return na(t)?[t]:t}var $S=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._setElementClass=function(t){Qs(t,"k-sparkline")},e.prototype._initElement=function(e){t.prototype._initElement.call(this,e),this._initialWidth=Math.floor(jl(e).width)},e.prototype._resize=function(){var e=this.element,i=jS(e.childNodes);this._initialWidth=Math.floor(jl(e).width),zS(e.childNodes,i),t.prototype._resize.call(this)},e.prototype._modelOptions=function(){var t=this.options,e=this._surfaceWrap(),i=jS(e.childNodes),r=document.createElement("span");r.innerHTML="&nbsp;",e.appendChild(r);var n=ha({width:this._autoWidth,height:jl(e).height,transitions:t.transitions},t.chartArea,{inline:!0,align:!1});return jl(e,{width:n.width,height:n.height}),e.removeChild(r),zS(e.childNodes,i),this.surface&&this.surface.resize(),n},e.prototype._surfaceWrap=function(){if(!this.stage){var t=this.stage=document.createElement("span");this.element.appendChild(t)}return this.stage},e.prototype._createPlotArea=function(e){var i=t.prototype._createPlotArea.call(this,e);return this._autoWidth=this._initialWidth||this._calculateWidth(i),i},e.prototype._calculateWidth=function(t){for(var e=this.options,i=ma(e.chartArea.margin),r=t.charts,n=this._surfaceWrap(),o=0,s=0;s<r.length;s++){var a=r[s],l=(a.options.series||[])[0];if(l){if(l.type===jf)return 150;if(l.type===$f)return 150;if(l.type===Jf)return jl(n).height;var c=a.categoryAxis;if(c){var h=c.categoriesCount()*(!a.options.isStacked&&Oa(l.type,[Vf,ug])?a.seriesOptions.length:1);o=Math.max(o,h)}}}var u=o*e.pointWidth;return u>0&&(u+=i.left+i.right),u},e.prototype._createSharedTooltip=function(t){return new NS(this._plotArea,t)},e.normalizeOptions=function(t){var e=US(t);return(e=Zs(e)?{seriesDefaults:{data:e}}:ha({},e)).series||(e.series=[{data:US(e.data)}]),ha(e,{seriesDefaults:{type:e.type}}),(Oa(e.series[0].type,BS)||Oa(e.seriesDefaults.type,BS))&&(e=ha({},{categoryAxis:{crosshair:{visible:!1}}},e)),e},e}(RS);Zl($S,{chartArea:{margin:2},axisDefaults:{visible:!1,majorGridLines:{visible:!1},valueAxis:{narrowRange:!0}},seriesDefaults:{type:"line",area:{line:{width:.5}},bar:{stack:!0},padding:2,width:.5,overlay:{gradient:null},highlight:{visible:!1},border:{width:0},markers:{size:2,visible:!1}},tooltip:{visible:!0,shared:!0},categoryAxis:{crosshair:{visible:!0,tooltip:{visible:!1}}},legend:{visible:!1},transitions:!1,pointWidth:5,panes:[{clip:!1}]});const HS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){this._initialOpacity=parseFloat(ga(this.element,"opacity").opacity)},e.prototype.step=function(t){ga(this.element,{opacity:String(Ma(this._initialOpacity,0,t))})},e.prototype.abort=function(){t.prototype.abort.call(this),ga(this.element,{display:"none",opacity:String(this._initialOpacity)})},e.prototype.cancel=function(){t.prototype.abort.call(this),ga(this.element,{opacity:String(this._initialOpacity)})},e}(Du);function VS(t,e){var i=document.createElement("div");return i.className=t,e&&(i.style.cssText=e),i}var qS=function(t){function e(e,i,r){t.call(this),this.options=ha({},this.options,r),this.container=e,this.chartService=i;var n=ga(e,["paddingLeft","paddingTop"]);this.chartPadding={top:n.paddingTop,left:n.paddingLeft},this.createElements(),e.appendChild(this.element)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createElements=function(){var t=this.element=VS("k-navigator-hint","display: none; position: absolute; top: 1px; left: 1px;"),e=this.tooltip=VS("k-tooltip k-chart-tooltip"),i=this.scroll=VS("k-scroll");e.innerHTML="&nbsp;",t.appendChild(e),t.appendChild(i)},e.prototype.show=function(t,e,i){var r=this,n=r.element,o=r.options,s=r.scroll,a=r.tooltip,l=rd(hd(t)+hd(e-t)/2),c=.4*i.width(),h=i.center().x-c,u=(i.center().x-h)/(o.max-o.min),p=l-o.min,d=this.chartService.intl.format(o.format,t,e),f=wa(o);this.clearHideTimeout(),this._visible||(ga(n,{visibility:"hidden",display:"block"}),this._visible=!0),f&&(d=f({from:t,to:e})),a.innerHTML=d,ga(a,{left:i.center().x-a.offsetWidth/2,top:i.y1});var g=ga(a,["marginTop","borderTopWidth","height"]);ga(s,{width:c,left:h+p*u,top:i.y1+g.marginTop+g.borderTopWidth+g.height/2}),ga(n,{visibility:"visible"})},e.prototype.clearHideTimeout=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this._hideAnimation&&this._hideAnimation.cancel()},e.prototype.hide=function(){var t=this;this.clearHideTimeout(),this._hideTimeout=setTimeout((function(){t._visible=!1,t._hideAnimation=new HS(t.element),t._hideAnimation.setup(),t._hideAnimation.play()}),this.options.hideDelay)},e.prototype.destroy=function(){this.clearHideTimeout(),this.container&&this.container.removeChild(this.element),delete this.container,delete this.chartService,delete this.element,delete this.tooltip,delete this.scroll},e}(ml);Zl(qS,{format:"{0:d} - {1:d}",hideDelay:500});const WS=qS;var XS="_navigator",GS=XS,KS=function(t){function e(e){var i;t.call(this),this.chart=e;var r=this.options=ha({},this.options,e.options.navigator),n=r.select;n&&(n.from=this.parseDate(n.from),n.to=this.parseDate(n.to)),Ll(r.hint.visible)||(r.hint.visible=r.visible),this.chartObserver=new Da(this,((i={}).drag="_drag",i.dragEnd="_dragEnd",i.zoom="_zoom",i.zoomEnd="_zoomEnd",i)),e.addObserver(this.chartObserver)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseDate=function(t){return gd(this.chart.chartService.intl,t)},e.prototype.clean=function(){this.selection&&(this.selection.destroy(),this.selection=null),this.hint&&(this.hint.destroy(),this.hint=null)},e.prototype.destroy=function(){this.chart&&(this.chart.removeObserver(this.chartObserver),delete this.chart),this.clean()},e.prototype.redraw=function(){this._redrawSelf(),this.initSelection()},e.prototype.initSelection=function(){var t,e=this.chart,i=this.options,r=this.mainAxis(),n=r.roundedRange(),o=n.min,s=n.max,a=i.select,l=a.from,c=a.to,h=a.mousewheel,u=(t=r,YS.prototype=t,new YS);0!==r.categoriesCount()&&(this.clean(),u.box=r.box,this.selection=new Jw(e,u,{min:o,max:s,from:l||o,to:c||s,mousewheel:Kl(h,{zoom:"left"}),visible:i.visible},new Da(this,{selectStart:"_selectStart",select:"_select",selectEnd:"_selectEnd"})),i.hint.visible&&(this.hint=new WS(e.element,e.chartService,{min:o,max:s,template:wa(i.hint),format:i.hint.format})))},e.prototype.setRange=function(){var t=this.chart._createPlotArea(!0).namedCategoryAxes._navigator.roundedRange(),e=t.min,i=t.max,r=this.options.select||{},n=r.from||e;n<e&&(n=e);var o=r.to||i;o>i&&(o=i),this.options.select=ha({},r,{from:n,to:o}),this.filterAxes()},e.prototype._redrawSelf=function(t){var e=this.chart._plotArea;e&&e.redraw(Hl(e.panes),t)},e.prototype.redrawSlaves=function(){var t=this.chart,e=t._plotArea,i=e.panes.slice(0,-1);e.srcSeries=t.options.series,e.options.categoryAxis=t.options.categoryAxis,e.clearSeriesPointsCache(),e.redraw(i)},e.prototype._drag=function(t){var e,i=this.chart,r=this.selection,n=i._eventCoordinates(t.originalEvent),o=this.mainAxis(),s=o.roundedRange(),a=o.pane.box.containsPoint(n),l=i._plotArea.categoryAxis,c=t.axisRanges[l.options.name],h=this.options.select;if(c&&!a&&r){e=h.from&&h.to?hd(h.to)-hd(h.from):hd(r.options.to)-hd(r.options.from);var u=rd(Vl(hd(c.min),s.min,hd(s.max)-e)),p=rd(Vl(hd(u)+e,hd(s.min)+e,s.max));this.options.select={from:u,to:p},this.options.liveDrag&&(this.filterAxes(),this.redrawSlaves()),r.set(u,p),this.showHint(u,p)}},e.prototype._dragEnd=function(){this.filterAxes(),this.filter(),this.redrawSlaves(),this.hint&&this.hint.hide()},e.prototype.readSelection=function(){var t=this.selection.options,e=t.from,i=t.to,r=this.options.select;r.from=e,r.to=i},e.prototype.filterAxes=function(){var t=this.options.select;void 0===t&&(t={});for(var e=this.chart.options.categoryAxis,i=t.from,r=t.to,n=0;n<e.length;n++){var o=e[n];o.pane!==XS&&(o.min=i,o.max=r)}},e.prototype.filter=function(){var t=this.chart,e=this.options.select;if(t.requiresHandlers(["navigatorFilter"])){var i=this.mainAxis(),r={from:e.from,to:e.to};if("category"!==i.options.type){var n=new Md(ha({baseUnit:"fit"},t.options.categoryAxis[0],{categories:[e.from,e.to]}),t.chartService).options;r.from=od(n.min,-n.baseUnitStep,n.baseUnit),r.to=od(n.max,n.baseUnitStep,n.baseUnit)}this.chart.trigger("navigatorFilter",r)}},e.prototype._zoom=function(t){var e=this,i=e.chart._plotArea.categoryAxis,r=e.selection,n=e.options,o=n.select,s=n.liveDrag,a=this.mainAxis(),l=t.delta;if(r){var c=a.categoryIndex(r.options.from),h=a.categoryIndex(r.options.to),u=this.chart._eventCoordinates(t.originalEvent);t.originalEvent.preventDefault(),Math.abs(l)>1&&(l*=3),h-c>1?(r.zoom(l,u),this.readSelection()):(i.options.min=o.from,o.from=i.scaleRange(-t.delta*this.chart._mousewheelZoomRate(),u).min),s&&(this.filterAxes(),this.redrawSlaves()),r.set(o.from,o.to),this.showHint(this.options.select.from,this.options.select.to)}},e.prototype._zoomEnd=function(t){this._dragEnd(t)},e.prototype.showHint=function(t,e){var i=this.chart._plotArea;this.hint&&this.hint.show(t,e,i.backgroundBox())},e.prototype._selectStart=function(t){return this.chart._selectStart(t)},e.prototype._select=function(t){return this.showHint(t.from,t.to),this.chart._select(t)},e.prototype._selectEnd=function(t){return this.hint&&this.hint.hide(),this.readSelection(),this.filterAxes(),this.filter(),this.redrawSlaves(),this.chart._selectEnd(t)},e.prototype.mainAxis=function(){var t=this.chart._plotArea;if(t)return t.namedCategoryAxes._navigator},e.prototype.select=function(t,e){var i=this.options.select;return t&&e&&(i.from=this.parseDate(t),i.to=this.parseDate(e),this.filterAxes(),this.filter(),this.redrawSlaves(),this.selection.set(t,e)),{from:i.from,to:i.to}},e.setup=function(t,i){if(void 0===t&&(t={}),void 0===i&&(i={}),!t.__navi){t.__navi=!0;var r=ha({},i.navigator,t.navigator),n=t.panes=[].concat(t.panes),o=ha({},r.pane,{name:XS});r.visible||(o.visible=!1,o.height=.1),n.push(o),e.attachAxes(t,r),e.attachSeries(t,r,i)}},e.attachAxes=function(t,e){var i=e.series||[],r=t.categoryAxis=[].concat(t.categoryAxis),n=t.valueAxis=[].concat(t.valueAxis),o=0===ky(i,gg).length,s=ha({type:"date",pane:XS,roundToBaseUnit:!o,justified:o,_collapse:!1,majorTicks:{visible:!0},tooltip:{visible:!1},labels:{step:1},autoBind:e.autoBindElements,autoBaseUnitSteps:{minutes:[1],hours:[1,2],days:[1,2],weeks:[],months:[1],years:[1]}}),a=e.categoryAxis;r.push(ha({},s,{maxDateGroups:200},a,{name:GS,title:null,baseUnit:"fit",baseUnitStep:"auto",labels:{visible:!1},majorTicks:{visible:!1}}),ha({},s,a,{name:"_navigator_labels",maxDateGroups:20,baseUnitStep:"auto",labels:{position:""},plotBands:[],autoBaseUnitSteps:{minutes:[]},_overlap:!0}),ha({},s,a,{name:"_navigator_ticks",maxDateGroups:200,majorTicks:{width:.5},plotBands:[],title:null,labels:{visible:!1,mirror:!0},_overlap:!0})),n.push(ha({name:GS,pane:XS,majorGridLines:{visible:!1},visible:!1},e.valueAxis))},e.attachSeries=function(t,e,i){for(var r=t.series=t.series||[],n=[].concat(e.series||[]),o=i.seriesColors,s=e.seriesDefaults,a=0;a<n.length;a++)r.push(ha({color:o[a%o.length],categoryField:e.dateField,visibleInLegend:!1,tooltip:{visible:!1}},s,n[a],{axis:GS,categoryAxis:GS,autoBind:e.autoBindElements}))},e}(ml);function YS(){}const JS=KS;var ZS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.applyDefaults=function(e,i){var r=jl(this.element).width||600,n=i,o={seriesDefaults:{categoryField:e.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:!1},labels:{step:2},majorTicks:{visible:!1},maxDateGroups:Math.floor(r/28)}}};n&&(n=ha({},n,o)),JS.setup(e,n),t.prototype.applyDefaults.call(this,e,n)},e.prototype._setElementClass=function(t){Qs(t,"k-chart k-stockchart")},e.prototype.setOptions=function(e){this.destroyNavigator(),t.prototype.setOptions.call(this,e)},e.prototype.noTransitionsRedraw=function(){var t=this.options.transitions;this.options.transitions=!1,this._fullRedraw(),this.options.transitions=t},e.prototype._resize=function(){this.noTransitionsRedraw()},e.prototype._redraw=function(){var t=this.navigator;!this._dirty()&&t&&t.options.partialRedraw?t.redrawSlaves():this._fullRedraw()},e.prototype._dirty=function(){var t=this.options,e=Ca([].concat(t.series,t.navigator.series),(function(t){return t&&t.visible})).length,i=this._seriesCount!==e;return this._seriesCount=e,i},e.prototype._fullRedraw=function(){var e=this.navigator;e||(e=this.navigator=new JS(this),this.trigger("navigatorCreated",{navigator:e})),e.clean(),e.setRange(),t.prototype._redraw.call(this),e.initSelection()},e.prototype._trackSharedTooltip=function(e){var i=this._plotArea.paneByPoint(e);i&&i.options.name===XS?this._unsetActivePoint():t.prototype._trackSharedTooltip.call(this,e)},e.prototype.bindCategories=function(){t.prototype.bindCategories.call(this),this.copyNavigatorCategories()},e.prototype.copyNavigatorCategories=function(){for(var t,e=[].concat(this.options.categoryAxis),i=0;i<e.length;i++){var r=e[i];r.name===GS?t=r.categories:t&&r.pane===XS&&(r.categories=t)}},e.prototype.destroyNavigator=function(){this.navigator&&(this.navigator.destroy(),this.navigator=null)},e.prototype.destroy=function(){this.destroyNavigator(),t.prototype.destroy.call(this)},e.prototype._stopChartHandlers=function(e){var i=this._eventCoordinates(e),r=this._plotArea.paneByPoint(i);return t.prototype._stopChartHandlers.call(this,e)||r&&r.options.name===XS},e.prototype._toggleDragZoomEvents=function(){this._dragZoomEnabled||(this.element.style.touchAction="none",this._dragZoomEnabled=!0)},e}(RS);Zl(ZS,{dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:!0},valueAxis:{narrowRange:!0,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:!1},tooltip:{visible:!0},line:{width:2}},hint:{},visible:!0},tooltip:{visible:!0},legend:{visible:!1}});const QS=ZS;var tk=150,ek="arrowPointer",ik="barPointer",rk=.5,nk=Math.PI/180,ok="inside",sk="linear",ak="outside",lk="radialPointer",ck="radialRangePointer";function hk(t,e){var i=t.getOrigin(),r=t.getSize(),n=ma(e);return t.setOrigin([i.x-n.left,i.y-n.top]),t.setSize([r.width+(n.left+n.right),r.height+(n.top+n.bottom)]),t}var uk=ku,pk=hu,dk=sp;function fk(t,e){var i=t.box,r=t.children[0].box,n=e.border||{},o=e.background||"",s=pk.fromRect(new Uc([i.x1,i.y1],[i.width(),i.height()]),{stroke:{}}),a=new dk(t.text,new Nc(r.x1,r.y1),{font:e.font,fill:{color:e.color}}),l=hk(a.bbox().clone(),e.padding),c=pk.fromRect(l,{stroke:{color:n.width?n.color:"",width:n.width,opacity:n.opacity,dashType:n.dashType,lineJoin:"round",lineCap:"round"},fill:{color:o}}),h=new uk;return h.append(s),h.append(c),h.append(a),h}function gk(t,e,i){var r=Ll(t.from)?t.from:js,n=Ll(t.to)?t.to:Bs;return t.from=Math.max(Math.min(n,r),e),t.to=Math.min(Math.max(n,r),i),t}function mk(t,e){var i=ma(e);return i.left=-i.left,i.top=-i.top,i.right=-i.right,i.bottom=-i.bottom,hk(t,i)}var yk=hu,vk=bw,bk=function(t){function e(e,i,r,n){void 0===n&&(n={}),t.call(this),this.element=e,this.theme=r,this.contextService=new Pp(this,n),this._originalOptions=ha({},this.options,i),this.options=ha({},this._originalOptions),this._initTheme(r),this.redraw()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.surface&&(this.surface.destroy(),this.surface=null),delete this.element,delete this.surfaceElement},e.prototype.value=function(t){var e=this.pointers[0];if(0===arguments.length)return e.value();e.value(t),this._setValueOptions(t)},e.prototype._draw=function(){var t=this.surface;t.clear(),t.draw(this._visuals)},e.prototype.exportVisual=function(){return this._visuals},e.prototype.allValues=function(t){var e=this.pointers,i=[];if(0===arguments.length){for(var r=0;r<e.length;r++)i.push(e[r].value());return i}if(Zs(t))for(var n=0;n<t.length;n++)na(t[n])&&e[n].value(t[n]);this._setValueOptions(t)},e.prototype._setValueOptions=function(t){for(var e=[].concat(this.options.pointer),i=[].concat(t),r=0;r<i.length;r++)e[r].value=i[r]},e.prototype.resize=function(){this.noTransitionsRedraw()},e.prototype.noTransitionsRedraw=function(){var t=this.options.transitions;this._toggleTransitions(!1),this.redraw(),this._toggleTransitions(t)},e.prototype.redraw=function(){var t=this._surfaceSize(),e=new Uc([0,0],[t.width,t.height]);this._initSurface(),this.gaugeArea=this._createGaugeArea(),this._createModel();var i=mk(e.bbox(),this._gaugeAreaMargin);this.reflow(i)},e.prototype.setOptions=function(t,e){this._originalOptions=ha(this._originalOptions,t),this.options=ha({},this._originalOptions),this._initTheme(e),this.redraw()},e.prototype.setDirection=function(t){this.contextService.rtl=Boolean(t),this.surface&&"svg"===this.surface.type&&(this.surface.destroy(),this.surface=null)},e.prototype.setIntlService=function(t){this.contextService.intl=t},e.prototype._initTheme=function(t){var e=t||this.theme||{};this.theme=e,this.options=ha({},e,this.options);var i=this.options,r=i.pointer;if(Zs(r)){for(var n=[],o=0;o<r.length;o++)n.push(ha({},e.pointer,r[o]));i.pointer=n}},e.prototype._createGaugeArea=function(){var t=this.options.gaugeArea,e=this.surface.size(),i=t.border||{},r=new Uc([0,0],[e.width,e.height]);return this._gaugeAreaMargin=t.margin||5,i.width>0&&(r=mk(r,i.width)),yk.fromRect(r,{stroke:{color:i.width?i.color:"",width:i.width,dashType:i.dashType,lineJoin:"round",lineCap:"round"},fill:{color:t.background}})},e.prototype._initSurface=function(){var t=this.options,e=this.surface,i=this._surfaceElement(),r=this._surfaceSize();jl(i,r),e&&e.options.type===t.renderAs?(this.surface.clear(),this.surface.resize()):(e&&e.destroy(),this.surface=vk.create(i,{type:t.renderAs}))},e.prototype._surfaceSize=function(){var t=this.options,e=this._getSize();return t.gaugeArea&&ha(e,t.gaugeArea),e},e.prototype._surfaceElement=function(){return this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.element.appendChild(this.surfaceElement)),this.surfaceElement},e.prototype.getSize=function(){return this._getSize()},e.prototype._getSize=function(){var t=this.element,e=this._defaultSize(),i=t.offsetWidth,r=t.offsetHeight;return i||(i=e.width),r||(r=e.height),{width:i,height:r}},e.prototype._defaultSize=function(){return{width:200,height:200}},e.prototype._toggleTransitions=function(t){this.options.transitions=t;for(var e=0;e<this.pointers.length;e++)this.pointers[e].options.animation.transitions=t},e}(ml);Zl(bk,{plotArea:{},theme:"default",renderAs:"",pointer:{},scale:{},gaugeArea:{}});const wk=bk;var xk=hu,Sk=ku,kk=Nc;function Ck(t,e){var i,r,n=t.position,o=t.tickX,s=t.tickY;return t.vertical?(i=new kk(o,n),r=new kk(o+e.size,n)):(i=new kk(n,s),r=new kk(n,s+e.size)),new xk({stroke:{color:e.color,width:e.width}}).moveTo(i).lineTo(r)}function Ak(t,e,i,r){var n=e.length;if(r.visible)for(var o=i.mirror,s=i.lineBox,a=r.skip;a<n;a+=r.step)a%r.skipUnit!=0&&(i.tickX=o?s.x2:s.x2-r.size,i.tickY=o?s.y1-r.size:s.y1,i.position=e[a],t.append(Ck(i,r)))}var _k=function(t){function e(e,i){var r=e||{};!Ll(r.reverse)&&!1===r.vertical&&(i||{}).rtl&&(r=Object.assign({},r,{reverse:!0})),t.call(this,0,1,r,i),this.options.minorUnit=this.options.minorUnit||this.options.majorUnit/10}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initUserOptions=function(t){var e=ha({},this.options,t);return(e=ha({},e,{labels:{mirror:e.mirror}})).majorUnit=e.majorUnit||Tc(e.min,e.max),e},e.prototype.initFields=function(){},e.prototype.render=function(){var t=this.elements=new Sk,e=this.renderLabels(),i=this.renderLine(),r=this.renderTicks(),n=this.renderRanges();return t.append(i,e,r,n),t},e.prototype.renderRanges=function(){for(var t=this,e=this.options,i=e.min,r=e.max,n=e.vertical,o=e.labels.mirror,s=e.ranges||[],a=new Sk,l=s.length,c=e.rangeSize||e.minorTicks.size/2,h=0;h<l;h++){var u=gk(s[h],i,r),p=t.getSlot(u.from,u.to),d=n?t.lineBox():p,f=n?p:t.lineBox();n?d.x1-=c*(o?-1:1):f.y2+=c*(o?-1:1),a.append(xk.fromRect(new Uc([d.x1,f.y1],[d.x2-d.x1,f.y2-f.y1]),{fill:{color:u.color,opacity:u.opacity},stroke:{}}))}return a},e.prototype.renderLabels=function(){for(var t=this.labels,e=this.options,i=new Sk,r=0;r<t.length;r++)i.append(fk(t[r],e.labels));return i},e.prototype.renderLine=function(){var t=this.options.line,e=this.lineBox(),i=new Sk;if(t.width>0&&t.visible){var r=new xk({stroke:{color:t.color,dashType:t.dashType,width:t.width}});r.moveTo(e.x1,e.y1).lineTo(e.x2,e.y2),i.append(r)}return i},e.prototype.renderTicks=function(){var t=new Sk,e=this.options,i=e.majorTicks.visible?e.majorUnit:0,r={vertical:e.vertical,mirror:e.labels.mirror,lineBox:this.lineBox()};return Ak(t,this.getMajorTickPositions(),r,e.majorTicks),Ak(t,this.getMinorTickPositions(),r,ha({},{skipUnit:i/e.minorUnit},e.minorTicks)),t},e}(Nd);Zl(_k,{min:0,max:50,majorTicks:{size:15,align:ok,color:_s,width:rk,visible:!0},minorTicks:{size:10,align:ok,color:_s,width:rk,visible:!0},line:{width:rk},labels:{position:ok,padding:2},mirror:!1,_alignLines:!1});const Tk=_k;var Ok=function(t){function e(e,i){t.call(this);var r=e.options,n=r.min,o=r.max,s=this.options=ha({},this.options,i);s.fill=s.color,this.scale=e,Ll(s.value)?s.value=Vl(s.value,n,o):s.value=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.value=function(t){var e=this.options,i=e.value;if(0===arguments.length)return i;var r=this.scale.options,n=r.min,o=r.max;e._oldValue=Ll(e._oldValue)?e.value:n,e.value=Vl(t,n,o),this.elements&&this.repaint()},e}(ml);Zl(Ok,{color:_s});const Ek=Ok;var Mk=function(t){function e(e,i){t.call(this,e,i),this.options=ha({track:{visible:Ll(i.track)}},this.options)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(){var t,e,i,r=this.options,n=this.scale,o=n.options,s=o.mirror,a=o.vertical,l=n.lineBox(),c=r.track.size||r.size,h=r.size/2,u=ma(r.margin),p=a?u[s?"left":"right"]:u[s?"bottom":"top"];p=s?-p:p,a?(i=new Vc(l.x1+p,l.y1,l.x1+p,l.y2),s?i.x1-=c:i.x2+=c,r.shape!==ik&&(t=e=new Vc(l.x2+p,l.y1-h,l.x2+p,l.y2+h))):(i=new Vc(l.x1,l.y1-p,l.x2,l.y1-p),s?i.y2+=c:i.y1-=c,r.shape!==ik&&(t=e=new Vc(l.x1-h,l.y1-p,l.x2+h,l.y1-p))),this.trackBox=i,this.pointerRangeBox=e,this.box=t||i.clone().pad(r.border.width)},e.prototype.getElementOptions=function(){var t=this.options;return{fill:{color:t.color,opacity:t.opacity},stroke:Ll(t.border)?{color:t.border.width?t.border.color||t.color:"",width:t.border.width,dashType:t.border.dashType,opacity:t.opacity}:null}},e.prototype._margin=function(){var t=this.scale,e=this.options,i=t.options,r=i.mirror,n=i.vertical,o=ma(e.margin);return n?o[r?"left":"right"]:o[r?"bottom":"top"]},e}(Ek);Zl(Mk,{shape:ik,track:{border:{width:1}},color:_s,border:{width:1},opacity:1,margin:ma(3),animation:{type:ik},visible:!0});const Pk=Mk;var Ik=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){var t=this.options,e=t.margin,i=t.from,r=t.to,n=t.vertical,o=n?"x1":"y1";t.mirror===n?(i[o]-=e,r[o]-=e):(i[o]+=e,r[o]+=e);var s=this.fromScale=new Nc(i.x1,i.y1),a=this.toScale=new Nc(r.x1,r.y1);0!==t.duration&&(t.duration=Math.max(s.distanceTo(a)/t.duration*1e3,1))},e.prototype.step=function(t){var e=Ma(this.fromScale.x,this.toScale.x,t),i=Ma(this.fromScale.y,this.toScale.y,t);this.element.transform(th().translate(e,i))},e}(Du);Zl(Ik,{easing:sk,duration:250}),Pu.current.register(ek,Ik);const Dk=Ik;var Fk=Nc,Rk=hu,Lk=function(t){function e(e,i){t.call(this,e,i),Ll(this.options.size)||(this.options.size=.6*this.scale.options.majorTicks.size)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointerShape=function(){var t=this.scale,e=this.options.size,i=e/2,r=t.options.mirror?-1:1;return t.options.vertical?[new Fk(0,0-i),new Fk(0-r*e,0),new Fk(0,0+i)]:[new Fk(0-i,0),new Fk(0,0+r*e),new Fk(0+i,0)]},e.prototype.repaint=function(){var t=this.scale,e=this.options,i=new Dk(this.elements,ha(e.animation,{vertical:t.options.vertical,mirror:t.options.mirror,margin:this._margin(e.margin),from:t.getSlot(e._oldValue),to:t.getSlot(e.value)}));!1===e.animation.transitions&&(i.options.duration=0),i.setup(),i.play()},e.prototype.render=function(){var t=this.scale,e=this.options,i=this.getElementOptions(),r=this.pointerShape(e.value);e.animation.type=ek;var n=new Rk({stroke:i.stroke,fill:i.fill}).moveTo(r[0]).lineTo(r[1]).lineTo(r[2]).close(),o=t.getSlot(e.value);return n.transform(th().translate(o.x1,o.y1)),this.elements=n,n},e}(Pk);const Nk=Lk;var Bk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){var t=this.options,e=this.axis=t.vertical?Js:Ys,i=this.to=t.newPoints[0][e],r=this.from=t.oldPoints[0][e];0!==t.duration&&(t.duration=Math.max(Math.abs(i-r)/t.speed*1e3,1)),this._set(r)},e.prototype.step=function(t){var e=Ma(this.from,this.to,t);this._set(e)},e.prototype._set=function(t){var e="set"+this.axis.toUpperCase(),i=this.options.newPoints;i[0][e](t),i[1][e](t)},e}(Du);Zl(Bk,{easing:sk,speed:250}),Pu.current.register(ik,Bk);const jk=Bk;var zk=ku,Uk=hu,$k=function(t){function e(e,i){t.call(this,e,i),Ll(this.options.size)||(this.options.size=.3*this.scale.options.majorTicks.size)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointerShape=function(t){var e=this.scale,i=this.options,r=e.options,n=r.mirror,o=r.vertical,s=n===o?-1:1,a=i.size*s,l=e.getSlot(e.options.min),c=e.getSlot(t),h=o?Js:Ys,u=o?Ys:Js,p=this._margin()*s,d=new Nc;d[h]=l[h+"1"],d[u]=l[u+"1"];var f=new Nc;f[h]=c[h+"1"],f[u]=c[u+"1"],o?(d.translate(p,0),f.translate(p,0)):(d.translate(0,p),f.translate(0,p));var g=f.clone(),m=d.clone();return o?(g.translate(a,0),m.translate(a,0)):(g.translate(0,a),m.translate(0,a)),[d,f,g,m]},e.prototype.repaint=function(){var t=this.scale,e=this.options,i=this.pointerShape(e.value),r=this.pointerPath,n=this.pointerShape(e._oldValue);r.moveTo(i[0]).lineTo(i[1]).lineTo(i[2]).lineTo(i[3]).close();var o=new jk(r,ha(e.animation,{reverse:t.options.reverse,vertical:t.options.vertical,oldPoints:[n[1],n[2]],newPoints:[i[1],i[2]]}));!1===e.animation.transitions&&(o.options.duration=0),o.setup(),o.play()},e.prototype.render=function(){var t=new zk,e=this.getElementOptions();this.options.track.visible&&t.append(this.renderTrack());var i=this.pointerPath=new Uk({stroke:e.stroke,fill:e.fill});return t.append(i),this.elements=t,t},e.prototype.renderTrack=function(){var t=this.options.track,e=t.border||{},i=this.trackBox.clone().pad(e.width||0);return new Uk.fromRect(i.toRect(),{fill:{color:t.color,opacity:t.opacity},stroke:{color:e.width?e.color||t.color:"",width:e.width,dashType:e.dashType}})},e}(Pk);const Hk=$k;var Vk=ku,qk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.pointers,i=t.origin.x,r=t.origin.y,n=new Vc(i,r,i+t.width(),r+t.height());this.scale.reflow(n),this._shrinkScaleWidth(n);for(var o=0;o<e.length;o++)e[o].reflow();this.bbox=this._getBox(n),this._alignElements(),this._shrinkElements(),this._buildVisual(),this._draw()},e.prototype._buildVisual=function(){var t=new Vk,e=this.scale.render(),i=this.pointers;t.append(this.gaugeArea),t.append(e);for(var r=0;r<i.length;r++){var n=i[r];t.append(n.render()),n.value(n.options.value)}this._visuals=t},e.prototype._createModel=function(){var t=this.options,e=this.scale=new Tk(t.scale,this.contextService);this.pointers=[];var i=t.pointer;i=Zs(i)?i:[i];for(var r=0;r<i.length;r++){var n=ha({},i[r],{animation:{transitions:t.transitions}}),o="arrow"===n.shape?Nk:Hk;this.pointers.push(new o(e,n))}},e.prototype._defaultSize=function(){var t=this.options.scale.vertical;return{width:t?60:200,height:t?200:60}},e.prototype._getBox=function(t){for(var e,i=this.scale,r=this.pointers,n=t.center(),o=r[0].box.clone().wrap(i.box),s=0;s<r.length;s++)o.wrap(r[s].box.clone());return i.options.vertical?(e=o.width()/2,o=new Vc(n.x-e,t.y1,n.x+e,t.y2)):(e=o.height()/2,o=new Vc(t.x1,n.y-e,t.x2,n.y+e)),o},e.prototype._alignElements=function(){for(var t,e=this.scale,i=this.pointers,r=e.box,n=i[0].box.clone().wrap(e.box),o=this.bbox,s=0;s<i.length;s++)n.wrap(i[s].box.clone());e.options.vertical?(t=o.center().x-n.center().x,e.reflow(new Vc(r.x1+t,o.y1,r.x2+t,o.y2))):(t=o.center().y-n.center().y,e.reflow(new Vc(r.x1,r.y1+t,r.x2,r.y2+t)));for(var a=0;a<i.length;a++)i[a].reflow(this.bbox)},e.prototype._shrinkScaleWidth=function(t){var e=this.scale;if(!e.options.vertical){var i=e.contentBox().width()-t.width();i>0&&(e.box.shrink(i,0),e.box.alignTo(t,"center"),e.reflow(e.box))}},e.prototype._shrinkElements=function(){for(var t=this.scale,e=this.pointers,i=t.box.clone(),r=t.options.vertical?"y":"x",n=e[0].box,o=0;o<e.length;o++)n.wrap(e[o].box.clone());i[r+1]+=Math.max(i[r+1]-n[r+1],0),i[r+2]-=Math.max(n[r+2]-i[r+2],0),t.reflow(i);for(var s=0;s<e.length;s++)e[s].reflow(this.bbox)},e}(wk);Zl(qk,{transitions:!0,gaugeArea:{background:""},scale:{vertical:!0}});const Wk=qk;var Xk=function(t){function e(e,i){void 0===e&&(e=new oh),void 0===i&&(i={}),t.call(this,i),this.geometry(e),ea(this.options.stroke)||this.stroke("#000")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Arc"},e.prototype._bbox=function(t){return this._geometry.bbox(t)},e.prototype.rawBBox=function(){return this.geometry().bbox()},e.prototype.toPath=function(){var t=new hu,e=this.geometry().curvePoints();if(e.length>0){t.moveTo(e[0].x,e[0].y);for(var i=1;i<e.length;i+=3)t.curveTo(e[i],e[i+1],e[i+2])}return t},e.prototype._containsPoint=function(t){return this.geometry().containsPoint(t)},e.prototype._isOnPath=function(t){return this.geometry()._isOnPath(t,this.options.stroke.width/2)},Object.defineProperties(e.prototype,i),e}(Kh(Jh(vu(wh))));var Gk=180,Kk=Xk,Yk=hu,Jk=ku;function Zk(t,e,i,r){var n=new Jk,o=t.center,s=t.getRadiusX();if(r.visible)for(var a=0;a<e.length;a++){var l=t.pointAt(e[a]),c=new Nc(o.x+s-r.size,o.y).rotate(e[a],o);n.append(new Yk({stroke:{color:r.color,width:r.width}}).moveTo(l).lineTo(c))}return n}function Qk(t,e,i,r){return{from:t,to:e,color:i,opacity:r}}var tC=function(t){function e(e,i){t.call(this,0,1,e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initUserOptions=function(t){var e=ha({},this.options,t);return e.majorUnit=e.majorUnit||Tc(e.min,e.max),e.minorUnit=e.minorUnit||e.majorUnit/10,e},e.prototype.initFields=function(){},e.prototype.render=function(t,e){var i=this.renderArc(t,e);this.bbox=i.bbox(),this.labelElements=this.renderLabels(),this.ticks=this.renderTicks(),this.ranges=this.renderRanges()},e.prototype.reflow=function(t){var e=t.center(),i=Math.min(t.height(),t.width())/2;if(!Ll(this.bbox))return this.render(e,i);this.bbox=this.arc.bbox(),this.radius(this.arc.getRadiusX()),this.repositionRanges(),this.renderLabels()},e.prototype.slotAngle=function(t){var e=this.options,i=e.min,r=e.max,n=e.reverse,o=e.startAngle,s=e.endAngle,a=s-o;return(n?s-(t-i)/(r-i)*a:(t-i)/(r-i)*a+o)+Gk},e.prototype.hasRanges=function(){var t=this.options.ranges;return t&&t.length},e.prototype.ticksSize=function(){var t=this.options,e=t.majorTicks,i=t.minorTicks,r=0;return e.visible&&(r=e.size),i.visible&&(r=Math.max(i.size,r)),r},e.prototype.labelsCount=function(){var e=t.prototype.labelsCount.call(this),i=this.options;return i.endAngle-i.startAngle>=360&&i.max%i.majorUnit==0&&(e-=1),e},e.prototype.renderLabels=function(){var t=this,e=this.options,i=this.arc.clone(),r=i.getRadiusX(),n=this.tickAngles(i,e.majorUnit),o=e.rangeSize=e.rangeSize||.1*r,s=new Jk,a=.05*r;Ll(e.rangeDistance)?a=e.rangeDistance:e.rangeDistance=a;var l=e.labels,c=l.position===ok,h=Ll(this.labelElements);c&&(r-=this.ticksSize(),this.hasRanges()&&!h&&(r-=o+a),i.setRadiusX(r).setRadiusY(r));for(var u=this.labels,p=u.length,d=ma(l.padding),f=(d.left+d.right)/2,g=(d.top+d.bottom)/2,m=0;m<p;m++){var y=u[m],v=y.box.width()/2,b=y.box.height()/2,w=n[m],x=(w-Gk)*nk,S=i.pointAt(w),k=S.x+Math.cos(x)*(v+f)*(c?1:-1),C=S.y+Math.sin(x)*(b+g)*(c?1:-1);y.reflow(new Vc(k-v,C-b,k+v,C+b));var A=new Nc(y.box.x1,y.box.y1),_=void 0;if(h){var T=(_=t.labelElements.children[m]).bbox().origin,O=_.transform()||th();O.translate(A.x-T.x,A.y-T.y),_.transform(O)}else _=fk(y,e.labels),s.append(_);t.bbox=Uc.union(t.bbox,_.bbox())}return s},e.prototype.repositionRanges=function(){var t=this.ranges.children;if(t.length>0){var e=this.options,i=e.rangeDistance,r=e.rangeSize,n=this.getRangeRadius();this.options.labels.position===ok&&(n+=r+i);for(var o=n+r/2,s=0;s<t.length;s++)t[s]._geometry.setRadiusX(o).setRadiusY(o);this.bbox=Uc.union(this.bbox,this.ranges.bbox())}},e.prototype.renderRanges=function(){var t=this,e=this.rangeSegments(),i=e.length,r=new Jk;if(i){var n=this.options,o=n.rangeSize,s=n.reverse,a=n.rangeDistance,l=this.getRangeRadius();this.radius(this.radius()-o-a);for(var c=0;c<i;c++){var h=e[c],u=t.slotAngle(h[s?"to":"from"]),p=t.slotAngle(h[s?"from":"to"]);p-u!=0&&r.append(t.createRange(u,p,l,h))}}return r},e.prototype.createRange=function(t,e,i,r){var n=this.options.rangeSize,o=new oh(this.arc.center,{radiusX:i+n/2,radiusY:i+n/2,startAngle:t,endAngle:e});return new Kk(o,{stroke:{width:n,color:r.color,opacity:r.opacity,lineCap:r.lineCap}})},e.prototype.rangeSegments=function(){var t=this.options,e=t.ranges||[],i=e.length,r=[];if(i){var n=t.min,o=t.max,s=t.rangePlaceholderColor;r.push(Qk(n,o,s));for(var a=0;a<i;a++)for(var l=gk(e[a],n,o),c=r.length,h=0;h<c;h++){var u=r[h];if(u.from<=l.from&&l.from<=u.to){r.push(Qk(l.from,l.to,l.color,l.opacity)),u.from<=l.to&&l.to<=u.to&&r.push(Qk(l.to,u.to,s,l.opacity)),u.to=l.from;break}}}return r},e.prototype.getRangeRadius=function(){var t=this.arc,e=this.options,i=e.rangeSize,r=e.rangeDistance,n=e.majorTicks.size;return e.labels.position===ak?t.getRadiusX()-n-r-i:t.getRadiusX()-i},e.prototype.renderArc=function(t,e){var i=this.options;return this.arc=new oh(t,{radiusX:e,radiusY:e,startAngle:i.startAngle+Gk,endAngle:i.endAngle+Gk})},e.prototype.renderTicks=function(){var t=this.arc,e=this.options,i=t.clone();this.majorTickAngles=this.tickAngles(t,e.majorUnit),this.majorTicks=Zk(i,this.majorTickAngles,e.majorUnit,e.majorTicks);var r=new Jk;r.append(this.majorTicks);var n=e.majorTicks.size,o=e.minorTicks.size;if(this._tickDifference=n-o,e.labels.position===ak){var s=i.getRadiusX();i.setRadiusX(s-n+o).setRadiusY(s-n+o)}return this.minorTickAngles=this.normalizeTickAngles(this.tickAngles(t,e.minorUnit)),this.minorTicks=Zk(i,this.minorTickAngles,e.minorUnit,e.minorTicks),r.append(this.minorTicks),r},e.prototype.normalizeTickAngles=function(t){for(var e=this.options,i=e.majorUnit/e.minorUnit,r=t.length-1;r>=0;r--)r%i==0&&t.splice(r,1);return t},e.prototype.tickAngles=function(t,e){var i=this.options,r=i.reverse,n=i.max-i.min,o=t.endAngle-t.startAngle,s=n/e,a=t.startAngle,l=o/s;r&&(a+=o,l=-l),o>=360&&i.max%e==0&&(s-=1);for(var c=[],h=0;h<s;h++)c.push(Xl(a,3)),a+=l;return Xl(a)<=t.endAngle&&c.push(a),c},e.prototype.radius=function(t){if(!t)return this.arc.getRadiusX();this.arc.setRadiusX(t).setRadiusY(t),this.repositionTicks(this.majorTicks.children,this.majorTickAngles),this.repositionTicks(this.minorTicks.children,this.minorTickAngles,!0)},e.prototype.repositionTicks=function(t,e,i){var r=i&&this._tickDifference||0,n=this.arc,o=n.getRadiusX();i&&this.options.labels.position===ak&&0!==r&&(n=this.arc.clone()).setRadiusX(o-r).setRadiusY(o-r);for(var s=0;s<t.length;s++){var a=n.pointAt(e[s]),l=t[s].segments,c=a.x-l[0].anchor().x,h=a.y-l[0].anchor().y;t[s].transform((new th).translate(c,h))}},e}(Nd);Zl(tC,{min:0,max:100,majorTicks:{size:15,align:ok,color:_s,width:rk,visible:!0},minorTicks:{size:10,align:ok,color:_s,width:rk,visible:!0},startAngle:-30,endAngle:210,labels:{position:ok,padding:2}});const eC=tC;var iC=function(t){function e(e,i){t.call(this,e,i);var r=this.options;r.duration=Math.max(Math.abs(r.newAngle-r.oldAngle)/r.duration*1e3,1)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.step=function(t){var e=this.options,i=Ma(e.oldAngle,e.newAngle,t);this.element.transform(th().rotate(i,e.center))},e}(Du);Zl(iC,{easing:sk,duration:tk}),Pu.current.register(lk,iC);const rC=iC;var nC=wu,oC=ku,sC=hu,aC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setAngle=function(t){this.elements.transform(th().rotate(t,this.center))},e.prototype.repaint=function(){var t=this.scale,e=this.options,i=t.slotAngle(e._oldValue),r=t.slotAngle(e.value);!1===e.animation.transitions?this.setAngle(r):new rC(this.elements,ha(e.animation,{oldAngle:i,newAngle:r})).play()},e.prototype.render=function(){var t=this.scale,e=this.options,i=new oC;return!1!==e.animation&&ha(e.animation,{startAngle:0,center:t.arc.center,reverse:t.options.reverse}),i.append(this._renderNeedle(),this._renderCap()),this.elements=i,this.setAngle(nk),i},e.prototype.reflow=function(t){var e=this.center=t.center,i=Vl(this.options.length||1,.1,1.5),r=this.radius=t.getRadiusX()*i,n=this.capSize=Math.round(r*this.options.cap.size);this.bbox=Uc.fromPoints(new Nc(e.x-n,e.y-n),new Nc(e.x+n,e.y+n))},e.prototype._renderNeedle=function(){var t=this.scale.options.minorTicks.size,e=this.center,i=this.options.color,r=new sC({fill:{color:i},stroke:{color:i,width:rk}});return r.moveTo(e.x+this.radius-t,e.y).lineTo(e.x,e.y-this.capSize/2).lineTo(e.x,e.y+this.capSize/2).close(),r},e.prototype._renderCap=function(){var t=this.options,e=t.cap.color||t.color,i=new mu(this.center,this.capSize);return new nC(i,{fill:{color:e},stroke:{color:e}})},e}(Ek);Zl(aC,{cap:{size:.05},arrow:{width:16,height:14},animation:{type:lk,duration:tk}});const lC=aC;var cC=ku,hC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this,i=this.pointers;this.scale.reflow(t),this._initialPlotArea=this.scale.bbox;for(var r=0;r<i.length;r++)i[r].reflow(e.scale.arc),e._initialPlotArea=Uc.union(e._initialPlotArea,i[r].bbox);this.fitScale(t),this.alignScale(t),this._buildVisual(this.gaugeArea,i,this.scale),this._draw()},e.prototype._buildVisual=function(t,e,i){var r=this._visuals=new cC;r.append(t),r.append(i.ticks),r.append(i.ranges),this._buildPointers(e),r.append(i.labelElements)},e.prototype._buildPointers=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.render(),this._visuals.append(i.elements),i.value(i.options.value)}},e.prototype.fitScale=function(t){for(var e,i,r,n,o,s=this,a=this.scale.arc,l=this._initialPlotArea,c=Math.abs(this.getDiff(l,t)),h=Xl(c,3),u=Xl(-c,3),p=0,d=0;!(!(d++<100)||(p=o===r?p+1:0)>5||h!==n&&0<=(e=s.getPlotBox(h,t,a))&&e<=2||u!==n&&0<=(r=s.getPlotBox(u,t,a))&&r<=2||(n=e>0&&r>0?2*h:e<0&&r<0?2*u:Xl((h+u)/2||1,3),0<=(i=s.getPlotBox(n,t,a))&&i<=2));)o=r,i>0?(u=n,r=i):(h=n,e=i)},e.prototype.getPlotBox=function(t,e,i){var r=this.scale,n=this.pointers,o=i.getRadiusX(),s=i.clone();s.setRadiusX(o+t).setRadiusY(o+t),r.arc=s,r.reflow(e),this.plotBbox=r.bbox;for(var a=0;a<n.length;a++)n[a].reflow(s),this.plotBbox=Uc.union(this.plotBbox,n[a].bbox);return this.getDiff(this.plotBbox,e)},e.prototype.getDiff=function(t,e){return Math.min(e.width()-t.width(),e.height()-t.height())},e.prototype.alignScale=function(t){var e=this.plotBbox.center(),i=t.center(),r=e.x-i.x,n=e.y-i.y,o=this.scale,s=this.pointers;o.arc.center.x-=r,o.arc.center.y-=n,o.reflow(t);for(var a=0;a<s.length;a++)s[a].reflow(o.arc),this.plotBbox=Uc.union(o.bbox,s[a].bbox)},e.prototype._createModel=function(){var t=this.options,e=t.pointer,i=this.scale=new eC(t.scale,this.contextService);this.pointers=[];for(var r=Zs(e)?e:[e],n=0;n<r.length;n++){var o=new lC(i,ha({},r[n],{animation:{transitions:t.transitions}}));this.pointers.push(o)}},e}(wk);Zl(hC,{transitions:!0,gaugeArea:{background:""}});const uC=hC;var pC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.rangeSegments=function(){var t=this.options;return[{from:t.min,to:t.max,color:t.rangePlaceholderColor,lineCap:t.rangeLineCap}]},e.prototype.hasRanges=function(){return!0},e.prototype.placeholderRangeAngle=function(t){var e=this.ranges.children[0].geometry();this.options.reverse?e.setEndAngle(t):e.setStartAngle(t)},e.prototype.addRange=function(t,e,i){var r=this.options.reverse,n=this.slotAngle(r?e:t),o=this.slotAngle(r?t:e),s=this.createRange(n,o,this.getRangeRadius(),i);return this.ranges.append(s),s},e}(eC);Zl(pC,{min:0,max:100,majorTicks:{visible:!1},minorTicks:{visible:!1},labels:{visible:!1},startAngle:0,endAngle:180,rangeLineCap:"round"});const dC=pC;var fC=function(t){function e(e,i){t.call(this,e,i);var r=this.options,n=Math.abs(r.newAngle-r.oldAngle)/r.duration*1e3;r.duration=Vl(n,tk,800);var o=e.elements.options.get("stroke.color"),s=e.currentColor();o!==s&&(this.startColor=new yc(o),this.color=new yc(s))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.step=function(t){var e=this,i=e.options,r=e.startColor,n=e.color,o=Ma(i.oldAngle,i.newAngle,t);if(this.element.angle(o),n){var s=Xl(Ma(r.r,n.r,t)),a=Xl(Ma(r.g,n.g,t)),l=Xl(Ma(r.b,n.b,t));this.element.stroke(new yc(s,a,l).toHex())}},e}(Du);Zl(fC,{easing:sk,duration:tk}),Pu.current.register(ck,fC);const gC=fC;var mC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.repaint=function(){var t=this.scale,e=this.options,i=t.slotAngle(e._oldValue),r=t.slotAngle(e.value);this.animation&&this.animation.abort(),!1===e.animation.transitions?(this.angle(r),this.stroke(this.currentColor())):(this.animation=new gC(this,ha(e.animation,{oldAngle:i,newAngle:r})),this.animation.play())},e.prototype.angle=function(t){var e=this.elements.geometry();this.scale.options.reverse?e.setStartAngle(t):e.setEndAngle(t),this.scale.placeholderRangeAngle(t)},e.prototype.stroke=function(t){this.elements.stroke(t)},e.prototype.render=function(){if(!this.elements){var t=this.scale,e=this.options;!1!==e.animation&&ha(e.animation,{startAngle:0,center:t.arc.center,reverse:t.options.reverse}),this.elements=t.addRange(t.options.min,this.options.value,{color:this.currentColor(),opacity:e.opacity,lineCap:t.options.rangeLineCap})}},e.prototype.currentColor=function(){var t=this.scale.options,e=t.min,i=t.max,r=this.options,n=r.colors,o=r.color,s=r.value,a=na(s)?s:e;if(n)for(var l=0;l<n.length;l++){var c=n[l],h=c.color,u=c.from;void 0===u&&(u=e);var p=c.to;if(void 0===p&&(p=i),u<=a&&a<=p)return h}return o},e.prototype.reflow=function(){this.render(),this.bbox=this.elements.bbox()},e}(Ek);Zl(mC,{animation:{type:ck,duration:tk}});const yC=mC;var vC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initTheme=function(e){t.prototype._initTheme.call(this,e),this.options.color=this.options.color||(this.theme.pointer||{}).color},e.prototype._createModel=function(){var t=this.options,e=this.scale=new dC(t.scale,this.contextService),i=new yC(e,ha({},{colors:t.colors,color:t.color,value:t.value,opacity:t.opacity,animation:{transitions:t.transitions}}));this.pointers=[i]},e.prototype._buildPointers=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.render(),i.value(i.options.value)}},e.prototype._setValueOptions=function(t){this.options.value=t},e.prototype.currentColor=function(){var t=this.pointers[0];if(t)return t.currentColor()},e.prototype.centerLabelPosition=function(t,e){var i=this.getSize(),r=this.scale.arc.center,n=r.x-t/2,o=r.y-e/2;if(t<i.width){var s=n+t;n=Math.max(n,0),s>i.width&&(n-=s-i.width)}if(e<i.height){var a=this.scale.bbox,l=a.bottomRight().y,c=o+e;o=Math.max(o,a.origin.y),c>l&&(o-=c-l)}return{left:n,top:o}},e}(uC);const bC=vC;var wC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._createModel=function(){var e=this.options.scale;"number"!=typeof e.startAngle&&(e.startAngle=90),e.endAngle=e.startAngle+360,t.prototype._createModel.call(this)},e}(bC);const xC=wC;var SC=function(t){function e(e){t.call(this),this.setOptions(e),this.initProperties()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){},e.prototype.setOptions=function(t){this.options=Object.assign({},this.options,t),this.quietZoneLength=this.options.addQuietZone?2*this.options.quietZoneLength:0},e.prototype.encode=function(t,e,i){var r=Ll(t)?String(t):t;return this.initValue(r,e,i),this.options.addQuietZone&&this.addQuietZone(),this.addData(),this.options.addQuietZone&&this.addQuietZone(),{baseUnit:this.baseUnit,pattern:this.pattern}},e.prototype.initValue=function(){},e.prototype.addQuietZone=function(){this.pattern.push(this.options.quietZoneLength||10)},e.prototype.addData=function(){},e.prototype.invalidCharacterError=function(t){throw new Error('Character "'+t+'" is not valid for symbology '+this.name+".")},e}(ml);Zl(SC,{quietZoneLength:10,addQuietZone:!0,addCheckSum:!0});var kC=Object.assign,CC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),kC(this,{name:"Code 11",characterMap:["111121","211121","121121","221111","112121","212111","122111","111221","211211","211111","112111"],cCheckSumTotal:10,kCheckSumTotal:9,kCheckSumMinLength:10,checkSumMod:11,DASH_VALUE:10,DASH:"-",START:"112211",STOP:"11221"})},e.prototype.initValue=function(t,e){this.pattern=[],this.value=t,this.width=e,this.totalUnits=0},e.prototype.addData=function(){var t=this.value;this.addPattern(this.START);for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)},e.prototype.addCheckSum=function(){var t=this.value,e=t.length,i=this.getWeightedSum(t,e,this.cCheckSumTotal)%this.checkSumMod;if(this.checksum=String(i),this.addPattern(this.characterMap[i]),++e>=this.kCheckSumMinLength){var r=(i+this.getWeightedSum(t,e,this.kCheckSumTotal))%this.checkSumMod;this.checksum+=r,this.addPattern(this.characterMap[r])}},e.prototype.getWeightedSum=function(t,e,i){for(var r=0,n=0;n<t.length;n++)r+=this.weightedValue(this.getValue(t.charAt(n)),e,n,i);return r},e.prototype.weightedValue=function(t,e,i,r){return((e-i)%r||r)*t},e.prototype.getValue=function(t){return isNaN(t)?(t!==this.DASH&&this.invalidCharacterError(t),this.DASH_VALUE):parseInt(t,10)},e.prototype.addCharacter=function(t){var e=this.getValue(t),i=this.characterMap[e];this.addPattern(i)},e.prototype.addPattern=function(t){for(var e,i=0;i<t.length;i++)e=parseInt(t.charAt(i),10),this.pattern.push(e),this.totalUnits+=e},e}(SC);Zl(CC,{addCheckSum:!0});var AC=Object.assign,_C=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),AC(this,{minBaseUnitLength:.7})},e.prototype.addData=function(){var t=this.value;this.addStart();for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.pushCheckSum(),this.addStop(),this.prepareValues()},e.prototype.addCharacter=function(t){var e=this.characterMap[t];e||this.invalidCharacterError(t),this.addBase(e)},e.prototype.addBase=function(){},e}(SC),TC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),AC(this,{name:"Code 39",checkSumMod:43,minRatio:2.5,maxRatio:3,gapWidth:1,splitCharacter:"|",patternMappings:{b:"1|",w:"1|",B:"ratio|",W:"ratio|"},characterMap:{0:{pattern:"bwbWBwBwb",value:0},1:{pattern:"BwbWbwbwB",value:1},2:{pattern:"bwBWbwbwB",value:2},3:{pattern:"BwBWbwbwb",value:3},4:{pattern:"bwbWBwbwB",value:4},5:{pattern:"BwbWBwbwb",value:5},6:{pattern:"bwBWBwbwb",value:6},7:{pattern:"bwbWbwBwB",value:7},8:{pattern:"BwbWbwBwb",value:8},9:{pattern:"bwBWbwBwb",value:9},A:{pattern:"BwbwbWbwB",value:10},B:{pattern:"bwBwbWbwB",value:11},C:{pattern:"BwBwbWbwb",value:12},D:{pattern:"bwbwBWbwB",value:13},E:{pattern:"BwbwBWbwb",value:14},F:{pattern:"bwBwBWbwb",value:15},G:{pattern:"bwbwbWBwB",value:16},H:{pattern:"BwbwbWBwb",value:17},I:{pattern:"bwBwbWBwb",value:18},J:{pattern:"bwbwBWBwb",value:19},K:{pattern:"BwbwbwbWB",value:20},L:{pattern:"bwBwbwbWB",value:21},M:{pattern:"BwBwbwbWb",value:22},N:{pattern:"bwbwBwbWB",value:23},O:{pattern:"BwbwBwbWb",value:24},P:{pattern:"bwBwBwbWb",value:25},Q:{pattern:"bwbwbwBWB",value:26},R:{pattern:"BwbwbwBWb",value:27},S:{pattern:"bwBwbwBWb",value:28},T:{pattern:"bwbwBwBWb",value:29},U:{pattern:"BWbwbwbwB",value:30},V:{pattern:"bWBwbwbwB",value:31},W:{pattern:"BWBwbwbwb",value:32},X:{pattern:"bWbwBwbwB",value:33},Y:{pattern:"BWbwBwbwb",value:34},Z:{pattern:"bWBwBwbwb",value:35},"-":{pattern:"bWbwbwBwB",value:36},".":{pattern:"BWbwbwBwb",value:37}," ":{pattern:"bWBwbwBwb",value:38},$:{pattern:"bWbWbWbwb",value:39},"/":{pattern:"bWbWbwbWb",value:40},"+":{pattern:"bWbwbWbWb",value:41},"%":{pattern:"bwbWbWbWb",value:42},START:{pattern:"bWbwBwBwb"}}})},e.prototype.initValue=function(t,e,i){this.width=e,this.height=i,this.value=t,this.dataLength=t.length,this.pattern=[],this.patternString=""},e.prototype.prepareValues=function(){var t,e=this.minBaseUnitLength,i=this.minRatio,r=Math.ceil(Math.max(.15*this.width,24)),n=this.maxRatio;if(this.height<r)throw new Error("Insufficient height for Code39 encoding: the current height is "+this.height+"px and the minimum height is "+r+"px.");for(t=this.getBaseUnit(n);t<e&&n>i;)n=parseFloat((n-.1).toFixed(1)),t=this.getBaseUnit(n);if(t<e){var o=Math.ceil(this.getBaseWidth(i)*e);throw new Error("Insufficient width for Code39 encoding: the current width is "+this.width+'px and the minimum width for value "'+this.value+'" is '+o+"px.")}this.ratio=n,this.baseUnit=t,this.patternString=this.patternString.substring(0,this.patternString.length-1),this.pattern=this.pattern.concat(this.patternString.replace(/ratio/g,n).split(this.splitCharacter))},e.prototype.getBaseUnit=function(t){return this.width/this.getBaseWidth(t)},e.prototype.getBaseWidth=function(t){var e=3*(t+2);return this.quietZoneLength+e*(this.dataLength+2)+this.gapWidth*(this.dataLength+1)},e.prototype.addStart=function(){this.addPattern(this.characterMap.START.pattern),this.addCharacterGap()},e.prototype.addBase=function(t){this.addPattern(t.pattern),this.addCharacterGap()},e.prototype.addStop=function(){this.addPattern(this.characterMap.START.pattern)},e.prototype.addPattern=function(t){for(var e=0;e<t.length;e++)this.patternString+=this.patternMappings[t.charAt(e)]},e.prototype.addCharacterGap=function(){this.patternString+=this.gapWidth+this.splitCharacter},e}(_C);Zl(TC,{addCheckSum:!1});var OC={addCharacter:function(t){this.characterMap[t]?this.addBase(this.characterMap[t]):t.charCodeAt(0)>127?this.invalidCharacterError(t):this.addExtended(t.charCodeAt(0))},addExtended:function(t){for(var e,i=this,r=0;r<this.extendedMappings.length;r++)if(e=i.extendedMappings[r].call(i,t)){for(var n=0;n<e.length;n++){var o=e[n];i.addBase(o)}return void(i.dataLength+=e.length-1)}},extendedMappings:[function(t){if(97<=t&&t<=122)return[this.characterMap[this.shiftCharacters[0]],this.characterMap[String.fromCharCode(t-32)]]},function(t){if(33<=t&&t<=58)return[this.characterMap[this.shiftCharacters[1]],this.characterMap[String.fromCharCode(t+32)]]},function(t){if(1<=t&&t<=26)return[this.characterMap[this.shiftCharacters[2]],this.characterMap[String.fromCharCode(t+64)]]},function(t){var e,i,r=this;if(this.specialAsciiCodes[t]){e=[];for(var n=0;n<this.specialAsciiCodes[t].length;n++)e.push(r.characterMap[r.shiftCharacters[3]]),e.push(r.characterMap[r.specialAsciiCodes[t][n]])}else i=6*Math.floor(t/32)+(t-27)%32+64,e=[this.characterMap[this.shiftCharacters[3]],this.characterMap[String.fromCharCode(i)]];return e}],specialAsciiCodes:{0:["U"],64:["V"],96:["W"],127:["T","X","Y","Z"]},shiftValuesAsciiCodes:{39:36,40:47,41:43,42:37},characterMap:{"+":!1,"/":!1,$:!1,"%":!1},shiftCharacters:["SHIFT0","SHIFT1","SHIFT2","SHIFT3"]},EC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),ha(this,OC,{name:"Code 39 extended",characterMap:{SHIFT0:{pattern:"bWbwbWbWb",value:41},SHIFT1:{pattern:"bWbWbwbWb",value:40},SHIFT2:{pattern:"bWbWbWbwb",value:39},SHIFT3:{pattern:"bwbWbWbWb",value:42}}})},e}(TC),MC=Object.assign,PC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),MC(this,{name:"Code 93",cCheckSumTotal:20,kCheckSumTotal:15,checkSumMod:47,characterMap:{0:{pattern:"131112",value:0},1:{pattern:"111213",value:1},2:{pattern:"111312",value:2},3:{pattern:"111411",value:3},4:{pattern:"121113",value:4},5:{pattern:"121212",value:5},6:{pattern:"121311",value:6},7:{pattern:"111114",value:7},8:{pattern:"131211",value:8},9:{pattern:"141111",value:9},A:{pattern:"211113",value:10},B:{pattern:"211212",value:11},C:{pattern:"211311",value:12},D:{pattern:"221112",value:13},E:{pattern:"221211",value:14},F:{pattern:"231111",value:15},G:{pattern:"112113",value:16},H:{pattern:"112212",value:17},I:{pattern:"112311",value:18},J:{pattern:"122112",value:19},K:{pattern:"132111",value:20},L:{pattern:"111123",value:21},M:{pattern:"111222",value:22},N:{pattern:"111321",value:23},O:{pattern:"121122",value:24},P:{pattern:"131121",value:25},Q:{pattern:"212112",value:26},R:{pattern:"212211",value:27},S:{pattern:"211122",value:28},T:{pattern:"211221",value:29},U:{pattern:"221121",value:30},V:{pattern:"222111",value:31},W:{pattern:"112122",value:32},X:{pattern:"112221",value:33},Y:{pattern:"122121",value:34},Z:{pattern:"123111",value:35},"-":{pattern:"121131",value:36},".":{pattern:"311112",value:37}," ":{pattern:"311211",value:38},$:{pattern:"321111",value:39},"/":{pattern:"112131",value:40},"+":{pattern:"113121",value:41},"%":{pattern:"211131",value:42},SHIFT0:{pattern:"122211",value:46},SHIFT1:{pattern:"311121",value:45},SHIFT2:{pattern:"121221",value:43},SHIFT3:{pattern:"312111",value:44},START:{pattern:"111141"},TERMINATION_BAR:"1"}})},e.prototype.initValue=function(t,e,i){this.value=t,this.width=e,this.height=i,this.pattern=[],this.values=[],this.dataLength=t.length},e.prototype.prepareValues=function(){var t=Math.ceil(Math.max(.15*this.width,24));if(this.height<t)throw new Error("Insufficient height for Code93 encoding: the current height is "+this.height+"px, the minimum required height is "+t+"px.");if(this.setBaseUnit(),this.baseUnit<this.minBaseUnitLength){var e=Math.ceil(this.minBaseUnitLength*(this.width/this.baseUnit));throw new Error("Insufficient width for Code93 encoding: the current width is "+this.width+'px and the minimum required width for value "'+this.value+'" is '+e+"px.")}},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(9*(this.dataLength+2+2)+this.quietZoneLength+1)},e.prototype.addStart=function(){var t=this.characterMap.START.pattern;this.addPattern(t)},e.prototype.addStop=function(){this.addStart(),this.pattern.push(this.characterMap.TERMINATION_BAR)},e.prototype.addBase=function(t){this.addPattern(t.pattern),this.values.push(t.value)},e.prototype.pushCheckSum=function(){var t,e=this,i=this._getCheckValues();this.checksum=i.join("");for(var r=0;r<i.length;r++)t=e.characterMap[e._findCharacterByValue(i[r])],e.addPattern(t.pattern)},e.prototype._getCheckValues=function(){var t,e,i=this,r=this.values,n=r.length,o=0;for(e=n-1;e>=0;e--)o+=i.weightedValue(r[e],n-e,i.cCheckSumTotal);for(t=o%this.checkSumMod,o=this.weightedValue(t,1,this.kCheckSumTotal),e=n-1;e>=0;e--)o+=i.weightedValue(r[e],n-e+1,i.kCheckSumTotal);return[t,o%this.checkSumMod]},e.prototype._findCharacterByValue=function(t){for(var e in this.characterMap)if(this.characterMap[e].value===t)return e},e.prototype.weightedValue=function(t,e,i){return(e%i||i)*t},e.prototype.addPattern=function(t){for(var e,i=0;i<t.length;i++)e=parseInt(t.charAt(i),10),this.pattern.push(e)},e}(_C),IC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),ha(this,OC,{name:"Code 93 extended",pushCheckSum:function(){var t,e=this,i=this._getCheckValues();this.checksum=i.join("");for(var r=0;r<i.length;r++)if(t=i[r],e.shiftValuesAsciiCodes[t])e.addExtended(e.shiftValuesAsciiCodes[t]);else{var n=e._findCharacterByValue(t);e.addPattern(e.characterMap[n].pattern)}}})},e}(PC),DC=/^\d+$/,FC=Object.assign,RC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),FC(this,{name:"Postnet",START:"2",VALID_CODE_LENGTHS:[5,9,11],DIGIT_SEPARATOR:"-",characterMap:["22111","11122","11212","11221","12112","12121","12211","21112","21121","21211"]})},e.prototype.initValue=function(t,e,i){this.height=i,this.width=e,this.baseHeight=i/2,this.value=t.replace(new RegExp(this.DIGIT_SEPARATOR,"g"),""),this.pattern=[],this.validate(this.value),this.checkSum=0,this.setBaseUnit()},e.prototype.addData=function(){var t=this.value;this.addPattern(this.START);for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.START),this.pattern.pop()},e.prototype.addCharacter=function(t){var e=this.characterMap[t];this.checkSum+=parseInt(t,10),this.addPattern(e)},e.prototype.addCheckSum=function(){this.checksum=(10-this.checkSum%10)%10,this.addCharacter(this.checksum)},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(10*(this.value.length+1)+3+this.quietZoneLength)},e.prototype.validate=function(t){if(DC.test(t)||this.invalidCharacterError(t.match(/[^0-9]/)[0]),!Oa(t.length,this.VALID_CODE_LENGTHS))throw new Error("Invalid value length. Valid lengths for the Postnet symbology are "+this.VALID_CODE_LENGTHS.join(",")+".")},e.prototype.addPattern=function(t){for(var e,i=this,r=0;r<t.length;r++)e=i.height-i.baseHeight*t.charAt(r),i.pattern.push({width:1,y1:e,y2:i.height}),i.pattern.push(1)},e}(SC),LC=/^\d+$/,NC=/^[a-z0-9]+$/i,BC=Object.assign,jC=function(t){function e(e){t.call(this),this.encoding=e,this.initProperties()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){},e.prototype.addStart=function(){},e.prototype.is=function(){},e.prototype.isCode=function(){return!1},e.prototype.move=function(){},e.prototype.pushState=function(){},e}(ml),zC=function(t){function e(e,i){t.call(this,e),this.states=i,this._initMoves(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),ha(this,{FNC4:"FNC4",SHIFT:98})},e.prototype.addStart=function(){this.encoding.addPattern(this.START)},e.prototype.is=function(t,e){var i=t.charCodeAt(e);return this.isCode(i)},e.prototype.move=function(t){for(var e=0;!this._moves[e].call(this,t)&&e<this._moves.length;)e++},e.prototype.pushState=function(t){var e,i=this.states,r=t.value,n=r.length;if(Oa("C",i)){var o=r.substr(t.index).match(/\d{4,}/g);o&&(n=r.indexOf(o[0],t.index))}for(;(e=t.value.charCodeAt(t.index))>=0&&this.isCode(e)&&t.index<n;)this.encoding.addPattern(this.getValue(e)),t.index++},e.prototype._initMoves=function(t){this._moves=[],Oa(this.FNC4,t)&&this._moves.push(this._moveFNC),Oa(this.shiftKey,t)&&this._moves.push(this._shiftState),this._moves.push(this._moveState)},e.prototype._moveFNC=function(t){if(t.fnc)return t.fnc=!1,t.previousState===this.key},e.prototype._shiftState=function(t){if(t.previousState===this.shiftKey&&(t.index+1>=t.value.length||this.encoding[this.shiftKey].is(t.value,t.index+1)))return this.encoding.addPattern(this.SHIFT),t.shifted=!0,!0},e.prototype._moveState=function(){return this.encoding.addPattern(this.MOVE),!0},e}(jC),UC={};UC.A=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),BC(this,{key:"A",shiftKey:"B",MOVE:101,START:103})},e.prototype.isCode=function(t){return 0<=t&&t<96},e.prototype.getValue=function(t){return t<32?t+64:t-32},e}(zC),UC.B=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),BC(this,{key:"B",shiftKey:"A",MOVE:100,START:104})},e.prototype.isCode=function(t){return 32<=t&&t<128},e.prototype.getValue=function(t){return t-32},e}(zC),UC.C=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),BC(this,{key:"C",MOVE:99,START:105})},e.prototype.addStart=function(){this.encoding.addPattern(this.START)},e.prototype.is=function(t,e){var i=GC(t,e,4);return(e+4<=t.length||2===t.length)&&LC.test(i)},e.prototype.move=function(){this.encoding.addPattern(this.MOVE)},e.prototype.pushState=function(t){for(var e;(e=GC(t.value,t.index,2))&&LC.test(e)&&2===e.length;)this.encoding.addPattern(parseInt(e,10)),t.index+=2},e.prototype.getValue=function(t){return t},e}(jC),UC.FNC4=function(t){function e(e,i){t.call(this,e),this._initSubStates(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),BC(this,{key:"FNC4",dependentStates:["A","B"]})},e.prototype.addStart=function(t){var e=t.value.charCodeAt(0)-128,i=this._getSubState(e);this.encoding[i].addStart()},e.prototype.is=function(t,e){var i=t.charCodeAt(e);return this.isCode(i)},e.prototype.isCode=function(t){return 128<=t&&t<256},e.prototype.pushState=function(t){var e,i=this._initSubState(t),r=this.encoding,n=i.value.length;if(t.index+=n,n<3)for(;i.index<n;i.index++)e=i.value.charCodeAt(i.index),i.state=this._getSubState(e),i.previousState!==i.state&&(i.previousState=i.state,r[i.state].move(i)),r.addPattern(r[i.state].MOVE),r.addPattern(r[i.state].getValue(e));else i.state!==i.previousState&&r[i.state].move(i),this._pushStart(i),r.pushData(i,this.subStates),t.index<t.value.length&&this._pushStart(i);t.fnc=!0,t.state=i.state},e.prototype._pushStart=function(t){this.encoding.addPattern(this.encoding[t.state].MOVE),this.encoding.addPattern(this.encoding[t.state].MOVE)},e.prototype._initSubState=function(t){var e={value:this._getAll(t.value,t.index),index:0};return e.state=this._getSubState(e.value.charCodeAt(0)),e.previousState=t.previousState===this.key?e.state:t.previousState,e},e.prototype._initSubStates=function(t){this.subStates=[];for(var e=0;e<t.length;e++)Oa(t[e],this.dependentStates)&&this.subStates.push(t[e])},e.prototype._getSubState=function(t){for(var e=this,i=0;i<this.subStates.length;i++)if(e.encoding[e.subStates[i]].isCode(t))return e.subStates[i]},e.prototype._getAll=function(t,e){for(var i,r="",n=e;(i=t.charCodeAt(n++))&&this.isCode(i);)r+=String.fromCharCode(i-128);return r},e}(jC),UC.FNC1=function(t){function e(e,i){t.call(this,e),this.states=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),BC(this,{key:"FNC1",startState:"C",startAI:"(",endAI:")",dependentStates:["C","B"],applicationIdentifiers:{22:{max:29,type:"alphanumeric"},402:{length:17},7004:{max:4,type:"alphanumeric"},242:{max:6,type:"alphanumeric"},8020:{max:25,type:"alphanumeric"},703:{min:3,max:30,type:"alphanumeric"},8008:{min:8,max:12,type:"alphanumeric"},253:{min:13,max:17,type:"alphanumeric"},8003:{min:14,max:30,type:"alphanumeric"},multiKey:[{ids:["15","17","8005","8100"],ranges:[[11,13],[310,316],[320,336],[340,369]],type:{length:6}},{ids:["240","241","250","251","400","401","403","7002","8004","8007","8110"],ranges:[[-9]],type:{max:30,type:"alphanumeric"}},{ids:["7001"],ranges:[[410,414]],type:{length:13}},{ids:["10","21","254","420","8002"],type:{max:20,type:"alphanumeric"}},{ids:["00","8006","8017","8018"],type:{length:18}},{ids:["01","02","8001"],type:{length:14}},{ids:["422"],ranges:[[424,426]],type:{length:3}},{ids:["20","8102"],type:{length:2}},{ids:["30","37"],type:{max:8,type:"alphanumeric"}},{ids:["390","392"],type:{max:15,type:"alphanumeric"}},{ids:["421","423"],type:{min:3,max:15,type:"alphanumeric"}},{ids:["391","393"],type:{min:3,max:18,type:"alphanumeric"}},{ids:["7003","8101"],type:{length:10}}]},START:102})},e.prototype.addStart=function(){this.encoding[this.startState].addStart()},e.prototype.is=function(){return Oa(this.key,this.states)},e.prototype.pushState=function(t){var e,i,r,n=this,o=this.encoding,s=t.value.replace(/\s/g,""),a=new RegExp("["+this.startAI+this.endAI+"]","g"),l=t.index,c={state:this.startState};o.addPattern(this.START);for(;;){if(c.index=0,(e=(r=s.charAt(l)===n.startAI?2:0)>0?n.getBySeparator(s,l):n.getByLength(s,l)).ai.length)i=l+r+e.id.length+e.ai.length;else if((i=s.indexOf(n.startAI,l+1))<0){if(l+e.ai.max+e.id.length+r<s.length)throw new Error("Separators are required after variable length identifiers");i=s.length}if(c.value=s.substring(l,i).replace(a,""),n.validate(e,c.value),o.pushData(c,n.dependentStates),i>=s.length)break;l=i,c.state!==n.startState&&(o[n.startState].move(c),c.state=n.startState),e.ai.length||o.addPattern(n.START)}t.index=t.value.length},e.prototype.validate=function(t,e){var i=e.substr(t.id.length),r=t.ai;if(!r.type&&!LC.test(i))throw new Error("Application identifier "+t.id+" is numeric only but contains non numeric character(s).");if("alphanumeric"===r.type&&!NC.test(i))throw new Error("Application identifier "+t.id+" is alphanumeric only but contains non alphanumeric character(s).");if(r.length&&r.length!==i.length)throw new Error("Application identifier "+t.id+" must be "+r.length+" characters long.");if(r.min&&r.min>i.length)throw new Error("Application identifier "+t.id+" must be at least "+r.min+" characters long.");if(r.max&&r.max<i.length)throw new Error("Application identifier "+t.id+" must be at most "+r.max+" characters long.")},e.prototype.getByLength=function(t,e){for(var i,r,n=2;n<=4;n++)if(i=GC(t,e,n),r=this.getApplicationIdentifier(i)||this.getApplicationIdentifier(i.substring(0,i.length-1)))return{id:i,ai:r};this.unsupportedAIError(i)},e.prototype.unsupportedAIError=function(t){throw new Error("'"+t+"' is not a supported Application Identifier")},e.prototype.getBySeparator=function(t,e){var i=t.indexOf(this.startAI,e),r=t.indexOf(this.endAI,i),n=t.substring(i+1,r),o=this.getApplicationIdentifier(n)||this.getApplicationIdentifier(n.substr(n.length-1));return o||this.unsupportedAIError(n),{ai:o,id:n}},e.prototype.getApplicationIdentifier=function(t){var e=this.applicationIdentifiers,i=e.multiKey;if(e[t])return e[t];for(var r=0;r<i.length;r++){if(i[r].ids&&Oa(t,i[r].ids))return i[r].type;if(i[r].ranges)for(var n=i[r].ranges,o=0;o<n.length;o++)if(n[o][0]<=t&&t<=n[o][1])return i[r].type}},e}(jC);var $C=function(t){function e(e){t.call(this,e),this._initStates()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),BC(this,{characterMap:[212222,222122,222221,121223,121322,131222,122213,122312,132212,221213,221312,231212,112232,122132,122231,113222,123122,123221,223211,221132,221231,213212,223112,312131,311222,321122,321221,312212,322112,322211,212123,212321,232121,111323,131123,131321,112313,132113,132311,211313,231113,231311,112133,112331,132131,113123,113321,133121,313121,211331,231131,213113,213311,213131,311123,311321,331121,312113,312311,332111,314111,221411,431111,111224,111422,121124,121421,141122,141221,112214,112412,122114,122411,142112,142211,241211,221114,413111,241112,134111,111242,121142,121241,114212,124112,124211,411212,421112,421211,212141,214121,412121,111143,111341,131141,114113,114311,411113,411311,113141,114131,311141,411131,211412,211214,211232,2331112],STOP:106})},e.prototype._initStates=function(){for(var t=this,e=0;e<this.states.length;e++)t[t.states[e]]=new UC[t.states[e]](t,t.states)},e.prototype.initValue=function(t,e,i){this.pattern=[],this.value=t,this.width=e,this.height=i,this.checkSum=0,this.totalUnits=0,this.index=0,this.position=1},e.prototype.addData=function(){var t={value:this.value,index:0,state:""};0!==this.value.length&&(t.state=t.previousState=this.getNextState(t,this.states),this.addStart(t),this.pushData(t,this.states),this.addCheckSum(),this.addStop(),this.setBaseUnit())},e.prototype.pushData=function(t,e){for(var i=this;i[t.state].pushState(t),!(t.index>=t.value.length);)if(t.shifted){var r=t.state;t.state=t.previousState,t.previousState=r,t.shifted=!1}else t.previousState=t.state,t.state=i.getNextState(t,e),i[t.state].move(t)},e.prototype.addStart=function(t){this[t.state].addStart(t),this.position=1},e.prototype.addCheckSum=function(){this.checksum=this.checkSum%103,this.addPattern(this.checksum)},e.prototype.addStop=function(){this.addPattern(this.STOP)},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)},e.prototype.addPattern=function(t){for(var e,i=this.characterMap[t].toString(),r=0;r<i.length;r++)e=parseInt(i.charAt(r),10),this.pattern.push(e),this.totalUnits+=e;this.checkSum+=t*this.position++},e.prototype.getNextState=function(t,e){for(var i=0;i<e.length;i++)if(this[e[i]].is(t.value,t.index))return e[i];this.invalidCharacterError(t.value.charAt(t.index))},e}(SC),HC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),BC(this,{name:"Code 128 A",states:["A"]})},e}($C),VC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),BC(this,{name:"Code 128 B",states:["B"]})},e}($C),qC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),BC(this,{name:"Code 128 C",states:["C"]})},e}($C),WC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),BC(this,{name:"Code 128",states:["C","B","A","FNC4"]})},e}($C),XC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),BC(this,{name:"Code GS1-128",states:["FNC1","C","B"]})},e}($C);function GC(t,e,i){return t.substring(e,e+i)}var KC=Object.assign,YC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),KC(this,{characterMap:["12121212","12121221","12122112","12122121","12211212","12211221","12212112","12212121","21121212","21121221"],START:"21",STOP:"121",checkSumType:"",checkSums:eA})},e.prototype.initValue=function(t,e){this.pattern=[],this.value=t,this.checkSumLength=0,this.width=e},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(12*(this.value.length+this.checkSumLength)+this.quietZoneLength+7)},e.prototype.addData=function(){var t=this.value;this.addPattern(this.START);for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()},e.prototype.addCharacter=function(t){var e=this.characterMap[t];e||this.invalidCharacterError(t),this.addPattern(e)},e.prototype.addPattern=function(t){for(var e=0;e<t.length;e++)this.pattern.push(parseInt(t.charAt(e),10))},e.prototype.addCheckSum=function(){var t=this,e=this.checkSums[this.checkSumType].call(this.checkSums,this.value);this.checksum=e.join("");for(var i=0;i<e.length;i++)t.checkSumLength++,t.addPattern(t.characterMap[e[i]])},e}(SC),JC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),KC(this,{name:"MSI Modulo10",checkSumType:"Modulo10"})},e}(YC),ZC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),KC(this,{name:"MSI Modulo11",checkSumType:"Modulo11"})},e}(YC),QC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),KC(this,{name:"MSI Modulo10 Modulo10",checkSumType:"Modulo10Modulo10"})},e}(YC),tA=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),KC(this,{name:"MSI Modulo11 Modulo10",checkSumType:"Modulo11Modulo10"})},e}(YC),eA={Modulo10:function(t){var e,i,r,n=[0,""],o=t.length%2;for(e=0;e<t.length;e++)n[(e+o)%2]+=parseInt(t.charAt(e),10);for(r=n[0],i=(2*n[1]).toString(),e=0;e<i.length;e++)r+=parseInt(i.charAt(e),10);return[(10-r%10)%10]},Modulo11:function(t){for(var e,i=0,r=t.length,n=0;n<r;n++)i+=(((r-n)%6||6)+1)*t.charAt(n);return 10!==(e=(11-i%11)%11)?[e]:[1,0]},Modulo11Modulo10:function(t){var e,i=this.Modulo11(t);return e=t+i[0],i.concat(this.Modulo10(e))},Modulo10Modulo10:function(t){var e,i=this.Modulo10(t);return e=t+i[0],i.concat(this.Modulo10(e))}},iA=Object.assign,rA=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),iA(this,{name:"EAN 13",keyTable:["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"],characterMap:{digits:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2]],start:[1,1,1],middle:[1,1,1,1,1]}})},e.prototype.initValue=function(t,e,i){var r=String(t);if(12!==r.length||/\D/.test(r))throw new Error('The value of the "EAN13" encoding should be 12 symbols');this.pattern=[],this.options.height=i,this.baseUnit=e/(95+this.quietZoneLength),this.value=r,this.checksum=this.calculateChecksum(),this.leftKey=r[0],this.leftPart=r.substr(1,6),this.rightPart=r.substr(7)+this.checksum},e.prototype.addData=function(){this.addPieces(this.characterMap.start),this.addSide(this.leftPart,this.leftKey),this.addPieces(this.characterMap.middle),this.addSide(this.rightPart),this.addPieces(this.characterMap.start)},e.prototype.addSide=function(t,e){for(var i=this,r=0;r<t.length;r++)e&&parseInt(i.keyTable[e].charAt(r),10)?i.addPieces(Array.prototype.slice.call(i.characterMap.digits[t.charAt(r)]).reverse(),!0):i.addPieces(i.characterMap.digits[t.charAt(r)],!0)},e.prototype.addPieces=function(t,e){for(var i=this,r=0;r<t.length;r++)e?i.pattern.push({y1:0,y2:.95*i.options.height,width:t[r]}):i.pattern.push(t[r])},e.prototype.calculateChecksum=function(){for(var t=0,e=0,i=this.value.split("").reverse().join(""),r=0;r<i.length;r++)r%2?e+=parseInt(i.charAt(r),10):t+=parseInt(i.charAt(r),10);return(10-(3*t+e)%10)%10},e}(SC),nA=Object.assign,oA=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),nA(this,{name:"EAN 8"})},e.prototype.initValue=function(t,e,i){if(7!==t.length||/\D/.test(t))throw new Error("Invalid value provided");this.value=t,this.options.height=i,this.checksum=this.calculateChecksum(this.value),this.leftPart=this.value.substr(0,4),this.rightPart=this.value.substr(4)+this.checksum,this.pattern=[],this.baseUnit=e/(67+this.quietZoneLength)},e}(rA),sA={code11:CC,code39:TC,code39extended:EC,code93:PC,code93extended:IC,code128:WC,code128a:HC,code128b:VC,code128c:qC};function aA(t,e){var i=t.style.display;"canvas"===e&&(t.style.display="block");var r={width:t.clientWidth,height:t.clientHeight};return t.style.display=i,r}sA["gs1-128"]=XC,sA.msimod10=JC,sA.msimod11=ZC,sA.msimod1010=QC,sA.msimod1110=tA,sA.postnet=RC,sA.ean8=oA,sA.ean13=rA;var lA=function(t){function e(e,i,r){void 0===r&&(r=Ac),t.call(this),this.options=ha({},this.options,i),this.element=e,this.onError=r,this._initElement(),this._initSurface(),this._setOptions(i),i&&Ll(i.value)&&this.redraw()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this._destroySurface()},e.prototype._initElement=function(){Qs(this.element,"k-barcode")},e.prototype._initSurface=function(){var t=this.options,e=this.surface;e&&e.options.type===t.renderAs||(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())},e.prototype._createSurface=function(){return bw.create(this.surfaceElement,{type:this.options.renderAs})},e.prototype._destroySurface=function(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())},e.prototype._initSurfaceElement=function(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.surfaceElement.style.position="relative",this.element.appendChild(this.surfaceElement))},e.prototype._destroySurfaceElement=function(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)},e.prototype.setOptions=function(t){this._setOptions(t),this._initSurface(),this.redraw()},e.prototype.redraw=function(){var t=this._getSize();this.surface.clear(),this.surface.setSize({width:t.width,height:t.height}),this.createVisual(),this.surface.draw(this.visual)},e.prototype.getSize=function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},e.prototype._resize=function(){this.redraw()},e.prototype.createVisual=function(){this.visual=this._render()},e.prototype._render=function(){var t,e,i=this.options,r=i.value,n=i.text,o=ma(n.margin),s=this._getSize(),a=i.border||{},l=this.encoding,c=new Vc(0,0,s.width,s.height).unpad(a.width).unpad(i.padding),h=c.height(),u=new ku;this.contentBox=c,u.append(this._getBackground(s)),n.visible&&(h-=Il(r,{font:n.font}).height+o.top+o.bottom);try{t=l.encode(r,c.width(),h)}catch(t){return this.onError(t),u}return n.visible&&(e=r,i.checksum&&Ll(l.checksum)&&(e+=" "+l.checksum),u.append(this._getText(e))),this.barHeight=h,this._bandsGroup=this._getBands(t.pattern,t.baseUnit),u.append(this._bandsGroup),u},e.prototype.exportVisual=function(){return this._render()},e.prototype._getSize=function(){var t=aA(this.element,this.options.renderAs),e=new jc(300,100);return t.width>0&&(e.width=t.width),t.height>0&&(e.height=t.height),this.options.width&&(e.width=this.options.width),this.options.height&&(e.height=this.options.height),e},e.prototype.value=function(t){if(!Ll(t))return this.options.value;this.options.value=String(t),this.redraw()},e.prototype._getBands=function(t,e){for(var i,r,n=this.contentBox,o=n.x1,s=new ku,a=0;a<t.length;a++){if(i=(r=ua(t[a])?t[a]:{width:t[a],y1:0,y2:this.barHeight}).width*e,a%2){var l=Uc.fromPoints(new Nc(o,r.y1+n.y1),new Nc(o+i,r.y2+n.y1)),c=hu.fromRect(l,{fill:{color:this.options.color},stroke:null});s.append(c)}o+=i}return s},e.prototype._getBackground=function(t){var e=this.options,i=e.border||{},r=new Vc(0,0,t.width,t.height).unpad(i.width/2);return hu.fromRect(r.toRect(),{fill:{color:e.background},stroke:{color:i.width?i.color:"",width:i.width,dashType:i.dashType}})},e.prototype._getText=function(t){var e=this.options.text,i=this._textbox=new dp(t,{font:e.font,color:e.color,align:"center",vAlign:"bottom",margin:e.margin});return i.reflow(this.contentBox),i.renderVisual(),i.visual},e.prototype._setOptions=function(t){if(this.type=(t.type||this.options.type).toLowerCase(),"upca"===this.type&&(this.type="ean13",t.value="0"+t.value),"upce"===this.type&&(this.type="ean8",t.value="0"+t.value),!sA[this.type])throw new Error("Encoding '"+this.type+"' is not supported.");this.encoding=new sA[this.type],this.options=ha({},this.options,t)},e}(ml);Zl(lA,{name:"Barcode",renderAs:"svg",value:"",type:"code39",checksum:!1,width:0,height:0,color:"black",background:"white",text:{visible:!0,font:"16px Consolas, Monaco, Sans Mono, monospace, sans-serif",color:"black",margin:{top:0,bottom:0,left:0,right:0}},border:{width:0,dashType:"solid",color:"black"},padding:{top:0,bottom:0,left:0,right:0}});const cA=lA;var hA=function(t){function e(e,i,r){void 0===i&&(i=new Uc),void 0===r&&(r={}),t.call(this,r),this.src(e),this.rect(i)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Image"},e.prototype.src=function(t){return ea(t)?(this.options.set("src",t),this):this.options.get("src")},e.prototype.bbox=function(t){var e=Rc(this.currentTransform(t));return this._rect.bbox(e)},e.prototype.rawBBox=function(){return this._rect.bbox()},e.prototype._containsPoint=function(t){return this._rect.containsPoint(t)},e.prototype._hasFill=function(){return this.src()},Object.defineProperties(e.prototype,i),e}(vu(wh,["rect"]));const uA=hA;var pA=Object.assign;function dA(t,e){for(var i=[],r=0;r<t.length;)i.push(t.substring(r,r+e)),r+=e;return i}function fA(t,e){var i=Number(t).toString(2);return i.length<e&&(i=new Array(e-i.length+1).join(0)+i),i}function gA(t){return parseInt(t,2)}var mA=function(t){function e(e){t.call(this),this.matrix=e,this.row=e.length-1,this.column=e.length-1,this.startColumn=this.column,this.dir=-1,this.c=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.move=function(){this.row+=this.dir*this.c,this.c^=1,this.column=this.startColumn-this.c},e.prototype.getNextCell=function(){for(var t=this;void 0!==this.matrix[this.row][this.column];)t.move(),(t.row<0||t.row>=t.matrix.length)&&(t.dir=-t.dir,t.startColumn-=8!==t.startColumn?2:3,t.column=t.startColumn,t.row=t.dir<0?t.matrix.length-1:0);return{row:this.row,column:this.column}},e.prototype.getNextRemainderCell=function(){if(this.move(),void 0===this.matrix[this.row][this.column])return{row:this.row,column:this.column}},e}(ml),yA=function(t){function e(e,i){t.call(this),this.dataString=e,this.version=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ml),vA=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getEncodingResult=function(t,e){var i=function(t){var e,i=[],r=0,n=t;i.push(XA(n,8,5,8,e)),e=i[0].mode,n=n.substr(i[0].modeString.length);for(;n.length>0;){var o=XA(n,17,9,16,e);o.mode!==e?(e=o.mode,i.push(o),r++):i[r].modeString+=o.modeString,n=n.substr(o.modeString.length)}return i}(t),r=function(t){for(var e=0,i=0;i<t.length;i++)e+=kA[t[i].mode].getStringBitsLength(t[i].modeString.length);return Math.ceil(e/8)}(i),n=GA(r,e),o=function(t,e){for(var i="",r=0;r<t.length;r++)i+=kA[t[r].mode].encode(t[r].modeString,e);return i}(i,n);return new yA(o,n)},e}(ml),bA=function(t){function e(){t.call(this),this.initProperties()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){pA(this,{modeIndicator:"",bitsInCharacterCount:[]})},e.prototype.getVersionIndex=function(t){return t<10?0:t>26?2:1},e.prototype.getBitsCharacterCount=function(t){return this.bitsInCharacterCount[this.getVersionIndex(t||40)]},e.prototype.getModeCountString=function(t,e){return this.modeIndicator+fA(t,this.getBitsCharacterCount(e))},e.prototype.encode=function(){},e.prototype.getStringBitsLength=function(){},e.prototype.getValue=function(){},e}(ml),wA=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),pA(this,{bitsInCharacterCount:[10,12,14],modeIndicator:"0001"})},e.prototype.getValue=function(t){return parseInt(t,10)},e.prototype.encode=function(t,e){var i,r=dA(t,3),n=this.getModeCountString(t.length,e);for(i=0;i<r.length-1;i++)n+=fA(r[i],10);return n+fA(r[i],1+3*r[i].length)},e.prototype.getStringBitsLength=function(t,e){var i=t%3;return 4+this.getBitsCharacterCount(e)+10*Math.floor(t/3)+3*i+(0===i?0:1)},e}(bA),xA=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),pA(this,{characters:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35," ":36,$:37,"%":38,"*":39,"+":40,"-":41,".":42,"/":43,":":44},bitsInCharacterCount:[9,11,13],modeIndicator:"0010"})},e.prototype.getValue=function(t){return this.characters[t]},e.prototype.encode=function(t,e){var i,r=dA(t,2),n=this.getModeCountString(t.length,e);for(i=0;i<r.length-1;i++)n+=fA(45*this.getValue(r[i].charAt(0))+this.getValue(r[i].charAt(1)),11);return n+fA(2===r[i].length?45*this.getValue(r[i].charAt(0))+this.getValue(r[i].charAt(1)):this.getValue(r[i].charAt(0)),1+5*r[i].length)},e.prototype.getStringBitsLength=function(t,e){return 4+this.getBitsCharacterCount(e)+11*Math.floor(t/2)+t%2*6},e}(bA),SA=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),pA(this,{bitsInCharacterCount:[8,16,16],modeIndicator:"0100"})},e.prototype.getValue=function(t){var e=t.charCodeAt(0);if(e<=127||160<=e&&e<=255)return e;throw new Error('Unsupported character in QR Code: "'+t+'".')},e.prototype.encode=function(t,e){for(var i=this.getModeCountString(t.length,e),r=0;r<t.length;r++)i+=fA(this.getValue(t.charAt(r)),8);return i},e.prototype.getStringBitsLength=function(t,e){return 4+this.getBitsCharacterCount(e)+8*t},e}(bA),kA={};kA.numeric=new wA,kA.alphanumeric=new xA,kA.byte=new SA;var CA=function(t){function e(){t.call(this),this.initProperties(),this.mode=kA[this.encodingMode]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){pA(this,{encodingMode:"byte",utfBOM:"111011111011101110111111",initialModeCountStringLength:20,ranges:[128,2048,65536,2097152,67108864]})},e.prototype.getEncodingResult=function(t,e){var i=this.encode(t),r=GA(this.getDataCodewordsCount(i),e),n=this.mode.getModeCountString(i.length/8,r)+i;return new yA(n,r)},e.prototype.getDataCodewordsCount=function(t){var e=t.length;return Math.ceil((this.initialModeCountStringLength+e)/8)},e.prototype.encode=function(t){for(var e=this.utfBOM,i=0;i<t.length;i++)e+=this.encodeCharacter(t.charCodeAt(i));return e},e.prototype.encodeCharacter=function(t){var e=this.getBytesCount(t),i=e-1,r="";if(1===e)r=fA(t,8);else{for(var n=8-e,o=0;o<i;o++)r=fA(t>>6*o&63|128,8)+r;r=(t>>6*i|255>>n<<n).toString(2)+r}return r},e.prototype.getBytesCount=function(t){for(var e=this.ranges,i=0;i<e.length;i++)if(t<e[i])return i+1},e}(ml),AA=[{L:{groups:[[1,19]],totalDataCodewords:19,errorCodewordsPerBlock:7},M:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:10},Q:{groups:[[1,13]],totalDataCodewords:13,errorCodewordsPerBlock:13},H:{groups:[[1,9]],totalDataCodewords:9,errorCodewordsPerBlock:17}},{L:{groups:[[1,34]],totalDataCodewords:34,errorCodewordsPerBlock:10},M:{groups:[[1,28]],totalDataCodewords:28,errorCodewordsPerBlock:16},Q:{groups:[[1,22]],totalDataCodewords:22,errorCodewordsPerBlock:22},H:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:28}},{L:{groups:[[1,55]],totalDataCodewords:55,errorCodewordsPerBlock:15},M:{groups:[[1,44]],totalDataCodewords:44,errorCodewordsPerBlock:26},Q:{groups:[[2,17]],totalDataCodewords:34,errorCodewordsPerBlock:18},H:{groups:[[2,13]],totalDataCodewords:26,errorCodewordsPerBlock:22}},{L:{groups:[[1,80]],totalDataCodewords:80,errorCodewordsPerBlock:20},M:{groups:[[2,32]],totalDataCodewords:64,errorCodewordsPerBlock:18},Q:{groups:[[2,24]],totalDataCodewords:48,errorCodewordsPerBlock:26},H:{groups:[[4,9]],totalDataCodewords:36,errorCodewordsPerBlock:16}},{L:{groups:[[1,108]],totalDataCodewords:108,errorCodewordsPerBlock:26},M:{groups:[[2,43]],totalDataCodewords:86,errorCodewordsPerBlock:24},Q:{groups:[[2,15],[2,16]],totalDataCodewords:62,errorCodewordsPerBlock:18},H:{groups:[[2,11],[2,12]],totalDataCodewords:46,errorCodewordsPerBlock:22}},{L:{groups:[[2,68]],totalDataCodewords:136,errorCodewordsPerBlock:18},M:{groups:[[4,27]],totalDataCodewords:108,errorCodewordsPerBlock:16},Q:{groups:[[4,19]],totalDataCodewords:76,errorCodewordsPerBlock:24},H:{groups:[[4,15]],totalDataCodewords:60,errorCodewordsPerBlock:28}},{L:{groups:[[2,78]],totalDataCodewords:156,errorCodewordsPerBlock:20},M:{groups:[[4,31]],totalDataCodewords:124,errorCodewordsPerBlock:18},Q:{groups:[[2,14],[4,15]],totalDataCodewords:88,errorCodewordsPerBlock:18},H:{groups:[[4,13],[1,14]],totalDataCodewords:66,errorCodewordsPerBlock:26}},{L:{groups:[[2,97]],totalDataCodewords:194,errorCodewordsPerBlock:24},M:{groups:[[2,38],[2,39]],totalDataCodewords:154,errorCodewordsPerBlock:22},Q:{groups:[[4,18],[2,19]],totalDataCodewords:110,errorCodewordsPerBlock:22},H:{groups:[[4,14],[2,15]],totalDataCodewords:86,errorCodewordsPerBlock:26}},{L:{groups:[[2,116]],totalDataCodewords:232,errorCodewordsPerBlock:30},M:{groups:[[3,36],[2,37]],totalDataCodewords:182,errorCodewordsPerBlock:22},Q:{groups:[[4,16],[4,17]],totalDataCodewords:132,errorCodewordsPerBlock:20},H:{groups:[[4,12],[4,13]],totalDataCodewords:100,errorCodewordsPerBlock:24}},{L:{groups:[[2,68],[2,69]],totalDataCodewords:274,errorCodewordsPerBlock:18},M:{groups:[[4,43],[1,44]],totalDataCodewords:216,errorCodewordsPerBlock:26},Q:{groups:[[6,19],[2,20]],totalDataCodewords:154,errorCodewordsPerBlock:24},H:{groups:[[6,15],[2,16]],totalDataCodewords:122,errorCodewordsPerBlock:28}},{L:{groups:[[4,81]],totalDataCodewords:324,errorCodewordsPerBlock:20},M:{groups:[[1,50],[4,51]],totalDataCodewords:254,errorCodewordsPerBlock:30},Q:{groups:[[4,22],[4,23]],totalDataCodewords:180,errorCodewordsPerBlock:28},H:{groups:[[3,12],[8,13]],totalDataCodewords:140,errorCodewordsPerBlock:24}},{L:{groups:[[2,92],[2,93]],totalDataCodewords:370,errorCodewordsPerBlock:24},M:{groups:[[6,36],[2,37]],totalDataCodewords:290,errorCodewordsPerBlock:22},Q:{groups:[[4,20],[6,21]],totalDataCodewords:206,errorCodewordsPerBlock:26},H:{groups:[[7,14],[4,15]],totalDataCodewords:158,errorCodewordsPerBlock:28}},{L:{groups:[[4,107]],totalDataCodewords:428,errorCodewordsPerBlock:26},M:{groups:[[8,37],[1,38]],totalDataCodewords:334,errorCodewordsPerBlock:22},Q:{groups:[[8,20],[4,21]],totalDataCodewords:244,errorCodewordsPerBlock:24},H:{groups:[[12,11],[4,12]],totalDataCodewords:180,errorCodewordsPerBlock:22}},{L:{groups:[[3,115],[1,116]],totalDataCodewords:461,errorCodewordsPerBlock:30},M:{groups:[[4,40],[5,41]],totalDataCodewords:365,errorCodewordsPerBlock:24},Q:{groups:[[11,16],[5,17]],totalDataCodewords:261,errorCodewordsPerBlock:20},H:{groups:[[11,12],[5,13]],totalDataCodewords:197,errorCodewordsPerBlock:24}},{L:{groups:[[5,87],[1,88]],totalDataCodewords:523,errorCodewordsPerBlock:22},M:{groups:[[5,41],[5,42]],totalDataCodewords:415,errorCodewordsPerBlock:24},Q:{groups:[[5,24],[7,25]],totalDataCodewords:295,errorCodewordsPerBlock:30},H:{groups:[[11,12],[7,13]],totalDataCodewords:223,errorCodewordsPerBlock:24}},{L:{groups:[[5,98],[1,99]],totalDataCodewords:589,errorCodewordsPerBlock:24},M:{groups:[[7,45],[3,46]],totalDataCodewords:453,errorCodewordsPerBlock:28},Q:{groups:[[15,19],[2,20]],totalDataCodewords:325,errorCodewordsPerBlock:24},H:{groups:[[3,15],[13,16]],totalDataCodewords:253,errorCodewordsPerBlock:30}},{L:{groups:[[1,107],[5,108]],totalDataCodewords:647,errorCodewordsPerBlock:28},M:{groups:[[10,46],[1,47]],totalDataCodewords:507,errorCodewordsPerBlock:28},Q:{groups:[[1,22],[15,23]],totalDataCodewords:367,errorCodewordsPerBlock:28},H:{groups:[[2,14],[17,15]],totalDataCodewords:283,errorCodewordsPerBlock:28}},{L:{groups:[[5,120],[1,121]],totalDataCodewords:721,errorCodewordsPerBlock:30},M:{groups:[[9,43],[4,44]],totalDataCodewords:563,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[1,23]],totalDataCodewords:397,errorCodewordsPerBlock:28},H:{groups:[[2,14],[19,15]],totalDataCodewords:313,errorCodewordsPerBlock:28}},{L:{groups:[[3,113],[4,114]],totalDataCodewords:795,errorCodewordsPerBlock:28},M:{groups:[[3,44],[11,45]],totalDataCodewords:627,errorCodewordsPerBlock:26},Q:{groups:[[17,21],[4,22]],totalDataCodewords:445,errorCodewordsPerBlock:26},H:{groups:[[9,13],[16,14]],totalDataCodewords:341,errorCodewordsPerBlock:26}},{L:{groups:[[3,107],[5,108]],totalDataCodewords:861,errorCodewordsPerBlock:28},M:{groups:[[3,41],[13,42]],totalDataCodewords:669,errorCodewordsPerBlock:26},Q:{groups:[[15,24],[5,25]],totalDataCodewords:485,errorCodewordsPerBlock:30},H:{groups:[[15,15],[10,16]],totalDataCodewords:385,errorCodewordsPerBlock:28}},{L:{groups:[[4,116],[4,117]],totalDataCodewords:932,errorCodewordsPerBlock:28},M:{groups:[[17,42]],totalDataCodewords:714,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[6,23]],totalDataCodewords:512,errorCodewordsPerBlock:28},H:{groups:[[19,16],[6,17]],totalDataCodewords:406,errorCodewordsPerBlock:30}},{L:{groups:[[2,111],[7,112]],totalDataCodewords:1006,errorCodewordsPerBlock:28},M:{groups:[[17,46]],totalDataCodewords:782,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[16,25]],totalDataCodewords:568,errorCodewordsPerBlock:30},H:{groups:[[34,13]],totalDataCodewords:442,errorCodewordsPerBlock:24}},{L:{groups:[[4,121],[5,122]],totalDataCodewords:1094,errorCodewordsPerBlock:30},M:{groups:[[4,47],[14,48]],totalDataCodewords:860,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[14,25]],totalDataCodewords:614,errorCodewordsPerBlock:30},H:{groups:[[16,15],[14,16]],totalDataCodewords:464,errorCodewordsPerBlock:30}},{L:{groups:[[6,117],[4,118]],totalDataCodewords:1174,errorCodewordsPerBlock:30},M:{groups:[[6,45],[14,46]],totalDataCodewords:914,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[16,25]],totalDataCodewords:664,errorCodewordsPerBlock:30},H:{groups:[[30,16],[2,17]],totalDataCodewords:514,errorCodewordsPerBlock:30}},{L:{groups:[[8,106],[4,107]],totalDataCodewords:1276,errorCodewordsPerBlock:26},M:{groups:[[8,47],[13,48]],totalDataCodewords:1e3,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[22,25]],totalDataCodewords:718,errorCodewordsPerBlock:30},H:{groups:[[22,15],[13,16]],totalDataCodewords:538,errorCodewordsPerBlock:30}},{L:{groups:[[10,114],[2,115]],totalDataCodewords:1370,errorCodewordsPerBlock:28},M:{groups:[[19,46],[4,47]],totalDataCodewords:1062,errorCodewordsPerBlock:28},Q:{groups:[[28,22],[6,23]],totalDataCodewords:754,errorCodewordsPerBlock:28},H:{groups:[[33,16],[4,17]],totalDataCodewords:596,errorCodewordsPerBlock:30}},{L:{groups:[[8,122],[4,123]],totalDataCodewords:1468,errorCodewordsPerBlock:30},M:{groups:[[22,45],[3,46]],totalDataCodewords:1128,errorCodewordsPerBlock:28},Q:{groups:[[8,23],[26,24]],totalDataCodewords:808,errorCodewordsPerBlock:30},H:{groups:[[12,15],[28,16]],totalDataCodewords:628,errorCodewordsPerBlock:30}},{L:{groups:[[3,117],[10,118]],totalDataCodewords:1531,errorCodewordsPerBlock:30},M:{groups:[[3,45],[23,46]],totalDataCodewords:1193,errorCodewordsPerBlock:28},Q:{groups:[[4,24],[31,25]],totalDataCodewords:871,errorCodewordsPerBlock:30},H:{groups:[[11,15],[31,16]],totalDataCodewords:661,errorCodewordsPerBlock:30}},{L:{groups:[[7,116],[7,117]],totalDataCodewords:1631,errorCodewordsPerBlock:30},M:{groups:[[21,45],[7,46]],totalDataCodewords:1267,errorCodewordsPerBlock:28},Q:{groups:[[1,23],[37,24]],totalDataCodewords:911,errorCodewordsPerBlock:30},H:{groups:[[19,15],[26,16]],totalDataCodewords:701,errorCodewordsPerBlock:30}},{L:{groups:[[5,115],[10,116]],totalDataCodewords:1735,errorCodewordsPerBlock:30},M:{groups:[[19,47],[10,48]],totalDataCodewords:1373,errorCodewordsPerBlock:28},Q:{groups:[[15,24],[25,25]],totalDataCodewords:985,errorCodewordsPerBlock:30},H:{groups:[[23,15],[25,16]],totalDataCodewords:745,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[3,116]],totalDataCodewords:1843,errorCodewordsPerBlock:30},M:{groups:[[2,46],[29,47]],totalDataCodewords:1455,errorCodewordsPerBlock:28},Q:{groups:[[42,24],[1,25]],totalDataCodewords:1033,errorCodewordsPerBlock:30},H:{groups:[[23,15],[28,16]],totalDataCodewords:793,errorCodewordsPerBlock:30}},{L:{groups:[[17,115]],totalDataCodewords:1955,errorCodewordsPerBlock:30},M:{groups:[[10,46],[23,47]],totalDataCodewords:1541,errorCodewordsPerBlock:28},Q:{groups:[[10,24],[35,25]],totalDataCodewords:1115,errorCodewordsPerBlock:30},H:{groups:[[19,15],[35,16]],totalDataCodewords:845,errorCodewordsPerBlock:30}},{L:{groups:[[17,115],[1,116]],totalDataCodewords:2071,errorCodewordsPerBlock:30},M:{groups:[[14,46],[21,47]],totalDataCodewords:1631,errorCodewordsPerBlock:28},Q:{groups:[[29,24],[19,25]],totalDataCodewords:1171,errorCodewordsPerBlock:30},H:{groups:[[11,15],[46,16]],totalDataCodewords:901,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[6,116]],totalDataCodewords:2191,errorCodewordsPerBlock:30},M:{groups:[[14,46],[23,47]],totalDataCodewords:1725,errorCodewordsPerBlock:28},Q:{groups:[[44,24],[7,25]],totalDataCodewords:1231,errorCodewordsPerBlock:30},H:{groups:[[59,16],[1,17]],totalDataCodewords:961,errorCodewordsPerBlock:30}},{L:{groups:[[12,121],[7,122]],totalDataCodewords:2306,errorCodewordsPerBlock:30},M:{groups:[[12,47],[26,48]],totalDataCodewords:1812,errorCodewordsPerBlock:28},Q:{groups:[[39,24],[14,25]],totalDataCodewords:1286,errorCodewordsPerBlock:30},H:{groups:[[22,15],[41,16]],totalDataCodewords:986,errorCodewordsPerBlock:30}},{L:{groups:[[6,121],[14,122]],totalDataCodewords:2434,errorCodewordsPerBlock:30},M:{groups:[[6,47],[34,48]],totalDataCodewords:1914,errorCodewordsPerBlock:28},Q:{groups:[[46,24],[10,25]],totalDataCodewords:1354,errorCodewordsPerBlock:30},H:{groups:[[2,15],[64,16]],totalDataCodewords:1054,errorCodewordsPerBlock:30}},{L:{groups:[[17,122],[4,123]],totalDataCodewords:2566,errorCodewordsPerBlock:30},M:{groups:[[29,46],[14,47]],totalDataCodewords:1992,errorCodewordsPerBlock:28},Q:{groups:[[49,24],[10,25]],totalDataCodewords:1426,errorCodewordsPerBlock:30},H:{groups:[[24,15],[46,16]],totalDataCodewords:1096,errorCodewordsPerBlock:30}},{L:{groups:[[4,122],[18,123]],totalDataCodewords:2702,errorCodewordsPerBlock:30},M:{groups:[[13,46],[32,47]],totalDataCodewords:2102,errorCodewordsPerBlock:28},Q:{groups:[[48,24],[14,25]],totalDataCodewords:1502,errorCodewordsPerBlock:30},H:{groups:[[42,15],[32,16]],totalDataCodewords:1142,errorCodewordsPerBlock:30}},{L:{groups:[[20,117],[4,118]],totalDataCodewords:2812,errorCodewordsPerBlock:30},M:{groups:[[40,47],[7,48]],totalDataCodewords:2216,errorCodewordsPerBlock:28},Q:{groups:[[43,24],[22,25]],totalDataCodewords:1582,errorCodewordsPerBlock:30},H:{groups:[[10,15],[67,16]],totalDataCodewords:1222,errorCodewordsPerBlock:30}},{L:{groups:[[19,118],[6,119]],totalDataCodewords:2956,errorCodewordsPerBlock:30},M:{groups:[[18,47],[31,48]],totalDataCodewords:2334,errorCodewordsPerBlock:28},Q:{groups:[[34,24],[34,25]],totalDataCodewords:1666,errorCodewordsPerBlock:30},H:{groups:[[20,15],[61,16]],totalDataCodewords:1276,errorCodewordsPerBlock:30}}],_A="0000",TA="alphanumeric",OA={1:0},EA={0:1},MA={15:20,16:20,18:24,19:24,22:20,24:22,26:24,28:20,30:20,31:24,32:28,33:24,36:18,37:22,39:20,40:24},PA=[1,0,1,1,1],IA=[1,0,1],DA={L:"01",M:"00",Q:"11",H:"10"},FA=["11101100","00010001"],RA=[function(t,e){return(t+e)%2==0},function(t,e){return t%2==0},function(t,e){return e%3==0},function(t,e){return(t+e)%3==0},function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0},function(t,e){return t*e%2+t*e%3==0},function(t,e){return(t*e%2+t*e%3)%2==0},function(t,e){return((t+e)%2+t*e%3)%2==0}],LA=/^\d+/,NA=new RegExp("^[A-Z $%*+./:-]+"),BA=new RegExp("^[A-Z0-9 $%*+./:-]+"),jA=new RegExp("^[^A-Z0-9 $%*+./:-]+"),zA=[[1,0],[1,25,0]];function UA(t,e,i,r){for(var n=0;n<t.length;n++)t[n][i][r]=e}function $A(t,e,i,r){for(var n=0;n<RA.length;n++)t[n][i][r]=RA[n](i,r)?1^e:parseInt(e,10)}function HA(t,e){for(var i=[],r=t.length-2;r>=0;r--)i[r]=t[r]^e[r];return i}function VA(t,e){for(var i=[],r=0;r<t.length;r++)for(var n=0;n<e.length;n++)void 0===i[r+n]?i[r+n]=(t[r]+(e[n]>=0?e[n]:0))%255:i[r+n]=OA[EA[i[r+n]]^EA[(t[r]+e[n])%255]];return i}function qA(t,e){var i=[],r=t.length-1;do{i[r]=EA[(t[r]+e)%255],r--}while(void 0!==t[r]);return i}function WA(t,e){var i,r,n=zA[e-1],o=new Array(e).concat(t),s=new Array(o.length-n.length).concat(n),a=t.length,l=[];for(r=0;r<a;r++)i=qA(s,OA[o[o.length-1]]),s.splice(0,1),o=HA(i,o);for(r=o.length-1;r>=0;r--)l[e-1-r]=fA(o[r],8);return l}function XA(t,e,i,r,n){var o,s,a=LA.exec(t),l=a?a[0]:"",c=NA.exec(t),h=c?c[0]:"",u=BA.exec(t),p=u?u[0]:"";return l&&(l.length>=e||t.length===l.length||l.length>=i&&!BA.test(t.charAt(l.length)))?(o="numeric",s=l):p&&(t.length===p.length||p.length>=r||n===TA)?(o=TA,s=l||h):(o="byte",s=p?p+jA.exec(t.substring(p.length))[0]:jA.exec(t)[0]),{mode:o,modeString:s}}function GA(t,e){var i=0,r=AA.length-1,n=Math.floor(AA.length/2);do{t<AA[n][e].totalDataCodewords?r=n:i=n,n=i+Math.floor((r-i)/2)}while(r-i>1);return t<=AA[i][e].totalDataCodewords?n+1:r+1}function KA(t,e,i){var r=gA(e),n=e.length-1,o=t<<n,s=fA(t,i-n),a=function(t,e){var i=e.toString(2).length,r=t.toString(2).length,n=t;do{r=(n^=e<<r-i).toString(2).length}while(r>=i);return n}(o,r);return a=s+fA(a,n)}function YA(t,e){return parseInt(t.charAt(e),10)}function JA(t,e){var i,r,n=t[0],o=0,s=e.length;for(i=0,r=8;i<=8;i++)6!==i&&UA(t,YA(e,s-1-o++),i,r);for(i=8,r=7;r>=0;r--)6!==r&&UA(t,YA(e,s-1-o++),i,r);for(o=0,r=n.length-1,i=8;r>=n.length-8;r--)UA(t,YA(e,s-1-o++),i,r);for(UA(t,1,n.length-8,8),i=n.length-7,r=8;i<n.length;i++)UA(t,YA(e,s-1-o++),i,r)}function ZA(t,e){for(var i,r,n,o=t[0].length,s=o-11,a=o-11,l=0;l<e.length;l++)i=Math.floor(l/3),r=l%3,UA(t,n=YA(e,e.length-l-1),0+i,s+r),UA(t,n,a+r,0+i)}function QA(t,e,i,r){for(var n,o=e.length+2,s=e.length+1,a=0;a<e.length;a++)for(var l=a;l<o-a;l++)UA(t,n=e[a],i+l,r+a),UA(t,n,i+a,r+l),UA(t,n,i+s-l,r+s-a),UA(t,n,i+s-a,r+s-l)}function t_(t,e,i,r){var n=i,o=r,s=t[0];do{UA(t,0,n,r),UA(t,0,i,o),n+=e[0],o+=e[1]}while(n>=0&&n<s.length)}function e_(t,e,i,r,n){e[t][r]=(e[t][r]<<1^n)%128,93===e[t][r]&&(i[t]+=40)}function i_(t,e,i,r,n,o){i[t][o]===r?n[t][o]++:(i[t][o]=r,n[t][o]>=5&&(e[t]+=3+n[t][o]-5),n[t][o]=1)}function r_(t,e){var i=Math.floor(t/e*100),r=i%5,n=Math.abs(i-r-50),o=Math.abs(i+5-r-50);return 10*Math.min(n/5,o/5)}function n_(t,e,i){var r=function(t){return t&&t.toLowerCase().indexOf("utf_8")>=0?new CA:new vA}(i),n=r.getEncodingResult(t,e),o=n.version,s=AA[o-1][e],a=function(t,e){for(var i,r,n,o,s,a=0,l=[],c=[],h=e.groups,u=0;u<h.length;u++){n=h[u][0];for(var p=0;p<n;p++){r=h[u][1],i=[],o=[];for(var d=1;d<=r;d++)s=t.substring(a,a+8),i.push(s),o[r-d]=gA(s),a+=8;l.push(i),c.push(WA(o,e.errorCodewordsPerBlock))}}return[l,c]}(function(t,e){for(var i=8*e,r=0,n=0,o=t;o.length<i&&r<_A.length;)o+=_A.charAt(r++);for(o.length%8!=0&&(o+=new Array(9-o.length%8).join("0"));o.length<i;)o+=FA[n],n^=1;return o}(n.dataString,s.totalDataCodewords),s),l=function(t){for(var e=[],i=17+4*t,r=0;r<RA.length;r++){e[r]=new Array(i);for(var n=0;n<i;n++)e[r][n]=new Array(i)}return e}(o);!function(t){var e=t[0].length;QA(t,PA,0,0),t_(t,[-1,-1],7,7),QA(t,PA,e-7,0),t_(t,[1,-1],e-8,7),QA(t,PA,0,e-7),t_(t,[-1,1],7,e-8)}(l),function(t,e){if(!(e<2)){var i,r,n=t[0],o=n.length,s=Math.floor(e/7),a=[6],l=0;for((i=MA[e])?r=(o-13-i)/s:i=r=(o-13)/(s+1),a.push(a[l++]+i);a[l]+r<o;)a.push(a[l++]+r);for(var c=0;c<a.length;c++)for(var h=0;h<a.length;h++)void 0===n[a[c]][a[h]]&&QA(t,IA,a[c]-2,a[h]-2)}}(l,o),function(t){for(var e=1,i=t[0].length,r=8;r<i-8;r++)UA(t,e,6,r),UA(t,e,r,6),e^=1}(l),o>=7&&ZA(l,fA(0,18)),JA(l,fA(0,15)),function(t,e){for(var i,r,n,o=new mA(t[0]),s=0;s<e.length;s++)for(i=e[s],r=0;i.length>0;){for(var a=0;a<i.length;a++)for(var l=0;l<8;l++)n=o.getNextCell(),$A(t,i[a][r].charAt(l),n.row,n.column);for(r++;i[0]&&r===i[0].length;)i.splice(0,1)}for(;n=o.getNextRemainderCell();)$A(t,0,n.row,n.column)}(l,a);var c=function(t){var e,i,r=[],n=[],o=[],s=[],a=[],l=t[0].length;for(i=0;i<t.length;i++)r[i]=0,o[i]=0,a[i]=[0,0],s[i]=[0,0],n[i]=[];for(var c=0;c<l;c++)for(var h=0;h<l;h++)for(var u=0;u<t.length;u++)e=t[u],o[u]+=parseInt(e[c][h],10),n[u][0]===e[c][h]&&c+1<l&&h-1>=0&&e[c+1][h]===n[u][0]&&e[c+1][h-1]===n[u][0]&&(r[u]+=3),e_(u,s,r,0,e[c][h]),e_(u,s,r,1,e[h][c]),i_(u,r,n,e[c][h],a,0),i_(u,r,n,e[h][c],a,1);var p,d=l*l,f=Number.MAX_VALUE;for(i=0;i<r.length;i++)r[i]+=r_(o[i],d),r[i]<f&&(f=r[i],p=i);return p}(l),h=l[c];return o>=7&&ZA([h],function(t){return KA(t,"1111100100101",18)}(o)),JA([h],function(t){var e,i="";if(0===gA(t))return"101010000010010";e=KA(gA(t),"10100110111",15);for(var r=0;r<e.length;r++)i+=e.charAt(r)^"101010000010010".charAt(r);return i}(DA[e]+fA(c,3))),h}!function(){var t,e;for(e=1;e<255;e++)(t=2*EA[e-1])>255&&(t^=285),EA[e]=t,OA[t]=e;t=2*EA[e-1]^285,EA[e]=t,EA[-1]=0}(),function(){for(var t=2;t<=68;t++){var e=zA[t-1],i=[t,0];zA[t]=VA(e,i)}}();var o_=Math.round,s_=[[0,1],[1,1],[1,2],[2,2],[2,1],[3,1],[3,0],[2,0],[2,-1],[1,-1],[1,0]],a_=[[0,1],[1,1],[1,0]],l_=200,c_="L",h_="#fff",u_="#000",p_=1,d_=7,f_=function(t){function e(e,i,r){void 0===r&&(r=Ac),t.call(this),this.options=ha({},this.options,i),this.element=e,this.wrapper=this.element,this.onError=r,this._initElement(),this._initSurface(),this.setOptions(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this._destroySurface()},e.prototype._initElement=function(){Qs(this.element,"k-qrcode")},e.prototype._initSurface=function(){var t=this.options,e=this.surface;e&&e.options.type===t.renderAs||(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())},e.prototype._createSurface=function(){return bw.create(this.surfaceElement,{type:this.options.renderAs})},e.prototype._destroySurface=function(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())},e.prototype._initSurfaceElement=function(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.surfaceElement.style.position="relative",this.element.appendChild(this.surfaceElement))},e.prototype._destroySurfaceElement=function(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)},e.prototype.redraw=function(){var t=this._getSize();this.surface.clear(),this.surface.setSize({width:t,height:t}),this.createVisual(),this.surface.draw(this.visual)},e.prototype.getSize=function(){var t=this.element,e=t.clientWidth,i=t.clientHeight,r={width:0,height:0};return e>0&&(r.width=e),i&&(r.height=i),r},e.prototype._resize=function(){this.redraw()},e.prototype.createVisual=function(){this.visual=this._render()},e.prototype.exportVisual=function(){return this._render()},e.prototype._render=function(){var t,e,i,r,n,o=this._value,s=this.options.border||{},a=this.options.padding||0,l=s.width||0;s.width=l;var c=new ku;try{o&&(i=n_(o,this.options.errorCorrection,this.options.encoding),n=(r=this._getSize())-2*(l+a),t=this._calculateBaseUnit(n,i.length),e=l+a+(n-i.length*t)/2,c.append(this._renderBackground(r,s)),c.append(this._renderMatrix(i,t,e)),this._hasCustomLogo()?c.append(this._renderLogo(r,t)):this._isSwiss()&&c.append(this._renderSwissCode(r,t)))}catch(t){this.onError(t)}return c},e.prototype._renderLogo=function(t,e){var i,r=o_(t/2),n=this._getLogoSize(e*d_),o=this.options.overlay.imageUrl,s={x:r-n.width/2,y:r-n.height/2};return i=new Uc(new Nc(s.x,s.y),new jc(n.width,n.height)),new uA(o,i)},e.prototype._renderSwissCode=function(t,e){var i=this._getLogoSize(e*d_),r=(i=Math.max(i.width,i.height))/4,n=r/2,o=t/2,s={},a=new ku;return s.x=s.y=Math.ceil(o-e-i/2),a.append(this._renderShape(s,Math.ceil(i+2*e),a_,"#fff")),s.x=s.y=o-i/2,a.append(this._renderShape(s,i,a_,this.options.color)),s.x=o+n-i/2,s.y=o+n+r-i/2,a.append(this._renderShape(s,r,s_,"#fff")),a},e.prototype._renderShape=function(t,e,i,r){var n=new uu({fill:{color:r},stroke:null});n.moveTo(t.x,t.y);for(var o=0;o<i.length;o++)n.lineTo(t.x+e*i[o][0],t.y+e*i[o][1]);return n.close(),n},e.prototype._getSize=function(){var t;if(this.options.size)t=parseInt(this.options.size,10);else{var e=aA(this.element,this.options.renderAs),i=Math.min(e.width,e.height);t=i>0?i:l_}return t},e.prototype._calculateBaseUnit=function(t,e){var i=Math.floor(t/e);if(i<p_){var r=Math.ceil(e*p_);this.onError(new Error("Insufficient size for QR Code: the current size is "+t+"px and the minimum size is "+r+"px."))}else i*e>=t&&i-1>=p_&&i--;return i},e.prototype._renderMatrix=function(t,e,i){for(var r=new uu({fill:{color:this.options.color},stroke:null}),n=0;n<t.length;n++)for(var o=i+n*e,s=0;s<t.length;){for(;0===t[n][s]&&s<t.length;)s++;if(s<t.length){for(var a=s;1===t[n][s];)s++;var l=o_(i+a*e),c=o_(o),h=o_(i+s*e),u=o_(o+e);r.moveTo(l,c).lineTo(l,u).lineTo(h,u).lineTo(h,c).close()}}return r},e.prototype._renderBackground=function(t,e){var i=new Vc(0,0,t,t).unpad(e.width/2);return hu.fromRect(i.toRect(),{fill:{color:this.options.background},stroke:{color:e.color,width:e.width}})},e.prototype.setOptions=function(t){var e=t||{};this.options=pA(this.options,e),void 0!==t.value&&(this._value=String(this.options.value)),this._initSurface(),this.redraw()},e.prototype.value=function(t){if(void 0===t)return this._value;this._value=String(t),this.redraw()},e.prototype._hasCustomLogo=function(){return Boolean(this.options.overlay.imageUrl)},e.prototype._isSwiss=function(){return"swiss"===this.options.overlay.type},e.prototype._getLogoSize=function(t){var e=this.options.overlay.width,i=this.options.overlay.height;return e||i?e&&!i?i=e:!e&&i&&(e=i):e=i=t,{width:e,height:i}},e}(ml);Zl(f_,{name:"QRCode",renderAs:"svg",encoding:"ISO_8859_1",value:"",errorCorrection:c_,background:h_,color:u_,size:"",padding:0,border:{color:"",width:0},overlay:{type:"image",imageUrl:"",width:0,height:0}});const g_=f_;var m_={WGS84:{a:6378137,b:6356752.314245179,f:.0033528106647474805,e:.08181919084262149}};function y_(t){return t*t}var v_=Math,b_=v_.abs,w_=v_.atan,x_=v_.atan2,S_=v_.cos,k_=v_.sin,C_=v_.tan,A_=function(t){function e(e,i){t.call(this),this.initProperties(),1===arguments.length?(this.lat=e[0],this.lng=e[1]):(this.lat=e,this.lng=i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){ha(this,{DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6}{1:N6}"})},e.prototype.toArray=function(){return[this.lat,this.lng]},e.prototype.equals=function(t){return t&&t.lat===this.lat&&t.lng===this.lng},e.prototype.clone=function(){return new e(this.lat,this.lng)},e.prototype.round=function(t){return this.lng=Xl(this.lng,t),this.lat=Xl(this.lat,t),this},e.prototype.wrap=function(){return this.lng=this.lng%180,this.lat=this.lat%90,this},e.prototype.distanceTo=function(t,e){return this.greatCircleTo(t,e).distance},e.prototype.destination=function(t,i,r){var n=Wl(i),o=r||m_.WGS84,s=Wl(this.lat),a=Wl(this.lng),l=t/o.a,c=v_.asin(k_(s)*S_(l)+S_(s)*k_(l)*S_(n)),h=a+x_(k_(n)*k_(l)*S_(s),S_(l)-k_(s)*k_(c));return new e(Nl(c),Nl(h))},e.prototype.greatCircleTo=function(t,i){var r=e.create(r),n=i||m_.WGS84;if(!r||this.clone().round(8).equals(r.clone().round(8)))return{distance:0,azimuthFrom:0,azimuthTo:0};for(var o,s,a,l,c,h,u,p,d=n.a,f=n.b,g=n.f,m=Wl(r.lng-this.lng),y=w_((1-g)*C_(Wl(this.lat))),v=k_(y),b=S_(y),w=w_((1-g)*C_(Wl(r.lat))),x=k_(w),S=S_(w),k=m,C=this.DISTANCE_ITERATIONS,A=!1;!A&&C-- >0;){s=k_(k),a=S_(k),l=v_.sqrt(y_(S*s)+y_(b*x-v*S*a)),p=x_(l,h=v*x+b*S*a);var _=b*S*s/l;u=0,0!==(c=1-y_(_))&&(u=h-2*v*x/c),o=k;var T=g/16*c*(4+g*(4-3*c));k=m+(1-T)*g*_*(p+T*l*(u+T*h*(2*y_(u)-1))),A=b_(k-o)<=this.DISTANCE_CONVERGENCE}var O=c*(y_(d)-y_(f))/y_(f),E=1+O/16384*(4096+O*(O*(320-175*O)-768)),M=O/1024*(256+O*(O*(74-47*O)-128)),P=M*l*(u+M/4*(h*(2*y_(u)-1)-M/6*u*(4*y_(l)-3)*(4*y_(u)-3))),I=x_(S*s,b*x-v*S*a),D=x_(b*s,-v*S+b*x*a);return{distance:Xl(f*E*(p-P),this.DISTANCE_PRECISION),azimuthFrom:Nl(I),azimuthTo:Nl(D)}},e.prototype.toString=function(){return String(this.lat)+","+String(this.lng)},e.fromLngLat=function(t){return new e(t[1],t[0])},e.fromLatLng=function(t){return new e(t[0],t[1])},e.create=function(t,i){if(Ll(t))return t instanceof e?t.clone():1===arguments.length&&2===t.length?e.fromLatLng(t):new e(t,i)},e}(ml),__=Math,T_=__.atan,O_=__.exp,E_=__.pow,M_=__.sin,P_=__.log,I_=__.tan,D_=Nc,F_=__.PI,R_=F_/2,L_=F_/4,N_=F_/180,B_=m_.WGS84,j_=function(t){function e(e){t.call(this),this.initProperties(),this._initOptions(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initOptions=function(t){this.options=ha({},this.options,t)},e.prototype.initProperties=function(){ha(this,{MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12})},e.prototype.forward=function(t,e){var i=this,r=i.options,n=r.datum.a,o=r.centralMeridian,s=Vl(t.lat,-i.MAX_LAT,i.MAX_LAT),a=e?Vl(t.lng,-i.MAX_LNG,i.MAX_LNG):t.lng,l=Wl(a-o)*n,c=i._projectLat(s);return new D_(l,c)},e.prototype._projectLat=function(t){var e=this.options.datum,i=e.e,r=e.a,n=Wl(t),o=I_(L_+n/2),s=i*M_(n),a=E_((1-s)/(1+s),i/2);return r*P_(o*a)},e.prototype.inverse=function(t,e){var i=this,r=i.options,n=r.datum.a,o=r.centralMeridian,s=t.x/(N_*n)+o,a=Vl(i._inverseY(t.y),-i.MAX_LAT,i.MAX_LAT);return e&&(s=Vl(s,-i.MAX_LNG,i.MAX_LNG)),new A_(a,s)},e.prototype._inverseY=function(t){var e,i=this,r=i.options.datum,n=r.a,o=r.e,s=o/2,a=O_(-t/n),l=R_-2*T_(a);for(e=0;e<=i.INVERSE_ITERATIONS;e++){var c=o*M_(l),h=E_((1-c)/(1+c),s),u=R_-2*T_(a*h)-l;if(l+=u,__.abs(u)<=i.INVERSE_CONVERGENCE)break}return Nl(l)},e}(ml);Zl(j_,{centralMeridian:0,datum:B_});var z_=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),ha(this,{MAX_LAT:85.0511287798})},e.prototype._projectLat=function(t){var e=this.options.datum.a,i=Wl(t),r=I_(L_+i/2);return e*P_(r)},e.prototype._inverseY=function(t){var e=this.options.datum.a,i=O_(-t/e);return Nl(R_-2*T_(i))},e}(j_),U_=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.forward=function(t){return new D_(t.lng,t.lat)},e.prototype.inverse=function(t){return new A_(t.y,t.x)},e}(ml),$_=function(t){function e(){t.call(this);var e=this._proj=new z_,i=this.c=2*F_*e.options.datum.a;this._tm=th().translate(.5,.5).scale(1/i,-1/i),this._itm=th().scale(i,-i).translate(-.5,-.5)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toPoint=function(t,e,i){return this._proj.forward(t,i).transform(this._tm).scale(e||1)},e.prototype.toLocation=function(t,e,i){var r=t.clone().scale(1/(e||1)).transform(this._itm);return this._proj.inverse(r,i)},e}(ml),H_=(function(t){function e(){t.call(this),this._proj=new j_}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toPoint=function(t){return this._proj.forward(t)},e.prototype.toLocation=function(t){return this._proj.inverse(t)}}(ml),function(t){function e(){t.call(this),this._proj=new U_}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toPoint=function(t){return this._proj.forward(t)},e.prototype.toLocation=function(t){return this._proj.inverse(t)}}(ml),Object.defineProperty),V_=(Object.assign,function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstChild}),q_=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},W_=function(t,e){e.insertBefore(t,e.firstChild)},X_=function(t){return t.replace(/([a-z][A-Z])/g,(function(t){return t.charAt(0)+"-"+t.charAt(1).toLowerCase()}))},G_=function(t){return t&&String(t).endsWith("px")?t:String(t)+"px"},K_=function(t){var e,i=!1,r=[],n={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.?(\d+(\.\d+)?)?/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},o={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},s={tablet:/playbook|ipad|fire/i},a={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i};for(var l in n)if(n.hasOwnProperty(l)&&(r=t.match(n[l]))){if("windows"===l&&"plugins"in navigator)return!1;(i={}).device=l,i.tablet=Y_(l,s,!1),i.browser=Y_(t,a,"default"),i.name=Y_(l,o),i[i.name]=!0,i.majorVersion=r[2],i.minorVersion=(r[3]||"0").replace("_","."),e=i.minorVersion.replace(".","").substr(0,2),i.flatVersion=i.majorVersion+e+new Array(3-(e.length<3?e.length:2)).join("0");break}return i};function Y_(t,e,i){for(var r in e)if(e.hasOwnProperty(r)&&e[r].test(t))return r;return void 0!==i?i:t}var J_=function(){var t={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"},e=Z_();return e.touch&&(e.mobileOS.ios||e.mobileOS.android)?t={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}:e.pointers?t={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"}:e.msPointers&&(t={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"}),t},Z_=function(){var t=K_(navigator.userAgent),e=function(t){var e=!1,i=[],r={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome|crios)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var n in r)if(r.hasOwnProperty(n)&&(i=t.match(r[n]))){(e={})[n]=!0,e[i[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,e.version=parseInt(document.documentMode||i[2],10);break}return e}(navigator.userAgent),i=e.chrome,r=e.crios,n=e.mozilla,o=e.safari,s={};s.mobileOS=t,s.touch="ontouchstart"in window,s.pointers=!i&&!r&&!n&&!o&&window.PointerEvent,s.msPointers=!i&&window.MSPointerEvent,s.mouseAndTouchPresent=s.touch&&!(s.mobileOS.ios||s.mobileOS.android),s.eventCapture=document.documentElement.addEventListener;var a=document.createElement("table"),l=s.transitions=!1,c=s.transforms=!1,h="string";return["Moz","webkit","O","ms"].forEach((function(t){var e=typeof a.style[t+"Transition"]===h;if(e||typeof a.style[t+"Transform"]===h){var i=t.toLowerCase();return c={css:"ms"!==i?"-"+i+"-":"",prefix:t,event:"o"===i||"webkit"===i?i:""},e&&((l=c).event=l.event?l.event+"TransitionEnd":"transitionend"),!1}})),a=null,s.transforms=c,s.transitions=l,s.delayedClick=function(){if(s.touch){if(s.mobileOS.ios)return!0;if(s.mobileOS.android){if(!s.browser.chrome)return!0;if(s.browser.version<32)return!1;var t=document.querySelector("meta[name=viewport]");return!(t?t.getAttribute("content"):"").match(/user-scalable=no/i)}}return!1},s},Q_=function(t,e){return t.bind(e)};var tT=function(t,e,i,r,n){eT(t,e,i,r,n)},eT=function(t,e,i,r,n){(Zs(e)?e:(e||"").split(" ")).forEach((function(e){iT(t,e,i,r,n)}))},iT=function(t,e,i,r,n){var o,s=r;i&&aa(i)&&!r?s=i:i&&"string"==typeof i&&aa(s)&&(o=i),t.addEventListener(e,(function(e){var i=e.target?e.target.closest(o):null;if(!o||o&&e.target&&i){var r=o?i:e.currentTarget;H_(e,"currentTarget",{value:r}),H_(e,"delegateTarget",{value:t}),s(e)}}),Boolean(n))},rT=function(t,e,i,r,n){nT(t,e,i,r,n)},nT=function(t,e,i,r){(Zs(e)?e:(e||"").split(" ")).forEach((function(e){oT(t,e,i,r)}))},oT=function(t,e,i,r){t.removeEventListener(e,i,Boolean(r))},sT=function(t){var e=J_(navigator.userAgent);return t.replace(/([^ ]+)/g,(function(t){return e[t]||t}))},aT=function(t,e){var i=t.prototype;i.events?e.forEach((function(t){i.events.indexOf(t)<0&&i.events.push(t)})):i.events=e},lT=function(){return Number(new Date)},cT=function(){},hT="string",uT="function",pT=function(){this._defaultPrevented=!0},dT=function(){return!0===this._defaultPrevented},fT=function(t){function e(){t.call(this),this._events={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.unbind()},e.prototype.bind=function(t,e,i){var r,n,o,s,a=this,l=typeof t===hT?[t]:t||[],c=typeof e===uT;if(void 0===e){for(r in t)a.bind(r,t[r]);return a}var h=function(){var t=l[r];(s=c?e:e[t])&&(i&&(o=s,s=function(){a.unbind(t,s),o.apply(a,arguments)},s.original=o),(a._events[t]=a._events[t]||[]).push(s))};for(r=0,n=l.length;r<n;r++)h();return a},e.prototype.one=function(t,e){return this.bind(t,e,!0)},e.prototype.first=function(t,e){var i,r,n,o=this,s=typeof t===hT?[t]:t,a=typeof e===uT;for(i=0,r=s.length;i<r;i++){var l=s[i];(n=a?e:e[l])&&(o._events[l]=o._events[l]||[]).unshift(n)}return o},e.prototype.trigger=function(t,e){var i,r,n=this,o=n._events[t];if(o){var s=e||{};for(s.sender=n,s._defaultPrevented=!1,s.preventDefault=pT,s.isDefaultPrevented=dT,i=0,r=(o=o.slice()).length;i<r;i++)o[i].call(n,s);return!0===s._defaultPrevented}return!1},e.prototype.unbind=function(t,e){var i,r=this,n=r._events[t];if(void 0===t)r._events={};else if(n)if(e)for(i=n.length-1;i>=0;i--)n[i]!==e&&n[i].original!==e||n.splice(i,1);else r._events[t]=[];return r},e.prototype._setEvents=function(t){for(var e=this,i=(this.events||[]).length,r=0;r<i;r++){var n=e.events[r];e.options[n]&&t[n]&&(e.unbind(n,e.options[n]),e._events&&e._events[n]&&delete e._events[n])}this.bind(this.events,t)},e}(ml),gT=function(t){function e(e,i){t.call(this),this.element=e,this._initOptions(i),this.items=[],Qs(this.element,"k-widget k-attribution")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initOptions=function(t){this.options=ha({},this.options,t)},e.prototype.filter=function(t,e){this._extent=t,this._zoom=e,this._render()},e.prototype.add=function(t){var e=t;Ll(t)&&("string"==typeof t&&(e={text:t}),this.items.push(e),this._render())},e.prototype.remove=function(t){for(var e=[],i=0;i<this.items.length;i++){var r=this.items[i];r.text!==t&&e.push(r)}this.items=e,this._render()},e.prototype.clear=function(){this.items=[],q_(this.element)},e.prototype._render=function(){for(var t=[],e=0;e<this.items.length;e++){var i=this.items[e],r=this._itemText(i);""!==r&&t.push(r)}t.length>0?(q_(this.element),function(t,e){var i=document.createElement("div");for(i.innerHTML=t;i.childNodes.length>0;)e.appendChild(i.childNodes[0])}(t.join(this.options.separator),this.element),this.showElement()):this.hideElement()},e.prototype.hideElement=function(){this.element.style.display="none"},e.prototype.showElement=function(){this.element.style.display=""},e.prototype._itemText=function(t){var e="",i=this._inZoomLevel(t.minZoom,t.maxZoom),r=this._inArea(t.extent);return i&&r&&(e+=t.text),e},e.prototype._inZoomLevel=function(t,e){var i=Kl(t,-Number.MAX_VALUE),r=Kl(e,Number.MAX_VALUE);return this._zoom>i&&this._zoom<r},e.prototype._inArea=function(t){var e=!0;return t&&(e=t.contains(this._extent)),e},e}(fT);Zl(gT,{name:"Attribution",separator:"&nbsp;|&nbsp;"});var mT={up:{className:"k-navigator-n",iconClass:"k-i-caret-alt-up"},down:{className:"k-navigator-s",iconClass:"k-i-caret-alt-down"},right:{className:"k-navigator-e",iconClass:"k-i-caret-alt-right"},left:{className:"k-navigator-w",iconClass:"k-i-caret-alt-left"}};function yT(t){var e='<button class="k-button k-button-square k-rounded-full k-button-flat k-button-flat-base k-icon-button '+mT[t].className+'" aria-label="move '+t+'"><span class="k-icon '+mT[t].iconClass+'" /></button>';return V_(e)}var vT=function(t){function e(e,i){t.call(this),this.element=e,this._initOptions(i);var r=yT("up"),n=yT("right"),o=yT("down"),s=yT("left");this.element.appendChild(r),this.element.appendChild(n),this.element.appendChild(o),this.element.appendChild(s),Qs(this.element,"k-widget k-navigator"),tT(this.element,"click",".k-button",Q_(this._click,this));var a=this.element.parentNode.closest("[data-role]");this._keyroot=a||this.element,this._tabindex(this._keyroot),this._keydownHandler=Q_(this._keydown,this),tT(this._keyroot,"keydown",this._keydownHandler)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.dispose()},e.prototype.dispose=function(){rT(this._keyroot,"keydown",this._keydownHandler)},e.prototype._tabindex=function(t){var e=t||this.wrapper||this.element,i=this.element,r="tabindex",n=e.getAttribute(r)||i.getAttribute(r);i.removeAttribute(r),e.setAttribute(r,isNaN(n)?0:n)},e.prototype._initOptions=function(t){this.options=ha({},this.options,t)},e.prototype._pan=function(t,e){var i=this.options.panStep;this.trigger("pan",{x:t*i,y:e*i})},e.prototype._click=function(t){var e=0,i=0,r=t.currentTarget;r.matches(".k-navigator-n")?i=1:r.matches(".k-navigator-s")?i=-1:r.matches(".k-navigator-e")?e=1:r.matches(".k-navigator-w")&&(e=-1),this._pan(e,i),t.preventDefault()},e.prototype._keydown=function(t){switch(t.which){case _c.UP:this._pan(0,1),t.preventDefault();break;case _c.DOWN:this._pan(0,-1),t.preventDefault();break;case _c.RIGHT:this._pan(1,0),t.preventDefault();break;case _c.LEFT:this._pan(-1,0),t.preventDefault()}},e}(fT);function bT(t,e){return V_('<button class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-zoom-'+t+'" title="zoom-'+t+'" aria-label="zoom-'+t+'"><span class="k-icon '+e+'"></span></button>')}Zl(vT,{name:"Navigator",panStep:1}),aT(vT,["pan"]);var wT="change",xT=function(t){function e(e,i){t.call(this),this.element=e,this._initOptions(i);var r=bT("in","k-i-plus"),n=bT("out","k-i-minus");this.element.appendChild(r),this.element.appendChild(n),Qs(this.element,"k-widget k-zoom-control k-button-group k-group-horizontal"),this._clickHandler=this._click.bind(this),tT(this.element,"click",".k-button",this._clickHandler);var o=this.element.parentNode.closest("[data-role]");this._keyroot=o||this.element,this._tabindex(this._keyroot),this._keydownHandler=this._keydown.bind(this),tT(this._keyroot,"keydown",this._keydownHandler)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.element&&rT(this.element,"click",this._clickHandler),this._keyroot&&rT(this._keyroot,"keydown",this._keydownHandler)},e.prototype._tabindex=function(t){var e=t||this.wrapper||this.element,i=this.element,r="tabindex",n=e.getAttribute(r)||i.getAttribute(r);i.removeAttribute(r),e.setAttribute(r,isNaN(n)?0:n)},e.prototype._initOptions=function(t){this.options=ha({},this.options,t)},e.prototype._change=function(t){var e=this.options.zoomStep;this.trigger(wT,{delta:t*e})},e.prototype._click=function(t){var e=1;Aa(t.currentTarget,"k-zoom-out")&&(e=-1),this._change(e),t.preventDefault()},e.prototype._keydown=function(t){switch(t.which){case _c.NUMPAD_PLUS:case 187:case 61:this._change(1);break;case _c.NUMPAD_MINUS:case 189:case 173:this._change(-1)}},e}(fT);Zl(xT,{name:"ZoomControl",zoomStep:1}),aT(xT,[wT]);var ST=Math,kT=ST.max,CT=ST.min,AT=function(t){function e(e,i){t.call(this);var r=A_.create(e),n=A_.create(i);r.lng+180>n.lng+180&&r.lat+90<n.lat+90?(this.se=r,this.nw=n):(this.se=n,this.nw=r)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={World:{configurable:!0}};return e.prototype.contains=function(t){var e=this.nw,i=this.se,r=Kl(t.lng,t[1]),n=Kl(t.lat,t[0]);return t&&r+180>=e.lng+180&&r+180<=i.lng+180&&n+90>=i.lat+90&&n+90<=e.lat+90},e.prototype.center=function(){var t=this.nw,e=this.se,i=t.lng+(e.lng-t.lng)/2,r=t.lat+(e.lat-t.lat)/2;return new A_(r,i)},e.prototype.containsAny=function(t){for(var e=!1,i=0;i<t.length;i++)e=e||this.contains(t[i]);return e},e.prototype.include=function(t){var e=this.nw,i=this.se,r=Kl(t.lng,t[1]),n=Kl(t.lat,t[0]);e.lng=CT(e.lng,r),e.lat=kT(e.lat,n),i.lng=kT(i.lng,r),i.lat=CT(i.lat,n)},e.prototype.includeAll=function(t){for(var e=0;e<t.length;e++)this.include(t[e])},e.prototype.edges=function(){var t=this.nw,e=this.se;return{nw:this.nw,ne:new A_(t.lat,e.lng),se:this.se,sw:new A_(e.lat,t.lng)}},e.prototype.toArray=function(){var t=this.nw,e=this.se;return[t,new A_(t.lat,e.lng),e,new A_(e.lat,t.lng)]},e.prototype.overlaps=function(t){return this.containsAny(t.toArray())||t.containsAny(this.toArray())},e.create=function(t,i){return t instanceof e?t:t&&i?new e(t,i):t&&4===t.length&&!i?new e([t[0],t[1]],[t[2],t[3]]):void 0},i.World.get=function(){return new e([90,-180],[-90,180])},Object.defineProperties(e,i),e}(ml),_T="centerChange",TT=function(t){function e(e,i){t.call(this),this.widgetService=e,this.options=ha({},this.options,i),this.offset={x:0,y:0}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={anchor:{configurable:!0}};return e.prototype.show=function(t,e){this.location!==e.location&&(this.anchor=t,this.location=e.location,this.widgetService.notify("showTooltip",Object.assign({anchor:this.anchor},e)),this.visible=!0)},e.prototype.hide=function(){this.widgetService&&this.widgetService.notify("hideTooltip"),this.visible=!1,this.location=null},i.anchor.get=function(){return this._anchor},i.anchor.set=function(t){var e=this.widgetService.widget._toDocumentCoordinates({x:t.left-this.offset.x,y:t.top-this.offset.y});this._anchor={left:e.left,top:e.top}},e.prototype.destroy=function(){this.widgetService=null},Object.defineProperties(e.prototype,i),e}(ml);Zl(TT,{border:{width:1},opacity:1});var OT=function(t){function e(e,i){t.call(this),this.support=Z_(),this._initOptions(i),this.map=e;var r=document.createElement("div");Qs(r,"k-layer"),r.style.zIndex=this.options.zIndex,r.style.opacity=this.options.opacity,this.element=r,e.scrollElement.appendChild(this.element),this._beforeReset=this._beforeReset.bind(this),this._reset=this._reset.bind(this),this._resize=this._resize.bind(this),this._panEnd=this._panEnd.bind(this),this._activate(),this._updateAttribution()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this._deactivate()},e.prototype._initOptions=function(t){this.options=ha({},this.options,t)},e.prototype.show=function(){this.reset(),this._activate(),this._applyExtent(!0)},e.prototype.hide=function(){this._deactivate(),this._setVisibility(!1)},e.prototype.reset=function(){this._beforeReset(),this._reset()},e.prototype._reset=function(){this._applyExtent()},e.prototype._beforeReset=function(){},e.prototype._resize=function(){},e.prototype._panEnd=function(){this._applyExtent()},e.prototype._applyExtent=function(){var t=this.options,e=this.map.zoom(),i=!Ll(t.minZoom)||e>=t.minZoom,r=!Ll(t.maxZoom)||e<=t.maxZoom,n=AT.create(t.extent),o=!n||n.overlaps(this.map.extent());this._setVisibility(i&&r&&o)},e.prototype._setVisibility=function(t){this.element.style.display=t?"":"none"},e.prototype._activate=function(){var t=this.map;this._deactivate(),t.bind("beforeReset",this._beforeReset),t.bind("reset",this._reset),t.bind("resize",this._resize),t.bind("panEnd",this._panEnd)},e.prototype._deactivate=function(){var t=this.map;t.unbind("beforeReset",this._beforeReset),t.unbind("reset",this._reset),t.unbind("resize",this._resize),t.unbind("panEnd",this._panEnd)},e.prototype._updateAttribution=function(){var t=this.map.attribution;t&&t.add(this.options.attribution)},e.prototype._readData=function(){return this.options.data||[]},e.prototype._hasData=function(){return this._data&&this._data.length>0},e.prototype._layerIndex=function(){return(this.map.layers||[]).indexOf(this)},e}(ml),ET=Math,MT=Nc;function PT(t){return aa(t)?t:ba.compile(t)}function IT(t){return new MT(Xl(t.x),Xl(t.y))}function DT(t){var e=t;return"string"!=typeof t&&(e+="px"),e}var FT=function(t){function e(e,i){t.call(this,e,i),"string"==typeof this.options.subdomains&&(this.options.subdomains=this.options.subdomains.split(""));var r=this._viewType();this._view=new r(this.element,this.options)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){t.prototype.destroy.call(this),this._view.destroy(),this._view=null},e.prototype._beforeReset=function(){var t=this.map,e=t.locationToLayer(t.extent().nw).round();this._view.viewOrigin(e)},e.prototype._reset=function(){t.prototype._reset.call(this),this._updateView(),this._view.reset()},e.prototype._viewType=function(){return RT},e.prototype._activate=function(){t.prototype._activate.call(this),this.support.mobileOS||(this._pan||(this._pan=Bb(this._render.bind(this),100)),this.map.bind("pan",this._pan))},e.prototype._deactivate=function(){t.prototype._deactivate.call(this),this._pan&&this.map.unbind("pan",this._pan)},e.prototype._updateView=function(){var t=this._view,e=this.map,i=e.extent(),r={nw:e.locationToLayer(i.nw).round(),se:e.locationToLayer(i.se).round()};t.center(e.locationToLayer(e.center())),t.extent(r),t.zoom(e.zoom())},e.prototype._resize=function(){this._render()},e.prototype._panEnd=function(e){t.prototype._panEnd.call(this,e),this._render()},e.prototype._render=function(){this._updateView(),this._view.render()},e}(OT);Zl(FT,{tileSize:256,subdomains:["a","b","c"],urlTemplate:"",zIndex:1});var RT=function(t){function e(e,i){t.call(this),this.element=e,this._initOptions(i),this.pool=new NT}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initOptions=function(t){this.options=ha({},this.options,t)},e.prototype.center=function(t){this._center=t},e.prototype.extent=function(t){this._extent=t},e.prototype.viewOrigin=function(t){this._viewOrigin=t},e.prototype.zoom=function(t){this._zoom=t},e.prototype.pointToTileIndex=function(t){return new MT(ET.floor(t.x/this.options.tileSize),ET.floor(t.y/this.options.tileSize))},e.prototype.tileCount=function(){var t=this.size(),e=this.pointToTileIndex(this._extent.nw),i=this._extent.nw,r=this.indexToPoint(e).translate(-i.x,-i.y);return{x:ET.ceil((ET.abs(r.x)+t.width)/this.options.tileSize),y:ET.ceil((ET.abs(r.y)+t.height)/this.options.tileSize)}},e.prototype.size=function(){var t=this._extent.nw,e=this._extent.se.clone().translate(-t.x,-t.y);return{width:e.x,height:e.y}},e.prototype.indexToPoint=function(t){var e=t.x,i=t.y;return new MT(e*this.options.tileSize,i*this.options.tileSize)},e.prototype.subdomainText=function(){var t=this.options.subdomains;return t[this.subdomainIndex++%t.length]},e.prototype.destroy=function(){q_(this.element),this.pool.empty()},e.prototype.reset=function(){this.pool.reset(),this.subdomainIndex=0,this.render()},e.prototype.render=function(){var t,e,i,r=this.tileCount(),n=this.pointToTileIndex(this._extent.nw);for(e=0;e<r.x;e++)for(i=0;i<r.y;i++)(t=this.createTile({x:n.x+e,y:n.y+i})).visible||t.show()},e.prototype.createTile=function(t){var e=this.tileOptions(t),i=this.pool.get(this._center,e);return i.element.parentNode||this.element.append(i.element),i},e.prototype.tileOptions=function(t){var e=this.wrapIndex(t),i=this.indexToPoint(t),r=this._viewOrigin,n=i.clone().translate(-r.x,-r.y);return{index:e,currentIndex:t,point:i,offset:IT(n),zoom:this._zoom,size:this.options.tileSize,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate}},e.prototype.wrapIndex=function(t){var e=ET.pow(2,this._zoom);return{x:this.wrapValue(t.x,e),y:Vl(t.y,0,e-1)}},e.prototype.wrapValue=function(t,e){var i=ET.abs(t)%e;return t>=0?i:e-(0===i?e:i)},e}(ml),LT=function(t){function e(e,i){t.call(this),this.id=e,this.visible=!0,this._initOptions(i),this.createElement(),this.show()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){var t=this.element,e=t?t.parentNode:null;t&&(e&&e.removeChild(t),this.element=null)},e.prototype._initOptions=function(t){this.options=ha({},this.options,t)},e.prototype.createElement=function(){var t=document.createElement("img"),e=this.options.size+"px";t.style.position="absolute",t.style.display="block",t.style.width=t.style.maxWidth=e,t.style.height=t.style.maxHeight=e,this.element=t},e.prototype.show=function(){var t=this.element;t.style.top=DT(this.options.offset.y),t.style.left=DT(this.options.offset.x);var e=this.url();e&&t.setAttribute("src",e),t.style.visibility="visible",this.visible=!0},e.prototype.hide=function(){this.element.style.visibility="hidden",this.visible=!1},e.prototype.url=function(){return PT(this.options.urlTemplate)(this.urlOptions())},e.prototype.errorUrl=function(){return PT(this.options.errorUrlTemplate)(this.urlOptions())},e.prototype.urlOptions=function(){var t=this.options;return{zoom:t.zoom,subdomain:t.subdomain,z:t.zoom,x:t.index.x,y:t.index.y,s:t.subdomain,quadkey:t.quadkey,q:t.quadkey,culture:t.culture,c:t.culture}},e}(ml);Zl(LT,{urlTemplate:"",errorUrlTemplate:""});var NT=function(t){function e(){t.call(this),this._items=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._items.length>=this.options.maxSize&&this._remove(t),this._create(e)},e.prototype.empty=function(){for(var t=this._items,e=0;e<t.length;e++)t[e].destroy();this._items=[]},e.prototype.reset=function(){for(var t=this._items,e=0;e<t.length;e++)t[e].hide()},e.prototype._create=function(t){for(var e,i=this._items,r=$l(t.point.toString()+t.offset.toString()+t.zoom+t.urlTemplate),n=0;n<i.length;n++)if(i[n].id===r){e=i[n];break}return e?e.show():(e=new LT(r,t),this._items.push(e)),e},e.prototype._remove=function(t){for(var e=this._items,i=-1,r=-1,n=0;n<e.length;n++){var o=e[n].options.point.distanceTo(t);o>i&&!e[n].visible&&(r=n,i=o)}-1!==r&&(e[r].destroy(),e.splice(r,1))},e}(ml);Zl(NT,{maxSize:100});var BT=Object.assign,jT="change",zT=function(t){function e(e,i){t.call(this);var r=this,n=e[0]||e;r.capture=!1;var o=J_(navigator.userAgent);n.addEventListener?(o.down.split(" ").forEach((function(t){n.addEventListener(t,Q_(r._press,r),!0)})),o.up.split(" ").forEach((function(t){n.addEventListener(t,Q_(r._release,r),!0)}))):(o.down.split(" ").forEach((function(t){n.attachEvent(t,Q_(r._press,r))})),o.up.split(" ").forEach((function(t){n.attachEvent(t,Q_(r._release,r))}))),r.bind(["press","release"],i||{})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.captureNext=function(){this.capture=!0},e.prototype.cancelCapture=function(){this.capture=!1},e.prototype._press=function(t){this.trigger("press"),this.capture&&t.preventDefault()},e.prototype._release=function(t){var e=this;e.trigger("release"),e.capture&&(t.preventDefault(),e.cancelCapture())},e}(fT),UT=function(t){function e(e){t.call(this);var i=this;i.forcedEnabled=!1,BT(i,e),i.scale=1,i.horizontal?(i.measure="offsetWidth",i.scrollSize="scrollWidth",i.axis="x"):(i.measure="offsetHeight",i.scrollSize="scrollHeight",i.axis="y")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.makeVirtual=function(){BT(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})},e.prototype.virtualSize=function(t,e){this._virtualMin===t&&this._virtualMax===e||(this._virtualMin=t,this._virtualMax=e,this.update())},e.prototype.outOfBounds=function(t){return t>this.max||t<this.min},e.prototype.forceEnabled=function(){this.forcedEnabled=!0},e.prototype.getSize=function(){return this.container[this.measure]},e.prototype.getTotal=function(){return this.element[this.scrollSize]},e.prototype.rescale=function(t){this.scale=t},e.prototype.update=function(t){var e=this,i=e.virtual?e._virtualMax:e.getTotal(),r=i*e.scale,n=e.getSize();(0!==i||e.forcedEnabled)&&(e.max=e.virtual?-e._virtualMin:0,e.size=n,e.total=r,e.min=Math.min(e.max,n-r),e.minScale=n/i,e.centerOffset=(r-n)/2,e.enabled=e.forcedEnabled||r>n,t||e.trigger(jT,e))},e}(fT),$T=function(t){function e(e){t.call(this);var i=this;i.x=new UT(BT({horizontal:!0},e)),i.y=new UT(BT({horizontal:!1},e)),i.container=e.container,i.forcedMinScale=e.minScale,i.maxScale=e.maxScale||100,i.bind(jT,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.rescale=function(t){this.x.rescale(t),this.y.rescale(t),this.refresh()},e.prototype.centerCoordinates=function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},e.prototype.refresh=function(){var t=this;t.x.update(),t.y.update(),t.enabled=t.x.enabled||t.y.enabled,t.minScale=t.forcedMinScale||Math.min(t.x.minScale,t.y.minScale),t.fitScale=Math.max(t.x.minScale,t.y.minScale),t.trigger(jT)},e}(fT),HT=function(t){function e(e){t.call(this),BT(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.outOfBounds=function(){return this.dimension.outOfBounds(this.movable[this.axis])},e.prototype.dragMove=function(t){var e=this,i=e.dimension,r=e.axis,n=e.movable,o=n[r]+t;if(i.enabled){var s=t;(o<i.min&&t<0||o>i.max&&t>0)&&(s*=e.resistance),n.translateAxis(r,s),e.trigger(jT,e)}},e}(fT),VT=function(t){function e(e){t.call(this);var i,r,n,o,s=this;BT(s,{elastic:!0},e),n=s.elastic?.5:0,o=s.movable,s.x=i=new HT({axis:"x",dimension:s.dimensions.x,resistance:n,movable:o}),s.y=r=new HT({axis:"y",dimension:s.dimensions.y,resistance:n,movable:o}),s.userEvents.bind(["press","move","end","gesturestart","gesturechange"],{gesturestart:function(t){s.gesture=t,s.offset=Bl(s.dimensions.container)},press:function(t){var e=t.event.target.closest("a");e&&e.matches("[data-navigate-on-press=true]")&&t.sender.cancel()},gesturechange:function(t){var e,n=s.gesture,a=n.center,l=t.center,c=t.distance/n.distance,h=s.dimensions.minScale,u=s.dimensions.maxScale;o.scale<=h&&c<1&&(c+=.8*(1-c)),o.scale*c>=u&&(c=u/o.scale);var p=o.x+s.offset.left,d=o.y+s.offset.top;e={x:(p-a.x)*c+l.x-p,y:(d-a.y)*c+l.y-d},o.scaleWith(c),i.dragMove(e.x),r.dragMove(e.y),s.dimensions.rescale(o.scale),s.gesture=t,t.preventDefault()},move:function(t){t.event.target.tagName.match(/textarea|input/i)||(i.dimension.enabled||r.dimension.enabled?(i.dragMove(t.x.delta),r.dragMove(t.y.delta),t.preventDefault()):t.touch.skip())},end:function(t){t.preventDefault()}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ml),qT=function(t,e,i){return"translate3d("+t+"px,"+e+"px,0) scale("+i+")"},WT=function(t){function e(e){t.call(this);var i=this;i.support=Z_(),this.transformStyle=this.support.transitions.prefix+"Transform",i.element=e,i.element.style.webkitTransformOrigin="left top",i.x=0,i.y=0,i.scale=1;var r=qT(i.x,i.y,i.scale);i.element.style[this.transformStyle]=r,i._saveCoordinates(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.translateAxis=function(t,e){this[t]+=e,this.refresh()},e.prototype.scaleTo=function(t){this.scale=t,this.refresh()},e.prototype.scaleWith=function(t){this.scale*=t,this.refresh()},e.prototype.translate=function(t){this.x+=t.x,this.y+=t.y,this.refresh()},e.prototype.moveAxis=function(t,e){this[t]=e,this.refresh()},e.prototype.moveTo=function(t){BT(this,t),this.refresh()},e.prototype.refresh=function(){var t,e=this,i=e.x,r=e.y;e.round&&(i=Math.round(i),r=Math.round(r)),(t=qT(i,r,e.scale))!==e.coordinates&&(e.element.style[this.transformStyle]=t,e._saveCoordinates(t),e.trigger(jT))},e.prototype._saveCoordinates=function(t){this.coordinates=t},e}(fT),XT=ku,GT=function(t){function e(e,i){t.call(this,e,i),this._pan=Q_(this._pan,this),this.surface=bw.create(this.element,{width:e.scrollElement.clientWidth,height:e.scrollElement.clientHeight}),this._initRoot(),this.movable=new WT(this.surface.element),this._markers=[],this._click=this._handler("shapeClick"),this.surface.bind("click",this._click),this._mouseleave=this._handler("shapeMouseLeave"),this.surface.bind("mouseleave",this._mouseleave),this.surface.bind("mouseenter",this._mouseenter.bind(this))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){t.prototype.destroy.call(this),this.surface.destroy()},e.prototype._reset=function(){t.prototype._reset.call(this),this._translateSurface(),this._data=this._readData(),this._hasData()&&this._load(this._data)},e.prototype._initRoot=function(){this._root=new XT,this.surface.draw(this._root)},e.prototype._beforeReset=function(){this.surface.clear(),this._initRoot()},e.prototype._resize=function(){this.surface.size(this.map.size())},e.prototype._readData=function(){var e=t.prototype._readData.call(this);return"FeatureCollection"===e.type?e.features:"GeometryCollection"===e.type?e.geometries:e},e.prototype._load=function(t){this._data=t,this._clearMarkers(),this._loader||(this._loader=new KT(this.map,this.options.style,this));for(var e=new XT,i=0;i<t.length;i++){var r=this._loader.parse(t[i]);r&&e.append(r)}this._root.clear(),this._root.append(e)},e.prototype.shapeCreated=function(t){var e=!1;if(t instanceof wu&&this.map.options.renderPointsAsMarkers&&(e=Ll(this._createMarker(t))),!e){var i={layer:this,shape:t};e=this.map.trigger("shapeCreated",i)}return e},e.prototype.featureCreated=function(t){t.layer=this,this.map.trigger("shapeFeatureCreated",t)},e.prototype._createMarker=function(t){var e=this.map.markers.bind({location:t.location},t.dataItem);return e&&this._markers.push(e),e},e.prototype._clearMarkers=function(){for(var t=0;t<this._markers.length;t++)this.map.markers.remove(this._markers[t]);this._markers=[]},e.prototype._pan=function(){this._panning||(this._panning=!0,this.surface.suspendTracking())},e.prototype._panEnd=function(e){t.prototype._panEnd.call(this,e),this._translateSurface(),this.surface.resumeTracking(),this._panning=!1},e.prototype._translateSurface=function(){var t=this.map,e=t.locationToView(t.extent().nw);this.surface.translate&&(this.surface.translate(e),this.movable.moveTo({x:e.x,y:e.y}))},e.prototype._eventArgs=function(t){return{layer:this,layerIndex:this._layerIndex(),shape:t.element,shapeIndex:(this._data||[]).indexOf(t.element.dataItem),originalEvent:t.originalEvent}},e.prototype._handler=function(t){var e=this;return function(i){i.element&&e.map.trigger(t,e._eventArgs(i))}},e.prototype._mouseenter=function(t){if(t.element){this.map.trigger("shapeMouseEnter",this._eventArgs(t));var e=t.element,i=this._tooltipAnchor(t);this.map._tooltip.show(i,this._tooltipContext(e))}},e.prototype._tooltipContext=function(t){return{type:"shape",layerIndex:this._layerIndex(),className:"k-map-shape-tooltip",dataItem:t.dataItem,location:t.location}},e.prototype._tooltipAnchor=function(t){var e=this.map.eventOffset(t.originalEvent);return{top:e.y,left:e.x}},e.prototype._activate=function(){t.prototype._activate.call(this),this._panHandler=Q_(this._pan,this),this.map.bind("pan",this.panHandler)},e.prototype._deactivate=function(){t.prototype._deactivate.call(this),this.map.unbind("pan",this._panHandler)},e}(OT);Zl(GT,{autoBind:!0,zIndex:100});var KT=function(t){function e(e,i,r){t.call(this),this.observer=r,this.locator=e,this.style=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parse=function(t){var e=new XT,i=!0;return"Feature"===t.type?(i=!1,this._loadGeometryTo(e,t.geometry,t),this._featureCreated(e,t)):this._loadGeometryTo(e,t,t),i&&e.children.length<2&&(e=e.children[0]),e},e.prototype._shapeCreated=function(t){var e=!1;return this.observer&&this.observer.shapeCreated&&(e=this.observer.shapeCreated(t)),e},e.prototype._featureCreated=function(t,e){this.observer&&this.observer.featureCreated&&this.observer.featureCreated({group:t,dataItem:e,properties:e.properties})},e.prototype._loadGeometryTo=function(t,e,i){var r,n,o=this,s=e.coordinates;switch(e.type){case"LineString":n=this._loadPolygon(t,[s],i),this._setLineFill(n);break;case"MultiLineString":for(r=0;r<s.length;r++)n=o._loadPolygon(t,[s[r]],i),o._setLineFill(n);break;case"Polygon":this._loadPolygon(t,s,i);break;case"MultiPolygon":for(r=0;r<s.length;r++)o._loadPolygon(t,s[r],i);break;case"Point":this._loadPoint(t,s,i);break;case"MultiPoint":for(r=0;r<s.length;r++)o._loadPoint(t,s[r],i)}},e.prototype._setLineFill=function(t){var e=t.segments;(e.length<4||!e[0].anchor().equals(Hl(e).anchor()))&&(t.options.fill=null)},e.prototype._loadShape=function(t,e){return this._shapeCreated(e)||t.append(e),e},e.prototype._loadPolygon=function(t,e,i){var r=this._buildPolygon(e);return r.dataItem=i,r.location=this.locator.viewToLocation(r.bbox().center()),this._loadShape(t,r)},e.prototype._buildPolygon=function(t){for(var e=new(t.length>1?uu:hu)(this.style),i=0;i<t.length;i++)for(var r=0;r<t[i].length;r++){var n=this.locator.locationToView(A_.fromLngLat(t[i][r]));0===r?e.moveTo(n.x,n.y):e.lineTo(n.x,n.y)}return e},e.prototype._loadPoint=function(t,e,i){var r=A_.fromLngLat(e),n=this.locator.locationToView(r),o=new mu(n,10),s=new wu(o,this.style);return s.dataItem=i,s.location=r,this._loadShape(t,s)},e}(ml),YT=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._readData=function(){return this.options.data||[]},e.prototype._load=function(t){var e=this;if(this._data=t,this.surface.clear(),0!==t.length){var i=this.options,r=ka(i.valueField),n=t.slice(0);n.sort((function(t,e){return r(e)-r(t)}));for(var o,s=this._scaleType(),a=ka(this.options.locationField),l=0;l<n.length;l++){var c=n[l],h=a(c),u=r(c);if(Ll(h)&&Ll(u)){o||(o=new s([0,u],[i.minSize,i.maxSize])),h=A_.create(h);var p=e.map.locationToView(h),d=o.map(u),f=e._createSymbol({center:p,size:d,style:i.style,dataItem:c,location:h});f.dataItem=c,f.location=h,f.value=u,e._drawSymbol(f)}}}},e.prototype._scaleType=function(){var t=this.options.scale;return aa(t)?t:ZT[t]},e.prototype._createSymbol=function(t){var e=this.options.symbol;return aa(e)||(e=QT[e]),e(t)},e.prototype._drawSymbol=function(t){var e={layer:this,shape:t};this.map.trigger("shapeCreated",e)||this.surface.draw(t)},e.prototype._tooltipContext=function(t){return{type:"bubble",layerIndex:this._layerIndex(),className:"k-map-bubble-tooltip",dataItem:t.dataItem,location:t.location,value:t.value}},e.prototype._tooltipAnchor=function(t){var e=t.element.bbox().center();return{top:e.y,left:e.x}},e}(GT);Zl(YT,{locationField:"location",valueField:"value",minSize:0,maxSize:100,scale:"sqrt",symbol:"circle",zIndex:200});var JT=function(t){function e(e,i){t.call(this),this._domain=e,this._range=i;var r=Math.sqrt(e[1])-Math.sqrt(e[0]),n=i[1]-i[0];this._ratio=n/r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t){var e=(Math.sqrt(t)-Math.sqrt(this._domain[0]))*this._ratio;return this._range[0]+e},e}(ml),ZT={sqrt:JT},QT={circle:function(t){var e=new mu(t.center,t.size/2);return new wu(e,t.style)},square:function(t){var e=new hu(t.style),i=t.size/2,r=t.center;return e.moveTo(r.x-i,r.y-i).lineTo(r.x+i,r.y-i).lineTo(r.x+i,r.y+i).lineTo(r.x-i,r.y+i).close(),e}},tO="click",eO="mouseenter",iO="mouseleave",rO=Object.assign,nO=".k-marker",oO=function(t){function e(e,i){t.call(this,e,i),this._markerClickHandler=Q_(this._markerClick,this),tT(this.element,tO,nO,this._markerClickHandler),this.items=[],this._load(this._readData())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){t.prototype.destroy.call(this),rT(this.element,tO,this._markerClickHandler),this.clear()},e.prototype.add=function(t){if(!Zs(t))return this._addOne(t);for(var e=0;e<t.length;e++)this._addOne(t[e])},e.prototype.remove=function(t){t.destroy();var e=(this.items||[]).indexOf(t);e>-1&&this.items.splice(e,1)},e.prototype.clear=function(){for(var t=0;t<this.items.length;t++)this.items[t].destroy();this.items=[]},e.prototype.update=function(t){var e=t.location();if(e){t.showAt(this.map.locationToView(e));var i={marker:t,layer:this};this.map.trigger("markerActivate",i)}},e.prototype._reset=function(){t.prototype._reset.call(this);for(var e=this.items,i=0;i<e.length;i++)this.update(e[i])},e.prototype.bind=function(t,e){var i=sO.create(t,this.options);i.dataItem=e;var r={marker:i,layer:this};if(!this.map.trigger("markerCreated",r))return this.add(i),i},e.prototype._addOne=function(t){var e=sO.create(t,this.options);return e.addTo(this),e},e.prototype._readData=function(){return this.options.data||[]},e.prototype._load=function(t){this._data=t,this.clear();for(var e=ka(this.options.locationField),i=ka(this.options.titleField),r=0;r<t.length;r++){var n=t[r];this.bind({location:e(n),title:i(n)},n)}},e.prototype._markerClick=function(t){var e=t.target._kendoNode,i={layer:this,layerIndex:this._layerIndex(),marker:e,markerIndex:(this.items||[]).indexOf(e),originalEvent:t};this.map.trigger("markerClick",i)},e.prototype._markerMouseEnter=function(t){var e=this._createMarkerEventArgs(t);this.map.trigger("markerMouseEnter",e)},e.prototype._markerMouseLeave=function(t){var e=this._createMarkerEventArgs(t);this.map.trigger("markerMouseLeave",e)},e.prototype._createMarkerEventArgs=function(t){var e=t.marker;return rO({},{layer:this,layerIndex:this._layerIndex(),marker:e,markerIndex:(this.items||[]).indexOf(e)},t)},e}(OT);Zl(oO,{zIndex:1e3,autoBind:!0,locationField:"location",titleField:"title"});var sO=function(t){function e(e){t.call(this),this.options=e||{}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.layer=null,this.unbindEvents(),this.hide()},e.prototype.addTo=function(t){this.layer=t.markers||t,this.layer.items.push(this),this.layer.update(this)},e.prototype.location=function(t){return t?(this.options.location=A_.create(t).toArray(),this.layer&&this.layer.update(this),this):A_.create(this.options.location)},e.prototype.showAt=function(t){this.render(),this._anchor={left:Math.round(t.x),top:Math.round(t.y)},this.element.style.left=G_(this._anchor.left),this.element.style.top=G_(this._anchor.top)},e.prototype.hide=function(){this.element&&(this.element.remove(),this.element=null)},e.prototype.bindEvents=function(){this.element&&(this._mouseEnterHandler=Q_(this._mouseEnter,this),tT(this.element,eO,nO,this._mouseEnterHandler),this._mouseLeaveHandler=Q_(this._mouseLeave,this),tT(this.element,iO,nO,this._mouseLeaveHandler))},e.prototype.unbindEvents=function(){this.element&&(rT(this.element,eO,this._mouseEnterHandler),rT(this.element,iO,this._mouseLeaveHandler))},e.prototype.render=function(){if(!this.element){var t=this.options,e=this.layer,i=document.createElement("span");Qs(i,"k-marker k-icon k-i-marker-"+X_(t.shape||"pin")),t.title&&i.setAttribute("title",t.title);var r=t.attributes||{};Object.keys(r).forEach((function(t){i.setAttribute(t,r[t])})),i._kendoNode=this,i.style.zIndex=t.zIndex,this.element=i,e&&e.element.appendChild(this.element),this.bindEvents()}},e.prototype._mouseEnter=function(t){var e=this._createEventArgs(t);this.layer._markerMouseEnter(e),this.layer.map._tooltip.show({top:this._anchor.top-this.element.offsetHeight,left:this._anchor.left},this._tooltipContext())},e.prototype._tooltipContext=function(){return{type:"marker",layerIndex:this.layer._layerIndex(),className:"k-map-marker-tooltip",dataItem:this.dataItem,title:this.options.title,location:this.location()}},e.prototype._mouseLeave=function(t){var e=this._createEventArgs(t);this.layer._markerMouseLeave(e)},e.prototype._createEventArgs=function(t){return{marker:this,originalEvent:t}},e.create=function(t,i){return t instanceof e?t:new e(ha({},i,t))},e}(ml),aO=Object.assign;function lO(t){window.requestAnimationFrame(t)}var cO=function(t){function e(){t.call(this);var e=this;e._tickProxy=Q_(e._tick,e),e._started=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.tick=function(){},e.prototype.done=function(){},e.prototype.onEnd=function(){},e.prototype.onCancel=function(){},e.prototype.start=function(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,lO(this._tickProxy)))},e.prototype.enabled=function(){return!0},e.prototype.cancel=function(){this._started=!1,this.onCancel()},e.prototype._tick=function(){var t=this;t._started&&(t.tick(),t.done()?(t._started=!1,t.onEnd()):lO(t._tickProxy))},e}(ml),hO=function(t){function e(e){t.call(this),aO(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.done=function(){return this.timePassed()>=this.duration},e.prototype.timePassed=function(){return Math.min(this.duration,lT()-this.startDate)},e.prototype.moveTo=function(t){var e=this,i=e.movable;e.initial=i[e.axis],e.delta=t.location-e.initial,e.duration="number"==typeof t.duration?t.duration:300,e.tick=e._easeProxy(t.ease),e.startDate=lT(),e.start()},e.prototype._easeProxy=function(t){var e=this;return function(){e.movable.moveAxis(e.axis,t(e.timePassed(),e.initial,e.delta,e.duration))}},e.easeOutExpo=function(t,e,i,r){return t===r?e+i:i*(1-Math.pow(2,-10*t/r))+e},e}(cO),uO=Object.assign,pO=function(t){t.preventDefault()},dO=800,fO=0,gO="press",mO="hold",yO="select",vO="start",bO="move",wO="end",xO="cancel",SO="tap",kO="doubleTap",CO="release",AO="gesturechange",_O="gestureend",TO="gesturetap",OO={api:0,touch:0,mouse:9,pointer:9};function EO(t){var e,i,r,n=Z_(),o=[],s=t.originalEvent||t,a=t.currentTarget,l=0;if(t.api)o.push({id:2,event:t,target:t.target,currentTarget:t.target,location:t,type:"api"});else if(t.type.match(/touch/))for(e=(i=s?s.changedTouches:[]).length;l<e;l++)r=i[l],o.push({location:r,event:t,target:r.target,currentTarget:a,id:r.identifier,type:"touch"});else n.pointers||n.msPointers?o.push({location:s,event:t,target:t.target,currentTarget:a,id:s.pointerId,type:"pointer"}):o.push({id:1,event:t,target:t.target,currentTarget:a,location:t,type:"mouse"});return o}var MO=function(t){function e(e,i){t.call(this);var r=this;r.support=Z_(),r.invalidZeroEvents=this.support.mobileOS&&this.support.mobileOS.android,r.axis=e,r._updateLocationData(i),r.startLocation=r.location,r.velocity=r.delta=0,r.timeStamp=lT()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.move=function(t){var e=this,i=t["page"+e.axis],r=lT(),n=r-e.timeStamp||1;!i&&this.invalidZeroEvents||(e.delta=i-e.location,e._updateLocationData(t),e.initialDelta=i-e.startLocation,e.velocity=e.delta/n,e.timeStamp=r)},e.prototype._updateLocationData=function(t){var e=this,i=e.axis;e.location=t["page"+i],e.client=t["client"+i],e.screen=t["screen"+i]},e}(ml),PO=function(t){function e(e,i,r){t.call(this),uO(this,{x:new MO("X",r.location),y:new MO("Y",r.location),type:r.type,useClickAsTap:e.useClickAsTap,threshold:e.threshold||OO[r.type],userEvents:e,target:i,currentTarget:r.currentTarget,initialTouch:r.target,id:r.id,pressEvent:r,_clicks:e._clicks,supportDoubleTap:e.supportDoubleTap,_moved:!1,_finished:!1})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.press=function(){this._holdTimeout=setTimeout(Q_(this._hold,this),this.userEvents.minHold),this._trigger(gO,this.pressEvent)},e.prototype._tap=function(t){var e=this;e.userEvents._clicks++,1===e.userEvents._clicks&&(e._clickTimeout=setTimeout((function(){1===e.userEvents._clicks?e._trigger(SO,t):e._trigger(kO,t),e.userEvents._clicks=0}),300))},e.prototype._hold=function(){this._trigger(mO,this.pressEvent)},e.prototype.move=function(t){var e=this,i="api"!==t.type&&e.userEvents._shouldNotMove;if(!e._finished&&!i){if(e.x.move(t.location),e.y.move(t.location),!e._moved){if(e._withinIgnoreThreshold())return;if(DO.current&&DO.current!==e.userEvents)return e.dispose();e._start(t)}e._finished||e._trigger(bO,t)}},e.prototype.end=function(t){this.endTime=lT(),this._finished||(this._finished=!0,this._trigger(CO,t),this._moved?this._trigger(wO,t):this.useClickAsTap||(this.supportDoubleTap?this._tap(t):this._trigger(SO,t)),clearTimeout(this._holdTimeout),this.dispose())},e.prototype.dispose=function(){var t=this.userEvents.touches||[];this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout);var e=t.indexOf(this);t.splice(e,1)},e.prototype.skip=function(){this.dispose()},e.prototype.cancel=function(){this.dispose()},e.prototype.isMoved=function(){return this._moved},e.prototype._start=function(t){clearTimeout(this._holdTimeout),this.startTime=lT(),this._moved=!0,this._trigger(vO,t)},e.prototype._trigger=function(t,e){var i=this,r=e.event,n={touch:i,x:i.x,y:i.y,target:i.target,event:r};i.userEvents.notify(t,n)&&r.preventDefault()},e.prototype._withinIgnoreThreshold=function(){var t=this.x.initialDelta,e=this.y.initialDelta;return Math.sqrt(t*t+e*e)<=this.threshold},e}(ml);function IO(t){for(var e=J_(navigator.userAgent).up.split(" "),i=0,r=e.length;i<r;i++)t(e[i])}var DO=function(t){function e(e,i){t.call(this);var r,n=this,o=Z_();this.support=o,i=i||{},this.options=i,r=n.filter=i.filter,n.threshold=i.threshold||fO,n.minHold=i.minHold||dO,n.touches=[],n._maxTouches=i.multiTouch?2:1,n.allowSelection=i.allowSelection,n.captureUpIfMoved=i.captureUpIfMoved,n.useClickAsTap=!i.fastTap&&!o.delayedClick(),n._clicks=0,n.supportDoubleTap=i.supportDoubleTap;var s=!o.touch||o.mouseAndTouchPresent;if(uO(n,{element:e,surface:i.global&&s?e.ownerDocument.documentElement:i.surface||e,stopPropagation:i.stopPropagation,pressed:!1}),this._surfaceMoveHandler=Q_(this._move,this),tT(n.surface,sT("move"),this._surfaceMoveHandler),this._surfaceEndHandler=Q_(this._end,this),tT(n.surface,sT("up cancel"),this._surfaceEndHandler),this._elementStartHandler=Q_(this._start,this),tT(e,sT("down"),r,this._elementStartHandler),n.useClickAsTap&&(this._elementClickHandler=Q_(this._click,this),tT(e,sT("click"),r,this._elementClickHandler)),o.pointers||o.msPointers)if(o.browser.version<11){var a="pinch-zoom double-tap-zoom";e.style["-ms-touch-action"]=i.touchAction&&"none"!==i.touchAction?a+" "+i.touchAction:a}else e.style["touch-action"]=i.touchAction||"none";if(i.preventDragEvent&&(this._elementDragStartHandler=pO,tT(e,sT("dragstart"),this._elementDragStartHandler)),this._elementSelectHandler=Q_(this._select,this),tT(e,sT("mousedown"),r,this._elementSelectHandler),n.captureUpIfMoved&&o.eventCapture){var l=n.surface,c=Q_(n.preventIfMoving,n);IO((function(t){l.addEventListener(t,c,!0)}))}n.bind([gO,mO,SO,kO,vO,bO,wO,CO,xO,"gesturestart",AO,_O,TO,yO],i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.preventIfMoving=function(t){this._isMoved()&&t.preventDefault()},e.prototype.destroy=function(){var t=this,e=this.options,i=this.element;if(!t._destroyed){if(t._destroyed=!0,t.captureUpIfMoved&&this.support.eventCapture){var r=t.surface;IO((function(e){r.removeEventListener(e,t.preventIfMoving)}))}rT(t.surface,sT("move"),this._surfaceMoveHandler),rT(t.surface,sT("up cancel"),this._surfaceEndHandler),rT(i,sT("down"),this._elementStartHandler),t.useClickAsTap&&rT(i,sT("click"),this._elementClickHandler),e.preventDragEvent&&rT(i,sT("dragstart"),this._elementDragStartHandler),rT(i,sT("mousedown"),this._elementSelectHandler),t._disposeAll(),t.unbind(),delete t.surface,delete t.element,delete t.currentTarget}},e.prototype.capture=function(){e.current=this},e.prototype.cancel=function(){this._disposeAll(),this.trigger(xO)},e.prototype.notify=function(t,e){var i,r,n,o,s,a,l,c,h=this.touches,u=t;if(this._isMultiTouch()){switch(u){case bO:u=AO;break;case wO:u=_O;break;case SO:u=TO}uO(e,{touches:h},(i=h[0],r=h[1],n=i.x.location,o=i.y.location,s=r.x.location,a=r.y.location,l=n-s,c=o-a,{center:{x:(n+s)/2,y:(o+a)/2},distance:Math.sqrt(l*l+c*c)}))}return this.trigger(u,uO(e,{type:u}))},e.prototype.press=function(t,e,i){this._apiCall("_start",t,e,i)},e.prototype.move=function(t,e){this._apiCall("_move",t,e)},e.prototype.end=function(t,e){this._apiCall("_end",t,e)},e.prototype._isMultiTouch=function(){return this.touches.length>1},e.prototype._maxTouchesReached=function(){return this.touches.length>=this._maxTouches},e.prototype._disposeAll=function(){for(var t=this.touches;t.length>0;)t.pop().dispose()},e.prototype._isMoved=function(){return Ca(this.touches,(function(t){return t.isMoved()})).length},e.prototype._select=function(t){this.allowSelection&&!this.trigger(yO,{event:t})||t.preventDefault()},e.prototype._start=function(t){var i,r,n=this,o=0,s=n.filter,a=EO(t),l=a.length,c=t.which;if(!(c&&c>1||n._maxTouchesReached()))for(e.current=null,n.currentTarget=t.currentTarget,n.stopPropagation&&t.stopPropagation();o<l&&!n._maxTouchesReached();o++)r=a[o],(i=s?r.currentTarget:n.element)&&0===i.length||(r=new PO(n,i,r),n.touches.push(r),r.press(),n._isMultiTouch()&&n.notify("gesturestart",{}))},e.prototype._move=function(t){this._eachTouch("move",t)},e.prototype._end=function(t){this._eachTouch("end",t)},e.prototype._click=function(t){var e={touch:{initialTouch:t.target,target:t.currentTarget,endTime:lT(),x:{location:t.pageX,client:t.clientX},y:{location:t.pageY,client:t.clientY}},x:t.pageX,y:t.pageY,target:t.currentTarget,event:t,type:"tap"};this.trigger("tap",e)&&t.preventDefault()},e.prototype._eachTouch=function(t,e){var i,r,n,o,s={},a=EO(e),l=this.touches;for(i=0;i<l.length;i++)s[(r=l[i]).id]=r;for(i=0;i<a.length;i++)(o=s[(n=a[i]).id])&&o[t](n)},e.prototype._apiCall=function(t,e,i,r){this[t]({api:!0,pageX:e,pageY:i,clientX:e,clientY:i,target:r||this.element,stopPropagation:cT,preventDefault:cT})},e.defaultThreshold=function(t){fO=t},e.minHold=function(t){dO=t},e}(fT),FO=Object.assign,RO=Math.abs,LO="change",NO="scroll",BO=function(t){function e(e){t.call(this,e);var i=this;FO(i,e),i.userEvents.bind("gestureend",i.start.bind(this)),i.tapCapture.bind("press",i.cancel.bind(this))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.enabled=function(){return this.movable.scale<this.dimensions.minScale},e.prototype.done=function(){return this.dimensions.minScale-this.movable.scale<.01},e.prototype.tick=function(){var t=this.movable;t.scaleWith(1.1),this.dimensions.rescale(t.scale)},e.prototype.onEnd=function(){var t=this.movable;t.scaleTo(this.dimensions.minScale),this.dimensions.rescale(t.scale)},e}(cO),jO=function(t){function e(e){t.call(this);var i=this;FO(i,e,{transition:new hO({axis:e.axis,movable:e.movable,onEnd:function(){i._end()}})}),i.tapCapture.bind("press",(function(){i.cancel()})),i.userEvents.bind("end",Q_(i.start,i)),i.userEvents.bind("gestureend",Q_(i.start,i)),i.userEvents.bind("tap",Q_(i.onEnd,i))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onCancel=function(){this.transition.cancel()},e.prototype.freeze=function(t){this.cancel(),this._moveTo(t)},e.prototype.onEnd=function(){var t=this;t.paneAxis.outOfBounds()?t._snapBack():t._end()},e.prototype.done=function(){return RO(this.velocity)<1},e.prototype.start=function(e){var i,r=this;r.dimension.enabled&&(r.paneAxis.outOfBounds()?r.transition._started?(r.transition.cancel(),r.velocity=Math.min(e.touch[r.axis].velocity*r.velocityMultiplier,55),t.prototype.start.call(this)):r._snapBack():(i=2===e.touch.id?0:e.touch[r.axis].velocity,r.velocity=Math.max(Math.min(i*r.velocityMultiplier,55),-55),r.tapCapture.captureNext(),t.prototype.start.call(this)))},e.prototype.tick=function(){var t=this,e=t.dimension,i=t.paneAxis.outOfBounds()?.5:t.friction,r=t.velocity*=i,n=t.movable[t.axis]+r;!t.elastic&&e.outOfBounds(n)&&(n=Math.max(Math.min(n,e.max),e.min),t.velocity=0),t.movable.moveAxis(t.axis,n)},e.prototype._end=function(){this.tapCapture.cancelCapture(),this.end()},e.prototype._snapBack=function(){var t=this,e=t.dimension,i=t.movable[t.axis]>e.max?e.max:e.min;t._moveTo(i)},e.prototype._moveTo=function(t){this.transition.moveTo({location:t,duration:500,ease:hO.easeOutExpo})},e}(cO),zO=function(t){function e(e){t.call(this,e);FO(this,e,{origin:{},destination:{},offset:{}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.tick=function(){this._updateCoordinates(),this.moveTo(this.origin)},e.prototype.done=function(){return RO(this.offset.y)<5&&RO(this.offset.x)<5},e.prototype.onEnd=function(){this.moveTo(this.destination),this.callback&&this.callback.call()},e.prototype.setCoordinates=function(t,e){this.offset={},this.origin=t,this.destination=e},e.prototype.setCallback=function(t){t&&aa(t)?this.callback=t:t=void 0},e.prototype._updateCoordinates=function(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4},this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}},e}(cO),UO=function(t){function e(e){t.call(this);var i=this,r="x"===e.axis,n=V_('<div class="km-touch-scrollbar km-'+(r?"horizontal":"vertical")+'-scrollbar" />');FO(i,e,{element:n,elementSize:0,movable:new WT(n),scrollMovable:e.movable,alwaysVisible:e.alwaysVisible,size:r?"width":"height"}),i.scrollMovable.bind(LO,i.refresh.bind(i)),i.container.appendChild(n),e.alwaysVisible&&i.show()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.refresh=function(){var t=this,e=t.axis,i=t.dimension,r=i.size,n=t.scrollMovable,o=r/i.total,s=Math.round(-n[e]*o),a=Math.round(r*o);this.element.style.display=o>=1?"none":"",s+a>r?a=r-s:s<0&&(a+=s,s=0),t.elementSize!==a&&(t.element.style[t.size]=a+"px",t.elementSize=a),t.movable.moveAxis(e,s)},e.prototype.show=function(){this.element.style.opacity=.7,this.element.style.visibility="visible"},e.prototype.hide=function(){this.alwaysVisible||(this.element.style.opacity=0)},e}(ml),$O=function(t){function e(e,i){t.call(this);var r=this;this.element=e,this._initOptions(i);var n=function(t){var e=K_(t);return e.ios||e.android}(navigator.userAgent);r._native=r.options.useNative&&n;var o=V_('<div class="km-scroll-header"/>');if(r._native)return Qs(e,"km-native-scroller"),W_(o,e),void FO(r,{scrollElement:e,fixedContainer:e.children[0]});e.style.overflow="hidden",Qs(e,"km-scroll-wrapper"),function(t,e){for(t.appendChild(e);t.firstChild!==e;)e.appendChild(t.firstChild)}(e,V_('<div class="km-scroll-container"/>')),W_(o,e);var s=e.children[1],a=new zT(e),l=new WT(s),c=new $T({element:s,container:e,forcedEnabled:r.options.zoom}),h=this.options.avoidScrolling,u=new DO(e,{touchAction:"pan-y",fastTap:!0,allowSelection:!0,preventDragEvent:!0,captureUpIfMoved:!0,multiTouch:r.options.zoom,supportDoubleTap:r.options.supportDoubleTap,start:function(t){c.refresh();var e=RO(t.x.velocity),i=RO(t.y.velocity),n=2*e>=i,o=function(t,e){return t===e||function(t,e){if(!e)return!1;for(var i=e.parentNode;null!==i;){if(i===t)return!0;i=i.parentNode}return!1}(t,e)}(r.fixedContainer,t.event.target),s=2*i>=e;!o&&!h(t)&&r.enabled&&(c.x.enabled&&n||c.y.enabled&&s)?u.capture():u.cancel()}}),p=new VT({movable:l,dimensions:c,userEvents:u,elastic:r.options.elastic}),d=new BO({movable:l,dimensions:c,userEvents:u,tapCapture:a}),f=new zO({moveTo:function(t){r.scrollTo(t.x,t.y)}});l.bind(LO,(function(){r.scrollTop=-l.y,r.scrollLeft=-l.x,r.trigger(NO,{scrollTop:r.scrollTop,scrollLeft:r.scrollLeft})})),r.options.mousewheelScrolling&&(this._wheelScrollHandler=this._wheelScroll.bind(this),tT(e,"DOMMouseScroll mousewheel",this._wheelScrollHandler)),FO(r,{movable:l,dimensions:c,zoomSnapBack:d,animatedScroller:f,userEvents:u,pane:p,tapCapture:a,pulled:!1,enabled:!0,scrollElement:s,scrollTop:0,scrollLeft:0,fixedContainer:e.children[0]}),r._initAxis("x"),r._initAxis("y"),r._wheelEnd=function(){r._wheel=!1,r.userEvents.end(0,r._wheelY)},c.refresh(),r.options.pullToRefresh&&r._initPullToRefresh()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initOptions=function(t){this.options=ha({},this.options,t)},e.prototype._wheelScroll=function(t){if(!t.ctrlKey){this._wheel||(this._wheel=!0,this._wheelY=0,this.userEvents.press(0,this._wheelY)),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(this._wheelEnd,50);var e=function(t){var e,i=t.originalEvent||t,r=i.wheelDeltaY;return i.wheelDelta?(void 0===r||r)&&(e=i.wheelDelta):i.detail&&i.axis===i.VERTICAL_AXIS&&(e=10*-i.detail),e}(t);e&&(this._wheelY+=e,this.userEvents.move(0,this._wheelY)),t.preventDefault()}},e.prototype.makeVirtual=function(){this.dimensions.y.makeVirtual()},e.prototype.virtualSize=function(t,e){this.dimensions.y.virtualSize(t,e)},e.prototype.height=function(){return this.dimensions.y.size},e.prototype.scrollHeight=function(){return this.scrollElement.scrollHeight},e.prototype.scrollWidth=function(){return this.scrollElement.scrollWidth},e.prototype._resize=function(){this._native||this.contentResized()},e.prototype.setOptions=function(t){this._initOptions(t),t.pullToRefresh&&this._initPullToRefresh()},e.prototype.reset=function(){this._native?this.scrollElement.scrollTop(0):(this.movable.moveTo({x:0,y:0}),this._scale(1))},e.prototype.contentResized=function(){this.dimensions.refresh(),this.pane.x.outOfBounds()&&this.movable.moveAxis("x",this.dimensions.x.min),this.pane.y.outOfBounds()&&this.movable.moveAxis("y",this.dimensions.y.min)},e.prototype.zoomOut=function(){var t=this.dimensions;t.refresh(),this._scale(t.fitScale),this.movable.moveTo(t.centerCoordinates())},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.scrollTo=function(t,e){this._native?(this.scrollElement.scrollLeft(RO(t)),this.scrollElement.scrollTop(RO(e))):(this.dimensions.refresh(),this.movable.moveTo({x:t,y:e}))},e.prototype.animatedScrollTo=function(t,e,i){var r,n;this._native?this.scrollTo(t,e):(r={x:this.movable.x,y:this.movable.y},n={x:t,y:e},this.animatedScroller.setCoordinates(r,n),this.animatedScroller.setCallback(i),this.animatedScroller.start())},e.prototype.pullHandled=function(){},e.prototype.destroy=function(){var t=this.element;rT(t,"DOMMouseScroll mousewheel",this._wheelScrollHandler),this.userEvents&&this.userEvents.destroy()},e.prototype._scale=function(t){this.dimensions.rescale(t),this.movable.scaleTo(t)},e.prototype._initPullToRefresh=function(){},e.prototype._dragEnd=function(){},e.prototype._paneChange=function(){},e.prototype._initAxis=function(t){var e=this,i=e.movable,r=e.dimensions[t],n=e.tapCapture,o=e.pane[t],s=new UO({axis:t,movable:i,dimension:r,container:e.element,alwaysVisible:e.options.visibleScrollHints});r.bind(LO,(function(){s.refresh()})),o.bind(LO,(function(){s.show()})),e[t+"inertia"]=new jO({axis:t,paneAxis:o,movable:i,tapCapture:n,userEvents:e.userEvents,dimension:r,elastic:e.options.elastic,friction:e.options.friction||.96,velocityMultiplier:e.options.velocityMultiplier||10,end:function(){s.hide(),e.trigger("scrollEnd",{axis:t,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft})}})},e}(fT);Zl($O,{name:"Scroller",zoom:!1,pullOffset:140,visibleScrollHints:!1,elastic:!0,useNative:!1,mousewheelScrolling:!0,avoidScrolling:function(){return!1},pullToRefresh:!1,messages:{pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"}}),aT($O,["pull",NO,"resize"]);var HO=function(t,e){void 0===e&&(e={}),this.sender=e.sender||t,this.widget=t,this.rtl=Boolean(e.rtl)};HO.prototype.notify=function(t,e){this.widget&&this.widget.trigger(t,e)};const VO=HO;var qO=Math,WO=qO.min,XO=qO.pow,GO=Nc,KO="marker",YO="DOMMouseScroll mousewheel",JO={bubble:YT,shape:GT,tile:FT};function ZO(t){var e=[];if(t)for(var i=X_(t).split("-"),r=0;r<i.length;r++)e.push("k-pos-"+i[r]);return e.join(" ")}JO.marker=oO;var QO=function(t){function e(e,i,r,n){void 0===i&&(i={}),void 0===r&&(r={}),void 0===n&&(n={}),t.call(this),this._init(e,i,r,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.scroller.destroy(),this._tooltip&&this._tooltip.destroy(),this.navigator&&this.navigator.destroy(),this.attribution&&this.attribution.destroy(),this.zoomControl&&this.zoomControl.destroy(),Zs(this.markers)?this.markers.forEach((function(t){t.destroy()})):this.markers.destroy();for(var e=0;e<this.layers.length;e++)this.layers[e].destroy();rT(this.element,YO,this._mousewheelHandler),t.prototype.destroy.call(this)},e.prototype._init=function(t,e,i,r){void 0===e&&(e={}),void 0===i&&(i={}),void 0===r&&(r={}),this.support=Z_(),this.context=r,this.initObserver(r),this.initServices(r),this._notifyObserver("init"),this._initOptions(e),this._setEvents(e),this.crs=new $_,this._initElement(t),this._viewOrigin=this._getOrigin(),this._tooltip=this._createTooltip(),this._initScroller(),this._initMarkers(),this._initControls(),this._initLayers(),this._reset(),this._mousewheelHandler=this._mousewheel.bind(this),tT(this.element,YO,this._mousewheelHandler)},e.prototype._initOptions=function(t){this.options=ha({},this.options,t)},e.prototype._initElement=function(t){this.element=t,Qs(t,"k-map"),t.style.position="relative",t.setAttribute("data-role","map"),q_(t);var e=V_("<div />");this.element.appendChild(e)},e.prototype.initServices=function(t){void 0===t&&(t={}),this.widgetService=new VO(this,t)},e.prototype.initObserver=function(t){void 0===t&&(t={}),this.observers=[],this.addObserver(t.observer)},e.prototype.addObserver=function(t){t&&this.observers.push(t)},e.prototype.removeObserver=function(t){var e=this.observers.indexOf(t);e>=0&&this.observers.splice(e,1)},e.prototype.requiresHandlers=function(t){for(var e=this.observers,i=0;i<e.length;i++)if(e[i].requiresHandlers(t))return!0},e.prototype.trigger=function(e,i){void 0===i&&(i={}),i.sender=this;for(var r=this.observers,n=!1,o=0;o<r.length;o++)r[o].trigger(e,i)&&(n=!0);return n||t.prototype.trigger.call(this,e,i),n},e.prototype._notifyObserver=function(t,e){void 0===e&&(e={}),e.sender=this;for(var i=this.observers,r=!1,n=0;n<i.length;n++)i[n].trigger(t,e)&&(r=!0);return r},e.prototype.zoom=function(t){var e,i=this.options;if(Ll(t)){var r=qO.round(Vl(t,i.minZoom,i.maxZoom));i.zoom!==r&&(i.zoom=r,this.widgetService.notify("zoomChange",{zoom:i.zoom}),this._reset()),e=this}else e=i.zoom;return e},e.prototype.center=function(t){var e;if(t){var i=A_.create(t),r=A_.create(this.options.center);i.equals(r)||(this.options.center=i.toArray(),this.widgetService.notify(_T,{center:this.options.center}),this._reset()),e=this}else e=A_.create(this.options.center);return e},e.prototype.extent=function(t){var e;return t?(this._setExtent(t),e=this):e=this._getExtent(),e},e.prototype.setOptions=function(t){void 0===t&&(t={});var e=this.element;this.destroy(),q_(e),this._init(e,t,{},this.context),this._reset()},e.prototype.locationToLayer=function(t,e){var i=!this.options.wraparound,r=A_.create(t);return this.crs.toPoint(r,this._layerSize(e),i)},e.prototype.layerToLocation=function(t,e){var i=!this.options.wraparound,r=GO.create(t);return this.crs.toLocation(r,this._layerSize(e),i)},e.prototype.locationToView=function(t){var e=A_.create(t),i=this.locationToLayer(this._viewOrigin);return this.locationToLayer(e).translateWith(i.scale(-1))},e.prototype.viewToLocation=function(t,e){var i=this.locationToLayer(this._getOrigin(),e),r=GO.create(t).clone().translateWith(i);return this.layerToLocation(r,e)},e.prototype.eventOffset=function(t){var e,i,r=Bl(this.element);if(t.x&&t.x.location||t.y&&t.y.location)e=t.x.location-r.left,i=t.y.location-r.top;else{var n=t.originalEvent||t;e=Kl(n.pageX,n.clientX)-r.left,i=Kl(n.pageY,n.clientY)-r.top}return new Nc(e,i)},e.prototype.eventToView=function(t){var e=this.eventOffset(t);return this.locationToView(this.viewToLocation(e))},e.prototype.eventToLayer=function(t){return this.locationToLayer(this.eventToLocation(t))},e.prototype.eventToLocation=function(t){var e=this.eventOffset(t);return this.viewToLocation(e)},e.prototype.viewSize=function(){var t=this.element,e=this._layerSize(),i=t.clientWidth;return this.options.wraparound||(i=WO(e,i)),{width:i,height:WO(e,t.clientHeight)}},e.prototype.exportVisual=function(){return this._reset(),!1},e.prototype.hideTooltip=function(){this._tooltip&&this._tooltip.hide()},e.prototype._setOrigin=function(t,e){var i,r=this.viewSize(),n=this._origin=A_.create(t);return(i=this.locationToLayer(n,e)).x+=r.width/2,i.y+=r.height/2,this.options.center=this.layerToLocation(i,e).toArray(),this.widgetService.notify(_T,{center:this.options.center}),this},e.prototype._getOrigin=function(t){var e,i=this.viewSize();return!t&&this._origin||((e=this.locationToLayer(this.center())).x-=i.width/2,e.y-=i.height/2,this._origin=this.layerToLocation(e)),this._origin},e.prototype._setExtent=function(t){var e=AT.create(t),i=e.se.clone();this.options.wraparound&&i.lng<0&&t.nw.lng>0&&(i.lng=180+(180+i.lng));var r=new AT(e.nw,i);this.center(r.center());var n,o=this.element.clientWidth,s=this.element.clientHeight;for(n=this.options.maxZoom;n>=this.options.minZoom;n--){var a=this.locationToLayer(r.nw,n),l=this.locationToLayer(r.se,n),c=qO.abs(l.x-a.x),h=qO.abs(l.y-a.y);if(c<=o&&h<=s)break}this.zoom(n)},e.prototype._getExtent=function(){var t=this._getOrigin(),e=this.locationToLayer(t),i=this.viewSize();e.x+=i.width,e.y+=i.height;var r=this.layerToLocation(e);return new AT(t,r)},e.prototype._zoomAround=function(t,e){this._setOrigin(this.layerToLocation(t,e),e),this.zoom(e)},e.prototype._initControls=function(){var t=this.options.controls;t.attribution&&this._createAttribution(t.attribution),this.support.mobileOS||(t.navigator&&this._createNavigator(t.navigator),t.zoom&&this._createZoomControl(t.zoom))},e.prototype._createControlElement=function(t,e){var i=t.position||e,r="."+ZO(i).replace(" ","."),n=this.element.querySelector(".k-map-controls"+r)||[];if(0===n.length){var o=document.createElement("div");Qs(o,"k-map-controls "+ZO(i)),n=o,this.element.appendChild(n)}var s=document.createElement("div");return n.appendChild(s),s},e.prototype._createAttribution=function(t){var e=this._createControlElement(t,"bottomRight");this.attribution=new gT(e,t)},e.prototype._createNavigator=function(t){var e=this._createControlElement(t,"topLeft"),i=this.navigator=new vT(e,t);this._navigatorPan=this._navigatorPan.bind(this),i.bind("pan",this._navigatorPan),this._navigatorCenter=this._navigatorCenter.bind(this),i.bind("center",this._navigatorCenter)},e.prototype._navigatorPan=function(t){var e=this.scroller,i=e.scrollLeft+t.x,r=e.scrollTop-t.y,n=this._virtualSize,o=this.element.clientWidth,s=this.element.clientHeight;i=Vl(i,n.x.min,n.x.max-o),r=Vl(r,n.y.min,n.y.max-s),this.scroller.one("scroll",Q_(this._scrollEnd,this)),this.scroller.scrollTo(-i,-r)},e.prototype._navigatorCenter=function(){this.center(this.options.center)},e.prototype._createZoomControl=function(t){var e=this._createControlElement(t,"topLeft"),i=this.zoomControl=new xT(e,t);this._zoomControlChange=this._zoomControlChange.bind(this),i.bind("change",this._zoomControlChange)},e.prototype._zoomControlChange=function(t){this.trigger("zoomStart",{originalEvent:t})||(this.zoom(this.zoom()+t.delta),this.trigger("zoomEnd",{originalEvent:t}))},e.prototype._initScroller=function(){var t=this.support.mobileOS?.93:.9,e=!1!==this.options.zoomable,i=this.scroller=new $O(this.element.children[0],{friction:t,velocityMultiplier:5,zoom:e,mousewheelScrolling:!1,supportDoubleTap:!0});i.bind("scroll",Q_(this._scroll,this)),i.bind("scrollEnd",Q_(this._scrollEnd,this)),i.userEvents.bind("gesturestart",Q_(this._scaleStart,this)),i.userEvents.bind("gestureend",Q_(this._scale,this)),i.userEvents.bind("doubleTap",Q_(this._doubleTap,this)),i.userEvents.bind("tap",Q_(this._tap,this)),this.scrollElement=i.scrollElement},e.prototype._initLayers=function(){for(var t=this.options.layers,e=this.layers=[],i=0;i<t.length;i++){var r=t[i],n=this._createLayer(r);e.push(n)}},e.prototype._createLayer=function(t){var e=t.type||"shape",i=this.options.layerDefaults[e],r=ha({},e===KO?this.options.markerDefaults:i,t),n=new(0,JO[e])(this,r);return e===KO&&(this.markers=n),n},e.prototype._createTooltip=function(){return new TT(this.widgetService,this.options.tooltip)},e.prototype._initMarkers=function(){(this.options.layers||[]).filter((function(t){return t&&t.type===KO})).length>0||(this.markers=new oO(this,this.options.markerDefaults),this.markers.add(this.options.markers))},e.prototype._scroll=function(t){var e=this.locationToLayer(this._viewOrigin).round(),i=t.sender.movable,r=new Nc(i.x,i.y).scale(-1).scale(1/i.scale);e.x+=r.x,e.y+=r.y,this._scrollOffset=r,this._tooltip.offset=r,this.hideTooltip(),this._setOrigin(this.layerToLocation(e)),this.trigger("pan",{originalEvent:t,origin:this._getOrigin(),center:this.center()})},e.prototype._scrollEnd=function(t){this._scrollOffset&&this._panComplete()&&(this._scrollOffset=null,this._panEndTimestamp=lT(),this.trigger("panEnd",{originalEvent:t,origin:this._getOrigin(),center:this.center()}))},e.prototype._panComplete=function(){return lT()-(this._panEndTimestamp||0)>50},e.prototype._scaleStart=function(t){if(this.trigger("zoomStart",{originalEvent:t})){var e=t.touches[1];e&&e.cancel()}},e.prototype._scale=function(t){var e=this.scroller.movable.scale,i=this._scaleToZoom(e),r=new Nc(t.center.x,t.center.y),n=this.viewToLocation(r,i),o=this.locationToLayer(n,i).translate(-r.x,-r.y);this._zoomAround(o,i),this.trigger("zoomEnd",{originalEvent:t})},e.prototype._scaleToZoom=function(t){var e=this._layerSize()*t/this.options.minSize,i=qO.log(e)/qO.log(2);return qO.round(i)},e.prototype._reset=function(){this.attribution&&this.attribution.filter(this.center(),this.zoom()),this._viewOrigin=this._getOrigin(!0),this._resetScroller(),this.hideTooltip(),this.trigger("beforeReset"),this.trigger("reset")},e.prototype._resetScroller=function(){var t=this.scroller,e=t.dimensions.x,i=t.dimensions.y,r=this._layerSize(),n=this.extent().nw,o=this.locationToLayer(n).round();t.movable.round=!0,t.reset(),t.userEvents.cancel();var s=this.zoom();t.dimensions.forcedMinScale=XO(2,this.options.minZoom-s),t.dimensions.maxScale=XO(2,this.options.maxZoom-s);var a={min:-o.x,max:r-o.x},l={min:-o.y,max:r-o.y};if(this.options.wraparound&&(a.max=20*r,a.min=-a.max),!1===this.options.pannable){var c=this.viewSize();a.min=l.min=0,a.max=c.width,l.max=c.height}e.makeVirtual(),i.makeVirtual(),e.virtualSize(a.min,a.max),i.virtualSize(l.min,l.max),this._virtualSize={x:a,y:l}},e.prototype._renderLayers=function(){},e.prototype._layerSize=function(t){var e=Kl(t,this.options.zoom);return this.options.minSize*XO(2,e)},e.prototype._tap=function(t){if(this._panComplete()){var e=this.eventOffset(t);this.hideTooltip(),this.trigger("click",{originalEvent:t,location:this.viewToLocation(e)})}},e.prototype._doubleTap=function(t){if(!1!==this.options.zoomable&&!this.trigger("zoomStart",{originalEvent:t})){var e=this.zoom()+1,i=this.eventOffset(t),r=this.viewToLocation(i),n=this.locationToLayer(r,e).translate(-i.x,-i.y);this._zoomAround(n,e),this.trigger("zoomEnd",{originalEvent:t})}},e.prototype._mousewheel=function(t){t.preventDefault();var e=ja(t)>0?-1:1,i=this.options,r=this.zoom(),n=Vl(r+e,i.minZoom,i.maxZoom);if(!1!==i.zoomable&&n!==r&&!this.trigger("zoomStart",{originalEvent:t})){var o=this.eventOffset(t),s=this.viewToLocation(o),a=this.locationToLayer(s,n).translate(-o.x,-o.y);this._zoomAround(a,n),this.trigger("zoomEnd",{originalEvent:t})}},e.prototype._toDocumentCoordinates=function(t){var e=Bl(this.element);return{left:Xl(t.x+e.left),top:Xl(t.y+e.top)}},e}(fT);Zl(QO,{name:"Map",controls:{attribution:!0,navigator:{panStep:100},zoom:!0},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},bubble:{style:{fill:{color:"#fff",opacity:.5},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:!0,renderPointsAsMarkers:!1}),aT(QO,["beforeReset","click","markerActivate","markerClick","markerCreated","markerMouseEnter","markerMouseLeave","pan","panEnd","reset","shapeClick","shapeCreated","shapeFeatureCreated","shapeMouseEnter","shapeMouseLeave","zoomEnd","zoomStart"]);const tE=QO;var eE=1.5,iE=.4,rE="#000",nE="Arial, Helvetica, sans-serif",oE="12px "+nE,sE="16px "+nE,aE="transparent",lE="#fff",cE=function(){return{icon:{border:{width:1}},label:{font:oE,padding:3},line:{length:10,width:2},visible:!0}},hE=function(){return{outliersField:"",meanField:"",border:{_brightness:.8,width:1},downColor:lE,gap:1,highlight:{border:{opacity:1,width:2},whiskers:{width:3},mean:{width:2},median:{width:2}},mean:{width:2},median:{width:2},spacing:.3,whiskers:{width:2}}},uE=function(){return{gap:eE,spacing:iE,target:{color:"#ff0000"}}},pE=function(){return{gap:.5,line:{color:rE,width:1},spacing:iE}},dE=function(t){return{visible:!0,labels:{font:"11px Arial, Helvetica, sans-serif"},overlay:t.gradients?{}:{gradient:"none"},area:{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.4},rangeArea:{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.4},verticalRangeArea:{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.4},bar:{gap:eE,spacing:iE},boxPlot:hE(),bubble:{border:{width:0},labels:{background:aE},opacity:.6},bullet:uE(),candlestick:{border:{_brightness:.8,width:1},downColor:lE,gap:1,highlight:{border:{opacity:1,width:2},line:{width:2}},line:{color:rE,width:1},spacing:.3},column:{gap:eE,spacing:iE},heatmap:{labels:{color:"",background:aE,visible:!0},highlight:{border:{width:0}}},pie:{labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}}},donut:{margin:1},funnel:{labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}}},horizontalWaterfall:pE(),line:{width:2},notes:cE(),ohlc:{gap:1,highlight:{line:{opacity:1,width:3}},line:{width:1},spacing:.3},radarArea:{line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.5},radarLine:{markers:{visible:!1},width:2},polarArea:{line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.5},polarLine:{markers:{visible:!1},width:2},rangeBar:{gap:eE,spacing:iE},rangeColumn:{gap:eE,spacing:iE},scatterLine:{width:1},verticalArea:{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.4},verticalBoxPlot:hE(),verticalBullet:uE(),verticalLine:{width:2},waterfall:pE()}},fE=function(t){return void 0===t&&(t={}),{axisDefaults:{labels:{font:oE},notes:cE(),title:{font:sE,margin:5}},categoryAxis:{majorGridLines:{visible:!0}},navigator:{pane:{height:90,margin:{top:10}}},seriesDefaults:dE(t),title:{font:sE},subtitle:{font:oE},legend:{labels:{font:oE}}}};function gE(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class mE{constructor(){gE(this,"store",{})}push(t){this.store=t}set(t,e){for(var i=this.store,r=t.split("."),n=r.shift();r.length>0;)i=i[n]=i[n]||{},n=r.shift();i[n]=e}}function yE(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var vE=t=>"".concat(t.fontSize," ").concat(t.fontFamily);class bE extends mE{constructor(){super(...arguments),yE(this,"loaded",!1),yE(this,"element",null),yE(this,"currentAccentColor",void 0)}reset(){this.loaded=!1}getThemeOptions(){return this.store}loadTheme(){this.readTheme()||this.readDefaultTheme(),this.loaded=!0}readTheme(){this.createElement();var t=this.queryColor("primary"),e=this.queryColor("primary-contrast");if(this.loaded&&this.currentAccentColor&&this.currentAccentColor===t)return!0;var i=t!==e;try{i&&(this.currentAccentColor=t,this.push(fE()),this.setColors(),this.setFonts(),this.setSeriesColors())}finally{this.destroyElement()}return i}readDefaultTheme(){this.push(Object.assign({},fE(),{axisDefaults:{crosshair:{color:"rgba(0, 0, 0, 0.5)"},labels:{color:"rgb(101, 101, 101)",font:"12px serif"},line:{color:"rgba(0, 0, 0, 0.08)"},majorGridLines:{color:"rgba(0, 0, 0, 0.08)"},minorGridLines:{color:"rgba(0, 0, 0, 0.04)"},notes:{icon:{background:"rgba(0, 0, 0, 0.5)",border:{color:"rgba(0, 0, 0, 0.5)"}},line:{color:"rgba(0, 0, 0, 0.5)"},label:{font:"14px serif"}},title:{color:"rgb(101, 101, 101)",font:"14px serif"}},chartArea:{background:"rgb(255, 255, 255)"},legend:{inactiveItems:{labels:{color:"rgba(102, 102, 102, 0.5)"},markers:{color:"rgba(102, 102, 102, 0.5)"}},labels:{color:"rgb(101, 101, 101)",font:"14px serif"}},seriesDefaults:{boxPlot:{downColor:"rgba(0, 0, 0, 0.08)",mean:{color:"rgb(246, 246, 246)"},median:{color:"rgb(246, 246, 246)"},whiskers:{color:"rgb(255, 99, 88)"}},bullet:{target:{color:"rgb(101, 101, 101)"}},candlestick:{downColor:"rgb(101, 101, 101)",line:{color:"rgb(101, 101, 101)"}},errorBars:{color:"rgba(0, 0, 0, 0.5)"},horizontalWaterfall:{line:{color:"rgba(0, 0, 0, 0.08)"}},icon:{border:{color:"rgba(0, 0, 0, 0.08)"}},labels:{background:"rgb(255, 255, 255)",color:"rgb(101, 101, 101)",opacity:.8,font:"12px serif"},notes:{icon:{background:"rgba(0, 0, 0, 0.5)",border:{color:"rgba(0, 0, 0, 0.5)"}},line:{color:"rgba(0, 0, 0, 0.5)"},label:{font:"14px serif"}},verticalBoxPlot:{downColor:"rgba(0, 0, 0, 0.08)",mean:{color:"rgb(246, 246, 246)"},median:{color:"rgb(246, 246, 246)"},whiskers:{color:"rgb(255, 99, 88)"}},verticalBullet:{target:{color:"rgb(101, 101, 101)"}},waterfall:{line:{color:"rgba(0, 0, 0, 0.08)"}},area:{opacity:.8}},title:{color:"rgb(101, 101, 101)",font:"16px serif"},seriesColors:["rgb(255, 99, 88)","rgb(255, 210, 70)","rgb(120, 210, 55)","rgb(40, 180, 200)","rgb(45, 115, 245)","rgb(170, 70, 190)"]}))}createElement(){var t=this.element=document.createElement("div");t.style.display="none",t.innerHTML='\n    <div class="k-var--primary"></div>\n    <div class="k-var--primary-contrast"></div>\n    <div class="k-var--base"></div>\n    <div class="k-var--background"></div>\n\n    <div class="k-var--normal-background"></div>\n    <div class="k-var--normal-text-color"></div>\n    <div class="k-var--hover-background"></div>\n    <div class="k-var--hover-text-color"></div>\n    <div class="k-var--selected-background"></div>\n    <div class="k-var--selected-text-color"></div>\n    <div class="k-var--chart-error-bars-background"></div>\n    <div class="k-var--chart-notes-background"></div>\n    <div class="k-var--chart-notes-border"></div>\n    <div class="k-var--chart-notes-lines"></div>\n    <div class="k-var--chart-crosshair-background"></div>\n\n    <div class="k-var--chart-inactive"></div>\n    <div class="k-var--chart-major-lines"></div>\n    <div class="k-var--chart-minor-lines"></div>\n    <div class="k-var--chart-area-opacity"></div>\n\n    <div>\n        <div class="k-var--chart-font"></div>\n        <div class="k-var--chart-title-font"></div>\n        <div class="k-var--chart-label-font"></div>\n    </div>\n\n    <div class="k-var--series">\n      <div class="k-var--series-a"></div>\n      <div class="k-var--series-b"></div>\n      <div class="k-var--series-c"></div>\n      <div class="k-var--series-d"></div>\n      <div class="k-var--series-e"></div>\n      <div class="k-var--series-f"></div>\n    </div>\n',document.body.appendChild(t)}destroyElement(){this.element&&(document.body.removeChild(this.element),this.element=void 0)}setStyle(t,e){this.set(t,e)}setColors(){this.mapColor("axisDefaults.crosshair.color","chart-crosshair-background"),this.mapColor("axisDefaults.labels.color","normal-text-color"),this.mapColor("axisDefaults.line.color","chart-major-lines"),this.mapColor("axisDefaults.majorGridLines.color","chart-major-lines"),this.mapColor("axisDefaults.minorGridLines.color","chart-minor-lines"),this.mapColor("axisDefaults.notes.icon.background","chart-notes-background"),this.mapColor("axisDefaults.notes.icon.border.color","chart-notes-border"),this.mapColor("axisDefaults.notes.line.color","chart-notes-lines"),this.mapColor("axisDefaults.title.color","normal-text-color"),this.mapColor("chartArea.background","background"),this.mapColor("legend.inactiveItems.labels.color","chart-inactive"),this.mapColor("legend.inactiveItems.markers.color","chart-inactive"),this.mapColor("legend.labels.color","normal-text-color"),this.mapColor("seriesDefaults.boxPlot.downColor","chart-major-lines"),this.mapColor("seriesDefaults.boxPlot.mean.color","base"),this.mapColor("seriesDefaults.boxPlot.median.color","base"),this.mapColor("seriesDefaults.boxPlot.whiskers.color","primary"),this.mapColor("seriesDefaults.bullet.target.color","normal-text-color"),this.mapColor("seriesDefaults.candlestick.downColor","normal-text-color"),this.mapColor("seriesDefaults.candlestick.line.color","normal-text-color"),this.mapColor("seriesDefaults.errorBars.color","chart-error-bars-background"),this.mapColor("seriesDefaults.horizontalWaterfall.line.color","chart-major-lines"),this.mapColor("seriesDefaults.icon.border.color","chart-major-lines"),this.mapColor("seriesDefaults.labels.background","background"),this.mapColor("seriesDefaults.labels.color","normal-text-color"),this.mapColor("seriesDefaults.notes.icon.background","chart-notes-background"),this.mapColor("seriesDefaults.notes.icon.border.color","chart-notes-border"),this.mapColor("seriesDefaults.notes.line.color","chart-notes-lines"),this.mapColor("seriesDefaults.verticalBoxPlot.downColor","chart-major-lines"),this.mapColor("seriesDefaults.verticalBoxPlot.mean.color","base"),this.mapColor("seriesDefaults.verticalBoxPlot.median.color","base"),this.mapColor("seriesDefaults.verticalBoxPlot.whiskers.color","primary"),this.mapColor("seriesDefaults.verticalBullet.target.color","normal-text-color"),this.mapColor("seriesDefaults.waterfall.line.color","chart-major-lines"),this.mapColor("title.color","normal-text-color");var t=parseFloat(this.queryStyle("chart-area-opacity").opacity);isNaN(t)||(this.setStyle("seriesDefaults.area.opacity",t),this.setStyle("seriesDefaults.labels.opacity",t))}setFonts(){var t=vE(this.queryStyle("chart-font")),e=vE(this.queryStyle("chart-title-font")),i=vE(this.queryStyle("chart-label-font"));this.setStyle("axisDefaults.labels.font",i),this.setStyle("axisDefaults.notes.label.font",t),this.setStyle("axisDefaults.title.font",t),this.setStyle("legend.labels.font",t),this.setStyle("seriesDefaults.labels.font",i),this.setStyle("seriesDefaults.notes.label.font",t),this.setStyle("title.font",e)}setSeriesColors(){var t=this.element,e=[].slice.call(t.querySelectorAll(".k-var--series div")).reduce(((t,e)=>(t[(t=>t.match(/series-([a-z])$/)[1].toLowerCase().charCodeAt(0)-"a".charCodeAt(0))(e.className)]=window.getComputedStyle(e).backgroundColor,t)),[]);this.setStyle("seriesColors",e)}mapColor(t,e){this.setStyle(t,this.queryColor(e))}queryColor(t){return this.queryStyle(t).backgroundColor}queryStyle(t){var e=this.element;return window.getComputedStyle(e.querySelector(".k-var--".concat(t)))}}class wE extends V{constructor(t,e,i,r){super(t,e),this.extendOptions(e),this.themeService=i,this.intlService=r}destroy(){this.destroyWidget()}getThemeOptions(){return this.themeService?(this.themeService.loadTheme(),this.themeService.getThemeOptions()):{}}initWidget(t,e){this.widget=this.createWidget(t||this.element,e||this.options,this.getThemeOptions(),this.intlService,this.instanceObserver)}destroyWidget(){this.widget&&(this.widget.destroy(),this.widget=null)}createWidget(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return new(this.getWidgetConstructor())(t,e,i,{intlService:r,observer:n,sender:this})}getWidgetConstructor(){}setOptions(t){this.widget&&(this.options=t,this.widget.setOptions(t,this.getThemeOptions()))}refresh(){this.themeService&&this.themeService.reset(),this.setOptions(this.options)}areOptionsChanged(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ignoreOptions:[]},i=Object.keys(t),r=0;r<i.length;r++){var n=i[r];if(t[n]!==this.options[n]&&!e.ignoreOptions.includes(n))return!0}return!1}}function xE(t){var{id:e="",widgetOptions:i="",componentOptions:r={},services:n={themeService:{},intlService:{}},componentConstructor:o}=t,s=K(e);if(s){var a=JSON.parse(i),l=re(e),c=u(a,r);if(l)ee(l,c);else n.intlService&&n.intlService.setLocale&&(c.locale=c.locale||{},c.locale.name=e,n.intlService.setLocale(c.locale)),oe(e,new o(s,c,n.themeService,n.intlService))}}class SE extends wE{constructor(t,e,i,r){super(t,e,i,r),this.extendOptions(e),this.initWidget()}getWidgetConstructor(){return cA}}function kE(t,e,i){xE({id:t,widgetOptions:e,componentOptions:i,services:{themeService:new bE,intlService:ys},componentConstructor:SE})}class CE extends wE{constructor(t,e,i,r){super(t,e,i,r),this.extendOptions(e),this.initWidget()}getWidgetConstructor(){return g_}}function AE(t,e,i){xE({id:t,widgetOptions:e,componentOptions:i,services:{themeService:new bE,intlService:ys},componentConstructor:CE})}function _E(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var TE=D("index");class OE extends V{constructor(t,e){super(t,e),_E(this,"options",{dotNetInstance:null,mode:"",debounceDelay:1}),this.extendOptions(e),this.collapsibleItems=[],this.setCollapsibleItems(),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.debouncedResize=ji((t=>{this.onResize(t)}),this.options.debounceDelay).bind(this),window.addEventListener("resize",this.debouncedResize)}unbindEvents(){window.removeEventListener("resize",this.debouncedResize),this.debouncedResize=null}getItems(){return Array.from(this.element.querySelector(".k-breadcrumb-container").children)}setCollapsibleItems(){var t=this.getItems(),e=t.slice(1,t.length-1).map((t=>{var e=N(TE,t);return{index:e,offsetWidth:this.getItemWidth(e),expanded:!0}}));this.collapsibleItems=e}setItemDisplay(t,e){var i=this.getItemByIndex(t.index),r="wrap"===this.options.mode?2:1;if(t.index===r)for(var n=i.children,o=1;o<n.length;o++)n[o].style.display=e;else i.style.display=e}getWidths(){var t=this.getItems().map((t=>t.offsetWidth)).reduce(((t,e)=>t+e),0),e=getComputedStyle(this.element);return{totalItemsWidth:t,elementInternalWidth:this.element.clientWidth-parseInt(e.paddingLeft)-parseInt(e.paddingRight)}}getItemWidth(t){return this.getItemByIndex(t).offsetWidth}getItemByIndex(t){return this.element.querySelector(R(TE,t))}collapseItem(t){this.setItemDisplay(t,"none"),t.expanded=!1}expandItem(t){this.setItemDisplay(t,""),t.expanded=!0}onResize(t){if("auto"===this.options.mode&&this.collapsibleItems.length){var{totalItemsWidth:e,elementInternalWidth:i}=this.getWidths(),r=this.collapsibleItems.find((t=>t.expanded)),n=[...this.collapsibleItems].reverse().find((t=>!t.expanded));r&&e>=i&&!0!==t?(this.collapseItem(r),this.onResize(!1)):n&&e+n.offsetWidth<i&&!1!==t&&(this.expandItem(n),this.onResize(!0))}}handleChange(t){t&&(this.setCollapsibleItems(),this.collapsibleItems.forEach((t=>this.expandItem(t)))),this.onResize()}}function EE(t,e){Qt(OE,t,e)}function ME(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class PE extends Da{constructor(t,e){super(t,e),ME(this,"handlerMap",{showTooltip:"onObserverShowTooltip",hideTooltip:"onObserverHideTooltip",seriesClick:"onObserverSeriesClick"})}}function IE(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function DE(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?IE(Object(i),!0).forEach((function(e){FE(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):IE(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function FE(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var RE="mouseleave";class LE extends V{constructor(t,e,i,r){super(t,e),FE(this,"options",{seriesTooltipPopupId:"",crosshairTooltips:{},jsinterop:{onObserverShowCrosshairTooltip:"",onObserverShowTooltip:"",onObserverSeriesClick:""}}),FE(this,"onMouseLeave",(t=>{this.hideElements(t)})),FE(this,"onObserverShowTooltip",(t=>{this.showTooltip(t)})),FE(this,"onObserverHideTooltip",(t=>{this.hideTooltip(t)})),FE(this,"onObserverSeriesClick",(t=>{var e=this.createSeriesClickEventArgs(t);this.invokeSeriesClickAsync(e)})),this.extendOptions(e),this.themeService=i,this.createInstanceObserver(),this.chartInstance=this.createChart(this.element,this.options,this.getThemeOptions(),r,this.chartInstanceObserver),this.bindEvents()}destroy(){this.unbindEvents(),this.destroyInstanceObserver(),this.chartInstance&&(this.chartInstance.destroy(),this.chartInstance=null)}bindEvents(){this.element.addEventListener(RE,this.onMouseLeave)}unbindEvents(){this.element.removeEventListener(RE,this.onMouseLeave)}getThemeOptions(){return this.themeService.loadTheme(),this.themeService.getThemeOptions()}createChart(t,e,i,r,n){return new(this.getChartConstructor())(t,e,i,{intlService:r,observer:n,sender:this})}getChartConstructor(){return RS}setOptions(t){this.chartInstance&&(this.options=t,this.chartInstance.setOptions(t,this.getThemeOptions()))}refresh(){this.themeService.reset(),this.setOptions(this.options)}createInstanceObserver(){this.chartInstanceObserver=new PE(this)}destroyInstanceObserver(){this.chartInstanceObserver=null}trigger(){}requiresHandlers(){return!1}invokeShowCrosshairTooltipAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverShowCrosshairTooltip,t)}invokeShowSeriesTooltipAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverShowTooltip,t)}invokeSeriesClickAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverSeriesClick,t)}showTooltip(t){t.crosshair?this.showCrosshairTooltip(t):this.showSeriesTooltip(t)}hideTooltip(t){t.crosshair?this.hideCrosshairTooltip(t):this.hideSeriesTooltip(t)}showCrosshairTooltip(t){var e=this.getCrosshairTooltipPopup(t);if(e){e.options.elementAlign={horizontal:"center",vertical:"center"},this.setTooltipPosition(t.anchor,e);var i=this.getCrosshairTooltipTemplateContext(t);this.invokeShowCrosshairTooltipAsync(i)}}hideCrosshairTooltip(t){var e=this.getCrosshairTooltipPopup(t);e&&e.close()}showSeriesTooltip(t){var e=this.getSeriesTooltipPopup();this.setTooltipPosition(t.anchor,e);var i=this.getSeriesTooltipTemplateContext(t);this.invokeShowSeriesTooltipAsync(i)}hideSeriesTooltip(){var t=this.getSeriesTooltipPopup();t&&t.close()}getTooltipAnchorRect(t){var e=this.getTooltipAnchorOffset(t);return{x:0,y:0,width:0,height:0,top:e.top,left:e.left,right:e.right,bottom:e.bottom}}getTooltipAnchorOffset(t){return t?t.point:{top:0,left:0}}getCrosshairTooltipPopup(t){var e=this.getCrosshairAxisKey(t),i=this.getCrosshairTooltip(e);if(i)return re(i.popupId)}getSeriesTooltipPopup(){return re(this.options.seriesTooltipPopupId)}setTooltipPosition(t,e){if(e&&t){var i=this.getTooltipAnchorRect(t);e.options.anchorAlign=t.align,e.options.anchorRect=i,e.positionElement()}}getCrosshairTooltipTemplateContext(t){var e=((t.options||{}).tooltip||{}).format||t.format,i=t.point,r={formattedValue:e&&i&&i.formatValue?i.formatValue(e):String(t.value),axisKey:this.getCrosshairAxisKey(t)};return this.extendWithTooltipStyling(r,t)}getCrosshairAxisKey(t){var{axisName:e,axisIndex:i}=t;return"".concat(e).concat(i)}getCrosshairTooltip(t){var e=this.options.crosshairTooltips;return e?e[t]:{}}getSeriesTooltipTemplateContext(t){if(t.shared)return this.getSeriesTooltipSharedTemplateContext(t);var e=DE({},this.createSeriesTooltipTemplatePoint(t.point,t.format));return this.extendWithTooltipStyling(e,t)}getSeriesTooltipSharedTemplateContext(t){var e=t.points.filter((t=>x(t.series.name))).length>0,i=t.series.length>1,r=1;e&&r++,i&&r++;var n=this.createTooltipTemplatePoints(t),o={category:t.category,categoryText:t.categoryText,points:n,showSeriesColorMarker:i,showSeriesName:e,headerColumnColSpan:r};return this.extendWithTooltipStyling(o,t)}createTooltipTemplatePoints(t){var e=t.points?t.points.map((e=>this.createSeriesTooltipTemplatePoint(e,t.format))):[];return e}createSeriesTooltipTemplatePoint(t,e){var i=this.convertToSeriesPoint(t),r=((t.options||{}).tooltip||{}).format||e;return DE(DE({},i),{},{formattedValue:r&&t.formatValue?t.formatValue(r):String(t.value)})}hideElements(t){var e=t.relatedTarget,i=e&&Boolean(e.closest(".k-chart-tooltip")),r=q(this.element,e);e&&(i||r)||this.chartInstance.hideElements()}createSeriesClickEventArgs(t){return this.convertToSeriesPoint(t.point)}convertToSeriesPoint(t){var e,i=p(t.dataItem)?Object.getPrototypeOf(t.dataItem):null;return p(t.dataItem)&&i&&i!==Object.prototype&&(e=u({},i,t.dataItem)),{dataItem:e,category:t.category,categoryIndex:t.categoryIx,seriesIndex:t.series.index,seriesColor:t.series.color,seriesName:t.series.name||"",percentage:t.percentage,pointIndex:t.pointIx||t.index}}extendWithTooltipStyling(t,e){return u(t,{tooltipStyle:E(e.style),tooltipClass:e.className||""})}}var NE={autoBindElements:!0,liveDrag:!1,partialRedraw:!0,tooltip:{visible:!1},seriesDefaults:{tooltip:{visible:!1}}};class BE extends LE{getChartConstructor(){return QS}extendOptions(t){this.applyNavigatorDefaults(t),super.extendOptions(t)}setOptions(t){this.applyNavigatorDefaults(t);var e=this.getThemeOptions();this.chartInstance.applyOptions(t,e),super.setOptions(t)}applyNavigatorDefaults(t){g(t.navigator,NE)}}__webpack_require__(840);var jE=t=>({x:{location:t.pageX},y:{location:t.pageY}});function zE(t,e){for(var i=0;i<t.length;i++)if(e[t[i]])return!0;return!1}var UE=[{end:"panend",move:"panmove",start:"panstart"},{gesturechange:"pinchmove",gestureend:"pinchend",gesturestart:"pinchstart"},{press:"press"},{tap:"tap"}];class $E{constructor(t,e){this.hammerInstance=t,this.eventHandlers={},this.tap=this.tap.bind(this),this.press=this.press.bind(this),this.panstart=this.panstart.bind(this),this.panmove=this.panmove.bind(this),this.panend=this.panend.bind(this),this.pinchstart=this.pinchstart.bind(this),this.pinchmove=this.pinchmove.bind(this),this.pinchend=this.pinchend.bind(this),e&&this.bind(e)}tap(t){this.trigger("tap",t)}press(t){this.trigger("press",t)}panstart(t){delete this.previous,this.previous=this.trigger("start",t)}panmove(t){this.previous=this.trigger("move",t)}panend(t){this.trigger("end",t),delete this.previous}pinchstart(t){this.trigger("gesturestart",t)}pinchmove(t){this.trigger("gesturechange",t)}pinchend(t){this.trigger("gestureend",t)}trigger(t,e){var i=((t,e)=>{var i=t.pointers,r=i[0],n=r.pageX,o=r.pageY,s=0;if(i.length>1){var a=i[0],l=i[1];s=Math.sqrt(Math.pow(a.pageX-l.pageX,2)+Math.pow(a.pageY-l.pageY,2))}return{distance:s,event:t.srcEvent,preventDefault:function(){t.preventDefault()},target:t.target,touches:i.map(jE),type:t.type,x:{delta:e?n-e.x.location:0,initialDelta:t.deltaX,location:n,startLocation:n-t.deltaX},y:{delta:e?o-e.y.location:0,initialDelta:t.deltaY,location:o,startLocation:o-t.deltaY}}})(e,this.previous);return this.eventHandlers[t]&&this.eventHandlers[t](i),i}bind(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.unbind(),this.eventHandlers=t;for(var e=0;e<UE.length;e++){var i=UE[e],r=Object.keys(i);if(zE(r,t))for(var n=0;n<r.length;n++){var o=i[r[n]];this.hammerInstance.on(o,this[o])}}}unbind(){this.hammerInstance&&this.hammerInstance.off(),this.eventHandlers={}}destroy(){this.hammerInstance&&(this.hammerInstance.destroy(),delete this.hammerInstance),delete this.eventHandlers}toggleDrag(t){this.toggle("pan",t)}toggleZoom(t){this.toggle("pinch",t)}toggle(t,e){this.hammerInstance&&this.hammerInstance.get(t).set({enable:e})}}function HE(t,e,i){var r=K(t);if(r){var n=JSON.parse(e),o=re(t),s=u(n,i);if(o)ee(o,s);else{s.locale.name=t,ys.setLocale(s.locale);var a=function(t,e,i,r){return new("stockchart"===e._constructor?BE:LE)(t,e,i,r)}(r,s,new bE,ys);oe(t,a)}}}function VE(t){te(t)}function qE(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}ba.register(Cs),Fp.register(class{static create(t,e){var i=window.Hammer,r=new i(t,{recognizers:[[i.Tap],[i.Pan],[i.Pinch],[i.Press,{time:0}]]});return new $E(r,e)}});var WE=[ge.ARROWDOWN,ge.ARROWRIGHT,ge.ARROWLEFT,ge.ARROWUP,ge.ENTER];class XE extends V{constructor(t,e){super(t,e),qE(this,"options",{dotNetInstance:null,jsinterop:{keydown:"",blur:""}}),qE(this,"onKeyDown",(t=>(this.invokeMethodAsync(this.options.jsinterop.keydown,t.name),t.name===ge.ENTER))),qE(this,"invokeBlur",(()=>{this.invokeMethodAsync(this.options.jsinterop.blur)})),this.extendOptions(e),this.initNavigationService(),this.bindEvents()}destroy(){this.navigationService.destroy(),this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener("blur",this.invokeBlur)}unbindEvents(){this.element.removeEventListener("blur",this.invokeBlur)}initNavigationService(){this.navigationService=new we(this.element),this.navigationService.bind(WE,this.onKeyDown)}focus(){setTimeout((()=>{this.element.focus()}),100)}}function GE(t,e){Qt(XE,t,e)}function KE(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class YE extends V{constructor(t,e){super(t,e),KE(this,"options",{dotNetInstance:null,jsinterop:{keydown:"",blur:""}}),KE(this,"closePopup",(()=>(this.focus(),this.invokeMethodAsync(this.options.jsinterop.close),!1))),KE(this,"openPopup",(()=>(this.invokeMethodAsync(this.options.jsinterop.open),!1))),KE(this,"focus",(()=>{this.element.focus()})),this.popupElement=K(e.popupId),this.extendOptions(e),this.initNavigationService(),this.initPopupNavigationService()}destroy(){this.navigationService.destroy(),this.popupNavigationService.destroy(),super.destroy()}initNavigationService(){this.navigationService=new we(this.element),this.navigationService.bind("".concat(me.ALT," ").concat(ge.ARROWDOWN),this.openPopup),this.navigationService.bind("".concat(me.ALT," ").concat(ge.ARROWUP),this.closePopup)}initPopupNavigationService(){this.popupNavigationService=new we(this.popupElement),this.popupNavigationService.bind([ge.ESC,"".concat(me.ALT," ").concat(ge.ARROWUP)],this.closePopup)}}function JE(t,e){Qt(YE,t,e)}function ZE(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var QE=[ge.ARROWUP,ge.ARROWDOWN,ge.ARROWLEFT,ge.ARROWRIGHT];class tM extends V{constructor(t,e){super(t,e),ZE(this,"onDrag",(t=>{this.moveDragHandleFromEvent(t),this.throttleChangeValue()})),ZE(this,"onDragEnd",(()=>{this.changeValue(),this.dragHandle.focus()})),ZE(this,"onNavigate",(t=>{var e=B("top",this.dragHandle),i=B("left",this.dragHandle);switch(t.name){case ge.ARROWDOWN:e+=4;break;case ge.ARROWUP:e-=4;break;case ge.ARROWRIGHT:i+=4;break;case ge.ARROWLEFT:i-=4}this.moveDragHandle(e,i),this.changeValue()})),ZE(this,"onClick",(t=>{this.moveDragHandleFromEvent(t),this.dragHandle.focus(),this.changeValue()})),this.gradient=this.element.querySelector(".k-hsv-rectangle"),this.dragHandle=this.element.querySelector(".k-draghandle"),this.setOptions(e),this.initDraggable(),this.bindEvents(),this.throttleChangeValue=zi(this.changeValue,150).bind(this)}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.gradient.addEventListener("click",this.onClick),this.initNavigationService()}unbindEvents(){this.gradient.removeEventListener("click",this.onClick)}setOptions(t){super.setOptions(t),this.hsva=this.options.hsva,this.initDragHandlePosition()}initNavigationService(){this.navigationService=new we(this.dragHandle),this.navigationService.bind(QE,this.onNavigate)}initDraggable(){this.draggable=new bi(this.element,{filter:".k-hsv-gradient",offsetDropClue:!1,events:{drag:this.onDrag,dragEnd:this.onDragEnd}})}initDragHandlePosition(){var t=(1-this.hsva.v)*this.gradient.offsetHeight,e=this.hsva.s*this.gradient.offsetWidth;this.dragHandle.style.display="block",this.setDragHandlePosition(t,e)}setDragHandlePosition(t,e){this.dragHandle&&(this.dragHandle.style.top="".concat(t,"px"),this.dragHandle.style.left="".concat(e,"px"))}moveDragHandleFromEvent(t){var e=this.gradient.getBoundingClientRect();this.moveDragHandle(t.clientY-e.top,t.clientX-e.left)}moveDragHandle(t,e){var i=ue(t,0,this.gradient.offsetHeight),r=ue(e,0,this.gradient.offsetWidth);this.setDragHandlePosition(i,r),this.hsva.s=r/this.gradient.offsetWidth,this.hsva.v=1-i/this.gradient.offsetHeight}changeValue(){this.invokeMethodAsync(this.options.jsinterop.changeValue,this.hsva)}}function eM(t,e){Qt(tM,t,e)}function iM(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class rM extends V{constructor(t,e){super(t,e),iM(this,"options",{dotNetInstance:null,jsinterop:{change:""}}),iM(this,"onKeyDown",((t,e)=>{this.isEnterKeyActionable(e.target)||this.invokeMethodAsync(this.options.jsinterop.change)})),iM(this,"onFocusOut",(t=>{q(this.element,t.relatedTarget)||this.invokeChange()})),iM(this,"invokeChange",(()=>{this.invokeMethodAsync(this.options.jsinterop.change)})),this.extendOptions(e),this.bindEvents(),this.initNavigationService()}bindEvents(){this.element.addEventListener("focusout",this.onFocusOut)}unbindEvents(){this.element.removeEventListener("focusout",this.onFocusOut)}destroy(){this.navigationService.destroy(),this.unbindEvents(),super.destroy()}initNavigationService(){this.navigationService=new we(this.element),this.navigationService.bind("".concat(ge.ENTER),this.onKeyDown)}isEnterKeyActionable(t){return!(!t.matches(".k-button")&&t.querySelector(".k-selected.k-focus"))}}function nM(t,e){Qt(rM,t,e)}function oM(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var sM="keydown";class aM extends V{constructor(t,e){super(t,e),oM(this,"options",{dotNetInstance:null,itemListDataId:"",jsinterop:{itemListKeyDown:""}}),oM(this,"onKeyDown",(t=>{var e=[ge.ARROWRIGHT,ge.ARROWLEFT,ge.ARROWUP,ge.ARROWDOWN].includes(t.key);if(t.key===ge.TAB){var i=t.target.closest(".k-columnmenu-item-wrapper"),r=i?i.querySelector(".k-columnmenu-item"):null,n="true"===(r?r.getAttribute("aria-expanded"):"");(!n||n&&t.target===r&&t.shiftKey)&&t.preventDefault()}else e&&tt("k-columnmenu-item",t.target)&&t.preventDefault()})),oM(this,"onItemListKeyDown",(t=>{var e=ht(t.target),i=t.target.closest(".k-filter-menu");if(!e||!i||t.key!==ge.ARROWUP&&t.key!==ge.ARROWDOWN||t.shiftKey){var r=P(t);this.invokeMethodAsync(this.options.jsinterop.itemListKeyDown,r)}})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){var t=this.getItemListElement();t&&t.addEventListener(sM,this.onItemListKeyDown),this.element.addEventListener(sM,this.onKeyDown)}unbindEvents(){var t=this.getItemListElement();t&&t.removeEventListener(sM,this.onItemListKeyDown),this.element.removeEventListener(sM,this.onKeyDown)}getItemListElement(){return K(this.options.itemListDataId)}}function lM(t,e){Qt(aM,t,e)}function cM(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class hM extends V{constructor(t,e){super(t,e),cM(this,"options",{selector:"",popupId:""}),cM(this,"onContextMenu",(t=>{t.preventDefault(),this.activeElement=t.target,this.openPopup(t.pageX,t.pageY)})),cM(this,"onPopupKeyDown",(t=>{t.key===ge.ESC&&(this.closePopup(),this.activeElement&&this.activeElement.focus())})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.anchors=null}bindEvents(){this.anchors=document.querySelectorAll(this.options.selector),this.anchors.forEach((t=>{t.addEventListener("contextmenu",this.onContextMenu)})),K(this.options.popupId).addEventListener("keydown",this.onPopupKeyDown)}unbindEvents(){this.anchors.forEach((t=>{t.removeEventListener("contextmenu",this.onContextMenu)}))}openContextMenu(t){var e=t.clientX+window.scrollX,i=t.clientY+window.scrollY;this.openPopup(e,i)}focusFirstMenuItem(){var t=this.getPopup();if(t){var e=t.element.querySelector(".k-context-menu .k-item");e&&e.focus()}}openPopup(t,e){var i=this.getPopup();i.openAsync(null,t,e),this.activeElement&&i.setZIndex(this.activeElement)}closePopup(){this.getPopup().closeAsync()}getPopup(){return re(this.options.popupId)}}function uM(t,e){re(t)||oe(t,new hM(null,e))}var pM=function(t,e){return pM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},pM(t,e)};Object.create;Object.create;var dM,fM,gM,mM=function(t){return t?new Date(t.getTime()):null},yM=function(t,e){var i=mM(t);return 0===e&&23===i.getHours()&&i.setHours(i.getHours()+2),i},vM=function(t,e,i,r,n,o,s){void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=0);var a=new Date(t,e,i,r,n,o,s);return t>-1&&t<100&&a.setFullYear(a.getFullYear()-1900),yM(a,r)},bM=function(t){return vM(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0)},wM=function(t,e){return!t&&!e||t&&e&&t.getTime()===e.getTime()},xM=function(t){return function(t,e){var i=mM(t);return i.setDate(i.getDate()+e),yM(i,t.getHours())}(vM(t.getFullYear(),t.getMonth()+1,1,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),-1)},SM=function(t,e){var i=mM(t),r=(12+(i.getMonth()+e)%12)%12;return i.setMonth(i.getMonth()+e),function(t,e){return t.getMonth()!==e?xM(SM(t,-1)):t}(yM(i,t.getHours()),r)},kM=function(){this.symbols="",this.partMap=[]},CM="_",AM=68,_M="d",TM="en",OM={DELETE:"Delete",BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",ARROW_LEFT:"ArrowLeft",ARROW_UP:"ArrowUp",ARROW_RIGHT:"ArrowRight",ARROW_DOWN:"ArrowDown",SPACE:" ",END:"End",HOME:"Home",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown"},EM=function(t){return new Array(Math.max(t,0)).fill("0").join("")},MM=function(t){return t.replace(/^0*/,"")},PM=function(t,e){return t[e.pattern[0]]=e.type,t},IM=function(t){return null!=t},DM=function(t){return IM(t)&&"number"==typeof t&&!Number.isNaN(t)},FM=function(t){return parseInt(t,10)},RM=function(t,e,i){return Math.min(i,Math.max(e,t))},LM=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object.assign.apply(Object,t)},NM=(dM="setFullYear",function(t,e){var i=mM(t);return i[dM](e),i}),BM=function(t,e,i,r,n,o,s,a){return!(!t||t.getFullYear()!==e||t.getMonth()!==i||t.getDate()!==r||t.getHours()!==n||t.getMinutes()!==o||t.getSeconds()!==s||t.getMilliseconds()!==a)},jM=function(t){return IM(t)&&t.getTime&&DM(t.getTime())},zM=/d|M|H|h|m|s/,UM=function(){function t(t){var e=t.intlService,i=t.formatPlaceholder,r=t.format,n=t.cycleTime,o=void 0!==n&&n,s=t.twoDigitYearMax,a=void 0===s?AM:s,l=t.value,c=void 0===l?null:l,h=t.autoCorrectParts,u=void 0===h||h;if(this.year=!0,this.month=!0,this.date=!0,this.hours=!0,this.minutes=!0,this.seconds=!0,this.milliseconds=!0,this.leadingZero=null,this.typedMonthPart="",this.knownParts="adHhmMsEyS",this.symbols={E:"E",H:"H",M:"M",a:"a",d:"d",h:"h",m:"m",s:"s",y:"y",S:"S"},this._value=bM(new Date),this.cycleTime=!1,this._partiallyInvalidDate={startDate:null,invalidDateParts:{E:{value:null,date:null,startDateOffset:0},H:{value:null,date:null,startDateOffset:0},M:{value:null,date:null,startDateOffset:0},a:{value:null,date:null,startDateOffset:0},d:{value:null,date:null,startDateOffset:0},h:{value:null,date:null,startDateOffset:0},m:{value:null,date:null,startDateOffset:0},s:{value:null,date:null,startDateOffset:0},y:{value:null,date:null,startDateOffset:0},S:{value:null,date:null,startDateOffset:0}}},this.intl=e,this.formatPlaceholder=i||"wide",this.format=r,this.cycleTime=o,this.monthNames=this.allFormattedMonths(this.localeId),this.dayPeriods=this.allDayPeriods(this.localeId),this.twoDigitYearMax=a,this.autoCorrectParts=u,c)this._value=mM(c);else{this._value=bM(new Date);for(var p=this.dateFormatString(this.value,this.format).symbols,d=0;d<p.length;d++)this.setExisting(p[d],!1)}}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){(!t||t instanceof Date)&&(this._value=t,this.resetInvalidDate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localeId",{get:function(){for(var t=TM,e=Object.keys(this.intl.cldr),i=0;i<e.length;i++){var r=e[i],n=this.intl.cldr[r];if(n.name&&n.calendar&&n.numbers&&n.name!==TM){t=n.name;break}}return t},enumerable:!0,configurable:!0}),t.prototype.setValue=function(t){t?wM(t,this._value)||(this._value=mM(t),this.modifyExisting(!0)):(this._value=bM(new Date),this.modifyExisting(!1)),this.resetInvalidDate()},t.prototype.hasValue=function(){var t=this;return this.intl.splitDateFormat(this.format,this.localeId).reduce((function(e,i){return e||"literal"!==i.type&&"dayperiod"!==i.type&&t.getExisting(i.pattern[0])}),!1)},t.prototype.getValue=function(){for(var t=0;t<this.knownParts.length;t++)if(!this.getExisting(this.knownParts[t]))return null;return mM(this.value)},t.prototype.getFormattedDate=function(t){return this.intl.formatDate(this.getValue(),t,this.localeId)},t.prototype.getTextAndFormat=function(t){void 0===t&&(t="");var e=t||this.format,i=this.intl.formatDate(this.value,e,this.localeId),r=this.dateFormatString(this.value,e);if(!this.autoCorrectParts&&this._partiallyInvalidDate.startDate){for(var n="",o=this.intl.formatDate(this.value,e,this.localeId),s=this.getFormattedInvalidDates(e),a=0;a<o.length;a++){var l=r.symbols[a];if("literal"===r.partMap[a].type)n+=i[a];else if(this.getInvalidDatePartValue(l)){var c=this.getPartsForSegment(r,a);if("M"===l){var h=(FM(this.getInvalidDatePartValue(l))+1).toString();if(c.length>2)n+=s[l][a];else if(this.getInvalidDatePartValue(l))n+=EM(c.length-h.length)+h,a+=c.length-1;else n+=s[l][a]}else if(this.getInvalidDatePartValue(l)){h=this.getInvalidDatePartValue(l).toString();n+=EM(c.length-h.length)+h,a+=c.length-1}else n+=s[l][a]}else n+=i[a]}i=n}return this.merge(i,r)},t.prototype.getFormattedInvalidDates=function(t){var e=this;void 0===t&&(t="");var i=t||this.format,r={E:"",H:"",M:"",a:"",d:"",h:"",m:"",s:"",y:"",S:""};return Object.keys(this._partiallyInvalidDate.invalidDateParts).forEach((function(t){var n=e.getInvalidDatePart(t).date;if(n){var o=e.intl.formatDate(n,i,e.localeId);r[t]=o}})),r},t.prototype.modifyExisting=function(t){for(var e=this.dateFormatString(this.value,this.format).symbols,i=0;i<e.length;i++)this.setExisting(e[i],t)},t.prototype.getExisting=function(t){switch(t){case"y":return this.year;case"M":case"L":return this.month;case"d":return this.date;case"E":return this.date&&this.month&&this.year;case"h":case"H":return this.hours;case"m":return this.minutes;case"s":return this.seconds;case"S":return this.milliseconds;default:return!0}},t.prototype.setExisting=function(t,e){switch(t){case"y":this.year=e,!1===e&&this._value.setFullYear(2e3);break;case"M":this.month=e,!1===e&&this.autoCorrectParts&&this._value.setMonth(0);break;case"d":this.date=e;break;case"h":case"H":this.hours=e;break;case"m":this.minutes=e;break;case"s":this.seconds=e;break;case"S":this.milliseconds=e}this.getValue()&&this.resetInvalidDate()},t.prototype.modifyPart=function(t,e){if(IM(t)&&IM(e)&&0!==e){var i,r=mM(this.value),n=!1,o="M"===t,s="d"===t||"E"===t,a=this.getExisting(t);if(this.autoCorrectParts||!s&&!o)switch(t){case"y":r.setFullYear(r.getFullYear()+e);break;case"M":r=SM(this.value,e);break;case"d":case"E":r.setDate(r.getDate()+e);break;case"h":case"H":r.setHours(r.getHours()+e),n=!0;break;case"m":r.setMinutes(r.getMinutes()+e),n=!0;break;case"s":r.setSeconds(r.getSeconds()+e),n=!0;break;case"S":r.setMilliseconds(r.getMilliseconds()+e);break;case"a":r.setHours(r.getHours()+12*e),n=!0}else{var l=this._partiallyInvalidDate.invalidDateParts||{},c=this.getInvalidDatePartValue(t),h=l.y.value||r.getFullYear(),u=l.M.value||r.getMonth(),p=l.d.value||l.E.value||r.getDate(),d=l.h.value||l.H.value||r.getHours(),f=l.m.value||r.getMinutes(),g=l.s.value||r.getSeconds(),m=l.S.value||r.getMilliseconds();switch(t){case"y":h+=e;break;case"M":u+=e;break;case"d":case"E":p+=e}if("M"===t){if((u<0||u>11)&&a)return this.setExisting(t,!1),void this.resetInvalidDateSymbol(t);if(!a){if(u<0)u=RM(u%11+1+11,0,11);else{var y=IM(c)?u:(e-1)%12;u=RM(y,0,11)}u=RM(u,0,11)}u=RM(u,0,11)}else if("d"===t)if(a){if(p<=0||p>31)return this.setExisting(t,!1),void this.resetInvalidDateSymbol(t)}else if(!a){if(IM(c)&&(p<=0||p>31))return this.setExisting(t,!1),void this.resetInvalidDateSymbol(t);if(e<0){var v=IM(c)?p:31-Math.abs(e%31)+1;p=RM(v,1,31)}else{v=IM(c)?p:e%31;p=RM(v,1,31)}p=RM(p,1,31)}var b=vM(h,u,p,d,f,g,m),w=o||s?this.modifyDateSymbolWithValue(r,t,o?u:p):null,x=BM(b,h,u,p,d,f,g,m);this.getValue()&&BM(b,h,u,p,d,f,g,m)?(r=mM(b),this.markDatePartsAsExisting()):o&&w?w.getMonth()===u?this.getExisting("d")?x?(r=mM(b),this.resetInvalidDateSymbol(t)):(i=!0,this.setInvalidDatePart(t,{value:u,date:mM(w),startDateOffset:e,startDate:mM(this.value)}),this.setExisting(t,!1)):x?(this.resetInvalidDateSymbol(t),r=mM(b),this.getExisting("M")&&this.getExisting("y")&&(this.setExisting("d",!0),this.resetInvalidDateSymbol("d"))):(this.resetInvalidDateSymbol(t),r=mM(w)):(i=!0,this.setInvalidDatePart(t,{value:u,date:mM(w),startDateOffset:e,startDate:mM(this.value)}),this.setExisting(t,!1)):s&&w&&(w.getDate()===p?this.getExisting("M")?x?(r=mM(b),this.resetInvalidDateSymbol(t)):(i=!0,this.setInvalidDatePart(t,{value:p,date:mM(w),startDateOffset:e,startDate:mM(this.value)}),this.setExisting(t,!1)):x?(r=mM(b),this.resetInvalidDateSymbol(t),this.getExisting("d")&&this.getExisting("y")&&(this.setExisting("M",!0),this.resetInvalidDateSymbol("M"))):(this.resetInvalidDateSymbol(t),r=mM(w)):(i=!0,this.setInvalidDatePart(t,{value:p,date:mM(this.value),startDateOffset:e,startDate:mM(this.value)}),this.setExisting(t,!1)))}this.shouldNormalizeCentury()&&(r=this.normalizeCentury(r)),n&&!this.cycleTime&&(r.getDate(),this._value.getDate()),i||(this.setExisting(t,!0),this._value=r,this.getValue()&&this.resetInvalidDate())}},t.prototype.parsePart=function(t){for(var e,i=t.symbol,r=t.currentChar,n=t.resetSegmentValue,o=t.cycleSegmentValue,s=t.rawTextValue,a=t.isDeleting,l=t.originalFormat,c=!o,h=this.dateFormatString(this.value,this.format),u=h.partMap.filter((function(t){return"literal"===t.type})).map((function(t,e){return{datePartIndex:e,type:t.type,pattern:t.pattern,literal:""}})),p=h.partMap.map((function(t){return{type:t.type,pattern:t.pattern,text:""}})),d=0;d<u.length;d++){for(var f=u[d],g=0;g<f.pattern.length;g++)u[d+g]&&(u[d+g].literal=f.pattern[g]);d+=f.pattern.length-1}for(d=0;d<p.length;d++){for(f=p[d],g=0;g<f.pattern.length;g++)p[d+g]&&(p[d+g].text=f.pattern[g]);d+=f.pattern.length-1}var m={value:null,switchPart:!1,resetPart:c&&"M"===i&&h.partMap.filter((function(t){return"month"===t.type})).some((function(t){return t.pattern.length>2})),hasInvalidDatePart:!1};if(!r){if(!c)return this.resetLeadingZero(),this.setExisting(i,!1),this.resetInvalidDateSymbol(i),{value:null,switchToNext:!1};for(d=0;d<u.length;d++){var y=u[d].literal,v=s.startsWith(y),b=s.endsWith(y),w=s.indexOf(y+y)>=0;if(v||b||w)return this.resetLeadingZero(),this.setExisting(i,!1),this.resetInvalidDateSymbol(i),LM(m,{value:null,switchToNext:!1})}}var x=this.intl.formatDate(this.value,this.format,this.localeId),S=h.symbols,k=!1,C="",A="",_="",T="",O="",E="",M="";for(d=0;d<p.length;d++)M+=p[d].text;var P=this.format===S||this.format===M||this.format===l||this.format.length===l.length,I=(P?M:l).indexOf(i),D=(P?M:l).lastIndexOf(i)-I+1,F=0,R=l.length-s.length;if(c||!c&&!this.autoCorrectParts){for(d=0;d<x.length;d++){if(S[d]===i)A+=this.getExisting(i)?x[d]:"0",a?(F<D-1&&(_+=s[d]||""),F++):R>0?_.length+R<D&&(_+=s[d]||""):_+=s[d]||"",k=!0;else k?(E+=x[d],O+=x[d]):(C+=x[d],T+=x[d])}if(P){if(M.length<s.length)_+=r;else if(!a&&l.length>s.length){var L=l.length-s.length,N=_.substr(0,_.length-L);N&&N.length>0&&(_=N)}if(_.length>D)return LM(m,{value:null,switchToNext:!1})}if(!P||P&&!this.autoCorrectParts){F=0,A="",_="",C="",E="",k=!1;for(d=0;d<l.length;d++){if(l[d]===i)A+=this.getExisting(i)?x[d]||"":"0",a?(F<D-1&&(_+=s[d]||""),F++):R>0?_.length+R<D&&(_+=s[d]||""):_+=s[d]||"",k=!0;else k?E+=s[d-R]||"":C+=s[d]||""}l.length<s.length&&(_+=r)}}if(!c)if(this.autoCorrectParts){F=0,A="",_="",C="",E="",k=!1;for(d=0;d<x.length;d++){if(S[d]===i)A+=this.getExisting(i)?x[d]:"0",k=!0;else k?E+=x[d]:C+=x[d]}}else A=n?_:A;var B=null,j=this.matchMonth(r),z=this.matchDayPeriod(r,i),U="0"===r,$=this.leadingZero||{};U?("0"===_&&(_=A),0!==FM(n?r:(c?_:A)+r)||this.isAbbrMonth(h.partMap,i)||this.incrementLeadingZero(i)):this.resetLeadingZero();var H=this.partPattern(h.partMap,i),V=H?H.pattern:null;if(c&&a&&!_)return this.setExisting(i,!1),LM(m,{value:null,switchToNext:!1});var q=A.length-3,W=!0,X=c?_:A;for(d=Math.max(0,q);d<=A.length&&W;d++){X=n?r:c?_:A.substring(d)+r,!c&&this.autoCorrectParts||(W=!1,X=MM(X),X=EM(D-X.length)+X);var G=parseInt(X,10),K=C+X+E;B=this.intl.parseDate(K,this.format,this.localeId),c&&!jM(B)&&this.autoCorrectParts&&(B=this.intl.parseDate(T+X+O,this.format,this.localeId));var Y=!isNaN(parseInt(r,10))||c&&a&&""===r;if(!B&&!isNaN(G)&&Y&&this.autoCorrectParts){if("M"===i&&!j){var J=G-1;J>-1&&J<12&&((B=mM(this.value)).setMonth(J),B.getMonth()!==J&&(B=xM(SM(B,-1))))}"y"===i&&(B=vM(parseInt(X,10),this.month?this.value.getMonth():0,this.date?this.value.getDate():1,this.hours?this.value.getHours():0,this.minutes?this.value.getMinutes():0,this.seconds?this.value.getSeconds():0,this.milliseconds?this.value.getMilliseconds():0),(c&&jM(B)||!c&&B)&&this.date&&B.getDate()!==this.value.getDate()&&(B=xM(SM(B,-1))))}if(c&&jM(B)||!c&&B){var Z=this.intl.parseDate(""+C+this.peek(X,V)+E,this.format,this.localeId),Q=this.patternLength(V)||V.length,tt=((this.leadingZero||{})[i]||0)+(MM(X)||r).length>=Q,et=null===Z||$[i]&&V.length<=X.length||tt;if(this.shouldNormalizeCentury()&&(B=this.normalizeCentury(B)),this._value=B,this.setExisting(i,!0),this.resetInvalidDateSymbol(i),this.autoCorrectParts||("M"===i?this.getExisting("M")&&this.getExisting("y")&&(this.setExisting("d",!0),this.resetInvalidDateSymbol("d")):"d"===i&&this.getExisting("d")&&this.getExisting("y")&&(this.setExisting("M",!0),this.resetInvalidDateSymbol("M")),this.hasInvalidDatePart()||this.markDatePartsAsExisting()),c&&et)if("M"===i)et=(it=FM(_))>=2||_.length>=2;else et=et?P?_.length===D:_.length>D:et;return LM(m,{value:this.value,switchToNext:et})}}if(j&&(B=this.intl.parseDate(C+j+E,this.format,this.localeId)))return this._value=B,this.setExisting(i,!0),LM(m,{value:this.value,switchToNext:!1});if(z&&(B=this.intl.parseDate(C+z+E,this.format)))return this._value=B,LM(m,{value:this.value,switchToNext:!0});if(U&&(this.leadingZero=this.isAbbrMonth(h.partMap,i)?null:((e={})[i]=!0,e),this.setExisting(i,!1)),!this.autoCorrectParts){var it=void 0,rt=c?_:X,nt=FM(rt);if(DM(nt)){if("d"===i&&(nt<=0||nt>31)||"M"===i&&(nt<0||nt>11))return LM(m,{value:null,switchToNext:!1});it="M"===i?nt-1:nt;var ot="M"===i,st="d"===i,at=mM(this._value),lt=this._partiallyInvalidDate.invalidDateParts||{},ct=lt.y.value||at.getFullYear(),ht=ot?it:lt.M.value||at.getMonth(),ut=st?it:lt.d.value||lt.E.value||at.getDate(),pt=lt.h.value||lt.H.value||at.getHours(),dt=lt.m.value||at.getMinutes(),ft=lt.s.value||at.getSeconds(),gt=lt.S.value||at.getMilliseconds(),mt=vM(ct,ht,ut,pt,dt,ft,gt),yt=BM(mt,ct,ht,ut,pt,dt,ft,gt),vt=ot||st?this.modifyDateSymbolWithValue(at,i,ot?ht:ut):null,bt=!1;if(ot&&vt?vt.getMonth()===ht?this.getExisting("d")?yt?(at=mM(mt),this.resetInvalidDateSymbol(i)):(bt=!0,this.setInvalidDatePart(i,{value:ht,date:mM(vt),startDate:mM(this.value)}),this.setExisting(i,!1)):yt?(this.resetInvalidDateSymbol(i),at=mM(mt),this.getExisting("M")&&this.getExisting("y")&&(this.setExisting("d",!0),this.resetInvalidDateSymbol("d"))):(this.resetInvalidDateSymbol(i),at=mM(vt)):(bt=!0,this.setInvalidDatePart(i,{value:ht,date:mM(vt),startDate:mM(this.value)}),this.setExisting(i,!1)):st&&vt&&(vt.getDate()===ut?this.getExisting("M")?yt?(at=mM(mt),this.resetInvalidDateSymbol(i)):(bt=!0,this.setInvalidDatePart(i,{value:ut,date:mM(vt),startDate:mM(this.value)}),this.setExisting(i,!1)):yt?(at=mM(mt),this.resetInvalidDateSymbol(i),this.getExisting("d")&&this.getExisting("y")&&(this.setExisting("M",!0),this.resetInvalidDateSymbol("M"))):(this.resetInvalidDateSymbol(i),at=mM(vt)):(bt=!0,this.setInvalidDatePart(i,{value:ut,date:mM(this.value),startDate:mM(this.value)}),this.setExisting(i,!1))),!bt){if(this.setExisting(i,!0),c&&!jM(B)){var wt=this.intl.parseDate(T+X+O,this.format,this.localeId);jM(wt)&&(this._value=wt)}else this._value=at;this.getValue()&&this.resetInvalidDate()}et=!1;return et="M"===i?nt>=2||rt.length>=2:P?rt.length===D:rt.length>D,LM(m,{value:null,switchToNext:et,hasInvalidDatePart:bt})}}return LM(m,{value:null,switchToNext:!1})},t.prototype.symbolMap=function(t){return this.intl.splitDateFormat(this.format,this.localeId).reduce(PM,{})[t]},t.prototype.resetLeadingZero=function(){var t=null!==this.leadingZero;return this.setLeadingZero(null),t},t.prototype.setLeadingZero=function(t){this.leadingZero=t},t.prototype.getLeadingZero=function(){return this.leadingZero||{}},t.prototype.normalizeCentury=function(t){if(!IM(t))return t;var e=function(t){return!IM(t)||isNaN(t.getTime())?0:Number(t.getFullYear().toString().slice(-2))}(t),i=this.getNormalizedCenturyBase(e);return NM(t,i+e)},t.prototype.incrementLeadingZero=function(t){var e=this.leadingZero||{};e[t]=(e[t]||0)+1,this.leadingZero=e},t.prototype.isAbbrMonth=function(t,e){var i=this.partPattern(t,e);return"month"===i.type&&i.names},t.prototype.partPattern=function(t,e){return t.filter((function(t){return-1!==t.pattern.indexOf(e)}))[0]},t.prototype.peek=function(t,e){var i=t.replace(/^0*/,"")+"0";return EM(e.length-i.length)+i},t.prototype.matchMonth=function(t){if(this.typedMonthPart+=t.toLowerCase(),0===this.monthNames.length)return"";for(;this.typedMonthPart.length>0;){for(var e=0;e<this.monthNames.length;e++)if(0===this.monthNames[e].toLowerCase().indexOf(this.typedMonthPart))return this.monthNames[e];var i=parseInt(this.typedMonthPart,10);if(i>=1&&i<=12&&i.toString()===this.typedMonthPart)return this.monthNames[i-1];this.typedMonthPart=this.typedMonthPart.substring(1,this.typedMonthPart.length)}return""},t.prototype.matchDayPeriod=function(t,e){var i=t.toLowerCase();if("a"===e&&this.dayPeriods){if(this.dayPeriods.am.toLowerCase().startsWith(i))return this.dayPeriods.am;if(this.dayPeriods.pm.toLowerCase().startsWith(i))return this.dayPeriods.pm}return""},t.prototype.allFormattedMonths=function(t){void 0===t&&(t="en");for(var e=this.intl.splitDateFormat(this.format,this.localeId),i=0;i<e.length;i++)if("month"===e[i].type&&e[i].names)return this.intl.dateFormatNames(t,e[i].names);return[]},t.prototype.allDayPeriods=function(t){void 0===t&&(t="en");for(var e=this.intl.splitDateFormat(this.format),i=0;i<e.length;i++)if("dayperiod"===e[i].type&&e[i].names)return this.intl.dateFormatNames(t,e[i].names);return null},t.prototype.patternLength=function(t){return"y"===t[0]?4:zM.test(t)?2:0},t.prototype.dateFormatString=function(t,e){for(var i=this.intl.splitDateFormat(e,this.localeId),r=[],n=[],o=0;o<i.length;o++)for(var s=this.intl.formatDate(t,{pattern:i[o].pattern},this.localeId).length;s>0;)r.push(this.symbols[i[o].pattern[0]]||CM),n.push(i[o]),s--;var a=new kM;return a.symbols=r.join(""),a.partMap=n,a},t.prototype.merge=function(t,e){for(var i="",r="",n=e.symbols,o=!1,s=0,a=this.getFormattedInvalidDates(n),l=n.length-1;l>=0;l--){var c=this.getPartsForSegment(e,l);if(-1===this.knownParts.indexOf(n[l])||this.getExisting(n[l]))this.autoCorrectParts?i=t[l]+i:t.length!==n.length?o?i=t[l]+i:s>0?(i=t[l]+i,--s<=0&&(o=!0)):i=(t[l+t.length-n.length]||"")+i:i=t[l]+i,r=n[l]+r;else{var h=n[l],u=0;if(this.autoCorrectParts||!this.autoCorrectParts&&!this.getInvalidDatePartValue(h)){for(;l>=0&&h===n[l];)l--;l++}if(this.leadingZero&&this.leadingZero[h])i="0"+i;else if(!this.autoCorrectParts&&this.getInvalidDatePartValue(h)){var p=this.getInvalidDatePartValue(h).toString();if("M"===h)if(p=(FM(this.getInvalidDatePartValue(h))+1).toString(),c.length>2)i=a[h][l]+i;else p=(FM(this.getInvalidDatePartValue(h))+1).toString(),i=EM(c.length-p.length)+p+i,u=c.length-1,s=p.length-c.length;else i=EM(c.length-p.length)+p+i,u=c.length-1,s=p.length-c.length}else i=this.dateFieldName(e.partMap[l])+i;for(;r.length<i.length;)r=n[l]+r;0!==u&&(l=l-u+(t.length-n.length))}}return{text:i,format:r}},t.prototype.dateFieldName=function(t){var e=this.formatPlaceholder||"wide";return e[t.type]?e[t.type]:"formatPattern"===e?t.pattern:this.intl.dateFieldName(Object.assign(t,{nameType:e}))},t.prototype.getNormalizedCenturyBase=function(t){return t>this.twoDigitYearMax?1900:2e3},t.prototype.shouldNormalizeCentury=function(){return this.intl.splitDateFormat(this.format).some((function(t){return"yy"===t.pattern}))},t.prototype.resetInvalidDate=function(){var t=this;this._partiallyInvalidDate.startDate=null,Object.keys(this._partiallyInvalidDate.invalidDateParts).forEach((function(e){t.resetInvalidDatePart(e)}))},t.prototype.resetInvalidDateSymbol=function(t){var e=this;this.resetInvalidDatePart(t);var i=!0;Object.keys(this._partiallyInvalidDate.invalidDateParts).forEach((function(t){e._partiallyInvalidDate.invalidDateParts[t]&&IM(e._partiallyInvalidDate.invalidDateParts[t].value)&&(i=!1)})),i&&this.resetInvalidDate()},t.prototype.resetInvalidDatePart=function(t){this._partiallyInvalidDate.invalidDateParts[t]&&(this._partiallyInvalidDate.invalidDateParts[t]={value:null,date:null,startDateOffset:0})},t.prototype.getInvalidDatePart=function(t){return this._partiallyInvalidDate.invalidDateParts[t]||{}},t.prototype.getInvalidDatePartValue=function(t){return(this._partiallyInvalidDate.invalidDateParts[t]||{}).value},t.prototype.setInvalidDatePart=function(t,e){var i=e.value,r=void 0===i?null:i,n=e.date,o=void 0===n?null:n,s=e.startDateOffset,a=void 0===s?0:s,l=e.startDate,c=void 0===l?null:l;this._partiallyInvalidDate.invalidDateParts[t]&&(this._partiallyInvalidDate.invalidDateParts[t].value=r,this._partiallyInvalidDate.invalidDateParts[t].date=o,this._partiallyInvalidDate.invalidDateParts[t].startDateOffset=a,this._partiallyInvalidDate.startDate=c)},t.prototype.hasInvalidDatePart=function(){var t=this,e=!1;return Object.keys(this._partiallyInvalidDate.invalidDateParts).forEach((function(i){t._partiallyInvalidDate.invalidDateParts[i]&&IM(t._partiallyInvalidDate.invalidDateParts[i].value)&&(e=!0)})),e},t.prototype.modifyDateSymbolWithOffset=function(t,e,i){var r=mM(t),n=!1;switch(e){case"y":r.setFullYear(r.getFullYear()+i);break;case"M":r=SM(this.value,i);break;case"d":case"E":r.setDate(r.getDate()+i);break;case"h":case"H":r.setHours(r.getHours()+i),n=!0;break;case"m":r.setMinutes(r.getMinutes()+i),n=!0;break;case"s":r.setSeconds(r.getSeconds()+i),n=!0;break;case"S":r.setMilliseconds(r.getMilliseconds()+i);break;case"a":r.setHours(r.getHours()+12*i),n=!0}return{date:r,timeModified:n}},t.prototype.modifyDateSymbolWithValue=function(t,e,i){var r=mM(t);switch(e){case"y":r.setFullYear(i);break;case"M":r=SM(t,i-t.getMonth());break;case"d":case"E":r.setDate(i);break;case"h":case"H":case"a":r.setHours(i);break;case"m":r.setMinutes(i);break;case"s":r.setSeconds(i);break;case"S":r.setMilliseconds(i)}return r},t.prototype.markDatePartsAsExisting=function(){this.modifyExisting(!0)},t.prototype.getPartsForSegment=function(t,e){for(var i=t.partMap[e],r=[],n=e;n<t.partMap.length;n++){var o=t.partMap[n];if(i.type!==o.type||i.pattern!==o.pattern)break;r.push(o)}for(n=e-1;n>=0;n--){o=t.partMap[n];if(i.type!==o.type||i.pattern!==o.pattern)break;r.unshift(o)}return r},t}(),$M={BACKSPACE:8,DELETE:46,TAB:9,ENTER:13,ESCAPE:27,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,SPACE:32,END:35,HOME:36,PAGE_UP:33,PAGE_DOWN:34},HM={events:{}},VM=function(){function t(t){this.options=LM({},HM,t)}return t.prototype.destroy=function(){},t.prototype.trigger=function(t,e){void 0===e&&(e={});var i={defaultPrevented:!1,preventDefault:function(){i.defaultPrevented=!0}};return"function"==typeof this.options.events[t]&&(this.options.events[t](LM(i,e,{sender:this})),i.defaultPrevented)},t}();!function(t){t.None="none",t.Caret="caret",t.Selection="selection"}(fM||(fM={}));var qM="dragStart",WM="drop",XM="touchstart",GM="mousedown",KM="mouseup",YM="click",JM="input",ZM="keydown",QM="focus",tP="blur",eP="paste",iP="DOMMouseScroll",rP="mousewheel",nP="valueChange",oP="inputEnd",sP="blurEnd",aP="focusEnd",lP="change",cP={format:"d",allowNulls:!1,hasPlaceholder:!1,placeholder:null,cycleTime:!0,locale:null,steps:{millisecond:1,second:1,minute:1,hour:1,day:1,month:1,year:1},formatPlaceholder:null,events:(gM={},gM.valueChange=null,gM.input=null,gM.inputEnd=null,gM.focus=null,gM.focusEnd=null,gM.blur=null,gM.blurEnd=null,gM.keydown=null,gM.mousewheel=null,gM.change=null,gM),selectNearestSegmentOnFocus:!1,enableMouseWheel:!1,allowCaretMode:!1,autoSwitchParts:!0,autoSwitchKeys:[],twoDigitYearMax:AM,autoCorrectParts:!0},hP=function(t){function e(e,i){var r=t.call(this,i)||this;return r.dateObject=null,r.currentText="",r.currentFormat="",r.interactionMode=fM.None,r.previousElementSelection={start:0,end:0},r.init(e,i),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}pM(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.dateObject&&this.dateObject.getValue()},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e){var i=jM(this.options.value)?mM(this.options.value):new Date(e.formattedValue);jM(i)||(i=null),this.element=t,this.options=LM({},cP,e),this.intl=this.options.intlService,this.formatPlaceholder=this.options.formatPlaceholder?this.options.formatPlaceholder:"formatPattern",this.dateObject=this.createDateObject(),this.dateObject.setValue(i),this.setTextAndFormat(),this.bindEvents(),this.resetSegmentValue=!0,this.interactionMode=fM.None,this.forceUpdate()},e.prototype.destroy=function(){this.unbindEvents(),this.dateObject=null,t.prototype.destroy.call(this)},e.prototype.bindEvents=function(){this.onElementDragStart=this.onElementDragStart.bind(this),this.element.addEventListener(qM,this.onElementDragStart),this.onElementDrop=this.onElementDrop.bind(this),this.element.addEventListener(WM,this.onElementDrop),this.onElementClick=this.onElementClick.bind(this),this.element.addEventListener(YM,this.onElementClick),this.onElementMouseDown=this.onElementMouseDown.bind(this),this.element.addEventListener(GM,this.onElementMouseDown),this.element.addEventListener(XM,this.onElementMouseDown),this.onElementMouseUp=this.onElementMouseUp.bind(this),this.element.addEventListener(KM,this.onElementMouseUp),this.onElementInput=this.onElementInput.bind(this),this.element.addEventListener(JM,this.onElementInput),this.onElementKeyDown=this.onElementKeyDown.bind(this),this.element.addEventListener(ZM,this.onElementKeyDown),this.onElementFocus=this.onElementFocus.bind(this),this.element.addEventListener(QM,this.onElementFocus),this.onElementBlur=this.onElementBlur.bind(this),this.element.addEventListener(tP,this.onElementBlur),this.onElementChange=this.onElementChange.bind(this),this.element.addEventListener(lP,this.onElementChange),this.onElementPaste=this.onElementPaste.bind(this),this.element.addEventListener(eP,this.onElementPaste),this.onElementMouseWheel=this.onElementMouseWheel.bind(this),this.element.addEventListener(iP,this.onElementMouseWheel),this.element.addEventListener(rP,this.onElementMouseWheel)},e.prototype.unbindEvents=function(){this.element.removeEventListener(qM,this.onElementDragStart),this.element.removeEventListener(WM,this.onElementDrop),this.element.removeEventListener(XM,this.onElementMouseDown),this.element.removeEventListener(GM,this.onElementMouseDown),this.element.removeEventListener(KM,this.onElementMouseUp),this.element.removeEventListener(YM,this.onElementClick),this.element.removeEventListener(JM,this.onElementInput),this.element.removeEventListener(ZM,this.onElementKeyDown),this.element.removeEventListener(QM,this.onElementFocus),this.element.removeEventListener(tP,this.onElementBlur),this.element.removeEventListener(lP,this.onElementChange),this.element.removeEventListener(eP,this.onElementPaste),this.element.removeEventListener(iP,this.onElementMouseWheel),this.element.removeEventListener(rP,this.onElementMouseWheel)},e.prototype.setOptions=function(t,e){void 0===e&&(e=!1),this.options=LM(this.options,t),e&&(this.unbindEvents(),this.init(this.element,this.options))},e.prototype.resetLocale=function(){this.unbindEvents(),this.init(this.element,this.options)},e.prototype.isInCaretMode=function(){return this.interactionMode===fM.Caret},e.prototype.focus=function(){this.element.focus(),this.options.selectNearestSegmentOnFocus&&this.selectNearestSegment(0)},e.prototype.onElementDragStart=function(t){t.preventDefault()},e.prototype.onElementDrop=function(t){t.preventDefault()},e.prototype.onElementMouseDown=function(){this.mouseDownStarted=!0,this.focusedPriorToMouseDown=this.isActive},e.prototype.onElementMouseUp=function(t){this.mouseDownStarted=!1,t.preventDefault()},e.prototype.onElementClick=function(t){this.mouseDownStarted=!1;var e=this.selection;if(this.isInCaretMode()&&this.forceUpdate(),3===t.detail);else if(this.isActive&&this.options.selectNearestSegmentOnFocus){var i=this.element.selectionStart!==this.element.selectionEnd,r=IM(this.options.placeholder)&&!this.dateObject.hasValue()&&!this.focusedPriorToMouseDown,n=!i&&r?0:this.caret()[0];this.selectNearestSegment(n)}else this.setSelection(this.selectionByIndex(e.start))},e.prototype.onElementInput=function(t){this.triggerInput({event:t});var e=this.keyDownEvent||{},i=e.keyCode===$M.BACKSPACE||e.key===OM.BACKSPACE,r=e.keyCode===$M.DELETE||e.key===OM.DELETE;if(this.element&&this.dateObject){if(this.isPasteInProgress)return this.options.allowCaretMode&&(this.resetSegmentValue=!1),this.updateOnPaste(t),void(this.isPasteInProgress=!1);var n=this.interactionMode;!this.options.allowCaretMode||n===fM.Caret||r||i||(this.resetSegmentValue=!0),this.options.allowCaretMode?this.interactionMode=fM.Caret:this.interactionMode=fM.Selection;var o=this.isInCaretMode();if(o&&this.keyDownEvent.key===OM.SPACE)this.restorePreviousInputEventState();else{var s=this.dateObject&&this.dateObject.getValue(),a=this.dateObject.getTextAndFormat(),l=a.text,c=a.format;this.currentFormat=c;var h=function(t){var e=t.oldText,i=t.newText,r=t.formatPattern,n=t.selectionStart,o=t.isInCaretMode,s=t.keyEvent,a=e[n+e.length-i.length],l=e.substring(0,n+e.length-i.length),c=i.substring(0,n),h=[];if(l===c&&n>0)return h.push([r[n-1],c[n-1]]),h;if(0===l.indexOf(c)&&o&&(s.key===OM.DELETE||s.key===OM.BACKSPACE)||0===l.indexOf(c)&&!o&&(0===c.length||r[c.length-1]!==r[c.length])){var u="";o||1!==c.length||h.push([r[0],c[0]]);for(var p=c.length;p<l.length;p++)r[p]!==u&&r[p]!==CM&&(u=r[p],h.push([u,""]));return h}if(o&&(0===c.indexOf(l)||r[n-1]===CM)||!o&&(0===c.indexOf(l)||r[n-1]===CM)){var d=r[0];for(p=Math.max(0,l.length-1);p<r.length;p++)if(r[p]!==CM){d=r[p];break}return[[d,c[n-1]]]}return!o&&" "===c[c.length-1]||!o&&c[c.length-1]===a?[[r[n-1],CM]]:[[r[n-1],c[n-1]]]}({oldText:o&&(i||r||n===fM.Caret)?this.previousElementValue:l,newText:this.elementValue,formatPattern:this.currentFormat,selectionStart:this.selection.start,isInCaretMode:o,keyEvent:this.keyDownEvent}),u=this.formatStateOnKeyDown.format[this.formatStateOnKeyDown.selectionStart]||"";if(this.options.allowCaretMode&&o&&this.currentFormat.length!==this.elementValue.length&&u&&u.length>0&&u!==CM&&(h&&0!==h.length?h[0]&&h[0][0]!==CM&&h[0][0]!==u&&(h[0][0]=u,h[0][1]=t.data||""):((h=[])[0][0]=u,h[0][1]=t.data||"")),!o||h&&0!==h.length){if(o&&1===h.length){if(!h[0]||!h[0][0])return void this.restorePreviousInputEventState();if(o&&h[0]&&(h[0][0]===CM||h[0][1]===CM))return void this.restorePreviousInputEventState()}var p=1===h.length&&h[0][1]===CM,d=[],f=!1;if(!p)for(var g=0;g<h.length;g++){var m=this.dateObject.parsePart({symbol:h[g][0],currentChar:h[g][1],resetSegmentValue:this.resetSegmentValue,cycleSegmentValue:!this.isInCaretMode(),rawTextValue:this.element.value,isDeleting:i||r,originalFormat:this.currentFormat});d.push(m),f=m.switchToNext}this.options.autoSwitchParts||(f=!1),this.resetSegmentValue=!1;var y,v=d[d.length-1],b=v&&!v.value,w=o&&(i||r)&&b,x=!!v&&v.resetPart,S=!!v&&v.hasInvalidDatePart,k=!wM(s,this.dateObject.value),C=this.selection;if((!o||w||x)&&(x&&(y=this.currentFormat[C.start]),this.forceUpdate()),h.length&&h[0][0]!==CM)if(!o||w||x)y?this.setSelection(this.selectionBySymbol(y)):(this.options.autoSwitchParts||h[0][1]!==CM)&&this.setSelection(this.selectionBySymbol(h[0][0]));else if(o)if(k&&IM(this.dateObject.getValue())||!k&&f&&IM(this.dateObject.getValue())){if(f)this.switchDateSegment(1);else if(this.options.format.length!==this.currentFormat.length&&u&&"y"!==u){var A=this.elementValue.length;this.forceUpdate();var _=this.elementValue.length-A;this.setSelection({start:C.start+_,end:C.start+_})}}else if(b){var T=this.dateObject.getLeadingZero()[u];f?this.switchDateSegment(1):"0"===t.data&&T||this.restorePreviousInputEventState()}if(f||!o||i||r||x||!b)this.options.autoSwitchParts&&(f||p)&&(o||this.switchDateSegment(1));else if(k)this.currentFormat.length===this.elementValue.length||n!==fM.Caret&&k||(n!==fM.Caret?(y=this.currentFormat[C.start],this.forceUpdate(),this.setSelection(this.selectionBySymbol(y))):S||this.restorePreviousInputEventState());else{T=this.dateObject.getLeadingZero()[u];"0"===t.data&&T||S||this.restorePreviousInputEventState()}this.tryTriggerValueChange({oldValue:s,event:t}),this.triggerInputEnd({event:t}),o&&this.setTextAndFormat()}else this.restorePreviousInputEventState()}}},e.prototype.onElementFocus=function(t){this.triggerFocus({event:t})||(this.isActive=!0,this.interactionMode=fM.None,this.refreshElementValue(),this.mouseDownStarted||this.caret(0,this.elementValue.length),this.mouseDownStarted=!1,this.triggerFocusEnd({event:t}))},e.prototype.onElementBlur=function(t){this.resetSegmentValue=!0,this.isActive=!1,this.triggerBlur({event:t})||(this.interactionMode=fM.None,this.refreshElementValue(),this.triggerBlurEnd({event:t}))},e.prototype.onElementChange=function(t){this.triggerChange({event:t})},e.prototype.onElementKeyDown=function(t){if(!this.triggerKeyDown({event:t})){var e=this.selection,i=e.start,r=e.end;this.keyDownEvent=t,this.previousElementValue=this.element.value,this.formatStateOnKeyDown={format:this.currentFormat,selectionStart:i,selectionEnd:r},this.previousElementSelection={start:i,end:r};var n=(this.options.autoSwitchKeys||[]).map((function(t){return t.toString().toLowerCase().trim()}));if(n.indexOf(t.keyCode.toString())>=0||n.indexOf(t.keyCode)>=0||n.indexOf(t.key.toLowerCase().trim())>=0){var o=n.indexOf(OM.TAB.toLowerCase().trim())>=0||n.indexOf($M.TAB)>=0||n.indexOf($M.TAB.toString())>=0;if(!o)return t.preventDefault(),void this.switchDateSegment(1);var s=this.selection,a=s.start,l=s.end;if(t.shiftKey&&o?this.switchDateSegment(-1):this.switchDateSegment(1),a!==this.selection.start||l!==this.selection.end)return void t.preventDefault()}var c=this.currentFormat[this.selection.start],h=this.getStepFromSymbol(c),u=!1;if(!(t.altKey||t.ctrlKey||t.metaKey||t.keyCode===$M.TAB)){switch(t.keyCode){case $M.ARROW_LEFT:this.switchDateSegment(-1),u=!0;break;case $M.ARROW_UP:this.modifyDateSegmentValue(h,c,event),u=!0;break;case $M.ARROW_RIGHT:this.switchDateSegment(1),u=!0;break;case $M.ARROW_DOWN:this.modifyDateSegmentValue(-h,c,event),u=!0;break;case $M.ENTER:break;case $M.DELETE:case $M.BACKSPACE:if(this.options.allowNulls){var p=this.dateObject.value;this.dateObject.setValue(null),this.forceUpdate(),this.tryTriggerValueChange({oldValue:p,event:t})}return u=!0,void(t.keyCode===$M.BACKSPACE&&((this.options.autoSwitchKeys||[]).indexOf($M.BACKSPACE)>=0||(this.options.autoSwitchKeys||[]).indexOf(OM.BACKSPACE)>=0)&&this.switchDateSegment(-1));case OM.HOME:this.selectNearestSegment(0);break;case OM.END:this.selectNearestSegment(this.elementValue.length);break;default:return}u&&t.preventDefault()}}},e.prototype.onElementPaste=function(){this.isPasteInProgress=!0},e.prototype.onElementMouseWheel=function(t){if(this.options.enableMouseWheel&&!this.triggerMouseWheel({event:t})&&this.isActive){var e=t;e.shiftKey?this.switchDateSegment((e.wheelDelta||-e.detail)>0?-1:1):this.modifyDateSegmentValue((e.wheelDelta||-e.detail)>0?1:-1),e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()}},e.prototype.updateOnPaste=function(t){var e=this.intl.parseDate(this.elementValue,this.inputFormat)||this.value;IM(e)&&this.dateObject.shouldNormalizeCentury()&&(e=this.dateObject.normalizeCentury(e));var i=this.dateObject&&this.dateObject.getValue();this.writeValue(e),this.tryTriggerValueChange({oldValue:i,event:t})},Object.defineProperty(e.prototype,"elementValue",{get:function(){return(this.element||{}).value||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputFormat",{get:function(){return this.options.format?"string"==typeof this.options.format?this.options.format:this.options.format.inputFormat:_M},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayFormat",{get:function(){return this.options.format?"string"==typeof this.options.format?this.options.format:this.options.format.displayFormat:_M},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){var t={start:0,end:0};return null!==this.element&&void 0!==this.element.selectionStart&&(t={start:this.element.selectionStart,end:this.element.selectionEnd}),t},enumerable:!0,configurable:!0}),e.prototype.setSelection=function(t){this.element&&document.activeElement===this.element&&this.element.setSelectionRange(t.start,t.end)},e.prototype.selectionBySymbol=function(t){for(var e=-1,i=0,r=0;r<this.currentFormat.length;r++)this.currentFormat[r]===t&&(i=r+1,-1===e&&(e=r));return e<0&&(e=0),this.options.autoCorrectParts||this.currentFormat.length===this.currentText.length||(this.currentFormat.length<this.currentText.length?i+=this.currentText.length-this.currentFormat.length:i=Math.max(0,i-(this.currentFormat.length-this.currentText.length))),{start:e,end:i}},e.prototype.selectionByIndex=function(t){for(var e={start:t,end:t},i=t,r=t-1;i<this.currentFormat.length||r>=0;i++,r--){if(i<this.currentFormat.length&&this.currentFormat[i]!==CM){e=this.selectionBySymbol(this.currentFormat[i]);break}if(r>=0&&this.currentFormat[r]!==CM){e=this.selectionBySymbol(this.currentFormat[r]);break}}return e},e.prototype.switchDateSegment=function(t){var e=this.selection;if(this.isInCaretMode()){var i=e.start,r=this.currentFormat[i-(this.elementValue.length-this.currentFormat.length)]||this.currentFormat[i],n="",o="";if(t<0){for(var s=i+t;s>=0;s--)if((o=this.currentFormat[s])!==CM&&o!==r){i=s,n=o;break}}else for(s=i+t;s<this.currentFormat.length;s++)if((o=this.currentFormat[s])!==CM&&o!==r){i=s,n=o;break}if(n)return this.forceUpdate(),this.setSelection(this.selectionBySymbol(n)),void(this.interactionMode=fM.Selection)}this.interactionMode=fM.None;var a=this.selection,l=a.start,c=a.end;if(l<c&&this.currentFormat[l]!==this.currentFormat[c-1])return this.setSelection(this.selectionByIndex(t>0?l:c-1)),this.resetSegmentValue=!0,void(this.interactionMode=fM.None);for(var h=this.currentFormat[l],u=l+t;u>0&&u<this.currentFormat.length&&(this.currentFormat[u]===h||this.currentFormat[u]===CM);)u+=t;if(this.currentFormat[u]!==CM){for(var p=u;p>=0&&p<this.currentFormat.length&&this.currentFormat[p]===this.currentFormat[u];)p+=t;u>p&&(p+1!==l||u+1!==c)?(this.setSelection({start:p+1,end:u+1}),this.resetSegmentValue=!0):u<p&&(u!==l||p!==c)&&(this.setSelection({start:u,end:p}),this.resetSegmentValue=!0),this.interactionMode=fM.None}},e.prototype.modifyDateSegmentValue=function(t,e,i){if(void 0===e&&(e=""),void 0===i&&(i={}),this.dateObject){var r,n,o,s=this.value,a=1*t,l=this.caret();if("S"===(e=e||this.currentFormat[l[0]])&&!this.options.steps.millisecond){var c=(n=this.inputFormat,(o=n&&n.match(/S+(\1)/))?o[0].length:0);r=c,a=Math.pow(10,3-r)}this.dateObject.modifyPart(e,a),this.tryTriggerValueChange({oldValue:s,event:i}),this.forceUpdate(),this.setSelection(this.selectionBySymbol(e))}},e.prototype.tryTriggerValueChange=function(t){if(void 0===t&&(t={oldValue:null,event:{}}),!wM(this.value,t.oldValue))return this.triggerValueChange(t)},e.prototype.triggerValueChange=function(t){return void 0===t&&(t={oldValue:null,event:{}}),this.trigger(nP,LM(t,{value:this.value}))},e.prototype.triggerInput=function(t){return void 0===t&&(t={event:{}}),this.trigger(JM,LM(t,{value:this.value}))},e.prototype.triggerInputEnd=function(t){return void 0===t&&(t={event:{}}),this.trigger(oP,LM(t,{value:this.value}))},e.prototype.triggerFocus=function(t){return void 0===t&&(t={event:{}}),this.trigger(QM,LM({},t))},e.prototype.triggerFocusEnd=function(t){return void 0===t&&(t={event:{}}),this.trigger(aP,LM({},t))},e.prototype.triggerBlur=function(t){return void 0===t&&(t={event:{}}),this.trigger(tP,LM({},t))},e.prototype.triggerBlurEnd=function(t){return void 0===t&&(t={event:{}}),this.trigger(sP,LM({},t))},e.prototype.triggerChange=function(t){return void 0===t&&(t={event:{}}),this.trigger(lP,LM(t,{value:this.value}))},e.prototype.triggerKeyDown=function(t){return void 0===t&&(t={event:{}}),this.trigger(ZM,LM({},t))},e.prototype.triggerMouseWheel=function(t){return void 0===t&&(t={event:{}}),this.trigger(rP,LM({},t))},e.prototype.forceUpdate=function(){this.setTextAndFormat(),this.refreshElementValue()},e.prototype.setTextAndFormat=function(){var t=this.dateObject.getTextAndFormat(),e=t.text,i=t.format;this.currentFormat=i,this.currentText=e},e.prototype.setElementValue=function(t){this.element.value=t},e.prototype.getStepFromSymbol=function(t){switch(t){case"S":return Number(this.options.steps.millisecond);case"s":return Number(this.options.steps.second);case"m":return Number(this.options.steps.minute);case"h":case"H":return Number(this.options.steps.hour);case"M":return Number(this.options.steps.month);case"d":case"E":return Number(this.options.steps.day);case"y":return Number(this.options.steps.year);default:return 1}},e.prototype.restorePreviousInputEventState=function(){this.restorePreviousElementValue(),this.restorePreviousElementSelection()},e.prototype.restorePreviousElementValue=function(){this.setElementValue(this.previousElementValue||"")},e.prototype.restorePreviousElementSelection=function(){var t=this.previousElementSelection,e=t.start,i=t.end;this.setSelection({start:e||0,end:i||0})},e.prototype.writeValue=function(t){this.verifyValue(t),this.dateObject=this.getDateObject(t),this.refreshElementValue()},e.prototype.verifyValue=function(t){if(t&&!jM(t))throw new Error("The 'value' should be a valid JavaScript Date instance.")},e.prototype.refreshElementValue=function(){var t=this.caret()[0],e=this.element,i=this.isActive?this.inputFormat:this.displayFormat,r=this.dateObject.getTextAndFormat(i),n=r.text,o=r.format;this.currentFormat=o,this.currentText=n;var s=this.options.hasPlaceholder||IM(this.options.placeholder),a=!this.isActive&&s&&!this.dateObject.hasValue();s&&IM(this.options.placeholder)&&(e.placeholder=this.options.placeholder);var l=a?"":n;this.previousElementValue=this.elementValue,this.setElementValue(l),this.isActive&&!this.options.allowCaretMode&&this.options.selectNearestSegmentOnFocus&&this.selectNearestSegment(t)},e.prototype.caret=function(t,e){void 0===e&&(e=t);var i=void 0!==t,r=[t,t],n=this.element;if(!i||!this.options.disabled&&!this.options.readonly){try{void 0!==n.selectionStart&&(i&&(document&&document.activeElement!==n&&n.focus(),n.setSelectionRange(t,e)),r=[n.selectionStart,n.selectionEnd])}catch(t){r=[]}return r}},e.prototype.selectNearestSegment=function(t){for(var e=t,i=t-1;e<this.currentFormat.length||i>=0;e++,i--){if(e<this.currentFormat.length&&"_"!==this.currentFormat[e])return void this.selectDateSegment(this.currentFormat[e]);if(i>=0&&"_"!==this.currentFormat[i])return void this.selectDateSegment(this.currentFormat[i])}},e.prototype.selectDateSegment=function(t){for(var e=-1,i=0,r=0;r<this.currentFormat.length;r++)this.currentFormat[r]===t&&(i=r+1,-1===e&&(e=r));e<0&&(e=0),this.caret(0,0),this.caret(e,i)},e.prototype.getDateObject=function(t){var e=(this.dateObject||{}||null).leadingZero,i=this.createDateObject({value:t});return i.setLeadingZero(this.isActive?e:null),i},e.prototype.createDateObject=function(t){return void 0===t&&(t={}),new UM(LM({intlService:this.intl,formatPlaceholder:this.formatPlaceholder,format:this.inputFormat,cycleTime:this.options.cycleTime,twoDigitYearMax:this.options.twoDigitYearMax,autoCorrectParts:this.options.autoCorrectParts,value:this.options.value},t))},e}(VM);function uP(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class pP extends V{constructor(e,i){super(e,i),uP(this,"options",{dotNetInstance:null,format:"yyyy-MM-dd",formattedValue:null,allowNulls:!1,cycleTime:!0,locale:null,localeId:null,steps:{second:"",minute:"",hour:"",day:"",month:"",year:""},formatPlaceholder:null,hasPlaceholder:!1,placeholder:null,debounceDelay:null,autoCorrectParts:!0,autoSwitchParts:!0,autoSwitchKeys:[],twoDigitYearMax:null,allowCaretMode:!1,jsinterop:{focus:"",blur:"",updateDate:"",enter:""}}),uP(this,"onWidgetValueChange",(()=>{this.dateObject=this.widget.dateObject,this.updateComponentValue()})),uP(this,"onWidgetInputEnd",(()=>{this.debounceUpdateValue()})),uP(this,"onWidgetFocusEnd",(()=>{this.invokeMethodAsync(this.options.jsinterop.focus)})),uP(this,"onWidgetBlurEnd",(()=>{this.stopDebounceUpdateValue(),this.invokeMethodAsync(this.options.jsinterop.blur)})),uP(this,"onWidgetKeyDown",(t=>{t.event.keyCode===fe.ENTER&&this.invokeMethodAsync(this.options.jsinterop.enter)}));var r=this.options.formatPlaceholder?this.options.formatPlaceholder:"formatPattern";this.options.formatPlaceholder=r,this.setOptions(i),this.intlService=this.options.intlService||t,this.options.intlService=this.intlService;var n=this.element.getAttribute("data-id");this.extendCulture(n),this.initWidget(),this.dateObject=this.widget.dateObject}destroy(){this.unbindEvents(),super.destroy(),this.destroyWidget(),this.dateObject=null}initWidget(t,e){this.widget=this.createWidget(t||this.element,u({},e||this.options||{},{events:{valueChange:this.onWidgetValueChange,inputEnd:this.onWidgetInputEnd,focusEnd:this.onWidgetFocusEnd,blurEnd:this.onWidgetBlurEnd,keydown:this.onWidgetKeyDown}}),this.intlService)}destroyWidget(){this.widget&&(this.widget.destroy(),this.widget=null)}createWidget(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getWidgetConstructor();return e.intlService=i,new r(t,u({},e))}getWidgetConstructor(){return hP}refresh(){this.setOptions(this.options)}setWidgetOptions(t,e){this.widget&&this.widget.setOptions(t,e)}bindEvents(){}unbindEvents(){}setOptions(t){this.extendOptions(t),this.setWidgetOptions(t,!0),this.debounceUpdateValue=ji(this.updateComponentValue,this.options.debounceDelay)}extendCulture(t){var e=this.options;if(e.locale){e.locale.name=t;var i=g({},this.intlService.localeInfo("en"),e.locale);this.intlService.setData(i)}}focus(){this.element.focus()}stopDebounceUpdateValue(){this.debounceUpdateValue&&this.debounceUpdateValue.pending&&(this.debounceUpdateValue.stop(),this.debounceUpdateValue.runCallback())}updateComponentValue(){this.invokeMethodAsync(this.options.jsinterop.updateDate,{dateValue:this.dateObject.getFormattedDate("yyyy-MM-dd HH:mm:ss"),inputElementValue:this.element.value,isInCaretMode:this.widget.isInCaretMode()})}updateValue(t){var e=new Date(t);isNaN(e.getTime())&&(e=null),this.widget.dateObject.setValue(e),this.widget.refreshElementValue()}}function dP(t,e){Qt(pP,t,e)}function fP(t,e){var i=re(t);i&&i.updateValue(e)}function gP(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class mP extends V{constructor(t,e){super(t,e),gP(this,"options",{dotNetInstance:null,toggleElementSelector:"",pickerAnimationContainerId:"",jsinterop:{close:"",open:"",mousedown:"",blur:""}}),gP(this,"onToggleElementClick",(t=>{t.preventDefault()})),gP(this,"onToggleElementMouseDown",(()=>{this.inputComponent=re(this.input.getAttribute("data-id")),this.inputComponent&&this.inputComponent.stopDebounceUpdateValue();var t=this.options.jsinterop.mousedown;this.invokeMethodAsync(t)})),gP(this,"onPopupKeyDown",(t=>{(t.keyCode===fe.ESCAPE||t.keyCode===fe.ARROWUP&&t.altKey)&&(this.invokeClose(),this.focus(),t.stopPropagation())})),gP(this,"closePopup",(()=>(this.invokeClose(),!1))),gP(this,"openPopup",(()=>(this.invokeOpen(),!1))),gP(this,"onInputFocus",(()=>{this.invokeClose()})),gP(this,"onInputFocusOut",(t=>{q(this.pickerElement,t.relatedTarget)||q(this.element,t.relatedTarget)||this.invokeMethodAsync(this.options.jsinterop.blur)})),this.setOptions(e),this.input=this.element.getElementsByClassName("k-input-inner")[0],this.toggleElement=this.element.querySelector(e.toggleElementSelector),this.bindEvents()}destroy(){this.destroyTabKeyTrap(),this.destroyNavigationService(),this.unbindEvents(),this.unbindPickerEvents(),super.destroy(),this.input=this.toggleElement=this.pickerElement=null}setOptions(t){super.setOptions(t),this.unbindPickerEvents(),this.pickerElement=K(t.pickerAnimationContainerId),this.bindPickerEvents(),this.destroyTabKeyTrap(),this.destroyNavigationService(),this.initTabKeyTrap(),this.initNavigationService()}initNavigationService(){this.navigationService=new we(this.element),this.navigationService.bind("".concat(me.ALT," ").concat(ge.ARROWDOWN),this.openPopup),this.navigationService.bind("".concat(me.ALT," ").concat(ge.ARROWUP),this.closePopup)}destroyNavigationService(){this.navigationService&&this.navigationService.destroy()}initTabKeyTrap(){this.tabKeyTrap=new Se(this.pickerElement)}destroyTabKeyTrap(){this.tabKeyTrap&&this.tabKeyTrap.destroy()}bindEvents(){this.input.addEventListener("focus",this.onInputFocus),this.input.addEventListener("focusout",this.onInputFocusOut),this.toggleElement.addEventListener("click",this.onToggleElementClick),this.toggleElement.addEventListener("mousedown",this.onToggleElementMouseDown),this.tabKeyTrap.enableKeyTrap()}unbindEvents(){this.input.removeEventListener("focus",this.onInputFocus),this.input.removeEventListener("focusout",this.onInputFocusOut),this.toggleElement.removeEventListener("click",this.onToggleElementClick),this.toggleElement.removeEventListener("mousedown",this.onToggleElementMouseDown)}bindPickerEvents(){this.pickerElement.addEventListener("keydown",this.onPopupKeyDown,!0)}unbindPickerEvents(){this.pickerElement&&this.pickerElement.removeEventListener("keydown",this.onPopupKeyDown,!0)}focus(){var t=this;setTimeout((()=>{t.input.focus()}),100)}invokeClose(){this.invokeMethodAsync(this.options.jsinterop.close)}invokeOpen(){this.invokeMethodAsync(this.options.jsinterop.open)}}class yP extends mP{constructor(t,e){super(t,e),this.extendOptions(e),this.bindEvents(),this.bindPickerEvents()}destroy(){this.unbindEvents(),super.destroy()}}function vP(t,e){Qt(yP,t,e)}function bP(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class wP extends V{constructor(t,e){super(t,e),bP(this,"options",{dotNetInstance:null,focusOnInit:!1,jsinterop:{click:""}}),bP(this,"onKeyDown",(t=>{t.keyCode===fe.ARROWUP?(this.onKeyArrowUp(),t.preventDefault()):t.keyCode===fe.ARROWDOWN?(this.onKeyArrowDown(),t.preventDefault()):t.keyCode===fe.ENTER&&this.invokeEnter()})),bP(this,"onScroll",(()=>{var t=this;t.element.scrollTop!==t.scrollTop&&(clearTimeout(this.timeout),this.timeout=setTimeout((()=>{t.snapToItem(!0)}),33))})),bP(this,"onMouseDown",(t=>{t.preventDefault()})),bP(this,"onClick",(t=>{var e=t.target.closest("li"),i=this.listElement.querySelectorAll(".k-item"),r=Array.from(i).indexOf(e);e&&(this.scrollTo(e.offsetTop),this.invokeSelect(r))})),bP(this,"onMouseEnter",(()=>{this.timeList.focus()})),bP(this,"onFocusOut",(t=>{this.invokeFocusOut(t)})),this.extendOptions(e),this.timeList=this.element.parentElement,this.listElement=this.element.querySelector("ul.k-reset"),this.timeout,this.setDimensions(),this.bindEvents(),this.options.focusOnInit&&this.focusTimeList()}setDimensions(){this.itemHeight=this.listElement.querySelector("li.k-item").offsetHeight,this.elementHeight=this.element.offsetHeight,this.scrollTop=this.element.scrollTop;var t=this.listElement.offsetHeight+(this.elementHeight-this.itemHeight);this.element.querySelector(".k-scrollable-placeholder").setAttribute("style","height: "+t+"px");var e=Math.floor((this.elementHeight-this.itemHeight)/2);this.listElement.setAttribute("style","transform: translateY("+e+"px);")}bindEvents(){this.element.addEventListener("scroll",this.onScroll),this.element.addEventListener("mousedown",this.onMouseDown),this.listElement.addEventListener("click",this.onClick),this.timeList.addEventListener("keydown",this.onKeyDown),this.timeList.addEventListener("mouseenter",this.onMouseEnter),this.timeList.addEventListener("focusout",this.onFocusOut)}destroy(){clearTimeout(this.timeout),this.unbindEvents(),super.destroy(),this.selectedIndex=this.listElement=null}unbindEvents(){this.element.addEventListener("mousedown",this.onMouseDown),this.element.removeEventListener("scroll",this.onScroll),this.listElement.removeEventListener("click",this.onClick),this.timeList.removeEventListener("keydown",this.onKeyDown),this.timeList.removeEventListener("mouseenter",this.onMouseEnter),this.timeList.removeEventListener("focusout",this.onFocusOut)}onKeyArrowUp(){var t=this.selectedIndex;this.setSelectedIndex(t-1),this.selectedIndex!==t&&this.invokeSelect(this.selectedIndex)}onKeyArrowDown(){var t=this.selectedIndex;this.setSelectedIndex(t+1),this.selectedIndex!==t&&this.invokeSelect(this.selectedIndex)}focusTimeList(){var t=this;setTimeout((()=>{t.timeList.focus({preventScroll:!0})}),100)}snapToItem(t){var e=this.element.scrollTop,i=e%this.itemHeight;this.scrollTop>e?e-=i:e+=this.itemHeight-i,this.selectItem(e,t)}selectItem(t,e){if(!Number.isNaN(t)&&(this.scrollTo(t),e)){var i=Math.floor(t/this.itemHeight);this.invokeSelect(i)}}invokeSelect(t){var e=this.options.jsinterop.click,i=Math.min(t,this.listElement.querySelectorAll(".k-item").length-1);this.invokeMethodAsync(e,i)}invokeEnter(){var t=this.options.jsinterop.enter;this.invokeMethodAsync(t)}invokeFocusOut(t){t.relatedTarget&&this.invokeMethodAsync(this.options.jsinterop.focusout)}scrollTo(t){this.element.scrollTop=t,this.scrollTop=this.element.scrollTop}setSelectedIndex(t){this.setDimensions();var e=this.listElement.querySelectorAll(".k-item")[t];e&&(this.selectedIndex=t,this.scrollTo(e.offsetTop))}}function xP(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class SP extends mP{constructor(t,e){super(t,e),xP(this,"onNavigate",(t=>{var e=document.activeElement;if(e.classList.contains("k-time-list")){var i=e.getAttribute("data-index");t.keyCode===fe.ARROWLEFT?(this.focusTimeList(parseInt(i)-1),t.preventDefault()):t.keyCode===fe.ARROWRIGHT&&(this.focusTimeList(parseInt(i)+1),t.preventDefault())}})),this.extendOptions(e),this.bindEvents()}bindEvents(){this.pickerElement.addEventListener("keydown",this.onNavigate),super.bindEvents()}unbindEvents(){this.pickerElement.addEventListener("keydown",this.onNavigate),super.unbindEvents()}destroy(){this.unbindEvents(),super.destroy()}focusTimeList(t){var e='.k-time-list[data-index="'.concat(t,'"]'),i=this.pickerElement.querySelector(e);i&&i.focus()}focusFirstCarousel(){this.pickerElement&&setTimeout((()=>{var t=this.pickerElement.querySelector(".k-time-list");t instanceof HTMLElement&&t.focus()}),100)}}function kP(t,e){Qt(SP,t,e)}function CP(t){var e=re(t);e&&e.focus()}function AP(t,e){Qt(wP,t,e)}function _P(t,e){var i=re(t);i&&i.setSelectedIndex(e)}function TP(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var OP="keydown",EP="mousedown",MP="click",PP="focus",IP="focusout",DP=[fe.ARROWUP,fe.ARROWDOWN,fe.ARROWLEFT,fe.ARROWRIGHT,fe.HOME,fe.END,fe.SPACE];class FP extends V{constructor(t,e){super(t,e),TP(this,"onKeyDown",(t=>{DP.concat(fe.ENTER).includes(t.keyCode)?t.preventDefault():(t.shiftKey||t.ctrlKey)&&t.stopPropagation()})),TP(this,"onMouseDown",(t=>{t.preventDefault()})),TP(this,"onClick",(t=>{var e=t.currentTarget;e&&e.focus()})),TP(this,"onFocus",(()=>{this.invokeMethodAsync(this.options.jsinterop.focus)})),TP(this,"onFocusout",(t=>{t.relatedTarget&&this.invokeMethodAsync(this.options.jsinterop.focusout)})),this.extendOptions(e),this.tables=this.element.querySelectorAll("table"),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.tables=this.navigationService=null}bindEvents(){[...this.tables].forEach((t=>{t.addEventListener(EP,this.onMouseDown),t.addEventListener(MP,this.onClick),t.addEventListener(OP,this.onKeyDown,!0),t.addEventListener(PP,this.onFocus),t.addEventListener(IP,this.onFocusout)}))}unbindEvents(){[...this.tables].forEach((t=>{t.removeEventListener(EP,this.onMouseDown),t.removeEventListener(MP,this.onClick),t.removeEventListener(OP,this.onKeyDown,!0),t.removeEventListener(PP,this.onFocus),t.removeEventListener(IP,this.onFocusout)}))}focusTable(){var t=this.tables[0],e=this.isPickerAnimationInProgress();t&&(e?setTimeout((()=>{nt(t)}),300):nt(t))}isPickerAnimationInProgress(){var t=ne(this.element,".k-child-animation-container");return!(!t||!t.isAnimationInProgress)&&t.isAnimationInProgress()}}function RP(t,e){Qt(FP,t,e)}function LP(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class NP extends mP{constructor(t,e){super(t,e),LP(this,"onNavigate",(t=>{var e=document.activeElement;if(e.classList.contains("k-time-list")){var i=e.getAttribute("data-index");t.keyCode===fe.ARROWLEFT?(this.focusTimeList(parseInt(i)-1),t.preventDefault()):t.keyCode===fe.ARROWRIGHT&&(this.focusTimeList(parseInt(i)+1),t.preventDefault())}})),this.extendOptions(e),this.bindEvents()}bindEvents(){this.pickerElement.addEventListener("keydown",this.onNavigate),super.bindEvents()}unbindEvents(){this.pickerElement.removeEventListener("keydown",this.onNavigate),super.unbindEvents()}destroy(){this.unbindEvents(),super.destroy()}focusTimeList(t){var e='.k-time-list[data-index="'.concat(t,'"]'),i=this.pickerElement.querySelector(e);i&&i.focus()}focusTable(){var t=this;setTimeout((()=>{var e=t.pickerElement&&t.pickerElement.querySelector("table");e instanceof HTMLElement&&e.focus()}),100)}focusFirstCarousel(){this.pickerElement&&setTimeout((()=>{var t=this.pickerElement.querySelector(".k-time-list");t instanceof HTMLElement&&t.focus()}),100)}}function BP(t,e){Qt(NP,t,e)}function jP(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var zP="blur",UP="click";class $P extends V{constructor(t,e){super(t,e),jP(this,"options",{dotNetInstance:null,startTarget:null,endTarget:null,pickerAnimationContainerId:"",jsinterop:{change:"",close:"",open:""}}),jP(this,"onStartEnterKeyDown",(()=>{this.triggerStartChanged(),this.focusEndInput()})),jP(this,"onEndEnterKeyDown",(()=>{this.triggerEndChanged(),this.invokeClose()})),jP(this,"onPickerShiftTab",((t,e)=>{var i=ut(this.pickerElement,!1);return e.target!==i||(this.focusEndInput(),!1)})),jP(this,"onPickerTab",((t,e)=>{var i=this.pickerElement.querySelector("table:last-child");return e.target===i&&this.triggerClose(),!0})),jP(this,"triggerStartOpen",(()=>(this.isClosed()&&this.invokeOpen(this.options.startTarget),!0))),jP(this,"triggerEndOpen",(()=>(this.isClosed()&&this.invokeOpen(this.options.endTarget),!0))),jP(this,"triggerStartChanged",(()=>{this.invokeChange(this.options.startTarget)})),jP(this,"triggerEndChanged",(()=>{this.invokeChange(this.options.endTarget)})),jP(this,"triggerClose",(()=>(this.invokeClose(),!0))),jP(this,"focusPickerCalendar",(()=>!!this.isClosed()||(this.pickerElement.querySelector("table").focus(),!1))),jP(this,"closePicker",(()=>!!this.isClosed()||(this.triggerClose(),this.focusStartInput(),!1)));var i=this.element.querySelectorAll(".k-input-inner");this.startInput=i[0],this.endInput=i[1],this.setOptions(e),this.bindEvents()}setOptions(t){super.setOptions(t),this.pickerElement=K(t.pickerAnimationContainerId),this.destroyNavigationServices(),this.initNavigationServices()}bindEvents(){this.startInput.addEventListener(zP,this.triggerStartChanged),this.endInput.addEventListener(zP,this.triggerEndChanged),this.startInput.addEventListener(UP,this.triggerStartOpen,!0),this.endInput.addEventListener(UP,this.triggerEndOpen,!0)}unbindEvents(){this.startInput.removeEventListener(zP,this.triggerStartChanged),this.endInput.removeEventListener(zP,this.triggerEndChanged),this.startInput.removeEventListener(UP,this.triggerStartOpen,!0),this.endInput.removeEventListener(UP,this.triggerEndOpen,!0)}destroy(){this.unbindEvents(),this.destroyNavigationServices(),super.destroy()}initNavigationServices(){this.navigationServices=[this.initStartInputNavigationService(),this.initEndInputNavigationService(),this.initPickerNavigationService()]}destroyNavigationServices(){this.navigationServices&&this.navigationServices.forEach((t=>t.destroy()))}initStartInputNavigationService(){var t=new we(this.startInput);return t.bind([ge.ESC,"".concat(me.ALT," ").concat(ge.ARROWUP)],this.closePicker),t.bind("".concat(me.ALT," ").concat(ge.ARROWDOWN),this.triggerStartOpen),t.bind(ge.ENTER,this.onStartEnterKeyDown),t.bind("".concat(me.SHIFT," ").concat(ge.TAB),this.triggerClose),t}initEndInputNavigationService(){var t=new we(this.endInput);return t.bind([ge.ESC,"".concat(me.ALT," ").concat(ge.ARROWUP)],this.closePicker),t.bind("".concat(me.ALT," ").concat(ge.ARROWDOWN),this.triggerEndOpen),t.bind(ge.TAB,this.focusPickerCalendar),t.bind(ge.ENTER,this.onEndEnterKeyDown),t}initPickerNavigationService(){var t=new we(this.pickerElement);return t.bind("".concat(me.SHIFT," ").concat(ge.TAB),this.onPickerShiftTab),t.bind("".concat(ge.TAB),this.onPickerTab),t.bind([ge.ESC,"".concat(me.ALT," ").concat(ge.ARROWUP)],this.closePicker),t}focusStartInput(){this.startInput.focus()}focusEndInput(){this.endInput.focus()}invokeChange(t){this.invokeMethodAsync(this.options.jsinterop.change,t)}invokeClose(){this.invokeMethodAsync(this.options.jsinterop.close)}invokeOpen(t){this.invokeMethodAsync(this.options.jsinterop.open,t)}isClosed(){return!this.pickerElement||!this.pickerElement.children[0].children.length}}function HP(t,e){Qt($P,t,e)}function VP(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class qP extends V{constructor(t,e){super(t,e),VP(this,"options",{dotNetInstance:null,jsinterop:{keydown:""}}),VP(this,"onKeyDown",(t=>{this.element!==t.target&&t.keyCode!==fe.ESCAPE||this.invokeKeyDown(t)})),this.extendOptions(e),this.bindEvents(),this.elementDataId=this.element.dataset.id,this.enableTabKeyTrap(),this.focusElement()}destroy(){this.unbindEvents(),this.disableTabKeyTrap(),super.destroy()}bindEvents(){this.element.addEventListener("keydown",this.onKeyDown)}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown)}onAfterShow(t){this.unbindEvents(),this.options=t[0],this.element=K(this.elementDataId),this.bindEvents(),this.keyTrap.destroy(),this.enableTabKeyTrap(),this.focusElement()}onAfterClose(){this.restoreFocus()}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.key)}enableTabKeyTrap(){this.keyTrap=new _e(this.element),this.keyTrap.enableKeyTrap()}disableTabKeyTrap(){this.keyTrap&&this.keyTrap.disableTabKeyTrap()}focusElement(){if(this.elementToFocusOnClose=document.activeElement,this.options.focusedElementSelector){var t=this.element.querySelector(this.options.focusedElementSelector);t instanceof HTMLElement&&nt(t)}else dt(this.elementDataId)}restoreFocus(){this.elementToFocusOnClose&&(this.elementToFocusOnClose.focus(),this.elementToFocusOnClose=null)}}function WP(t,e){Qt(qP,t,e)}function XP(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var GP=D("field"),KP=D("text"),YP=".k-grouping-drop-container,.k-chip";class JP extends V{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),XP(this,"options",{dotNetInstance:null,parentSelector:".k-grid",dropTargetSelector:".k-grouping-header",dropTarget:{group:null,itemSelector:YP},jsinterop:{addGroup:""}}),XP(this,"onDropTargetDrop",(t=>{var e=t.draggable.originalCurrentTarget,i=t.draggable.getElementUnderCursor(t).closest(this.dropTarget.options.itemSelector),r=Bt(i);if(r<0){var n=qe(this.dropTarget.element.querySelectorAll(this.dropTarget.options.itemSelector));r=Bt(n)}var o=e.getAttribute(GP),s=e.getAttribute(KP);o&&r>=0&&this.invokeAddGroup({field:o,title:s,index:r})})),XP(this,"allowsDragFrom",(t=>!this.containsGroup(t.originalCurrentTarget)&&t.originalCurrentTarget.hasAttribute(GP))),XP(this,"allowsDropFrom",(t=>!this.containsGroup(t.originalCurrentTarget))),this.extendOptions(e),this.createDropTarget()}destroy(){this.destroyDropTarget(),super.destroy()}createDropTarget(){var t=this.element.closest(this.options.parentSelector).querySelector(this.options.dropTargetSelector);t&&(this.dropTarget=new mi(t,g(this.options.dropTarget,{allowsDragFrom:this.allowsDragFrom,allowsDropFrom:this.allowsDropFrom,events:{drop:this.onDropTargetDrop}})))}destroyDropTarget(){this.dropTarget&&this.dropTarget.destroy()}containsGroup(t){var e=t.getAttribute(GP),i=Array.from(this.element.querySelectorAll(YP)).map((t=>t.getAttribute(GP))).includes(e);return i}invokeAddGroup(t){this.invokeMethodAsync(this.options.jsinterop.addGroup,t)}}function ZP(t,e){Qt(JP,le(t,"Groupable"),e)}function QP(t){te(le(t,"Groupable"))}function tI(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var eI=D("field"),iI=D("text"),rI="k-drag-status",nI="k-i-plus",oI="k-i-cancel",sI="k-grouping-dropclue",aI=t=>{var e=E({position:"absolute","z-index":2e4}),i=(t=>t instanceof HTMLElement&&(t.getAttribute(iI)||t.getAttribute(eI))||"")(t),r=t.getAttribute(eI)||"",n=t.getAttribute(iI)||"";return j('<div class="k-header k-drag-clue" style="'.concat(e,'" data-field="').concat(_(r),'" data-text="').concat(_(n),'">\n            <span class="k-icon k-drag-status k-i-cancel k-icon-with-modifier">\n                <span class="k-icon k-icon-modifier"></span>\n            </span>\n            ').concat(_(i),"\n        </div>"))},lI=t=>t&&t.hasAttribute("data-field");class cI extends V{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),tI(this,"options",{parentSelector:".k-grid",draggableSourceSelector:".k-grid-header",draggable:{group:null,filter:"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell):not(.k-drag-cell)",ignore:".k-grid-header-menu, .k-checkbox, .k-column-resizer"}}),tI(this,"onDraggableDrag",(t=>{this.canDragToAnyDropTarget(t)||t.preventDefault()})),tI(this,"onDraggableDrop",(()=>{this.destroyDropClue()})),tI(this,"onDropTargetLeave",(()=>{this.showDisabledHint(),this.destroyDropClue()})),tI(this,"onDropTargetOver",(t=>{this.canDrop(t)?this.showDropAllowedIndicators(t):this.showDropForbiddenIndicators()})),tI(this,"ignoreElementUnderCursor",(t=>{var e=t&&t.closest(oi(sI));return Boolean(e)})),this.extendOptions(e),this.createDraggable()}destroy(){this.destroyDropClue(),this.destroyDraggable(),super.destroy()}extendOptions(t){this.options=g(this.options,t)}createDraggable(){var t=this.element.closest(this.options.parentSelector).querySelector(this.options.draggableSourceSelector);t&&(this.draggable=new bi(t,g(this.options.draggable,{hint:aI,ignoreElementUnderCursor:this.ignoreElementUnderCursor,events:{drag:this.onDraggableDrag,drop:this.onDraggableDrop,dropTargetLeave:this.onDropTargetLeave,dropTargetOver:this.onDropTargetOver}})))}destroyDraggable(){this.draggable&&this.draggable.destroy()}canDragToAnyDropTarget(t){var e=!1;return this.draggable.forEachDropTarget((i=>{e=e||i.allowsDragFrom(this.draggable,t)})),e}canDrop(t){return t.dropTarget&&t.dropTarget.allowsDropFrom(this.draggable,t)}showEnabledHint(){var t=this.draggable.hint;if(t){var e=t.querySelector(oi(rI));Q(oI,e),Z(nI,e)}}showDisabledHint(){var t=this.draggable.hint;if(t){var e=t.querySelector(oi(rI));Z(oI,e),Q(nI,e)}}createDropClue(){this.dropClue||(this.dropClue=new xi,this.dropClueSize=this.dropClue.getSize())}destroyDropClue(){this.dropClue&&(this.dropClue.destroy(),this.dropClue=null)}addDropClue(t){if(t.dropTarget&&t.elementUnderCursor){var e=t.elementUnderCursor.closest(t.dropTarget.options.itemSelector)||t.elementUnderCursor,i=t.draggable.originalCurrentTarget,r=this.getDropTargetIndicators(t.dropTarget.element,t.dropTarget.options.itemSelector).length>1,n=Nt(e,i),o=n?Lt(e,i):r&&!lI(e),s=this.getDropClueOffsetElement({elementUnderCursor:e,dropTargetItemSelector:t.dropTarget.options.itemSelector,dropTargeElement:t.dropTarget.element,isDragInSiblings:n});if(s){this.createDropClue();var a=this.dropClue.getOffsetState(s,o);if(!o){var{width:l}=this.dropClueSize;a.left-=l/2}this.showDropClue(a)}}}getDropClueOffsetElement(t){var{elementUnderCursor:e,dropTargeElement:i,dropTargetItemSelector:r,isDragInSiblings:n}=t,o=e.closest(r),s=this.getDropTargetIndicators(i,r),a=s.filter(lI),l=qe(s),c=qe(a)||l;return o&&(n||lI(o))&&(c=o),c}showDropClue(t){var{top:e,left:i,height:r}=t;this.dropClue||this.createDropClue(),this.dropClue.setState({top:e,left:i,height:r}),this.dropClue.show()}hideDropClue(){this.dropClue&&this.dropClue.hide()}showDropAllowedIndicators(t){this.showEnabledHint(),this.addDropClue(t)}showDropForbiddenIndicators(){this.showDisabledHint(),this.destroyDropClue()}getDropTargetIndicators(t,e){return Array.from(t.querySelectorAll(e))}}function hI(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Qt(cI,le(t,"ColumnDraggable"),e)}function uI(t){te(le(t,"ColumnDraggable"))}function pI(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var dI=D("reorderable"),fI=D("parent-col-initialization-index");class gI extends V{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),pI(this,"options",{parentSelector:".k-grid",reorderableSourceSelector:".k-grid-header",dropTarget:{itemSelector:"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell):not(.k-drag-cell)"}}),pI(this,"allowsDragFrom",(t=>{var e=Boolean(t.originalCurrentTarget.getAttribute(dI)),i=this.dropTarget.element.querySelectorAll(this.options.dropTarget.itemSelector).length>1;return e&&i})),pI(this,"allowsDropFrom",((t,e)=>{var i=e.elementUnderCursor.closest(this.options.dropTarget.itemSelector),r=t.originalCurrentTarget;if(!i||!r)return!1;var n=Boolean(r.getAttribute(dI)),o=N(fI,i),s=N(fI,r);return n&&i!==r&&o===s})),pI(this,"onDropTargetDrop",(t=>{var e=t.draggable.originalCurrentTarget,i=t.elementUnderCursor.closest(this.options.dropTarget.itemSelector),r=Ke(e),n=Ke(i),o=r>=0?r:Bt(e,this.options.dropTarget.itemSelector),s=n>=0?n:Bt(i,this.options.dropTarget.itemSelector);document.activeElement&&document.activeElement.blur(),this.reorderColumn(o,s)})),this.extendOptions(e),this.createDropTarget()}destroy(){this.destroyDropTarget(),super.destroy()}createDropTarget(){var t=this.element.closest(this.options.parentSelector).querySelector(this.options.reorderableSourceSelector);this.dropTarget=new mi(t,g(this.options.dropTarget,{allowsDragFrom:this.allowsDragFrom,allowsDropFrom:this.allowsDropFrom,events:{drop:this.onDropTargetDrop}}))}destroyDropTarget(){this.dropTarget&&this.dropTarget.destroy()}reorderColumn(t,e){t>=0&&e>=0&&t!==e&&this.invokeMethodAsync(this.options.jsinterop.reorderColumn,{fromIndex:t,toIndex:e})}}function mI(t,e){Qt(gI,le(t,"ColumnReorderable"),e)}function yI(t){te(le(t,"ColumnReorderable"))}function vI(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class bI extends V{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),vI(this,"options",{events:{resizeStart:null,resize:null,resizeEnd:null},draggable:{filter:""}}),vI(this,"onDraggableDragStart",(t=>{this.initialLocation={pageX:t.pageX,pageY:t.pageY},this.location={pageX:t.pageX,pageY:t.pageY},this.delta={x:0,y:0},this.initialDelta={x:0,y:0},this.trigger("resizeStart",t)})),vI(this,"onDraggableDrag",(t=>{this.setCursorStyle(t.sender.originalCurrentTarget.style.cursor),this.calculateInitialDelta(t),this.calculateDelta(t),this.setLocation(t),this.trigger("resize",t)})),vI(this,"onDraggableDragEnd",(t=>{this.resetCursorStyle(),this.trigger("resizeEnd",t)})),this.extendOptions(e),this.createDraggable(t)}destroy(){this.destroyDraggable(),super.destroy()}createDraggable(){this.draggable=new bi(this.element,g(this.options.draggable,{events:{dragStart:this.onDraggableDragStart,drag:this.onDraggableDrag,dragEnd:this.onDraggableDragEnd}}))}destroyDraggable(){this.draggable&&this.draggable.destroy()}trigger(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return super.trigger(t,u(e,{initialLocation:this.initialLocation,location:this.location,delta:this.delta,initialDelta:this.initialDelta}))}calculateDelta(t){this.delta={x:t.pageX-this.location.pageX,y:t.pageY-this.location.pageY}}calculateInitialDelta(t){this.initialDelta={x:t.pageX-this.initialLocation.pageX,y:t.pageY-this.initialLocation.pageY}}setLocation(t){var{pageX:e,pageY:i}=t;this.location={pageX:e,pageY:i}}setCursorStyle(t){t&&(document.body.style.cursor=t)}resetCursorStyle(){document.body.style.cursor=""}}function wI(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var xI="dblclick",SI=Array.from,kI=t=>parseFloat(t)+"px",CI=(t,e)=>{t.style.width=kI(e)},AI=t=>t.getBoundingClientRect().width,_I=t=>Boolean(t.style.width),TI=(t,e,i)=>i?ue(t,e,i):Math.max(t,e),OI="k-column-resizer";class EI extends V{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),wI(this,"options",{parentSelector:".k-grid",resizableSourceSelector:".k-grid-header",dataRowSelector:"tr:not(.k-grouping-row)",columnSelector:"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell):not(.k-drag-cell)",contentTableSelector:".k-grid-table",contentRowSelector:"tr.k-master-row",contentCellSelector:"td:not(.k-group-cell):not(.k-hierarchy-cell):not(.k-drag-cell)",footerTableSelector:".k-grid-footer table",footerRowSelector:"tr.k-group-footer",columns:[],defaultMinResizableWidth:30,dragResizing:!0,resizable:{draggable:{filter:".k-column-resizer"}},jsinterop:{resizeColumns:""}}),wI(this,"onResizableResizeStart",(t=>{this.resetState(),this.setFixedWidths();var e=t.originalCurrentTarget.closest(this.options.columnSelector);this.setState({originColumn:{element:e,initialWidth:AI(e)}}),this.rescaleColumns()})),wI(this,"onResizableResize",(t=>{var e=this.state.originColumn.element,i=AI(e),r=this.getColumnIndex(e),{minWidth:n,maxWidth:o}=this.getResizingConstraints(r),s=this.state.originColumn.initialWidth+t.initialDelta.x,a=o&&o<i||n>i,l=t.delta.x>0&&s<=n,c=o&&t.delta.x<0&&s>=o;(a||!l&&!c)&&this.applyResizeDelta(e,t.delta.x)})),wI(this,"onResizableResizeEnd",(()=>{this.state.columns.length>0&&this.invokeResizeColumns({columns:this.state.columns,tableWidth:this.state.tableWidth})})),wI(this,"onDoubleClick",(t=>{if(tt(OI,t.target)){var e=t.target.closest(this.options.columnSelector);this.autoFitColumnElements([e])}})),this.extendOptions(e),this.bindEvents(),this.options.dragResizing&&this.createResizable(),this.resetState()}destroy(){this.unbindEvents(),this.destroyResizable(),super.destroy()}createResizable(){var t=this.element.closest(this.options.parentSelector).querySelector(this.options.resizableSourceSelector);this.resizable=new bI(t,g(this.options.resizable,{events:{resizeStart:this.onResizableResizeStart,resize:this.onResizableResize,resizeEnd:this.onResizableResizeEnd}}))}destroyResizable(){this.resizable&&this.resizable.destroy()}bindEvents(){this.element.addEventListener(xI,this.onDoubleClick)}unbindEvents(){this.element.removeEventListener(xI,this.onDoubleClick)}setState(t){this.state=u(this.state||{},t)}resetState(){this.setState({columns:[],tableWidth:null,originColumn:{element:{},initialWidth:null}})}setColumns(t){this.options.columns=t}autoFitAllColumns(){var t=this.getLeafHeaderCells();this.autoFitColumnElements(t)}autoFitColumns(t){var e=t.map((t=>this.element.querySelector(Ve(t))));this.autoFitColumnElements(e)}autoFitColumnElements(t){var e=[];this.setFixedWidths(),this.rescaleColumns(),t.forEach((t=>{if(t&&!Ge(t)){var i=this.getHeaderCellLeafIndex(t),r=this.getColumnIndex(t);if(this.isContentCellVisible(i)){var n=this.getColumnWidth(i,r);this.resizeColumn(t,n);var o=AI(t);e.push({index:r,width:kI(o)})}}})),e.length>0&&this.invokeResizeColumns({columns:e,tableWidth:kI(AI(this.getHeaderTable()))})}getColumnWidth(t,e){var i=this.getContentColumnWidth(t,e),r=this.getHeaderColumnWidth(t,e),n=this.getFooterColumnWidth(t,e);return Math.max(i,r,n)}getContentColumnWidth(t,e){var i=this.getContentCellVirtualIndex(t);return i<0?0:this.calculateColumnWidth({columnIndex:i,columnInitializationIndex:e,tableElement:this.getContentTable(),cellSelector:this.options.contentCellSelector,scrollContainerSelector:".k-grid-content"})}getHeaderColumnWidth(t,e){return this.calculateColumnWidth({columnIndex:t,columnInitializationIndex:e,tableElement:this.getHeaderTable(),cellSelector:this.options.columnSelector,scrollContainerSelector:".k-grid-header-wrap"})}getFooterColumnWidth(t,e){var i=this.getFooterTable();return i?this.calculateColumnWidth({columnIndex:t,columnInitializationIndex:e,tableElement:i,cellSelector:this.options.contentCellSelector,scrollContainerSelector:".k-grid-footer-wrap"}):0}calculateColumnWidth(t){var{columnIndex:e,columnInitializationIndex:i,tableElement:r,cellSelector:n,scrollContainerSelector:o}=t,s=this.getTableColumns(r)[e],a=o?r.closest(o):null,l=s.style.width,c=null!==a?a.scrollLeft:0;s.style.width="",Z("k-autofitting",r);var h=r.querySelector(Ve(i))||r.querySelector(this.options.dataRowSelector).querySelectorAll(n)[e],u=AI(h);return Q("k-autofitting",r),s.style.width=l,a&&(a.scrollLeft=c),u}setFixedWidths(){var t=this.getHeaderColumns(),e=this.getHeaderTable(),i=this.getContentTable(),r=this.getFooterTable();if(!(t.every(_I)&&_I(e)&&_I(i))){CI(e,AI(e)),CI(i,AI(i)),r&&CI(r,AI(r));var n=this.hasMultiColumnHeaders()?this.getLeafHeaderCells():this.getHeaderCells(),o=this.getHeaderCells().sort(ei);this.leafHeaderCellsFixedWidths=[],this.headerCellsFixedWidths=[];for(var s=0;s<n.length;s++){var a=AI(n[s]);this.leafHeaderCellsFixedWidths.push(a)}for(var l=0;l<o.length;l++){var c=AI(o[l]);this.headerCellsFixedWidths.push(c)}for(var h=0;h<n.length;h++)this.resizeHeaderColumn(h,this.leafHeaderCellsFixedWidths[h]),this.resizeContentColumn(h,this.leafHeaderCellsFixedWidths[h]),r&&this.resizeFooterColumn(h,this.leafHeaderCellsFixedWidths[h])}}applyResizeDelta(t,e){t&&this.resizeColumn(t,AI(t)+e,e)}resizeColumn(t,e){var i=this.getFooterTable(),r=[];if(t){var n,o=this.getColumnIndex(t),s=this.hasMultiColumnHeaders(),a=this.getHeaderCellLeafIndex(t),l=[];if(s)l=((t,e)=>{var i=Ze(t,e);return i.filter((t=>i.every((e=>!ii(t.element,e.element)))))})(t,this.getHeaderCells().sort(ti));n=l.length>0?{minWidth:this.options.defaultMinResizableWidth,maxWidth:null}:this.getResizingConstraints(o);var c=TI(e,n.minWidth,n.maxWidth),h=c-AI(t);if(!(-.05<=h&&h<=.05)){if(r.push({index:o,width:kI(c)}),l.length){var u=[],p=0,d=h/l.length;l.forEach((t=>{var e=t.index,i=t.leafIndex,r=this.getHeaderColWidth(t.leafIndex),{minWidth:n,maxWidth:o}=this.getResizingConstraints(t.index),s=TI(r+d,n,o);u.push({index:e,leafIndex:i,newWidth:s})})),u.forEach((t=>{this.resizeHeaderColumn(t.leafIndex,t.newWidth),this.resizeContentColumn(t.leafIndex,t.newWidth),p+=t.newWidth,r.push({index:t.index,width:kI(t.newWidth)})})),r[0].width=kI(p);var f=p-AI(t);this.resizeHeaderTable(f),this.resizeContentTable(f),this.resizeLockedColumns(),i&&(this.resizeFooterTable(f),u.forEach((t=>{this.resizeFooterColumn(t.leafIndex,t.newWidth)})))}else this.resizeHeaderTable(h),this.resizeContentTable(h),this.resizeHeaderColumn(a,c),this.resizeContentColumn(a,c),this.resizeLockedColumns(),i&&(this.resizeFooterTable(h),this.resizeFooterColumn(a,c));this.setState({columns:r,tableWidth:kI(AI(this.getHeaderTable()))})}}}resizeHeaderColumn(t,e){var i=this.getHeaderColumnByIndex(t);CI(i,e)}resizeContentColumn(t,e){var i=this.getContentColumnByIndex(t);CI(i,e)}resizeFooterColumn(t,e){var i=this.getFooterColumnByIndex(t);CI(i,e)}resizeHeaderTable(t){this.resizeTable(this.getHeaderTable(),t)}resizeContentTable(t){this.resizeTable(this.getContentTable(),t)}resizeFooterTable(t){this.resizeTable(this.getFooterTable(),t)}resizeTable(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t&&CI(t,AI(t)+e)}resizeLockedColumns(){this.resizeLockedHeaderCells(),this.resizeLockedContentCells(),this.resizeLockedFooterCells()}resizeLockedHeaderCells(){var t=this.getHeaderCells().sort(ti);this.setLockedCellsOffsets(t)}resizeLockedContentCells(){var t=this.getContentRows();this.resizeLockedCellsForRows(t)}resizeLockedFooterCells(){var t=this.getFooterRows();this.resizeLockedCellsForRows(t)}resizeLockedCellsForRows(t){for(var e=0;e<t.length;e++){var i=t[e].querySelectorAll(this.options.contentCellSelector);this.setLockedCellsOffsets(i)}}setLockedCellsOffsets(t){this.setLockedCellsOffsetLeft(t),this.setLockedCellsOffsetRight(t)}setLockedCellsOffsetLeft(t){this.setLockedCellOffset(t,((t,e)=>{((t,e)=>{t.style.left=kI(e)})(t,e)}))}setLockedCellsOffsetRight(t){this.setLockedCellOffset(t,((t,e)=>{((t,e)=>{t.style.right=kI(e)})(t,e)}),{iterateBackwards:!0})}setLockedCellOffset(t,e){for(var{iterateBackwards:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getMaxLevel(t),n=new Array(r).fill(0),o=0;o<t.length;o++){var s=t[i?t.length-1-o:o];if(De(s)){var a=AI(s),l=Xe(s),c=Math.max(0,l-1);if(e(s,n[c]),Ge(s))n[c]+=a;else for(var h=c;h<n.length;h++)n[h]+=a}}}getMaxLevel(t){for(var e=1,i=0;i<t.length;i++){var r=Xe(t[i]);e=Math.max(e,r)}return e}invokeResizeColumns(t){if(x(t.columns)&&x(t.tableWidth))return this.invokeMethodAsync(this.options.jsinterop.resizeColumns,{columns:t.columns,tableWidth:t.tableWidth})}rescaleColumns(){this.headerCellsFixedWidths&&(this.invokeRescaleColumns(this.headerCellsFixedWidths.map((t=>"".concat(t,"px")))),this.headerCellsFixedWidths=null)}invokeRescaleColumns(t){return this.invokeMethodAsync(this.options.jsinterop.rescaleColumns,t)}getHeaderTable(){return this.element.closest("table")}getContentTable(){return this.element.closest(this.options.parentSelector).querySelector(this.options.contentTableSelector)}getFooterTable(){return this.element.closest(this.options.parentSelector).querySelector(this.options.footerTableSelector)}getHeaderColumnByIndex(t){return this.getHeaderColumns()[t]}getHeaderColumns(){return this.getTableColumns(this.getHeaderTable())}getHeaderColWidth(t){var e,i,r=this.getHeaderColumnByIndex(t);return e=r,i=parseFloat(e.style.width),Number.isNaN(i)?AI(e):i}getHeaderCellByIndex(t){return this.getHeaderCells()[t]}getHeaderCells(){return SI(this.element.querySelectorAll(this.options.columnSelector))}getLeafHeaderCells(){var t=this.getHeaderCells();return Qe(t).sort(ti)}getHeaderCellLeafIndex(t){return this.getLeafHeaderCells().indexOf(t)}getContentColumnByIndex(t){return this.getContentColumns()[t]}getContentColumns(){return this.getTableColumns(this.getContentTable())}getTableColumns(t){var e=t.querySelector("colgroup").querySelectorAll("col:not(.k-group-col):not(.k-hierarchy-col):not(.k-drag-col)");return SI(e)}getContentRows(){return this.queryContentTable(this.options.contentRowSelector)}getFooterColumnByIndex(t){return this.getFooterColumns()[t]}getFooterColumns(){return this.getTableColumns(this.getFooterTable())}getFooterRows(){return this.queryContentTable(this.options.footerRowSelector)}getColumnIndex(t){var e=Ke(t);return e>=0?e:Bt(t,this.options.columnSelector)}queryContentTable(t){var e=this.getContentTable().querySelectorAll(t);return SI(e)}hasMultiColumnHeaders(){return this.element.querySelectorAll("tr").length>1}getFirstContentRow(){return this.getContentTable().querySelector(this.options.dataRowSelector)}getContentCellVirtualIndex(t){var e=this.getFirstContentRow();if(!e)return-1;var i=e.querySelector(this.options.contentCellSelector),r=t;return i&&i.colSpan>1&&(r-=i.colSpan-1),r}isContentCellVisible(t){var e=this.getContentCellVirtualIndex(t),i=this.getFirstContentRow();if(!i)return!1;var r=i.querySelectorAll(this.options.contentCellSelector);return!!r&&(e>=0&&e<r.length)}getResizingConstraints(t){var e=this.options.columns[t]||{};return{minWidth:Math.max(e.minResizableWidth,this.options.defaultMinResizableWidth),maxWidth:e.maxResizableWidth}}}function MI(t,e){Qt(EI,le(t,"ColumnResizable"),e)}function PI(t){te(le(t,"ColumnResizable"))}function II(t,e){var i=re(le(t,"ColumnResizable"));i&&i.autoFitColumns(e)}function DI(t){var e=re(le(t,"ColumnResizable"));e&&e.autoFitAllColumns()}function FI(t,e){var i=re(le(t,"ColumnResizable"));i&&i.setColumns(e)}function RI(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var LI=[ge.ENTER,ge.ARROWDOWN,ge.ARROWUP],NI=()=>C(20);class BI extends V{constructor(t,e){super(t,e),RI(this,"options",{dotNetInstance:null,jsinterop:{keydown:"",focusout:"",collapse:""},mode:"",duration:0}),RI(this,"onMouseDown",(t=>{var e=t.target;"overlay"!==this.options.mode||it(e,[this.element])||this.invokeCollapse()})),RI(this,"onKeyDown",(t=>{this.invokeKeyDown(t)})),RI(this,"onFocusOut",(t=>{this.invokeFocusOut(t)})),this.extendOptions(e),this.bindEvents(),this.createNavigationService()}expandAsync(){return NI().then((()=>this.onTransitionEnd()))}collapseAsync(){return NI().then((()=>this.onTransitionEnd()))}destroy(){this.unbindEvents(),this.destroyNavigationService(),super.destroy()}bindEvents(){this.element.addEventListener("focusout",this.onFocusOut),document.addEventListener("mousedown",this.onMouseDown,!0)}unbindEvents(){this.element.removeEventListener("focusout",this.onFocusOut),document.removeEventListener("mousedown",this.onMouseDown,!0)}focusItem(t){var e=this.element.querySelector('[data-index="'.concat(t,'"]'));e instanceof HTMLElement&&e.focus()}cancelCallback(){this.timer&&this.timer.cancel(),this.timer=null}onTransitionEnd(){var t=this.options.duration;return this.timer=A(t),this.timer.promise}createNavigationService(){this.navigationService=new we(this.element),this.navigationService.bind(LI,this.onKeyDown)}destroyNavigationService(){this.navigationService&&(this.navigationService.destroy(),this.navigationService=null)}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)}invokeFocusOut(t){var e=t.target.closest(".k-drawer-item[role='menuitem'"),i=e?parseInt(e.getAttribute("data-index")):null;setTimeout((()=>{this.invokeMethodAsync(this.options.jsinterop.focusout,i)}),1)}invokeCollapse(){this.invokeMethodAsync(this.options.jsinterop.collapse)}}function jI(t,e){Qt(BI,t,e)}function zI(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var UI=[ge.ENTER,ge.ESC],$I=[ge.HOME,ge.END];class HI extends V{constructor(t,e){super(t,e),zI(this,"options",{dotNetInstance:null,suggestionListId:null,jsinterop:{focus:null,blur:null,keydown:null}}),zI(this,"onKeyDown",(t=>(this.invokeKeyDown(t),this.isClosed()))),zI(this,"onSuggestionListKeys",(t=>!!this.isClosed()||(this.invokeKeyDown(t),!1))),zI(this,"invokeKeyDown",(t=>{this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)})),zI(this,"invokeBlur",(()=>{this.invokeMethodAsync(this.options.jsinterop.blur)})),zI(this,"invokeFocus",(()=>{this.invokeMethodAsync(this.options.jsinterop.focus)})),this.setOptions(e),this.initNavigationService()}setOptions(t){super.setOptions(t),this.suggestionListElement=K(t.suggestionListId)}destroy(){this.destroyNavigationService(),this.suggestionListElement=null,super.destroy()}initNavigationService(){this.navigationService=new we(this.element),this.navigationService.bind(UI,this.onKeyDown),this.navigationService.bind("".concat(me.ALT," ").concat(ge.ARROWDOWN),this.onKeyDown),this.navigationService.bind("".concat(me.ALT," ").concat(ge.ARROWUP),this.onKeyDown),this.navigationService.bind($I,this.onSuggestionListKeys)}destroyNavigationService(){this.navigationService.destroy()}isClosed(){return!this.suggestionListElement||!this.suggestionListElement.children[0].children.length}}function VI(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var qI="blur",WI="focus";class XI extends HI{constructor(t,e){super(t,e),VI(this,"options",{value:null}),VI(this,"onBlur",(t=>{var e=t.relatedTarget;q(this.suggestionListElement,e)||q(this.element,e)?e.closest(".k-actionsheet")||this.focus():this.invokeBlur()})),VI(this,"onFocus",(()=>{this.invokeFocus()})),this.extendOptions(e),this.input=this.element.querySelector("input"),this.setValue(e.value),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.input=null}bindEvents(){this.input.addEventListener(qI,this.onBlur),this.input.addEventListener(WI,this.onFocus)}unbindEvents(){this.input.removeEventListener(qI,this.onBlur),this.input.removeEventListener(WI,this.onFocus)}setValue(t){this.input&&(this.input.value=t)}focus(){this.input&&this.input.focus()}}var GI=[ge.ARROWDOWN,ge.ARROWUP];class KI extends XI{constructor(t,e){super(t,e)}bindEvents(){super.bindEvents(),this.navigationService.bind(GI,this.onSuggestionListKeys)}}function YI(t,e){Qt(KI,t,e)}var JI=[ge.ARROWDOWN,ge.ARROWUP];class ZI extends XI{constructor(t,e){super(t,e)}bindEvents(){super.bindEvents(),this.navigationService.bind(JI,this.invokeKeyDown)}}function QI(t,e){Qt(ZI,t,e)}function tD(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var eD="blur",iD="click",rD=[ge.ARROWDOWN,ge.ARROWUP];class nD extends HI{constructor(t,e){super(t,e),tD(this,"focus",(()=>{tt("k-disabled",this.element)||this.element.focus()})),tD(this,"onBlur",(t=>{var e=t.relatedTarget;q(this.suggestionListElement,e)?e.closest("".concat(".k-list-filter",",").concat(".k-actionsheet"))||this.element.focus():this.invokeBlur()})),tD(this,"onFocus",(()=>{this.invokeFocus()})),this.initLabel(),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(eD,this.onBlur),this.element.addEventListener("focus",this.onFocus),this.bindLabelEvent(),this.navigationService.bind(rD,this.invokeKeyDown),this.navigationService.bind("printableKey",this.invokeKeyDown)}unbindEvents(){this.element.removeEventListener(eD,this.onBlur),this.unbindLabelEvent()}initLabel(){var t=this.element.getAttribute("id"),e=document.querySelector("[for='"+t+"']");if(e&&!this.element.getAttribute("aria-labelledby")){var i=e.getAttribute("id");i||(i=m(),e.setAttribute("id",i)),this.element.setAttribute("aria-labelledby",i)}this.label=e}bindLabelEvent(){this.label&&this.label.addEventListener(iD,this.focus)}unbindLabelEvent(){this.label&&this.label.removeEventListener(iD,this.focus)}}function oD(t,e){Qt(nD,t,e)}function sD(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var aD="click";class lD extends XI{constructor(t,e){super(t,e),sD(this,"onClick",(t=>{t.target instanceof HTMLElement&&!t.target.closest(".k-chip")&&!t.target.closest(".k-clear-value")&&(this.focus(),this.invokeClick())})),this.bindMultiSelectEvents()}destroy(){this.unbindMultiSelectEvents(),super.destroy()}bindMultiSelectEvents(){this.element.addEventListener(aD,this.onClick,!0),this.navigationService.bind([ge.ARROWDOWN,ge.ARROWUP],this.onSuggestionListKeys),this.navigationService.bind([ge.ARROWLEFT,ge.ARROWRIGHT],this.onTagFocus.bind(this)),this.navigationService.bind([ge.BACKSPACE,ge.DELETE],this.onTagDelete.bind(this))}unbindMultiSelectEvents(){this.element.removeEventListener(aD,this.onClick,!0)}onTagDelete(t){return!!this.input.value||(this.invokeKeyDown(t),!1)}onTagFocus(t){return!!this.input.value||(this.invokeKeyDown(t),!1)}invokeClick(){var t=this.options.jsinterop.click;this.invokeMethodAsync(t)}}function cD(t,e){Qt(lD,t,e)}function hD(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var uD=[ge.ARROWDOWN,ge.ARROWUP];class pD extends XI{constructor(t,e){super(t,e),hD(this,"options",{dotNetInstance:null,columnsTotalWidth:null}),this.extendOptions(e),this.adjustScrollbarPadding()}destroy(){this.destroyContentScrollSync(),super.destroy()}bindEvents(){super.bindEvents(),this.navigationService.bind(uD,this.invokeKeyDown)}adjustScrollbarPadding(){jt()}createContentScrollSync(){this.contentScrollSync&&this.destroyContentScrollSync(),this.tableScroller=this.suggestionListElement.querySelector(".k-table-scroller"),this.tableHeaderWrap=this.suggestionListElement.querySelector(".k-table-header-wrap"),this.contentScrollSync=new Ie(this.tableScroller,{horizontal:!0,vertical:!1,syncFromConnections:!0,connections:[this.tableHeaderWrap]})}destroyContentScrollSync(){this.contentScrollSync&&(this.contentScrollSync.destroy(),this.contentScrollSync=null,this.tableScroller=null,this.tableHeaderWrap=null)}onOpen(){this.suggestionListElement&&this.createContentScrollSync()}onClose(){this.suggestionListElement&&this.destroyContentScrollSync()}}function dD(t,e){Qt(pD,t,e)}function fD(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var gD="blur",mD=[ge.ARROWDOWN,ge.ARROWUP,ge.ENTER,ge.ESC,"".concat(me.ALT," ").concat(ge.ARROWUP)];class yD extends V{constructor(t,e){super(t,e),fD(this,"options",{dotNetInstance:null,anchorDataId:"",jsinterop:{blur:null,keydown:null}}),fD(this,"onBlur",(t=>{var e=t.relatedTarget;e&&e.closest('[data-id="'.concat(this.options.anchorDataId,'"]'))||(q(this.element.closest(".k-popup"),e)?this.element.focus():this.invokeBlur())})),fD(this,"onKeyDown",(t=>{this.invokeKeyDown(t)})),fD(this,"invokeBlur",(()=>{this.invokeMethodAsync(this.options.jsinterop.blur)})),fD(this,"invokeKeyDown",(t=>{this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)})),this.extendOptions(e),this.bindEvents(),this.initNavigationService()}destroy(){this.destroyNavigationService(),this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(gD,this.onBlur)}unbindEvents(){this.element.removeEventListener(gD,this.onBlur)}initNavigationService(){this.navigationService=new we(this.element),this.navigationService.bind(mD,this.onKeyDown)}destroyNavigationService(){this.navigationService.destroy()}}function vD(t,e){Qt(yD,t,e)}function bD(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class wD extends V{constructor(t,e){super(t,e),bD(this,"options",{dotNetInstance:null,parentSelector:null,containerSelector:null,jsinterop:{focus:null,blur:null,keydown:null}}),bD(this,"onScroll",(()=>{var t=Dt(this.scrollableContainer,"li");if(t){var e=N("data-group-index",t);this.currentGroupIndex!==e&&(this.currentGroupIndex=e,this.invokeMethodAsync(this.options.jsinterop.groupChanged,e))}})),this.extendOptions(e),this.scrollableContainer=t.closest(this.options.containerSelector).querySelector(this.options.parentSelector),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.scrollableContainer.addEventListener("scroll",this.onScroll)}unbindEvents(){this.scrollableContainer.removeEventListener("scroll",this.onScroll)}}function xD(t,e){Qt(wD,t,e)}function SD(t){this.content=t}SD.prototype={constructor:SD,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,i){var r=i&&i!=t?this.remove(i):this,n=r.find(t),o=r.content.slice();return-1==n?o.push(i||t,e):(o[n+1]=e,i&&(o[n]=i)),new SD(o)},remove:function(t){var e=this.find(t);if(-1==e)return this;var i=this.content.slice();return i.splice(e,2),new SD(i)},addToStart:function(t,e){return new SD([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var i=this.remove(t).content.slice();return i.push(t,e),new SD(i)},addBefore:function(t,e,i){var r=this.remove(e),n=r.content.slice(),o=r.find(t);return n.splice(-1==o?n.length:o,0,e,i),new SD(n)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=SD.from(t)).size?new SD(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=SD.from(t)).size?new SD(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=SD.from(t);for(var i=0;i<t.content.length;i+=2)e=e.remove(t.content[i]);return e},toObject:function(){var t={};return this.forEach((function(e,i){t[e]=i})),t},get size(){return this.content.length>>1}},SD.from=function(t){if(t instanceof SD)return t;var e=[];if(t)for(var i in t)e.push(i,t[i]);return new SD(e)};const kD=SD;function CD(t,e,i){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:i;let n=t.child(r),o=e.child(r);if(n!=o){if(!n.sameMarkup(o))return i;if(n.isText&&n.text!=o.text){for(let t=0;n.text[t]==o.text[t];t++)i++;return i}if(n.content.size||o.content.size){let t=CD(n.content,o.content,i+1);if(null!=t)return t}i+=n.nodeSize}else i+=n.nodeSize}}function AD(t,e,i,r){for(let n=t.childCount,o=e.childCount;;){if(0==n||0==o)return n==o?null:{a:i,b:r};let s=t.child(--n),a=e.child(--o),l=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:i,b:r};if(s.isText&&s.text!=a.text){let t=0,e=Math.min(s.text.length,a.text.length);for(;t<e&&s.text[s.text.length-t-1]==a.text[a.text.length-t-1];)t++,i--,r--;return{a:i,b:r}}if(s.content.size||a.content.size){let t=AD(s.content,a.content,i-1,r-1);if(t)return t}i-=l,r-=l}else i-=l,r-=l}}class _D{constructor(t,e){if(this.content=t,this.size=e||0,null==e)for(let e=0;e<t.length;e++)this.size+=t[e].nodeSize}nodesBetween(t,e,i,r=0,n){for(let o=0,s=0;s<e;o++){let a=this.content[o],l=s+a.nodeSize;if(l>t&&!1!==i(a,r+s,n||null,o)&&a.content.size){let n=s+1;a.nodesBetween(Math.max(0,t-n),Math.min(a.content.size,e-n),i,r+n)}s=l}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,i,r){let n="",o=!0;return this.nodesBetween(t,e,((s,a)=>{s.isText?(n+=s.text.slice(Math.max(t,a)-a,e-a),o=!i):s.isLeaf?(r?n+="function"==typeof r?r(s):r:s.type.spec.leafText&&(n+=s.type.spec.leafText(s)),o=!i):!o&&s.isBlock&&(n+=i,o=!0)}),0),n}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,i=t.firstChild,r=this.content.slice(),n=0;for(e.isText&&e.sameMarkup(i)&&(r[r.length-1]=e.withText(e.text+i.text),n=1);n<t.content.length;n++)r.push(t.content[n]);return new _D(r,this.size+t.size)}cut(t,e=this.size){if(0==t&&e==this.size)return this;let i=[],r=0;if(e>t)for(let n=0,o=0;o<e;n++){let s=this.content[n],a=o+s.nodeSize;a>t&&((o<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-o),Math.min(s.text.length,e-o)):s.cut(Math.max(0,t-o-1),Math.min(s.content.size,e-o-1))),i.push(s),r+=s.nodeSize),o=a}return new _D(i,r)}cutByIndex(t,e){return t==e?_D.empty:0==t&&e==this.content.length?this:new _D(this.content.slice(t,e))}replaceChild(t,e){let i=this.content[t];if(i==e)return this;let r=this.content.slice(),n=this.size+e.nodeSize-i.nodeSize;return r[t]=e,new _D(r,n)}addToStart(t){return new _D([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new _D(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,i=0;e<this.content.length;e++){let r=this.content[e];t(r,i,e),i+=r.nodeSize}}findDiffStart(t,e=0){return CD(this,t,e)}findDiffEnd(t,e=this.size,i=t.size){return AD(this,t,e,i)}findIndex(t,e=-1){if(0==t)return OD(0,t);if(t==this.size)return OD(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let i=0,r=0;;i++){let n=r+this.child(i).nodeSize;if(n>=t)return n==t||e>0?OD(i+1,n):OD(i,r);r=n}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((t=>t.toJSON())):null}static fromJSON(t,e){if(!e)return _D.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new _D(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return _D.empty;let e,i=0;for(let r=0;r<t.length;r++){let n=t[r];i+=n.nodeSize,r&&n.isText&&t[r-1].sameMarkup(n)?(e||(e=t.slice(0,r)),e[e.length-1]=n.withText(e[e.length-1].text+n.text)):e&&e.push(n)}return new _D(e||t,i)}static from(t){if(!t)return _D.empty;if(t instanceof _D)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new _D([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}_D.empty=new _D([],0);const TD={index:0,offset:0};function OD(t,e){return TD.index=t,TD.offset=e,TD}function ED(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;let i=Array.isArray(t);if(Array.isArray(e)!=i)return!1;if(i){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!ED(t[i],e[i]))return!1}else{for(let i in t)if(!(i in e)||!ED(t[i],e[i]))return!1;for(let i in e)if(!(i in t))return!1}return!0}class MD{constructor(t,e){this.type=t,this.attrs=e}addToSet(t){let e,i=!1;for(let r=0;r<t.length;r++){let n=t[r];if(this.eq(n))return t;if(this.type.excludes(n.type))e||(e=t.slice(0,r));else{if(n.type.excludes(this.type))return t;!i&&n.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),i=!0),e&&e.push(n)}}return e||(e=t.slice()),i||e.push(this),e}removeFromSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}isInSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}eq(t){return this==t||this.type==t.type&&ED(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");let i=t.marks[e.type];if(!i)throw new RangeError(`There is no mark type ${e.type} in this schema`);return i.create(e.attrs)}static sameSet(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!t[i].eq(e[i]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&0==t.length)return MD.none;if(t instanceof MD)return[t];let e=t.slice();return e.sort(((t,e)=>t.type.rank-e.type.rank)),e}}MD.none=[];class PD extends Error{}class ID{constructor(t,e,i){this.content=t,this.openStart=e,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let i=FD(this.content,t+this.openStart,e);return i&&new ID(i,this.openStart,this.openEnd)}removeBetween(t,e){return new ID(DD(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return ID.empty;let i=e.openStart||0,r=e.openEnd||0;if("number"!=typeof i||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new ID(_D.fromJSON(t,e.content),i,r)}static maxOpen(t,e=!0){let i=0,r=0;for(let r=t.firstChild;r&&!r.isLeaf&&(e||!r.type.spec.isolating);r=r.firstChild)i++;for(let i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new ID(t,i,r)}}function DD(t,e,i){let{index:r,offset:n}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:a}=t.findIndex(i);if(n==e||o.isText){if(a!=i&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(i))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(DD(o.content,e-n-1,i-n-1)))}function FD(t,e,i,r){let{index:n,offset:o}=t.findIndex(e),s=t.maybeChild(n);if(o==e||s.isText)return r&&!r.canReplace(n,n,i)?null:t.cut(0,e).append(i).append(t.cut(e));let a=FD(s.content,e-o-1,i);return a&&t.replaceChild(n,s.copy(a))}function RD(t,e,i){if(i.openStart>t.depth)throw new PD("Inserted content deeper than insertion position");if(t.depth-i.openStart!=e.depth-i.openEnd)throw new PD("Inconsistent open depths");return LD(t,e,i,0)}function LD(t,e,i,r){let n=t.index(r),o=t.node(r);if(n==e.index(r)&&r<t.depth-i.openStart){let s=LD(t,e,i,r+1);return o.copy(o.content.replaceChild(n,s))}if(i.content.size){if(i.openStart||i.openEnd||t.depth!=r||e.depth!=r){let{start:n,end:s}=function(t,e){let i=e.depth-t.openStart,r=e.node(i).copy(t.content);for(let t=i-1;t>=0;t--)r=e.node(t).copy(_D.from(r));return{start:r.resolveNoCache(t.openStart+i),end:r.resolveNoCache(r.content.size-t.openEnd-i)}}(i,t);return UD(o,$D(t,n,s,e,r))}{let r=t.parent,n=r.content;return UD(r,n.cut(0,t.parentOffset).append(i.content).append(n.cut(e.parentOffset)))}}return UD(o,HD(t,e,r))}function ND(t,e){if(!e.type.compatibleContent(t.type))throw new PD("Cannot join "+e.type.name+" onto "+t.type.name)}function BD(t,e,i){let r=t.node(i);return ND(r,e.node(i)),r}function jD(t,e){let i=e.length-1;i>=0&&t.isText&&t.sameMarkup(e[i])?e[i]=t.withText(e[i].text+t.text):e.push(t)}function zD(t,e,i,r){let n=(e||t).node(i),o=0,s=e?e.index(i):n.childCount;t&&(o=t.index(i),t.depth>i?o++:t.textOffset&&(jD(t.nodeAfter,r),o++));for(let t=o;t<s;t++)jD(n.child(t),r);e&&e.depth==i&&e.textOffset&&jD(e.nodeBefore,r)}function UD(t,e){if(!t.type.validContent(e))throw new PD("Invalid content for node "+t.type.name);return t.copy(e)}function $D(t,e,i,r,n){let o=t.depth>n&&BD(t,e,n+1),s=r.depth>n&&BD(i,r,n+1),a=[];return zD(null,t,n,a),o&&s&&e.index(n)==i.index(n)?(ND(o,s),jD(UD(o,$D(t,e,i,r,n+1)),a)):(o&&jD(UD(o,HD(t,e,n+1)),a),zD(e,i,n,a),s&&jD(UD(s,HD(i,r,n+1)),a)),zD(r,null,n,a),new _D(a)}function HD(t,e,i){let r=[];if(zD(null,t,i,r),t.depth>i){jD(UD(BD(t,e,i+1),HD(t,e,i+1)),r)}return zD(e,null,i,r),new _D(r)}ID.empty=new ID(_D.empty,0,0);class VD{constructor(t,e,i){this.pos=t,this.path=e,this.parentOffset=i,this.depth=e.length/3-1}resolveDepth(t){return null==t?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[3*this.resolveDepth(t)]}index(t){return this.path[3*this.resolveDepth(t)+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)}start(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]}after(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let i=this.pos-this.path[this.path.length-1],r=t.child(e);return i?t.child(e).cut(i):r}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let i=this.path[3*e],r=0==e?0:this.path[3*e-1]+1;for(let e=0;e<t;e++)r+=i.child(e).nodeSize;return r}marks(){let t=this.parent,e=this.index();if(0==t.content.size)return MD.none;if(this.textOffset)return t.child(e).marks;let i=t.maybeChild(e-1),r=t.maybeChild(e);if(!i){let t=i;i=r,r=t}let n=i.marks;for(var o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let i=e.marks,r=t.parent.maybeChild(t.index());for(var n=0;n<i.length;n++)!1!==i[n].type.spec.inclusive||r&&i[n].isInSet(r.marks)||(i=i[n--].removeFromSet(i));return i}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);i>=0;i--)if(t.pos<=this.end(i)&&(!e||e(this.node(i))))return new GD(this,t,i);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let i=[],r=0,n=e;for(let e=t;;){let{index:t,offset:o}=e.content.findIndex(n),s=n-o;if(i.push(e,t,r+o),!s)break;if(e=e.child(t),e.isText)break;n=s-1,r+=o+1}return new VD(e,i,n)}static resolveCached(t,e){for(let i=0;i<qD.length;i++){let r=qD[i];if(r.pos==e&&r.doc==t)return r}let i=qD[WD]=VD.resolve(t,e);return WD=(WD+1)%XD,i}}let qD=[],WD=0,XD=12;class GD{constructor(t,e,i){this.$from=t,this.$to=e,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const KD=Object.create(null);class YD{constructor(t,e,i,r=MD.none){this.type=t,this.attrs=e,this.marks=r,this.content=i||_D.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,i,r=0){this.content.nodesBetween(t,e,i,r,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,i,r){return this.content.textBetween(t,e,i,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,i){return this.type==t&&ED(this.attrs,e||t.defaultAttrs||KD)&&MD.sameSet(this.marks,i||MD.none)}copy(t=null){return t==this.content?this:new YD(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new YD(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,i=!1){if(t==e)return ID.empty;let r=this.resolve(t),n=this.resolve(e),o=i?0:r.sharedDepth(e),s=r.start(o),a=r.node(o).content.cut(r.pos-s,n.pos-s);return new ID(a,r.depth-o,n.depth-o)}replace(t,e,i){return RD(this.resolve(t),this.resolve(e),i)}nodeAt(t){for(let e=this;;){let{index:i,offset:r}=e.content.findIndex(t);if(e=e.maybeChild(i),!e)return null;if(r==t||e.isText)return e;t-=r+1}}childAfter(t){let{index:e,offset:i}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:i}}childBefore(t){if(0==t)return{node:null,index:0,offset:0};let{index:e,offset:i}=this.content.findIndex(t);if(i<t)return{node:this.content.child(e),index:e,offset:i};let r=this.content.child(e-1);return{node:r,index:e-1,offset:i-r.nodeSize}}resolve(t){return VD.resolveCached(this,t)}resolveNoCache(t){return VD.resolve(this,t)}rangeHasMark(t,e,i){let r=!1;return e>t&&this.nodesBetween(t,e,(t=>(i.isInSet(t.marks)&&(r=!0),!r))),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),ZD(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,i=_D.empty,r=0,n=i.childCount){let o=this.contentMatchAt(t).matchFragment(i,r,n),s=o&&o.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(let t=r;t<n;t++)if(!this.type.allowsMarks(i.child(t).marks))return!1;return!0}canReplaceWith(t,e,i,r){if(r&&!this.type.allowsMarks(r))return!1;let n=this.contentMatchAt(t).matchType(i),o=n&&n.matchFragment(this.content,e);return!!o&&o.validEnd}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){if(!this.type.validContent(this.content))throw new RangeError(`Invalid content for node ${this.type.name}: ${this.content.toString().slice(0,50)}`);let t=MD.none;for(let e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!MD.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((t=>t.type.name))}`);this.content.forEach((t=>t.check()))}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((t=>t.toJSON()))),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let i=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,i)}let r=_D.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,i)}}YD.prototype.text=void 0;class JD extends YD{constructor(t,e,i,r){if(super(t,e,null,r),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):ZD(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new JD(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new JD(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return 0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function ZD(t,e){for(let i=t.length-1;i>=0;i--)e=t[i].type.name+"("+e+")";return e}class QD{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let i=new tF(t,e);if(null==i.next)return QD.empty;let r=eF(i);i.next&&i.err("Unexpected trailing text");let n=function(t){let e=Object.create(null);return i(aF(t,0));function i(r){let n=[];r.forEach((e=>{t[e].forEach((({term:e,to:i})=>{if(!e)return;let r;for(let t=0;t<n.length;t++)n[t][0]==e&&(r=n[t][1]);aF(t,i).forEach((t=>{r||n.push([e,r=[]]),-1==r.indexOf(t)&&r.push(t)}))}))}));let o=e[r.join(",")]=new QD(r.indexOf(t.length-1)>-1);for(let t=0;t<n.length;t++){let r=n[t][1].sort(sF);o.next.push({type:n[t][0],next:e[r.join(",")]||i(r)})}return o}}(function(t){let e=[[]];return n(o(t,0),i()),e;function i(){return e.push([])-1}function r(t,i,r){let n={term:r,to:i};return e[t].push(n),n}function n(t,e){t.forEach((t=>t.to=e))}function o(t,e){if("choice"==t.type)return t.exprs.reduce(((t,i)=>t.concat(o(i,e))),[]);if("seq"!=t.type){if("star"==t.type){let s=i();return r(e,s),n(o(t.expr,s),s),[r(s)]}if("plus"==t.type){let s=i();return n(o(t.expr,e),s),n(o(t.expr,s),s),[r(s)]}if("opt"==t.type)return[r(e)].concat(o(t.expr,e));if("range"==t.type){let s=e;for(let e=0;e<t.min;e++){let e=i();n(o(t.expr,s),e),s=e}if(-1==t.max)n(o(t.expr,s),s);else for(let e=t.min;e<t.max;e++){let e=i();r(s,e),n(o(t.expr,s),e),s=e}return[r(s)]}if("name"==t.type)return[r(e,void 0,t.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let s=o(t.exprs[r],e);if(r==t.exprs.length-1)return s;n(s,e=i())}}}(r));return function(t,e){for(let i=0,r=[t];i<r.length;i++){let t=r[i],n=!t.validEnd,o=[];for(let e=0;e<t.next.length;e++){let{type:i,next:s}=t.next[e];o.push(i.name),!n||i.isText||i.hasRequiredAttrs()||(n=!1),-1==r.indexOf(s)&&r.push(s)}n&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(n,i),n}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,i=t.childCount){let r=this;for(let n=e;r&&n<i;n++)r=r.matchType(t.child(n).type);return r}get inlineContent(){return this.next.length&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let i=0;i<t.next.length;i++)if(this.next[e].type==t.next[i].type)return!0;return!1}fillBefore(t,e=!1,i=0){let r=[this];return function n(o,s){let a=o.matchFragment(t,i);if(a&&(!e||a.validEnd))return _D.from(s.map((t=>t.createAndFill())));for(let t=0;t<o.next.length;t++){let{type:e,next:i}=o.next[t];if(!e.isText&&!e.hasRequiredAttrs()&&-1==r.indexOf(i)){r.push(i);let t=n(i,s.concat(e));if(t)return t}}return null}(this,[])}findWrapping(t){for(let e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let r=i.shift(),n=r.match;if(n.matchType(t)){let t=[];for(let e=r;e.type;e=e.via)t.push(e.type);return t.reverse()}for(let t=0;t<n.next.length;t++){let{type:o,next:s}=n.next[t];o.isLeaf||o.hasRequiredAttrs()||o.name in e||r.type&&!s.validEnd||(i.push({match:o.contentMatch,type:o,via:r}),e[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];return function e(i){t.push(i);for(let r=0;r<i.next.length;r++)-1==t.indexOf(i.next[r].next)&&e(i.next[r].next)}(this),t.map(((e,i)=>{let r=i+(e.validEnd?"*":" ")+" ";for(let i=0;i<e.next.length;i++)r+=(i?", ":"")+e.next[i].type.name+"->"+t.indexOf(e.next[i].next);return r})).join("\n")}}QD.empty=new QD(!0);class tF{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function eF(t){let e=[];do{e.push(iF(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function iF(t){let e=[];do{e.push(rF(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function rF(t){let e=function(t){if(t.eat("(")){let e=eF(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){let e=function(t,e){let i=t.nodeTypes,r=i[e];if(r)return[r];let n=[];for(let t in i){let r=i[t];r.groups.indexOf(e)>-1&&n.push(r)}0==n.length&&t.err("No node type or group '"+e+"' found");return n}(t,t.next).map((e=>(null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e})));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}t.err("Unexpected token '"+t.next+"'")}(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=oF(t,e)}return e}function nF(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function oF(t,e){let i=nF(t),r=i;return t.eat(",")&&(r="}"!=t.next?nF(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:i,max:r,expr:e}}function sF(t,e){return e-t}function aF(t,e){let i=[];return function e(r){let n=t[r];if(1==n.length&&!n[0].term)return e(n[0].to);i.push(r);for(let t=0;t<n.length;t++){let{term:r,to:o}=n[t];r||-1!=i.indexOf(o)||e(o)}}(e),i.sort(sF)}function lF(t){let e=Object.create(null);for(let i in t){let r=t[i];if(!r.hasDefault)return null;e[i]=r.default}return e}function cF(t,e){let i=Object.create(null);for(let r in t){let n=e&&e[r];if(void 0===n){let e=t[r];if(!e.hasDefault)throw new RangeError("No value supplied for attribute "+r);n=e.default}i[r]=n}return i}function hF(t){let e=Object.create(null);if(t)for(let i in t)e[i]=new pF(t[i]);return e}class uF{constructor(t,e,i){this.name=t,this.schema=e,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=hF(i.attrs),this.defaultAttrs=lF(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||"text"==t),this.isText="text"==t}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==QD.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:cF(this.attrs,t)}create(t=null,e,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new YD(this,this.computeAttrs(t),_D.from(e),MD.setFrom(i))}createChecked(t=null,e,i){if(e=_D.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new YD(this,this.computeAttrs(t),e,MD.setFrom(i))}createAndFill(t=null,e,i){if(t=this.computeAttrs(t),(e=_D.from(e)).size){let t=this.contentMatch.fillBefore(e);if(!t)return null;e=t.append(e)}let r=this.contentMatch.matchFragment(e),n=r&&r.fillBefore(_D.empty,!0);return n?new YD(this,t,e.append(n),MD.setFrom(i)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let e=0;e<t.childCount;e++)if(!this.allowsMarks(t.child(e).marks))return!1;return!0}allowsMarkType(t){return null==this.markSet||this.markSet.indexOf(t)>-1}allowsMarks(t){if(null==this.markSet)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(null==this.markSet)return t;let e;for(let i=0;i<t.length;i++)this.allowsMarkType(t[i].type)?e&&e.push(t[i]):e||(e=t.slice(0,i));return e?e.length?e:MD.none:t}static compile(t,e){let i=Object.create(null);t.forEach(((t,r)=>i[t]=new uF(t,e,r)));let r=e.spec.topNode||"doc";if(!i[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let t in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}}class pF{constructor(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default}get isRequired(){return!this.hasDefault}}class dF{constructor(t,e,i,r){this.name=t,this.rank=e,this.schema=i,this.spec=r,this.attrs=hF(r.attrs),this.excluded=null;let n=lF(this.attrs);this.instance=n?new MD(this,n):null}create(t=null){return!t&&this.instance?this.instance:new MD(this,cF(this.attrs,t))}static compile(t,e){let i=Object.create(null),r=0;return t.forEach(((t,n)=>i[t]=new dF(t,r++,e,n))),i}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}excludes(t){return this.excluded.indexOf(t)>-1}}class fF{constructor(t){this.cached=Object.create(null),this.spec={nodes:kD.from(t.nodes),marks:kD.from(t.marks||{}),topNode:t.topNode},this.nodes=uF.compile(this.spec.nodes,this),this.marks=dF.compile(this.spec.marks,this);let e=Object.create(null);for(let t in this.nodes){if(t in this.marks)throw new RangeError(t+" can not be both a node and a mark");let i=this.nodes[t],r=i.spec.content||"",n=i.spec.marks;i.contentMatch=e[r]||(e[r]=QD.parse(r,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet="_"==n?null:n?gF(this,n.split(" ")):""!=n&&i.inlineContent?null:[]}for(let t in this.marks){let e=this.marks[t],i=e.spec.excludes;e.excluded=null==i?[e]:""==i?[]:gF(this,i.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,i,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof uF))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,i,r)}text(t,e){let i=this.nodes.text;return new JD(i,i.defaultAttrs,t,MD.setFrom(e))}mark(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)}nodeFromJSON(t){return YD.fromJSON(this,t)}markFromJSON(t){return MD.fromJSON(this,t)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}function gF(t,e){let i=[];for(let r=0;r<e.length;r++){let n=e[r],o=t.marks[n],s=o;if(o)i.push(o);else for(let e in t.marks){let r=t.marks[e];("_"==n||r.spec.group&&r.spec.group.split(" ").indexOf(n)>-1)&&i.push(s=r)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return i}class mF{constructor(t,e){this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((t=>{t.tag?this.tags.push(t):t.style&&this.styles.push(t)})),this.normalizeLists=!this.tags.some((e=>{if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;let i=t.nodes[e.node];return i.contentMatch.matchType(i)}))}parse(t,e={}){let i=new SF(this,e,!1);return i.addAll(t,e.from,e.to),i.finish()}parseSlice(t,e={}){let i=new SF(this,e,!0);return i.addAll(t,e.from,e.to),ID.maxOpen(i.finish())}matchTag(t,e,i){for(let r=i?this.tags.indexOf(i)+1:0;r<this.tags.length;r++){let i=this.tags[r];if(kF(t,i.tag)&&(void 0===i.namespace||t.namespaceURI==i.namespace)&&(!i.context||e.matchesContext(i.context))){if(i.getAttrs){let e=i.getAttrs(t);if(!1===e)continue;i.attrs=e||void 0}return i}}}matchStyle(t,e,i,r){for(let n=r?this.styles.indexOf(r)+1:0;n<this.styles.length;n++){let r=this.styles[n],o=r.style;if(!(0!=o.indexOf(t)||r.context&&!i.matchesContext(r.context)||o.length>t.length&&(61!=o.charCodeAt(t.length)||o.slice(t.length+1)!=e))){if(r.getAttrs){let t=r.getAttrs(e);if(!1===t)continue;r.attrs=t||void 0}return r}}}static schemaRules(t){let e=[];function i(t){let i=null==t.priority?50:t.priority,r=0;for(;r<e.length;r++){let t=e[r];if((null==t.priority?50:t.priority)<i)break}e.splice(r,0,t)}for(let e in t.marks){let r=t.marks[e].spec.parseDOM;r&&r.forEach((t=>{i(t=CF(t)),t.mark=e}))}for(let e in t.nodes){let r=t.nodes[e].spec.parseDOM;r&&r.forEach((t=>{i(t=CF(t)),t.node=e}))}return e}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new mF(t,mF.schemaRules(t)))}}const yF={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},vF={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},bF={ol:!0,ul:!0};function wF(t,e,i){return null!=e?(e?1:0)|("full"===e?2:0):t&&"pre"==t.whitespace?3:-5&i}class xF{constructor(t,e,i,r,n,o,s){this.type=t,this.attrs=e,this.marks=i,this.pendingMarks=r,this.solid=n,this.options=s,this.content=[],this.activeMarks=MD.none,this.stashMarks=[],this.match=o||(4&s?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(_D.from(t));if(!e){let e,i=this.type.contentMatch;return(e=i.findWrapping(t.type))?(this.match=i,e):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)}finish(t){if(!(1&this.options)){let t,e=this.content[this.content.length-1];if(e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))){let i=e;e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-t[0].length))}}let e=_D.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(_D.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}popFromStashMark(t){for(let e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]}applyPending(t){for(let e=0,i=this.pendingMarks;e<i.length;e++){let r=i[e];(this.type?this.type.allowsMarkType(r.type):AF(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!yF.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class SF{constructor(t,e,i){this.parser=t,this.options=e,this.isOpen=i,this.open=0;let r,n=e.topNode,o=wF(null,e.preserveWhitespace,0)|(i?4:0);r=n?new xF(n.type,n.attrs,MD.none,MD.none,!0,e.topMatch||n.type.contentMatch,o):new xF(i?null:t.schema.topNodeType,null,MD.none,MD.none,!0,null,o),this.nodes=[r],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){let e=t.getAttribute("style"),i=e?this.readStyles(function(t){let e,i=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;e=i.exec(t);)r.push(e[1],e[2].trim());return r}(e)):null,r=this.top;if(null!=i)for(let t=0;t<i.length;t++)this.addPendingMark(i[t]);if(this.addElement(t),null!=i)for(let t=0;t<i.length;t++)this.removePendingMark(i[t],r)}}addTextNode(t){let e=t.nodeValue,i=this.top;if(2&i.options||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(1&i.options)e=2&i.options?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){let r=i.content[i.content.length-1],n=t.previousSibling;(!r||n&&"BR"==n.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)}addElement(t,e){let i,r=t.nodeName.toLowerCase();bF.hasOwnProperty(r)&&this.parser.normalizeLists&&function(t){for(let e=t.firstChild,i=null;e;e=e.nextSibling){let t=1==e.nodeType?e.nodeName.toLowerCase():null;t&&bF.hasOwnProperty(t)&&i?(i.appendChild(e),e=i):"li"==t?i=e:t&&(i=null)}}(t);let n=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(i=this.parser.matchTag(t,this,e));if(n?n.ignore:vF.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!n||n.skip||n.closeParent){n&&n.closeParent?this.open=Math.max(0,this.open-1):n&&n.skip.nodeType&&(t=n.skip);let e,i=this.top,o=this.needsBlock;if(yF.hasOwnProperty(r))e=!0,i.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),e&&this.sync(i),this.needsBlock=o}else this.addElementByRule(t,n,!1===n.consuming?i:void 0)}leafFallback(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))}ignoreFallback(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}readStyles(t){let e=MD.none;t:for(let i=0;i<t.length;i+=2)for(let r;;){let n=this.parser.matchStyle(t[i],t[i+1],this,r);if(!n)continue t;if(n.ignore)return null;if(e=this.parser.schema.marks[n.mark].create(n.attrs).addToSet(e),!1!==n.consuming)break;r=n}return e}addElementByRule(t,e,i){let r,n,o;if(e.node)n=this.parser.schema.nodes[e.node],n.isLeaf?this.insertNode(n.create(e.attrs))||this.leafFallback(t):r=this.enter(n,e.attrs||null,e.preserveWhitespace);else{o=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(o)}let s=this.top;if(n&&n.isLeaf)this.findInside(t);else if(i)this.addElement(t,i);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((t=>this.insertNode(t)));else{let i=t;"string"==typeof e.contentElement?i=t.querySelector(e.contentElement):"function"==typeof e.contentElement?i=e.contentElement(t):e.contentElement&&(i=e.contentElement),this.findAround(t,i,!0),this.addAll(i)}r&&this.sync(s)&&this.open--,o&&this.removePendingMark(o,s)}addAll(t,e,i){let r=e||0;for(let n=e?t.childNodes[e]:t.firstChild,o=null==i?null:t.childNodes[i];n!=o;n=n.nextSibling,++r)this.findAtPoint(t,r),this.addDOM(n);this.findAtPoint(t,r)}findPlace(t){let e,i;for(let r=this.open;r>=0;r--){let n=this.nodes[r],o=n.findWrapping(t);if(o&&(!e||e.length>o.length)&&(e=o,i=n,!o.length))break;if(n.solid)break}if(!e)return!1;this.sync(i);for(let t=0;t<e.length;t++)this.enterInner(e[t],null,!1);return!0}insertNode(t){if(t.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(t)){this.closeExtra();let e=this.top;e.applyPending(t.type),e.match&&(e.match=e.match.matchType(t.type));let i=e.activeMarks;for(let r=0;r<t.marks.length;r++)e.type&&!e.type.allowsMarkType(t.marks[r].type)||(i=t.marks[r].addToSet(i));return e.content.push(t.mark(i)),!0}return!1}enter(t,e,i){let r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,i),r}enterInner(t,e=null,i=!1,r){this.closeExtra();let n=this.top;n.applyPending(t),n.match=n.match&&n.match.matchType(t);let o=wF(t,r,n.options);4&n.options&&0==n.content.length&&(o|=4),this.nodes.push(new xF(t,e,n.activeMarks,n.pendingMarks,i,null,o)),this.open++}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(t){for(let e=this.open;e>=0;e--)if(this.nodes[e]==t)return this.open=e,!0;return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let i=this.nodes[e].content;for(let e=i.length-1;e>=0;e--)t+=i[e].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==t&&this.find[i].offset==e&&(this.find[i].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,i){if(t!=e&&this.find)for(let r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)){e.compareDocumentPosition(this.find[r].node)&(i?2:4)&&(this.find[r].pos=this.currentPos)}}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),i=this.options.context,r=!(this.isOpen||i&&i.parent.type!=this.nodes[0].type),n=-(i?i.depth+1:0)+(r?0:1),o=(t,s)=>{for(;t>=0;t--){let a=e[t];if(""==a){if(t==e.length-1||0==t)continue;for(;s>=n;s--)if(o(t-1,s))return!0;return!1}{let t=s>0||0==s&&r?this.nodes[s].type:i&&s>=n?i.node(s-n).type:null;if(!t||t.name!=a&&-1==t.groups.indexOf(a))return!1;s--}}return!0};return o(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let i=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}addPendingMark(t){let e=function(t,e){for(let i=0;i<e.length;i++)if(t.eq(e[i]))return e[i]}(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)}removePendingMark(t,e){for(let i=this.open;i>=0;i--){let r=this.nodes[i];if(r.pendingMarks.lastIndexOf(t)>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);let e=r.popFromStashMark(t);e&&r.type&&r.type.allowsMarkType(e.type)&&(r.activeMarks=e.addToSet(r.activeMarks))}if(r==e)break}}}function kF(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function CF(t){let e={};for(let i in t)e[i]=t[i];return e}function AF(t,e){let i=e.schema.nodes;for(let r in i){let n=i[r];if(!n.allowsMarkType(t))continue;let o=[],s=t=>{o.push(t);for(let i=0;i<t.edgeCount;i++){let{type:r,next:n}=t.edge(i);if(r==e)return!0;if(o.indexOf(n)<0&&s(n))return!0}};if(s(n.contentMatch))return!0}}class _F{constructor(t,e){this.nodes=t,this.marks=e}serializeFragment(t,e={},i){i||(i=OF(e).createDocumentFragment());let r=i,n=[];return t.forEach((t=>{if(n.length||t.marks.length){let i=0,o=0;for(;i<n.length&&o<t.marks.length;){let e=t.marks[o];if(this.marks[e.type.name]){if(!e.eq(n[i][0])||!1===e.type.spec.spanning)break;i++,o++}else o++}for(;i<n.length;)r=n.pop()[1];for(;o<t.marks.length;){let i=t.marks[o++],s=this.serializeMark(i,t.isInline,e);s&&(n.push([i,r]),r.appendChild(s.dom),r=s.contentDOM||s.dom)}}r.appendChild(this.serializeNodeInner(t,e))})),i}serializeNodeInner(t,e){let{dom:i,contentDOM:r}=_F.renderSpec(OF(e),this.nodes[t.type.name](t));if(r){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,e,r)}return i}serializeNode(t,e={}){let i=this.serializeNodeInner(t,e);for(let r=t.marks.length-1;r>=0;r--){let n=this.serializeMark(t.marks[r],t.isInline,e);n&&((n.contentDOM||n.dom).appendChild(i),i=n.dom)}return i}serializeMark(t,e,i={}){let r=this.marks[t.type.name];return r&&_F.renderSpec(OF(i),r(t,e))}static renderSpec(t,e,i=null){if("string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;let r,n=e[0],o=n.indexOf(" ");o>0&&(i=n.slice(0,o),n=n.slice(o+1));let s=i?t.createElementNS(i,n):t.createElement(n),a=e[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a)){l=2;for(let t in a)if(null!=a[t]){let e=t.indexOf(" ");e>0?s.setAttributeNS(t.slice(0,e),t.slice(e+1),a[t]):s.setAttribute(t,a[t])}}for(let n=l;n<e.length;n++){let o=e[n];if(0===o){if(n<e.length-1||n>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}{let{dom:e,contentDOM:n}=_F.renderSpec(t,o,i);if(s.appendChild(e),n){if(r)throw new RangeError("Multiple content holes");r=n}}}return{dom:s,contentDOM:r}}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new _F(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let e=TF(t.nodes);return e.text||(e.text=t=>t.text),e}static marksFromSchema(t){return TF(t.marks)}}function TF(t){let e={};for(let i in t){let r=t[i].spec.toDOM;r&&(e[i]=r)}return e}function OF(t){return t.document||window.document}const EF=Math.pow(2,16);function MF(t,e){return t+e*EF}function PF(t){return 65535&t}class IF{constructor(t,e,i){this.pos=t,this.delInfo=e,this.recover=i}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class DF{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&DF.empty)return DF.empty}recover(t){let e=0,i=PF(t);if(!this.inverted)for(let t=0;t<i;t++)e+=this.ranges[3*t+2]-this.ranges[3*t+1];return this.ranges[3*i]+e+function(t){return(t-(65535&t))/EF}(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,i){let r=0,n=this.inverted?2:1,o=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let a=this.ranges[s]-(this.inverted?r:0);if(a>t)break;let l=this.ranges[s+n],c=this.ranges[s+o],h=a+l;if(t<=h){let n=a+r+((l?t==a?-1:t==h?1:e:e)<0?0:c);if(i)return n;let o=t==(e<0?a:h)?null:MF(s/3,t-a),u=t==a?2:t==h?1:4;return(e<0?t!=a:t!=h)&&(u|=8),new IF(n,u,o)}r+=c-l}return i?t+r:new IF(t+r,0,null)}touches(t,e){let i=0,r=PF(e),n=this.inverted?2:1,o=this.inverted?1:2;for(let e=0;e<this.ranges.length;e+=3){let s=this.ranges[e]-(this.inverted?i:0);if(s>t)break;let a=this.ranges[e+n];if(t<=s+a&&e==3*r)return!0;i+=this.ranges[e+o]-a}return!1}forEach(t){let e=this.inverted?2:1,i=this.inverted?1:2;for(let r=0,n=0;r<this.ranges.length;r+=3){let o=this.ranges[r],s=o-(this.inverted?n:0),a=o+(this.inverted?0:n),l=this.ranges[r+e],c=this.ranges[r+i];t(s,s+l,a,a+c),n+=c-l}}invert(){return new DF(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?DF.empty:new DF(t<0?[0,-t,0]:[0,0,t])}}DF.empty=new DF([]);class FF{constructor(t=[],e,i=0,r=t.length){this.maps=t,this.mirror=e,this.from=i,this.to=r}slice(t=0,e=this.maps.length){return new FF(this.maps,this.mirror,t,e)}copy(){return new FF(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)}appendMapping(t){for(let e=0,i=this.maps.length;e<t.maps.length;e++){let r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?i+r:void 0)}}getMirror(t){if(this.mirror)for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,i=this.maps.length+t.maps.length;e>=0;e--){let r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?i-r-1:void 0)}}invert(){let t=new FF;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let i=this.from;i<this.to;i++)t=this.maps[i].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,i){let r=0;for(let i=this.from;i<this.to;i++){let n=this.maps[i].mapResult(t,e);if(null!=n.recover){let e=this.getMirror(i);if(null!=e&&e>i&&e<this.to){i=e,t=this.maps[e].recover(n.recover);continue}}r|=n.delInfo,t=n.pos}return i?t:new IF(t,r,null)}}const RF=Object.create(null);class LF{getMap(){return DF.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=RF[e.stepType];if(!i)throw new RangeError(`No step type ${e.stepType} defined`);return i.fromJSON(t,e)}static jsonID(t,e){if(t in RF)throw new RangeError("Duplicate use of step JSON ID "+t);return RF[t]=e,e.prototype.jsonID=t,e}}class NF{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new NF(t,null)}static fail(t){return new NF(null,t)}static fromReplace(t,e,i,r){try{return NF.ok(t.replace(e,i,r))}catch(t){if(t instanceof PD)return NF.fail(t.message);throw t}}}function BF(t,e,i){let r=[];for(let n=0;n<t.childCount;n++){let o=t.child(n);o.content.size&&(o=o.copy(BF(o.content,e,o))),o.isInline&&(o=e(o,i,n)),r.push(o)}return _D.fromArray(r)}class jF extends LF{constructor(t,e,i){super(),this.from=t,this.to=e,this.mark=i}apply(t){let e=t.slice(this.from,this.to),i=t.resolve(this.from),r=i.node(i.sharedDepth(this.to)),n=new ID(BF(e.content,((t,e)=>t.isAtom&&e.type.allowsMarkType(this.mark.type)?t.mark(this.mark.addToSet(t.marks)):t),r),e.openStart,e.openEnd);return NF.fromReplace(t,this.from,this.to,n)}invert(){return new zF(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deleted&&i.deleted||e.pos>=i.pos?null:new jF(e.pos,i.pos,this.mark)}merge(t){return t instanceof jF&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new jF(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new jF(e.from,e.to,t.markFromJSON(e.mark))}}LF.jsonID("addMark",jF);class zF extends LF{constructor(t,e,i){super(),this.from=t,this.to=e,this.mark=i}apply(t){let e=t.slice(this.from,this.to),i=new ID(BF(e.content,(t=>t.mark(this.mark.removeFromSet(t.marks))),t),e.openStart,e.openEnd);return NF.fromReplace(t,this.from,this.to,i)}invert(){return new jF(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deleted&&i.deleted||e.pos>=i.pos?null:new zF(e.pos,i.pos,this.mark)}merge(t){return t instanceof zF&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new zF(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new zF(e.from,e.to,t.markFromJSON(e.mark))}}LF.jsonID("removeMark",zF);class UF extends LF{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return NF.fail("No node at mark step's position");let i=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return NF.fromReplace(t,this.pos,this.pos+1,new ID(_D.from(i),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let t=this.mark.addToSet(e.marks);if(t.length==e.marks.length){for(let i=0;i<e.marks.length;i++)if(!e.marks[i].isInSet(t))return new UF(this.pos,e.marks[i]);return new UF(this.pos,this.mark)}}return new $F(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new UF(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new UF(e.pos,t.markFromJSON(e.mark))}}LF.jsonID("addNodeMark",UF);class $F extends LF{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return NF.fail("No node at mark step's position");let i=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return NF.fromReplace(t,this.pos,this.pos+1,new ID(_D.from(i),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new UF(this.pos,this.mark):this}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new $F(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new $F(e.pos,t.markFromJSON(e.mark))}}LF.jsonID("removeNodeMark",$F);class HF extends LF{constructor(t,e,i,r=!1){super(),this.from=t,this.to=e,this.slice=i,this.structure=r}apply(t){return this.structure&&qF(t,this.from,this.to)?NF.fail("Structure replace would overwrite content"):NF.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new DF([this.from,this.to-this.from,this.slice.size])}invert(t){return new HF(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deletedAcross&&i.deletedAcross?null:new HF(e.pos,Math.max(e.pos,i.pos),this.slice)}merge(t){if(!(t instanceof HF)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let e=this.slice.size+t.slice.size==0?ID.empty:new ID(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new HF(t.from,this.to,e,this.structure)}}{let e=this.slice.size+t.slice.size==0?ID.empty:new ID(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new HF(this.from,this.to+(t.to-t.from),e,this.structure)}}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new HF(e.from,e.to,ID.fromJSON(t,e.slice),!!e.structure)}}LF.jsonID("replace",HF);class VF extends LF{constructor(t,e,i,r,n,o,s=!1){super(),this.from=t,this.to=e,this.gapFrom=i,this.gapTo=r,this.slice=n,this.insert=o,this.structure=s}apply(t){if(this.structure&&(qF(t,this.from,this.gapFrom)||qF(t,this.gapTo,this.to)))return NF.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return NF.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,e.content);return i?NF.fromReplace(t,this.from,this.to,i):NF.fail("Content does not fit in gap")}getMap(){return new DF([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new VF(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1),r=t.map(this.gapFrom,-1),n=t.map(this.gapTo,1);return e.deletedAcross&&i.deletedAcross||r<e.pos||n>i.pos?null:new VF(e.pos,i.pos,r,n,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new VF(e.from,e.to,e.gapFrom,e.gapTo,ID.fromJSON(t,e.slice),e.insert,!!e.structure)}}function qF(t,e,i){let r=t.resolve(e),n=i-e,o=r.depth;for(;n>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,n--;if(n>0){let t=r.node(o).maybeChild(r.indexAfter(o));for(;n>0;){if(!t||t.isLeaf)return!0;t=t.firstChild,n--}}return!1}function WF(t,e,i){return(0==e||t.canReplace(e,t.childCount))&&(i==t.childCount||t.canReplace(0,i))}function XF(t){let e=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let i=t.depth;;--i){let r=t.$from.node(i),n=t.$from.index(i),o=t.$to.indexAfter(i);if(i<t.depth&&r.canReplace(n,o,e))return i;if(0==i||r.type.spec.isolating||!WF(r,n,o))break}return null}function GF(t){return{type:t,attrs:null}}function KF(t,e,i=1,r){let n=t.resolve(e),o=n.depth-i,s=r&&r[r.length-1]||n.parent;if(o<0||n.parent.type.spec.isolating||!n.parent.canReplace(n.index(),n.parent.childCount)||!s.type.validContent(n.parent.content.cutByIndex(n.index(),n.parent.childCount)))return!1;for(let t=n.depth-1,e=i-2;t>o;t--,e--){let i=n.node(t),o=n.index(t);if(i.type.spec.isolating)return!1;let s=i.content.cutByIndex(o,i.childCount),a=r&&r[e]||i;if(a!=i&&(s=s.replaceChild(0,a.type.create(a.attrs))),!i.canReplace(o+1,i.childCount)||!a.type.validContent(s))return!1}let a=n.indexAfter(o),l=r&&r[0];return n.node(o).canReplaceWith(a,a,l?l.type:n.node(o+1).type)}function YF(t,e){let i=t.resolve(e),r=i.index();return JF(i.nodeBefore,i.nodeAfter)&&i.parent.canReplace(r,r+1)}function JF(t,e){return!(!t||!e||t.isLeaf||!t.canAppend(e))}function ZF(t,e,i=e,r=ID.empty){if(e==i&&!r.size)return null;let n=t.resolve(e),o=t.resolve(i);return QF(n,o,r)?new HF(e,i,r):new tR(n,o,r).fit()}function QF(t,e,i){return!i.openStart&&!i.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),i.content)}LF.jsonID("replaceAround",VF);class tR{constructor(t,e,i){this.$from=t,this.$to=e,this.unplaced=i,this.frontier=[],this.placed=_D.empty;for(let e=0;e<=t.depth;e++){let i=t.node(e);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(e))})}for(let e=t.depth;e>0;e--)this.placed=_D.from(t.node(e).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,i=this.$from,r=this.close(t<0?this.$to:i.doc.resolve(t));if(!r)return null;let n=this.placed,o=i.depth,s=r.depth;for(;o&&s&&1==n.childCount;)n=n.firstChild.content,o--,s--;let a=new ID(n,o,s);return t>-1?new VF(i.pos,t,this.$to.pos,this.$to.end(),a,e):a.size||i.pos!=this.$to.pos?new HF(i.pos,r.pos,a):null}findFittable(){for(let t=1;t<=2;t++)for(let e=this.unplaced.openStart;e>=0;e--){let i,r=null;e?(r=rR(this.unplaced.content,e-1).firstChild,i=r.content):i=this.unplaced.content;let n=i.firstChild;for(let i=this.depth;i>=0;i--){let o,{type:s,match:a}=this.frontier[i],l=null;if(1==t&&(n?a.matchType(n.type)||(l=a.fillBefore(_D.from(n),!1)):r&&s.compatibleContent(r.type)))return{sliceDepth:e,frontierDepth:i,parent:r,inject:l};if(2==t&&n&&(o=a.findWrapping(n.type)))return{sliceDepth:e,frontierDepth:i,parent:r,wrap:o};if(r&&a.matchType(r.type))break}}}openMore(){let{content:t,openStart:e,openEnd:i}=this.unplaced,r=rR(t,e);return!(!r.childCount||r.firstChild.isLeaf)&&(this.unplaced=new ID(t,e+1,Math.max(i,r.size+e>=t.size-i?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:i}=this.unplaced,r=rR(t,e);if(r.childCount<=1&&e>0){let n=t.size-e<=e+r.size;this.unplaced=new ID(eR(t,e-1,1),e-1,n?e-1:i)}else this.unplaced=new ID(eR(t,e,1),e,i)}placeNodes({sliceDepth:t,frontierDepth:e,parent:i,inject:r,wrap:n}){for(;this.depth>e;)this.closeFrontierNode();if(n)for(let t=0;t<n.length;t++)this.openFrontierNode(n[t]);let o=this.unplaced,s=i?i.content:o.content,a=o.openStart-t,l=0,c=[],{match:h,type:u}=this.frontier[e];if(r){for(let t=0;t<r.childCount;t++)c.push(r.child(t));h=h.matchFragment(r)}let p=s.size+t-(o.content.size-o.openEnd);for(;l<s.childCount;){let t=s.child(l),e=h.matchType(t.type);if(!e)break;l++,(l>1||0==a||t.content.size)&&(h=e,c.push(nR(t.mark(u.allowedMarks(t.marks)),1==l?a:0,l==s.childCount?p:-1)))}let d=l==s.childCount;d||(p=-1),this.placed=iR(this.placed,e,_D.from(c)),this.frontier[e].match=h,d&&p<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let t=0,e=s;t<p;t++){let t=e.lastChild;this.frontier.push({type:t.type,match:t.contentMatchAt(t.childCount)}),e=t.content}this.unplaced=d?0==t?ID.empty:new ID(eR(o.content,t-1,1),t-1,p<0?o.openEnd:t-1):new ID(eR(o.content,t,l),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t,e=this.frontier[this.depth];if(!e.type.isTextblock||!oR(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:i}=this.$to,r=this.$to.after(i);for(;i>1&&r==this.$to.end(--i);)++r;return r}findCloseLevel(t){t:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:i,type:r}=this.frontier[e],n=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),o=oR(t,e,r,i,n);if(o){for(let i=e-1;i>=0;i--){let{match:e,type:r}=this.frontier[i],n=oR(t,i,r,e,!0);if(!n||n.childCount)continue t}return{depth:e,fit:o,move:n?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=iR(this.placed,e.depth,e.fit)),t=e.move;for(let i=e.depth+1;i<=t.depth;i++){let e=t.node(i),r=e.type.contentMatch.fillBefore(e.content,!0,t.index(i));this.openFrontierNode(e.type,e.attrs,r)}return t}openFrontierNode(t,e=null,i){let r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=iR(this.placed,this.depth,_D.from(t.create(e,i))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(_D.empty,!0);t.childCount&&(this.placed=iR(this.placed,this.frontier.length,t))}}function eR(t,e,i){return 0==e?t.cutByIndex(i,t.childCount):t.replaceChild(0,t.firstChild.copy(eR(t.firstChild.content,e-1,i)))}function iR(t,e,i){return 0==e?t.append(i):t.replaceChild(t.childCount-1,t.lastChild.copy(iR(t.lastChild.content,e-1,i)))}function rR(t,e){for(let i=0;i<e;i++)t=t.firstChild.content;return t}function nR(t,e,i){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,nR(r.firstChild,e-1,1==r.childCount?i-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),i<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(_D.empty,!0)))),t.copy(r)}function oR(t,e,i,r,n){let o=t.node(e),s=n?t.indexAfter(e):t.index(e);if(s==o.childCount&&!i.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!function(t,e,i){for(let r=i;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}(i,o.content,s)?a:null}function sR(t){return t.spec.defining||t.spec.definingForContent}function aR(t,e,i,r,n){if(e<i){let n=t.firstChild;t=t.replaceChild(0,n.copy(aR(n.content,e+1,i,r,n)))}if(e>r){let e=n.contentMatchAt(0),i=e.fillBefore(t).append(t);t=i.append(e.matchFragment(i).fillBefore(_D.empty,!0))}return t}function lR(t,e){let i=[];for(let r=Math.min(t.depth,e.depth);r>=0;r--){let n=t.start(r);if(n<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;(n==e.start(r)||r==t.depth&&r==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&r&&e.start(r-1)==n-1)&&i.push(r)}return i}class cR extends LF{constructor(t,e,i){super(),this.pos=t,this.attr=e,this.value=i}apply(t){let e=t.nodeAt(this.pos);if(!e)return NF.fail("No node at attribute step's position");let i=Object.create(null);for(let t in e.attrs)i[t]=e.attrs[t];i[this.attr]=this.value;let r=e.type.create(i,null,e.marks);return NF.fromReplace(t,this.pos,this.pos+1,new ID(_D.from(r),0,e.isLeaf?0:1))}getMap(){return DF.empty}invert(t){return new cR(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new cR(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new cR(e.pos,e.attr,e.value)}}LF.jsonID("attr",cR);let hR=class extends Error{};hR=function t(e){let i=Error.call(this,e);return i.__proto__=t.prototype,i},(hR.prototype=Object.create(Error.prototype)).constructor=hR,hR.prototype.name="TransformError";class uR{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new FF}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new hR(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,i=ID.empty){let r=ZF(this.doc,t,e,i);return r&&this.step(r),this}replaceWith(t,e,i){return this.replace(t,e,new ID(_D.from(i),0,0))}delete(t,e){return this.replace(t,e,ID.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,i){return function(t,e,i,r){if(!r.size)return t.deleteRange(e,i);let n=t.doc.resolve(e),o=t.doc.resolve(i);if(QF(n,o,r))return t.step(new HF(e,i,r));let s=lR(n,t.doc.resolve(i));0==s[s.length-1]&&s.pop();let a=-(n.depth+1);s.unshift(a);for(let t=n.depth,e=n.pos-1;t>0;t--,e--){let i=n.node(t).type.spec;if(i.defining||i.definingAsContext||i.isolating)break;s.indexOf(t)>-1?a=t:n.before(t)==e&&s.splice(1,0,-t)}let l=s.indexOf(a),c=[],h=r.openStart;for(let t=r.content,e=0;;e++){let i=t.firstChild;if(c.push(i),e==r.openStart)break;t=i.content}for(let t=h-1;t>=0;t--){let e=c[t].type,i=sR(e);if(i&&n.node(l).type!=e)h=t;else if(i||!e.isTextblock)break}for(let e=r.openStart;e>=0;e--){let a=(e+h+1)%(r.openStart+1),u=c[a];if(u)for(let e=0;e<s.length;e++){let c=s[(e+l)%s.length],h=!0;c<0&&(h=!1,c=-c);let p=n.node(c-1),d=n.index(c-1);if(p.canReplaceWith(d,d,u.type,u.marks))return t.replace(n.before(c),h?o.after(c):i,new ID(aR(r.content,0,r.openStart,a),a,r.openEnd))}}let u=t.steps.length;for(let a=s.length-1;a>=0&&(t.replace(e,i,r),!(t.steps.length>u));a--){let t=s[a];t<0||(e=n.before(t),i=o.after(t))}}(this,t,e,i),this}replaceRangeWith(t,e,i){return function(t,e,i,r){if(!r.isInline&&e==i&&t.doc.resolve(e).parent.content.size){let n=function(t,e,i){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),i))return e;if(0==r.parentOffset)for(let t=r.depth-1;t>=0;t--){let e=r.index(t);if(r.node(t).canReplaceWith(e,e,i))return r.before(t+1);if(e>0)return null}if(r.parentOffset==r.parent.content.size)for(let t=r.depth-1;t>=0;t--){let e=r.indexAfter(t);if(r.node(t).canReplaceWith(e,e,i))return r.after(t+1);if(e<r.node(t).childCount)return null}return null}(t.doc,e,r.type);null!=n&&(e=i=n)}t.replaceRange(e,i,new ID(_D.from(r),0,0))}(this,t,e,i),this}deleteRange(t,e){return function(t,e,i){let r=t.doc.resolve(e),n=t.doc.resolve(i),o=lR(r,n);for(let e=0;e<o.length;e++){let i=o[e],s=e==o.length-1;if(s&&0==i||r.node(i).type.contentMatch.validEnd)return t.delete(r.start(i),n.end(i));if(i>0&&(s||r.node(i-1).canReplace(r.index(i-1),n.indexAfter(i-1))))return t.delete(r.before(i),n.after(i))}for(let o=1;o<=r.depth&&o<=n.depth;o++)if(e-r.start(o)==r.depth-o&&i>r.end(o)&&n.end(o)-i!=n.depth-o)return t.delete(r.before(o),i);t.delete(e,i)}(this,t,e),this}lift(t,e){return function(t,e,i){let{$from:r,$to:n,depth:o}=e,s=r.before(o+1),a=n.after(o+1),l=s,c=a,h=_D.empty,u=0;for(let t=o,e=!1;t>i;t--)e||r.index(t)>0?(e=!0,h=_D.from(r.node(t).copy(h)),u++):l--;let p=_D.empty,d=0;for(let t=o,e=!1;t>i;t--)e||n.after(t+1)<n.end(t)?(e=!0,p=_D.from(n.node(t).copy(p)),d++):c++;t.step(new VF(l,c,s,a,new ID(h.append(p),u,d),h.size-u,!0))}(this,t,e),this}join(t,e=1){return function(t,e,i){let r=new HF(e-i,e+i,ID.empty,!0);t.step(r)}(this,t,e),this}wrap(t,e){return function(t,e,i){let r=_D.empty;for(let t=i.length-1;t>=0;t--){if(r.size){let e=i[t].type.contentMatch.matchFragment(r);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=_D.from(i[t].type.create(i[t].attrs,r))}let n=e.start,o=e.end;t.step(new VF(n,o,n,o,new ID(r,0,0),i.length,!0))}(this,t,e),this}setBlockType(t,e=t,i,r=null){return function(t,e,i,r,n){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,i,((e,i)=>{if(e.isTextblock&&!e.hasMarkup(r,n)&&function(t,e,i){let r=t.resolve(e),n=r.index();return r.parent.canReplaceWith(n,n+1,i)}(t.doc,t.mapping.slice(o).map(i),r)){t.clearIncompatible(t.mapping.slice(o).map(i,1),r);let s=t.mapping.slice(o),a=s.map(i,1),l=s.map(i+e.nodeSize,1);return t.step(new VF(a,l,a+1,l-1,new ID(_D.from(r.create(n,null,e.marks)),0,0),1,!0)),!1}}))}(this,t,e,i,r),this}setNodeMarkup(t,e,i=null,r=[]){return function(t,e,i,r,n){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");i||(i=o.type);let s=i.create(r,null,n||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!i.validContent(o.content))throw new RangeError("Invalid content for node type "+i.name);t.step(new VF(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new ID(_D.from(s),0,0),1,!0))}(this,t,e,i,r),this}setNodeAttribute(t,e,i){return this.step(new cR(t,e,i)),this}addNodeMark(t,e){return this.step(new UF(t,e)),this}removeNodeMark(t,e){if(!(e instanceof MD)){let i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at position "+t);if(e=e.isInSet(i.marks),!e)return this}return this.step(new $F(t,e)),this}split(t,e=1,i){return function(t,e,i=1,r){let n=t.doc.resolve(e),o=_D.empty,s=_D.empty;for(let t=n.depth,e=n.depth-i,a=i-1;t>e;t--,a--){o=_D.from(n.node(t).copy(o));let e=r&&r[a];s=_D.from(e?e.type.create(e.attrs,s):n.node(t).copy(s))}t.step(new HF(e,e,new ID(o.append(s),i,i),!0))}(this,t,e,i),this}addMark(t,e,i){return function(t,e,i,r){let n,o,s=[],a=[];t.doc.nodesBetween(e,i,((t,l,c)=>{if(!t.isInline)return;let h=t.marks;if(!r.isInSet(h)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,e),u=Math.min(l+t.nodeSize,i),p=r.addToSet(h);for(let t=0;t<h.length;t++)h[t].isInSet(p)||(n&&n.to==c&&n.mark.eq(h[t])?n.to=u:s.push(n=new zF(c,u,h[t])));o&&o.to==c?o.to=u:a.push(o=new jF(c,u,r))}})),s.forEach((e=>t.step(e))),a.forEach((e=>t.step(e)))}(this,t,e,i),this}removeMark(t,e,i){return function(t,e,i,r){let n=[],o=0;t.doc.nodesBetween(e,i,((t,s)=>{if(!t.isInline)return;o++;let a=null;if(r instanceof dF){let e,i=t.marks;for(;e=r.isInSet(i);)(a||(a=[])).push(e),i=e.removeFromSet(i)}else r?r.isInSet(t.marks)&&(a=[r]):a=t.marks;if(a&&a.length){let r=Math.min(s+t.nodeSize,i);for(let t=0;t<a.length;t++){let i,l=a[t];for(let t=0;t<n.length;t++){let e=n[t];e.step==o-1&&l.eq(n[t].style)&&(i=e)}i?(i.to=r,i.step=o):n.push({style:l,from:Math.max(s,e),to:r,step:o})}}})),n.forEach((e=>t.step(new zF(e.from,e.to,e.style))))}(this,t,e,i),this}clearIncompatible(t,e,i){return function(t,e,i,r=i.contentMatch){let n=t.doc.nodeAt(e),o=[],s=e+1;for(let e=0;e<n.childCount;e++){let a=n.child(e),l=s+a.nodeSize,c=r.matchType(a.type);if(c){r=c;for(let e=0;e<a.marks.length;e++)i.allowsMarkType(a.marks[e].type)||t.step(new zF(s,l,a.marks[e]))}else o.push(new HF(s,l,ID.empty));s=l}if(!r.validEnd){let e=r.fillBefore(_D.empty,!0);t.replace(s,s,new ID(e,0,0))}for(let e=o.length-1;e>=0;e--)t.step(o[e])}(this,t,e,i),this}}const pR=Object.create(null);class dR{constructor(t,e,i){this.$anchor=t,this.$head=e,this.ranges=i||[new fR(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=ID.empty){let i=e.content.lastChild,r=null;for(let t=0;t<e.openEnd;t++)r=i,i=i.lastChild;let n=t.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:a,$to:l}=o[s],c=t.mapping.slice(n);t.replaceRange(c.map(a.pos),c.map(l.pos),s?ID.empty:e),0==s&&CR(t,n,(i?i.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(t,e){let i=t.steps.length,r=this.ranges;for(let n=0;n<r.length;n++){let{$from:o,$to:s}=r[n],a=t.mapping.slice(i),l=a.map(o.pos),c=a.map(s.pos);n?t.deleteRange(l,c):(t.replaceRangeWith(l,c,e),CR(t,i,e.isInline?-1:1))}}static findFrom(t,e,i=!1){let r=t.parent.inlineContent?new yR(t):kR(t.node(0),t.parent,t.pos,t.index(),e,i);if(r)return r;for(let r=t.depth-1;r>=0;r--){let n=e<0?kR(t.node(0),t.node(r),t.before(r+1),t.index(r),e,i):kR(t.node(0),t.node(r),t.after(r+1),t.index(r)+1,e,i);if(n)return n}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new xR(t.node(0))}static atStart(t){return kR(t,t,0,0,1)||new xR(t)}static atEnd(t){return kR(t,t,t.content.size,t.childCount,-1)||new xR(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=pR[e.type];if(!i)throw new RangeError(`No selection type ${e.type} defined`);return i.fromJSON(t,e)}static jsonID(t,e){if(t in pR)throw new RangeError("Duplicate use of selection JSON ID "+t);return pR[t]=e,e.prototype.jsonID=t,e}getBookmark(){return yR.between(this.$anchor,this.$head).getBookmark()}}dR.prototype.visible=!0;class fR{constructor(t,e){this.$from=t,this.$to=e}}let gR=!1;function mR(t){gR||t.parent.inlineContent||(gR=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class yR extends dR{constructor(t,e=t){mR(t),mR(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let i=t.resolve(e.map(this.head));if(!i.parent.inlineContent)return dR.near(i);let r=t.resolve(e.map(this.anchor));return new yR(r.parent.inlineContent?r:i,i)}replace(t,e=ID.empty){if(super.replace(t,e),e==ID.empty){let e=this.$from.marksAcross(this.$to);e&&t.ensureMarks(e)}}eq(t){return t instanceof yR&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new vR(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new yR(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,i=e){let r=t.resolve(e);return new this(r,i==e?r:t.resolve(i))}static between(t,e,i){let r=t.pos-e.pos;if(i&&!r||(i=r>=0?1:-1),!e.parent.inlineContent){let t=dR.findFrom(e,i,!0)||dR.findFrom(e,-i,!0);if(!t)return dR.near(e,i);e=t.$head}return t.parent.inlineContent||(0==r||(t=(dR.findFrom(t,-i,!0)||dR.findFrom(t,i,!0)).$anchor).pos<e.pos!=r<0)&&(t=e),new yR(t,e)}}dR.jsonID("text",yR);class vR{constructor(t,e){this.anchor=t,this.head=e}map(t){return new vR(t.map(this.anchor),t.map(this.head))}resolve(t){return yR.between(t.resolve(this.anchor),t.resolve(this.head))}}class bR extends dR{constructor(t){let e=t.nodeAfter,i=t.node(0).resolve(t.pos+e.nodeSize);super(t,i),this.node=e}map(t,e){let{deleted:i,pos:r}=e.mapResult(this.anchor),n=t.resolve(r);return i?dR.near(n):new bR(n)}content(){return new ID(_D.from(this.node),0,0)}eq(t){return t instanceof bR&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new wR(this.anchor)}static fromJSON(t,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new bR(t.resolve(e.anchor))}static create(t,e){return new bR(t.resolve(e))}static isSelectable(t){return!t.isText&&!1!==t.type.spec.selectable}}bR.prototype.visible=!1,dR.jsonID("node",bR);class wR{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:i}=t.mapResult(this.anchor);return e?new vR(i,i):new wR(i)}resolve(t){let e=t.resolve(this.anchor),i=e.nodeAfter;return i&&bR.isSelectable(i)?new bR(e):dR.near(e)}}class xR extends dR{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=ID.empty){if(e==ID.empty){t.delete(0,t.doc.content.size);let e=dR.atStart(t.doc);e.eq(t.selection)||t.setSelection(e)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new xR(t)}map(t){return new xR(t)}eq(t){return t instanceof xR}getBookmark(){return SR}}dR.jsonID("all",xR);const SR={map(){return this},resolve:t=>new xR(t)};function kR(t,e,i,r,n,o=!1){if(e.inlineContent)return yR.create(t,i);for(let s=r-(n>0?0:1);n>0?s<e.childCount:s>=0;s+=n){let r=e.child(s);if(r.isAtom){if(!o&&bR.isSelectable(r))return bR.create(t,i-(n<0?r.nodeSize:0))}else{let e=kR(t,r,i+n,n<0?r.childCount:0,n,o);if(e)return e}i+=r.nodeSize*n}return null}function CR(t,e,i){let r=t.steps.length-1;if(r<e)return;let n,o=t.steps[r];(o instanceof HF||o instanceof VF)&&(t.mapping.maps[r].forEach(((t,e,i,r)=>{null==n&&(n=r)})),t.setSelection(dR.near(t.doc.resolve(n),i)))}class AR extends uR{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=2,this}ensureMarks(t){return MD.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(t,e){super.addStep(t,e),this.updated=-3&this.updated,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,e=!0){let i=this.selection;return e&&(t=t.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||MD.none))),i.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,e,i){let r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();{if(null==i&&(i=e),i=null==i?e:i,!t)return this.deleteRange(e,i);let n=this.storedMarks;if(!n){let t=this.doc.resolve(e);n=i==e?t.marks():t.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(e,i,r.text(t,n)),this.selection.empty||this.setSelection(dR.near(this.selection.$to)),this}}setMeta(t,e){return this.meta["string"==typeof t?t:t.key]=e,this}getMeta(t){return this.meta["string"==typeof t?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function _R(t,e){return e&&t?t.bind(e):t}class TR{constructor(t,e,i){this.name=t,this.init=_R(e.init,i),this.apply=_R(e.apply,i)}}const OR=[new TR("doc",{init:t=>t.doc||t.schema.topNodeType.createAndFill(),apply:t=>t.doc}),new TR("selection",{init:(t,e)=>t.selection||dR.atStart(e.doc),apply:t=>t.selection}),new TR("storedMarks",{init:t=>t.storedMarks||null,apply:(t,e,i,r)=>r.selection.$cursor?t.storedMarks:null}),new TR("scrollToSelection",{init:()=>0,apply:(t,e)=>t.scrolledIntoView?e+1:e})];class ER{constructor(t,e){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=OR.slice(),e&&e.forEach((t=>{if(this.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");this.plugins.push(t),this.pluginsByKey[t.key]=t,t.spec.state&&this.fields.push(new TR(t.key,t.spec.state,t))}))}}class MR{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,e=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=e){let e=this.config.plugins[i];if(e.spec.filterTransaction&&!e.spec.filterTransaction.call(e,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let e=[t],i=this.applyInner(t),r=null;for(;;){let n=!1;for(let o=0;o<this.config.plugins.length;o++){let s=this.config.plugins[o];if(s.spec.appendTransaction){let a=r?r[o].n:0,l=r?r[o].state:this,c=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,l,i);if(c&&i.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",t),!r){r=[];for(let t=0;t<this.config.plugins.length;t++)r.push(t<o?{state:i,n:e.length}:{state:this,n:0})}e.push(c),i=i.applyInner(c),n=!0}r&&(r[o]={state:i,n:e.length})}}if(!n)return{state:i,transactions:e}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let e=new MR(this.config),i=this.config.fields;for(let r=0;r<i.length;r++){let n=i[r];e[n.name]=n.apply(t,this[n.name],this,e)}return e}get tr(){return new AR(this)}static create(t){let e=new ER(t.doc?t.doc.type.schema:t.schema,t.plugins),i=new MR(e);for(let r=0;r<e.fields.length;r++)i[e.fields[r].name]=e.fields[r].init(t,i);return i}reconfigure(t){let e=new ER(this.schema,t.plugins),i=e.fields,r=new MR(e);for(let e=0;e<i.length;e++){let n=i[e].name;r[n]=this.hasOwnProperty(n)?this[n]:i[e].init(t,r)}return r}toJSON(t){let e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((t=>t.toJSON()))),t&&"object"==typeof t)for(let i in t){if("doc"==i||"selection"==i)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=t[i],n=r.spec.state;n&&n.toJSON&&(e[i]=n.toJSON.call(r,this[r.key]))}return e}static fromJSON(t,e,i){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let r=new ER(t.schema,t.plugins),n=new MR(r);return r.fields.forEach((r=>{if("doc"==r.name)n.doc=YD.fromJSON(t.schema,e.doc);else if("selection"==r.name)n.selection=dR.fromJSON(n.doc,e.selection);else if("storedMarks"==r.name)e.storedMarks&&(n.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(i)for(let o in i){let s=i[o],a=s.spec.state;if(s.key==r.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(e,o))return void(n[r.name]=a.fromJSON.call(s,t,e[o],n))}n[r.name]=r.init(t,n)}})),n}}function PR(t,e,i){for(let r in t){let n=t[r];n instanceof Function?n=n.bind(e):"handleDOMEvents"==r&&(n=PR(n,e,{})),i[r]=n}return i}class IR{constructor(t){this.spec=t,this.props={},t.props&&PR(t.props,this,this.props),this.key=t.key?t.key.key:FR("plugin")}getState(t){return t[this.key]}}const DR=Object.create(null);function FR(t){return t in DR?t+"$"+ ++DR[t]:(DR[t]=0,t+"$")}class RR{constructor(t="key"){this.key=FR(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}var LR="k-parent-node",NR="k-colgroup-data",BR="k-resizable-node",jR="k-editor-resize-handle",zR="data-dir-table-resize",UR="data-dir-image-resize",$R=function(t,e){var i=(t.ownerDocument||document).createElement(e);Array.from(t.rows).filter((function(t){return t.getAttribute(LR)===e})).forEach((function(t){t.removeAttribute(LR),i.appendChild(t)})),i.children.length&&t.appendChild(i)},HR=function(t,e){var i=e.toUpperCase();t.filter((function(t){return t.nodeName===i})).forEach((function(t){Array.from(t.children).forEach((function(i){i.setAttribute(LR,e),t.parentNode&&t.parentNode.insertBefore(i,t)})),t.remove()}))},VR=function(t){var e,i=document.createElement("template");if("content"in i)i.innerHTML=t,e=i.content;else{var r=(new DOMParser).parseFromString(t,"text/html");e=document.createDocumentFragment();for(var n=r.body;n&&n.firstChild;)e.appendChild(n.firstChild)}return e},qR=function(t){var e=_F.fromSchema(t.type.schema).serializeFragment(t.content);return function(t){Array.from(t.querySelectorAll("table")).forEach((function(t){$R(t,"thead"),$R(t,"tbody"),$R(t,"tfoot");var e=Array.from(t.children).find((function(t){return 0===t.children.length}));e&&e.remove()}))}(e),e},WR=function(t,e,i){return mF.fromSchema(e).parse(t,i)},XR=function(t,e,i){var r,n=VR(t);return r=n,Array.from(r.querySelectorAll("table")).forEach((function(t){var e=Array.from(t.children);e.some((function(t){return"THEAD"===t.nodeName||"TFOOT"===t.nodeName}))&&(HR(e,"thead"),HR(e,"tbody"),HR(e,"tfoot"));var i=e.find((function(t){return"COLGROUP"===t.nodeName}));i&&(t.setAttribute(NR,i.outerHTML),i.remove())})),WR(n,e,i)},GR=function(t,e,i){return void 0===e&&(e="setHTML"),void 0===i&&(i={preserveWhitespace:"full"}),function(r,n){return n(r.tr.setSelection(new xR(r.doc)).replaceSelectionWith(XR(t,r.schema,i)).setMeta("commandName",e))}};var KR=function(){return KR=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},KR.apply(this,arguments)};function YR(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(i[r[n]]=t[r[n]])}return i}Object.create;Object.create;var JR=function(t,e){var i=e.style,r=e.value,n=e.newValue;if(!t)return{changed:!1,style:null};var o=t.split(/\s*;\s*/).filter((function(t){return Boolean(t)})),s=o.filter((function(t){var e=t.split(/\s*:\s*/);return!(e[0].toLowerCase()===i&&r.test(e[1]))}));return n&&s.push(i+": "+n),{style:s.join("; ")+(s.length?";":""),changed:Boolean(n)||s.length!==o.length}},ZR=function(t){return t instanceof YD?t.type.name:t.name},QR=function(t,e){return void 0===e&&(e=1),function(i){return function(t,e){return void 0===e&&(e=1),function(i){for(var r=i.$from,n=r.depth;n>0;n--){var o=r.node(n);if(t(o)&&0==(e-=1))return{depth:n,node:o}}}}((function(e){return ZR(e)===ZR(t)}),e)(i)}},tL=function(t,e){return function(i,r){var n=i.tr.replaceSelectionWith(t);e&&n.scrollIntoView(),r(n)}},eL={before:/[^ !,?.\[\]{}()]+$/i,after:/^[^ !,?.\[\]{}()]+/i},iL=function(t,e){return function(i,r,n){var o=function(t,e,i){if(!i.applyToWord||!t.selection.empty)return{state:t,dispatch:e};var r=!0===i.applyToWord?eL:i.applyToWord,n=null,o=t.tr,s=t.selection,a=s.$head.nodeBefore,l=s.$head.nodeAfter;if(a&&"text"===a.type.name&&a.text&&l&&"text"===l.type.name&&l.text){var c=[];s.$head.parent.descendants((function(t,e){return c.push({node:t,pos:e}),!1}));for(var h=s.$head.parentOffset,u=c.findIndex((function(t){var e=t.node,i=t.pos;return i<=h&&i+e.nodeSize>=h})),p=c[u].node.text,d=!1,f=u-1;f>=0;f--){var g=c[f];!d&&g&&"text"===g.node.type.name?p=g.node.text+p:(d=!0,h-=g.node.nodeSize)}for(f=u+1;f<c.length&&((g=c[f])&&"text"===g.node.type.name);f++)p+=g.node.text;var m=p.substring(0,h),y=p.substring(h),v=r.before.exec(m),b=r.after.exec(y);if(v&&b){var w=v[0].length,x=b[0].length,S=n=s.from;return o.setSelection(yR.create(t.doc,S-w,S+x)),{state:{tr:o,selection:o.selection,doc:o.doc,storedMarks:null,schema:o.doc.type.schema},dispatch:function(t){t.setSelection(yR.create(t.doc,n)),e(t)}}}}return{state:t,dispatch:e}}(i,r,e),s=o.state,a=o.dispatch;return t(e)(s,a)}},rL=function(t,e,i){for(var r=function(r){var n=e[r],o=n.$from,s=n.$to,a=0===o.depth&&t.type.allowsMarkType(i);if(t.nodesBetween(o.pos,s.pos,(function(t){if(a)return!1;a=t.inlineContent&&t.type.allowsMarkType(i)})),a)return{v:!0}},n=0;n<e.length;n++){var o=r(n);if(o)return o.v}return!1},nL=function(t,e,i){return function(r,n){var o=r.selection,s=o.empty,a=o.$cursor,l=o.ranges;if(s&&!a||!rL(r.doc,l,t))return!1;if(n)if(a)t.isInSet(r.storedMarks||a.marks())?n(i.removeStoredMark(t)):n(i.addStoredMark(t.create(e)));else{for(var c=!1,h=0;!c&&h<l.length;h++){var u=l[h],p=u.$from,d=u.$to;c=r.doc.rangeHasMark(p.pos,d.pos,t)}for(h=0;h<l.length;h++){var f=l[h];p=f.$from,d=f.$to;c?i.removeMark(p.pos,d.pos,t):i.addMark(p.pos,d.pos,t.create(e))}n(i.scrollIntoView())}return!0}},oL=function(t,e,i,r){void 0===r&&(r=null);var n=[],o=0;return t.doc.nodesBetween(e,i,(function(t,s){if(t.isInline){o++;var a=null;if(r instanceof dF){var l=r.isInSet(t.marks);l&&(a=[l])}else r?r.isInSet(t.marks)&&(a=[r]):a=t.marks;if(a&&a.length)for(var c=Math.min(s+t.nodeSize,i),h=0;h<a.length;h++){for(var u=a[h],p=void 0,d=0;d<n.length;d++){var f=n[d];f.step===o-1&&u.eq(f.style)&&(p=f)}p?(p.to=c,p.step=o):n.push({style:u,from:Math.max(s,e),to:c,step:o})}}})),n.forEach((function(e){return t.step(new zF(e.from,e.to,e.style))})),t},sL=function(t,e){var i=e.except,r=t.doc,n=t.selection,o=r.type.schema,s=n.empty,a=n.ranges,l=(i||[]).map((function(t){return t.name}));if(!s){var c=Object.keys(o.marks).map((function(t){return o.marks[t]})).filter((function(t){return-1===l.indexOf(t.name)}));a.forEach((function(e){var i=e.$from,r=e.$to;c.forEach((function(e){return t.removeMark(i.pos,r.pos,e)}))}))}},aL=function(t,e){var i,r=t.schema.marks,n=(e.altMarks||[]).filter((function(t){return r[t]})),o=e.altStyle,s=t.selection,a=s.from,l=s.$from,c=s.to,h=s.empty,u=r[e.mark],p=t.doc,d=!1;return h?(i=t.storedMarks||l.marks(),d=u&&u.isInSet(i)||n.some((function(t){return r[t].isInSet(i)}))):d=u&&p.rangeHasMark(a,c,u)||n.some((function(t){return p.rangeHasMark(a,c,r[t])})),!d&&o&&r.style?cL(t,r.style).some((function(t){return null!==lL(t,o)})):Boolean(d)},lL=function(t,e){for(var i=(t&&t.attrs.style||"").split(/\s*;\s*/).filter((function(t){return Boolean(t)})),r=0;r<i.length;r++){var n=i[r].split(/\s*:\s*/);if(n[0].toLowerCase()===e.name&&e.value.test(n[1]))return n[1]}return null},cL=function(t,e){var i=t.selection,r=i.from,n=i.$from,o=i.to,s=i.empty,a=[];return s?a.push(e.isInSet(t.storedMarks||n.marks())):t.doc.nodesBetween(r,o,(function(t){t.isInline&&a.push(e.isInSet(t.marks))})),a},hL=function(t,e){var i=cL(t,e),r=i.filter((function(t){return Boolean(t)}));return{hasNodesWithoutMarks:i.length!==r.length,marks:r}},uL=function(t,e){var i=t.find((function(t){return"style"===t.type.name})),r=i&&i.attrs.style;return JR(r,e)},pL=function(t,e,i,r,n){var o=n.create({style:r.style}),s=[],a=[],l=null,c=null;return t.doc.nodesBetween(e,i,(function(t,h,u){if(t.isInline){var p=t.marks;if(!o.isInSet(p)&&u.type.allowsMarkType(o.type)){var d=Math.max(h,e),f=Math.min(h+t.nodeSize,i),g=uL(p,r);if(g.changed||r.newValue){for(var m=g.changed?{style:g.style||null}:{style:[r.style]+": "+r.newValue+";"},y=n.isInSet(p)?p.find((function(t){return"style"===t.type.name})):null,v=y?KR(KR({},y.attrs),m):m,b=n.create(v),w=b.addToSet(p),x=0;x<p.length;x++)p[x].isInSet(w)||(l&&l.to===d&&l.mark.eq(p[x])?l.to=f:(l=new zF(d,f,p[x]),s.push(l)));var S=c&&c.to===d,k=S&&b.attrs.style===c.mark.attrs.style;S&&k?c.to=f:Object.keys(v).some((function(t){return null!==v[t]}))&&(c=new jF(d,f,b),a.push(c))}}}})),s.forEach((function(e){return t.step(e)})),a.forEach((function(e){return t.step(e)})),s.length+a.length>0},dL=function(t,e){var i=t.schema.marks.style;return(i?cL(t,i):[]).map((function(t){return lL(t,e)})).filter((function(t){return null!==t}))},fL=function(t,e){return function(i,r,n){var o=i.selection,s=o.empty,a=o.$cursor,l=o.ranges;if(s&&!a||!rL(i.doc,l,t))return!1;var c,h,u,p,d=!1;if(r){var f=n||i.tr;if(a){var g=i.storedMarks||a.marks();if(t.isInSet(g)){var m=uL(g,e),y=g.find((function(t){return"style"===t.type.name})),v=KR(KR({},y?y.attrs:{}),{style:m.style||null});if(c=y.attrs,h=v,u=Object.keys(c),p=Object.keys(h),u.length===p.length&&u.every((function(t){return c[t]===h[t]})))return!1;r(f.removeStoredMark(t)),Object.keys(v).some((function(t){return null!==v[t]}))&&r(f.addStoredMark(t.create(v))),d=!0}}else{for(var b=0;b<l.length;b++){var w=l[b],x=w.$from,S=w.$to;d=pL(f,x.pos,S.pos,e,t)}d&&(f.scrollIntoView(),r(f))}}return d}},gL=function(t,e,i){return function(r,n){var o=r.schema.marks,s=t.altStyle,a=t.altMarks,l=void 0===a?[]:a,c=t.mark,h=e||r.tr,u=!1,p=!1,d=function(){return p=!0};s&&o.style&&(u=fL(o.style,{style:s.name,value:s.value})(r,d,h));var f=function(t,e,i){if(i||2===arguments.length)for(var r,n=0,o=e.length;n<o;n++)!r&&n in e||(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return t.concat(r||Array.prototype.slice.call(e))}([c],l).filter((function(t){return o[t]})),g=f.map((function(t){return aL(r,{mark:t})&&o[t]})).filter((function(t){return t}));return g.length?function(t,e,i,r){var n=e.selection,o=n.$cursor,s=n.ranges;if(r=r||e.tr,o)t.forEach((function(t){t.isInSet(e.storedMarks||o.marks())&&i(r.removeStoredMark(t))}));else{for(var a=function(e){var i=s[e],n=i.$from,o=i.$to;t.forEach((function(t){oL(r,n.pos,o.pos,t)}))},l=0;l<s.length;l++)a(l);i(r.scrollIntoView())}}(g,r,d,h):u||nL(o[c],i,h)(r,d),p&&n(h),p}},mL=function(t,e){return function(i,r){var n=i.schema.marks.style,o={style:t.style,value:/^.+$/,newValue:t.value},s=i.tr;e&&s.setMeta("commandName",e),s.setMeta("args",t);var a=i.selection,l=a.empty,c=a.$cursor,h=a.ranges;if(l&&!c||!n||!rL(i.doc,h,n))return!1;if(c){var u=i.storedMarks||c.marks(),p=n.isInSet(u)?u.find((function(t){return"style"===t.type.name})):null,d={style:null};if(p&&p.attrs.style){var f=JR(p.attrs.style,o);f.changed&&f.style&&(d.style=f.style)}else o.newValue&&(d.style=[o.style]+": "+o.newValue+";");var g=p?KR(KR({},p.attrs),d):d;return Object.keys(g).some((function(t){return null!==g[t]}))?r(s.addStoredMark(n.create(g))):r(s.removeStoredMark(n)),!0}return fL(n,o)(i,r,s)}},yL=function(t,e){return function(i,r){var n=i.selection.$cursor;if(n){var o=n.parent,s=n.index(),a=i.schema.marks[t.mark],l=o.child(s).marks.find((function(t){return t.type===a})),c=o.childCount,h=n.pos-n.textOffset,u=o.child(s).nodeSize,p=void 0,d=void 0;for(p=s-1;p>=0&&l.isInSet(o.child(p).marks);)u+=d=o.child(p).nodeSize,h-=d,p-=1;for(p=s+1;p<c&&l.isInSet(o.child(p).marks);)u+=o.child(p).nodeSize,p+=1;r(oL(e||i.tr,h,h+u,l))}else gL(t,e)(i,r)}},vL=function(t,e){var i=t.mark,r=t.attrs;return void 0===e&&(e="link"),function(t,n){var o=t.schema.marks,s=t.tr;e&&(s.setMeta("commandName",e),s.setMeta("args",r));var a=!1,l=function(){return a=!0};if(function(t,e){var i=cL(t,e);return 1===i.length&&i[0]?i[0]:null}(t,o[i]))!function(t,e){return function(i,r){var n=i.selection,o=n.$cursor,s=n.from,a=n.to,l=i.schema.marks[t.mark];if(o){var c=o.parent,h=o.index(),u=c.child(h).marks.find((function(t){return t.type===l})),p=c.childCount,d=o.pos-o.textOffset,f=c.child(h).nodeSize,g=void 0,m=void 0;for(g=h-1;g>=0&&u.isInSet(c.child(g).marks);)f+=m=c.child(g).nodeSize,d-=m,g-=1;for(g=h+1;g<p&&u.isInSet(c.child(g).marks);)f+=c.child(g).nodeSize,g+=1;e.removeMark(d,d+f,l),e.addMark(d,d+f,l.create(t.attrs)),r(e)}else e.doc.nodesBetween(s,a,(function(i,n){i.isInline&&l.isInSet(i.marks)&&(e.removeMark(n,n+i.nodeSize,l),e.addMark(n,n+i.nodeSize,l.create(t.attrs)),r(e))}))}}({mark:i,attrs:r},s)(t,l);else{var c=t;aL(t,{mark:i})&&(yL({mark:i,attrs:r},s)(t,l),c=MR.create({doc:s.doc,selection:s.selection})),a?nL(o[i],r,s)(c,l):gL({mark:i},s,r)(c,l)}return a&&n(s),a}},bL=function(t,e,i,r){if(!i.isTextblock)return!1;t.selection.ranges.forEach((function(n){var o=t.steps.length,s=n.$from.pos,a=n.$to.pos;t.doc.nodesBetween(s,a,(function(n,s){if(n.eq(e)&&n.isTextblock&&!n.hasMarkup(i,r)&&function(t,e,i){var r=t.resolve(e),n=r.index();return r.parent.canReplaceWith(n,n+1,i)}(t.doc,t.mapping.slice(o).map(s),i)){t.clearIncompatible(t.mapping.slice(o).map(s,1),i);var a=t.mapping.slice(o),l=a.map(s,1),c=a.map(s+n.nodeSize,1),h=new ID(_D.from(i.create(r,null,n.marks)),0,0);return t.step(new VF(l,c,l+1,c-1,h,1,!0)),!1}}))}))},wL=function(t,e){void 0===e&&(e={blocksInSelection:!1});var i=t.doc,r=t.selection,n=r.$from,o=r.ranges,s=e.blocksInSelection,a=[],l=r instanceof bR?r.node:void 0;return l?l.isBlock?(a.push(l),l.nodesBetween(0,l.content.size,(function(t){t.isBlock&&a.push(t)}))):!s&&n.parent&&n.parent.isBlock&&a.push(n.parent):o.forEach((function(t){var e=t.$from.pos,r=t.$to.pos;i.nodesBetween(e,r,(function(t,i,n,o){t.isBlock&&(!s||i>=e&&i+t.content.size+2<=r)&&a.push(t)}))})),a},xL=function(t,e){var i,r,n=t.attrs.style;n&&e.forEach((function(t){r={style:t.name,value:/^.+$/,newValue:t.value},i=JR(n,r),n=i.changed?i.style:n}));return n=n||e.reduce((function(t,e){return(t&&e.value?t+" ":"")+e.value?e.name+": "+e.value+";":""}),""),Object.assign({},t.attrs,{style:n||null})},SL=function(t,e){var i=t.selection,r=i.from,n=i.to,o=!1;return t.doc.nodesBetween(r,n,(function(t){return!(o=o||t.type===e)})),o},kL=function(t){var e=function(t){var e=wL(t),i=t.schema.nodes,r=[];return e.forEach((function(t){t.type===i.paragraph?r.push("p"):t.type===i.heading?r.push("h"+t.attrs.level):t.type===i.blockquote&&i.blockquote.isTextblock&&r.push("blockquote")})),r}(t);return 1===new Set(e).size?e[0]:null},CL=function(t,e){return function(i,r){var n=wL(i),o=i.tr;o.setMeta("commandName",e),n.forEach((function(e){if(e.type.isTextblock){var i={},r=t.find((function(t){return t.node===e.type.name}));r&&(i=xL(e,r.style)),bL(o,e,e.type,i)}}));var s=o.docChanged;return s&&r(o.scrollIntoView()),s}},AL=function(t,e){var i=wL(t),r=!1;return i.forEach((function(t){if(!r&&t.type.isTextblock&&t.attrs.style){var i=e.find((function(e){return e.node===t.type.name}));i&&(r=i.style.every((function(e){return!!e.value&&new RegExp(e.name+":\\s?"+e.value,"i").test(t.attrs.style)})))}})),r};function _L(t,e=null){return function(i,r){let{$from:n,$to:o}=i.selection,s=n.blockRange(o),a=!1,l=s;if(!s)return!1;if(s.depth>=2&&n.node(s.depth-1).type.compatibleContent(t)&&0==s.startIndex){if(0==n.index(s.depth-1))return!1;let t=i.doc.resolve(s.start-2);l=new GD(t,t,s.depth),s.endIndex<s.parent.childCount&&(s=new GD(n,i.doc.resolve(o.end(s.depth)),s.depth)),a=!0}let c=function(t,e,i=null,r=t){let n=function(t,e){let{parent:i,startIndex:r,endIndex:n}=t,o=i.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return i.canReplaceWith(r,n,s)?o:null}(t,e),o=n&&function(t,e){let{parent:i,startIndex:r,endIndex:n}=t,o=i.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let t=r;a&&t<n;t++)a=a.matchType(i.child(t).type);return a&&a.validEnd?s:null}(r,e);return o?n.map(GF).concat({type:e,attrs:i}).concat(o.map(GF)):null}(l,t,e,s);return!!c&&(r&&r(function(t,e,i,r,n){let o=_D.empty;for(let t=i.length-1;t>=0;t--)o=_D.from(i[t].type.create(i[t].attrs,o));t.step(new VF(e.start-(r?2:0),e.end,e.start,e.end,new ID(o,0,0),i.length,!0));let s=0;for(let t=0;t<i.length;t++)i[t].type==n&&(s=t+1);let a=i.length-s,l=e.start+i.length-(r?2:0),c=e.parent;for(let i=e.startIndex,r=e.endIndex,n=!0;i<r;i++,n=!1)!n&&KF(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(i).nodeSize;return t}(i.tr,s,c,a,t).scrollIntoView()),!0)}}function TL(t){return function(e,i){let{$from:r,$to:n}=e.selection,o=r.blockRange(n,(e=>e.childCount>0&&e.firstChild.type==t));return!!o&&(!i||(r.node(o.depth-1).type==t?function(t,e,i,r){let n=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(n.step(new VF(o-1,s,o,s,new ID(_D.from(i.create(null,r.parent.copy())),1,0),1,!0)),r=new GD(n.doc.resolve(r.$from.pos),n.doc.resolve(s),r.depth));const a=XF(r);if(null==a)return!1;n.lift(r,a);let l=n.mapping.map(o,-1)-1;YF(n.doc,l)&&n.join(l);return e(n.scrollIntoView()),!0}(e,i,t,o):function(t,e,i){let r=t.tr,n=i.parent;for(let t=i.end,e=i.endIndex-1,o=i.startIndex;e>o;e--)t-=n.child(e).nodeSize,r.delete(t-1,t+1);let o=r.doc.resolve(i.start),s=o.nodeAfter;if(r.mapping.map(i.end)!=i.start+o.nodeAfter.nodeSize)return!1;let a=0==i.startIndex,l=i.endIndex==n.childCount,c=o.node(-1),h=o.index(-1);if(!c.canReplace(h+(a?0:1),h+1,s.content.append(l?_D.empty:_D.from(n))))return!1;let u=o.pos,p=u+s.nodeSize;return r.step(new VF(u-(a?1:0),p+(l?1:0),u+1,p-1,new ID((a?_D.empty:_D.from(n.copy(_D.empty))).append(l?_D.empty:_D.from(n.copy(_D.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}(e,i,o)))}}function OL(t){return function(e,i){let{$from:r,$to:n}=e.selection,o=r.blockRange(n,(e=>e.childCount>0&&e.firstChild.type==t));if(!o)return!1;let s=o.startIndex;if(0==s)return!1;let a=o.parent,l=a.child(s-1);if(l.type!=t)return!1;if(i){let r=l.lastChild&&l.lastChild.type==a.type,n=_D.from(r?t.create():null),s=new ID(_D.from(t.create(null,_D.from(a.type.create(null,n)))),r?3:1,0),c=o.start,h=o.end;i(e.tr.step(new VF(c-(r?3:1),h,c,h,s,1,!0)).scrollIntoView())}return!0}}var EL={orderedList:"ordered_list",bulletList:"bullet_list",listItem:"list_item"},ML={listType:EL.orderedList,types:KR({},EL)},PL={listType:EL.bulletList,types:KR({},EL)},IL={nodes:[{node:"paragraph",style:"margin-left",rtlStyle:"margin-right",step:30,unit:"px"},{node:"heading",style:"margin-left",rtlStyle:"margin-right",step:30,unit:"px"}],listsTypes:KR({},EL)},DL={nodes:[{node:"paragraph",style:"margin-left",rtlStyle:"margin-right",step:-30,unit:"px"},{node:"heading",style:"margin-left",rtlStyle:"margin-right",step:-30,unit:"px"}],listsTypes:KR({},EL)},FL=function(t,e,i){return function(r,n){var o=wL(r),s=r.tr;s.setMeta("commandName",e),o.forEach((function(e){if(e.type.isTextblock){var r=void 0,n=t.find((function(t){return t.node===e.type.name}));if(n){var o="rtl"===i?n.rtlStyle:n.style,a={name:o,value:n.step>0?""+n.step+n.unit:""};if(e.attrs.style){var l=new RegExp(o+":\\s?(\\d+)"+n.unit,"i"),c=e.attrs.style.match(l);if(c){var h=parseFloat(c[1])+n.step;h=h<=0?"":h,a.value=""+h+(h?n.unit:"")}}r=xL(e,[a])}r&&bL(s,e,e.type,r)}}));var a=s.docChanged;return a&&n(s.scrollIntoView()),a}},RL=function(t,e,i){var r=wL(t),n=!1;return r.forEach((function(t){if(!n&&t.type.isTextblock&&t.attrs.style){var r=e.find((function(e){return e.node===t.type.name}));if(r){var o="rtl"===i?r.rtlStyle:r.style,s=new RegExp(o+":\\s?\\d+"+r.unit,"i");n=s.test(t.attrs.style)}}})),n},LL=function(t,e){return OL(e)(t)},NL=function(t,e){var i=t.schema.nodes[e.listsTypes.listItem],r=t.schema.nodes[e.listsTypes.orderedList],n=t.schema.nodes[e.listsTypes.bulletList],o=!!QR(r,2)(t.selection),s=!!QR(n,2)(t.selection);return(o||s)&&TL(i)(t)},BL=function(t,e){var i=t.schema.nodes,r=i[IL.listsTypes.listItem];return(RL(t,e.nodes)||IL.nodes.some((function(e){return i[e.node]&&SL(t,i[e.node])})))&&!SL(t,r)},jL=function(t,e){var i=t.schema.nodes[IL.listsTypes.listItem],r=BL(t,IL);LL(t,i)?OL(i)(t,e):r&&FL(IL.nodes)(t,e)},zL=function(t,e){var i=t.schema.nodes,r=i[DL.listsTypes.listItem],n=BL(t,DL);SL(t,i.blockquote)?function(t,e){var i=t.selection,r=i.$from,n=i.$to,o=t.schema.nodes.blockquote,s=t.doc,a=-1,l=r.blockRange(n);l&&s.nodesBetween(l.start,l.end,(function(t,e,i,r){t.type===o&&(a=e)}));var c=-1!==a;e&&c&&e(t.tr.lift(l,s.resolve(a).depth))}(t,e):NL(t,DL)?TL(r)(t,e):n&&FL(DL.nodes)(t,e)};const UL=(t,e)=>!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0),$L=(t,e,i)=>{let{$cursor:r}=t.selection;if(!r||(i?!i.endOfTextblock("backward",t):r.parentOffset>0))return!1;let n=qL(r);if(!n){let i=r.blockRange(),n=i&&XF(i);return null!=n&&(e&&e(t.tr.lift(i,n).scrollIntoView()),!0)}let o=n.nodeBefore;if(!o.type.spec.isolating&&tN(t,n,e))return!0;if(0==r.parent.content.size&&(HL(o,"end")||bR.isSelectable(o))){let i=ZF(t.doc,r.before(),r.after(),ID.empty);if(i&&i.slice.size<i.to-i.from){if(e){let r=t.tr.step(i);r.setSelection(HL(o,"end")?dR.findFrom(r.doc.resolve(r.mapping.map(n.pos,-1)),-1):bR.create(r.doc,n.pos-o.nodeSize)),e(r.scrollIntoView())}return!0}}return!(!o.isAtom||n.depth!=r.depth-1)&&(e&&e(t.tr.delete(n.pos-o.nodeSize,n.pos).scrollIntoView()),!0)};function HL(t,e,i=!1){for(let r=t;r;r="start"==e?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(i&&1!=r.childCount)return!1}return!1}const VL=(t,e,i)=>{let{$head:r,empty:n}=t.selection,o=r;if(!n)return!1;if(r.parent.isTextblock){if(i?!i.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=qL(r)}let s=o&&o.nodeBefore;return!(!s||!bR.isSelectable(s))&&(e&&e(t.tr.setSelection(bR.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function qL(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function WL(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let i=t.node(e);if(t.index(e)+1<i.childCount)return t.doc.resolve(t.after(e+1));if(i.type.spec.isolating)break}return null}const XL=(t,e)=>{let{$head:i,$anchor:r}=t.selection;return!(!i.parent.type.spec.code||!i.sameParent(r))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)};function GL(t){for(let e=0;e<t.edgeCount;e++){let{type:i}=t.edge(e);if(i.isTextblock&&!i.hasRequiredAttrs())return i}return null}const KL=(t,e)=>{let{$head:i,$anchor:r}=t.selection;if(!i.parent.type.spec.code||!i.sameParent(r))return!1;let n=i.node(-1),o=i.indexAfter(-1),s=GL(n.contentMatchAt(o));if(!s||!n.canReplaceWith(o,o,s))return!1;if(e){let r=i.after(),n=t.tr.replaceWith(r,r,s.createAndFill());n.setSelection(dR.near(n.doc.resolve(r),1)),e(n.scrollIntoView())}return!0},YL=(t,e)=>{let i=t.selection,{$from:r,$to:n}=i;if(i instanceof xR||r.parent.inlineContent||n.parent.inlineContent)return!1;let o=GL(n.parent.contentMatchAt(n.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let i=(!r.parentOffset&&n.index()<n.parent.childCount?r:n).pos,s=t.tr.insert(i,o.createAndFill());s.setSelection(yR.create(s.doc,i+1)),e(s.scrollIntoView())}return!0},JL=(t,e)=>{let{$cursor:i}=t.selection;if(!i||i.parent.content.size)return!1;if(i.depth>1&&i.after()!=i.end(-1)){let r=i.before();if(KF(t.doc,r))return e&&e(t.tr.split(r).scrollIntoView()),!0}let r=i.blockRange(),n=r&&XF(r);return null!=n&&(e&&e(t.tr.lift(r,n).scrollIntoView()),!0)},ZL=(t,e)=>{let{$from:i,$to:r}=t.selection;if(t.selection instanceof bR&&t.selection.node.isBlock)return!(!i.parentOffset||!KF(t.doc,i.pos))&&(e&&e(t.tr.split(i.pos).scrollIntoView()),!0);if(!i.parent.isBlock)return!1;if(e){let n=r.parentOffset==r.parent.content.size,o=t.tr;(t.selection instanceof yR||t.selection instanceof xR)&&o.deleteSelection();let s=0==i.depth?null:GL(i.node(-1).contentMatchAt(i.indexAfter(-1))),a=n&&s?[{type:s}]:void 0,l=KF(o.doc,o.mapping.map(i.pos),1,a);if(a||l||!KF(o.doc,o.mapping.map(i.pos),1,s?[{type:s}]:void 0)||(s&&(a=[{type:s}]),l=!0),l&&(o.split(o.mapping.map(i.pos),1,a),!n&&!i.parentOffset&&i.parent.type!=s)){let t=o.mapping.map(i.before()),e=o.doc.resolve(t);s&&i.node(-1).canReplaceWith(e.index(),e.index()+1,s)&&o.setNodeMarkup(o.mapping.map(i.before()),s)}e(o.scrollIntoView())}return!0},QL=(t,e)=>ZL(t,e&&(i=>{let r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();r&&i.ensureMarks(r),e(i)}));function tN(t,e,i){let r,n,o=e.nodeBefore,s=e.nodeAfter;if(o.type.spec.isolating||s.type.spec.isolating)return!1;if(function(t,e,i){let r=e.nodeBefore,n=e.nodeAfter,o=e.index();return!(!(r&&n&&r.type.compatibleContent(n.type))||(!r.content.size&&e.parent.canReplace(o-1,o)?(i&&i(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),0):!e.parent.canReplace(o,o+1)||!n.isTextblock&&!YF(t.doc,e.pos)||(i&&i(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),0)))}(t,e,i))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(r=(n=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&n.matchType(r[0]||s.type).validEnd){if(i){let n=e.pos+s.nodeSize,a=_D.empty;for(let t=r.length-1;t>=0;t--)a=_D.from(r[t].create(null,a));a=_D.from(o.copy(a));let l=t.tr.step(new VF(e.pos-1,n,e.pos,n,new ID(a,1,0),r.length,!0)),c=n+2*r.length;YF(l.doc,c)&&l.join(c),i(l.scrollIntoView())}return!0}let l=dR.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),h=c&&XF(c);if(null!=h&&h>=e.depth)return i&&i(t.tr.lift(c,h).scrollIntoView()),!0;if(a&&HL(s,"start",!0)&&HL(o,"end")){let r=o,n=[];for(;n.push(r),!r.isTextblock;)r=r.lastChild;let a=s,l=1;for(;!a.isTextblock;a=a.firstChild)l++;if(r.canReplace(r.childCount,r.childCount,a.content)){if(i){let r=_D.empty;for(let t=n.length-1;t>=0;t--)r=_D.from(n[t].copy(r));i(t.tr.step(new VF(e.pos-n.length,e.pos+s.nodeSize,e.pos+l,e.pos+s.nodeSize-l,new ID(r,n.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function eN(t){return function(e,i){let r=e.selection,n=t<0?r.$from:r.$to,o=n.depth;for(;n.node(o).isInline;){if(!o)return!1;o--}return!!n.node(o).isTextblock&&(i&&i(e.tr.setSelection(yR.create(e.doc,t<0?n.start(o):n.end(o)))),!0)}}const iN=eN(-1),rN=eN(1);function nN(t,e){let i=Array.isArray(e)?t=>e.indexOf(t.type.name)>-1:e;return(e,r,n)=>t(e,r&&function(t,e){return i=>{if(!i.isGeneric)return t(i);let r=[];for(let t=0;t<i.mapping.maps.length;t++){let e=i.mapping.maps[t];for(let t=0;t<r.length;t++)r[t]=e.map(r[t]);e.forEach(((t,e,i,n)=>r.push(i,n)))}let n=[];for(let t=0;t<r.length;t+=2){let o=r[t],s=r[t+1],a=i.doc.resolve(o),l=a.sharedDepth(s),c=a.node(l);for(let t=a.indexAfter(l),i=a.after(l+1);i<=s;++t){let r=c.maybeChild(t);if(!r)break;if(t&&-1==n.indexOf(i)){let o=c.child(t-1);o.type==r.type&&e(o,r)&&n.push(i)}i+=r.nodeSize}}n.sort(((t,e)=>t-e));for(let t=n.length-1;t>=0;t--)YF(i.doc,n[t])&&i.join(n[t]);t(i)}}(r,i),n)}function oN(...t){return function(e,i,r){for(let n=0;n<t.length;n++)if(t[n](e,i,r))return!0;return!1}}let sN=oN(UL,$L,VL),aN=oN(UL,((t,e,i)=>{let{$cursor:r}=t.selection;if(!r||(i?!i.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size))return!1;let n=WL(r);if(!n)return!1;let o=n.nodeAfter;if(tN(t,n,e))return!0;if(0==r.parent.content.size&&(HL(o,"start")||bR.isSelectable(o))){let i=ZF(t.doc,r.before(),r.after(),ID.empty);if(i&&i.slice.size<i.to-i.from){if(e){let r=t.tr.step(i);r.setSelection(HL(o,"start")?dR.findFrom(r.doc.resolve(r.mapping.map(n.pos)),1):bR.create(r.doc,r.mapping.map(n.pos))),e(r.scrollIntoView())}return!0}}return!(!o.isAtom||n.depth!=r.depth-1)&&(e&&e(t.tr.delete(n.pos,n.pos+o.nodeSize).scrollIntoView()),!0)}),((t,e,i)=>{let{$head:r,empty:n}=t.selection,o=r;if(!n)return!1;if(r.parent.isTextblock){if(i?!i.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=WL(r)}let s=o&&o.nodeAfter;return!(!s||!bR.isSelectable(s))&&(e&&e(t.tr.setSelection(bR.create(t.doc,o.pos)).scrollIntoView()),!0)}));const lN={Enter:oN(XL,YL,JL,ZL),"Mod-Enter":KL,Backspace:sN,"Mod-Backspace":sN,"Shift-Backspace":sN,Delete:aN,"Mod-Delete":aN,"Mod-a":(t,e)=>(e&&e(t.tr.setSelection(new xR(t.doc))),!0)},cN={"Ctrl-h":lN.Backspace,"Alt-Backspace":lN["Mod-Backspace"],"Ctrl-d":lN.Delete,"Ctrl-Alt-Backspace":lN["Mod-Delete"],"Alt-Delete":lN["Mod-Delete"],"Alt-d":lN["Mod-Delete"],"Ctrl-a":iN,"Ctrl-e":rN};for(let t in lN)cN[t]=lN[t];const hN=("undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&"darwin"==os.platform())?cN:lN;var uN=function(t,e,i){for(var r=e.depth,n=t.nodes[i.bulletList],o=t.nodes[i.orderedList],s=t.nodes[i.listItem],a=e.depth;a>0;a--){var l=e.node(a);if(l.type!==n&&l.type!==o||(r=a),l.type!==n&&l.type!==o&&l.type!==s)break}return r-1};function pN(t){return function(e,i,r){if(!r)return!1;var n=(e=r.state).schema.nodes[t.listType],o=e.selection,s=o.$from,a=o.$to,l=s.node(-2),c=s.node(-3),h=function(t,e,i,r){return 0===function(t,e,i){var r=Array(),n=function(t,e){var i=["blockquote","bulletList","orderedList"];if(1===e.depth)return e;var r=e.node(e.depth),n=e;for(;e.depth>=1;)(r=(e=t.resolve(e.before(e.depth))).node(e.depth))&&-1!==i.indexOf(r.type.name)&&(n=e);return n}(t,e).depth,o=t.resolve(e.start(n));for(;o.pos<=i.start(i.depth);){var s=Math.min(o.depth,n),a=o.node(s);if(a&&r.push(a),0===s)break;var l=t.resolve(o.after(s));if(l.start(s)>=t.nodeSize-2)break;l.depth!==o.depth&&(l=t.resolve(l.pos+2)),o=l.depth?t.resolve(l.start(l.depth)):t.resolve(l.end(l.depth))}return r}(t,e,i).filter((function(t){return t.type!==r})).length}(e.doc,s,a,n);return(l&&l.type===n||c&&c.type===n)&&h?fN(t)(e,i):(h||(fN(t)(e,i),e=r.state),function(t,e){void 0===e&&(e={});return nN(_L(t,e),(function(e,i){return e.type===i.type&&e.type===t}))}(n,t.listAttrs)(e,i))}}function dN(t,e,i,r){var n=r||t.schema.nodes.listItem,o=e.$from,s=e.$to,a=o.blockRange(s,(function(t){return t.childCount&&t.firstChild.type===n}));if(!a||a.depth<2||o.node(a.depth-1).type!==n)return i;var l=a.end,c=s.end(a.depth);return l<c&&(i.step(new VF(l-1,c,l,c,new ID(_D.from(n.create(void 0,a.parent.copy())),1,0),1,!0)),a=new GD(i.doc.resolve(o.pos),i.doc.resolve(c),a.depth)),i.lift(a,XF(a)).scrollIntoView()}function fN(t){return function(e,i){var r=e.tr,n=e.selection,o=n.$from,s=n.$to;return r.doc.nodesBetween(o.pos,s.pos,(function(i,n){if(i.isTextblock||"blockquote"===i.type.name||"div"===i.type.name){var o=new bR(r.doc.resolve(r.mapping.map(n))),s=o.$from.blockRange(o.$to);if(!s||o.$from.parent.type!==e.schema.nodes[t.listItem])return!1;var a=s&&XF(s);if(null==a)return!1;r.lift(s,a)}})),i&&i(r),!0}}var gN=/list\-style\-type:\s?([\w-]+)/,mN=function(t){var e=t.style||"",i=gN.exec(e);return i&&i[1]||""},yN=function(t,e,i,r,n){var o=r.listType,s=r.listAttrs,a=void 0===s?{style:null}:s,l=t.selection,c=l.$from.node(l.$from.depth-2),h=l.$to.node(l.$to.depth-2);if(c&&c.type.name===o&&mN(c.attrs)===mN(a)&&h&&h.type.name===o&&mN(h.attrs)===mN(a)){var u=i.state.schema.nodes,p={bulletList:u[r.bulletList],orderedList:u[r.orderedList],listItem:u[r.listItem]},d=function(t,e){for(var i,r=e.bulletList,n=e.orderedList,o=e.listItem,s=t.depth-1;s>0;s--){var a=t.node(s);if(a.type!==r&&a.type!==n||(i=s),a.type!==r&&a.type!==n&&a.type!==o)break}return i}(l.$to,p),f=function(t,e,i,r,n,o){o||(o=t.schema.nodes.listItem);var s=!1;return n.doc.nodesBetween(e,i,(function(i,a){if(!s&&i.type===o&&a>e){s=!0;for(var l=r+3;l>r+2;){var c=n.doc.resolve(n.mapping.map(a));l=c.depth;var h=n.doc.resolve(n.mapping.map(a+i.textContent.length)),u=new yR(c,h);n=dN(t,u,n,o)}}})),n}(t,l.$to.pos,l.$to.end(d),d,i.state.tr,p.listItem);return f=function(t,e,i){var r=t.selection,n=r.from,o=r.to,s=t.schema.nodes,a=s.paragraph,l=s.heading,c=[];e.doc.nodesBetween(n,o,(function(t,e){t.type!==a&&t.type!==l||c.push({node:t,pos:e})}));for(var h=c.length-1;h>=0;h--){var u=c[h],p=e.doc.resolve(e.mapping.map(u.pos));if(p.depth>0){var d=void 0;d=u.node.textContent&&u.node.textContent.length>0?e.doc.resolve(e.mapping.map(u.pos+u.node.textContent.length)):e.doc.resolve(e.mapping.map(u.pos+1));var f=p.blockRange(d);f&&e.lift(f,uN(t.schema,p,i))}}return e}(t,f,r),f.setMeta("commandName",n),e(f),!0}return pN(r)(t,e,i)};function vN(t,e,i){return yN(t,e,i,KR({listType:PL.listType},PL.types))}function bN(t,e,i){return yN(t,e,i,KR({listType:ML.listType},ML.types))}for(var wN=function(t){return function(e,i){return function(t){return function(e,i){let{$from:r,$to:n,node:o}=e.selection;if(o&&o.isBlock||r.depth<2||!r.sameParent(n))return!1;let s=r.node(-1);if(s.type!=t)return!1;if(0==r.parent.content.size&&r.node(-1).childCount==r.indexAfter(-1)){if(3==r.depth||r.node(-3).type!=t||r.index(-2)!=r.node(-2).childCount-1)return!1;if(i){let n=_D.empty,o=r.index(-1)?1:r.index(-2)?2:3;for(let t=r.depth-o;t>=r.depth-3;t--)n=_D.from(r.node(t).copy(n));let s=r.indexAfter(-1)<r.node(-2).childCount?1:r.indexAfter(-2)<r.node(-3).childCount?2:3;n=n.append(_D.from(t.createAndFill()));let a=r.before(r.depth-(o-1)),l=e.tr.replace(a,r.after(-s),new ID(n,4-o,0)),c=-1;l.doc.nodesBetween(a,l.doc.content.size,((t,e)=>{if(c>-1)return!1;t.isTextblock&&0==t.content.size&&(c=e+1)})),c>-1&&l.setSelection(dR.near(l.doc.resolve(c))),i(l.scrollIntoView())}return!0}let a=n.pos==r.end()?s.contentMatchAt(0).defaultType:null,l=e.tr.delete(r.pos,n.pos),c=a?[null,{type:a}]:void 0;return!!KF(l.doc,r.pos,2,c)&&(i&&i(l.split(r.pos,2,c).scrollIntoView()),!0)}}(t)(e,(function(t){var r=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();r&&t.ensureMarks(r),i(t)}))}},xN=function(t,e){return{name:t,value:e}},SN=[{node:"paragraph",style:[xN("text-align","left")]},{node:"heading",style:[xN("text-align","left")]}],kN=[{node:"paragraph",style:[xN("text-align","right")]},{node:"heading",style:[xN("text-align","right")]}],CN=[{node:"paragraph",style:[xN("text-align","center")]},{node:"heading",style:[xN("text-align","center")]}],AN=[{node:"paragraph",style:[xN("text-align","justify")]},{node:"heading",style:[xN("text-align","justify")]}],_N=[{node:"paragraph",style:[xN("text-align","")]},{node:"heading",style:[xN("text-align","")]}],TN={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ON={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},EN="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),MN=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),PN="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),IN=MN||EN&&+EN[1]<57,DN=0;DN<10;DN++)TN[48+DN]=TN[96+DN]=String(DN);for(DN=1;DN<=24;DN++)TN[DN+111]="F"+DN;for(DN=65;DN<=90;DN++)TN[DN]=String.fromCharCode(DN+32),ON[DN]=String.fromCharCode(DN);for(var FN in TN)ON.hasOwnProperty(FN)||(ON[FN]=TN[FN]);const RN="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function LN(t){let e,i,r,n,o=t.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(let t=0;t<o.length-1;t++){let s=o[t];if(/^(cmd|meta|m)$/i.test(s))n=!0;else if(/^a(lt)?$/i.test(s))e=!0;else if(/^(c|ctrl|control)$/i.test(s))i=!0;else if(/^s(hift)?$/i.test(s))r=!0;else{if(!/^mod$/i.test(s))throw new Error("Unrecognized modifier name: "+s);RN?n=!0:i=!0}}return e&&(s="Alt-"+s),i&&(s="Ctrl-"+s),n&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function NN(t,e,i){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==i&&e.shiftKey&&(t="Shift-"+t),t}function BN(t){return new IR({props:{handleKeyDown:jN(t)}})}function jN(t){let e=function(t){let e=Object.create(null);for(let i in t)e[LN(i)]=t[i];return e}(t);return function(t,i){let r,n=function(t){var e=!(IN&&(t.ctrlKey||t.altKey||t.metaKey)||PN&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key)&&t.key||(t.shiftKey?ON:TN)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(i),o=1==n.length&&" "!=n,s=e[NN(n,i,!o)];if(s&&s(t.state,t.dispatch,t))return!0;if(o&&(i.shiftKey||i.altKey||i.metaKey||n.charCodeAt(0)>127)&&(r=TN[i.keyCode])&&r!=n){let n=e[NN(r,i,!0)];if(n&&n(t.state,t.dispatch,t))return!0}else if(o&&i.shiftKey){let r=e[NN(n,i,!0)];if(r&&r(t.state,t.dispatch,t))return!0}return!1}}const zN="undefined"!=typeof navigator?navigator:null,UN="undefined"!=typeof document?document:null,$N=zN&&zN.userAgent||"",HN=/Edge\/(\d+)/.exec($N),VN=/MSIE \d/.exec($N),qN=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec($N),WN=!!(VN||qN||HN),XN=VN?document.documentMode:qN?+qN[1]:HN?+HN[1]:0,GN=!WN&&/gecko\/(\d+)/i.test($N);GN&&(/Firefox\/(\d+)/.exec($N)||[0,0])[1];const KN=!WN&&/Chrome\/(\d+)/.exec($N),YN=!!KN,JN=KN?+KN[1]:0,ZN=!WN&&!!zN&&/Apple Computer/.test(zN.vendor),QN=ZN&&(/Mobile\/\w+/.test($N)||!!zN&&zN.maxTouchPoints>2),tB=QN||!!zN&&/Mac/.test(zN.platform),eB=/Android \d/.test($N),iB=!!UN&&"webkitFontSmoothing"in UN.documentElement.style,rB=iB?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,nB=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},oB=function(t){let e=t.assignedSlot||t.parentNode;return e&&11==e.nodeType?e.host:e};let sB=null;const aB=function(t,e,i){let r=sB||(sB=document.createRange());return r.setEnd(t,null==i?t.nodeValue.length:i),r.setStart(t,e||0),r},lB=function(t,e,i,r){return i&&(hB(t,e,i,r,-1)||hB(t,e,i,r,1))},cB=/^(img|br|input|textarea|hr)$/i;function hB(t,e,i,r,n){for(;;){if(t==i&&e==r)return!0;if(e==(n<0?0:uB(t))){let i=t.parentNode;if(!i||1!=i.nodeType||pB(t)||cB.test(t.nodeName)||"false"==t.contentEditable)return!1;e=nB(t)+(n<0?0:1),t=i}else{if(1!=t.nodeType)return!1;if("false"==(t=t.childNodes[e+(n<0?-1:0)]).contentEditable)return!1;e=n<0?uB(t):0}}}function uB(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function pB(t){let e;for(let i=t;i&&!(e=i.pmViewDesc);i=i.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const dB=function(t){let e=t.isCollapsed;return e&&YN&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function fB(t,e){let i=document.createEvent("Event");return i.initEvent("keydown",!0,!0),i.keyCode=t,i.key=i.code=e,i}function gB(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function mB(t,e){return"number"==typeof t?t:t[e]}function yB(t){let e=t.getBoundingClientRect(),i=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*i,top:e.top,bottom:e.top+t.clientHeight*r}}function vB(t,e,i){let r=t.someProp("scrollThreshold")||0,n=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=i||t.dom;s;s=oB(s)){if(1!=s.nodeType)continue;let t=s,i=t==o.body,a=i?gB(o):yB(t),l=0,c=0;if(e.top<a.top+mB(r,"top")?c=-(a.top-e.top+mB(n,"top")):e.bottom>a.bottom-mB(r,"bottom")&&(c=e.bottom-a.bottom+mB(n,"bottom")),e.left<a.left+mB(r,"left")?l=-(a.left-e.left+mB(n,"left")):e.right>a.right-mB(r,"right")&&(l=e.right-a.right+mB(n,"right")),l||c)if(i)o.defaultView.scrollBy(l,c);else{let i=t.scrollLeft,r=t.scrollTop;c&&(t.scrollTop+=c),l&&(t.scrollLeft+=l);let n=t.scrollLeft-i,o=t.scrollTop-r;e={left:e.left-n,top:e.top-o,right:e.right-n,bottom:e.bottom-o}}if(i)break}}function bB(t){let e=[],i=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=i);r=oB(r));return e}function wB(t,e){for(let i=0;i<t.length;i++){let{dom:r,top:n,left:o}=t[i];r.scrollTop!=n+e&&(r.scrollTop=n+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let xB=null;function SB(t,e){let i,r,n=2e8,o=0,s=e.top,a=e.top;for(let l=t.firstChild,c=0;l;l=l.nextSibling,c++){let t;if(1==l.nodeType)t=l.getClientRects();else{if(3!=l.nodeType)continue;t=aB(l).getClientRects()}for(let h=0;h<t.length;h++){let u=t[h];if(u.top<=s&&u.bottom>=a){s=Math.max(u.bottom,s),a=Math.min(u.top,a);let t=u.left>e.left?u.left-e.left:u.right<e.left?e.left-u.right:0;if(t<n){i=l,n=t,r=t&&3==i.nodeType?{left:u.right<e.left?u.right:u.left,top:e.top}:e,1==l.nodeType&&t&&(o=c+(e.left>=(u.left+u.right)/2?1:0));continue}}!i&&(e.left>=u.right&&e.top>=u.top||e.left>=u.left&&e.top>=u.bottom)&&(o=c+1)}}return i&&3==i.nodeType?function(t,e){let i=t.nodeValue.length,r=document.createRange();for(let n=0;n<i;n++){r.setEnd(t,n+1),r.setStart(t,n);let i=_B(r,1);if(i.top!=i.bottom&&kB(e,i))return{node:t,offset:n+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}(i,r):!i||n&&1==i.nodeType?{node:t,offset:o}:SB(i,r)}function kB(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function CB(t,e,i){let r=t.childNodes.length;if(r&&i.top<i.bottom)for(let n=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-i.top)/(i.bottom-i.top))-2)),o=n;;){let i=t.childNodes[o];if(1==i.nodeType){let t=i.getClientRects();for(let r=0;r<t.length;r++){let n=t[r];if(kB(e,n))return CB(i,e,n)}}if((o=(o+1)%r)==n)break}return t}function AB(t,e){let i,r=t.dom.ownerDocument,n=0;if(r.caretPositionFromPoint)try{let t=r.caretPositionFromPoint(e.left,e.top);t&&({offsetNode:i,offset:n}=t)}catch(t){}if(!i&&r.caretRangeFromPoint){let t=r.caretRangeFromPoint(e.left,e.top);t&&({startContainer:i,startOffset:n}=t)}let o,s=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top);if(!s||!t.dom.contains(1!=s.nodeType?s.parentNode:s)){let i=t.dom.getBoundingClientRect();if(!kB(e,i))return null;if(s=CB(t.dom,e,i),!s)return null}if(ZN)for(let t=s;i&&t;t=oB(t))t.draggable&&(i=void 0);if(s=function(t,e){let i=t.parentNode;return i&&/^li$/i.test(i.nodeName)&&e.left<t.getBoundingClientRect().left?i:t}(s,e),i){if(GN&&1==i.nodeType&&(n=Math.min(n,i.childNodes.length),n<i.childNodes.length)){let t,r=i.childNodes[n];"IMG"==r.nodeName&&(t=r.getBoundingClientRect()).right<=e.left&&t.bottom>e.top&&n++}i==t.dom&&n==i.childNodes.length-1&&1==i.lastChild.nodeType&&e.top>i.lastChild.getBoundingClientRect().bottom?o=t.state.doc.content.size:0!=n&&1==i.nodeType&&"BR"==i.childNodes[n-1].nodeName||(o=function(t,e,i,r){let n=-1;for(let i=e;i!=t.dom;){let e=t.docView.nearestDesc(i,!0);if(!e)return null;if(e.node.isBlock&&e.parent){let t=e.dom.getBoundingClientRect();if(t.left>r.left||t.top>r.top)n=e.posBefore;else{if(!(t.right<r.left||t.bottom<r.top))break;n=e.posAfter}}i=e.dom.parentNode}return n>-1?n:t.docView.posFromDOM(e,i,1)}(t,i,n,e))}null==o&&(o=function(t,e,i){let{node:r,offset:n}=SB(e,i),o=-1;if(1==r.nodeType&&!r.firstChild){let t=r.getBoundingClientRect();o=t.left!=t.right&&i.left>(t.left+t.right)/2?1:-1}return t.docView.posFromDOM(r,n,o)}(t,s,e));let a=t.docView.nearestDesc(s,!0);return{pos:o,inside:a?a.posAtStart-a.border:-1}}function _B(t,e){let i=t.getClientRects();return i.length?i[e<0?0:i.length-1]:t.getBoundingClientRect()}const TB=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function OB(t,e,i){let{node:r,offset:n,atom:o}=t.docView.domFromPos(e,i<0?-1:1),s=iB||GN;if(3==r.nodeType){if(!s||!TB.test(r.nodeValue)&&(i<0?n:n!=r.nodeValue.length)){let t=n,e=n,o=i<0?1:-1;return i<0&&!n?(e++,o=-1):i>=0&&n==r.nodeValue.length?(t--,o=1):i<0?t--:e++,EB(_B(aB(r,t,e),1),o<0)}{let t=_B(aB(r,n,n),i);if(GN&&n&&/\s/.test(r.nodeValue[n-1])&&n<r.nodeValue.length){let e=_B(aB(r,n-1,n-1),-1);if(e.top==t.top){let i=_B(aB(r,n,n+1),-1);if(i.top!=t.top)return EB(i,i.left<e.left)}}return t}}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(null==o&&n&&(i<0||n==uB(r))){let t=r.childNodes[n-1];if(1==t.nodeType)return MB(t.getBoundingClientRect(),!1)}if(null==o&&n<uB(r)){let t=r.childNodes[n];if(1==t.nodeType)return MB(t.getBoundingClientRect(),!0)}return MB(r.getBoundingClientRect(),i>=0)}if(null==o&&n&&(i<0||n==uB(r))){let t=r.childNodes[n-1],e=3==t.nodeType?aB(t,uB(t)-(s?0:1)):1!=t.nodeType||"BR"==t.nodeName&&t.nextSibling?null:t;if(e)return EB(_B(e,1),!1)}if(null==o&&n<uB(r)){let t=r.childNodes[n];for(;t.pmViewDesc&&t.pmViewDesc.ignoreForCoords;)t=t.nextSibling;let e=t?3==t.nodeType?aB(t,0,s?0:1):1==t.nodeType?t:null:null;if(e)return EB(_B(e,-1),!0)}return EB(_B(3==r.nodeType?aB(r):r,-i),i>=0)}function EB(t,e){if(0==t.width)return t;let i=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:i,right:i}}function MB(t,e){if(0==t.height)return t;let i=e?t.top:t.bottom;return{top:i,bottom:i,left:t.left,right:t.right}}function PB(t,e,i){let r=t.state,n=t.root.activeElement;r!=e&&t.updateState(e),n!=t.dom&&t.focus();try{return i()}finally{r!=e&&t.updateState(r),n!=t.dom&&n&&n.focus()}}const IB=/[\u0590-\u08ac]/;let DB=null,FB=null,RB=!1;function LB(t,e,i){return DB==e&&FB==i?RB:(DB=e,FB=i,RB="up"==i||"down"==i?function(t,e,i){let r=e.selection,n="up"==i?r.$from:r.$to;return PB(t,e,(()=>{let{node:e}=t.docView.domFromPos(n.pos,"up"==i?-1:1);for(;;){let i=t.docView.nearestDesc(e,!0);if(!i)break;if(i.node.isBlock){e=i.dom;break}e=i.dom.parentNode}let r=OB(t,n.pos,1);for(let t=e.firstChild;t;t=t.nextSibling){let e;if(1==t.nodeType)e=t.getClientRects();else{if(3!=t.nodeType)continue;e=aB(t,0,t.nodeValue.length).getClientRects()}for(let t=0;t<e.length;t++){let n=e[t];if(n.bottom>n.top+1&&("up"==i?r.top-n.top>2*(n.bottom-r.top):n.bottom-r.bottom>2*(r.bottom-n.top)))return!1}}return!0}))}(t,e,i):function(t,e,i){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let n=r.parentOffset,o=!n,s=n==r.parent.content.size,a=t.domSelection();return IB.test(r.parent.textContent)&&a.modify?PB(t,e,(()=>{let e=a.getRangeAt(0),n=a.focusNode,o=a.focusOffset,s=a.caretBidiLevel;a.modify("move",i,"character");let l=!(r.depth?t.docView.domAfterPos(r.before()):t.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||n==a.focusNode&&o==a.focusOffset;return a.removeAllRanges(),a.addRange(e),null!=s&&(a.caretBidiLevel=s),l})):"left"==i||"backward"==i?o:s}(t,e,i))}class NB{constructor(t,e,i,r){this.parent=t,this.children=e,this.dom=i,this.contentDOM=r,this.dirty=0,i.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,e,i){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let e=0;e<this.children.length;e++)t+=this.children[e].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let e=0,i=this.posAtStart;;e++){let r=this.children[e];if(r==t)return i;i+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,e,i){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(i<0){let i,r;if(t==this.contentDOM)i=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.previousSibling}for(;i&&(!(r=i.pmViewDesc)||r.parent!=this);)i=i.previousSibling;return i?this.posBeforeChild(r)+r.size:this.posAtStart}{let i,r;if(t==this.contentDOM)i=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.nextSibling}for(;i&&(!(r=i.pmViewDesc)||r.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(r):this.posAtEnd}}let r;if(t==this.dom&&this.contentDOM)r=e>nB(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(let e=t;;e=e.parentNode){if(e==this.dom){r=!1;break}if(e.previousSibling)break}if(null==r&&e==t.childNodes.length)for(let e=t;;e=e.parentNode){if(e==this.dom){r=!0;break}if(e.nextSibling)break}}return(null==r?i>0:r)?this.posAtEnd:this.posAtStart}nearestDesc(t,e=!1){for(let i=!0,r=t;r;r=r.parentNode){let n,o=this.getDesc(r);if(o&&(!e||o.node)){if(!i||!(n=o.nodeDOM)||(1==n.nodeType?n.contains(1==t.nodeType?t:t.parentNode):n==t))return o;i=!1}}}getDesc(t){let e=t.pmViewDesc;for(let t=e;t;t=t.parent)if(t==this)return e}posFromDOM(t,e,i){for(let r=t;r;r=r.parentNode){let n=this.getDesc(r);if(n)return n.localPosFromDOM(t,e,i)}return-1}descAt(t){for(let e=0,i=0;e<this.children.length;e++){let r=this.children[e],n=i+r.size;if(i==t&&n!=i){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(t<n)return r.descAt(t-i-r.border);i=n}}domFromPos(t,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let i,r=0,n=0;for(let e=0;r<this.children.length;r++){let i=this.children[r],o=e+i.size;if(o>t||i instanceof VB){n=t-e;break}e=o}if(n)return this.children[r].domFromPos(n-this.children[r].border,e);for(;r&&!(i=this.children[r-1]).size&&i instanceof BB&&i.side>=0;r--);if(e<=0){let t,i=!0;for(;t=r?this.children[r-1]:null,t&&t.dom.parentNode!=this.contentDOM;r--,i=!1);return t&&e&&i&&!t.border&&!t.domAtom?t.domFromPos(t.size,e):{node:this.contentDOM,offset:t?nB(t.dom)+1:0}}{let t,i=!0;for(;t=r<this.children.length?this.children[r]:null,t&&t.dom.parentNode!=this.contentDOM;r++,i=!1);return t&&i&&!t.border&&!t.domAtom?t.domFromPos(0,e):{node:this.contentDOM,offset:t?nB(t.dom):this.contentDOM.childNodes.length}}}parseRange(t,e,i=0){if(0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,n=-1;for(let o=i,s=0;;s++){let i=this.children[s],a=o+i.size;if(-1==r&&t<=a){let n=o+i.border;if(t>=n&&e<=a-i.border&&i.node&&i.contentDOM&&this.contentDOM.contains(i.contentDOM))return i.parseRange(t,e,n);t=o;for(let e=s;e>0;e--){let i=this.children[e-1];if(i.size&&i.dom.parentNode==this.contentDOM&&!i.emptyChildAt(1)){r=nB(i.dom)+1;break}t-=i.size}-1==r&&(r=0)}if(r>-1&&(a>e||s==this.children.length-1)){e=a;for(let t=s+1;t<this.children.length;t++){let i=this.children[t];if(i.size&&i.dom.parentNode==this.contentDOM&&!i.emptyChildAt(-1)){n=nB(i.dom);break}e+=i.size}-1==n&&(n=this.contentDOM.childNodes.length);break}o=a}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:n}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)}domAfterPos(t){let{node:e,offset:i}=this.domFromPos(t,0);if(1!=e.nodeType||i==e.childNodes.length)throw new RangeError("No node after pos "+t);return e.childNodes[i]}setSelection(t,e,i,r=!1){let n=Math.min(t,e),o=Math.max(t,e);for(let s=0,a=0;s<this.children.length;s++){let l=this.children[s],c=a+l.size;if(n>a&&o<c)return l.setSelection(t-a-l.border,e-a-l.border,i,r);a=c}let s=this.domFromPos(t,t?-1:1),a=e==t?s:this.domFromPos(e,e?-1:1),l=i.getSelection(),c=!1;if((GN||ZN)&&t==e){let{node:t,offset:e}=s;if(3==t.nodeType){if(c=!(!e||"\n"!=t.nodeValue[e-1]),c&&e==t.nodeValue.length)for(let e,i=t;i;i=i.parentNode){if(e=i.nextSibling){"BR"==e.nodeName&&(s=a={node:e.parentNode,offset:nB(e)+1});break}let t=i.pmViewDesc;if(t&&t.node&&t.node.isBlock)break}}else{let i=t.childNodes[e-1];c=i&&("BR"==i.nodeName||"false"==i.contentEditable)}}if(GN&&l.focusNode&&l.focusNode!=a.node&&1==l.focusNode.nodeType){let t=l.focusNode.childNodes[l.focusOffset];t&&"false"==t.contentEditable&&(r=!0)}if(!(r||c&&ZN)&&lB(s.node,s.offset,l.anchorNode,l.anchorOffset)&&lB(a.node,a.offset,l.focusNode,l.focusOffset))return;let h=!1;if((l.extend||t==e)&&!c){l.collapse(s.node,s.offset);try{if(t!=e)try{l.extend(a.node,a.offset)}catch(t){}h=!0}catch(t){if(!(t instanceof DOMException))throw t}}if(!h){if(t>e){let t=s;s=a,a=t}let i=document.createRange();i.setEnd(a.node,a.offset),i.setStart(s.node,s.offset),l.removeAllRanges(),l.addRange(i)}}ignoreMutation(t){return!this.contentDOM&&"selection"!=t.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,e){for(let i=0,r=0;r<this.children.length;r++){let n=this.children[r],o=i+n.size;if(i==o?t<=o&&e>=i:t<o&&e>i){let r=i+n.border,s=o-n.border;if(t>=r&&e<=s)return this.dirty=t==i||e==o?2:1,void(t!=r||e!=s||!n.contentLost&&n.dom.parentNode==this.contentDOM?n.markDirty(t-r,e-r):n.dirty=3);n.dirty=n.dom!=n.contentDOM||n.dom.parentNode!=this.contentDOM||n.children.length?3:2}i=o}this.dirty=2}markParentsDirty(){let t=1;for(let e=this.parent;e;e=e.parent,t++){let i=1==t?2:1;e.dirty<i&&(e.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class BB extends NB{constructor(t,e,i,r){let n,o=e.type.toDOM;if("function"==typeof o&&(o=o(i,(()=>n?n.parent?n.parent.posBeforeChild(n):void 0:r))),!e.type.spec.raw){if(1!=o.nodeType){let t=document.createElement("span");t.appendChild(o),o=t}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=e,this.widget=e,n=this}matchesWidget(t){return 0==this.dirty&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let e=this.widget.spec.stopEvent;return!!e&&e(t)}ignoreMutation(t){return"selection"!=t.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class jB extends NB{constructor(t,e,i,r){super(t,[],e,null),this.textDOM=i,this.text=r}get size(){return this.text.length}localPosFromDOM(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue}}class zB extends NB{constructor(t,e,i,r){super(t,[],i,r),this.mark=e}static create(t,e,i,r){let n=r.nodeViews[e.type.name],o=n&&n(e,r,i);return o&&o.dom||(o=_F.renderSpec(document,e.type.spec.toDOM(e,i))),new zB(t,e,o.dom,o.contentDOM||o.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(t){return 3!=this.dirty&&this.mark.eq(t)}markDirty(t,e){if(super.markDirty(t,e),0!=this.dirty){let t=this.parent;for(;!t.node;)t=t.parent;t.dirty<this.dirty&&(t.dirty=this.dirty),this.dirty=0}}slice(t,e,i){let r=zB.create(this.parent,this.mark,!0,i),n=this.children,o=this.size;e<o&&(n=rj(n,e,o,i)),t>0&&(n=rj(n,0,t,i));for(let t=0;t<n.length;t++)n[t].parent=r;return r.children=n,r}}class UB extends NB{constructor(t,e,i,r,n,o,s,a,l){super(t,[],n,o),this.node=e,this.outerDeco=i,this.innerDeco=r,this.nodeDOM=s,o&&this.updateChildren(a,l)}static create(t,e,i,r,n,o){let s,a=n.nodeViews[e.type.name],l=a&&a(e,n,(()=>s?s.parent?s.parent.posBeforeChild(s):void 0:o),i,r),c=l&&l.dom,h=l&&l.contentDOM;if(e.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(e.text);else c||({dom:c,contentDOM:h}=_F.renderSpec(document,e.type.spec.toDOM(e)));h||e.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),e.type.spec.draggable&&(c.draggable=!0));let u=c;return c=ZB(c,i,e),l?s=new qB(t,e,i,r,c,h||null,u,l,n,o+1):e.isText?new HB(t,e,i,r,c,u,n):new UB(t,e,i,r,c,h||null,u,n,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(t.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let e=this.children.length-1;e>=0;e--){let i=this.children[e];if(this.dom.contains(i.dom.parentNode)){t.contentElement=i.dom.parentNode;break}}t.contentElement||(t.getContent=()=>_D.empty)}else t.contentElement=this.contentDOM;else t.getContent=()=>this.node.content;return t}matchesNode(t,e,i){return 0==this.dirty&&t.eq(this.node)&&QB(e,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,e){let i=this.node.inlineContent,r=e,n=t.composing?this.localCompositionInfo(t,e):null,o=n&&n.pos>-1?n:null,s=n&&n.pos<0,a=new ej(this,o&&o.node,t);!function(t,e,i,r){let n=e.locals(t),o=0;if(0==n.length){for(let i=0;i<t.childCount;i++){let s=t.child(i);r(s,n,e.forChild(o,s),i),o+=s.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){if(s<n.length&&n[s].to==o){let t,e=n[s++];for(;s<n.length&&n[s].to==o;)(t||(t=[e])).push(n[s++]);if(t){t.sort(ij);for(let e=0;e<t.length;e++)i(t[e],c,!!l)}else i(e,c,!!l)}let h,u;if(l)u=-1,h=l,l=null;else{if(!(c<t.childCount))break;u=c,h=t.child(c++)}for(let t=0;t<a.length;t++)a[t].to<=o&&a.splice(t--,1);for(;s<n.length&&n[s].from<=o&&n[s].to>o;)a.push(n[s++]);let p=o+h.nodeSize;if(h.isText){let t=p;s<n.length&&n[s].from<t&&(t=n[s].from);for(let e=0;e<a.length;e++)a[e].to<t&&(t=a[e].to);t<p&&(l=h.cut(t-o),h=h.cut(0,t-o),p=t,u=-1)}r(h,h.isInline&&!h.isLeaf?a.filter((t=>!t.inline)):a.slice(),e.forChild(o,h),u),o=p}}(this.node,this.innerDeco,((e,n,o)=>{e.spec.marks?a.syncToMarks(e.spec.marks,i,t):e.type.side>=0&&!o&&a.syncToMarks(n==this.node.childCount?MD.none:this.node.child(n).marks,i,t),a.placeWidget(e,t,r)}),((e,o,l,c)=>{let h;a.syncToMarks(e.marks,i,t),a.findNodeMatch(e,o,l,c)||s&&t.state.selection.from>r&&t.state.selection.to<r+e.nodeSize&&(h=a.findIndexWithChild(n.node))>-1&&a.updateNodeAt(e,o,l,h,t)||a.updateNextNode(e,o,l,t,c)||a.addNode(e,o,l,t,r),r+=e.nodeSize})),a.syncToMarks([],i,t),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(o&&this.protectLocalComposition(t,o),WB(this.contentDOM,this.children,t),QN&&function(t){if("UL"==t.nodeName||"OL"==t.nodeName){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}(this.dom))}localCompositionInfo(t,e){let{from:i,to:r}=t.state.selection;if(!(t.state.selection instanceof yR)||i<e||r>e+this.node.content.size)return null;let n=t.domSelection(),o=function(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];e=uB(t=t.childNodes[e-1])}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}(n.focusNode,n.focusOffset);if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let t=o.nodeValue,n=function(t,e,i,r){for(let n=0,o=0;n<t.childCount&&o<=r;){let s=t.child(n++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;n<t.childCount;){let e=t.child(n++);if(o+=e.nodeSize,!e.isText)break;l+=e.text}if(o>=i){let t=a<r?l.lastIndexOf(e,r-a-1):-1;if(t>=0&&t+e.length+a>=i)return a+t;if(i==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}(this.node.content,t,i-e,r-e);return n<0?null:{node:o,pos:n,text:t}}return{node:o,pos:-1,text:""}}protectLocalComposition(t,{node:e,pos:i,text:r}){if(this.getDesc(e))return;let n=e;for(;n.parentNode!=this.contentDOM;n=n.parentNode){for(;n.previousSibling;)n.parentNode.removeChild(n.previousSibling);for(;n.nextSibling;)n.parentNode.removeChild(n.nextSibling);n.pmViewDesc&&(n.pmViewDesc=void 0)}let o=new jB(this,n,e,r);t.input.compositionNodes.push(o),this.children=rj(this.children,i,i+r.length,t,o)}update(t,e,i,r){return!(3==this.dirty||!t.sameMarkup(this.node))&&(this.updateInner(t,e,i,r),!0)}updateInner(t,e,i,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=i,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}updateOuterDeco(t){if(QB(t,this.outerDeco))return;let e=1!=this.nodeDOM.nodeType,i=this.dom;this.dom=YB(this.dom,this.nodeDOM,KB(this.outerDeco,this.node,e),KB(t,this.node,e)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function $B(t,e,i,r,n){return ZB(r,e,t),new UB(void 0,t,e,i,r,r,r,n,0)}class HB extends UB{constructor(t,e,i,r,n,o,s){super(t,e,i,r,n,null,o,s,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,e,i,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),0==this.dirty&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=t,this.dirty=0,!0)}inParent(){let t=this.parent.contentDOM;for(let e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,e,i){return t==this.nodeDOM?this.posAtStart+Math.min(e,this.node.text.length):super.localPosFromDOM(t,e,i)}ignoreMutation(t){return"characterData"!=t.type&&"selection"!=t.type}slice(t,e,i){let r=this.node.cut(t,e),n=document.createTextNode(r.text);return new HB(this.parent,r,this.outerDeco,this.innerDeco,n,n,i)}markDirty(t,e){super.markDirty(t,e),this.dom==this.nodeDOM||0!=t&&e!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}}class VB extends NB{parseRule(){return{ignore:!0}}matchesHack(t){return 0==this.dirty&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class qB extends UB{constructor(t,e,i,r,n,o,s,a,l,c){super(t,e,i,r,n,o,s,l,c),this.spec=a}update(t,e,i,r){if(3==this.dirty)return!1;if(this.spec.update){let n=this.spec.update(t,e,i);return n&&this.updateInner(t,e,i,r),n}return!(!this.contentDOM&&!t.isLeaf)&&super.update(t,e,i,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,e,i,r){this.spec.setSelection?this.spec.setSelection(t,e,i):super.setSelection(t,e,i,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function WB(t,e,i){let r=t.firstChild,n=!1;for(let o=0;o<e.length;o++){let s=e[o],a=s.dom;if(a.parentNode==t){for(;a!=r;)r=tj(r),n=!0;r=r.nextSibling}else n=!0,t.insertBefore(a,r);if(s instanceof zB){let e=r?r.previousSibling:t.lastChild;WB(s.contentDOM,s.children,i),r=e?e.nextSibling:t.firstChild}}for(;r;)r=tj(r),n=!0;n&&i.trackWrites==t&&(i.trackWrites=null)}const XB=function(t){t&&(this.nodeName=t)};XB.prototype=Object.create(null);const GB=[new XB];function KB(t,e,i){if(0==t.length)return GB;let r=i?GB[0]:new XB,n=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&n.push(r=new XB(s.nodeName));for(let t in s){let o=s[t];null!=o&&(i&&1==n.length&&n.push(r=new XB(e.isInline?"span":"div")),"class"==t?r.class=(r.class?r.class+" ":"")+o:"style"==t?r.style=(r.style?r.style+";":"")+o:"nodeName"!=t&&(r[t]=o))}}}return n}function YB(t,e,i,r){if(i==GB&&r==GB)return e;let n=e;for(let e=0;e<r.length;e++){let o=r[e],s=i[e];if(e){let e;s&&s.nodeName==o.nodeName&&n!=t&&(e=n.parentNode)&&e.nodeName.toLowerCase()==o.nodeName||(e=document.createElement(o.nodeName),e.pmIsDeco=!0,e.appendChild(n),s=GB[0]),n=e}JB(n,s||GB[0],o)}return n}function JB(t,e,i){for(let r in e)"class"==r||"style"==r||"nodeName"==r||r in i||t.removeAttribute(r);for(let r in i)"class"!=r&&"style"!=r&&"nodeName"!=r&&i[r]!=e[r]&&t.setAttribute(r,i[r]);if(e.class!=i.class){let r=e.class?e.class.split(" ").filter(Boolean):[],n=i.class?i.class.split(" ").filter(Boolean):[];for(let e=0;e<r.length;e++)-1==n.indexOf(r[e])&&t.classList.remove(r[e]);for(let e=0;e<n.length;e++)-1==r.indexOf(n[e])&&t.classList.add(n[e]);0==t.classList.length&&t.removeAttribute("class")}if(e.style!=i.style){if(e.style){let i,r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}i.style&&(t.style.cssText+=i.style)}}function ZB(t,e,i){return YB(t,t,GB,KB(e,i,1!=t.nodeType))}function QB(t,e){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!t[i].type.eq(e[i].type))return!1;return!0}function tj(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class ej{constructor(t,e,i){this.lock=e,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=function(t,e){let i=e,r=i.children.length,n=t.childCount,o=new Map,s=[];t:for(;n>0;){let a;for(;;)if(r){let t=i.children[r-1];if(!(t instanceof zB)){a=t,r--;break}i=t,r=t.children.length}else{if(i==e)break t;r=i.parent.children.indexOf(i),i=i.parent}let l=a.node;if(l){if(l!=t.child(n-1))break;--n,o.set(a,n),s.push(a)}}return{index:n,matched:o,matches:s.reverse()}}(t.node.content,t)}destroyBetween(t,e){if(t!=e){for(let i=t;i<e;i++)this.top.children[i].destroy();this.top.children.splice(t,e-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,e,i){let r=0,n=this.stack.length>>1,o=Math.min(n,t.length);for(;r<o&&(r==n-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&!1!==t[r].type.spec.spanning;)r++;for(;r<n;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),n--;for(;n<t.length;){this.stack.push(this.top,this.index+1);let r=-1;for(let e=this.index;e<Math.min(this.index+3,this.top.children.length);e++)if(this.top.children[e].matchesMark(t[n])){r=e;break}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=zB.create(this.top,t[n],e,i);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,n++}}findNodeMatch(t,e,i,r){let n,o=-1;if(r>=this.preMatch.index&&(n=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&n.matchesNode(t,e,i))o=this.top.children.indexOf(n,this.index);else for(let r=this.index,n=Math.min(this.top.children.length,r+5);r<n;r++){let n=this.top.children[r];if(n.matchesNode(t,e,i)&&!this.preMatch.matched.has(n)){o=r;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(t,e,i,r,n){let o=this.top.children[r];return 3==o.dirty&&o.dom==o.contentDOM&&(o.dirty=2),!!o.update(t,e,i,n)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(t){for(;;){let e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){let e=t.pmViewDesc;if(e)for(let t=this.index;t<this.top.children.length;t++)if(this.top.children[t]==e)return t;return-1}t=e}}updateNextNode(t,e,i,r,n){for(let o=this.index;o<this.top.children.length;o++){let s=this.top.children[o];if(s instanceof UB){let a=this.preMatch.matched.get(s);if(null!=a&&a!=n)return!1;let l=s.dom;if(!(this.lock&&(l==this.lock||1==l.nodeType&&l.contains(this.lock.parentNode))&&!(t.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==t.text&&3!=s.dirty&&QB(e,s.outerDeco)))&&s.update(t,e,i,r))return this.destroyBetween(this.index,o),s.dom!=l&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(t,e,i,r,n){this.top.children.splice(this.index++,0,UB.create(this.top,t,e,i,r,n)),this.changed=!0}placeWidget(t,e,i){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(t)||t!=r.widget&&r.widget.type.toDOM.parentNode){let r=new BB(this.top,t,e,i);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++}addTextblockHacks(){let t=this.top.children[this.index-1],e=this.top;for(;t instanceof zB;)e=t,t=e.children[e.children.length-1];(!t||!(t instanceof HB)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((ZN||YN)&&t&&"false"==t.dom.contentEditable&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}addHackNode(t,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(t))this.index++;else{let i=document.createElement(t);"IMG"==t&&(i.className="ProseMirror-separator",i.alt=""),"BR"==t&&(i.className="ProseMirror-trailingBreak");let r=new VB(this.top,[],i,null);e!=this.top?e.children.push(r):e.children.splice(this.index++,0,r),this.changed=!0}}}function ij(t,e){return t.type.side-e.type.side}function rj(t,e,i,r,n){let o=[];for(let s=0,a=0;s<t.length;s++){let l=t[s],c=a,h=a+=l.size;c>=i||h<=e?o.push(l):(c<e&&o.push(l.slice(0,e-c,r)),n&&(o.push(n),n=void 0),h>i&&o.push(l.slice(i-c,l.size,r)))}return o}function nj(t,e=null){let i=t.domSelection(),r=t.state.doc;if(!i.focusNode)return null;let n=t.docView.nearestDesc(i.focusNode),o=n&&0==n.size,s=t.docView.posFromDOM(i.focusNode,i.focusOffset,1);if(s<0)return null;let a,l,c=r.resolve(s);if(dB(i)){for(a=c;n&&!n.node;)n=n.parent;let t=n.node;if(n&&t.isAtom&&bR.isSelectable(t)&&n.parent&&(!t.isInline||!function(t,e,i){for(let r=0==e,n=e==uB(t);r||n;){if(t==i)return!0;let e=nB(t);if(!(t=t.parentNode))return!1;r=r&&0==e,n=n&&e==uB(t)}}(i.focusNode,i.focusOffset,n.dom))){let t=n.posBefore;l=new bR(s==t?c:r.resolve(t))}}else{let e=t.docView.posFromDOM(i.anchorNode,i.anchorOffset,1);if(e<0)return null;a=r.resolve(e)}if(!l){l=dj(t,a,c,"pointer"==e||t.state.selection.head<c.pos&&!o?1:-1)}return l}function oj(t){return t.editable?t.hasFocus():gj(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function sj(t,e=!1){let i=t.state.selection;if(uj(t,i),oj(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&YN){let e=t.domSelection(),i=t.domObserver.currentSelection;if(e.anchorNode&&i.anchorNode&&lB(e.anchorNode,e.anchorOffset,i.anchorNode,i.anchorOffset))return t.input.mouseDown.delayedSelectionSync=!0,void t.domObserver.setCurSelection()}if(t.domObserver.disconnectSelection(),t.cursorWrapper)!function(t){let e=t.domSelection(),i=document.createRange(),r=t.cursorWrapper.dom,n="IMG"==r.nodeName;n?i.setEnd(r.parentNode,nB(r)+1):i.setEnd(r,0);i.collapse(!1),e.removeAllRanges(),e.addRange(i),!n&&!t.state.selection.visible&&WN&&XN<=11&&(r.disabled=!0,r.disabled=!1)}(t);else{let r,n,{anchor:o,head:s}=i;!aj||i instanceof yR||(i.$from.parent.inlineContent||(r=lj(t,i.from)),i.empty||i.$from.parent.inlineContent||(n=lj(t,i.to))),t.docView.setSelection(o,s,t.root,e),aj&&(r&&hj(r),n&&hj(n)),i.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let i=t.domSelection(),r=i.anchorNode,n=i.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{i.anchorNode==r&&i.anchorOffset==n||(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout((()=>{oj(t)&&!t.state.selection.visible||t.dom.classList.remove("ProseMirror-hideselection")}),20))})}(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const aj=ZN||YN&&JN<63;function lj(t,e){let{node:i,offset:r}=t.docView.domFromPos(e,0),n=r<i.childNodes.length?i.childNodes[r]:null,o=r?i.childNodes[r-1]:null;if(ZN&&n&&"false"==n.contentEditable)return cj(n);if(!(n&&"false"!=n.contentEditable||o&&"false"!=o.contentEditable)){if(n)return cj(n);if(o)return cj(o)}}function cj(t){return t.contentEditable="true",ZN&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function hj(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function uj(t,e){if(e instanceof bR){let i=t.docView.descAt(e.from);i!=t.lastSelectedViewDesc&&(pj(t),i&&i.selectNode(),t.lastSelectedViewDesc=i)}else pj(t)}function pj(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function dj(t,e,i,r){return t.someProp("createSelectionBetween",(r=>r(t,e,i)))||yR.between(e,i,r)}function fj(t){return!(t.editable&&!t.hasFocus())&&gj(t)}function gj(t){let e=t.domSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(t){return!1}}function mj(t,e){let{$anchor:i,$head:r}=t.selection,n=e>0?i.max(r):i.min(r),o=n.parent.inlineContent?n.depth?t.doc.resolve(e>0?n.after():n.before()):null:n;return o&&dR.findFrom(o,e)}function yj(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function vj(t,e,i){let r=t.state.selection;if(!(r instanceof yR)){if(r instanceof bR&&r.node.isInline)return yj(t,new yR(e>0?r.$to:r.$from));{let i=mj(t.state,e);return!!i&&yj(t,i)}}if(!r.empty||i.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){let i=mj(t.state,e);return!!(i&&i instanceof bR)&&yj(t,i)}if(!(tB&&i.indexOf("m")>-1)){let i,n=r.$head,o=n.textOffset?null:e<0?n.nodeBefore:n.nodeAfter;if(!o||o.isText)return!1;let s=e<0?n.pos-o.nodeSize:n.pos;return!!(o.isAtom||(i=t.docView.descAt(s))&&!i.contentDOM)&&(bR.isSelectable(o)?yj(t,new bR(e<0?t.state.doc.resolve(n.pos-o.nodeSize):n)):!!iB&&yj(t,new yR(t.state.doc.resolve(e<0?s:s+o.nodeSize))))}}function bj(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function wj(t){let e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function xj(t){let e=t.domSelection(),i=e.focusNode,r=e.focusOffset;if(!i)return;let n,o,s=!1;for(GN&&1==i.nodeType&&r<bj(i)&&wj(i.childNodes[r])&&(s=!0);;)if(r>0){if(1!=i.nodeType)break;{let t=i.childNodes[r-1];if(wj(t))n=i,o=--r;else{if(3!=t.nodeType)break;i=t,r=i.nodeValue.length}}}else{if(kj(i))break;{let e=i.previousSibling;for(;e&&wj(e);)n=i.parentNode,o=nB(e),e=e.previousSibling;if(e)i=e,r=bj(i);else{if(i=i.parentNode,i==t.dom)break;r=0}}}s?Cj(t,e,i,r):n&&Cj(t,e,n,o)}function Sj(t){let e=t.domSelection(),i=e.focusNode,r=e.focusOffset;if(!i)return;let n,o,s=bj(i);for(;;)if(r<s){if(1!=i.nodeType)break;if(!wj(i.childNodes[r]))break;n=i,o=++r}else{if(kj(i))break;{let e=i.nextSibling;for(;e&&wj(e);)n=e.parentNode,o=nB(e)+1,e=e.nextSibling;if(e)i=e,r=0,s=bj(i);else{if(i=i.parentNode,i==t.dom)break;r=s=0}}}n&&Cj(t,e,n,o)}function kj(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Cj(t,e,i,r){if(dB(e)){let t=document.createRange();t.setEnd(i,r),t.setStart(i,r),e.removeAllRanges(),e.addRange(t)}else e.extend&&e.extend(i,r);t.domObserver.setCurSelection();let{state:n}=t;setTimeout((()=>{t.state==n&&sj(t)}),50)}function Aj(t,e,i){let r=t.state.selection;if(r instanceof yR&&!r.empty||i.indexOf("s")>-1)return!1;if(tB&&i.indexOf("m")>-1)return!1;let{$from:n,$to:o}=r;if(!n.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let i=mj(t.state,e);if(i&&i instanceof bR)return yj(t,i)}if(!n.parent.inlineContent){let i=e<0?n:o,s=r instanceof xR?dR.near(i,e):dR.findFrom(i,e);return!!s&&yj(t,s)}return!1}function _j(t,e){if(!(t.state.selection instanceof yR))return!0;let{$head:i,$anchor:r,empty:n}=t.state.selection;if(!i.sameParent(r))return!0;if(!n)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!i.textOffset&&(e<0?i.nodeBefore:i.nodeAfter);if(o&&!o.isText){let r=t.state.tr;return e<0?r.delete(i.pos-o.nodeSize,i.pos):r.delete(i.pos,i.pos+o.nodeSize),t.dispatch(r),!0}return!1}function Tj(t,e,i){t.domObserver.stop(),e.contentEditable=i,t.domObserver.start()}function Oj(t,e){let i=e.keyCode,r=function(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(e);return 8==i||tB&&72==i&&"c"==r?_j(t,-1)||xj(t):46==i||tB&&68==i&&"c"==r?_j(t,1)||Sj(t):13==i||27==i||(37==i||tB&&66==i&&"c"==r?vj(t,-1,r)||xj(t):39==i||tB&&70==i&&"c"==r?vj(t,1,r)||Sj(t):38==i||tB&&80==i&&"c"==r?Aj(t,-1,r)||xj(t):40==i||tB&&78==i&&"c"==r?function(t){if(!ZN||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:i}=t.domSelection();if(e&&1==e.nodeType&&0==i&&e.firstChild&&"false"==e.firstChild.contentEditable){let i=e.firstChild;Tj(t,i,"true"),setTimeout((()=>Tj(t,i,"false")),20)}return!1}(t)||Aj(t,1,r)||Sj(t):r==(tB?"m":"c")&&(66==i||73==i||89==i||90==i))}function Ej(t,e){t.someProp("transformCopied",(t=>{e=t(e)}));let i=[],{content:r,openStart:n,openEnd:o}=e;for(;n>1&&o>1&&1==r.childCount&&1==r.firstChild.childCount;){n--,o--;let t=r.firstChild;i.push(t.type.name,t.attrs!=t.type.defaultAttrs?t.attrs:null),r=t.content}let s=t.someProp("clipboardSerializer")||_F.fromSchema(t.state.schema),a=jj(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c,h=l.firstChild,u=0;for(;h&&1==h.nodeType&&(c=Nj[h.nodeName.toLowerCase()]);){for(let t=c.length-1;t>=0;t--){let e=a.createElement(c[t]);for(;l.firstChild;)e.appendChild(l.firstChild);l.appendChild(e),u++}h=l.firstChild}return h&&1==h.nodeType&&h.setAttribute("data-pm-slice",`${n} ${o}${u?` -${u}`:""} ${JSON.stringify(i)}`),{dom:l,text:t.someProp("clipboardTextSerializer",(t=>t(e)))||e.content.textBetween(0,e.content.size,"\n\n")}}function Mj(t,e,i,r,n){let o,s,a=n.parent.type.spec.code;if(!i&&!e)return null;let l=e&&(r||a||!i);if(l){if(t.someProp("transformPastedText",(t=>{e=t(e,a||r)})),a)return e?new ID(_D.from(t.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0):ID.empty;let i=t.someProp("clipboardTextParser",(t=>t(e,n,r)));if(i)s=i;else{let i=n.marks(),{schema:r}=t.state,s=_F.fromSchema(r);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach((t=>{let e=o.appendChild(document.createElement("p"));t&&e.appendChild(s.serializeNode(r.text(t,i)))}))}}else t.someProp("transformPastedHTML",(t=>{i=t(i)})),o=function(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let i,r=jj().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(t);(i=n&&Nj[n[1].toLowerCase()])&&(t=i.map((t=>"<"+t+">")).join("")+t+i.map((t=>"</"+t+">")).reverse().join(""));if(r.innerHTML=t,i)for(let t=0;t<i.length;t++)r=r.querySelector(i[t])||r;return r}(i),iB&&function(t){let e=t.querySelectorAll(YN?"span:not([class]):not([style])":"span.Apple-converted-space");for(let i=0;i<e.length;i++){let r=e[i];1==r.childNodes.length&&" "==r.textContent&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}(o);let c=o&&o.querySelector("[data-pm-slice]"),h=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let t=+h[3];t>0&&o.firstChild;t--)o=o.firstChild;if(!s){let e=t.someProp("clipboardParser")||t.someProp("domParser")||mF.fromSchema(t.state.schema);s=e.parseSlice(o,{preserveWhitespace:!(!l&&!h),context:n,ruleFromNode:t=>"BR"!=t.nodeName||t.nextSibling||!t.parentNode||Pj.test(t.parentNode.nodeName)?null:{ignore:!0}})}if(h)s=function(t,e){if(!t.size)return t;let i,r=t.content.firstChild.type.schema;try{i=JSON.parse(e)}catch(e){return t}let{content:n,openStart:o,openEnd:s}=t;for(let t=i.length-2;t>=0;t-=2){let e=r.nodes[i[t]];if(!e||e.hasRequiredAttrs())break;n=_D.from(e.create(i[t+1],n)),o++,s++}return new ID(n,o,s)}(Lj(s,+h[1],+h[2]),h[4]);else if(s=ID.maxOpen(function(t,e){if(t.childCount<2)return t;for(let i=e.depth;i>=0;i--){let r,n=e.node(i).contentMatchAt(e.index(i)),o=[];if(t.forEach((t=>{if(!o)return;let e,i=n.findWrapping(t.type);if(!i)return o=null;if(e=o.length&&r.length&&Dj(i,r,t,o[o.length-1],0))o[o.length-1]=e;else{o.length&&(o[o.length-1]=Fj(o[o.length-1],r.length));let e=Ij(t,i);o.push(e),n=n.matchType(e.type),r=i}})),o)return _D.from(o)}return t}(s.content,n),!0),s.openStart||s.openEnd){let t=0,e=0;for(let e=s.content.firstChild;t<s.openStart&&!e.type.spec.isolating;t++,e=e.firstChild);for(let t=s.content.lastChild;e<s.openEnd&&!t.type.spec.isolating;e++,t=t.lastChild);s=Lj(s,t,e)}return t.someProp("transformPasted",(t=>{s=t(s)})),s}const Pj=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Ij(t,e,i=0){for(let r=e.length-1;r>=i;r--)t=e[r].create(null,_D.from(t));return t}function Dj(t,e,i,r,n){if(n<t.length&&n<e.length&&t[n]==e[n]){let o=Dj(t,e,i,r.lastChild,n+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(n==t.length-1?i.type:t[n+1]))return r.copy(r.content.append(_D.from(Ij(i,t,n+1))))}}function Fj(t,e){if(0==e)return t;let i=t.content.replaceChild(t.childCount-1,Fj(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(_D.empty,!0);return t.copy(i.append(r))}function Rj(t,e,i,r,n,o){let s=e<0?t.firstChild:t.lastChild,a=s.content;return n<r-1&&(a=Rj(a,e,i,r,n+1,o)),n>=i&&(a=e<0?s.contentMatchAt(0).fillBefore(a,t.childCount>1||o<=n).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(_D.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function Lj(t,e,i){return e<t.openStart&&(t=new ID(Rj(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),i<t.openEnd&&(t=new ID(Rj(t.content,1,i,t.openEnd,0,0),t.openStart,i)),t}const Nj={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Bj=null;function jj(){return Bj||(Bj=document.implementation.createHTMLDocument("title"))}const zj={},Uj={},$j={touchstart:!0,touchmove:!0};class Hj{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Vj(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function qj(t){t.someProp("handleDOMEvents",(e=>{for(let i in e)t.input.eventHandlers[i]||t.dom.addEventListener(i,t.input.eventHandlers[i]=e=>Wj(t,e))}))}function Wj(t,e){return t.someProp("handleDOMEvents",(i=>{let r=i[e.type];return!!r&&(r(t,e)||e.defaultPrevented)}))}function Xj(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let i=e.target;i!=t.dom;i=i.parentNode)if(!i||11==i.nodeType||i.pmViewDesc&&i.pmViewDesc.stopEvent(e))return!1;return!0}function Gj(t){return{left:t.clientX,top:t.clientY}}function Kj(t,e,i,r,n){if(-1==r)return!1;let o=t.state.doc.resolve(r);for(let r=o.depth+1;r>0;r--)if(t.someProp(e,(e=>r>o.depth?e(t,i,o.nodeAfter,o.before(r),n,!0):e(t,i,o.node(r),o.before(r),n,!1))))return!0;return!1}function Yj(t,e,i){t.focused||t.focus();let r=t.state.tr.setSelection(e);"pointer"==i&&r.setMeta("pointer",!0),t.dispatch(r)}function Jj(t,e,i,r,n){return Kj(t,"handleClickOn",e,i,r)||t.someProp("handleClick",(i=>i(t,e,r)))||(n?function(t,e){if(-1==e)return!1;let i,r,n=t.state.selection;n instanceof bR&&(i=n.node);let o=t.state.doc.resolve(e);for(let t=o.depth+1;t>0;t--){let e=t>o.depth?o.nodeAfter:o.node(t);if(bR.isSelectable(e)){r=i&&n.$from.depth>0&&t>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?o.before(n.$from.depth):o.before(t);break}}return null!=r&&(Yj(t,bR.create(t.state.doc,r),"pointer"),!0)}(t,i):function(t,e){if(-1==e)return!1;let i=t.state.doc.resolve(e),r=i.nodeAfter;return!!(r&&r.isAtom&&bR.isSelectable(r))&&(Yj(t,new bR(i),"pointer"),!0)}(t,i))}function Zj(t,e,i,r){return Kj(t,"handleDoubleClickOn",e,i,r)||t.someProp("handleDoubleClick",(i=>i(t,e,r)))}function Qj(t,e,i,r){return Kj(t,"handleTripleClickOn",e,i,r)||t.someProp("handleTripleClick",(i=>i(t,e,r)))||function(t,e,i){if(0!=i.button)return!1;let r=t.state.doc;if(-1==e)return!!r.inlineContent&&(Yj(t,yR.create(r,0,r.content.size),"pointer"),!0);let n=r.resolve(e);for(let e=n.depth+1;e>0;e--){let i=e>n.depth?n.nodeAfter:n.node(e),o=n.before(e);if(i.inlineContent)Yj(t,yR.create(r,o+1,o+1+i.content.size),"pointer");else{if(!bR.isSelectable(i))continue;Yj(t,bR.create(r,o),"pointer")}return!0}}(t,i,r)}function tz(t){return az(t)}Uj.keydown=(t,e)=>{let i=e;if(t.input.shiftKey=16==i.keyCode||i.shiftKey,!rz(t,i)&&(t.input.lastKeyCode=i.keyCode,t.input.lastKeyCodeTime=Date.now(),!eB||!YN||13!=i.keyCode))if(229!=i.keyCode&&t.domObserver.forceFlush(),!QN||13!=i.keyCode||i.ctrlKey||i.altKey||i.metaKey)t.someProp("handleKeyDown",(e=>e(t,i)))||Oj(t,i)?i.preventDefault():Vj(t,"key");else{let e=Date.now();t.input.lastIOSEnter=e,t.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{t.input.lastIOSEnter==e&&(t.someProp("handleKeyDown",(e=>e(t,fB(13,"Enter")))),t.input.lastIOSEnter=0)}),200)}},Uj.keyup=(t,e)=>{16==e.keyCode&&(t.input.shiftKey=!1)},Uj.keypress=(t,e)=>{let i=e;if(rz(t,i)||!i.charCode||i.ctrlKey&&!i.altKey||tB&&i.metaKey)return;if(t.someProp("handleKeyPress",(e=>e(t,i))))return void i.preventDefault();let r=t.state.selection;if(!(r instanceof yR&&r.$from.sameParent(r.$to))){let e=String.fromCharCode(i.charCode);t.someProp("handleTextInput",(i=>i(t,r.$from.pos,r.$to.pos,e)))||t.dispatch(t.state.tr.insertText(e).scrollIntoView()),i.preventDefault()}};const ez=tB?"metaKey":"ctrlKey";zj.mousedown=(t,e)=>{let i=e;t.input.shiftKey=i.shiftKey;let r=tz(t),n=Date.now(),o="singleClick";n-t.input.lastClick.time<500&&function(t,e){let i=e.x-t.clientX,r=e.y-t.clientY;return i*i+r*r<100}(i,t.input.lastClick)&&!i[ez]&&("singleClick"==t.input.lastClick.type?o="doubleClick":"doubleClick"==t.input.lastClick.type&&(o="tripleClick")),t.input.lastClick={time:n,x:i.clientX,y:i.clientY,type:o};let s=t.posAtCoords(Gj(i));s&&("singleClick"==o?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new iz(t,s,i,!!r)):("doubleClick"==o?Zj:Qj)(t,s.pos,s.inside,i)?i.preventDefault():Vj(t,"pointer"))};class iz{constructor(t,e,i,r){let n,o;if(this.view=t,this.pos=e,this.event=i,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!i[ez],this.allowDefault=i.shiftKey,e.inside>-1)n=t.state.doc.nodeAt(e.inside),o=e.inside;else{let i=t.state.doc.resolve(e.pos);n=i.parent,o=i.depth?i.before():0}const s=r?null:i.target,a=s?t.docView.nearestDesc(s,!0):null;this.target=a?a.dom:null;let{selection:l}=t.state;(0==i.button&&n.type.spec.draggable&&!1!==n.type.spec.selectable||l instanceof bR&&l.from<=o&&l.to>o)&&(this.mightDrag={node:n,pos:o,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!GN||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Vj(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>sj(this.view))),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(Gj(t))),this.updateAllowDefault(t),this.allowDefault||!e?Vj(this.view,"pointer"):Jj(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():0==t.button&&(this.flushed||ZN&&this.mightDrag&&!this.mightDrag.node.isAtom||YN&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(Yj(this.view,dR.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):Vj(this.view,"pointer")}move(t){this.updateAllowDefault(t),Vj(this.view,"pointer"),0==t.buttons&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}function rz(t,e){return!!t.composing||!!(ZN&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500)&&(t.input.compositionEndedAt=-2e8,!0)}zj.touchstart=t=>{t.input.lastTouch=Date.now(),tz(t),Vj(t,"pointer")},zj.touchmove=t=>{t.input.lastTouch=Date.now(),Vj(t,"pointer")},zj.contextmenu=t=>tz(t);const nz=eB?5e3:-1;function oz(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout((()=>az(t)),e))}function sz(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=function(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function az(t,e=!1){if(!(eB&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),sz(t),e||t.docView&&t.docView.dirty){let e=nj(t);return e&&!e.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(e)):t.updateState(t.state),!0}return!1}}Uj.compositionstart=Uj.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,i=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!i.textOffset&&i.parentOffset&&i.nodeBefore.marks.some((t=>!1===t.type.spec.inclusive))))t.markCursor=t.state.storedMarks||i.marks(),az(t,!0),t.markCursor=null;else if(az(t),GN&&e.selection.empty&&i.parentOffset&&!i.textOffset&&i.nodeBefore.marks.length){let e=t.domSelection();for(let t=e.focusNode,i=e.focusOffset;t&&1==t.nodeType&&0!=i;){let r=i<0?t.lastChild:t.childNodes[i-1];if(!r)break;if(3==r.nodeType){e.collapse(r,r.nodeValue.length);break}t=r,i=-1}}t.input.composing=!0}oz(t,nz)},Uj.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,oz(t,20))};const lz=WN&&XN<15||QN&&rB<604;function cz(t,e,i,r){let n=Mj(t,e,i,t.input.shiftKey,t.state.selection.$from);if(t.someProp("handlePaste",(e=>e(t,r,n||ID.empty))))return!0;if(!n)return!1;let o=function(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(n),s=o?t.state.tr.replaceSelectionWith(o,t.input.shiftKey):t.state.tr.replaceSelection(n);return t.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}zj.copy=Uj.cut=(t,e)=>{let i=e,r=t.state.selection,n="cut"==i.type;if(r.empty)return;let o=lz?null:i.clipboardData,s=r.content(),{dom:a,text:l}=Ej(t,s);o?(i.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):function(t,e){if(!t.dom.parentNode)return;let i=t.dom.parentNode.appendChild(document.createElement("div"));i.appendChild(e),i.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),n=document.createRange();n.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(n),setTimeout((()=>{i.parentNode&&i.parentNode.removeChild(i),t.focus()}),50)}(t,a),n&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},Uj.paste=(t,e)=>{let i=e;if(t.composing&&!eB)return;let r=lz?null:i.clipboardData;r&&cz(t,r.getData("text/plain"),r.getData("text/html"),i)?i.preventDefault():function(t,e){if(!t.dom.parentNode)return;let i=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(i?"textarea":"div"));i||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),i?cz(t,r.value,null,e):cz(t,r.textContent,r.innerHTML,e)}),50)}(t,i)};class hz{constructor(t,e){this.slice=t,this.move=e}}const uz=tB?"altKey":"ctrlKey";zj.dragstart=(t,e)=>{let i=e,r=t.input.mouseDown;if(r&&r.done(),!i.dataTransfer)return;let n=t.state.selection,o=n.empty?null:t.posAtCoords(Gj(i));if(o&&o.pos>=n.from&&o.pos<=(n instanceof bR?n.to-1:n.to));else if(r&&r.mightDrag)t.dispatch(t.state.tr.setSelection(bR.create(t.state.doc,r.mightDrag.pos)));else if(i.target&&1==i.target.nodeType){let e=t.docView.nearestDesc(i.target,!0);e&&e.node.type.spec.draggable&&e!=t.docView&&t.dispatch(t.state.tr.setSelection(bR.create(t.state.doc,e.posBefore)))}let s=t.state.selection.content(),{dom:a,text:l}=Ej(t,s);i.dataTransfer.clearData(),i.dataTransfer.setData(lz?"Text":"text/html",a.innerHTML),i.dataTransfer.effectAllowed="copyMove",lz||i.dataTransfer.setData("text/plain",l),t.dragging=new hz(s,!i[uz])},zj.dragend=t=>{let e=t.dragging;window.setTimeout((()=>{t.dragging==e&&(t.dragging=null)}),50)},Uj.dragover=Uj.dragenter=(t,e)=>e.preventDefault(),Uj.drop=(t,e)=>{let i=e,r=t.dragging;if(t.dragging=null,!i.dataTransfer)return;let n=t.posAtCoords(Gj(i));if(!n)return;let o=t.state.doc.resolve(n.pos),s=r&&r.slice;s?t.someProp("transformPasted",(t=>{s=t(s)})):s=Mj(t,i.dataTransfer.getData(lz?"Text":"text/plain"),lz?null:i.dataTransfer.getData("text/html"),!1,o);let a=!(!r||i[uz]);if(t.someProp("handleDrop",(e=>e(t,i,s||ID.empty,a))))return void i.preventDefault();if(!s)return;i.preventDefault();let l=s?function(t,e,i){let r=t.resolve(e);if(!i.content.size)return e;let n=i.content;for(let t=0;t<i.openStart;t++)n=n.firstChild.content;for(let t=1;t<=(0==i.openStart&&i.size?2:1);t++)for(let e=r.depth;e>=0;e--){let i=e==r.depth?0:r.pos<=(r.start(e+1)+r.end(e+1))/2?-1:1,o=r.index(e)+(i>0?1:0),s=r.node(e),a=!1;if(1==t)a=s.canReplace(o,o,n);else{let t=s.contentMatchAt(o).findWrapping(n.firstChild.type);a=t&&s.canReplaceWith(o,o,t[0])}if(a)return 0==i?r.pos:i<0?r.before(e+1):r.after(e+1)}return null}(t.state.doc,o.pos,s):o.pos;null==l&&(l=o.pos);let c=t.state.tr;a&&c.deleteSelection();let h=c.mapping.map(l),u=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,p=c.doc;if(u?c.replaceRangeWith(h,h,s.content.firstChild):c.replaceRange(h,h,s),c.doc.eq(p))return;let d=c.doc.resolve(h);if(u&&bR.isSelectable(s.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new bR(d));else{let e=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach(((t,i,r,n)=>e=n)),c.setSelection(dj(t,d,c.doc.resolve(e)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))},zj.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelection())&&sj(t)}),20))},zj.blur=(t,e)=>{let i=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),i.relatedTarget&&t.dom.contains(i.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)},zj.beforeinput=(t,e)=>{if(YN&&eB&&"deleteContentBackward"==e.inputType){t.domObserver.flushSoon();let{domChangeCount:e}=t.input;setTimeout((()=>{if(t.input.domChangeCount!=e)return;if(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",(e=>e(t,fB(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())}),50)}};for(let t in Uj)zj[t]=Uj[t];function pz(t,e){if(t==e)return!0;for(let i in t)if(t[i]!==e[i])return!1;for(let i in e)if(!(i in t))return!1;return!0}class dz{constructor(t,e){this.toDOM=t,this.spec=e||vz,this.side=this.spec.side||0}map(t,e,i,r){let{pos:n,deleted:o}=t.mapResult(e.from+r,this.side<0?-1:1);return o?null:new mz(n-i,n-i,this)}valid(){return!0}eq(t){return this==t||t instanceof dz&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&pz(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class fz{constructor(t,e){this.attrs=t,this.spec=e||vz}map(t,e,i,r){let n=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-i,o=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-i;return n>=o?null:new mz(n,o,this)}valid(t,e){return e.from<e.to}eq(t){return this==t||t instanceof fz&&pz(this.attrs,t.attrs)&&pz(this.spec,t.spec)}static is(t){return t.type instanceof fz}destroy(){}}class gz{constructor(t,e){this.attrs=t,this.spec=e||vz}map(t,e,i,r){let n=t.mapResult(e.from+r,1);if(n.deleted)return null;let o=t.mapResult(e.to+r,-1);return o.deleted||o.pos<=n.pos?null:new mz(n.pos-i,o.pos-i,this)}valid(t,e){let i,{index:r,offset:n}=t.content.findIndex(e.from);return n==e.from&&!(i=t.child(r)).isText&&n+i.nodeSize==e.to}eq(t){return this==t||t instanceof gz&&pz(this.attrs,t.attrs)&&pz(this.spec,t.spec)}destroy(){}}class mz{constructor(t,e,i){this.from=t,this.to=e,this.type=i}copy(t,e){return new mz(t,e,this.type)}eq(t,e=0){return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}map(t,e,i){return this.type.map(t,this,e,i)}static widget(t,e,i){return new mz(t,t,new dz(e,i))}static inline(t,e,i,r){return new mz(t,e,new fz(i,r))}static node(t,e,i,r){return new mz(t,e,new gz(i,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof fz}}const yz=[],vz={};class bz{constructor(t,e){this.local=t.length?t:yz,this.children=e.length?e:yz}static create(t,e){return e.length?Az(e,t,0,vz):wz}find(t,e,i){let r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,i),r}findInner(t,e,i,r,n){for(let o=0;o<this.local.length;o++){let s=this.local[o];s.from<=e&&s.to>=t&&(!n||n(s.spec))&&i.push(s.copy(s.from+r,s.to+r))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<e&&this.children[o+1]>t){let s=this.children[o]+1;this.children[o+2].findInner(t-s,e-s,i,r+s,n)}}map(t,e,i){return this==wz||0==t.maps.length?this:this.mapInner(t,e,0,0,i||vz)}mapInner(t,e,i,r,n){let o;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(t,i,r);a&&a.type.valid(e,a)?(o||(o=[])).push(a):n.onRemove&&n.onRemove(this.local[s].spec)}return this.children.length?function(t,e,i,r,n,o,s){let a=t.slice();for(let t=0,e=o;t<i.maps.length;t++){let r=0;i.maps[t].forEach(((t,i,o,s)=>{let l=s-o-(i-t);for(let s=0;s<a.length;s+=3){let c=a[s+1];if(c<0||t>c+e-r)continue;let h=a[s]+e-r;i>=h?a[s+1]=t<=h?-2:-1:o>=n&&l&&(a[s]+=l,a[s+1]+=l)}r+=l})),e=i.maps[t].map(e,-1)}let l=!1;for(let e=0;e<a.length;e+=3)if(a[e+1]<0){if(-2==a[e+1]){l=!0,a[e+1]=-1;continue}let c=i.map(t[e]+o),h=c-n;if(h<0||h>=r.content.size){l=!0;continue}let u=i.map(t[e+1]+o,-1)-n,{index:p,offset:d}=r.content.findIndex(h),f=r.maybeChild(p);if(f&&d==h&&d+f.nodeSize==u){let r=a[e+2].mapInner(i,f,c+1,t[e]+o+1,s);r!=wz?(a[e]=h,a[e+1]=u,a[e+2]=r):(a[e+1]=-2,l=!0)}else l=!0}if(l){let l=function(t,e,i,r,n,o,s){function a(t,e){for(let o=0;o<t.local.length;o++){let a=t.local[o].map(r,n,e);a?i.push(a):s.onRemove&&s.onRemove(t.local[o].spec)}for(let i=0;i<t.children.length;i+=3)a(t.children[i+2],t.children[i]+e+1)}for(let i=0;i<t.length;i+=3)-1==t[i+1]&&a(t[i+2],e[i]+o+1);return i}(a,t,e,i,n,o,s),c=Az(l,r,0,s);e=c.local;for(let t=0;t<a.length;t+=3)a[t+1]<0&&(a.splice(t,3),t-=3);for(let t=0,e=0;t<c.children.length;t+=3){let i=c.children[t];for(;e<a.length&&a[e]<i;)e+=3;a.splice(e,0,c.children[t],c.children[t+1],c.children[t+2])}}return new bz(e.sort(_z),a)}(this.children,o||[],t,e,i,r,n):o?new bz(o.sort(_z),yz):wz}add(t,e){return e.length?this==wz?bz.create(t,e):this.addInner(t,e,0):this}addInner(t,e,i){let r,n=0;t.forEach(((t,o)=>{let s,a=o+i;if(s=kz(e,t,a)){for(r||(r=this.children.slice());n<r.length&&r[n]<o;)n+=3;r[n]==o?r[n+2]=r[n+2].addInner(t,s,a+1):r.splice(n,0,o,o+t.nodeSize,Az(s,t,a+1,vz)),n+=3}}));let o=Sz(n?Cz(e):e,-i);for(let e=0;e<o.length;e++)o[e].type.valid(t,o[e])||o.splice(e--,1);return new bz(o.length?this.local.concat(o).sort(_z):this.local,r||this.children)}remove(t){return 0==t.length||this==wz?this:this.removeInner(t,0)}removeInner(t,e){let i=this.children,r=this.local;for(let r=0;r<i.length;r+=3){let n,o=i[r]+e,s=i[r+1]+e;for(let e,i=0;i<t.length;i++)(e=t[i])&&e.from>o&&e.to<s&&(t[i]=null,(n||(n=[])).push(e));if(!n)continue;i==this.children&&(i=this.children.slice());let a=i[r+2].removeInner(n,o+1);a!=wz?i[r+2]=a:(i.splice(r,3),r-=3)}if(r.length)for(let i,n=0;n<t.length;n++)if(i=t[n])for(let t=0;t<r.length;t++)r[t].eq(i,e)&&(r==this.local&&(r=this.local.slice()),r.splice(t--,1));return i==this.children&&r==this.local?this:r.length||i.length?new bz(r,i):wz}forChild(t,e){if(this==wz)return this;if(e.isLeaf)return bz.empty;let i,r;for(let e=0;e<this.children.length;e+=3)if(this.children[e]>=t){this.children[e]==t&&(i=this.children[e+2]);break}let n=t+1,o=n+e.content.size;for(let t=0;t<this.local.length;t++){let e=this.local[t];if(e.from<o&&e.to>n&&e.type instanceof fz){let t=Math.max(n,e.from)-n,i=Math.min(o,e.to)-n;t<i&&(r||(r=[])).push(e.copy(t,i))}}if(r){let t=new bz(r.sort(_z),yz);return i?new xz([t,i]):t}return i||wz}eq(t){if(this==t)return!0;if(!(t instanceof bz)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(let e=0;e<this.children.length;e+=3)if(this.children[e]!=t.children[e]||this.children[e+1]!=t.children[e+1]||!this.children[e+2].eq(t.children[e+2]))return!1;return!0}locals(t){return Tz(this.localsInner(t))}localsInner(t){if(this==wz)return yz;if(t.inlineContent||!this.local.some(fz.is))return this.local;let e=[];for(let t=0;t<this.local.length;t++)this.local[t].type instanceof fz||e.push(this.local[t]);return e}}bz.empty=new bz([],[]),bz.removeOverlap=Tz;const wz=bz.empty;class xz{constructor(t){this.members=t}map(t,e){const i=this.members.map((i=>i.map(t,e,vz)));return xz.from(i)}forChild(t,e){if(e.isLeaf)return bz.empty;let i=[];for(let r=0;r<this.members.length;r++){let n=this.members[r].forChild(t,e);n!=wz&&(n instanceof xz?i=i.concat(n.members):i.push(n))}return xz.from(i)}eq(t){if(!(t instanceof xz)||t.members.length!=this.members.length)return!1;for(let e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0}locals(t){let e,i=!0;for(let r=0;r<this.members.length;r++){let n=this.members[r].localsInner(t);if(n.length)if(e){i&&(e=e.slice(),i=!1);for(let t=0;t<n.length;t++)e.push(n[t])}else e=n}return e?Tz(i?e:e.sort(_z)):yz}static from(t){switch(t.length){case 0:return wz;case 1:return t[0];default:return new xz(t)}}}function Sz(t,e){if(!e||!t.length)return t;let i=[];for(let r=0;r<t.length;r++){let n=t[r];i.push(new mz(n.from+e,n.to+e,n.type))}return i}function kz(t,e,i){if(e.isLeaf)return null;let r=i+e.nodeSize,n=null;for(let e,o=0;o<t.length;o++)(e=t[o])&&e.from>i&&e.to<r&&((n||(n=[])).push(e),t[o]=null);return n}function Cz(t){let e=[];for(let i=0;i<t.length;i++)null!=t[i]&&e.push(t[i]);return e}function Az(t,e,i,r){let n=[],o=!1;e.forEach(((e,s)=>{let a=kz(t,e,s+i);if(a){o=!0;let t=Az(a,e,i+s+1,r);t!=wz&&n.push(s,s+e.nodeSize,t)}}));let s=Sz(o?Cz(t):t,-i).sort(_z);for(let t=0;t<s.length;t++)s[t].type.valid(e,s[t])||(r.onRemove&&r.onRemove(s[t].spec),s.splice(t--,1));return s.length||n.length?new bz(s,n):wz}function _z(t,e){return t.from-e.from||t.to-e.to}function Tz(t){let e=t;for(let i=0;i<e.length-1;i++){let r=e[i];if(r.from!=r.to)for(let n=i+1;n<e.length;n++){let o=e[n];if(o.from!=r.from){o.from<r.to&&(e==t&&(e=t.slice()),e[i]=r.copy(r.from,o.from),Oz(e,n,r.copy(o.from,r.to)));break}o.to!=r.to&&(e==t&&(e=t.slice()),e[n]=o.copy(o.from,r.to),Oz(e,n+1,o.copy(r.to,o.to)))}}return e}function Oz(t,e,i){for(;e<t.length&&_z(i,t[e])>0;)e++;t.splice(e,0,i)}function Ez(t){let e=[];return t.someProp("decorations",(i=>{let r=i(t.state);r&&r!=wz&&e.push(r)})),t.cursorWrapper&&e.push(bz.create(t.state.doc,[t.cursorWrapper.deco])),xz.from(e)}const Mz={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Pz=WN&&XN<=11;class Iz{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class Dz{constructor(t,e){this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Iz,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver((t=>{for(let e=0;e<t.length;e++)this.queue.push(t[e]);WN&&XN<=11&&t.some((t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length))?this.flushSoon():this.flush()})),Pz&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((()=>{this.flushingSoon=-1,this.flush()}),20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Mz)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let e=0;e<t.length;e++)this.queue.push(t[e]);window.setTimeout((()=>this.flush()),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout((()=>this.suppressingSelectionUpdates=!1),50)}onSelectionChange(){if(fj(this.view)){if(this.suppressingSelectionUpdates)return sj(this.view);if(WN&&XN<=11&&!this.view.state.selection.empty){let t=this.view.domSelection();if(t.focusNode&&lB(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelection())}ignoreSelectionChange(t){if(0==t.rangeCount)return!0;let e=t.getRangeAt(0).commonAncestorContainer,i=this.view.docView.nearestDesc(e);return i&&i.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);let i=t.domSelection(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&fj(t)&&!this.ignoreSelectionChange(i),n=-1,o=-1,s=!1,a=[];if(t.editable)for(let t=0;t<e.length;t++){let i=this.registerMutation(e[t],a);i&&(n=n<0?i.from:Math.min(i.from,n),o=o<0?i.to:Math.max(i.to,o),i.typeOver&&(s=!0))}if(GN&&a.length>1){let t=a.filter((t=>"BR"==t.nodeName));if(2==t.length){let e=t[0],i=t[1];e.parentNode&&e.parentNode.parentNode==i.parentNode?i.remove():e.remove()}}let l=null;n<0&&r&&t.input.lastFocus>Date.now()-200&&t.input.lastTouch<Date.now()-300&&dB(i)&&(l=nj(t))&&l.eq(dR.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,sj(t),this.currentSelection.set(i),t.scrollToSelection()):(n>-1||r)&&(n>-1&&(t.docView.markDirty(n,o),function(t){if(Fz.has(t))return;if(Fz.set(t,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)){if(t.requiresGeckoHackNode=GN,Rz)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Rz=!0}}(t)),this.handleDOMChange(n,o,s,a),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(i)||sj(t),this.currentSelection.set(i))}registerMutation(t,e){if(e.indexOf(t.target)>-1)return null;let i=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(i==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!i||i.ignoreMutation(t))return null;if("childList"==t.type){for(let i=0;i<t.addedNodes.length;i++)e.push(t.addedNodes[i]);if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(t.target))return{from:i.posBefore,to:i.posAfter};let r=t.previousSibling,n=t.nextSibling;if(WN&&XN<=11&&t.addedNodes.length)for(let e=0;e<t.addedNodes.length;e++){let{previousSibling:i,nextSibling:o}=t.addedNodes[e];(!i||Array.prototype.indexOf.call(t.addedNodes,i)<0)&&(r=i),(!o||Array.prototype.indexOf.call(t.addedNodes,o)<0)&&(n=o)}let o=r&&r.parentNode==t.target?nB(r)+1:0,s=i.localPosFromDOM(t.target,o,-1),a=n&&n.parentNode==t.target?nB(n):t.target.childNodes.length;return{from:s,to:i.localPosFromDOM(t.target,a,1)}}return"attributes"==t.type?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:{from:i.posAtStart,to:i.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}}}let Fz=new WeakMap,Rz=!1;function Lz(t){let e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(ZN&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}if(t.parentNode.lastChild==t||ZN&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}function Nz(t,e,i,r,n){if(e<0){let e=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,i=nj(t,e);if(i&&!t.state.selection.eq(i)){let r=t.state.tr.setSelection(i);"pointer"==e?r.setMeta("pointer",!0):"key"==e&&r.scrollIntoView(),t.dispatch(r)}return}let o=t.state.doc.resolve(e),s=o.sharedDepth(i);e=o.before(s+1),i=t.state.doc.resolve(i).after(s+1);let a,l,c=t.state.selection,h=function(t,e,i){let r,{node:n,fromOffset:o,toOffset:s,from:a,to:l}=t.docView.parseRange(e,i),c=t.domSelection(),h=c.anchorNode;if(h&&t.dom.contains(1==h.nodeType?h:h.parentNode)&&(r=[{node:h,offset:c.anchorOffset}],dB(c)||r.push({node:c.focusNode,offset:c.focusOffset})),YN&&8===t.input.lastKeyCode)for(let t=s;t>o;t--){let e=n.childNodes[t-1],i=e.pmViewDesc;if("BR"==e.nodeName&&!i){s=t;break}if(!i||i.size)break}let u=t.state.doc,p=t.someProp("domParser")||mF.fromSchema(t.state.schema),d=u.resolve(a),f=null,g=p.parse(n,{topNode:d.parent,topMatch:d.parent.contentMatchAt(d.index()),topOpen:!0,from:o,to:s,preserveWhitespace:"pre"!=d.parent.type.whitespace||"full",findPositions:r,ruleFromNode:Lz,context:d});if(r&&null!=r[0].pos){let t=r[0].pos,e=r[1]&&r[1].pos;null==e&&(e=t),f={anchor:t+a,head:e+a}}return{doc:g,sel:f,from:a,to:l}}(t,e,i),u=t.state.doc,p=u.slice(h.from,h.to);8===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime?(a=t.state.selection.to,l="end"):(a=t.state.selection.from,l="start"),t.input.lastKeyCode=null;let d=function(t,e,i,r,n){let o=t.findDiffStart(e,i);if(null==o)return null;let{a:s,b:a}=t.findDiffEnd(e,i+t.size,i+e.size);if("end"==n){r-=s+Math.max(0,o-Math.min(s,a))-o}if(s<o&&t.size<e.size){o-=r<=o&&r>=s?o-r:0,a=o+(a-s),s=o}else if(a<o){o-=r<=o&&r>=a?o-r:0,s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}(p.content,h.doc.content,h.from,a,l);if((QN&&t.input.lastIOSEnter>Date.now()-225||eB)&&n.some((t=>"DIV"==t.nodeName||"P"==t.nodeName))&&(!d||d.endA>=d.endB)&&t.someProp("handleKeyDown",(e=>e(t,fB(13,"Enter")))))return void(t.input.lastIOSEnter=0);if(!d){if(!(r&&c instanceof yR&&!c.empty&&c.$head.sameParent(c.$anchor))||t.composing||h.sel&&h.sel.anchor!=h.sel.head){if(h.sel){let e=Bz(t,t.state.doc,h.sel);e&&!e.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(e))}return}d={start:c.from,endA:c.to,endB:c.to}}if(YN&&t.cursorWrapper&&h.sel&&h.sel.anchor==t.cursorWrapper.deco.from&&h.sel.head==h.sel.anchor){let t=d.endB-d.start;h.sel={anchor:h.sel.anchor+t,head:h.sel.anchor+t}}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&d.start==d.endB&&t.state.selection instanceof yR&&(d.start>t.state.selection.from&&d.start<=t.state.selection.from+2&&t.state.selection.from>=h.from?d.start=t.state.selection.from:d.endA<t.state.selection.to&&d.endA>=t.state.selection.to-2&&t.state.selection.to<=h.to&&(d.endB+=t.state.selection.to-d.endA,d.endA=t.state.selection.to)),WN&&XN<=11&&d.endB==d.start+1&&d.endA==d.start&&d.start>h.from&&"  "==h.doc.textBetween(d.start-h.from-1,d.start-h.from+1)&&(d.start--,d.endA--,d.endB--);let f,g=h.doc.resolveNoCache(d.start-h.from),m=h.doc.resolveNoCache(d.endB-h.from),y=u.resolve(d.start),v=g.sameParent(m)&&g.parent.inlineContent&&y.end()>=d.endA;if((QN&&t.input.lastIOSEnter>Date.now()-225&&(!v||n.some((t=>"DIV"==t.nodeName||"P"==t.nodeName)))||!v&&g.pos<h.doc.content.size&&(f=dR.findFrom(h.doc.resolve(g.pos+1),1,!0))&&f.head==m.pos)&&t.someProp("handleKeyDown",(e=>e(t,fB(13,"Enter")))))return void(t.input.lastIOSEnter=0);if(t.state.selection.anchor>d.start&&function(t,e,i,r,n){if(!r.parent.isTextblock||i-e<=n.pos-r.pos||jz(r,!0,!1)<n.pos)return!1;let o=t.resolve(e);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(jz(o,!0,!0));return!(!s.parent.isTextblock||s.pos>i||jz(s,!0,!1)<i)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(u,d.start,d.endA,g,m)&&t.someProp("handleKeyDown",(e=>e(t,fB(8,"Backspace")))))return void(eB&&YN&&t.domObserver.suppressSelectionUpdates());YN&&eB&&d.endB==d.start&&(t.input.lastAndroidDelete=Date.now()),eB&&!v&&g.start()!=m.start()&&0==m.parentOffset&&g.depth==m.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==d.endA&&(d.endB-=2,m=h.doc.resolveNoCache(d.endB-h.from),setTimeout((()=>{t.someProp("handleKeyDown",(function(e){return e(t,fB(13,"Enter"))}))}),20));let b,w,x,S=d.start,k=d.endA;if(v)if(g.pos==m.pos)WN&&XN<=11&&0==g.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((()=>sj(t)),20)),b=t.state.tr.delete(S,k),w=u.resolve(d.start).marksAcross(u.resolve(d.endA));else if(d.endA==d.endB&&(x=function(t,e){let i,r,n,o=t.firstChild.marks,s=e.firstChild.marks,a=o,l=s;for(let t=0;t<s.length;t++)a=s[t].removeFromSet(a);for(let t=0;t<o.length;t++)l=o[t].removeFromSet(l);if(1==a.length&&0==l.length)r=a[0],i="add",n=t=>t.mark(r.addToSet(t.marks));else{if(0!=a.length||1!=l.length)return null;r=l[0],i="remove",n=t=>t.mark(r.removeFromSet(t.marks))}let c=[];for(let t=0;t<e.childCount;t++)c.push(n(e.child(t)));if(_D.from(c).eq(t))return{mark:r,type:i}}(g.parent.content.cut(g.parentOffset,m.parentOffset),y.parent.content.cut(y.parentOffset,d.endA-y.start()))))b=t.state.tr,"add"==x.type?b.addMark(S,k,x.mark):b.removeMark(S,k,x.mark);else if(g.parent.child(g.index()).isText&&g.index()==m.index()-(m.textOffset?0:1)){let e=g.parent.textBetween(g.parentOffset,m.parentOffset);if(t.someProp("handleTextInput",(i=>i(t,S,k,e))))return;b=t.state.tr.insertText(e,S,k)}if(b||(b=t.state.tr.replace(S,k,h.doc.slice(d.start-h.from,d.endB-h.from))),h.sel){let e=Bz(t,b.doc,h.sel);e&&!(YN&&eB&&t.composing&&e.empty&&(d.start!=d.endB||t.input.lastAndroidDelete<Date.now()-100)&&(e.head==S||e.head==b.mapping.map(k)-1)||WN&&e.empty&&e.head==S)&&b.setSelection(e)}w&&b.ensureMarks(w),t.dispatch(b.scrollIntoView())}function Bz(t,e,i){return Math.max(i.anchor,i.head)>e.content.size?null:dj(t,e.resolve(i.anchor),e.resolve(i.head))}function jz(t,e,i){let r=t.depth,n=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,n++,e=!1;if(i){let e=t.node(r).maybeChild(t.indexAfter(r));for(;e&&!e.isLeaf;)e=e.firstChild,n++}return n}class zz{constructor(t,e){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Hj,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(qz),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):"function"==typeof t?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Hz(this),$z(this),this.nodeViews=Vz(this),this.docView=$B(this.state.doc,Uz(this),Ez(this),this.dom,this),this.domObserver=new Dz(this,((t,e,i,r)=>Nz(this,t,e,i,r))),this.domObserver.start(),function(t){for(let e in zj){let i=zj[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=e=>{!Xj(t,e)||Wj(t,e)||!t.editable&&e.type in Uj||i(t,e)},$j[e]?{passive:!0}:void 0)}ZN&&t.dom.addEventListener("input",(()=>null)),qj(t)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let e in t)this._props[e]=t[e];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&qj(this);let e=this._props;this._props=t,t.plugins&&(t.plugins.forEach(qz),this.directPlugins=t.plugins),this.updateStateInner(t.state,e)}setProps(t){let e={};for(let t in this._props)e[t]=this._props[t];e.state=this.state;for(let i in t)e[i]=t[i];this.update(e)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,e){let i=this.state,r=!1,n=!1;t.storedMarks&&this.composing&&(sz(this),n=!0),this.state=t;let o=i.plugins!=t.plugins||this._props.plugins!=e.plugins;if(o||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){let t=Vz(this);(function(t,e){let i=0,r=0;for(let r in t){if(t[r]!=e[r])return!0;i++}for(let t in e)r++;return i!=r})(t,this.nodeViews)&&(this.nodeViews=t,r=!0)}(o||e.handleDOMEvents!=this._props.handleDOMEvents)&&qj(this),this.editable=Hz(this),$z(this);let s=Ez(this),a=Uz(this),l=i.plugins==t.plugins||i.doc.eq(t.doc)?t.scrollToSelection>i.scrollToSelection?"to selection":"preserve":"reset",c=r||!this.docView.matchesNode(t.doc,a,s);!c&&t.selection.eq(i.selection)||(n=!0);let h="preserve"==l&&n&&null==this.dom.style.overflowAnchor&&function(t){let e,i,r=t.dom.getBoundingClientRect(),n=Math.max(0,r.top);for(let o=(r.left+r.right)/2,s=n+1;s<Math.min(innerHeight,r.bottom);s+=5){let r=t.root.elementFromPoint(o,s);if(!r||r==t.dom||!t.dom.contains(r))continue;let a=r.getBoundingClientRect();if(a.top>=n-20){e=r,i=a.top;break}}return{refDOM:e,refTop:i,stack:bB(t.dom)}}(this);if(n){this.domObserver.stop();let e=c&&(WN||YN)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&function(t,e){let i=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(i)!=e.$anchor.start(i)}(i.selection,t.selection);if(c){let i=YN?this.trackWrites=this.domSelection().focusNode:null;!r&&this.docView.update(t.doc,a,s,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=$B(t.doc,a,s,this.dom,this)),i&&!this.trackWrites&&(e=!0)}e||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelection())&&function(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),i=t.domSelection();return lB(e.node,e.offset,i.anchorNode,i.anchorOffset)}(this))?sj(this,e):(uj(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),"reset"==l?this.dom.scrollTop=0:"to selection"==l?this.scrollToSelection():h&&function({refDOM:t,refTop:e,stack:i}){let r=t?t.getBoundingClientRect().top:0;wB(i,0==r?0:r-e)}(h)}scrollToSelection(){let t=this.domSelection().focusNode;if(this.someProp("handleScrollToSelection",(t=>t(this))));else if(this.state.selection instanceof bR){let e=this.docView.domAfterPos(this.state.selection.from);1==e.nodeType&&vB(this,e.getBoundingClientRect(),t)}else vB(this,this.coordsAtPos(this.state.selection.head,1),t)}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(t&&t.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let e=0;e<this.pluginViews.length;e++){let i=this.pluginViews[e];i.update&&i.update(this,t)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let e=this.directPlugins[t];e.spec.view&&this.pluginViews.push(e.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let e=this.state.plugins[t];e.spec.view&&this.pluginViews.push(e.spec.view(this))}}}someProp(t,e){let i,r=this._props&&this._props[t];if(null!=r&&(i=e?e(r):r))return i;for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r].props[t];if(null!=n&&(i=e?e(n):n))return i}let n=this.state.plugins;if(n)for(let r=0;r<n.length;r++){let o=n[r].props[t];if(null!=o&&(i=e?e(o):o))return i}}hasFocus(){if(WN){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if("false"==t.contentEditable)return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(t){if(t.setActive)return t.setActive();if(xB)return t.focus(xB);let e=bB(t);t.focus(null==xB?{get preventScroll(){return xB={preventScroll:!0},!0}}:void 0),xB||(xB=!1,wB(e,0))}(this.dom),sj(this),this.domObserver.start()}get root(){let t=this._root;if(null==t)for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t;return t||document}posAtCoords(t){return AB(this,t)}coordsAtPos(t,e=1){return OB(this,t,e)}domAtPos(t,e=0){return this.docView.domFromPos(t,e)}nodeDOM(t){let e=this.docView.descAt(t);return e?e.nodeDOM:null}posAtDOM(t,e,i=-1){let r=this.docView.posFromDOM(t,e,i);if(null==r)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(t,e){return LB(this,e||this.state,t)}destroy(){this.docView&&(!function(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ez(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(t){return function(t,e){Wj(t,e)||!zj[e.type]||!t.editable&&e.type in Uj||zj[e.type](t,e)}(this,t)}dispatch(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))}domSelection(){return this.root.getSelection()}}function Uz(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),e.translate="no",t.someProp("attributes",(i=>{if("function"==typeof i&&(i=i(t.state)),i)for(let t in i)"class"==t&&(e.class+=" "+i[t]),"style"==t?e.style=(e.style?e.style+";":"")+i[t]:e[t]||"contenteditable"==t||"nodeName"==t||(e[t]=String(i[t]))})),[mz.node(0,t.state.doc.content.size,e)]}function $z(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:mz.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Hz(t){return!t.someProp("editable",(e=>!1===e(t.state)))}function Vz(t){let e=Object.create(null);function i(t){for(let i in t)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=t[i])}return t.someProp("nodeViews",i),t.someProp("markViews",i),e}function qz(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}let Wz,Xz;if("undefined"!=typeof WeakMap){let t=new WeakMap;Wz=e=>t.get(e),Xz=(e,i)=>(t.set(e,i),i)}else{let t=[],e=10,i=0;Wz=e=>{for(let i=0;i<t.length;i+=2)if(t[i]==e)return t[i+1]},Xz=(r,n)=>(i==e&&(i=0),t[i++]=r,t[i++]=n)}class Gz{constructor(t,e,i,r){this.left=t,this.top=e,this.right=i,this.bottom=r}}class Kz{constructor(t,e,i,r){this.width=t,this.height=e,this.map=i,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){let i=this.map[e];if(i!=t)continue;let r=e%this.width,n=e/this.width|0,o=r+1,s=n+1;for(let t=1;o<this.width&&this.map[e+t]==i;t++)o++;for(let t=1;s<this.height&&this.map[e+this.width*t]==i;t++)s++;return new Gz(r,n,o,s)}throw new RangeError("No cell with offset "+t+" found")}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError("No cell with offset "+t+" found")}nextCell(t,e,i){let{left:r,right:n,top:o,bottom:s}=this.findCell(t);return"horiz"==e?(i<0?0==r:n==this.width)?null:this.map[o*this.width+(i<0?r-1:n)]:(i<0?0==o:s==this.height)?null:this.map[r+this.width*(i<0?o-1:s)]}rectBetween(t,e){let{left:i,right:r,top:n,bottom:o}=this.findCell(t),{left:s,right:a,top:l,bottom:c}=this.findCell(e);return new Gz(Math.min(i,s),Math.min(n,l),Math.max(r,a),Math.max(o,c))}cellsInRect(t){let e=[],i={};for(let r=t.top;r<t.bottom;r++)for(let n=t.left;n<t.right;n++){let o=r*this.width+n,s=this.map[o];i[s]||(i[s]=!0,n==t.left&&n&&this.map[o-1]==s||r==t.top&&r&&this.map[o-this.width]==s||e.push(s))}return e}positionAt(t,e,i){for(let r=0,n=0;;r++){let o=n+i.child(r).nodeSize;if(r==t){let i=e+t*this.width,r=(t+1)*this.width;for(;i<r&&this.map[i]<n;)i++;return i==r?o-1:this.map[i]}n=o}}static get(t){return Wz(t)||Xz(t,function(t){if("table"!=t.type.spec.tableRole)throw new RangeError("Not a table node: "+t.type.name);let e=function(t){let e=-1,i=!1;for(let r=0;r<t.childCount;r++){let n=t.child(r),o=0;if(i)for(let e=0;e<r;e++){let i=t.child(e);for(let t=0;t<i.childCount;t++){let n=i.child(t);e+n.attrs.rowspan>r&&(o+=n.attrs.colspan)}}for(let t=0;t<n.childCount;t++){let e=n.child(t);o+=e.attrs.colspan,e.attrs.rowspan>1&&(i=!0)}-1==e?e=o:e!=o&&(e=Math.max(e,o))}return e}(t),i=t.childCount,r=[],n=0,o=null,s=[];for(let t=0,n=e*i;t<n;t++)r[t]=0;for(let a=0,l=0;a<i;a++){let c=t.child(a);l++;for(let t=0;;t++){for(;n<r.length&&0!=r[n];)n++;if(t==c.childCount)break;let h=c.child(t),{colspan:u,rowspan:p,colwidth:d}=h.attrs;for(let t=0;t<p;t++){if(t+a>=i){(o||(o=[])).push({type:"overlong_rowspan",pos:l,n:p-t});break}let c=n+t*e;for(let t=0;t<u;t++){0==r[c+t]?r[c+t]=l:(o||(o=[])).push({type:"collision",row:a,pos:l,n:u-t});let i=d&&d[t];if(i){let r=(c+t)%e*2,n=s[r];null==n||n!=i&&1==s[r+1]?(s[r]=i,s[r+1]=1):n==i&&s[r+1]++}}}n+=u,l+=h.nodeSize}let h=(a+1)*e,u=0;for(;n<h;)0==r[n++]&&u++;u&&(o||(o=[])).push({type:"missing",row:a,n:u}),l++}let a=new Kz(e,i,r,o),l=!1;for(let t=0;!l&&t<s.length;t+=2)null!=s[t]&&s[t+1]<i&&(l=!0);l&&function(t,e,i){t.problems||(t.problems=[]);for(let r=0,n={};r<t.map.length;r++){let o=t.map[r];if(n[o])continue;n[o]=!0;let s=i.nodeAt(o),a=null;for(let i=0;i<s.attrs.colspan;i++){let n=e[2*((r+i)%t.width)];null==n||s.attrs.colwidth&&s.attrs.colwidth[i]==n||((a||(a=Yz(s.attrs)))[i]=n)}a&&t.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:a})}}(a,s,t);return a}(t))}}function Yz(t){if(t.colwidth)return t.colwidth.slice();let e=[];for(let i=0;i<t.colspan;i++)e.push(0);return e}function Jz(t,e){let i=t.getAttribute("data-colwidth"),r=i&&/^\d+(,\d+)*$/.test(i)?i.split(",").map((t=>Number(t))):null,n=Number(t.getAttribute("colspan")||1),o={colspan:n,rowspan:Number(t.getAttribute("rowspan")||1),colwidth:r&&r.length==n?r:null};for(let i in e){let r=e[i].getFromDOM,n=r&&r(t);null!=n&&(o[i]=n)}return o}function Zz(t,e){let i={};1!=t.attrs.colspan&&(i.colspan=t.attrs.colspan),1!=t.attrs.rowspan&&(i.rowspan=t.attrs.rowspan),t.attrs.colwidth&&(i["data-colwidth"]=t.attrs.colwidth.join(","));for(let r in e){let n=e[r].setDOMAttr;n&&n(t.attrs[r],i)}return i}function Qz(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(let i in t.nodes){let r=t.nodes[i],n=r.spec.tableRole;n&&(e[n]=r)}}return e}const tU=new RR("selectingCells");function eU(t){for(let e=t.depth-1;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return t.node(0).resolve(t.before(e+1));return null}function iU(t){let e=t.selection.$head;for(let t=e.depth;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return!0;return!1}function rU(t){let e=t.selection;return e.$anchorCell?e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell:e.node&&"cell"==e.node.type.spec.tableRole?e.$anchor:eU(e.$head)||function(t){for(let e=t.nodeAfter,i=t.pos;e;e=e.firstChild,i++){let r=e.type.spec.tableRole;if("cell"==r||"header_cell"==r)return t.doc.resolve(i)}for(let e=t.nodeBefore,i=t.pos;e;e=e.lastChild,i--){let r=e.type.spec.tableRole;if("cell"==r||"header_cell"==r)return t.doc.resolve(i-e.nodeSize)}}(e.$head)}function nU(t){return"row"==t.parent.type.spec.tableRole&&t.nodeAfter}function oU(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function sU(t,e,i){let r=t.start(-1),n=Kz.get(t.node(-1)).nextCell(t.pos-r,e,i);return null==n?null:t.node(0).resolve(r+n)}function aU(t,e,i){let r={};for(let e in t)r[e]=t[e];return r[e]=i,r}function lU(t,e,i=1){let r=aU(t,"colspan",t.colspan-i);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,i),r.colwidth.some((t=>t>0))||(r.colwidth=null)),r}function cU(t,e,i=1){let r=aU(t,"colspan",t.colspan+i);if(r.colwidth){r.colwidth=r.colwidth.slice();for(let t=0;t<i;t++)r.colwidth.splice(e,0,0)}return r}class hU extends dR{constructor(t,e=t){let i=t.node(-1),r=Kz.get(i),n=t.start(-1),o=r.rectBetween(t.pos-n,e.pos-n),s=t.node(0),a=r.cellsInRect(o).filter((t=>t!=e.pos-n));a.unshift(e.pos-n);let l=a.map((t=>{let e=i.nodeAt(t),r=t+n+1;return new fR(s.resolve(r),s.resolve(r+e.content.size))}));super(l[0].$from,l[0].$to,l),this.$anchorCell=t,this.$headCell=e}map(t,e){let i=t.resolve(e.map(this.$anchorCell.pos)),r=t.resolve(e.map(this.$headCell.pos));if(nU(i)&&nU(r)&&oU(i,r)){let t=this.$anchorCell.node(-1)!=i.node(-1);return t&&this.isRowSelection()?hU.rowSelection(i,r):t&&this.isColSelection()?hU.colSelection(i,r):new hU(i,r)}return yR.between(i,r)}content(){let t=this.$anchorCell.node(-1),e=Kz.get(t),i=this.$anchorCell.start(-1),r=e.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i),n={},o=[];for(let i=r.top;i<r.bottom;i++){let s=[];for(let o=i*e.width+r.left,a=r.left;a<r.right;a++,o++){let i=e.map[o];if(!n[i]){n[i]=!0;let o=e.findCell(i),a=t.nodeAt(i),l=r.left-o.left,c=o.right-r.right;if(l>0||c>0){let t=a.attrs;l>0&&(t=lU(t,0,l)),c>0&&(t=lU(t,t.colspan-c,c)),a=o.left<r.left?a.type.createAndFill(t):a.type.create(t,a.content)}if(o.top<r.top||o.bottom>r.bottom){let t=aU(a.attrs,"rowspan",Math.min(o.bottom,r.bottom)-Math.max(o.top,r.top));a=o.top<r.top?a.type.createAndFill(t):a.type.create(t,a.content)}s.push(a)}}o.push(t.child(i).copy(_D.from(s)))}const s=this.isColSelection()&&this.isRowSelection()?t:o;return new ID(_D.from(s),1,1)}replace(t,e=ID.empty){let i=t.steps.length,r=this.ranges;for(let n=0;n<r.length;n++){let{$from:o,$to:s}=r[n],a=t.mapping.slice(i);t.replace(a.map(o.pos),a.map(s.pos),n?ID.empty:e)}let n=dR.findFrom(t.doc.resolve(t.mapping.slice(i).map(this.to)),-1);n&&t.setSelection(n)}replaceWith(t,e){this.replace(t,new ID(_D.from(e),0,0))}forEachCell(t){let e=this.$anchorCell.node(-1),i=Kz.get(e),r=this.$anchorCell.start(-1),n=i.cellsInRect(i.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r));for(let i=0;i<n.length;i++)t(e.nodeAt(n[i]),r+n[i])}isColSelection(){let t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;let i=t+this.$anchorCell.nodeAfter.attrs.rowspan,r=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(i,r)==this.$headCell.node(-1).childCount}static colSelection(t,e=t){let i=Kz.get(t.node(-1)),r=t.start(-1),n=i.findCell(t.pos-r),o=i.findCell(e.pos-r),s=t.node(0);return n.top<=o.top?(n.top>0&&(t=s.resolve(r+i.map[n.left])),o.bottom<i.height&&(e=s.resolve(r+i.map[i.width*(i.height-1)+o.right-1]))):(o.top>0&&(e=s.resolve(r+i.map[o.left])),n.bottom<i.height&&(t=s.resolve(r+i.map[i.width*(i.height-1)+n.right-1]))),new hU(t,e)}isRowSelection(){let t=Kz.get(this.$anchorCell.node(-1)),e=this.$anchorCell.start(-1),i=t.colCount(this.$anchorCell.pos-e),r=t.colCount(this.$headCell.pos-e);if(Math.min(i,r)>0)return!1;let n=i+this.$anchorCell.nodeAfter.attrs.colspan,o=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(n,o)==t.width}eq(t){return t instanceof hU&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,e=t){let i=Kz.get(t.node(-1)),r=t.start(-1),n=i.findCell(t.pos-r),o=i.findCell(e.pos-r),s=t.node(0);return n.left<=o.left?(n.left>0&&(t=s.resolve(r+i.map[n.top*i.width])),o.right<i.width&&(e=s.resolve(r+i.map[i.width*(o.top+1)-1]))):(o.left>0&&(e=s.resolve(r+i.map[o.top*i.width])),n.right<i.width&&(t=s.resolve(r+i.map[i.width*(n.top+1)-1]))),new hU(t,e)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,e){return new hU(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,i=e){return new hU(t.resolve(e),t.resolve(i))}getBookmark(){return new uU(this.$anchorCell.pos,this.$headCell.pos)}}hU.prototype.visible=!1,dR.jsonID("cell",hU);class uU{constructor(t,e){this.anchor=t,this.head=e}map(t){return new uU(t.map(this.anchor),t.map(this.head))}resolve(t){let e=t.resolve(this.anchor),i=t.resolve(this.head);return"row"==e.parent.type.spec.tableRole&&"row"==i.parent.type.spec.tableRole&&e.index()<e.parent.childCount&&i.index()<i.parent.childCount&&oU(e,i)?new hU(e,i):dR.near(i,1)}}function pU(t){if(!(t.selection instanceof hU))return null;let e=[];return t.selection.forEachCell(((t,i)=>{e.push(mz.node(i,i+t.nodeSize,{class:"selectedCell"}))})),bz.create(t.doc,e)}function dU(t){if(!t.size)return null;let{content:e,openStart:i,openEnd:r}=t;for(;1==e.childCount&&(i>0&&r>0||"table"==e.firstChild.type.spec.tableRole);)i--,r--,e=e.firstChild.content;let n=e.firstChild,o=n.type.spec.tableRole,s=n.type.schema,a=[];if("row"==o)for(let t=0;t<e.childCount;t++){let n=e.child(t).content,o=t?0:Math.max(0,i-1),l=t<e.childCount-1?0:Math.max(0,r-1);(o||l)&&(n=fU(Qz(s).row,new ID(n,o,l)).content),a.push(n)}else{if("cell"!=o&&"header_cell"!=o)return null;a.push(i||r?fU(Qz(s).row,new ID(e,i,r)).content:e)}return function(t,e){let i=[];for(let t=0;t<e.length;t++){let r=e[t];for(let e=r.childCount-1;e>=0;e--){let{rowspan:n,colspan:o}=r.child(e).attrs;for(let e=t;e<t+n;e++)i[e]=(i[e]||0)+o}}let r=0;for(let t=0;t<i.length;t++)r=Math.max(r,i[t]);for(let n=0;n<i.length;n++)if(n>=e.length&&e.push(_D.empty),i[n]<r){let o=Qz(t).cell.createAndFill(),s=[];for(let t=i[n];t<r;t++)s.push(o);e[n]=e[n].append(_D.from(s))}return{height:e.length,width:r,rows:e}}(s,a)}function fU(t,e){let i=t.createAndFill();return new uR(i).replace(0,i.content.size,e).doc}function gU(t,e,i,r,n,o,s,a){if(0==s||s==e.height)return!1;let l=!1;for(let c=n;c<o;c++){let n=s*e.width+c,o=e.map[n];if(e.map[n-e.width]==o){l=!0;let n=i.nodeAt(o),{top:h,left:u}=e.findCell(o);t.setNodeMarkup(t.mapping.slice(a).map(o+r),null,aU(n.attrs,"rowspan",s-h)),t.insert(t.mapping.slice(a).map(e.positionAt(s,u,i)),n.type.createAndFill(aU(n.attrs,"rowspan",h+n.attrs.rowspan-s))),c+=n.attrs.colspan-1}}return l}function mU(t,e,i,r,n,o,s,a){if(0==s||s==e.width)return!1;let l=!1;for(let c=n;c<o;c++){let n=c*e.width+s,o=e.map[n];if(e.map[n-1]==o){l=!0;let n=i.nodeAt(o),h=e.colCount(o),u=t.mapping.slice(a).map(o+r);t.setNodeMarkup(u,null,lU(n.attrs,s-h,n.attrs.colspan-(s-h))),t.insert(u+n.nodeSize,n.type.createAndFill(lU(n.attrs,0,s-h))),c+=n.attrs.rowspan-1}}return l}function yU(t,e,i,r,n){let o=i?t.doc.nodeAt(i-1):t.doc,s=Kz.get(o),{top:a,left:l}=r,c=l+n.width,h=a+n.height,u=t.tr,p=0;function d(){o=i?u.doc.nodeAt(i-1):u.doc,s=Kz.get(o),p=u.mapping.maps.length}(function(t,e,i,r,n,o,s){let a,l,c=Qz(t.doc.type.schema);if(n>e.width)for(let o=0,h=0;o<e.height;o++){let u=i.child(o);h+=u.nodeSize;let p,d=[];p=null==u.lastChild||u.lastChild.type==c.cell?a||(a=c.cell.createAndFill()):l||(l=c.header_cell.createAndFill());for(let t=e.width;t<n;t++)d.push(p);t.insert(t.mapping.slice(s).map(h-1+r),d)}if(o>e.height){let h=[];for(let t=0,r=(e.height-1)*e.width;t<Math.max(e.width,n);t++){let n=!(t>=e.width)&&i.nodeAt(e.map[r+t]).type==c.header_cell;h.push(n?l||(l=c.header_cell.createAndFill()):a||(a=c.cell.createAndFill()))}let u=c.row.create(null,_D.from(h)),p=[];for(let t=e.height;t<o;t++)p.push(u);t.insert(t.mapping.slice(s).map(r+i.nodeSize-2),p)}return!(!a&&!l)})(u,s,o,i,c,h,p)&&d(),gU(u,s,o,i,l,c,a,p)&&d(),gU(u,s,o,i,l,c,h,p)&&d(),mU(u,s,o,i,a,h,l,p)&&d(),mU(u,s,o,i,a,h,c,p)&&d();for(let t=a;t<h;t++){let e=s.positionAt(t,l,o),r=s.positionAt(t,c,o);u.replace(u.mapping.slice(p).map(e+i),u.mapping.slice(p).map(r+i),new ID(n.rows[t-a],0,0))}d(),u.setSelection(new hU(u.doc.resolve(i+s.positionAt(a,l,o)),u.doc.resolve(i+s.positionAt(h-1,c-1,o)))),e(u)}const vU=jN({ArrowLeft:wU("horiz",-1),ArrowRight:wU("horiz",1),ArrowUp:wU("vert",-1),ArrowDown:wU("vert",1),"Shift-ArrowLeft":xU("horiz",-1),"Shift-ArrowRight":xU("horiz",1),"Shift-ArrowUp":xU("vert",-1),"Shift-ArrowDown":xU("vert",1),Backspace:SU,"Mod-Backspace":SU,Delete:SU,"Mod-Delete":SU});function bU(t,e,i){return!i.eq(t.selection)&&(e&&e(t.tr.setSelection(i).scrollIntoView()),!0)}function wU(t,e){return(i,r,n)=>{let o=i.selection;if(o instanceof hU)return bU(i,r,dR.near(o.$headCell,e));if("horiz"!=t&&!o.empty)return!1;let s=_U(n,t,e);if(null==s)return!1;if("horiz"==t)return bU(i,r,dR.near(i.doc.resolve(o.head+e),e));{let n,o=i.doc.resolve(s),a=sU(o,t,e);return n=a?dR.near(a,1):e<0?dR.near(i.doc.resolve(o.before(-1)),-1):dR.near(i.doc.resolve(o.after(-1)),1),bU(i,r,n)}}}function xU(t,e){return(i,r,n)=>{let o=i.selection;if(!(o instanceof hU)){let r=_U(n,t,e);if(null==r)return!1;o=new hU(i.doc.resolve(r))}let s=sU(o.$headCell,t,e);return!!s&&bU(i,r,new hU(o.$anchorCell,s))}}function SU(t,e){let i=t.selection;if(!(i instanceof hU))return!1;if(e){let r=t.tr,n=Qz(t.schema).cell.createAndFill().content;i.forEachCell(((t,e)=>{t.content.eq(n)||r.replace(r.mapping.map(e+1),r.mapping.map(e+t.nodeSize-1),new ID(n,0,0))})),r.docChanged&&e(r)}return!0}function kU(t,e){let i=eU(t.state.doc.resolve(e));return!!i&&(t.dispatch(t.state.tr.setSelection(new hU(i))),!0)}function CU(t,e,i){if(!iU(t.state))return!1;let r=dU(i),n=t.state.selection;if(n instanceof hU){r||(r={width:1,height:1,rows:[_D.from(fU(Qz(t.state.schema).cell,i))]});let e=n.$anchorCell.node(-1),o=n.$anchorCell.start(-1),s=Kz.get(e).rectBetween(n.$anchorCell.pos-o,n.$headCell.pos-o);return r=function({width:t,height:e,rows:i},r,n){if(t!=r){let e=[],n=[];for(let t=0;t<i.length;t++){let o=i[t],s=[];for(let i=e[t]||0,n=0;i<r;n++){let a=o.child(n%o.childCount);i+a.attrs.colspan>r&&(a=a.type.create(lU(a.attrs,a.attrs.colspan,i+a.attrs.colspan-r),a.content)),s.push(a),i+=a.attrs.colspan;for(let i=1;i<a.attrs.rowspan;i++)e[t+i]=(e[t+i]||0)+a.attrs.colspan}n.push(_D.from(s))}i=n,t=r}if(e!=n){let t=[];for(let r=0,o=0;r<n;r++,o++){let s=[],a=i[o%e];for(let t=0;t<a.childCount;t++){let e=a.child(t);r+e.attrs.rowspan>n&&(e=e.type.create(aU(e.attrs,"rowspan",Math.max(1,n-e.attrs.rowspan)),e.content)),s.push(e)}t.push(_D.from(s))}i=t,e=n}return{width:t,height:e,rows:i}}(r,s.right-s.left,s.bottom-s.top),yU(t.state,t.dispatch,o,s,r),!0}if(r){let e=rU(t.state),i=e.start(-1);return yU(t.state,t.dispatch,i,Kz.get(e.node(-1)).findCell(e.pos-i),r),!0}return!1}function AU(t,e){if(e.ctrlKey||e.metaKey)return;let i,r=TU(t,e.target);if(e.shiftKey&&t.state.selection instanceof hU)n(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&null!=(i=eU(t.state.selection.$anchor))&&OU(t,e).pos!=i.pos)n(i,e),e.preventDefault();else if(!r)return;function n(e,i){let r=OU(t,i),n=null==tU.getState(t.state);if(!r||!oU(e,r)){if(!n)return;r=e}let o=new hU(e,r);if(n||!t.state.selection.eq(o)){let i=t.state.tr.setSelection(o);n&&i.setMeta(tU,e.pos),t.dispatch(i)}}function o(){t.root.removeEventListener("mouseup",o),t.root.removeEventListener("dragstart",o),t.root.removeEventListener("mousemove",s),null!=tU.getState(t.state)&&t.dispatch(t.state.tr.setMeta(tU,-1))}function s(i){let s,a=tU.getState(t.state);if(null!=a)s=t.state.doc.resolve(a);else if(TU(t,i.target)!=r&&(s=OU(t,e),!s))return o();s&&n(s,i)}t.root.addEventListener("mouseup",o),t.root.addEventListener("dragstart",o),t.root.addEventListener("mousemove",s)}function _U(t,e,i){if(!(t.state.selection instanceof yR))return null;let{$head:r}=t.state.selection;for(let n=r.depth-1;n>=0;n--){let o=r.node(n);if((i<0?r.index(n):r.indexAfter(n))!=(i<0?0:o.childCount))return null;if("cell"==o.type.spec.tableRole||"header_cell"==o.type.spec.tableRole){let o=r.before(n),s="vert"==e?i>0?"down":"up":i>0?"right":"left";return t.endOfTextblock(s)?o:null}}return null}function TU(t,e){for(;e&&e!=t.dom;e=e.parentNode)if("TD"==e.nodeName||"TH"==e.nodeName)return e}function OU(t,e){let i=t.posAtCoords({left:e.clientX,top:e.clientY});return i&&i?eU(t.state.doc.resolve(i.pos)):null}const EU=new RR("fix-tables");function MU(t,e,i,r){let n=t.childCount,o=e.childCount;t:for(let s=0,a=0;s<o;s++){let o=e.child(s);for(let e=a,r=Math.min(n,s+3);e<r;e++)if(t.child(e)==o){a=e+1,i+=o.nodeSize;continue t}r(o,i),a<n&&t.child(a).sameMarkup(o)?MU(t.child(a),o,i+1,r):o.nodesBetween(0,o.content.size,r,i+1),i+=o.nodeSize}}function PU(t,e){let i,r=(e,r)=>{"table"==e.type.spec.tableRole&&(i=function(t,e,i,r){let n=Kz.get(e);if(!n.problems)return r;r||(r=t.tr);let o,s,a=[];for(let t=0;t<n.height;t++)a.push(0);for(let t=0;t<n.problems.length;t++){let o=n.problems[t];if("collision"==o.type){let t=e.nodeAt(o.pos);for(let e=0;e<t.attrs.rowspan;e++)a[o.row+e]+=o.n;r.setNodeMarkup(r.mapping.map(i+1+o.pos),null,lU(t.attrs,t.attrs.colspan-o.n,o.n))}else if("missing"==o.type)a[o.row]+=o.n;else if("overlong_rowspan"==o.type){let t=e.nodeAt(o.pos);r.setNodeMarkup(r.mapping.map(i+1+o.pos),null,aU(t.attrs,"rowspan",t.attrs.rowspan-o.n))}else if("colwidth mismatch"==o.type){let t=e.nodeAt(o.pos);r.setNodeMarkup(r.mapping.map(i+1+o.pos),null,aU(t.attrs,"colwidth",o.colwidth))}}for(let t=0;t<a.length;t++)a[t]&&(null==o&&(o=t),s=t);for(let l=0,c=i+1;l<n.height;l++){let i=e.child(l),n=c+i.nodeSize,h=a[l];if(h>0){let e="cell";i.firstChild&&(e=i.firstChild.type.spec.tableRole);let a=[];for(let i=0;i<h;i++)a.push(Qz(t.schema)[e].createAndFill());let u=0!=l&&o!=l-1||s!=l?n-1:c+1;r.insert(r.mapping.map(u),a)}c=n}return r.setMeta(EU,{fixTables:!0})}(t,e,r,i))};return e?e.doc!=t.doc&&MU(e.doc,t.doc,0,r):t.doc.descendants(r),i}function IU(t){let e,i=t.selection,r=rU(t),n=r.node(-1),o=r.start(-1),s=Kz.get(n);return e=i instanceof hU?s.rectBetween(i.$anchorCell.pos-o,i.$headCell.pos-o):s.findCell(r.pos-o),e.tableStart=o,e.map=s,e.table=n,e}function DU(t,{map:e,tableStart:i,table:r},n){let o=n>0?-1:0;(function(t,e,i){let r=Qz(e.type.schema).header_cell;for(let n=0;n<t.height;n++)if(e.nodeAt(t.map[i+n*t.width]).type!=r)return!1;return!0})(e,r,n+o)&&(o=0==n||n==e.width?null:0);for(let s=0;s<e.height;s++){let a=s*e.width+n;if(n>0&&n<e.width&&e.map[a-1]==e.map[a]){let o=e.map[a],l=r.nodeAt(o);t.setNodeMarkup(t.mapping.map(i+o),null,cU(l.attrs,n-e.colCount(o))),s+=l.attrs.rowspan-1}else{let l=null==o?Qz(r.type.schema).cell:r.nodeAt(e.map[a+o]).type,c=e.positionAt(s,n,r);t.insert(t.mapping.map(i+c),l.createAndFill())}}return t}function FU(t,{map:e,table:i,tableStart:r},n){let o=t.mapping.maps.length;for(let s=0;s<e.height;){let a=s*e.width+n,l=e.map[a],c=i.nodeAt(l);if(n>0&&e.map[a-1]==l||n<e.width-1&&e.map[a+1]==l)t.setNodeMarkup(t.mapping.slice(o).map(r+l),null,lU(c.attrs,n-e.colCount(l)));else{let e=t.mapping.slice(o).map(r+l);t.delete(e,e+c.nodeSize)}s+=c.attrs.rowspan}}function RU(t,{map:e,tableStart:i,table:r},n){let o=i;for(let t=0;t<n;t++)o+=r.child(t).nodeSize;let s=[],a=n>0?-1:0;(function(t,e,i){let r=Qz(e.type.schema).header_cell;for(let n=0;n<t.width;n++)if(e.nodeAt(t.map[n+i*t.width]).type!=r)return!1;return!0})(e,r,n+a)&&(a=0==n||n==e.height?null:0);for(let o=0,l=e.width*n;o<e.width;o++,l++)if(n>0&&n<e.height&&e.map[l]==e.map[l-e.width]){let n=e.map[l],s=r.nodeAt(n).attrs;t.setNodeMarkup(i+n,null,aU(s,"rowspan",s.rowspan+1)),o+=s.colspan-1}else{let t=null==a?Qz(r.type.schema).cell:r.nodeAt(e.map[l+a*e.width]).type;s.push(t.createAndFill())}return t.insert(o,Qz(r.type.schema).row.create(null,s)),t}function LU(t,{map:e,table:i,tableStart:r},n){let o=0;for(let t=0;t<n;t++)o+=i.child(t).nodeSize;let s=o+i.child(n).nodeSize,a=t.mapping.maps.length;t.delete(o+r,s+r);for(let o=0,s=n*e.width;o<e.width;o++,s++){let l=e.map[s];if(n>0&&l==e.map[s-e.width]){let e=i.nodeAt(l).attrs;t.setNodeMarkup(t.mapping.slice(a).map(l+r),null,aU(e,"rowspan",e.rowspan-1)),o+=e.colspan-1}else if(n<e.width&&l==e.map[s+e.width]){let s=i.nodeAt(l),c=s.type.create(aU(s.attrs,"rowspan",s.attrs.rowspan-1),s.content),h=e.positionAt(n+1,o,i);t.insert(t.mapping.slice(a).map(r+h),c),o+=s.attrs.colspan-1}}}function NU(t,e){if(!iU(t))return!1;if(e){let i=IU(t),r=t.tr;if(0==i.top&&i.bottom==i.map.height)return!1;for(let t=i.bottom-1;LU(r,i,t),t!=i.top;t--)i.table=i.tableStart?r.doc.nodeAt(i.tableStart-1):r.doc,i.map=Kz.get(i.table);e(r)}return!0}function BU(t){let e=t.content;return 1==e.childCount&&e.firstChild.isTextblock&&0==e.firstChild.childCount}function jU(t,e){let i=t.selection;if(!(i instanceof hU)||i.$anchorCell.pos==i.$headCell.pos)return!1;let r=IU(t),{map:n}=r;if(function({width:t,height:e,map:i},r){let n=r.top*t+r.left,o=n,s=(r.bottom-1)*t+r.left,a=n+(r.right-r.left-1);for(let e=r.top;e<r.bottom;e++){if(r.left>0&&i[o]==i[o-1]||r.right<t&&i[a]==i[a+1])return!0;o+=t,a+=t}for(let o=r.left;o<r.right;o++){if(r.top>0&&i[n]==i[n-t]||r.bottom<e&&i[s]==i[s+t])return!0;n++,s++}return!1}(n,r))return!1;if(e){let i,o,s=t.tr,a={},l=_D.empty;for(let t=r.top;t<r.bottom;t++)for(let e=r.left;e<r.right;e++){let c=n.map[t*n.width+e],h=r.table.nodeAt(c);if(!a[c])if(a[c]=!0,null==i)i=c,o=h;else{BU(h)||(l=l.append(h.content));let t=s.mapping.map(c+r.tableStart);s.delete(t,t+h.nodeSize)}}if(s.setNodeMarkup(i+r.tableStart,null,aU(cU(o.attrs,o.attrs.colspan,r.right-r.left-o.attrs.colspan),"rowspan",r.bottom-r.top)),l.size){let t=i+1+o.content.size,e=BU(o)?i+1:t;s.replaceWith(e+r.tableStart,t+r.tableStart,l)}s.setSelection(new hU(s.doc.resolve(i+r.tableStart))),e(s)}return!0}function zU(t,e){const i=Qz(t.schema);return(r=({node:t})=>i[t.type.spec.tableRole],(t,e)=>{let i,n,o=t.selection;if(o instanceof hU){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;i=o.$anchorCell.nodeAfter,n=o.$anchorCell.pos}else{if(i=function(t){for(let e=t.depth;e>0;e--){const i=t.node(e).type.spec.tableRole;if("cell"===i||"header_cell"===i)return t.node(e)}return null}(o.$from),!i)return!1;n=eU(o.$from).pos}if(1==i.attrs.colspan&&1==i.attrs.rowspan)return!1;if(e){let s=i.attrs,a=[],l=s.colwidth;s.rowspan>1&&(s=aU(s,"rowspan",1)),s.colspan>1&&(s=aU(s,"colspan",1));let c,h=IU(t),u=t.tr;for(let t=0;t<h.right-h.left;t++)a.push(l?aU(s,"colwidth",l&&l[t]?[l[t]]:null):s);for(let t=h.top;t<h.bottom;t++){let e=h.map.positionAt(t,h.left,h.table);t==h.top&&(e+=i.nodeSize);for(let n=h.left,o=0;n<h.right;n++,o++)n==h.left&&t==h.top||u.insert(c=u.mapping.map(e+h.tableStart,1),r({node:i,row:t,col:n}).createAndFill(a[o]))}u.setNodeMarkup(n,r({node:i,row:h.top,col:h.left}),a[0]),o instanceof hU&&u.setSelection(new hU(u.doc.resolve(o.$anchorCell.pos),c&&u.doc.resolve(c))),e(u)}return!0})(t,e);var r}function UU(t,e,i){const r=e.map.cellsInRect({left:0,top:0,right:"row"==t?e.map.width:1,bottom:"column"==t?e.map.height:1});for(let t=0;t<r.length;t++){const n=e.table.nodeAt(r[t]);if(n&&n.type!==i.header_cell)return!1}return!0}function $U(t,e){return(e=e||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(t){return function(e,i){if(!iU(e))return!1;if(i){let r=Qz(e.schema),n=IU(e),o=e.tr,s=n.map.cellsInRect("column"==t?new Gz(n.left,0,n.right,n.map.height):"row"==t?new Gz(0,n.top,n.map.width,n.bottom):n),a=s.map((t=>n.table.nodeAt(t)));for(let t=0;t<s.length;t++)a[t].type==r.header_cell&&o.setNodeMarkup(n.tableStart+s[t],r.cell,a[t].attrs);if(0==o.steps.length)for(let t=0;t<s.length;t++)o.setNodeMarkup(n.tableStart+s[t],r.header_cell,a[t].attrs);i(o)}return!0}}(t):function(e,i){if(!iU(e))return!1;if(i){let r=Qz(e.schema),n=IU(e),o=e.tr,s=UU("row",n,r),a=UU("column",n,r),l=("column"===t?s:"row"===t&&a)?1:0,c="column"==t?new Gz(0,l,1,n.map.height):"row"==t?new Gz(l,0,n.map.width,1):n,h="column"==t?a?r.cell:r.header_cell:"row"==t?s?r.cell:r.header_cell:r.cell;n.map.cellsInRect(c).forEach((t=>{const e=t+n.tableStart,i=o.doc.nodeAt(e);i&&o.setNodeMarkup(e,h,i.attrs)})),i(o)}return!0}}$U("row",{useDeprecatedLogic:!0}),$U("column",{useDeprecatedLogic:!0}),$U("cell",{useDeprecatedLogic:!0});function HU(t,e){let i=t.selection.$anchor;for(let r=i.depth;r>0;r--){if("table"==i.node(r).type.spec.tableRole)return e&&e(t.tr.delete(i.before(r),i.after(r)).scrollIntoView()),!0}return!1}new RR("tableColumnResizing");function VU({allowTableNodeSelection:t=!1}={}){return new IR({key:tU,state:{init:()=>null,apply(t,e){let i=t.getMeta(tU);if(null!=i)return-1==i?null:i;if(null==e||!t.docChanged)return e;let{deleted:r,pos:n}=t.mapping.mapResult(e);return r?null:n}},props:{decorations:pU,handleDOMEvents:{mousedown:AU},createSelectionBetween(t){if(null!=tU.getState(t.state))return t.state.selection},handleTripleClick:kU,handleKeyDown:vU,handlePaste:CU},appendTransaction:(e,i,r)=>function(t,e,i){let r,n,o=(e||t).selection,s=(e||t).doc;if(o instanceof bR&&(n=o.node.type.spec.tableRole)){if("cell"==n||"header_cell"==n)r=hU.create(s,o.from);else if("row"==n){let t=s.resolve(o.from+1);r=hU.rowSelection(t,t)}else if(!i){let t=Kz.get(o.node),e=o.from+1,i=e+t.map[t.width*t.height-1];r=hU.create(s,e+1,i)}}else o instanceof yR&&function({$from:t,$to:e}){if(t.pos==e.pos||t.pos<t.pos-6)return!1;let i=t.pos,r=e.pos,n=t.depth;for(;n>=0&&!(t.after(n+1)<t.end(n));n--,i++);for(let t=e.depth;t>=0&&!(e.before(t+1)>e.start(t));t--,r--);return i==r&&/row|table/.test(t.node(n).type.spec.tableRole)}(o)?r=yR.create(s,o.from):o instanceof yR&&function({$from:t,$to:e}){let i,r;for(let e=t.depth;e>0;e--){let r=t.node(e);if("cell"===r.type.spec.tableRole||"header_cell"===r.type.spec.tableRole){i=r;break}}for(let t=e.depth;t>0;t--){let i=e.node(t);if("cell"===i.type.spec.tableRole||"header_cell"===i.type.spec.tableRole){r=i;break}}return i!==r&&0===e.parentOffset}(o)&&(r=yR.create(s,o.$from.start(),o.$from.end()));return r&&(e||(e=t.tr)).setSelection(r),e}(r,PU(r,i),t)})}var qU=["blockquote",0],WU=["hr"],XU=["pre",["code",0]],GU=["ol",0],KU=["ul",0],YU=["li",0],JU=function(t){for(var e,i={},r=t.attributes,n=0;n<r.length;n++)i[(e=r[n]).name]=e.value;return i},ZU=function(t){var e={};return t.forEach((function(t){e[t]={default:null}})),e},QU=function(){return ZU(["style","class","id"])},t$=function(t,e){for(var i in t)if(i&&null!==t[i]&&i!==e)return!0;return!1},e$=function(t,e){void 0===e&&(e=[]);var i={},r=function(r){r&&null!==t[r]&&!e.find((function(t){return t===r}))&&(i[r]=t[r])};for(var n in t)r(n);return i},i$=function(t){var e;return(e={})[t]={name:t,inclusive:!0,parseDOM:[{tag:t}],toDOM:function(){return[t,0]}},e},r$=KR(KR(KR(KR(KR(KR(KR(KR(KR(KR({link:{attrs:KR(KR({},QU()),{href:{default:null},target:{default:null},title:{default:null}}),inclusive:!1,parseDOM:[{tag:"a",getAttrs:JU}],toDOM:function(t){return["a",e$(t.attrs),0]}}},i$("strong")),i$("b")),i$("em")),i$("i")),i$("u")),i$("del")),i$("sub")),i$("sup")),i$("code")),{style:{attrs:KR({},QU()),parseDOM:[{tag:"span",getAttrs:JU}],toDOM:function(t){return t$(t.attrs)?["span",e$(t.attrs),0]:["span",0]}}}),n$=function(t){var e;return(e={})[t]={default:null,getFromDOM:function(e){return e.getAttribute(t)},setDOMAttr:function(e,i){i[t]=e}},e},o$=KR(KR(KR(KR({},n$("style")),n$("class")),n$("id")),n$("headers")),s$={doc:{content:"colgroup*"},col:{attrs:ZU(["id","class","style","span"]),parseDOM:[{getAttrs:JU,tag:"col"}],toDOM:function(t){return["col",t.attrs]}},colgroup:{attrs:ZU(["id","class","style","span"]),content:"col*",parseDOM:[{getAttrs:JU,tag:"colgroup"}],toDOM:function(t){return["colgroup",t.attrs,0]}},text:{inline:!0,group:"inline"}},a$=new fF({nodes:s$,marks:{}}),l$=function(t){var e=WR(VR(t),a$,{preserveWhitespace:!1});return qR(e).firstChild},c$=function(t){let e=t.cellAttributes||{},i={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(let t in e)i[t]={default:e[t].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:t.tableGroup,parseDOM:[{tag:"table"}],toDOM:()=>["table",["tbody",0]]},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:()=>["tr",0]},table_cell:{content:t.cellContent,attrs:i,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:t=>Jz(t,e)}],toDOM:t=>["td",Zz(t,e),0]},table_header:{content:t.cellContent,attrs:i,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:t=>Jz(t,e)}],toDOM:t=>["th",Zz(t,e),0]}}}({tableGroup:"block",cellContent:"block+",cellAttributes:o$});c$.table_row.attrs=KR(KR({},c$.table_row.attrs),ZU([LR,"style","class","id"])),c$.table_row.toDOM=function(t){return["tr",e$(t.attrs),0]},c$.table_row.parseDOM=[{tag:"tr",getAttrs:JU}],c$.table.attrs=KR(KR({},c$.table.attrs),ZU(["style","class","id",NR,BR])),c$.table.toDOM=function(t){var e=t$(t.attrs)?e$(t.attrs,[NR,BR]):{},i=null;if(t.attrs[NR]&&!function(t){for(var e=!1,i=t.child(0),r=0;r<i.childCount;r++)if(i.child(r).attrs.colwidth){e=!0;break}return e}(t)){var r=l$(t.attrs[NR]);if(r){var n=Array.from(r.children).map((function(t){return["col",JU(t)]}));i=["colgroup",JU(r)].concat(n)}}return i?["table",e,i,["tbody",0]]:["table",e,["tbody",0]]},c$.table.parseDOM=[{tag:"table",getAttrs:function(t){var e=JU(t),i=Array.from(t.childNodes).find((function(t){return"COLGROUP"===t.nodeName}));return i&&(e[NR]=i.outerHTML),e}}];var h$=KR({doc:{content:"block+"},paragraph:{content:"inline*",group:"block",attrs:KR({},QU()),parseDOM:[{tag:"p",getAttrs:JU}],toDOM:function(t){return t$(t.attrs)?["p",e$(t.attrs),0]:["p",0]}},div:{content:"block*",group:"block",attrs:KR({},QU()),parseDOM:[{tag:"div",getAttrs:JU}],toDOM:function(t){return t$(t.attrs)?["div",e$(t.attrs),0]:["div",0]}},blockquote:{attrs:KR({},QU()),content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote",getAttrs:JU}],toDOM:function(t){return t$(t.attrs)?["blockquote",e$(t.attrs),0]:qU}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return WU}},heading:{attrs:KR(KR({},QU()),{level:{default:1}}),content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs:function(t){return KR(KR({},JU(t)),{level:1})}},{tag:"h2",getAttrs:function(t){return KR(KR({},JU(t)),{level:2})}},{tag:"h3",getAttrs:function(t){return KR(KR({},JU(t)),{level:3})}},{tag:"h4",getAttrs:function(t){return KR(KR({},JU(t)),{level:4})}},{tag:"h5",getAttrs:function(t){return KR(KR({},JU(t)),{level:5})}},{tag:"h6",getAttrs:function(t){return KR(KR({},JU(t)),{level:6})}}],toDOM:function(t){return t$(t.attrs,"level")?["h"+t.attrs.level,e$(t.attrs,["level"]),0]:["h"+t.attrs.level,0]}},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return XU}},text:{inline:!0,group:"inline"},image:{inline:!0,attrs:KR({src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}},QU()),group:"inline",draggable:!0,parseDOM:[{tag:"img",getAttrs:JU}],toDOM:function(t){return t$(t.attrs)?["img",e$(t.attrs)]:["img"]}},hard_break:{inline:!0,attrs:KR({},QU()),group:"inline",selectable:!1,parseDOM:[{tag:"br",getAttrs:JU}],toDOM:function(t){return t$(t.attrs)?["br",e$(t.attrs)]:["br"]}},ordered_list:{content:"list_item+",group:"block",attrs:KR(KR({},QU()),{type:{default:null},order:{default:1}}),parseDOM:[{tag:"ol",getAttrs:function(t){return KR(KR({},JU(t)),{order:t.hasAttribute("start")?parseInt(t.getAttribute("start")||"1",10):1})}}],toDOM:function(t){return 1===t.attrs.order?t$(t.attrs,"order")?["ol",e$(t.attrs,["order"]),0]:GU:["ol",KR(KR({},e$(t.attrs,["order"])),{start:t.attrs.order}),0]}},bullet_list:{content:"list_item+",group:"block",attrs:KR({},QU()),parseDOM:[{tag:"ul",getAttrs:JU}],toDOM:function(t){return t$(t.attrs)?["ul",e$(t.attrs),0]:KU}},list_item:{content:"(paragraph | heading) block*",attrs:KR({},QU()),parseDOM:[{tag:"li",getAttrs:JU}],toDOM:function(t){return t$(t.attrs)?["li",e$(t.attrs),0]:YU},defining:!0}},c$),u$=200,p$=function(){};p$.prototype.append=function(t){return t.length?(t=p$.from(t),!this.length&&t||t.length<u$&&this.leafAppend(t)||this.length<u$&&t.leafPrepend(this)||this.appendInner(t)):this},p$.prototype.prepend=function(t){return t.length?p$.from(t).append(this):this},p$.prototype.appendInner=function(t){return new f$(this,t)},p$.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?p$.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},p$.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},p$.prototype.forEach=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=this.length),e<=i?this.forEachInner(t,e,i,0):this.forEachInvertedInner(t,e,i,0)},p$.prototype.map=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=this.length);var r=[];return this.forEach((function(e,i){return r.push(t(e,i))}),e,i),r},p$.from=function(t){return t instanceof p$?t:t&&t.length?new d$(t):p$.empty};var d$=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,i){return 0==t&&i==this.length?this:new e(this.values.slice(t,i))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,i,r){for(var n=e;n<i;n++)if(!1===t(this.values[n],r+n))return!1},e.prototype.forEachInvertedInner=function(t,e,i,r){for(var n=e-1;n>=i;n--)if(!1===t(this.values[n],r+n))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=u$)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=u$)return new e(t.flatten().concat(this.values))},i.length.get=function(){return this.values.length},i.depth.get=function(){return 0},Object.defineProperties(e.prototype,i),e}(p$);p$.empty=new d$([]);var f$=function(t){function e(e,i){t.call(this),this.left=e,this.right=i,this.length=e.length+i.length,this.depth=Math.max(e.depth,i.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,i,r){var n=this.left.length;return!(e<n&&!1===this.left.forEachInner(t,e,Math.min(i,n),r))&&(!(i>n&&!1===this.right.forEachInner(t,Math.max(e-n,0),Math.min(this.length,i)-n,r+n))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,i,r){var n=this.left.length;return!(e>n&&!1===this.right.forEachInvertedInner(t,e-n,Math.max(i,n)-n,r+n))&&(!(i<n&&!1===this.left.forEachInvertedInner(t,Math.min(e,n),i,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var i=this.left.length;return e<=i?this.left.slice(t,e):t>=i?this.right.slice(t-i,e-i):this.left.slice(t,i).append(this.right.slice(0,e-i))},e.prototype.leafAppend=function(t){var i=this.right.leafAppend(t);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(t){var i=this.left.leafPrepend(t);if(i)return new e(i,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(p$);const g$=p$;class m${constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(0==this.eventCount)return null;let i,r,n=this.items.length;for(;;n--){if(this.items.get(n-1).selection){--n;break}}e&&(i=this.remapping(n,this.items.length),r=i.maps.length);let o,s,a=t.tr,l=[],c=[];return this.items.forEach(((t,e)=>{if(!t.step)return i||(i=this.remapping(n,e+1),r=i.maps.length),r--,void c.push(t);if(i){c.push(new y$(t.map));let e,n=t.step.map(i.slice(r));n&&a.maybeStep(n).doc&&(e=a.mapping.maps[a.mapping.maps.length-1],l.push(new y$(e,void 0,void 0,l.length+c.length))),r--,e&&i.appendMap(e,r)}else a.maybeStep(t.step);return t.selection?(o=i?t.selection.map(i.slice(r)):t.selection,s=new m$(this.items.slice(0,n).append(c.reverse().concat(l)),this.eventCount-1),!1):void 0}),this.items.length,0),{remaining:s,transform:a,selection:o}}addTransform(t,e,i,r){let n=[],o=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null;for(let i=0;i<t.steps.length;i++){let l,c=t.steps[i].invert(t.docs[i]),h=new y$(t.mapping.maps[i],c,e);(l=a&&a.merge(h))&&(h=l,i?n.pop():s=s.slice(0,s.length-1)),n.push(h),e&&(o++,e=void 0),r||(a=h)}let l=o-i.depth;return l>b$&&(s=function(t,e){let i;return t.forEach(((t,r)=>{if(t.selection&&0==e--)return i=r,!1})),t.slice(i)}(s,l),o-=l),new m$(s.append(n),o)}remapping(t,e){let i=new FF;return this.items.forEach(((e,r)=>{let n=null!=e.mirrorOffset&&r-e.mirrorOffset>=t?i.maps.length-e.mirrorOffset:void 0;i.appendMap(e.map,n)}),t,e),i}addMaps(t){return 0==this.eventCount?this:new m$(this.items.append(t.map((t=>new y$(t)))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let i=[],r=Math.max(0,this.items.length-e),n=t.mapping,o=t.steps.length,s=this.eventCount;this.items.forEach((t=>{t.selection&&s--}),r);let a=e;this.items.forEach((e=>{let r=n.getMirror(--a);if(null==r)return;o=Math.min(o,r);let l=n.maps[r];if(e.step){let o=t.steps[r].invert(t.docs[r]),c=e.selection&&e.selection.map(n.slice(a+1,r));c&&s++,i.push(new y$(l,o,c))}else i.push(new y$(l))}),r);let l=[];for(let t=e;t<o;t++)l.push(new y$(n.maps[t]));let c=this.items.slice(0,r).append(l).append(i),h=new m$(c,s);return h.emptyItemCount()>500&&(h=h.compress(this.items.length-i.length)),h}emptyItemCount(){let t=0;return this.items.forEach((e=>{e.step||t++})),t}compress(t=this.items.length){let e=this.remapping(0,t),i=e.maps.length,r=[],n=0;return this.items.forEach(((o,s)=>{if(s>=t)r.push(o),o.selection&&n++;else if(o.step){let t=o.step.map(e.slice(i)),s=t&&t.getMap();if(i--,s&&e.appendMap(s,i),t){let a=o.selection&&o.selection.map(e.slice(i));a&&n++;let l,c=new y$(s.invert(),t,a),h=r.length-1;(l=r.length&&r[h].merge(c))?r[h]=l:r.push(c)}}else o.map&&i--}),this.items.length,0),new m$(g$.from(r.reverse()),n)}}m$.empty=new m$(g$.empty,0);class y${constructor(t,e,i,r){this.map=t,this.step=e,this.selection=i,this.mirrorOffset=r}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new y$(e.getMap().invert(),e,this.selection)}}}class v${constructor(t,e,i,r){this.done=t,this.undone=e,this.prevRanges=i,this.prevTime=r}}const b$=20;function w$(t){let e=[];return t.forEach(((t,i,r,n)=>e.push(r,n))),e}function x$(t,e){if(!t)return null;let i=[];for(let r=0;r<t.length;r+=2){let n=e.map(t[r],1),o=e.map(t[r+1],-1);n<=o&&i.push(n,o)}return i}function S$(t,e,i,r){let n=A$(e),o=_$.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,n);if(!s)return;let a=s.selection.resolve(s.transform.doc),l=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,n),c=new v$(r?l:s.remaining,r?s.remaining:l,null,0);i(s.transform.setSelection(a).setMeta(_$,{redo:r,historyState:c}).scrollIntoView())}let k$=!1,C$=null;function A$(t){let e=t.plugins;if(C$!=e){k$=!1,C$=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){k$=!0;break}}return k$}const _$=new RR("history"),T$=new RR("closeHistory");function O$(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new IR({key:_$,state:{init:()=>new v$(m$.empty,m$.empty,null,0),apply:(e,i,r)=>function(t,e,i,r){let n,o=i.getMeta(_$);if(o)return o.historyState;i.getMeta(T$)&&(t=new v$(t.done,t.undone,null,0));let s=i.getMeta("appendedTransaction");if(0==i.steps.length)return t;if(s&&s.getMeta(_$))return s.getMeta(_$).redo?new v$(t.done.addTransform(i,void 0,r,A$(e)),t.undone,w$(i.mapping.maps[i.steps.length-1]),t.prevTime):new v$(t.done,t.undone.addTransform(i,void 0,r,A$(e)),null,t.prevTime);if(!1===i.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(n=i.getMeta("rebased"))?new v$(t.done.rebased(i,n),t.undone.rebased(i,n),x$(t.prevRanges,i.mapping),t.prevTime):new v$(t.done.addMaps(i.mapping.maps),t.undone.addMaps(i.mapping.maps),x$(t.prevRanges,i.mapping),t.prevTime);{let n=0==t.prevTime||!s&&(t.prevTime<(i.time||0)-r.newGroupDelay||!function(t,e){if(!e)return!1;if(!t.docChanged)return!0;let i=!1;return t.mapping.maps[0].forEach(((t,r)=>{for(let n=0;n<e.length;n+=2)t<=e[n+1]&&r>=e[n]&&(i=!0)})),i}(i,t.prevRanges)),o=s?x$(t.prevRanges,i.mapping):w$(i.mapping.maps[i.steps.length-1]);return new v$(t.done.addTransform(i,n?e.selection.getBookmark():void 0,r,A$(e)),m$.empty,o,i.time)}}(i,r,e,t)},config:t,props:{handleDOMEvents:{beforeinput(t,e){let i=e.inputType,r="historyUndo"==i?E$:"historyRedo"==i?M$:null;return!!r&&(e.preventDefault(),r(t.state,t.dispatch))}}}})}const E$=(t,e)=>{let i=_$.getState(t);return!(!i||0==i.done.eventCount)&&(e&&S$(i,t,e,!1),!0)},M$=(t,e)=>{let i=_$.getState(t);return!(!i||0==i.undone.eventCount)&&(e&&S$(i,t,e,!0),!0)};class P${constructor(t,e){var i;this.match=t,this.match=t,this.handler="string"==typeof e?(i=e,function(t,e,r,n){let o=i;if(e[1]){let t=e[0].lastIndexOf(e[1]);o+=e[0].slice(t+e[1].length),r+=t;let i=r-n;i>0&&(o=e[0].slice(t-i,t)+o,r=n)}return t.tr.insertText(o,r,n)}):e}}const I$=(t,e)=>{let i=t.plugins;for(let r=0;r<i.length;r++){let n,o=i[r];if(o.spec.isInputRules&&(n=o.getState(t))){if(e){let i=t.tr,r=n.transform;for(let t=r.steps.length-1;t>=0;t--)i.step(r.steps[t].invert(r.docs[t]));if(n.text){let e=i.doc.resolve(n.from).marks();i.replaceWith(n.from,n.to,t.schema.text(n.text,e))}else i.delete(n.from,n.to);e(i)}return!0}}return!1};new P$(/--$/,"—"),new P$(/\.\.\.$/,"…"),new P$(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),new P$(/"$/,"”"),new P$(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),new P$(/'$/,"’");var D$={mark:"strong",altMarks:["b"],altStyle:{name:"font-weight",value:/^(bold(er)?|[5-9]\d{2,})$/}},F$={mark:"em",altMarks:["i"],altStyle:{name:"font-style",value:/^italic$/i}},R$={mark:"u",altStyle:{name:"text-decoration",value:/^underline$/i}},L$={mark:"del",altStyle:{name:"text-decoration",value:/^line-through$/i}},N$={mark:"sub"},B$={mark:"sup"},j$={mark:"link"},z$="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),U$=function(t,e){var i={},r=e&&e.applyToWord||!1;if(i["Mod-z"]=E$,i["Shift-Mod-z"]=M$,i.Backspace=oN(I$,UL,$L,VL),i.Enter=oN(XL,YL,JL,QL),z$||(i["Mod-y"]=M$),t.marks.strong&&(i["Mod-b"]=iL(gL,KR(KR({},D$),{applyToWord:r}))),t.marks.em&&(i["Mod-i"]=iL(gL,KR(KR({},F$),{applyToWord:r}))),t.marks.u&&(i["Mod-u"]=iL(gL,KR(KR({},R$),{applyToWord:r}))),t.nodes.hard_break){var n=t.nodes.hard_break,o=oN(KL,(function(t,e){return e(t.tr.replaceSelectionWith(n.create()).scrollIntoView()),!0}));i["Shift-Enter"]=o}return i},$$=function(t){var e={};return t.nodes.list_item&&(e.Enter=wN(t.nodes.list_item)),e},H$=/style=['"]?[^'"]*?mso-list:\s*[a-zA-Z]+(\d+)\s[a-zA-Z]+(\d+)\s(\w+)/gi,V$=function(t){return/^MsoListParagraph/.test(t.className)},q$=function(t){var e=t.innerHTML;return e=(e=e.replace(/<!--(.|\s)*?-->/gi,"")).replace(/<\/?[^>]+?\/?>/gm,"")},W$=function(t,e){var i=document.createElement(t);return i.style.listStyleType=e,i},X$=function(t){var e=null;return/^\d/.test(t)||(e=(/^[a-z]/.test(t)?"lower-":"upper-")+(/^[ivxlcdm]/i.test(t)?"roman":"alpha")),e},G$=function(t,e){var i=[];Array.from(t).forEach((function(t){if(t.nodeType===Node.ELEMENT_NODE){var r=t;r.getAttribute("datalist")?(i.push(t),e.add(i)):V$(r)&&i.length?i.push(t):(i=[],"DIV"===r.nodeName?G$(r.children,e):"TABLE"===r.nodeName&&Array.from(r.querySelectorAll("td,th")).forEach((function(t){G$(t.children,e)})))}}))},K$=function(t){var e,i=t.innerHTML,r=function(t){return t.replace(/^(?:&nbsp;|[\u00a0\n\r\s])+/,"")};return i=i.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g," "),/^[\u2022\u00b7\u00a7\u00d8oØüvn][\u00a0 ]+/.test(i)?{tag:"ul",style:(e=r(q$(t)),/^[\u2022\u00b7\u00FC\u00D8\u002dv-]/.test(e)?null:/^o/.test(e)?"circle":"square")}:/^\s*\w+[\.\)][\u00a0 ]{2,}/.test(i)?{tag:"ol",style:X$(r(q$(t)))}:void 0},Y$=function(t){var e,i=t.nodeName.toLowerCase();t.firstChild&&t.firstChild.nodeType===Node.COMMENT_NODE&&t.removeChild(t.firstChild),1===t.childNodes.length?e=t.firstChild.nodeType===Node.TEXT_NODE?q$(t):t.firstChild.innerHTML.replace(/^\w+[\.\)](&nbsp;)+ /,""):(t.removeChild(t.firstChild),3===t.firstChild.nodeType&&/^[ivxlcdm]+\.$/i.test(t.firstChild.nodeValue)&&t.removeChild(t.firstChild),/^(&nbsp;|\s)+$/i.test(t.firstChild.innerHTML)&&t.removeChild(t.firstChild),e="p"!==i?"<"+i+">"+t.innerHTML+"</"+i+">":t.innerHTML),t.parentNode.removeChild(t);var r=document.createElement("li");return r.innerHTML=e,r},J$=function(t){var e=document.createElement("div");e.innerHTML=function(t){return t.replace(H$,(function(t,e,i){return'datalist="'+e+'" datalevel="'+i+'" '+t}))}(t);var i=new Set;return G$(e.children,i),i.forEach((function(t){return function(t){var e,i,r,n,o,s,a,l,c,h,u,p,d,f=-1,g={};for(l=0;l<t.length;l++){var m=(d={datalist:(c=t[l]).getAttribute("datalist"),datalevel:c.getAttribute("datalevel")}).datalist,y=K$(c);if(h=y&&y.tag){if(u=d.datalevel||parseFloat(c.style.marginLeft||0),d.datalevel||c.style.marginLeft){var v=h+m;g[u]||(g[u]={}),(!i||i<0)&&(i=u,r=m,n=(a=t.filter((function(t){return t.getAttribute("datalist")===String(r)})))[a.length-1],s=W$(h,y&&y.style),c.parentNode.insertBefore(s,c),f=u,g[u][v]=s),o=n===c,p=g[u][v],(u>f||!p)&&(p=W$(h,y&&y.style),g[u][v]=p,e.appendChild(p)),e=Y$(c),p.appendChild(e),o?i=f=-1:f=u}}else!e||o&&!V$(c)||(c.style.marginLeft&&(c.style.marginLeft=""),c.style.marginLeft&&(c.style.margin=""),e.appendChild(c))}}(t)})),e.innerHTML},Z$=function(t){t.ownerElement&&t.ownerElement.removeAttribute(t.name)},Q$=function(t){/^Mso/.test(t.value)&&Z$(t)},tH=/\s*;\s*/,eH=/\s*:\s*/,iH=function(t){var e,i,r=t.value.split(tH).filter((function(t){return Boolean(t)})),n=t.ownerElement.style,o="";r.forEach((function(t){var r;r=t.split(eH),e=r[0],i=r[1],void 0!==n[e]&&(o+=e+": "+i+"; ")})),(o=o.trim())?t.value=o:Z$(t)},rH=function(t,e){var i=t;if(e.convertMsLists&&(i=J$(i)),e.stripTags&&(i=function(t,e){return t.replace(new RegExp("<\\/?("+e+")(?:\\s[^>]*?)?>","gi"),"")}(i,e.stripTags)),e.attributes){var r=document.createElement("div");r.innerHTML=i,Array.from(r.querySelectorAll("*")).forEach((function(t){return function(t,e){if(t.nodeType===Node.ELEMENT_NODE){for(var i=t.attributes.length-1;i>=0;i--){var r=t.attributes[i];e[r.name]?e[r.name](r):e["*"]&&e["*"](r)}"SPAN"===t.nodeName&&0===t.attributes.length&&function(t){var e=t.parentNode;if(e){for(;t.firstChild;)e.insertBefore(t.firstChild,t);e.removeChild(t)}}(t)}}(t,e.attributes)})),i=r.innerHTML}return i};var nH=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/;new RegExp("(?:("+nH.source+"))([\\da-fA-F\\s]+)\\}","g"),new RR("highlight");var oH={southeast:{x:1,y:1},east:{x:1,y:0},south:{x:0,y:1},north:{x:0,y:-1},west:{x:-1,y:0},southwest:{x:-1,y:1},northwest:{x:-1,y:-1},northeast:{x:1,y:-1}},sH=Object.keys(oH),aH=new RR("image-resize"),lH=function(t,e,i){t.style[e]=i+"px"},cH=/[^\-]width:|[^\-]height:/,hH=/^.+$/,uH=function(){function t(t,e,i,r){this.activeHandle=t,this.dragging=e,this.rect=i,this.nodePosition=r}return t.prototype.apply=function(e){var i=e.getMeta(aH);return i?new t(i.activeHandle,i.setDragging,i.rect,i.nodePosition):this},t}(),pH=function(t,e,i){var r=e.target.getAttribute(UR);if(!r)return!1;var n=aH.getState(t.state);e.preventDefault();var o=t.state.tr;function s(e){!function(t,e,i){var r=aH.getState(t.state),n=r.rect,o=r.dragging,s=r.nodePosition,a=r.activeHandle;if(o&&n){var l=t.nodeDOM(s),c=oH[a],h=(e.clientX-o.startX)*c.x,u=(e.clientY-o.startY)*c.y,p=c.x?h+l.width:n.width,d=c.y?u+l.height:n.height;if(i.lockRatio&&c.x&&c.y){var f=Math.min(p/l.width,d/l.height),g=l.width*f,m=l.height*f;o.startX=e.clientX-(p-g)*c.x,o.startY=e.clientY-(d-m)*c.y,p=g,d=m}else o.startX=c.x?e.clientX:o.startX,o.startY=c.y?e.clientY:o.startY;lH(l,"width",p),lH(l,"height",d),n.top=l.offsetTop,n.left=l.offsetLeft,n.width=l.offsetWidth,n.height=l.offsetHeight;var y=l.nextElementSibling;y.style.width=n.width+"px",y.style.height=n.height+"px",y.style.top=n.top+"px",y.style.left=n.left+"px"}}(t,e,i)}return o.setMeta(aH,{setDragging:{startX:e.clientX,startY:e.clientY},activeHandle:r,rect:n.rect,nodePosition:n.nodePosition}),o.setMeta("addToHistory",!1),t.dispatch(o),e.view.addEventListener("mouseup",(function e(i){i.view.removeEventListener("mouseup",e),i.view.removeEventListener("mousemove",s),function(t){var e=aH.getState(t.state),i=e.rect,r=e.dragging,n=e.nodePosition;if(r&&i){var o=t.state.selection;if(o instanceof bR){var s=o.node.attrs,a=i.width,l=i.height,c=void 0;if(cH.test(s.style||"")){var h=JR(s.style,{style:"width",value:hH,newValue:a+"px"}),u=JR(h.style||"",{style:"height",value:hH,newValue:l+"px"}).style;c=KR(KR({},s),{style:u})}else c=KR(KR({},s),{width:a,height:l});var p=o.node.type.createAndFill(c);if(p){var d=t.state.tr;d.replaceWith(n,n+1,p),d.setSelection(bR.create(d.doc,n)),d.setMeta("commandName","image-resize"),d.setMeta("args",c),d.setMeta(aH,{setDragging:null,activeHandle:null,rect:i,nodePosition:n}),t.dispatch(d)}}}}(t)})),e.view.addEventListener("mousemove",s),!0},dH=function(t){return void 0===t&&(t={node:"image",lockRatio:!0}),new IR({key:aH,view:function(e){return{resize:function(){aH.getState(e.state).rect&&e.dispatch(e.state.tr.setMeta("resize",!0))},get window(){return e.dom.ownerDocument&&e.dom.ownerDocument.defaultView},attachResize:function(){var t=this.window;t&&(t.removeEventListener("resize",this.resize),t.addEventListener("resize",this.resize))},removeResize:function(){var t=this.window;t&&t.removeEventListener("resize",this.resize)},update:function(e,i){var r=e.state,n=r.selection,o=r.schema.nodes[t.node],s=aH.getState(r),a=s.rect;if(n instanceof bR&&o===n.node.type){var l=e.nodeDOM(n.from),c={top:l.offsetTop,left:l.offsetLeft,width:l.offsetWidth,height:l.offsetHeight};if(!i.selection.eq(n)||a&&(a.width!==c.width||a.height!==c.height||a.top!==c.top||a.left!==c.left)){var h=r.tr;h.setMeta(aH,{rect:c,nodePosition:n.from}),e.dispatch(h),this.attachResize()}}else a&&(s.rect=null,s.nodePosition=-1)},destroy:function(){this.removeResize()}}},state:{init:function(){return new uH("",null,null,-1)},apply:function(t,e){return e.apply(t)}},props:{handleDOMEvents:{mousedown:function(e,i){return pH(e,i,t)}},decorations:function(e){var i=e.selection,r=e.schema.nodes[t.node],n=aH.getState(e).rect;if(n&&i instanceof bR&&r===i.node.type){var o=document.createElement("div");o.className="k-editor-resize-handles-wrapper",o.style.width=n.width+"px",o.style.height=n.height+"px",o.style.top=n.top+"px",o.style.left=n.left+"px";for(var s=0;s<sH.length;s++){var a=document.createElement("div");a.className=jR+" "+sH[s],a.setAttribute(UR,sH[s]),o.appendChild(a)}return bz.create(e.doc,[mz.widget(e.selection.from+1,o)])}return bz.empty}}})};new RR("caret-color");var fH=function(){function t(t,e){this.node=t,this.view=e,this.dom=document.createElement("div"),this.dom.className="k-editor-resize-wrap-element",this.table=this.dom.appendChild(document.createElement("table")),t.attrs[NR]&&this.renderColgroup(t.attrs[NR]);var i=this.table.appendChild(document.createElement("tbody"));this.setAttributes(this.table,t.attrs),this.resizeHandles=sH.map((function(t){var e=document.createElement("span");return e.className=jR+" "+t,e.setAttribute(zR,t),e})),this.contentDOM=i}return t.prototype.update=function(t){var e=this;if(t.type!==this.node.type)return!1;var i=this.node;return this.node=t,t.attrs[BR]?this.resizeHandles.forEach((function(t){e.dom.appendChild(t)})):Array.from(this.dom.children).filter((function(t){return t.classList.contains(jR)})).forEach((function(t){return t.remove()})),this.setAttributes(this.table,t.attrs),i.attrs[NR]!==t.attrs[NR]&&this.renderColgroup(t.attrs[NR]),!0},t.prototype.ignoreMutation=function(t){return"attributes"===t.type&&(t.target===this.table||t.target.firstChild===this.table||this.colgroup&&this.colgroup.contains(t.target))},t.prototype.destroy=function(){this.node=void 0,this.view=void 0,this.table=void 0,this.colgroup=void 0,this.resizeHandles=void 0},t.prototype.renderColgroup=function(t){this.table&&this.table.firstChild&&"COLGROUP"===this.table.firstChild.nodeName&&this.table.removeChild(this.table.firstChild),t&&(this.colgroup=l$(t),this.table.insertBefore(this.colgroup,this.table.firstChild))},t.prototype.setAttributes=function(t,e){var i=[NR,BR];for(var r in e)if(r&&-1===i.indexOf(r)){var n=t.getAttribute(r),o=e[r];o&&o!==n?t.setAttribute(r,o):o||t.removeAttribute(r)}},t}(),gH=/^.+$/,mH=function(t){var e=(t||"").split(/\s*;\s*/).filter(Boolean).map((function(t){var e,i=t.split(/\s*:\s*/);return(e={})[i[0]]=i[1],e})).reduce((function(t,e){return KR(KR({},t),e)}),{});return e};function yH(t,e,i){var r;if(new RegExp("[^-]?"+e+":").test(t.style||"")){var n=JR(t.style||"",{style:e,value:gH,newValue:i}).style;r=KR(KR({},t),{style:n})}else r=t.style?KR(KR({},t),{style:t.style.replace(/;$/,"")+"; "+e+": "+i+";"}):KR(KR({},t),{style:e+": "+i+";"});return r}var vH=new RR("table-resize"),bH=new RR("table-column-resizing"),wH=new RR("table-row-resizing");function xH(t,e){var i=!1;return i=(i=(i=i||t!==vH&&Boolean(vH.get(e))&&vH.getState(e).dragging)||t!==bH&&Boolean(bH.get(e))&&bH.getState(e).dragging)||t!==wH&&Boolean(wH.get(e))&&wH.getState(e).dragging}function SH(t,e){var i=!1;return i=(i=i||t!==bH&&Boolean(bH.get(e))&&bH.getState(e).activeHandle>-1)||t!==wH&&Boolean(wH.get(e))&&wH.getState(e).activeHandle>-1}function kH(t){return t&&t.firstChild&&"TABLE"===t.firstChild.nodeName?t.firstChild:t}function CH(t){for(;t&&"TD"!==t.nodeName&&"TH"!==t.nodeName;)t=t.classList.contains("ProseMirror")?null:t.parentNode;return t}function AH(t){for(var e=function(t){var e=Array.from(t&&t.rows||[]),i=Array.from(e&&e[0]&&e[0].cells||[]).map((function(t){return t.colSpan})).reduce((function(t,e){return t+e}),0),r=e.map((function(){return new Array(i)}));return e.forEach((function(t,e){var i=0;Array.from(t.cells).forEach((function(t){for(var n=0;n<t.colSpan;n++){for(var o=0;o<t.rowSpan;o++){var s=r[e+o].findIndex((function(t,e){return e>=i&&!t}));r[e+o][s]=t}i++}}))})),r}(t.closest("table")),i=null,r=function(r){if(e[r].forEach((function(e,n){t===e&&(i={rowIndex:r,cellIndex:n})})),i)return"break"},n=0;n<e.length;n++){if("break"===r(n))break}return i||{rowIndex:-1,cellIndex:-1}}function _H(t,e){for(var i=t.depth;i>0;i--){var r=t.node(i);if(e(r))return{node:r,depth:i}}return null}function TH(t,e,i){var r=t.posAtCoords({left:e.clientX,top:e.clientY});if(!r)return-1;var n=t.state.doc.resolve(r.pos),o=_H(n,(function(t){return"table"===t.type.spec.tableRole}));if(null===o)return-1;var s=n.start(o.depth),a=o.node,l=Kz.get(a);return s+l.map[l.width*i.rowIndex+i.cellIndex]}function OH(){var t=fH,e=new IR({key:bH,state:{init:function(e,i){return this.spec.props.nodeViews[Qz(i.schema).table.name]=function(e,i){return new t(e,i)},new EH(-1,null)},apply:function(t,e){return e.apply(t)}},props:{attributes:function(t){return SH(bH,t)?null:bH.getState(t).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(t,e){return xH(bH,t.state)||function(t,e,i){var r=bH.getState(t.state);if(!r.dragging){var n=CH(e.target),o=-1;if(n){var s=AH(n),a=n.getBoundingClientRect(),l=a.left,c=a.right;Math.abs(e.clientX-l)<=i&&s.cellIndex>0?(s.cellIndex-=n.colSpan,o=TH(t,e,s)):c-e.clientX>0&&c-e.clientX<=i&&(o=TH(t,e,s))}o!==r.activeHandle&&PH(t,o)}}(t,e,5),!1},mouseleave:function(t){return function(t){var e=bH.getState(t.state);e.activeHandle>-1&&!e.dragging&&PH(t,-1)}(t),!1},mousedown:function(t,e){return function(t,e,i){var r,n=bH.getState(t.state);if(-1===n.activeHandle||n.dragging)return!1;for(var o=t.state.doc.resolve(n.activeHandle),s=o.parent,a=o.index(),l=0,c=0;c<=a;c++)l+=s.child(c).attrs.colspan;var h,u,p=o.node(o.depth-1),d=t.domAtPos(n.activeHandle),f=d.node.childNodes[d.offset].closest("table");if(p.attrs[NR]){(h=(m=f.firstChild).children[l-1]).style.width||(h.style.width=h.offsetWidth+"px")}else{var g=0;for(c=0;c<s.childCount;c++)g+=s.child(c).attrs.colspan;var m=document.createElement("colgroup"),y=new Array(g);for(c=0;c<g;c++)y[c]=document.createElement("col"),m.appendChild(y[c]);f.insertBefore(m,f.firstChild),(h=y[a]).style.width=h.offsetWidth+"px",u=KR(KR({},p.attrs),((r={})[NR]="<colgroup>"+y.reduce((function(t,e){return t+e.outerHTML}),"")+"</colgroup>",r))}var v=parseFloat(h.style.width),b=t.state.tr.setMeta(bH,{setDragging:{startX:e.clientX,startWidth:v}});if(!f.style.width){var w=Array.from(h.parentNode.children).map((function(t){return t.style.width}));if(w.every(Boolean)){var x=w.reduce((function(t,e){return t+parseFloat(e)}),0);u=yH(u||p.attrs,"width",x+"px")}}if(u){var S=o.posAtIndex(0,o.depth-1)-1;b.setNodeMarkup(S,null,u)}function k(e){e.view.removeEventListener("mouseup",k),e.view.removeEventListener("mousemove",C);var r=bH.getState(t.state);if(r.dragging){var n=t.state.tr;!function(t,e,i,r){var n,o=t.state.doc.resolve(i),s=o.node(-1),a=o.start(-1),l=o.posAtIndex(0,o.depth-1)-1,c=t.nodeDOM(a).closest("table"),h=s.attrs;if(s&&h[NR]){var u=c.firstChild;h=KR(KR({},h),((n={})[NR]=u.outerHTML,n))}var p=c.style.width;c&&p&&mH(h.style).width!==p&&(h=yH(h,"width",p));e.setNodeMarkup(l,null,h)}(t,n,r.activeHandle,MH(r.dragging,e,i)),t.dispatch(n.setMeta(bH,{setDragging:null}))}}function C(e){if(!e.which)return k(e);var r=bH.getState(t.state),n=MH(r.dragging,e,i);!function(t,e,i,r){var n=t.state.doc.resolve(e),o=n.node(-1),s=n.start(-1),a=Kz.get(o).colCount(n.pos-s)+n.nodeAfter.attrs.colspan-1,l=t.domAtPos(n.start(-1)).node;"TABLE"!==l.nodeName&&(l=l.closest("table"));var c=l,h=c.firstChild,u=Array.from(h.children);if(u[a].style.width=i+"px",c.style.width){var p=u.map((function(t){return t.style.width}));if(p.every(Boolean)){var d=p.reduce((function(t,e){return t+parseFloat(e)}),0);c.style.width=d+"px"}}}(t,r.activeHandle,n)}return t.dispatch(b),e.view.addEventListener("mouseup",k),e.view.addEventListener("mousemove",C),e.preventDefault(),!0}(t,e,25)}},decorations:function(t){if(!xH(bH,t)){var e=bH.getState(t);if(e.activeHandle>-1)return function(t,e){for(var i=[],r=t.doc.resolve(e),n=r.node(-1),o=Kz.get(n),s=r.start(-1),a=[],l=e-s,c=-1,h=0;h<o.height;h++)a.push(o.map.slice(h*o.width,h*o.width+o.width)),-1===c&&(c=a[h].lastIndexOf(l));var u=[];return a.forEach((function(t){var e=t[c];t[c]!==t[c+1]&&u.push(e)})),u.forEach((function(t){var e=s+t+n.nodeAt(t).nodeSize-1,r=document.createElement("div");r.className="column-resize-handle",i.push(mz.widget(e,r))})),bz.create(t.doc,i)}(t,e.activeHandle)}return bz.empty},nodeViews:{}}});return e}var EH=function(){function t(t,e){this.activeHandle=t,this.dragging=e}return t.prototype.apply=function(e){var i,r=this,n=e.getMeta(bH);if(n&&null!=n.setHandle)return new t(n.setHandle,null);if(n&&void 0!==n.setDragging)return new t(r.activeHandle,n.setDragging);if(r.activeHandle>-1&&e.docChanged){var o=e.mapping.map(r.activeHandle,-1);i=e.doc.resolve(o),Boolean("row"===i.parent.type.spec.tableRole&&i.nodeAfter)||(o=-1),r=new t(o,r.dragging)}return r},t}();function MH(t,e,i){var r=e.clientX-t.startX;return Math.max(i,t.startWidth+r)}function PH(t,e){var i=t.state.tr;i.setMeta("addToHistory",!1),i.setMeta(bH,{setHandle:e}),t.dispatch(i)}var IH={southeast:!0,southwest:!0,northwest:!0,northeast:!0},DH=KR({east:!0,west:!0},IH),FH=KR({south:!0,north:!0},IH),RH=function(){function t(t,e,i){this.activeHandle=t,this.dragging=e,this.nodePosition=i}return t.prototype.apply=function(e){var i=e.getMeta(vH);return i?new t(i.activeHandle,i.setDragging,i.nodePosition):this},t}(),LH=function(t){var e=Array.from(t.firstChild.children).map((function(t){return t.offsetWidth})),i=Array.from(t.rows).map((function(t){return t.offsetHeight})),r=e.reduce((function(t,e){return t+e}),0),n=i.reduce((function(t,e){return t+e}),0),o=t.offsetHeight;return{width:r,height:n,colsWidth:e,rowsHeight:i,offsetWidth:t.offsetWidth,offsetHeight:o}},NH=function(t){var e=vH.getState(t.state),i=e.dragging,r=e.nodePosition,n=e.activeHandle;if(i){var o=t.state.doc.nodeAt(r),s=kH(t.nodeDOM(r)),a=LH(s);if(o){var l=a.offsetWidth+"px",c=a.offsetHeight+"px",h=t.state.tr,u=o.attrs,p=mH(u.style);DH[n]&&s.style.width&&p.width!==l&&(u=yH(u,"width",l)),FH[n]&&s.style.height&&p.height!==c&&(u=yH(u,"height",c)),u=function(t,e,i,r){var n=t.state.doc.nodeAt(i),o=kH(t.nodeDOM(i)),s=(o.ownerDocument&&o.ownerDocument.defaultView||window).getComputedStyle,a=Array.from(o.rows);n.forEach((function(t,r,n){var o=mH(t.attrs.style).height;o&&!/px$/.test(o)&&e.setNodeMarkup(i+r+1,null,yH(t.attrs,"height",s(a[n]).height))}));var l=o.firstChild,c=Array.from(l&&l.children||[]),h=!1;c.forEach((function(t,e){t.style.width&&!/px$/.test(t.style.width)&&(t.style.width=s(c[e]).width,h=!0)}));var u=KR({},r);return h&&(u[NR]=l.outerHTML),u}(t,h,r,u),h.setNodeMarkup(r,null,u),h.setMeta("commandName","node-resize"),h.setMeta("args",u),h.setMeta(vH,{setDragging:null,activeHandle:null,nodePosition:r}),t.dispatch(h)}}},BH=function(t,e){var i=e.target.getAttribute(zR);if(!i)return!1;var r=vH.getState(t.state);e.preventDefault();var n=t.state.tr;n.setMeta(vH,{setDragging:{startX:e.clientX,startY:e.clientY},activeHandle:i,nodePosition:r.nodePosition}),n.setMeta("addToHistory",!1),function(t,e,i){var r=t.state.doc.nodeAt(i),n=kH(t.nodeDOM(i)),o=LH(n),s=o.width,a=o.height,l=o.colsWidth,c=o.rowsHeight,h=o.offsetWidth,u=o.offsetHeight,p=n.firstChild,d=Array.from(p&&p.children||[]),f=!1;d.forEach((function(t,e){t.style.width&&!/%$/.test(t.style.width)&&(t.style.width=100*l[e]/s+"%",f=!0)}));var g=!1;r.forEach((function(t,r,n){var o=mH(t.attrs.style).height;o&&!/%$/.test(o)&&(e.setNodeMarkup(i+r+1,null,yH(t.attrs,"height",100*c[n]/a+"%")),g=!0)}));var m=r.attrs;mH(m.style).width!==h+"px"&&(m=yH(m,"width",h+"px")),f&&(m[NR]=p.outerHTML),g&&(m=yH(m,"height",u+"px")),(f||g)&&e.setNodeMarkup(i,null,m)}(t,n,r.nodePosition),t.dispatch(n);var o=e.view||window;function s(e){!function(t,e){var i=vH.getState(t.state),r=i.dragging,n=i.nodePosition,o=i.activeHandle;if(!(n<0)&&r){var s=kH(t.nodeDOM(n)),a=s.getBoundingClientRect(),l=oH[o],c=(e.clientX-r.startX)*l.x,h=(e.clientY-r.startY)*l.y,u=(s.ownerDocument&&s.ownerDocument.defaultView||window).getComputedStyle(s),p=/px/.test(u.width)?parseFloat(u.width):s.offsetWidth,d=/px/.test(u.height)?parseFloat(u.height):s.offsetHeight,f=l.x?c+p:a.width,g=l.y?h+d:a.height;r.startX=l.x?e.clientX:r.startX,r.startY=l.y?e.clientY:r.startY,DH[o]&&(s.style.width=f+"px"),FH[o]&&(s.style.height=g+"px")}}(t,e)}return o.addEventListener("mouseup",(function e(i){o.removeEventListener("mouseup",e),o.removeEventListener("mousemove",s),NH(t)})),o.addEventListener("mousemove",s),!0},jH=function(t){return void 0===t&&(t={node:"table"}),new IR({key:vH,view:function(e){return{selectedNode:function(t,e){var i=t.selection;if(i instanceof bR&&e===i.node.type&&i instanceof bR)return{node:i.node,pos:i.from};var r=_H(i.$from,(function(t){return t.type===e})),n=r&&r.node;return n?{node:n,pos:i.$from.start(r.depth)-1}:null},update:function(e,i){var r,n,o,s,a,l=e.state,c=l.schema.nodes[t.node],h=this.selectedNode(l,c),u=this.selectedNode(i,c);if((h||!u||i.doc.eq(e.state.doc))&&(h||u)){var p=l.tr;p.setMeta("addToHistory",!1),h&&u&&h.pos!==u.pos?(p.setMeta(vH,{nodePosition:h.pos}),p.setNodeMarkup(u.pos,c,KR(KR({},u.node.attrs),((r={})[BR]=!1,r))),p.setNodeMarkup(h.pos,c,KR(KR({},h.node.attrs),((n={})[BR]=!0,n))),e.dispatch(p)):h&&u&&h.pos===u.pos&&!h.node.attrs[BR]&&!l.selection.eq(i.selection)?(p.setMeta(vH,{nodePosition:h.pos}),e.dispatch(p.setNodeMarkup(h.pos,c,KR(KR({},h.node.attrs),((o={})[BR]=!0,o))))):h&&!u?(p.setMeta(vH,{nodePosition:h.pos}),e.dispatch(p.setNodeMarkup(h.pos,c,KR(KR({},h.node.attrs),((s={})[BR]=!0,s))))):!h&&u&&(p.setMeta(vH,{nodePosition:-1}),e.dispatch(p.setNodeMarkup(u.pos,c,KR(KR({},u.node.attrs),((a={})[BR]=!1,a)))))}}}},state:{init:function(){return new RH("",null,-1)},apply:function(t,e){return e.apply(t)}},props:{handleDOMEvents:{mousedown:function(t,e){return BH(t,e)}}}})},zH=function(){function t(){}return t.prototype.ignoreMutation=function(t){return"attributes"===t.type&&"style"===t.attributeName&&"TR"===t.target.nodeName},t}();function UH(){var t=new IR({key:wH,state:{init:function(t,e){return this.spec.props.nodeViews[Qz(e.schema).row.name]=function(t,e){return new zH},new $H(-1,null)},apply:function(t,e){return e.apply(t)}},props:{attributes:function(t){return SH(wH,t)?null:wH.getState(t).activeHandle>-1?{class:"resize-cursor-vertical"}:null},handleDOMEvents:{mousemove:function(t,e){return xH(wH,t.state)||function(t,e,i){var r=wH.getState(t.state);if(!r.dragging){var n=CH(e.target),o=-1;if(n){var s=AH(n),a=n.getBoundingClientRect(),l=a.top,c=a.bottom;Math.abs(e.clientY-l)<=i&&s.rowIndex>0?(s.rowIndex-=n.rowSpan,o=TH(t,e,s)):c-e.clientY>0&&c-e.clientY<=i&&(o=TH(t,e,s))}o!==r.activeHandle&&HH(t,o)}}(t,e,5),!1},mouseleave:function(t){return function(t){var e=wH.getState(t.state);e.activeHandle>-1&&!e.dragging&&HH(t,-1)}(t),!1},mousedown:function(t,e){return function(t,e){var i=wH.getState(t.state);if(-1===i.activeHandle||i.dragging)return!1;var r=t.state.doc.resolve(i.activeHandle),n=r.parent,o=r.node(-1),s=mH(n.attrs.style).height,a=mH(o.attrs.style).height,l=s?parseFloat(s):0;if(!s){l=t.nodeDOM(i.activeHandle).offsetHeight}function c(e){e.view.removeEventListener("mouseup",c),e.view.removeEventListener("mousemove",h);var i=wH.getState(t.state);if(i.dragging){var r=t.state.tr.setMeta(wH,{setDragging:null});!function(t,e,i){var r=t.state.doc,n=r.resolve(i),o=n.parent,s=n.posAtIndex(0)-1,a=t.nodeDOM(s),l=a.ownerDocument&&a.ownerDocument.defaultView||window;a.style.height=l.getComputedStyle(a).height,e.setNodeMarkup(s,null,yH(o.attrs,"height",a.style.height));var c=a&&a.closest("table"),h=c&&c.style.height;if(h){var u=r.resolve(s),p=u.start(u.depth)-1;e.setNodeMarkup(p,null,yH(u.parent.attrs,"height",h))}}(t,r,i.activeHandle),t.dispatch(r)}}function h(e){if(!e.which)return c(e);var i=wH.getState(t.state),r=function(t,e){var i=e.clientY-t.startY;return t.startHeight.rowHeight+i}(i.dragging,e),n=e.clientY-i.dragging.startY;!function(t,e,i,r,n){var o=t.nodeDOM(e),s=o&&o.parentNode;if(s){s.style.height=i+"px";var a=s.ownerDocument&&s.ownerDocument.defaultView||window;s.style.height=a.getComputedStyle(s).height;var l=s.closest("table"),c=parseFloat(n)+r+"px",h=l&&l.style.height;h&&h!==c&&(l.style.height=parseFloat(n)+r+"px",l.style.height=a.getComputedStyle(l).height)}}(t,i.activeHandle,r,n,a)}return t.dispatch(t.state.tr.setMeta(wH,{setDragging:{startY:e.clientY,startHeight:{rowHeight:l,tableHeight:a}}})),e.view.addEventListener("mouseup",c),e.view.addEventListener("mousemove",h),e.preventDefault(),!0}(t,e)}},decorations:function(t){if(xH(wH,t))return bz.empty;var e=wH.getState(t);return e.activeHandle>-1?function(t,e){var i=[];if("number"!=typeof e)return bz.empty;for(var r=t.doc.resolve(e),n=r.node(-1),o=Kz.get(n),s=r.start(-1),a=[],l=e-s,c=-1,h=0;h<o.height;h++)a.push(o.map.slice(h*o.width,h*o.width+o.width)),-1!==a[h].indexOf(l)&&(c=h);var u=[];return a[c].forEach((function(t,e){a[c+1]&&t===a[c+1][e]||u.push(t)})),u.forEach((function(t){var e=n.nodeAt(t),r=s+t+(e?e.nodeSize:0)-1,o=document.createElement("div");o.className="row-resize-handle",i.push(mz.widget(r,o))})),bz.create(t.doc,i)}(t,e.activeHandle):void 0},nodeViews:{}}});return t}var $H=function(){function t(t,e){this.activeHandle=t,this.dragging=e}return t.prototype.apply=function(e){var i,r=this,n=e.getMeta(wH);if(n&&null!=n.setHandle)return new t(n.setHandle,null);if(n&&void 0!==n.setDragging)return new t(r.activeHandle,n.setDragging);if(r.activeHandle>-1){var o=e.mapping.map(r.activeHandle,-1);"row"===(i=e.doc.resolve(o)).parent.type.spec.tableRole&&i.nodeAfter||(o=null),r=new t(o,r.dragging)}return r},t}();function HH(t,e){var i=t.state.tr;i.setMeta("addToHistory",!1),i.setMeta(wH,{setHandle:e}),t.dispatch(i)}var VH=/^table$/,qH=/^table_row$/,WH=/^table_cell|table_header$/,XH=function(t,e){for(var i=t.$head,r=i.depth;r>0;r--){var n=i.node(r);if(e.test(n.type.name))return{pos:i.before(r),node:n}}return null},GH=function(t,e){var i=e&&function(t){var i,r=XH(t.selection,qH),n=XH(t.selection,VH);if(r&&n&&r.node.attrs[LR]){for(var o=0,s=0;s<n.node.nodeSize;s++)if(n.node.child(s).eq(r.node)){o=s;break}var a=n.node.child(o-1),l=r.pos-a.nodeSize;t.setNodeMarkup(l,void 0,((i={})[LR]=r.node.attrs[LR],i))}return e(t)};return function(t,e){if(!iU(t))return!1;if(e){let i=IU(t);e(RU(t.tr,i,i.top))}return!0}(t,i)},KH=function(t,e){var i=e&&function(t){var i,r=XH(t.selection,qH);if(r&&r.node.attrs[LR]){var n=r.pos+r.node.nodeSize;t.setNodeMarkup(n,void 0,((i={})[LR]=r.node.attrs[LR],i))}return e(t)};return function(t,e){if(!iU(t))return!1;if(e){let i=IU(t);e(RU(t.tr,i,i.bottom))}return!0}(t,i)},YH=function(t,e){if(!t)return-1;var i=Kz.get(t.node),r=XH(e,WH),n=i.map.indexOf(r.pos-t.pos-1),o=-1;return-1!==n&&(o=n%i.width),o},JH=function(t,e,i){var r,n=YH(e,t.selection),o=l$(e.node.attrs[NR]);o.insertBefore(o.ownerDocument.createElement("col"),o.children[n+i]),t.setNodeMarkup(e.pos,null,KR(KR({},e.node.attrs),((r={})[NR]=o.outerHTML,r)))},ZH=function(t,e){return function(t,e){if(!iU(t))return!1;if(e){let i=IU(t);e(DU(t.tr,i,i.left))}return!0}(t,e&&function(t){var i=XH(t.selection,VH);return i.node.attrs[NR]?(JH(t,i,-1),e(t)):e(t)})},QH=function(t,e){return function(t,e){if(!iU(t))return!1;if(e){let i=IU(t);e(DU(t.tr,i,i.right))}return!0}(t,e&&function(t){var i=XH(t.selection,VH);return i.node.attrs[NR]?(JH(t,i,1),e(t)):e(t)})},tV=function(t,e){var i=YH(XH(t.selection,VH),t.selection),r=e&&function(t){var r=XH(t.selection,VH);return r.node.attrs[NR]?(function(t,e,i){var r,n=l$(e.node.attrs[NR]);n.removeChild(n.children[i]),t.setNodeMarkup(e.pos,null,KR(KR({},e.node.attrs),((r={})[NR]=n.outerHTML,r)))}(t,r,i),e(t)):e(t)};return function(t,e){if(!iU(t))return!1;if(e){let i=IU(t),r=t.tr;if(0==i.left&&i.right==i.map.width)return!1;for(let t=i.right-1;FU(r,i,t),t!=i.left;t--)i.table=i.tableStart?r.doc.nodeAt(i.tableStart-1):r.doc,i.map=Kz.get(i.table);e(r)}return!0}(t,r)};function eV(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function iV(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?eV(Object(i),!0).forEach((function(e){rV(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):eV(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function rV(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var nV=t=>{for(var e,i={},r=t.attributes,n=0;n<r.length;n++)i[(e=r[n]).name]=e.value;return i},oV=(t,e)=>{var i={};for(var r in t)r&&null!==t[r]&&r!==e&&(i[r]=t[r]);return i},sV=()=>aV(["class","id","style"]),aV=t=>t.reduce(((t,e)=>iV(iV({},t),{},{[e]:{default:null}})),{});function lV(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function cV(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?lV(Object(i),!0).forEach((function(e){hV(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):lV(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function hV(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}h$.table.attrs.class={default:"k-table"};var uV=cV(cV({},h$),{},{video:{attrs:cV({src:{default:null},controls:{},poster:{default:null},width:{default:null},height:{default:null}},sV()),group:"block",content:"source*",draggable:!0,parseDOM:[{tag:"video",getAttrs:nV}],toDOM:t=>["video",oV(t.attrs),0]},audio:{attrs:cV({controls:{},src:{default:null},width:{default:null},height:{default:null}},sV()),group:"block",content:"source*",draggable:!0,parseDOM:[{tag:"audio",getAttrs:nV}],toDOM:t=>["audio",oV(t.attrs),0]},iframe:{attrs:cV({src:{},width:{default:null},height:{default:null}},sV()),group:"block",draggable:!0,parseDOM:[{tag:"iframe",getAttrs:nV}],toDOM:t=>["iframe",oV(t.attrs)]},source:{attrs:{src:{default:null},type:{default:null}},inline:!0,group:"inline",parseDOM:[{tag:"source",getAttrs:nV}],toDOM:t=>["source",t.attrs]}}),pV=new fF({nodes:uV,marks:r$});function dV(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function fV(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?dV(Object(i),!0).forEach((function(e){gV(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):dV(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function gV(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var mV=t=>(e,i)=>{AL(e,t)?CL(_N)(e,i):CL(t)(e,i)},yV={bold:()=>gL(D$),cleanFormatting:()=>function(t){var e=(void 0===t?{}:t).except,i=void 0===e?[]:e;return function(t,e){var r,n=t.tr;sL(n,{except:(r=i,r instanceof Array?r:[r])}),n.docChanged&&e(n)}}({except:pV.marks.link}),createLink:t=>vL({mark:"link",attrs:t}),fontFamily:t=>mL({style:"font-family",value:t.value}),fontSize:t=>mL({style:"font-size",value:t.value}),insertFile:t=>vL({mark:"link",attrs:t}),insertText:t=>{return e=t,function(t,i){i(t.tr.insertText(e.text,e.from,e.to))};var e},italic:()=>gL(F$),strikethrough:()=>gL(L$),subscript:()=>gL(N$),superscript:()=>gL(B$),underline:()=>gL(R$),unlink:()=>yL(j$),foreColor:t=>mL({style:"color",value:t.value}),backColor:t=>mL({style:"background-color",value:t.value})},vV={alignCenter:()=>mV(CN),alignJustify:()=>mV(AN),alignLeft:()=>mV(SN),alignRight:()=>mV(kN),format:t=>{return e=t.value,function(t,r){var n=wL(t),o=t.schema.nodes,s=t.tr;s.setMeta("commandName",i),s.setMeta("args",{value:e}),n.forEach((function(t){if(t.type.isTextblock)if("p"===e){var i=t.attrs,r=i.level,n=YR(i,["level"]);bL(s,t,o.paragraph,n)}else if(/^h[1-6]$/i.test(e))r=parseInt(e.substr(1),10),bL(s,t,o.heading,KR(KR({},t.attrs),{level:r}));else if("blockquote"===e){var a=t.attrs;r=a.level,n=YR(a,["level"]),bL(s,t,o.blockquote,n)}}));var a=s.docChanged;return a&&r(s.scrollIntoView()),a};var e,i},insertOrderedList:()=>bN,insertUnorderedList:()=>vN,outdent:()=>zL,indent:()=>jL,insertImage:t=>{return e=t,function(t,i){var r=t.schema.nodes.image.createAndFill(e);tL(r)(t,(function(t){return i(t.setMeta("commandName","insertImage").setMeta("args",e))}))};var e},redo:()=>M$,undo:()=>E$,setHtml:t=>GR(t.value,"setHTML",{preserveWhitespace:!1}),insertHtml:t=>(t=>(e,i)=>{var r=document.createElement("div");r.innerHTML=t.value;var n=mF.fromSchema(pV).parse(r,{topNode:t.inline?pV.nodes.paragraph.create():null});n&&n.firstChild&&i(e.tr.replaceSelectionWith(n.firstChild,!1))})(t)},bV={insertTable:t=>(t=>(e,i)=>{var r=function(t,e,i){for(var r,n=t.table,o=t.table_row,s=t.table_cell,a=[],l=0;l<e+1;l++){r=[];for(var c=0;c<i+1;c++)r.push(s.createAndFill());a.push(o.createAndFill(void 0,r))}return n.createAndFill(void 0,a)}(e.schema.nodes,t.rows,t.cols);r&&tL(r,!0)(e,i)})(t),addColumnBefore:()=>ZH,addColumnAfter:()=>QH,addRowBefore:()=>GH,addRowAfter:()=>KH,deleteRow:()=>NU,deleteColumn:()=>tV,mergeCells:()=>jU,splitCell:()=>zU,deleteTable:()=>HU},wV=fV(fV(fV({},yV),vV),bV),xV=(t,e)=>{var i=t.enabled===e.enabled,r=!0;return r=t.hasOwnProperty("selectedValue")?t.selectedValue===e.selectedValue:t.selected===e.selected,i&&r},SV=(t,e)=>{var i=[...dL(t,{name:e,value:/^.+$/})];return 1===i.length?i[0]:null},kV=t=>t.selection instanceof hU?null:function(t){return{tag:kL(t)||""}}(t).tag,CV=t=>({alignCenter:{selected:AL(t,CN),enabled:!0},alignJustify:{selected:AL(t,AN),enabled:!0},alignLeft:{selected:AL(t,SN),enabled:!0},alignRight:{selected:AL(t,kN),enabled:!0},bold:{selected:aL(t,D$),enabled:!0},cleanFormatting:{selected:!1,enabled:!t.selection.empty},format:{selectedValue:kV(t),enabled:!0},indent:{enabled:LL(t,pV.nodes.list_item)||BL(t,IL)},insertOrderedList:{selected:SL(t,pV.nodes.ordered_list),enabled:!0},insertUnorderedList:{selected:SL(t,pV.nodes.bullet_list),enabled:!0},italic:{selected:aL(t,F$),enabled:!0},unlink:{enabled:aL(t,j$)},outdent:{enabled:NL(t,DL)||RL(t,DL.nodes)},redo:{enabled:M$(t)},strikethrough:{selected:aL(t,L$),enabled:!0},style:{selected:hL(t,pV.marks.style),enabled:!0},fontFamily:{selectedValue:SV(t,"font-family"),enabled:!0},fontSize:{selectedValue:SV(t,"font-size"),enabled:!0},foreColor:{selectedValue:SV(t,"color"),enabled:!0},backColor:{selectedValue:SV(t,"background-color"),enabled:!0},subscript:{selected:aL(t,N$),enabled:!0},superscript:{selected:aL(t,B$),enabled:!0},underline:{selected:aL(t,R$),enabled:!0},undo:{enabled:E$(t)},createLink:{enabled:!t.selection.empty||aL(t,j$)},insertFile:{enabled:!t.selection.empty},insertImage:{enabled:!0},viewSource:{enabled:!0},insertTable:{enabled:!0},addColumnBefore:{enabled:ZH(t)},addColumnAfter:{enabled:QH(t)},addRowBefore:{enabled:GH(t)},addRowAfter:{enabled:KH(t)},deleteRow:{enabled:NU(t)},deleteColumn:{enabled:tV(t)},mergeCells:{enabled:jU(t)},splitCell:{enabled:zU(t)},deleteTable:{enabled:HU(t)}}),AV=t=>({createLink:()=>{var e=function(t,e){var i=cL(t,e),r=i.filter((function(t){return Boolean(t)}));return i.length===r.length?i[0]:void 0}(t.state,pV.marks.link);return{href:e?e.attrs.href:null,title:e?e.attrs.title:null,target:e?e.attrs.target:null}},insertImage:()=>{var e=function(t){if(t.selection instanceof bR)return t.selection.node}(t.state);return{src:e?e.attrs.src:null,alt:e?e.attrs.alt:null,width:e?e.attrs.width:null,height:e?e.attrs.height:null}},setHtml:()=>{return{value:(e=t.state,i=qR(e.doc),r=document.createElement("div"),r.appendChild(i),r.innerHTML)};var e,i,r}});function _V(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function TV(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?_V(Object(i),!0).forEach((function(e){OV(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):_V(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function OV(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var EV="iframe",MV="undefined"!=typeof window&&/Firefox/.test(window.navigator.userAgent);class PV extends V{constructor(t,e){super(t,e),OV(this,"options",{editMode:EV,debounceDelay:100}),OV(this,"initialize",(()=>{this.initContent(),this.initEditor()})),this.extendOptions(e),this.iframeEditMode=this.options.editMode===EV,this.iframe=this.element.querySelector(".k-iframe"),this.div=this.element.querySelector(".k-content"),this.toolbar=this.element.querySelector(".k-toolbar"),this.bindEvents(),MV&&!this.shouldInitialize()||this.initialize()}bindEvents(){MV&&this.iframeEditMode&&this.iframe.addEventListener("load",this.initialize,!0),this.toolbar.addEventListener("mousedown",this.onToolBarMouseDown)}unbindEvents(){MV&&this.iframeEditMode&&this.iframe.removeEventListener("load",this.initialize,!0),this.toolbar.removeEventListener("mousedown",this.onToolBarMouseDown)}shouldInitialize(){return!this.iframeEditMode||"complete"===(this.iframe.contentDocument||this.iframe.contentWindow.document).readyState}initEditor(){var t=this.options.debounceDelay,e=[new IR({view:()=>({update:()=>{this.updateToolBarState()}}),key:new RR("toolbar-tools-update-plugin")}),new IR({view:()=>({update:ji(this.valueChanged,t).bind(this)}),key:new RR("value-changed-plugin")}),O$(),BN($$(pV)),BN(U$(pV)),BN(hN),jH(),OH(),UH(),VU(),dH()];this.valueContainer=this.element.querySelector("textarea");var i=MR.create({schema:pV,plugins:e,doc:mF.fromSchema(pV).parse(this.valueContainer)});this.view=new zz({mount:this.content},{state:i,transformPastedHTML:t=>this.options.pasteSettings?this.executePasteCleanup(t):t}),this.value=this.view.dom.innerHTML}initContent(){this.content=this.iframeEditMode?this.setupIframe():this.setupDiv()}setupIframe(){var t=this.iframe.contentWindow.document,e=t.createElement("meta");e.setAttribute("charset","utf-8"),t.head.appendChild(e);var i=t.createElement("style");i.appendChild(t.createTextNode('\nhtml, body {\n    margin: 0;\n    height: 100%;\n    padding: 0;\n}\n\nhtml {\n  min-height: 100%;\n}\n\nbody {\n  box-sizing: border-box;\n  position: relative;\n  padding: 8px;\n}\n\n.ProseMirror-selectednode {\n  outline: 2px solid #8cf;\n}\n\ndiv.ProseMirror {\n  position: relative;\n  min-height: 100%;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\ndiv.ProseMirror:focus {\n  outline: none;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-hideselection *::selection { background: transparent; }\n.ProseMirror-hideselection *::-moz-selection { background: transparent; }\n.ProseMirror-hideselection { caret-color: transparent; }\n\n.ProseMirror li {\n  position: relative;\n}\n\nli.ProseMirror-selectednode {\n  outline: none;\n}\n\nli.ProseMirror-selectednode:after {\n  content: "";\n  position: absolute;\n  left: -32px;\n  right: -2px;\n  top: -2px;\n  bottom: -2px;\n  border: 2px solid #8cf;\n  pointer-events: none;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.k-editor-resize-handles-wrapper {\n  position: absolute;\n  visibility: hidden;\n}\n\n.k-editor-resize-handle {\n  position: absolute;\n  visibility: visible;\n  background-color: #fff;\n  border: 1px solid #000;\n  z-index: 100;\n  width: 5px;\n  height: 5px;\n}\n\n.k-editor-resize-handle.northwest {\n  top: 0;\n  left: 0;\n  transform: translate(-50%, -50%);\n  cursor: nw-resize;\n}\n\n.k-editor-resize-handle.north {\n  top: 0;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  cursor: n-resize;\n}\n\n.k-editor-resize-handle.northeast {\n  top: 0;\n  right: 0;\n  transform: translate(50%, -50%);\n  cursor: ne-resize;\n}\n\n.k-editor-resize-handle.southwest {\n  left: 0;\n  bottom: 0;\n  transform: translate(-50%, 50%);\n  cursor: sw-resize;\n}\n\n.k-editor-resize-handle.south {\n  bottom: 0;\n  left: 50%;\n  transform: translate(-50%, 50%);\n  cursor: s-resize;\n}\n\n.k-editor-resize-handle.southeast {\n  right: 0;\n  bottom: 0;\n  transform: translate(50%, 50%);\n  cursor: se-resize;\n}\n\n.k-editor-resize-handle.west {\n  top: 50%;\n  left: 0;\n  transform: translate(-50%, -50%);\n  cursor: w-resize;\n}\n\n.k-editor-resize-handle.east {\n  top: 50%;\n  right: 0;\n  transform: translate(50%, -50%);\n  cursor: e-resize;\n}\n\n.ProseMirror .tableWrapper {\n  overflow-x: auto;\n  margin: 1em 0;\n}\n\n.k-editor-resize-wrap-element {\n  display: inline-block;\n  position: relative;\n}\n\n.ProseMirror .row-resize-handle {\n  position: absolute;\n  right: 0; left: 0; bottom: 0;\n  transform: translate(0, 50%);\n  height: 4px;\n  z-index: 20;\n  background-color: #adf;\n  pointer-events: none;\n}\n\n.ProseMirror.resize-cursor-vertical {\n  cursor: sn-resize;\n  cursor: row-resize;\n}\n\n.k-editor-resize-wrap-element table td p,\n.k-editor-resize-wrap-element table th p {\n  margin: 0 auto;\n}\n\n.ProseMirror table {\n  margin: 0;\n  border-collapse: collapse;\n  table-layout: fixed;\n  width: 100%;\n  overflow: hidden;\n}\n\n.ProseMirror td, .ProseMirror th {\n  min-width: 1em;\n  border: 1px solid #ddd;\n  padding: 3px 5px;\n  vertical-align: top;\n  box-sizing: border-box;\n  position: relative;\n}\n\n.ProseMirror th {\n  font-weight: bold;\n  text-align: left;\n}\n\n.ProseMirror .column-resize-handle {\n  position: absolute;\n  right: -2px; top: 0; bottom: 0;\n  width: 4px;\n  z-index: 20;\n  background-color: #adf;\n  pointer-events: none;\n}\n\n.ProseMirror.resize-cursor {\n  cursor: ew-resize;\n  cursor: col-resize;\n}\n\n/* Give selected cells a blue overlay */\n.ProseMirror .selectedCell:after {\n  z-index: 2;\n  position: absolute;\n  content: "";\n  left: 0; right: 0; top: 0; bottom: 0;\n  background: rgba(200, 200, 255, 0.4);\n  pointer-events: none;\n}\n')),t.head.appendChild(i);var r=t.createElement("div");return t.body.appendChild(r),t.body.querySelector("div")}setupDiv(){return this.div}getDialogArgs(t){return AV(this.view)[t]()}exec(t){var e=t.commandName;wV[e](t)(this.view.state,this.view.dispatch,this.view),t.shouldFocusView&&this.view.focus()}focus(){this.view.focus()}setOptions(t){super.setOptions(t)}setValue(){GR(this.valueContainer.innerHTML)(this.view.state,this.view.dispatch),this.value=this.view.dom.innerHTML}updateToolBarState(){var{stateChanged:t,state:e}=((t,e)=>{var i=CV(t),r=Object.keys(e),n=!1;for(var o of r){var s=i[o],a=e[o];s&&a&&!xV(s,a)&&(n=!0,e[o]=s)}return{stateChanged:n,state:e}})(this.view.state,this.options.toolStates);t&&(this.options.toolStates=e,this.invokeToolBarUpdate(e))}onToolBarMouseDown(t){lt(t.target,".k-button",!0)&&t.preventDefault()}executePasteCleanup(t){var e=this.options.pasteSettings,i=this.getPasteCleanupAttributes(),r=function(t){return(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/^[\s\S]+?<!--StartFragment-->\s*([\s\S]*?)\s*<!--EndFragment-->[\s\S]+$/,"$1")).replace(/<\/?[ovw]:[^>]*?>/gi,"")).replace(/<\\?\??xml[^>]*>/gi,"")).replace(/<(?:link|meta) [^>]+?>/gi,"")).replace(/<style[^>]*?>\s*<\/style>/gi,"")).replace(/<\/?st1:.*?>/gi,"")).replace(/<a name="[a-zA-Z0-9_]+">/gim,"")).replace(/v:shapes?="[^"]+"/gi,"")).replace(/<!\[if !supportLists\]>/gi,"")).replace(/<!\[endif\]>/gi,"")}(t);return e.removeComments&&(r=function(t){return t.replace(/<!--[\s\S]+?-->/g,"")}(r)),rH(r,{convertMsLists:e.convertMsLists,stripTags:e.stripTags?e.stripTags.join("|"):[],attributes:i})}getPasteCleanupAttributes(){var t=this.options.pasteSettings,e={};return t.removeAllAttributes?{"*":Z$}:(t.removeMsStyles&&(e.style=iH),t.removeMsClasses&&(e.class=Q$),t.removeAttributes.reduce(((t,e)=>TV(TV({},t),{},{[e]:Z$})),e))}valueChanged(){(function(t,e,i,r){var n=_D.from(XR(t,i,r)),o=_D.from(XR(e,i,r));return n.eq(o)})(this.view.dom.innerHTML,this.value,pV)||(this.value=this.view.dom.innerHTML,this.invokeValueChanged())}invokeToolBarUpdate(t){this.invokeMethodAsync(this.options.jsinterop.updateToolBarState,t)}invokeValueChanged(){this.invokeMethodAsync(this.options.jsinterop.valueChanged,this.value)}destroy(){super.destroy(),this.unbindEvents(),this.view.destroy(),this.content=this.view=this.iframe=this.div=null}}function IV(t,e){Qt(PV,t,e)}function DV(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class FV extends V{constructor(t,e){super(t,e),DV(this,"options",{dotNetInstance:null,jsinterop:{}}),this.extendOptions(e)}focusEntryNameEditor(){rt((()=>{var t=this.element.querySelector(".k-listview-item.k-edit-item"),e=this.element.querySelector(".k-grid-edit-row"),i=t||e;if(d(i)){var r=pt(i);if(!d(r))return;y(r.select)&&r.select(),y(r.focus)&&r.focus()}}))}saveFile(t){var{fileName:e,dataUrl:i}=t;e&&i&&O(e,i)}}function RV(t,e){Qt(FV,t,e)}function LV(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var NV=D("filter-id"),BV="keydown",jV=".k-toolbar",zV=[ge.ARROWUP,ge.ARROWDOWN];class UV extends V{constructor(t,e){super(t,e),LV(this,"options",{dotNetInstance:null}),LV(this,"onKeyDown",(t=>{var e=Array.from(this.element.querySelectorAll(jV)),i=t.target&&tt("k-toolbar",t.target),r=this.element.querySelector(":focus"),n=[...e].indexOf(r),o=-1;if(t.key===ge.ARROWDOWN&&i)o=n+1;else if(t.key===ge.ARROWUP&&i)o=n-1;else if(t.key===ge.ENTER){if(i){var s=r.querySelector("\n    .k-filter-field,\n    .k-filter-operator,\n    .k-filter-value,\n    .k-filter-toolbar-item > .k-button,\n    .k-filter-toolbar-item > .k-button-group > .k-button");s&&s.focus&&s.focus()}}else if(t.key===ge.ESC){var a=r.closest(jV);a&&a.focus&&a.focus()}if(zV.includes(t.key)&&(t.preventDefault(),t.stopPropagation()),-1!==o){this.setTabIndices(e,o);var l=e[o];l&&l.focus&&l.focus()}})),this.setOptions(e)}setOptions(t){this.extendOptions(t),this.setTabIndices(this.element.querySelectorAll(jV),0),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(BV,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(BV,this.onKeyDown)}setTabIndices(t,e){t.forEach(((t,i)=>{var r=e===i?0:-1;t.setAttribute("tabindex",r)}))}restoreFocus(t){var e,i=this.element.querySelector(R(NV,t[0])).parentElement,r=yt(i)[0],n=mt(i)[0];if(r)e=r.querySelector(jV);else if(n)e=n.querySelector(jV);else{var o=i.parentElement.closest(".k-filter-item");o||(o=this.element),e=o.querySelector(jV)}e&&e.focus&&nt(e)}}function $V(t,e){Qt(UV,t,e)}function HV(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var VV="focus",qV="focusout";class WV extends V{constructor(t,e){super(t,e),HV(this,"options",{dotNetInstance:null}),HV(this,"onKeyDown",(t=>{this.invokeKeyDown(t)})),HV(this,"onFocus",(()=>{this.invokeFocus()})),HV(this,"onFocusOut",(()=>{this.invokeFocusOut()})),this.extendOptions(e),this.bindEvents(),this.initNavigationService()}bindEvents(){this.element.addEventListener(VV,this.onFocus),this.element.addEventListener(qV,this.onFocusOut)}unbindEvents(){this.element.removeEventListener(VV,this.onFocus),this.element.removeEventListener(qV,this.onFocusOut)}initNavigationService(){this.navigationService=new we(this.element),this.navigationService.bind("".concat(me.ALT," ").concat(ge.ARROWDOWN),this.onKeyDown)}destroy(){this.disableTabKeyTrap(),this.navigationService.destroy(),super.destroy()}enableTabKeyTrap(t){if(this.options.navigable){var e=K(t);this.formKeyTrap=new _e(e),this.formKeyTrap.enableKeyTrap()}}disableTabKeyTrap(){this.formKeyTrap&&this.formKeyTrap.disableTabKeyTrap()}focusParentHeader(){var t=this.element.closest("th.k-header");t&&t.focus()}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)}invokeFocus(){this.invokeMethodAsync(this.options.jsinterop.focus)}invokeFocusOut(){this.invokeMethodAsync(this.options.jsinterop.focusout)}}function XV(t,e){Qt(WV,t,e)}function GV(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var KV="focusin",YV="focusout",JV=":not(th):not(td):not([disabled]):not(.k-picker > .k-button):not(.k-spin-button > .k-button):not(.k-input-button)",ZV="input".concat(JV,", button").concat(JV,", [tabindex]").concat(JV),QV=".k-filtercell";class tq extends V{constructor(t,e){super(t,e),GV(this,"options",{dotNetInstance:null,navigable:null}),GV(this,"onFocusIn",(t=>{t.target&&t.target.closest(QV)&&this.enableTabKeyTrap()})),GV(this,"onFocusOut",(t=>{t.target&&t.relatedTarget&&!t.relatedTarget.closest(QV)&&this.disableTabKeyTrap()})),this.extendOptions(e),this.options.navigable&&this.bindEvents()}setOptions(t){this.options.navigable!==t.navigable&&(t.navigable?this.bindEvents():this.unbindEvents()),this.extendOptions(t)}bindEvents(){this.element.addEventListener(KV,this.onFocusIn),this.element.addEventListener(YV,this.onFocusOut)}unbindEvents(){this.element.removeEventListener(KV,this.onFocusIn),this.element.removeEventListener(YV,this.onFocusOut)}destroy(){this.disableTabKeyTrap(),this.unbindEvents(),super.destroy()}setTabIndices(t){Array.from(this.element.querySelectorAll(ZV)).forEach((e=>{e.setAttribute("tabindex",t)}))}enableTabKeyTrap(){this.tabKeyTrap=new Se(this.element,ZV),this.tabKeyTrap.enableKeyTrap(),this.setTabIndices(0)}disableTabKeyTrap(){this.tabKeyTrap&&(this.tabKeyTrap.disableTabKeyTrap(),this.setTabIndices(-1))}}function eq(t,e){Qt(tq,t,e)}function iq(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class rq extends V{constructor(t,e){super(t,e),iq(this,"options",{dotNetInstance:null,jsinterop:{}}),iq(this,"onTimeLineScroll",(()=>{this.timelineHeader.scrollLeft=this.timelineContent.scrollLeft,this.treeListContent.scrollTop=this.timelineContent.scrollTop})),iq(this,"onTreeListWheelFF",(t=>{this.onTreeListScroll(t,-40*t.detail)})),iq(this,"onTreeListWheel",(t=>{this.onTreeListScroll(t,t.wheelDelta)})),iq(this,"onTreeListScroll",((t,e)=>{if(this.timelineContent){var i=this.timelineContent.scrollTop-e;this.timelineContent.scrollTop=i}else{var r=this.treeListContent.scrollTop-e;this.treeListContent.scrollTop=r}t.preventDefault()})),this.extendOptions(e),this.timelineContent=this.element.querySelector(".k-gantt-timeline .k-grid-content"),this.timelineHeader=this.element.querySelector(".k-gantt-timeline .k-grid-header-wrap"),this.treeListContent=this.element.querySelector(".k-gantt-treelist .k-grid-content"),this.unifyFilterRowHeight(),this.setTreeListHeight(),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.timelineContent&&this.timelineContent.addEventListener("scroll",this.onTimeLineScroll),Te.firefox?this.treeListContent.addEventListener("DOMMouseScroll",this.onTreeListWheelFF):this.treeListContent.addEventListener("wheel",this.onTreeListWheel)}unbindEvents(){this.timelineContent&&this.timelineContent.removeEventListener("scroll",this.onTimeLineScroll),Te.firefox?this.treeListContent.removeEventListener("DOMMouseScroll",this.onTreeListWheelFF):this.treeListContent.removeEventListener("wheel",this.onTreeListWheel)}unifyFilterRowHeight(){var t=this.element.querySelector(".k-gantt-timeline .k-filter-row"),e=this.element.querySelector(".k-gantt-treelist .k-filter-row");e&&t&&(t.style.height="".concat(e.offsetHeight,"px"))}setTreeListHeight(){var t=this.element.querySelector(".k-gantt-treelist"),e=t.querySelector(".k-grid-header");this.treeListContent.style.height=t.offsetHeight-e.offsetHeight+"px"}}function nq(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class oq extends V{constructor(t,e){super(t,e),nq(this,"options",{dotNetInstance:null,messages:{start:"Start",end:"End"},jsinterop:{moveTask:"",updatePercentComplete:"",getDragTaskTooltipDates:"",createDependency:""}}),nq(this,"renderMoveHints",(()=>{this.moveTarget&&(this.destroyHint(),this.destroyTooltip(),this.hint=this.createHint(),this.tooltip=this.createTooltip(),this.tooltipContent=this.tooltip.querySelector(".k-tooltip-content"),this.getContentElement().appendChild(this.hint),this.getContentElement().appendChild(this.tooltip))})),nq(this,"createHint",(()=>{var t=document.createElement("div");t.className="k-marquee k-gantt-marquee",t.style.top="0px",t.style.height=this.getTablesWrapperElement().getBoundingClientRect().height+"px",t.style.left=this.originalLeft+"px",t.style.width=this.originalWidth+"px";var e=document.createElement("div");return e.className="k-marquee-color",t.appendChild(e),t})),nq(this,"destroyHint",(()=>{this.hint&&(this.hint.parentNode.removeChild(this.hint),this.hint=null)})),nq(this,"createTooltip",(()=>{var t=document.createElement("div");t.className="k-tooltip k-gantt-resize-hint",t.style.zIndex="100002",t.style.minWidth="160px";var e=document.createElement("div");return e.className="k-tooltip-content",t.appendChild(e),t})),nq(this,"destroyTooltip",(()=>{this.tooltip&&(this.tooltip.parentNode.removeChild(this.tooltip),this.tooltip=null,this.tooltipContent=null)})),nq(this,"renderPercentDragTooltip",(()=>{this.destroyPercentDragTooltip(),this.percentDragTooltip=this.createPercentDragTooltip(),this.element.appendChild(this.percentDragTooltip)})),nq(this,"createPercentDragTooltip",(()=>{var t=document.createElement("div");t.className="k-tooltip",t.style.zIndex="100002";var e=document.createElement("div");e.className="k-tooltip-content",t.appendChild(e);var i=document.createElement("div");return i.className="k-callout k-callout-s",t.appendChild(i),t})),nq(this,"destroyPercentDragTooltip",(()=>{this.percentDragTooltip&&(this.percentDragTooltip.parentNode.removeChild(this.percentDragTooltip),this.percentDragTooltip=null)})),nq(this,"renderDependencyDragHint",(()=>{this.destroyDependencyDragHint(),this.dependencyDragHint=this.createDependencyDragHint(),this.element.querySelector(".k-gantt-dependencies-svg").appendChild(this.dependencyDragHint)})),nq(this,"createDependencyDragHint",(()=>{var t=document.createElementNS("http://www.w3.org/2000/svg","polyline");return t.style.fill="none",t.style.stroke="black",t.style.strokeWidth="2",t})),nq(this,"destroyDependencyDragHint",(()=>{this.dependencyDragHint&&(this.dependencyDragHint.parentNode.removeChild(this.dependencyDragHint),this.dependencyDragHint=null)})),nq(this,"getContentElement",(()=>this.element.querySelector(".k-grid-content"))),nq(this,"getTablesWrapperElement",(()=>this.getContentElement().querySelector(".k-gantt-tables"))),nq(this,"getRowHeight",(()=>this.element.querySelector(".k-gantt-tables tr").getBoundingClientRect().height)),nq(this,"getMilestoneWidth",(()=>{var t=j('<div class="k-task-wrap k-milestone-wrap">\n                <div class="k-task k-task-milestone" >\n                </div>\n            </div>');this.getTablesWrapperElement().appendChild(t);var e=t.querySelector(".k-task").getBoundingClientRect().width;return t.parentNode.removeChild(t),e})),this.extendOptions(e),this.bindEvents(),this.createMovable()}destroy(){this.unbindEvents(),this.destroyMovable(),super.destroy()}bindEvents(){}unbindEvents(){}createMovable(){this.destroyMovable(),this.movable=new di({press:this.onMovableDragStart.bind(this),drag:this.onMovableDrag.bind(this),release:this.onMovableDrop.bind(this),mouseOnly:!0}),this.movable.bindTo(this.element)}destroyMovable(){this.movable&&this.movable.destroy&&this.movable.destroy(),this.moveTarget=null}onMovableDragStart(t){this.moveTarget=null,this.dragStarted=!1;var e=t.originalEvent.target;e&&(e.closest(".k-task")?this.onTaskDragStart(t):e.closest(".k-task-dot")?this.onDependencyDragStart(t):e.closest(".k-task-draghandle")&&this.onPercentDragStart(t))}onTaskDragStart(t){var e=t.originalEvent.target;this.moveTarget=e.closest(".k-task"),this.resizeTask=!0,this.resizeStart=Boolean(e.closest(".k-resize-w")),this.resizeEnd=Boolean(e.closest(".k-resize-e"));var i=this.moveTarget.getBoundingClientRect();this.originalLeft=this.currentLeft=i.left-this.getTablesWrapperElement().getBoundingClientRect().left,this.originalWidth=this.currentWidth=i.width,this.originalTaskMouseOffset=t.clientX-i.left}onDependencyDragStart(t){var e=t.originalEvent.target;this.moveTarget=e.closest(".k-task-dot");var i=this.moveTarget.getBoundingClientRect(),r=this.getTablesWrapperElement().getBoundingClientRect(),n=r.x,o=r.y;this.dependencyDragOptions={predecessorIndex:this.getTaskIndex(e),fromStart:tt("k-task-start",this.moveTarget),startX:i.x+i.width/2-n,startY:i.y+i.height/2-o}}onPercentDragStart(t){var e=t.originalEvent.target;this.moveTarget=e.closest(".k-task-draghandle");var i=this.moveTarget.parentElement.querySelector(".k-task");this.percentCompleteBarElement=i.querySelector(".k-task-complete");var r=i.getBoundingClientRect();this.maxPercentWidth=r.width,this.originalWidth=this.currentWidth=t.clientX-r.left,this.originalLeft=t.clientX}onMovableDrag(t){if(this.moveTarget)return this.dragStarted?void(this.resizeTask?this.onTaskDrag(t):this.dependencyDragOptions?this.onDependencyDrag(t):this.onPercentDrag(t)):(this.dragStarted=!0,void(this.resizeTask?this.renderMoveHints():this.dependencyDragOptions?this.renderDependencyDragHint():this.renderPercentDragTooltip()))}onTaskDrag(t){var e=t.clientX-this.getTablesWrapperElement().getBoundingClientRect().left;e<0&&(e=0),this.resizeStart?(this.currentLeft=e,this.currentLeft>this.originalLeft+this.originalWidth&&(this.currentLeft=this.originalLeft+this.originalWidth)):this.resizeEnd||(this.currentLeft=e-this.originalTaskMouseOffset),this.resizeStart?this.currentWidth=this.originalWidth+this.originalLeft-e:this.resizeEnd&&(this.currentWidth=e-this.originalLeft),this.currentWidth<0&&(this.currentWidth=0),this.invokeMethodAsync(this.options.jsinterop.getDragTaskTooltipDates,{start:this.currentLeft,end:this.currentLeft+this.currentWidth}).then((t=>{if(this.dragStarted){this.tooltipContent.innerHTML="<div>"+this.options.messages.start+": "+t.start+"</div><div>"+this.options.messages.end+": "+t.end+"</div>";var e=this.currentLeft-this.tooltip.getBoundingClientRect().width/2;this.resizeEnd&&(e+=this.currentWidth),e<0&&(e=0),this.tooltip.style.left=e+"px";var i=this.moveTarget.getBoundingClientRect().top-this.getTablesWrapperElement().getBoundingClientRect().top,r=this.tooltip.getBoundingClientRect().height;i-r<0?i+=this.moveTarget.getBoundingClientRect().height:i-=r,this.tooltip.style.top=i+"px",this.hint.style.left=this.currentLeft+"px",this.hint.style.width=this.currentWidth+"px"}}))}onDependencyDrag(t){var e=this.getTablesWrapperElement().getBoundingClientRect(),i=e.x,r=e.y;if(!this.dependencyDragOptions.startX){var n=this.moveTarget.getBoundingClientRect();this.dependencyDragOptions.startX=n.x+n.width/2-i,this.dependencyDragOptions.startY=n.y+n.height/2-r}var o=t.clientX-i,s=t.clientY-r;this.dependencyDragHint.setAttribute("points","".concat(this.dependencyDragOptions.startX,",").concat(this.dependencyDragOptions.startY," ").concat(o,",").concat(s))}onPercentDrag(t){var e=this.element.getBoundingClientRect(),i=this.moveTarget.parentElement.querySelector(".k-task").getBoundingClientRect(),r=this.percentDragTooltip.getBoundingClientRect(),n=this.originalWidth+(t.clientX-this.originalLeft);if(!(n<0||n>this.maxPercentWidth)){this.currentWidth=n;var o=Math.round(this.currentWidth/this.maxPercentWidth*100);this.moveTarget.style.left=this.currentWidth+"px",this.percentCompleteBarElement.style.width=this.currentWidth+"px",this.percentDragTooltip.querySelector(".k-tooltip-content").textContent=o+"%",this.percentDragTooltip.style.left=t.clientX-e.left-r.width/2+"px",this.percentDragTooltip.style.top=i.top-e.top-r.height-6+"px"}}onMovableDrop(t){if(this.destroyHint(),this.destroyTooltip(),this.destroyPercentDragTooltip(),this.destroyDependencyDragHint(),this.dragStarted)if(this.resizeTask)this.invokeMethodAsync(this.options.jsinterop.moveTask,{resizeStart:this.resizeStart,resizeEnd:this.resizeEnd,left:this.currentLeft,right:this.currentLeft+this.currentWidth});else if(this.dependencyDragOptions){var e=this.getElementUnderCursor(t);e.closest(".k-task-dot")&&this.invokeMethodAsync(this.options.jsinterop.createDependency,{predecessorIndex:this.dependencyDragOptions.predecessorIndex,fromStart:this.dependencyDragOptions.fromStart,successorIndex:this.getTaskIndex(e),toStart:tt("k-task-start",e.closest(".k-task-dot"))})}else{var i=Math.round(this.currentWidth/this.maxPercentWidth*100)/100;this.invokeMethodAsync(this.options.jsinterop.updatePercentComplete,i)}this.dragStarted=!1,this.moveTarget=null,this.resizeTask=this.resizeStart=this.resizeEnd=!1,this.dependencyDragOptions=null}getTaskIndex(t){return parseInt(t.closest(".k-task-wrap").getAttribute("data-index"))}getElementUnderCursor(t){return document.elementFromPoint(t.clientX,t.clientY)}}function sq(t,e){Qt(rq,t,e)}function aq(t,e){Qt(oq,t,e)}var lq=t=>"".concat(parseFloat(t),"px");class cq extends wE{constructor(t,e,i,r){super(t,e,i,r),this.extendOptions(e),this.initWidget()}getWidgetConstructor(){return bC}setOptions(t){super.setOptions(t),this.showCenterLabel()}getCenterLabel(){return this.element.querySelector(".k-arcgauge-label")}showCenterLabel(){var t=this.getCenterLabel();if(t){var e=this.getCenterLabelPosition();t.style.top=lq(e.top),t.style.left=lq(e.left),t.style.display=""}}getCenterLabelPosition(){var t=this.getCenterLabel(),e={top:0,left:0};if(t){var i=t.style.display;t.style.visibility="hidden",t.style.display="block",e=this.getLabelPositionFromGauge(),t.style.display=i,t.style.visibility=""}return e}getLabelPositionFromGauge(){var t=this.getCenterLabel(),e=t?t.offsetWidth:0,i=t?t.offsetHeight:0,r=this.widget.centerLabelPosition(e,i);return{top:r.top,left:r.left}}}function hq(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class uq extends mE{constructor(){super(...arguments),hq(this,"store",{}),hq(this,"loaded",!1),hq(this,"element",null)}reset(){this.loaded=!1}getThemeOptions(){return this.store}loadTheme(){this.loaded||(this.readTheme(),this.loaded=!0)}createElement(){var t=this.element=document.createElement("div");t.style.display="none",t.innerHTML='\n    <div class="k-var--gauge-pointer"></div>\n    <div class="k-var--gauge-track"></div>\n    <div class="k-var--normal-text-color"></div>\n',document.body.appendChild(t)}destroyElement(){this.element&&(document.body.removeChild(this.element),this.element=void 0)}readTheme(){this.createElement();try{var t=this.queryColor("gauge-pointer"),e=this.queryColor("gauge-track"),i=this.queryColor("normal-text-color");this.store={pointer:{color:t},scale:{labels:{color:i},rangePlaceholderColor:e,minorTicks:{color:i},majorTicks:{color:i},line:{color:i}}}}finally{this.destroyElement()}}setStyle(t,e){this.set(t,e)}queryColor(t){return this.queryStyle(t).backgroundColor}queryStyle(t){var e=this.element.querySelector(".k-var--".concat(t));return window.getComputedStyle(e)}}function pq(t){var{id:e="",widgetOptions:i={},componentOptions:r={},componentConstructor:n}=t;xE({id:e,widgetOptions:i,componentOptions:r,services:{themeService:new uq,intlService:ys},componentConstructor:n})}function dq(t,e,i){pq({id:t,widgetOptions:e,componentOptions:i,componentConstructor:cq})}class fq extends cq{getWidgetConstructor(){return xC}getCenterLabel(){return this.element.querySelector(".k-circulargauge-label")}}function gq(t,e,i){pq({id:t,widgetOptions:e,componentOptions:i,componentConstructor:fq})}class mq extends wE{constructor(t,e,i,r){super(t,e,i,r),this.extendOptions(e),this.initWidget()}getWidgetConstructor(){return Wk}}function yq(t,e,i){pq({id:t,widgetOptions:e,componentOptions:i,componentConstructor:mq})}class vq extends wE{constructor(t,e,i,r){super(t,e,i,r),this.extendOptions(e),this.initWidget()}getWidgetConstructor(){return uC}}function bq(t,e,i){pq({id:t,widgetOptions:e,componentOptions:i,componentConstructor:vq})}function wq(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class xq extends Ri{constructor(t,e){super(t,e),wq(this,"options",{dotNetInstance:null,rowDraggable:!1,draggedItemsHint:"",rowDraggableOptions:{allowDropOver:!1},dropOptions:{dropClueTargetSelector:".k-grid-content tr.k-master-row",dropClueEmptySelector:".k-grid-norecords",allowDropOver:!1,offsetDropClue:!1},componentSelector:".k-grid:not(.k-treelist)",jsinterop:{removeFocus:"",blur:"",rowDrop:""}}),this.extendOptions(e)}destroy(){super.destroy()}}function Sq(t,e){Qt(xq,t,e)}function kq(t){te(t)}function Cq(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Aq,_q="focusout";class Tq extends V{constructor(t,e){super(t,e),Cq(this,"options",{dotNetInstance:null,jsinterop:{focusout:""}}),Cq(this,"onFocusOut",(()=>{this.invokeMethodAsync(this.options.jsinterop.focusout)})),this.extendOptions(e),this.bindEvents()}bindEvents(){this.element.addEventListener(_q,this.onFocusOut)}destroy(){this.unbindEvents(),super.destroy()}unbindEvents(){this.element.removeEventListener(_q,this.onFocusOut)}focus(){this.element.focus()}}function Oq(t,e){Qt(Tq,t,e)}!function(t){t[t.Literal=0]="Literal",t[t.Mask=1]="Mask",t[t.Undefined=2]="Undefined"}(Aq||(Aq={}));var Eq=function(){function t(t,e,i){void 0===i&&(i=Aq.Undefined),this.value=t,this.rest=e,this.type=i}return t.prototype.map=function(e){return new t(e(this.value),this.rest)},t.prototype.chain=function(t){return t(this.value,this.rest)},t.prototype.fold=function(t,e){return t(this.value,this.rest)},t.prototype.concat=function(t){return this.map((function(e,i){return t.chain((function(t,i){return e.concat([t])}))}))},t.prototype.toString=function(){return"Result({ value: '"+this.value+"', rest: "+this.rest+" })"},t}(),Mq=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]),this.input=t,this.control=e,this.inputCursor=0,this.controlCursor=0}return t.prototype.eof=function(){return this.inputCursor>=this.input.length},t.prototype.next=function(){return{char:this.input[this.inputCursor++],control:this.control[this.controlCursor++]}},t.prototype.peek=function(){return{char:this.input[this.inputCursor],control:this.control[this.controlCursor]}},t.prototype.eat_input=function(){this.inputCursor++},t.prototype.eat_control=function(){this.controlCursor++},t.prototype.eat=function(){this.inputCursor++,this.controlCursor++},t}(),Pq=function(t){return(t||"").split("")},Iq=function(){function t(t){this.parse=t}return t.prototype.run=function(t,e){return void 0===e&&(e=""),t instanceof Mq?this.parse(t):this.parse(new Mq(Pq(t),Pq(e)))},t.prototype.map=function(e){var i=this;return new t((function(t){return i.parse(t).map(e)}))},t.prototype.chain=function(e){var i=this;return new t((function(t){return i.parse(t).chain((function(t,i){return e(t).run(i)}))}))},t.prototype.isLiteral=function(t){return this.run(t).type===Aq.Literal},t}(),Dq=function(t,e){return new Iq((function(i){var r=i.next().char,n=t[r];return"\\"===r?(r=i.next().char,new Eq(e.literal(r),i)):new Eq(n?e.mask(n):e.literal(r),i)}))},Fq=function(t){var e=t.prompt,i=t.promptPlaceholder;return new Iq((function(t){var r=t.next().char;return new Eq(r===e?i:r,t)}))},Rq=function(t){return new Iq((function(e){var i=e.next().char;return new Eq(t?i:"",e)}))},Lq=function(t){return t.reduce((function(t,e){return i=e,t.chain((function(t){return i.map((function(e){return t.concat([e])}))}));var i}),(e=[],new Iq((function(t){return new Eq(e,t)}))));var e},Nq=function(t){return new Iq((function(e){for(var i=new Eq([],e);!e.eof();)i=i.concat(t.run(e));return i}))},Bq=function(){function t(){this.rules={},this.prompt="_",this.mask="",this.promptPlaceholder=" ",this.includeLiterals=!1,this.maskTokens=[],this.unmaskTokens=[],this.rawTokens=[],this.validationTokens=[]}return t.prototype.update=function(t){var e=t.mask,i=void 0===e?"":e,r=t.prompt,n=void 0===r?"":r,o=t.promptPlaceholder,s=void 0===o?" ":o,a=t.rules,l=void 0===a?{}:a,c=t.includeLiterals,h=void 0!==c&&c;this.mask=i,this.prompt=n,this.promptPlaceholder=s,this.rules=l,this.includeLiterals=h,this.tokenize()},t.prototype.validationValue=function(t){void 0===t&&(t="");var e=t;return Lq(this.validationTokens).run(t).fold((function(t){e=t.join("")})),e},t.prototype.rawValue=function(t){void 0===t&&(t="");var e=t;return this.rawTokens.length?(Lq(this.rawTokens).run(t).fold((function(t){e=t.join("")})),e):e},t.prototype.maskRaw=function(t){void 0===t&&(t="");var e=t;return this.maskTokens.length?(Lq(this.maskTokens).run(t).fold((function(t){e=t.join("")})),e):e},t.prototype.maskInput=function(t,e,i){return t.length<e.length?this.maskRemoved(t,e,i):this.maskInserted(t,e,i)},t.prototype.maskInRange=function(t,e,i,r){var n="",o=r,s=e.split("").slice(0,i),a=e.split("").slice(r);return Lq(this.maskTokens.slice(i,r)).run(t).fold((function(t){n=s.concat(t).concat(a).join("")})),{selection:o,value:n}},t.prototype.maskRemoved=function(t,e,i){var r=this,n="",o=i,s=t.split("").slice(i),a=t.split("").slice(0,i).join(""),l=this.maskTokens.length-(t.length-i);return Lq(this.maskTokens.slice(0,l)).run(a,e).fold((function(t){o=r.adjustPosition(t,o),n=t.concat(s).join("")})),{selection:o,value:n}},t.prototype.adjustPosition=function(t,e){var i=t[e];return this.maskTokens[e].isLiteral(i)||i===this.prompt?e:e+1},t.prototype.maskInserted=function(t,e,i){var r=this,n="",o=i,s=t.slice(0,i);return Lq(this.unmaskTokens).run(s,e).chain((function(t){o=t.join("").length;var i=e.slice(o);return Lq(r.maskTokens).run(t.join("")+i,e)})).fold((function(t){n=t.join("")})),{selection:o,value:n}},Object.defineProperty(t.prototype,"maskTokenCreator",{get:function(){var t=this.prompt,e=this.promptPlaceholder;return{literal:function(t){return e=t,new Iq((function(t){return t.peek().char===e?(t.eat(),new Eq(e,t,Aq.Literal)):new Eq(e,t,Aq.Literal)}));var e},mask:function(i){return function(t){var e=t.prompt,i=t.promptPlaceholder;return function(t){return new Iq((function(r){for(;!r.eof();){var n=r.peek(),o=n.char,s=n.control;if(o===s&&s===e)return r.eat(),new Eq(e,r,Aq.Mask);if(t.test(o))return r.eat(),new Eq(o,r,Aq.Mask);if(o===i)return r.eat(),new Eq(e,r,Aq.Mask);r.eat_input()}return r.eat(),new Eq(e,r,Aq.Mask)}))}}({prompt:t,promptPlaceholder:e})(i)}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unmaskTokenCreator",{get:function(){var t=this;return{literal:function(t){return e=t,new Iq((function(t){return t.eof()?new Eq("",t):(t.peek().char===e&&t.eat(),new Eq(e,t))}));var e},mask:function(e){return(i=t.prompt,function(t){return new Iq((function(e){for(;!e.eof();){var r=e.peek(),n=r.char,o=r.control;if(n===i&&o===i)return e.eat(),new Eq(n,e);if(t.test(n))return e.eat(),new Eq(n,e);e.eat_input()}return e.eat(),new Eq("",e)}))})(e);var i}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rawTokenCreator",{get:function(){var t=this,e=t.prompt,i=t.promptPlaceholder,r=t.includeLiterals;return{literal:function(t){return Rq(r)},mask:function(t){return Fq({prompt:e,promptPlaceholder:i})}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validationTokenCreator",{get:function(){var t=this.prompt;return{literal:function(t){return Rq(!1)},mask:function(e){return Fq({prompt:t,promptPlaceholder:""})}}},enumerable:!1,configurable:!0}),t.prototype.tokenize=function(){var t=this;Nq(Dq(this.rules,this.maskTokenCreator)).run(this.mask).fold((function(e,i){t.maskTokens=e})),Nq(Dq(this.rules,this.unmaskTokenCreator)).run(this.mask).fold((function(e,i){t.unmaskTokens=e})),Nq(Dq(this.rules,this.rawTokenCreator)).run(this.mask).fold((function(e,i){t.rawTokens=e})),Nq(Dq(this.rules,this.validationTokenCreator)).run(this.mask).fold((function(e,i){t.validationTokens=e}))},t}();var jq=e.elementOffset,zq=e.limitValue,Uq=Nc,$q=Uc,Hq=th,Vq=function(){},qq="#000",Wq="#fff",Xq=function(){function t(t,e){void 0===e&&(e={}),this.element=t,this.lastMoveTime=0,this.resolveColors(e),this.options=Object.assign({scale:1,precision:1,samplingRate:200,smooth:!1!==e.smooth,color:qq,backgroundColor:Wq,strokeWidth:1,onChange:Vq,onDraw:Vq,onDrawEnd:Vq},e,{color:this.color,backgroundColor:this.backgroundColor}),this.pathOptions={stroke:{color:this.options.color,width:this.options.strokeWidth,lineCap:"round",lineJoin:"round"}},this.initSurface(),this.attachEvents()}return t.prototype.destroy=function(){this.detachEvents()},t.prototype.clear=function(){this.rootGroup.clear(),this.path=null},t.prototype.readThemeColors=function(){var t,e;if("undefined"!=typeof document){var i=this.element.closest(".k-signature")||this.element,r=i.ownerDocument.defaultView.getComputedStyle(i);t=r.color,e=r.backgroundColor}this.themeColor=t||this.themeColor||qq,this.themeBackgroundColor=e||this.themeBackgroundColor||Wq},t.prototype.resolveColors=function(t){this.readThemeColors(),this.color=t.color||(this.options||{}).color||this.themeColor,this.backgroundColor=t.backgroundColor||(this.options||{}).backgroundColor||this.themeBackgroundColor},Object.defineProperty(t.prototype,"isDrawing",{get:function(){return Boolean(this.points)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pathData",{get:function(){var t;return null===(t=this.path)||void 0===t?void 0:t.toString(3)},set:function(t){this.clear(),this.path=uu.parse(t,this.pathOptions),this.rootGroup.append(this.path)},enumerable:!1,configurable:!0}),t.prototype.loadImage=function(t,e){if(void 0===e&&(e=[]),t){var i=this.size,r=i[0],n=i[1],o=r/this.options.scale,s=n/this.options.scale,a=e[0]||6*o,l=e[1]||6*s,c=o/a,h=s/l,u=Math.min(c,h),p=new uA(t,new Uc([0,0],[a,l]));p.transform(Hq().scale(u,u)),this.clear(),this.rootGroup.append(p)}else this.clear()},t.prototype.exportImage=function(t){var e,i=this.size,r=i[0],n=i[1],o=r/this.options.scale,s=n/this.options.scale,a=(null==t?void 0:t.width)||6*o,l=(null==t?void 0:t.height)||6*s,c=a/o,h=l/s,u=Math.min(c,h),p=new $q([0,0],[a,l]),d=new ku({clip:hu.fromRect(p)}),f=new ku({transform:Hq().scale(u,u)}),g=hu.fromRect(p,{fill:{color:this.options.backgroundColor}});return d.append(g),d.append(f),(e=f.children).push.apply(e,this.rootGroup.children),function(t,e){var i={width:"800px",height:"600px",cors:"Anonymous"},r=t,n=t.clippedBBox();if(n){var o=n.getOrigin();(r=new ku).transform(th().translate(-o.x,-o.y)),r.children.push(t);var s=n.getSize();i.width=s.width+"px",i.height=s.height+"px"}var a=Object.assign(i,e),l=document.createElement("div"),c=l.style;c.display="none",c.width=a.width,c.height=a.height,document.body.appendChild(l);var h=new pw(l,a);h.suspendTracking(),h.draw(r);var u=h.image(),p=function(){h.destroy(),document.body.removeChild(l)};return u.then(p,p),u}(d,Object.assign({width:a,height:l},t))},t.prototype.resize=function(){this.surface.resize(!0)},t.prototype.setOptions=function(t){this.resolveColors(t),Object.assign(this.options,t,{color:this.color,backgroundColor:this.backgroundColor}),this.pathOptions.stroke.color=this.options.color,this.pathOptions.stroke.width=this.options.strokeWidth,this.path&&(this.path.options.set("stroke.color",this.options.color),this.path.options.set("stroke.width",this.options.strokeWidth)),this.background.options.set("fill.color",this.options.backgroundColor)},t.prototype.initSurface=function(){this.surface=bw.create(this.element,{type:"canvas"}),this.element.style.touchAction="none";var t=this.options.scale;this.rootGroup=new ku({transform:Hq().scale(t,t)});var e=this.element.offsetWidth||750,i=this.element.offsetHeight||250;this.size=[e,i],this.background=hu.fromRect(new $q([0,0],this.size),{fill:{color:this.options.backgroundColor}}),this.surface.draw(this.background),this.surface.draw(this.rootGroup)},t.prototype.attachEvents=function(){this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onDragStart=this.onDragStart.bind(this),this.element.addEventListener("pointerdown",this.onPointerDown),this.element.addEventListener("pointerup",this.onPointerUp),this.element.addEventListener("dragstart",this.onDragStart)},t.prototype.detachEvents=function(){this.element.removeEventListener("pointerdown",this.onPointerDown),this.detachPointerMove(),this.element.removeEventListener("pointerup",this.onPointerUp),this.element.removeEventListener("dragstart",this.onDragStart)},t.prototype.attachPointerMove=function(){this.element.addEventListener("pointermove",this.onPointerMove)},t.prototype.detachPointerMove=function(){this.element.removeEventListener("pointermove",this.onPointerMove)},t.prototype.touchPoint=function(t){var e=jq(this.element),i=t.pageX,r=t.pageY,n=1/this.options.scale;return new Uq(i-e.left,r-e.top).scale(n,n)},t.prototype.onDragStart=function(t){t.preventDefault()},t.prototype.onPointerDown=function(t){if(!this.options.readonly&&t.isPrimary&&function(t){return"number"!=typeof t.button||0===t.button}(t)){this.detachPointerMove(),this.attachPointerMove(),this.path||(this.path=new uu(this.pathOptions),this.rootGroup.append(this.path)),this.options.onDraw(),this.element.setPointerCapture(t.pointerId);var e=this.touchPoint(t);this.points=[e],this.path.moveTo(e)}},t.prototype.onPointerMove=function(t){if(this.points&&this.path&&t.isPrimary){var e=(new Date).getTime();if(!(e-this.lastMoveTime<1e3/zq(this.options.samplingRate,1,1e4))){this.lastMoveTime=e;var i=this.touchPoint(t),r=this.points[this.points.length-1],n=1/zq(this.options.precision,.01,100);i.distanceTo(r)<n||(this.points.push(i),this.path.lineTo(i))}}},t.prototype.onPointerUp=function(t){if(t.isPrimary&&this.path&&this.points&&!this.options.readonly){if(this.detachPointerMove(),this.options.smooth){var e=hu.curveFromPoints(this.points);this.path.paths.splice(this.path.paths.length-1,1,e)}this.points=null,this.options.onDrawEnd(),this.options.onChange(this.pathData)}},t}();function Gq(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class Kq extends V{constructor(t,e){super(t,e),Gq(this,"defaultRules",{"#":/[\d\s\+\-]/,"&":/[\S]/,0:/[\d]/,9:/[\d\s]/,"?":/[a-zA-Z\s]/,A:/[a-zA-Z0-9]/,C:/./,L:/[a-zA-Z]/,a:/[a-zA-Z0-9\s]/}),Gq(this,"options",{dotNetInstance:null,includeLiterals:!1,mask:"",prompt:"",promptPlaceholder:"",maskOnFocus:!1,rules:this.defaultRules,value:"",debounceDelay:150,jsinterop:{blur:"",updateValue:"",change:""}}),Gq(this,"state",{selection:[0,0],isPasted:!1,shouldFocusOnClick:!1,service:null,isFocused:!1,maskedValue:"",value:""}),Gq(this,"onFocus",(()=>{this.state.isFocused=!0,this.options.maskOnFocus&&this.isMaskEmpty()&&(this.updateInput(this.state.service.maskRaw(this.state.value)),this.setSelection(0,0)),this.invokeFocus()})),Gq(this,"onPaste",(t=>{var{selectionStart:e,selectionEnd:i}=t.target;i!==e&&(this.state.isPasted=!0,this.state.selection=[e,i])})),Gq(this,"onBlur",(()=>{this.state.isFocused=!1,this.state.shouldFocusOnClick=!1,this.options.maskOnFocus&&this.isMaskEmpty()&&this.updateInput(this.state.maskedValue),this.invokeBlur()})),Gq(this,"onClick",(()=>{if(this.state.isFocused&&!this.state.shouldFocusOnClick){this.state.shouldFocusOnClick=!0;var{selectionStart:t,selectionEnd:e}=this.element;t===e&&this.setFocusSelection()}})),Gq(this,"onInput",(t=>{var e,i=t.target.value,[r,n]=this.state.selection;if(!this.options.mask)return this.updateComponentValue(i),void(this.state.isPasted=!1);if(this.state.isPasted){this.state.isPasted=!1;var o=this.state.maskedValue.length-n,s=i.length-o;e=this.state.service.maskInRange(i.slice(r,s),this.state.maskedValue,r,n)}else e=this.state.service.maskInput(i,this.state.maskedValue,t.target.selectionStart);this.updateInput(e.value,e.selection),this.debounceUpdateComponentValue(e.value)})),this.extendOptions(e),this.bindEvents(),this.state.service=new Bq,this.updateService(),this.setValue(this.options.value),this.setInputDebounceCallback()}bindEvents(){this.element.addEventListener("blur",this.onBlur),this.element.addEventListener("input",this.onInput),this.element.addEventListener("focus",this.onFocus),this.element.addEventListener("click",this.onClick),this.element.addEventListener("paste",this.onPaste)}destroy(){this.unbindEvents(),super.destroy()}unbindEvents(){this.element.removeEventListener("blur",this.onBlur),this.element.removeEventListener("input",this.onInput),this.element.removeEventListener("focus",this.onFocus),this.element.removeEventListener("click",this.onClick),this.element.removeEventListener("paste",this.onPaste)}focus(){this.element.focus()}updateService(){this.state.service.update({includeLiterals:this.options.includeLiterals,mask:this.options.mask,prompt:this.options.prompt,promptPlaceholder:this.options.promptPlaceholder,rules:this.options.rules})}setOptions(t){var e=this.options.promptPlaceholder,i=this.options.includeLiterals;this.extendOptions(t),this.setInputDebounceCallback(),this.updateService(),this.setValue(this.options.value),e===this.options.promptPlaceholder&&i===this.options.includeLiterals||this.updateComponentValue(this.state.maskedValue)}updateComponentValue(t){this.options.mask&&!this.state.service.validationValue(t)?this.state.value="":this.state.value=this.state.service.rawValue(t),this.invokeUpdate(this.state.value)}setValue(t){if(this.state.value=t,this.options.mask){var e=this.state.service.maskRaw(this.state.value);this.updateInput(e)}else this.updateInput(this.state.value)}setFocusSelection(){var t=this.element.selectionStart,e=this.state.maskedValue?this.state.maskedValue.indexOf(this.options.prompt):0;e>=0&&e<t&&(this.state.selection=[e,e],this.setSelection())}updateInput(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;this.state.maskedValue=t;var i=this.shouldResetValue()?"":t;this.element.value=i,void 0!==e&&this.setSelection(e,e)}setSelection(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.selection[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.selection[1];this.state.isFocused&&this.element.setSelectionRange(t,e)}isMaskEmpty(){return this.state.service.maskRaw()===this.state.maskedValue}shouldResetValue(){return this.options.maskOnFocus&&!this.state.isFocused&&this.isMaskEmpty()}invokeBlur(){this.invokeMethodAsync(this.options.jsinterop.blur)}invokeFocus(){this.invokeMethodAsync(this.options.jsinterop.focus)}invokeUpdate(t){this.invokeMethodAsync(this.options.jsinterop.updateValue,t)}setInputDebounceCallback(){this.debounceUpdateComponentValue=ji(this.updateComponentValue,this.options.debounceDelay).bind(this)}}function Yq(t,e){Qt(Kq,t,e)}function Jq(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Zq="k-spinner-increase",Qq="k-spinner-decrease",tW=[fe.ARROWDOWN,fe.ARROWUP];class eW extends V{constructor(t,e){super(t,e),Jq(this,"options",{dotNetInstance:null,decimals:0,separator:"\\.",min:null,max:null,value:"",jsinterop:{blur:""}}),Jq(this,"onKeyDown",(t=>{tW.includes(t.keyCode)&&t.preventDefault()})),this.setOptions(e),this.upArrowElement=t.parentElement.getElementsByClassName(Zq)[0],this.downArrowElement=t.parentElement.getElementsByClassName(Qq)[0],this.bindEvents()}setOptions(t){this.extendOptions(t),this.element.value=this.options.value}bindEvents(){this.onKeyPress=this.onKeyPress.bind(this),this.onPaste=this.onPaste.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onBlur=this.onBlur.bind(this),this.element.addEventListener("keydown",this.onKeyDown),this.element.addEventListener("keypress",this.onKeyPress),this.element.addEventListener("paste",this.onPaste),this.element.addEventListener("blur",this.onBlur),this.upArrowElement&&this.upArrowElement.addEventListener("mousedown",this.onMouseDown),this.downArrowElement&&this.downArrowElement.addEventListener("mousedown",this.onMouseDown)}destroy(){this.unbindEvents(),super.destroy(),this.upArrowElement=null,this.downArrowElement=null}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown),this.element.removeEventListener("keypress",this.onKeyPress),this.element.removeEventListener("paste",this.onPaste),this.element.removeEventListener("blur",this.onBlur),this.upArrowElement&&this.upArrowElement.removeEventListener("mousedown",this.onMouseDown),this.downArrowElement&&this.downArrowElement.removeEventListener("mousedown",this.onMouseDown)}focus(){this.element.focus()}onKeyPress(t){var e=String.fromCharCode(t.which);this.isValid(e)||t.keyCode===fe.ENTER||t.preventDefault()}onPaste(t){this.isValid(t.clipboardData.getData("text/plain").trim())||t.preventDefault()}onMouseDown(t){t.preventDefault(),document.activeElement!==this.element&&this.element.focus()}onBlur(){var t=this.options.jsinterop.blur;this.invokeMethodAsync(t)}numericRegex(){var t=this.options.separator,e=this.options.decimals,i="{0,"+e+"}";return e?new RegExp("^(-)?(((\\d+(["+t+"]\\d"+i+")?)|(["+t+"]\\d"+i+")))?$"):/^(-)?(\d*)$/}caret(){return[this.element.selectionStart,this.element.selectionEnd]}isValid(t){var e=this.element.value,i=this.caret();return e=e.substring(0,i[0])+t+e.substring(i[1]),!!this.numericRegex().test(e)}}function iW(t,e){Qt(eW,t,e)}function rW(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class nW extends V{constructor(t,e){super(t,e),rW(this,"options",{dotNetInstance:null,jsinterop:{blur:""}}),this.extendOptions(e),this.bindEvents()}bindEvents(){this.onBlur=this.onBlur.bind(this),this.element.addEventListener("blur",this.onBlur)}destroy(){this.unbindEvents(),super.destroy()}unbindEvents(){this.element.removeEventListener("blur",this.onBlur)}focus(){this.element.focus()}onBlur(){var t=this.options.jsinterop.blur;this.invokeMethodAsync(t)}}function oW(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var sW="input",aW="keydown";class lW extends nW{constructor(t,e){super(t,e),oW(this,"options",{autoSize:!1,debounceDelay:150,jsinterop:{updateValue:""}}),this.setOptions(e),this.resize()}destroy(){super.destroy()}bindEvents(){super.bindEvents(),this.onInput=this.onInput.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.element.addEventListener(sW,this.onInput),this.element.addEventListener(aW,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(sW,this.onInput),this.element.removeEventListener(aW,this.onKeyDown),super.unbindEvents()}setOptions(t){this.extendOptions(t),this.debounceChangeValue=ji(this.changeValue,this.options.debounceDelay).bind(this)}onInput(){this.resize(),this.debounceChangeValue()}onKeyDown(t){t.keyCode===fe.ENTER&&t.stopPropagation()}setValue(t){this.element.value=t,this.resize()}resize(){if(this.options.autoSize){var t,e=this.element;e.style.height="",e.style.height=(t=e.scrollHeight,"".concat(t,"px"))}}changeValue(){this.element&&this.invokeMethodAsync(this.options.jsinterop.updateValue,this.element.value)}}function cW(t,e){Qt(lW,t,e)}function hW(t,e){Qt(nW,t,e)}function uW(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class pW extends V{constructor(t,e){super(t,e),uW(this,"options",{dotNetInstance:null,jsinterop:{onSpaceKeyDown:""}}),uW(this,"onSpaceKeyDown",(()=>(this.invokeMethodAsync(this.options.jsinterop.onSpaceKeyDown),!1))),this.extendOptions(e),this.initNavigationService()}destroy(){this.navigationService.destroy(),super.destroy()}focus(){this.element.focus()}initNavigationService(){this.navigationService=new we(this.element),this.navigationService.bind(ge.SPACE,this.onSpaceKeyDown)}}function dW(t,e){Qt(pW,t,e)}function fW(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class gW extends V{constructor(t,e){super(t,e),fW(this,"snapValue",(t=>{var e=pe(t-this.options.min,this.options.smallStep)+this.options.min;return ue(e,this.options.min,this.options.max)})),this.extendOptions(e),this.sliderTrack=this.element.querySelector(".k-slider-track-wrap"),this.throttleChangeValue=zi(this.invokeChangeValue,150).bind(this)}eventValue(t){var e=this.calculatePercentageValue(t),i=this.convertToValue(e);return this.snapValue(i)}calculatePercentageValue(t){var e=this.sliderTrack.getBoundingClientRect();return"vertical"===this.options.orientation?100-(t.clientY-e.top)/e.height*100:(t.clientX-e.left)/e.width*100}convertToValue(t){return this.options.min+t*(this.options.max-this.options.min)/100}convertToPercentage(t){return(t-this.options.min)/(this.options.max-this.options.min)*100}setSliderEnd(t){this.endValue=t,this.element&&this.element.style.setProperty("--kendo-slider-end",this.convertToPercentage(t))}setSliderStart(t){this.startValue=t,this.element&&this.element.style.setProperty("--kendo-slider-start",this.convertToPercentage(t))}invokeChangeValue(t){var{isChangeCommitted:e}=t,i=this.options.jsinterop.changeValue;if(this.dotNetInstance&&this.dotNetInstance.invokeMethodAsync&&i){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return this.dotNetInstance.invokeMethodAsync(i,...n,e)}}}function mW(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var yW=[ge.ARROWUP,ge.ARROWDOWN,ge.ARROWLEFT,ge.ARROWRIGHT,ge.PAGE_UP,ge.PAGE_DOWN,ge.HOME,ge.END];class vW extends gW{constructor(t,e){super(t,e),mW(this,"onDragStart",(()=>{Q("k-slider-transitions",this.element)})),mW(this,"onDrag",(t=>{var e=this.eventValue(t);this.setSliderEnd(e),this.throttleChangeValue({isChangeCommitted:!1},this.endValue)})),mW(this,"onDragEnd",(()=>{this.changeValue(this.endValue),Z("k-slider-transitions",this.element)})),mW(this,"onClick",(t=>{var e=this.eventValue(t);e!==this.endValue&&this.changeValue(e),this.dragHandle.focus()})),mW(this,"onNavigate",(t=>{this.invokeNavigate(t.name)})),this.extendOptions(e),this.dragHandle=this.element.querySelector(".k-draghandle"),this.endValue=this.options.value,this.bindEvents(),Z("k-slider-transitions",this.element)}destroy(){this.unbindEvents(),super.destroy()}setOptions(t){super.setOptions(t),tt("k-slider-transitions")||Z("k-slider-transitions",this.element)}bindEvents(){this.initDraggable(),this.initNavigationService(),this.sliderTrack.addEventListener("click",this.onClick)}unbindEvents(){this.draggable.destroy(),this.navigationService.destroy(),this.sliderTrack.removeEventListener("click",this.onClick)}initDraggable(){this.draggable=new bi(this.element,{filter:".k-draghandle",events:{dragStart:this.onDragStart,drag:this.onDrag,dragEnd:this.onDragEnd}})}initNavigationService(){this.navigationService=new we(this.dragHandle),this.navigationService.bind(yW,this.onNavigate)}changeValue(t){var e=null===t?this.options.min:t;this.setSliderEnd(Math.max(e,this.options.min)),this.invokeChangeValue({isChangeCommitted:!0},this.endValue)}invokeNavigate(t){this.invokeMethodAsync(this.options.jsinterop.navigate,t).then((t=>this.setSliderEnd(t)))}}function bW(t,e){Qt(vW,t,e)}function wW(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var xW=[ge.ARROWUP,ge.ARROWDOWN,ge.ARROWLEFT,ge.ARROWRIGHT,ge.PAGE_UP,ge.PAGE_DOWN,ge.HOME,ge.END];class SW extends gW{constructor(t,e){super(t,e),wW(this,"onStartHandleDrag",(t=>{var e=this.eventValue(t);e>this.endValue&&this.setSliderEnd(e),this.setSliderStart(e),this.throttleChangeValue({isChangeCommitted:!1},this.startValue,this.endValue)})),wW(this,"onEndHandleDrag",(t=>{var e=this.eventValue(t);e<this.startValue&&this.setSliderStart(e),this.setSliderEnd(e),this.throttleChangeValue({isChangeCommitted:!1},this.startValue,this.endValue)})),wW(this,"onDragEnd",(()=>{this.changeValue(this.startValue,this.endValue)})),wW(this,"onClick",(t=>{var e=this.eventValue(t);e<=this.startValue||e<(this.startValue+this.endValue)/2?(e!==this.startValue&&this.changeValue(e,this.endValue),this.startHandle.focus()):(e>=this.endValue||e>=(this.startValue+this.endValue)/2)&&(e!==this.endValue&&this.changeValue(this.startValue,e),this.endHandle.focus())})),wW(this,"onStartHandleNavigate",(t=>{this.invokeMethodAsync(this.options.jsinterop.startNavigate,t.name).then((t=>{this.setSliderStart(t.startValue),this.setSliderEnd(t.endValue)}))})),wW(this,"onEndHandleNavigate",(t=>{this.invokeMethodAsync(this.options.jsinterop.endNavigate,t.name).then((t=>{this.setSliderStart(t.startValue),this.setSliderEnd(t.endValue)}))})),this.startHandle=this.element.querySelector(".k-draghandle-start"),this.endHandle=this.element.querySelector(".k-draghandle-end"),this.startValue=this.options.startValue,this.endValue=this.options.endValue,this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.startHandle=this.endHandle=null}setOptions(t){super.setOptions(t),this.startValue=this.options.startValue,this.endValue=this.options.endValue}bindEvents(){this.initDraggable(),this.initNavigationService(),this.sliderTrack.addEventListener("click",this.onClick)}unbindEvents(){this.destroyDraggable(),this.destroyNavigationService(),this.sliderTrack.removeEventListener("click",this.onClick)}initDraggable(){this.startDraggable=new bi(this.element,{filter:".k-draghandle-start",events:{drag:this.onStartHandleDrag,dragEnd:this.onDragEnd}}),this.endDraggable=new bi(this.element,{filter:".k-draghandle-end",events:{drag:this.onEndHandleDrag,dragEnd:this.onDragEnd}})}destroyDraggable(){this.startDraggable.destroy(),this.endDraggable.destroy()}initNavigationService(){this.startNavigationService=new we(this.startHandle),this.endNavigationService=new we(this.endHandle),this.startNavigationService.bind(xW,this.onStartHandleNavigate),this.endNavigationService.bind(xW,this.onEndHandleNavigate)}destroyNavigationService(){this.startNavigationService.destroy(),this.endNavigationService.destroy()}changeValue(t,e){var i=null===t?this.options.min:t,r=null===e?this.options.min:e;this.setSliderStart(Math.max(i,this.options.min)),this.setSliderEnd(Math.max(r,this.options.min,i)),this.invokeChangeValue({isChangeCommitted:!0},this.startValue,this.endValue)}}function kW(t,e){Qt(SW,t,e)}function CW(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var AW=[ge.ENTER,ge.SPACE,ge.HOME,ge.END,ge.ARROWDOWN,ge.ARROWUP,ge.ARROWLEFT,ge.ARROWRIGHT],_W=".k-child-animation-container";class TW extends V{constructor(t,e){super(t,e),CW(this,"onEscapeKey",(t=>{var e=document.activeElement;return!e||!e.closest(".k-menu-popup")||(this.invokeKeyDown(t),!1)})),CW(this,"onKeyDown",(t=>{this.invokeKeyDown(t)})),CW(this,"onFocus",(()=>{this.invokeFocus()})),CW(this,"onFocusOut",(()=>{this.invokeFocusOut()})),CW(this,"onClick",(()=>{this.invokeClick()})),this.popup=K(e.popupId),this.options=e,this.bindEvents(),this.initNavigationService()}initNavigationService(){this.navigationService=new we(this.element),this.navigationService.bind(AW,this.onKeyDown),this.navigationService.bind(ge.ESC,this.onEscapeKey)}bindEvents(){this.element.addEventListener("focus",this.onFocus),this.element.addEventListener("focusout",this.onFocusOut),this.element.addEventListener("click",this.onClick)}unbindEvents(){this.element.removeEventListener("focus",this.onFocus),this.element.removeEventListener("focusout",this.onFocusOut),this.element.removeEventListener("click",this.onClick)}destroy(){this.unbindEvents(),super.destroy(),this.popup=null}hasParentPopupWithDisplayNone(t){if("none"===t.style.display)return!0;var e=t.closest(_W)!==t?t.closest(_W):null,i=e!==t?e:null;return i&&this.hasParentPopupWithDisplayNone(i)}focusNode(){this.element&&(this.hasParentPopupWithDisplayNone(this.element)?nt(this.element):document.activeElement!==this.element&&this.element.focus())}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)}invokeFocus(){this.invokeMethodAsync(this.options.jsinterop.focus)}invokeFocusOut(){this.invokeMethodAsync(this.options.jsinterop.focusout)}invokeClick(){this.invokeMethodAsync(this.options.jsinterop.click)}}function OW(t,e){Qt(TW,t,e)}function EW(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var MW="keydown",PW=[fe.ARROWLEFT,fe.ARROWRIGHT,fe.ARROWUP,fe.ARROWDOWN,fe.HOME,fe.END,fe.ENTER,fe.SPACE];class IW extends V{constructor(t,e){super(t,e),EW(this,"options",{isPartOfWizard:!1}),EW(this,"onKeyDown",(t=>{var e=PW.includes(t.keyCode),i=t.shiftKey?this.isFirstStepFocused():this.isLastStepFocused(),r=t.keyCode===fe.TAB&&!this.options.isPartOfWizard&&!i;(e||r)&&t.preventDefault()})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(MW,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(MW,this.onKeyDown)}focusStep(t){var e=this.element.querySelector('[data-index="'.concat(t,'"]'));e&&e.focus()}getFocusedStep(){var t=this.element.querySelector("a[tabindex='0']");if(t&&t.parentElement)return t.parentElement}isFirstStepFocused(){var t=this.getFocusedStep();return tt("k-step-first",t)}isLastStepFocused(){var t=this.getFocusedStep();return tt("k-step-last",t)}}function DW(t,e){Qt(IW,t,e)}function FW(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var RW="keydown",LW="wheel",NW="nearest",BW="horizontal",jW="vertical",zW=[fe.ARROWUP,fe.ARROWDOWN],UW=[fe.ARROWLEFT,fe.ARROWRIGHT],$W=[fe.HOME,fe.END];class HW extends V{constructor(t,e){super(t,e),FW(this,"options",{dotNetInstance:null,orientation:BW,scrollable:!1,jsinterop:{updateScrollButtons:null}}),FW(this,"onKeyDown",(t=>{(this.isVertical()?zW:UW).concat($W).includes(t.keyCode)&&t.preventDefault()})),FW(this,"onMouseWheel",(t=>{var e=t.deltaY>0?10:-10;t.preventDefault(),this.scrollTabs(e)})),FW(this,"onResize",(()=>{this.updateScrollButtons()})),this.extendOptions(e),this.tabList=this.element.querySelector(".k-tabstrip-items"),this.bindEvents(),this.options.scrollable&&this.initResizeService()}destroy(){this.unbindEvents(),this.destroyResizeService(),super.destroy()}setOptions(t){super.setOptions(t),this.tabList.removeEventListener(LW,this.onMouseWheel),t.scrollable?(this.initResizeService(),this.tabList.addEventListener(LW,this.onMouseWheel)):this.destroyResizeService()}bindEvents(){this.tabList.addEventListener(RW,this.onKeyDown),this.options.scrollable&&this.tabList.addEventListener(LW,this.onMouseWheel)}unbindEvents(){this.tabList.removeEventListener(RW,this.onKeyDown),this.options.scrollable&&this.tabList.removeEventListener(LW,this.onMouseWheel)}initResizeService(){this.resizeService||(this.resizeService=new $i({element:this.tabList,onResize:this.onResize}))}destroyResizeService(){this.resizeService&&(this.resizeService.destroy(),this.resizeService=null)}focusTab(t){var e=this.tabList.querySelectorAll(".k-item")[t];e&&(this.scrollElementIntoView(e),e.focus())}isVertical(){return this.options.orientation===jW}scrollTabs(t){this.isVertical()?this.tabList.scrollTop+=t:this.tabList.scrollLeft+=t,this.updateScrollButtons()}scrollElementIntoView(t){t.scrollIntoView&&t.scrollIntoView({inline:NW,block:NW})}updateScrollButtons(){var t,e,i,r=this.tabList;this.isVertical()?(t=r.scrollTop,e=r.scrollHeight,i=r.offsetHeight):(t=r.scrollLeft,e=r.scrollWidth,i=r.offsetWidth),this.invokeMethodAsync(this.options.jsinterop.updateScrollButtons,{prevButtonEnabled:t>0,nextButtonEnabled:e-i>t,showButtons:e>i})}handleVisibleTabsChange(){this.updateScrollButtons()}}function VW(t,e){Qt(HW,t,e)}function qW(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var WW="keydown",XW="mousedown",GW=[fe.ARROWLEFT,fe.ARROWRIGHT,fe.ARROWUP,fe.ARROWDOWN,fe.HOME,fe.END,fe.ENTER];class KW extends V{constructor(t,e){super(t,e),qW(this,"options",{componentSelector:".k-treeview",dropOptions:{dropClueTargetSelector:".k-treeview-mid,.k-treeview-top,.k-treeview-bot",dropClueEmptySelector:"",allowDropOver:!0,offsetDropClue:!0}}),qW(this,"onKeyDown",(t=>{GW.includes(t.keyCode)&&t.preventDefault()})),qW(this,"onMouseDown",(t=>{t.shiftKey&&t.preventDefault()})),qW(this,"createHint",(t=>{var e=t.textContent;return j('<div class="k-header k-drag-clue">\n                <span class="k-icon k-drag-status k-icon-with-modifier">\n                    <span class="k-icon k-icon-modifier"></span>\n                </span>\n                '.concat(e,"\n            </div>"))})),qW(this,"onItemDrop",(t=>{this.invokeMethodAsync(this.options.jsinterop.drop,{sourceIndex:t.sourceItem.getAttribute("data-treeindex"),treeviewDotNetInstance:this.getDestinationTree(t.destinationElement),destinationComponentId:t.destinationComponentId,destinationIndex:t.destinationIndex,dropPosition:t.dropPosition})})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),this.draggable&&this.draggable.destroy(),super.destroy()}bindEvents(){this.element.addEventListener(WW,this.onKeyDown),this.element.addEventListener(XW,this.onMouseDown),this.options.draggable&&this.createDraggable()}unbindEvents(){this.element.removeEventListener(WW,this.onKeyDown),this.element.removeEventListener(XW,this.onMouseDown)}setOptions(t){this.options.draggable!==t.draggable&&(t.draggable?this.createDraggable():this.draggable.destroy()),this.extendOptions(t)}focusNode(t){var e=this.element.querySelector('[data-treeindex="'.concat(t,'"]'));e&&e.focus()}createDraggable(){this.element&&(this.draggable=new Ei(this.element,{group:".k-treeview",filter:".k-treeview-leaf",itemSelector:".k-treeview-item",hint:this.createHint,events:{itemDrop:this.onItemDrop}}))}getDestinationTree(t){var e=ne(t,this.options.componentSelector);return e&&e.dotNetInstance}getDropSettings(){return this.options.dropOptions}getDropItemIndex(t){return t?t.closest(".k-treeview-item").getAttribute("data-treeindex"):""}getId(){return this.element.id}}function YW(t,e){Qt(KW,t,e)}function JW(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var ZW="keydown",QW=[ge.ARROWLEFT,ge.ARROWRIGHT],tX=QW.concat(ge.HOME,ge.END),eX=[ge.ARROWDOWN,ge.ARROWUP,ge.HOME,ge.END,ge.ENTER,ge.ESC],iX="".concat(me.ALT," ").concat(ge.ARROWDOWN),rX="k-toolbar-item",nX=":not([disabled])",oX="\n    .k-filter-toolbar-item > .k-button".concat(nX,",\n    .k-filter-toolbar-item > .k-button-group > .k-button").concat(nX),sX="\n    .k-toolbar-button".concat(nX,",\n    .k-toolbar-toggle-button").concat(nX,",\n    .k-toolbar-button-group > .k-button").concat(nX,",\n    .k-toolbar-overflow-button").concat(nX,",\n    ").concat(oX,",\n    .").concat(rX),aX=":not([disabled]):not([data-focusable='false']):not(.k-picker > .k-button):not(.k-spin-button > .k-button):not(.k-input-button)",lX="\n    a[href], \n    area[href], \n    input".concat(aX,", \n    select").concat(aX,", \n    textarea").concat(aX,", \n    button").concat(aX,", \n    [tabindex]").concat(aX);class cX extends V{constructor(t,e){super(t,e),JW(this,"options",{adaptive:!1,popupId:null,skipedOverflowItemIndexes:[],navigable:!0,overflowAnchorSelector:null,jsinterop:{populateCollapsedItems:""}}),JW(this,"onOverflowAnchorKeyDown",(()=>{re(this.options.popupId).openAsync()})),JW(this,"onOverflowPopupKeyDown",(t=>{var e=document.activeElement;if(e&&t.name===ge.ENTER)return e.click(),void this.focusPopupAnchor();t.name===ge.ESC&&(re(this.options.popupId).close(),this.focusPopupAnchor());var i=K(this.options.popupId).querySelectorAll(".k-item:not(.k-separator):not(.k-disabled)"),r=i.length-1,n=[...i].indexOf(e),o=-1;t.name===ge.ARROWDOWN&&n===r||t.name===ge.HOME?o=0:t.name===ge.ARROWUP&&0===n||t.name===ge.END?o=r:t.name===ge.ARROWDOWN?o=n+1:t.name===ge.ARROWUP&&(o=n-1),this.focusElement(i,o)})),JW(this,"onKeyDown",(t=>{if(t.target!==this.element){var e=tX.includes(t.key),i=QW.includes(t.key),r=this.getVisibleFocusableElements(),n=this.element.querySelector(":focus"),o=r.length-1,s=lt(n,".".concat(rX),!1),a=s&&n?n.closest(".".concat(rX)):null,l=a?[...r].indexOf(a):[...r].indexOf(n),c=-1,h=!1;if(s?e&&!i&&(h=!0):e&&(h=!0),s)t.key===ge.ESC&&(c=[...r].indexOf(a),h=!0);else if(t.key===ge.ARROWRIGHT&&l===o||t.key===ge.HOME)c=0;else if(t.key===ge.ARROWLEFT&&0===l||t.key===ge.END)c=o;else if(t.key===ge.ARROWRIGHT)c=l+1;else if(t.key===ge.ARROWLEFT)c=l-1;else if(t.key===ge.ENTER){var u=this.getInnerFocusableItem(n);u&&u.focus&&u.focus()}h&&(t.preventDefault(),t.stopPropagation()),this.focusElement(r,c)}})),JW(this,"onResize",(()=>{this.handleOverflowingItems()})),this.setOptions(e)}setOptions(t){this.extendOptions(t),this.options.adaptive?(this.setCollapsibleItems(),this.initResizeService(),this.handleOverflowingItems(),this.initOverflowNavigationServices()):(this.collapsibleItems&&this.collapsibleItems.forEach((t=>Y(t.item))),this.destroyOverflowNavigationServices(),this.destroyResizeService()),this.options.navigable?(this.initTabIndices(),this.bindEvents()):this.unbindEvents()}destroy(){this.destroyOverflowNavigationServices(),this.destroyResizeService(),this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(ZW,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(ZW,this.onKeyDown)}initResizeService(){this.resizeService=new $i({element:this.element,onResize:this.onResize})}destroyResizeService(){this.resizeService&&(this.resizeService.destroy(),this.resizeService=this.collapsibleItems=null)}destroyOverflowNavigationServices(){this.overflowAnchorNavigationService&&this.overflowAnchorNavigationService.destroy(),this.popupNavigationService&&this.popupNavigationService.destroy()}getItems(){return Array.from(this.element.children)}initTabIndices(){var t,e=this.element.querySelectorAll(this.getFocusableSelector()),i=null!==(t=Array.from(e).indexOf(this.getVisibleFocusableElements()[0]))&&void 0!==t?t:0;this.setTabIndices(e,i)}initOverflowNavigationServices(){var t=this.element.querySelector(this.options.overflowAnchorSelector);this.overflowAnchorNavigationService=new we(t),this.overflowAnchorNavigationService.bind(iX,this.onOverflowAnchorKeyDown);var e=K(this.options.popupId);this.popupNavigationService=new we(e),this.popupNavigationService.bind(eX,this.onOverflowPopupKeyDown)}setTabIndices(t,e){var i=this.options.tabindex;t.forEach(((t,r)=>{var n=e===r?i:-1;t.setAttribute("tabindex",n)}))}getWidths(){var t=this.getItems(),e=getComputedStyle(this.element),i=parseInt(e.gap),r=t.filter((t=>!Array.from(t.classList).includes("k-spacer"))).map((t=>t.offsetWidth)),n=r.filter((t=>t)).reduce(((t,e)=>t+e+i),0),o=getComputedStyle(this.element);return{totalItemsWidth:n,elementInternalWidth:this.element.clientWidth-parseInt(o.paddingLeft)-parseInt(o.paddingRight)}}setCollapsibleItems(){var t=this.getItems(),e=getComputedStyle(this.element),i=parseInt(e.gap),r=t.slice(0,t.length-1).map(((t,e)=>{var r=t.offsetWidth+i,n=this.options.skipedOverflowItemIndexes.includes(e),o=Array.from(t.classList).includes("k-spacer"),s=!n&&!o;return{item:t,offsetWidth:r,expanded:ct(t),collapsible:s,index:e}}));this.collapsibleItems=r}collapseItem(t){J(t.item),t.expanded=!1}expandItem(t){Y(t.item),t.expanded=!0}focusFirstOverflowItem(){var t=K(this.options.popupId).querySelector(".k-item:not(.k-separator):not(.k-disabled)");t.setAttribute("tabindex",0),t.focus()}focusPopupAnchor(){var t=this.element.querySelector(this.options.overflowAnchorSelector);t&&t.focus()}getVisibleFocusableElements(){return Array.from(this.element.querySelectorAll(this.getFocusableSelector())).filter((t=>ct(t)&&ct(t.parentElement)))}getFocusableSelector(){return this.element.closest(".k-grid")?lX:sX}getInnerFocusableItem(t){if(tt(rX,t)){var e=t.querySelector(".k-dropdownlist,.k-switch");return e||(e=ut(t,!1)),e}}focusElement(t,e){if(-1!==e){this.setTabIndices(t,e);var i=t[e];i&&i.focus()}}handleOverflowingItems(){this.collapsedItemsIndexes=null,this.positionOverflowingItems(),this.collapsedItemsIndexes=this.collapsibleItems.filter((t=>!t.expanded)).map((t=>t.index)),this.invokeMethodAsync(this.options.jsinterop.populateCollapsedItems,this.collapsedItemsIndexes||[])}positionOverflowingItems(t){if(this.collapsibleItems&&this.collapsibleItems.length){var{totalItemsWidth:e,elementInternalWidth:i}=this.getWidths(),r=[...this.collapsibleItems].reverse().find((t=>t.expanded&&t.collapsible)),n=this.collapsibleItems.find((t=>!t.expanded));r&&e>i&&!0!==t?(this.collapseItem(r),this.positionOverflowingItems(!1)):n&&e+n.offsetWidth<i&&!1!==t&&(this.expandItem(n),this.positionOverflowingItems(!0))}}}function hX(t,e){Qt(cX,t,e)}function uX(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class pX extends Da{constructor(t,e){super(t,e),uX(this,"handlerMap",{click:"onObserverMapClick",pan:"onObserverMapPan",panEnd:"onObserverMapPanEnd",markerMouseEnter:"onObserverMarkerMouseEnter",markerMouseLeave:"onObserverMarkerMouseLeave",markerClick:"onObserverMarkerClick",markerActivate:"onObserverMarkerActivate",shapeClick:"onObserverShapeClick"})}}function dX(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class fX extends wE{constructor(t,e){super(t,e),dX(this,"options",{markerTooltipId:"",jsinterop:{onObserverMapClick:"",onObserverMapPan:"",onObserverMapPanEnd:"",onObserverMarkerClick:"",onObserverMarkerMouseEnter:"",onObserverMarkerMouseLeave:"",onObserverMarkerActivate:"",onObserverShapeClick:""}}),dX(this,"onObserverMapClick",(t=>{var e=this.createMapClickEventArgs(t);this.invokeMapClickAsync(e)})),dX(this,"onObserverMapPan",(t=>{this.hideMarkerTooltip(t)})),dX(this,"onObserverMapPanEnd",(()=>{this.showMarkerTooltip(this._hoveredMarker)})),dX(this,"onObserverMarkerActivate",(t=>{this.repositionMarkerTooltip(t.marker)})),dX(this,"onObserverMarkerClick",(t=>{var e=this.createMarkerClickEventArgs(t);this.invokeMarkerClickAsync(e)})),dX(this,"onObserverMarkerMouseEnter",(t=>{this._hoveredMarker=t.marker;var e=this.createMarkerEventArgs(t);this.invokeMarkerMouseEnterAsync(e)})),dX(this,"onObserverMarkerMouseLeave",(()=>{this._hoveredMarker=null})),dX(this,"onObserverShapeClick",(t=>{var e=this.createShapeClickEventArgs(t);this.invokeShapeClickAsync(e)})),this.extendOptions(e),this.createInstanceObserver(),this.initWidget()}destroy(){this.destroyInstanceObserver(),this._hoveredMarker=null,this.widget&&(this.widget.destroy(),this.widget=null)}getThemeOptions(){return{}}getWidgetConstructor(){return tE}createInstanceObserver(){this.instanceObserver=new pX(this)}destroyInstanceObserver(){this.instanceObserver=null}trigger(){}requiresHandlers(){return!1}invokeMapClickAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverMapClick,t)}invokeMarkerClickAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverMarkerClick,t)}invokeMarkerMouseEnterAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverMarkerMouseEnter,t)}invokeShapeClickAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverShapeClick,t)}createMapClickEventArgs(t){var e=t.location||{lat:null,lng:null},i={location:{latitude:e.lat,longitude:e.lng}};return this.extendWithOriginalMouseEvent(i,t)}createMarkerClickEventArgs(t){var e=this.createMarkerEventArgs(t);return this.extendWithOriginalMouseEvent(e,t)}createShapeClickEventArgs(t){var e=this.createShapeEventArgs(t);return this.extendWithOriginalMouseEvent(e,t)}createMarkerEventArgs(t){return{layerIndex:t.layerIndex,markerIndex:t.markerIndex}}createShapeEventArgs(t){var e=t.shape.dataItem,i=t.shape.location&&t.shape.value;return{layerIndex:t.layerIndex,shapeIndex:t.shapeIndex,geoJsonDataItem:i?null:e}}getOriginalEvent(t){var e=t.originalEvent;return(e||{}).event||e}extendWithOriginalMouseEvent(t,e){var i=this.getOriginalEvent(e);return u(t,{eventArgs:I(i)})}repositionMarkerTooltip(t){var e=this.getMarkerTooltip();if(e&&t){var i=e.getPopupComponent();i&&i.anchor===t.element&&e.repositionPopup()}}showMarkerTooltip(t){var e=this.getMarkerTooltip();if(e&&t){var i=e.getPopupComponent();i&&i.anchor&&i.anchor===t.element&&e.open(i.anchor)}}hideMarkerTooltip(){var t=this.getMarkerTooltip();if(t){var e=t.getPopupComponent();e&&e.anchor&&t.close(e.anchor)}}getMarkerTooltip(){return re(this.options.markerTooltipId)}}function gX(t,e,i){var r=K(t);if(r){var n=mX(e),o=re(t),s=u(n,i);if(o)ee(o,s);else oe(t,new fX(r,s))}}ba.register(Cs);var mX=t=>{var e=yX(t),i=vX(e);return e.layers=i||[],e.layers.forEach((t=>{"shape"===t.type&&t.shapeSettings.style?t.style=t.shapeSettings.style:"bubble"===t.type&&t.bubbleSettings.style&&(t.style=t.bubbleSettings.style)})),e},yX=t=>{var e=JSON.parse(t),i=vX(e);return e.layers=i,e},vX=t=>{var e=t.layers||[];return e.forEach((t=>{"string"==typeof t.data&&(t.data=JSON.parse(t.data))})),e};function bX(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class wX extends V{constructor(t,e){super(t,e),bX(this,"options",{media:"",jsinterop:{change:""}}),bX(this,"onMediaChange",(t=>{this.invokeMethodAsync(this.options.jsinterop.change,t.matches)})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.mediaQueryList=window.matchMedia(this.options.media),this.mediaQueryList.addEventListener("change",this.onMediaChange)}unbindEvents(){this.mediaQueryList&&this.mediaQueryList.removeEventListener("change",this.onMediaChange)}getMatches(){return this.mediaQueryList.matches}}function xX(t,e){return Qt(wX,t,e),re(t).getMatches()}function SX(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var kX="keydown",CX="focusin",AX="focusout",_X=[fe.ARROWLEFT,fe.ARROWRIGHT,fe.HOME,fe.END,fe.PAGE_UP,fe.PAGE_DOWN,fe.ENTER];class TX extends V{constructor(t,e){super(t,e),SX(this,"options",{dotNetInstance:null,adaptive:!0,navigable:!0,jsinterop:{disableInnerNavigation:"",enableInnerNavigation:""}}),SX(this,"onResize",(()=>{if(this.element){var{gap:t}=this.getSizings(),e=$t(this.element),i=this.getAvailableContainerWidth();this.shrink(i,e),this.stretch(i,e,t)}})),SX(this,"onKeyDown",(t=>{_X.includes(t.keyCode)&&t.preventDefault()})),SX(this,"onFocusIn",(t=>{!this.innerNavigationEnabled&&t.target&&t.target!==this.element&&(this.enableTabKeyTrap(),this.enableInnerNavigation())})),SX(this,"onFocusOut",(t=>{(this.innerNavigationEnabled&&!t.relatedTarget||this.innerNavigationEnabled&&t.target&&t.relatedTarget&&(!this.element.contains(t.relatedTarget)||this.element===t.relatedTarget))&&(this.disableTabKeyTrap(),this.disableInnerNavigation())})),this.extendOptions(e),e.navigable&&(this.bindEvents(),this.innerNavigationEnabled=!1),e.adaptive&&(this.setAdaptiveItems(),this.initResizeService())}destroy(){this.unbindEvents(),this.disableTabKeyTrap(),this.destroyResizeService(),super.destroy()}bindEvents(){this.element.addEventListener(kX,this.onKeyDown),this.element.addEventListener(CX,this.onFocusIn),this.element.addEventListener(AX,this.onFocusOut)}unbindEvents(){this.element.removeEventListener(kX,this.onKeyDown),this.element.removeEventListener(CX,this.onFocusIn),this.element.removeEventListener(AX,this.onFocusOut)}setOptions(t){super.setOptions(t),t.adaptive?(this.setAdaptiveItems(),this.initResizeService()):this.destroyResizeService()}initResizeService(){this.resizeService=new $i({element:this.element,onResize:this.onResize})}destroyResizeService(){this.resizeService&&(this.resizeService.destroy(),this.resizeService=this.collapsibleItems=null)}focusElement(t){if(t){this.adaptiveSelectItem&&this.adaptiveSelectItem.visible&&this.adaptiveSelectItem.element.focus();var{index:e}=t,i=this.element.querySelector((t=>"[data-index='".concat(t,"']"))(e));i&&i.focus()}else this.element.focus()}disableInnerNavigation(){this.innerNavigationEnabled=!1,this.invokeMethodAsync(this.options.jsinterop.disableInnerNavigation)}enableInnerNavigation(){this.innerNavigationEnabled=!0,this.invokeMethodAsync(this.options.jsinterop.enableInnerNavigation)}setAdaptiveItems(){var t=this.element.querySelectorAll("[data-adaptive=true]");this.adaptiveItems=[...t].map((t=>({element:t,width:t.offsetWidth,visible:!0}))),this.setAdaptiveSelect()}setAdaptiveSelect(){var t=this.element.querySelector(".k-pager-numbers-wrap .k-dropdownlist");t&&(Y(t,"inline-flex"),this.adaptiveSelectItem={element:t,width:Ut(t),visible:!1},J(t))}getSizings(){var t=getComputedStyle(this.element);return{paddingInline:parseInt(t.paddingInline),gap:parseInt(t.gap)}}getAvailableContainerWidth(){var{paddingInline:t,gap:e}=this.getSizings(),i=this.element.offsetWidth,r=this.adaptiveItems.filter((t=>t.visible)).length;return i-2*t-(r<2?0:r-1)*e}shrink(t,e){var i=t,r=e,n=this.adaptiveItems.filter((t=>t.visible));if(i<r)for(var o=n.length-1;o>=0;o--){var s=n[o];if(i>r)break;if(s.width=s.element.offsetWidth,tt("k-pager-numbers",s.element)){if(s.width<=this.adaptiveSelectItem.width)continue;this.adaptiveSelectItem.visible=!0,Y(this.adaptiveSelectItem.element,"inline-flex")}this.hideItem(s),r-=s.width,i=this.getAvailableContainerWidth()}}stretch(t,e,i){var r=t,n=e,o=this.adaptiveItems.filter((t=>!t.visible));if(r>n){for(var s=0;s<o.length;s++){var a=o[s];if(tt("k-pager-numbers",a.element)){r>n-this.adaptiveSelectItem.width+a.width+i&&(this.showItem(a),n+=a.width,this.adaptiveSelectItem.visible=!1,J(this.adaptiveSelectItem.element));break}if(r<n+a.width+i)break;this.showItem(a),n+=a.width}r=this.getAvailableContainerWidth()}}showItem(t){Y(t.element),t.visible=!0}hideItem(t){J(t.element),t.visible=!1}enableTabKeyTrap(){this.tabKeyTrap=new Se(this.element,'\n    [tabindex]:not([style*="display: none;"], \n    .k-input-button, \n    .k-pager-numbers[style*="display: none;"] .k-button, \n    .k-pager-sizes[style*="display: none;"] .k-dropdownlist)'),this.tabKeyTrap.enableKeyTrap()}disableTabKeyTrap(){this.tabKeyTrap&&this.tabKeyTrap.disableTabKeyTrap()}}function OX(t,e){Qt(TX,t,e)}function EX(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var MX="keydown",PX=[fe.ARROWLEFT,fe.ARROWRIGHT,fe.ARROWUP,fe.ARROWDOWN,fe.HOME,fe.END,fe.ENTER,fe.SPACE];class IX extends V{constructor(t,e){super(t,e),EX(this,"onKeyDown",(t=>{PX.includes(t.keyCode)&&t.target.matches("li.k-panelbar-item")&&t.preventDefault()})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(MX,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(MX,this.onKeyDown)}focusNode(t){var e=this.element.querySelector('[data-treeindex="'.concat(t,'"]'));e&&e.focus()}}function DX(t,e){Qt(IX,t,e)}class FX{constructor(t,e){this.options=t,this.viewer=e}createPromise(){}loadAsync(){}isLoaded(){}setState(){}resetState(){}renderAsync(){}renderTextLayer(){}resize(){}getSize(){}setSize(){}getViewport(){}getPrintContentAsync(){}getTextLayer(){}}var RX=()=>{var t,e,i=new Promise((function(i,r){t=i,e=r}));return i.resolve=t,i.reject=e,i},LX=t=>Promise.all(t),NX=(t,e)=>{var i,r=0;if(!e||e<=0)return t;var n=function(){var n=this,o=Number(new Date)-r,s=arguments;function a(){t.apply(n,s),r=Number(new Date)}if(!r)return a();i&&clearTimeout(i),o>e?a():i=setTimeout(a,e-o)};return n.cancel=()=>{clearTimeout(i)},n},BX=__webpack_require__(299);class jX extends FX{constructor(t,e){super(t,e),this.viewer=e,this.options=t,this.pageNumber=t.number,this.width=t.width,this.height=t.height,this.resetState(),this.initElement(),this.initDrawingElement()}initElement(){this.element=j('\n            <div class="k-page" data-page-number="'.concat(this.options.number,'" />\n        '))}initDrawingElement(){this.canvas=j('\n            <canvas style="width: 100%; height: 100%;" />\n        '),this.canvas.width=this.width,this.canvas.height=this.height,this.element.appendChild(this.canvas)}setState(t){this.state=g(this.state||{},t)}resetState(){this.setState({loaded:!1,rendered:!1,zoomLevel:1.25})}createPromise(){return RX()}loadAsync(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1.25,e=arguments.length>1?arguments[1]:void 0,i=this,r=this.createPromise();if(i._page&&i.state.zoomLevel===t&&!e)return r.resolve(i);if(i._page&&i.state.zoomLevel&&i.state.zoomLevel!==t&&!e)return i.state.zoomLevel=t,i.state.renderLoadPromise=i.renderAsync(t),i.state.renderLoadPromise.then((()=>{r.resolve(i)})),r;i.setState({zoomLevel:t});var n=Math.max(0,i.pageNumber-1);return i.viewer.state.pagePromises[n].then((e=>{i._page=e,i.state.renderLoadPromise=i.renderAsync(t),i.setState({loaded:!0}),i.state.renderLoadPromise.then((()=>{r.resolve(i)}))})),r}isLoaded(){return this.state.loaded}renderAsync(t){if(!this._page)return RX().resolve(this);var e=this,i=this.canvas.getContext("2d"),r=this._page.getViewport({scale:t});return this.state.zoomLevel=t,this.canvas.width=r.width,this.canvas.height=r.height,this.state.renderTask&&(this.state.renderTask.cancel(),this.state.renderTask=null),this.setSize({width:r.width,height:r.height}),this.state.renderTask=this._page.render({canvasContext:i,viewport:r}),this.renderTextLayer(r),this.state.renderTask.promise.then((function(){e.state.renderTask=null,e.setState({rendered:!0})})).catch((function(){}))}resize(t){var e=this.element.getBoundingClientRect();this.setSize({width:Math.min(e.width*t,this.width),height:Math.min(e.height*t,this.height)})}setSize(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:0,height:0};this.element.style.width=t.width+"px",this.element.style.height=t.height+"px"}getSize(){var t=this.element.getBoundingClientRect();return{width:t.width,height:t.height}}getViewport(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scale:1};return this._page?this._page.getViewport(t):{width:0,height:0}}renderTextLayer(t){var e=this,i=e._page;this.destroyTextLayer(),this.initTextLayer(),i.getTextContent({normalizeWhitespace:!0}).then((function(i){e.textLayer.style.width=t.width+"px",e.textLayer.style.height=t.width+"px",e.resetTextLayerContent(),(0,BX.renderTextLayer)({textContent:i,container:e.textLayer,viewport:t,textDivs:[],enhanceTextSelection:!0})}))}initTextLayer(){this.textLayer=j("\n            <div class='k-text-layer' />\n        "),this.element.appendChild(this.textLayer)}destroyTextLayer(){this.removeTextLayer()}removeTextLayer(){this.textLayer&&this.textLayer.parentNode&&this.textLayer.parentNode.removeChild(this.textLayer)}resetTextLayerContent(){this.textLayer.innerHTML=""}getPrintContentAsync(){var t=this.canvas,e=this.createPromise(),i=new Image;return i.src=t.toDataURL(),i.width=this.width,i.height=this.height,i.onload=()=>{e.resolve(i)},e}getTextLayer(){return this.textLayer}}function zX(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class UX{constructor(t){zX(this,"options",{}),this.extendOptions(t)}extendOptions(t){this.options=g(this.options,t)}setOptions(t){this.options=t}loadDocumentAsync(){}readAllPagesAsync(){}readPagesAsync(){}getAllPagesAsync(){}getPageAsync(){}fetchDocumentAsync(){}getDocumentAsync(){}}__webpack_require__(16);function $X(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var HX=window.ArrayBuffer;class VX extends UX{constructor(t){super(t),$X(this,"options",{}),this.extendOptions(t)}extendOptions(t){this.options=g(this.options,t)}setOptions(t){this.options=t}readAllPagesAsync(t){var e=this.getAllPagesAsync(t);return LX(e)}readPagesAsync(t){return LX(t)}getAllPagesAsync(t){for(var e=[],i=1;i<=t.numPages;i++){var r=this.getPageAsync(t,i);e.push(r)}return e}getPageAsync(t,e){return t.getPage(e)}fetchDocumentAsync(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:null,url:null},e={data:null,url:null};if(t instanceof HX)e.data=t;else if(v(t)||v(t.data)){var i=(t=>{var e=t.replace(/^(data:application\/pdf;base64,)/gi,"");try{return window.atob(e)}catch(t){return null}})(v(t.data)?t.data:t);i?e.data=i:e.url=t}else p(t)&&(e=t);return e.data||e.url?this.getDocumentAsync(e):RX()}getDocumentAsync(t){return t.verbosity=0,(0,BX.getDocument)(t).promise}}var qX="actualWidth",WX="fitToWidth",XX="fitToPage",GX=3;function KX(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var YX=D("char-index"),JX=D("match-index");class ZX{constructor(t){KX(this,"options",{highlightClass:"k-search-highlight",highlightMarkClass:"k-search-highlight-mark",charClass:"k-text-char",textContainers:[]}),this.options=t,this.extendOptions(t),this.resetState()}destroy(){this.clearSearch()}extendOptions(t){this.options=g(this.options,t)}setState(t){this.state=g(this.state||{},t)}resetState(){this.setState({text:"",textNodes:[],charIndex:0,activeMatchIndex:0,matches:[]})}search(t){var e,{text:i,matchCase:r}=t,n=new RegExp(i,r?"g":"ig");if(this.shouldTransformText()&&this.transformTextForSearch(),this.state.matches=[],this.state.activeMatchIndex=0,this.removeIndicators(),""!==i){for(e=n.exec(this.state.text);e;)this.state.matches.push({startOffset:e.index,endOffset:e.index+e[0].length}),e=n.exec(this.state.text);return this.highlightAllMatches(),this.addActiveMatchMark(),this.state.matches}}clearSearch(){this.removeIndicators(),this.restoreOriginalText()}restoreOriginalText(){this.forEachTextContainer((t=>{w(t.querySelectorAll("span:not(."+this.options.charClass+")")).forEach((t=>{t.innerHTML=t.textContent}))}))}shouldTransformText(){return!this.state.text}transformTextForSearch(){this.state.textNodes=[],this.state.charIndex=0,this.state.text="",this.forEachTextContainer((t=>{this.extractTextNodes(t)})),this.transformTextNodesForSearch(this.state.textNodes)}extractTextNodes(t){if(t.nodeType===GX)this.state.textNodes.push(t);else for(var e=0;e<t.childNodes.length;e++)this.extractTextNodes(t.childNodes[e])}transformTextNodesForSearch(t){for(var e=0;e<t.length;e++)this.transformTextNodeForSearch(t[e])}transformTextNodeForSearch(t){var e=t.textContent;if(!(e.length<=0)){this.state.text=this.state.text+e;var i=j("<span></span>");qt(t,i);var r=this.splitTextByChars(e);i.innerHTML=r,Gt(i.childNodes[0])}}splitTextByChars(t){for(var e="",i=0;i<t.length;i++)e+="<span class='"+this.options.charClass+"' "+YX+"="+this.state.charIndex+">"+t[i]+"</span>",this.state.charIndex++;return e}forEachTextContainer(t){for(var e=0;e<this.options.textContainers.length;e++){t(this.options.textContainers[e],e)}}highlightAllMatches(){this.state.matches.forEach(((t,e)=>{this.addMatchHighlight(t.startOffset,t.endOffset,e)}))}addMatchHighlight(t,e,i){for(var r=this,n=function(t){r.forEachTextContainer((e=>{w(e.querySelectorAll(L(r.options.charClass+"["+YX+"='"+t+"']"))).forEach((t=>{Z(r.options.highlightClass,t),t.setAttribute(JX,i)}))}))},o=t;o<e;o++)n(o)}removeMatchHighlights(){this.forEachTextContainer((t=>{w(t.querySelectorAll(L(this.options.highlightClass))).forEach((t=>{Q(this.options.highlightClass,t),t.removeAttribute(JX)}))}))}addActiveMatchMark(){this.state.activeMatchIndex||0===this.state.activeMatchIndex?this.state.activeMatchIndex>this.state.matches.length?this.state.activeMatchIndex=this.state.matches.length:this.removeActiveMatchMark():this.state.activeMatchIndex=0;var t=this.getMarkHtml();this.forEachTextContainer((e=>{w(e.querySelectorAll(L(this.options.charClass+"["+JX+"='"+this.state.activeMatchIndex+"']"))).forEach((e=>{Xt(e,t)}))}))}removeActiveMatchMark(){this.forEachTextContainer((t=>{var e=w(t.querySelectorAll(L(this.options.highlightMarkClass))).flatMap((t=>w(t.childNodes)));Kt(e)}))}removeIndicators(){this.removeActiveMatchMark(),this.removeMatchHighlights()}markNextMatch(){this.markNextMatchIndex(),this.addActiveMatchMark()}markPreviousMatch(){this.markPreviousMatchIndex(),this.addActiveMatchMark()}markNextMatchIndex(){this.moveActiveMatchIndex(1)}markPreviousMatchIndex(){this.moveActiveMatchIndex(-1)}moveActiveMatchIndex(t){this.state.activeMatchIndex+=t,this.state.activeMatchIndex<0?this.state.activeMatchIndex=Math.max(this.state.matches.length-1,0):this.state.activeMatchIndex>this.state.matches.length-1&&(this.state.activeMatchIndex=0)}getActiveMatchElement(){var t;return this.forEachTextContainer((e=>{var i=e.querySelector(L(this.options.highlightMarkClass));i&&(t=i)})),t}getMarkHtml(){return"<span class='".concat(this.options.highlightMarkClass,"'></span>")}}function QX(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var tG=1e3/60,eG="scroll";class iG extends V{constructor(t,e){super(t,e),QX(this,"options",{scrollDirectionModifier:-1,panScrollThrottleDelay:tG,scrollThrottleDelay:tG,filter:"",events:{[eG]:T}}),QX(this,"onElementScroll",(()=>{var t=this.element;this.state.trackNextElementScroll?this.scrollTo(t.scrollLeft,t.scrollTop):this.state.trackNextElementScroll=!0})),QX(this,"OnDragStart",(t=>{if(this.state.dragStarted=!1,this.shouldTrackPanEvents()){var e,i,r=t.target||(t.originalEvent||{}).target;if(!this.options.filter||(e=r,i=this.options.filter,e&&i&&e.closest(i)))(t=>{t.preventDefault&&t.preventDefault(),t.originalEvent&&t.originalEvent.preventDefault()})(t),this.setState({dragStarted:!0,location:{pageX:t.pageX,pageY:t.pageY},locationDelta:{x:0,y:0}})}})),QX(this,"onDrag",(t=>{if(this.shouldTrackPanEvents()&&this.state.dragStarted){this.calculateEventLocationDelta(t),this.setState({location:{pageX:t.pageX,pageY:t.pageY}});var e=this.options.scrollDirectionModifier,i=this.element.scrollLeft+e*this.state.locationDelta.x,r=this.element.scrollTop+e*this.state.locationDelta.y;this.scrollTo(i,r)}})),QX(this,"onDragEnd",(()=>{this.shouldTrackPanEvents()})),this.extendOptions(e),this.resetState(),this.bindEvents()}destroy(){this.unbindEvents()}extendOptions(t){this.options=g(this.options,t)}initDraggable(){this.destroyDraggable(),this.options.panScrollThrottleDelay>0?this.throttledOnDrag=NX(this.onDrag,this.options.panScrollThrottleDelay):this.throttledOnDrag=this.onDrag,this.draggable=new di({mouseOnly:!1,press:this.OnDragStart,drag:this.throttledOnDrag,release:this.onDragEnd}),this.draggable.bindTo(this.element)}destroyDraggable(){this.draggable&&this.draggable.destroy&&(this.draggable.destroy(),this.throttledOnDrag&&this.throttledOnDrag.cancel&&(this.throttledOnDrag.cancel(),this.throttledOnDrag=null))}bindEvents(){this.bindDraggableEvents(),this.bindElementScroll()}bindDraggableEvents(){this.initDraggable()}bindElementScroll(){this.options.scrollThrottleDelay>0?this.throttledOnElementScroll=NX(this.onElementScroll,this.options.scrollThrottleDelay):this.throttledOnElementScroll=this.onElementScroll,this.element.addEventListener(eG,this.throttledOnElementScroll)}unbindEvents(){this.unbindElementScroll(),this.unbindDraggableEvents()}unbindDraggableEvents(){this.destroyDraggable()}unbindElementScroll(){this.throttledOnElementScroll&&this.throttledOnElementScroll.cancel&&(this.throttledOnElementScroll.cancel(),this.throttledOnElementScroll=null),this.element.removeEventListener(eG,this.throttledOnElementScroll)}setState(t){this.state=g(this.state||{},t)}resetState(){this.setState({trackPanEvents:!1,trackNextElementScroll:!1,location:{pageX:0,pageY:0},locationDelta:{x:0,y:0}})}enablePanEventsTracking(){this.state.trackPanEvents=!0,this.bindDraggableEvents()}disablePanEventsTracking(){this.unbindDraggableEvents(),this.state.trackPanEvents=!1}shouldTrackPanEvents(){return this.state.trackPanEvents}calculateEventLocationDelta(t){this.state.locationDelta={x:t.pageX-this.state.location.pageX,y:t.pageY-this.state.location.pageY}}scrollTo(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{trackScrollEvent:!0};i.trackScrollEvent||(this.state.trackNextElementScroll=!1),this.element.scrollLeft=t,this.element.scrollTop=e,i.trackScrollEvent&&this.trigger(eG,{scrollTop:this.element.scrollTop,scrollLeft:this.element.scrollLeft})}}function rG(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var nG="pdfjs",oG="error",sG="pagesRead",aG="pagesLoad",lG="pagesWheel",cG="printEnd",hG="scroll",uG=window.getComputedStyle;class pG extends V{constructor(t,e){super(t,e),rG(this,"options",{pdfServiceType:nG,fileData:[],page:1,fileDescriptor:{data:null,url:null},downloadFileName:"Document",minZoom:.5,maxZoom:4,zoomRate:.25,zoomLevel:1.25,zoomBeforePrint:!1,zoomLevelForPrint:3,searchMatchScrollLeftOffset:0,searchMatchScrollTopOffset:-64,pageChangeScrollThreshold:.85,pageWheelThrottleDelay:200,messages:{errorMessages:{parseError:"PDF file fails to process.",notFound:"File is not found.",popupBlocked:"Popup is blocked."}},elementSelectors:{pageSelector:"k-page:not(.k-blank-page)",pagesContainerClass:"k-pdf-viewer-pages",documentContainerClass:"k-pdf-viewer-canvas",searchHighlightClass:"k-search-highlight",searchHighlightMarkClass:"k-search-highlight-mark",charClass:"k-text-char",textElementSelector:"span[role='presentation']",renderedPageSelector:"k-page[data-page-number]",enabledTextSelectionClass:"k-enable-text-select",enabledPanningClass:"k-enable-panning"},events:{[sG]:T,[aG]:T,[lG]:T,[cG]:T,[oG]:T,[hG]:T}}),rG(this,"onPageScrollerScroll",(t=>{var e=this.pages.length,i=this.getPageNumberByScrollOffset(t.scrollTop),r=!1;i!==this.state.activePageNumber&&i>=1&&i<=e&&(r=!0,this.state.activePageNumber=i),this.trigger(hG,{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop,pageNumber:this.state.activePageNumber,isPageChanged:r})})),rG(this,"printDocumentAsync",(()=>{this.initPrintContainer();var t=this.renderPagesForPrintAsync(this.printContainer),e=this.createPromise();return LX(t).then((()=>{setTimeout((()=>{this.openPrintDialog(),e.resolve()}),16.666666666666668)})),e})),rG(this,"onPagesWheel",(t=>{if(t.ctrlKey||t.metaKey){t.preventDefault();var e=$(t),i=e<0?1:-1,r=this.state.zoomLevel+i*this.options.zoomRate;this.zoom({zoomLevel:r}),this.trigger(lG,{zoomLevel:r,mousewheelDelta:e})}})),this.extendOptions(e),this.wrapper=this.element,this.resetState(),this.bindEvents(),this.initPdfService(),this.loadFile()}destroy(){this.unbindEvents(),this.destroySearchService()}extendOptions(t){this.options=g(this.options,t)}setOptions(t){this.options=t}bindEvents(){this.bindPagesWheel()}bindPagesWheel(){var t=this.getDocumentContainer();t&&(this.options.pageWheelThrottleDelay>0?this.throttledPagesWheel=NX(this.onPagesWheel,this.options.pageWheelThrottleDelay):this.throttledPagesWheel=this.onPagesWheel,t.addEventListener("wheel",this.throttledPagesWheel))}unbindEvents(){this.unbindPagesWheel()}unbindPagesWheel(){var t=this.getDocumentContainer();t&&(this.throttledPagesWheel&&this.throttledPagesWheel.cancel&&this.throttledPagesWheel.cancel(),t.removeEventListener("wheel",this.throttledPagesWheel))}setState(t){this.state=g(this.state||{},t)}resetState(){this.setState({activePageNumber:1,visiblePagesCount:1,pagePromises:[],downloadFilePromise:null,pdfDocument:null,zoomLevel:this.options.zoomLevel,zoomLevelType:this.options.zoomLevelType,zoomLevelBeforePrint:null})}createPromise(){return RX()}initPdfService(){this.shouldUsePdfJsService()&&(this.pdfService=new VX(this.options))}loadFile(t){this.loadDocument(t||this.options.fileDescriptor||{data:this.options.fileData,page:this.options.page})}loadDocument(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:null,url:null,page:1},e=this;e.fetchDocumentAsync(t).then((i=>{var r=[];e.state.pdfDocument=i,e.state.downloadFilePromise=e.createPromise(),i.getData().then((t=>{var i=new Blob([t],{type:"application/pdf"});e.state.downloadFilePromise.resolve({file:i})})),e.state.pagePromises=e.getAllPagesAsync(i),e.readPagesAsync(e.state.pagePromises).then((n=>{e.options.page=t.page||e.options.page||1;var o=e.options.page;r=n.map((t=>{var e=t.getViewport({scale:1.25});return{width:e.width,height:e.height}})),e.state.pdfDocumentDescriptor={pagesCount:i.numPages,pages:r},e.trigger(sG,{pagesCount:i.numPages}),e.clearPages(),e.createPages(),e.state.pdfDocumentDescriptor&&(o=o>=1&&o<=e.state.pdfDocumentDescriptor.pagesCount?o:1,e.scrollPagesContainer(0,0),e.loadAllPagesAsync().then((()=>{e.trigger(aG,{pagesCount:i.numPages}),e.activatePage(o)})).catch((t=>{e.triggerError(t)})))})).catch((t=>{e.triggerError(t)}))})).catch((t=>{e.triggerError(t)}))}triggerError(t){this.trigger(oG,t)}triggerZoomStart(t){this.trigger("zoomStart",{zoomLevel:t.zoomLevel,zoomLevelType:t.zoomLevelType})}triggerZoomEnd(t){this.trigger("zoomEnd",{zoomLevel:t.zoomLevel,zoomLevelType:t.zoomLevelType})}readPagesAsync(t){return this.pdfService.readPagesAsync(t)}readAllPagesAsync(t){return this.pdfService.readAllPagesAsync(t)}getAllPagesAsync(t){return this.pdfService.getAllPagesAsync(t)}getPageAsync(t,e){return this.pdfService.getPageAsync(t,e)}fetchDocumentAsync(t){return this.pdfService.fetchDocumentAsync(t)}clearDocument(){this.clearPages(),this.state.pdfDocument=null}clearPages(){var t=this.getDocumentContainer(),e=this.getPagesContainer();t&&e&&this.hasDocument()&&this.getPagesElements().forEach((t=>{e.removeChild(t)}))}createPages(){var t,e=this,i=e.state.pdfDocumentDescriptor;if(e.pages=[],e._visiblePages=[],e.initDocumentContainer(),i&&i.pagesCount){t=i.pages;for(var r=1;r<=i.pagesCount;r++){var n={number:r};n&&t.length&&(n=u(n,t[r-1]));var o=this.createPage(n);this.addPage(o)}}else e.renderNoDataIndicator()}createPage(t){var e;return this.shouldUsePdfJsService()&&(e=new jX(t,this)),e}addPage(t){this.pages.push(t),this._visiblePages.push(t);var e=this.getPagesContainer();e&&e.appendChild(t.element)}shouldUsePdfJsService(){return this.options.pdfServiceType===nG}initDocumentContainer(){this.documentContainer||(this.documentContainer=this.getDocumentContainer(),this.initPageScroller(this.documentContainer))}initPageScroller(t){!this.scroller&&t&&(this.scroller=this.createPageScroller(t,{filter:L(this.options.elementSelectors.pageSelector),events:{[hG]:this.onPageScrollerScroll}}))}createPageScroller(t,e){return new iG(t,e)}destroyPageScroller(){this.scroller&&(this.scroller.destroy(),this.scroller=null)}renderNoDataIndicator(){}activatePage(t){this.getPageByNumber(t)&&this.state.activePageNumber!==t&&(this.state.activePageNumber=t,this.isPageLoaded(t)?this.scrollToPage(t):this.loadAllPagesAsync.then((function(){this.scrollToPage(t)})))}loadAllPagesAsync(){for(var t=(this.pages||[]).length,e=[],i=0;i<t;i++){var r=i+1;e.push(this.loadPageAsync(r))}return LX(e)}loadPageAsync(t){var e=this.getPageByNumber(t);if(e)return e.loadAsync(this.options.zoomLevel)}isPageLoaded(t){var e=this.getPageByNumber(t);return k(e)}areAllPagesLoaded(){var t=this.state.pdfDocumentDescriptor,e=this.pages||[];return!(!t||!e)&&e.length===t.pagesCount}scrollToPage(t){var e=this.getScrollOffsetByPageNumber(t);this.scrollPagesContainer(0,e)}scrollPagesContainer(t,e){this.scroller&&this.scroller.element&&this.scroller.scrollTo(t,e,{trackScrollEvent:!1})}downloadFile(t){this.state.downloadFilePromise&&this.state.downloadFilePromise.then((e=>{var i=v(t)?t:this.options.downloadFileName,n=new FileReader;n.readAsDataURL(e.file),n.onload=()=>{(t=>{r(t.dataURI,t.fileName,t)})({dataURI:n.result,fileName:i+".pdf"})}}))}hasDocument(){return k(this.state.pdfDocument)}zoom(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{zoomIn:!1,zoomOut:!1,zoomLevel:null,zoomLevelType:""},e=this,i=this.options,r=t.zoomLevelType,n=this.pages||[];if(this.hasDocument()&&!(n.length<=0)){var o=this.calculateZoomLevel(t);if(!(o<i.minZoom||o>i.maxZoom||this.triggerZoomStart({zoomLevel:o}))){this.options.zoomLevel=o,this.setState({zoomLevelType:r,zoomLevel:o});var s=[];return n.forEach((t=>{if(-1!==this._visiblePages.indexOf(t)&&t.isLoaded()){var e=t.renderAsync(o);s.push(e)}else t.resize(o)})),LX(s).finally((function(){e.triggerZoomEnd({zoomLevelType:r,zoomLevel:o})}))}}}calculateZoomLevel(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{zoomLevel:null,zoomLevelType:""},e=this.options,i=this.getDocumentContainer(),r=this._visiblePages&&this._visiblePages.length>0?this._visiblePages[0].getSize():{width:0,height:0},n=t.zoomLevelType,o=t.zoomLevel||e.zoomLevel;return n===qX?o=1:n===WX?o=i.offsetWidth/(r.width/this.state.zoomLevel):n===XX&&(o=i.offsetHeight/(r.height/this.state.zoomLevel)),o}print(){if(this.hasDocument()){var t=this;if(this.options.zoomBeforePrint)this.cacheZoomLevelBeforePrint(),t.loadDocumentForPrintAsync().then((()=>{t.printDocumentAsync().then((()=>{t.trigger(cG)}))})).catch(t.triggerError).finally((()=>{t.restoreZoomLevelBeforePrint()}));else try{t.printDocumentAsync().then((()=>{t.trigger(cG)}))}catch(e){t.triggerError(e)}}}loadDocumentForPrintAsync(){for(var t=this.pages,e=[],i=[],r=this.createPromise(),n=0;n<t.length;n++){var o=t[n].loadAsync(this.options.zoomLevelForPrint,!0).then((t=>{i.push(t)}));e.push(o)}return LX(e).then((()=>{r.resolve(i)})),r}renderPagesForPrintAsync(t){for(var e=this.pages,i=[],r=0;r<e.length;r++){var n=e[r].getPrintContentAsync();n.then((e=>{var i=j("<div></div>");i.appendChild(e),t.appendChild(i)})),i.push(n)}return i}initPrintContainer(){this.printContainer=j("<div></div>")}openPrintDialog(){var t=this.pages,e=t[0].width,i=t[0].height,r=window.open("","","innerWidth="+e+",innerHeight="+i+"location=no,titlebar=no,toolbar=no");if(r&&r.document){r.document.write(this.printContainer.innerHTML),r.document.close();var n=()=>{r.removeEventListener("afterprint",n),r.close()};r.addEventListener("afterprint",n),r.focus(),r.print()}else this.triggerError({message:this.options.messages.errorMessages.popupBlocked})}cacheZoomLevelBeforePrint(){this.setState({zoomLevelBeforePrint:this.state.zoomLevel})}restoreZoomLevelBeforePrint(){this.zoom(this.state.zoomLevelBeforePrint)}search(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{text:"",matchCase:!1},e=this;if(e.areAllPagesLoaded())return e.searchText(t);e.loadAllPagesAsync().then((function(){return e.searchText(t)}))}clearSearch(){this.destroySearchService()}searchText(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{text:"",matchCase:!1};return this.initSearchService(),this.searchService.search(t)}initSearchService(){if(!this.searchService){var t=this.getPagesTextLayers();this.searchService=new ZX({textContainers:t||[],highlightClass:this.options.elementSelectors.searchHighlightClass,highlightMarkClass:this.options.elementSelectors.searchHighlightMarkClass,charClass:this.options.elementSelectors.charClass})}}destroySearchService(){this.searchService&&(this.searchService.destroy(),this.searchService=null)}getPageByNumber(t){return this.pages&&this.pages[t-1]}getPageNumberByScrollOffset(t){var e=this.getPagesContainer();if(e){for(var i=e.offsetTop,r=this.state.activePageNumber,n=i,o=0;o<this.pages.length;o++){var s=this.pages[o],a=this.getPageScrollOffset(s);if(n+a*this.options.pageChangeScrollThreshold>t){r=o+1;break}n+=a}return r=ue(r,1,this.pages.length)}}getScrollOffsetByPageNumber(t){if(this.getPageByNumber(t)){this.state.activePageNumber=t;var e=this.pages.slice(0,Math.max(0,t-1)).map((t=>this.getPageScrollOffset(t))).reduce(((t,e)=>t+e),0);return e+0}}getPageScrollOffset(t){var e=t.getSize().height,i=uG(t.element);return e+parseFloat(i.marginTop)}getPagesTextLayers(){return(this.pages||[]).map(this.getPageTextLayer)}getPageTextLayer(t){return t.getTextLayer()}getPagesContainer(){return this.element.querySelector(L(this.options.elementSelectors.pagesContainerClass))}getDocumentContainer(){return this.wrapper.querySelector(L(this.options.elementSelectors.documentContainerClass))}getPagesElements(){var t=this.getDocumentContainer();return t?w(t.querySelectorAll(L(this.options.elementSelectors.pageSelector))):[]}goToNextSearchMatch(){if(this.searchService){this.searchService.markNextMatch();var t=this.searchService.getActiveMatchElement();this.scrollToSearchMatch(t)}}goToPreviousSearchMatch(){if(this.searchService){this.searchService.markPreviousMatch();var t=this.searchService.getActiveMatchElement();this.scrollToSearchMatch(t)}}scrollToSearchMatch(t){if(t){var e=t.closest(L(this.options.elementSelectors.charClass)),i=e?e.closest(this.options.elementSelectors.textElementSelector):null;if(i){var r=i.closest(L(this.options.elementSelectors.renderedPageSelector));if(r){var n=r.offsetLeft+-1*this.scroller.element.offsetLeft+i.offsetLeft+this.options.searchMatchScrollLeftOffset,o=r.offsetTop+-1*this.scroller.element.offsetTop+i.offsetTop+this.options.searchMatchScrollTopOffset;this.scrollPagesContainer(n,o)}}}}enableTextSelection(){this.disableScrollerEventsTracking(),Z(this.options.elementSelectors.enabledTextSelectionClass,this.scroller.element),Q(this.options.elementSelectors.enabledPanningClass,this.scroller.element)}disableTextSelection(){this.enableScrollerEventsTracking(),Q(this.options.elementSelectors.enabledTextSelectionClass,this.scroller.element),Z(this.options.elementSelectors.enabledPanningClass,this.scroller.element)}enableScrollerEventsTracking(){this.scroller&&this.scroller.enablePanEventsTracking()}disableScrollerEventsTracking(){this.scroller&&this.scroller.disablePanEventsTracking()}}function dG(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var fG=window.ArrayBuffer,gG="click",mG=".k-i-folder-open";class yG extends V{constructor(t,e){super(t,e),dG(this,"options",{dotNetInstance:null,pdfServiceType:"pdfjs",fileData:[],minZoom:.5,maxZoom:4,zoomRate:.25,zoomLevel:1.25,fileSelect:{dataId:""},jsinterop:{onPagesRead:"",onPagesLoad:"",onPrintEnd:"",onZoomStart:"",onZoomEnd:"",onError:"",onScroll:""}}),dG(this,"onFileSelectAdd",(t=>{var e=this.getFileSelect(t);if(e){var i=(e.state.files||[])[0];i&&e.readBlob(i).then((t=>{this.loadFileFromArrayBuffer(t)}))}})),dG(this,"onOpenFileClick",(t=>{var e=t.currentTarget.querySelector(".k-upload[data-id]"),i=e?e.getAttribute("data-id"):null;this.openSelectFileDialog(i)})),dG(this,"onPagesRead",(t=>{this.invokePagesRead(t)})),dG(this,"onPagesLoad",(t=>{this.invokePagesLoad(t)})),dG(this,"onPrintEnd",(()=>{this.invokePrintEnd()})),dG(this,"onZoomStart",(t=>{this.invokeZoomStart(t)})),dG(this,"onZoomEnd",(t=>{this.invokeZoomEnd(t)})),dG(this,"onError",(t=>{this.invokeError(t)})),dG(this,"onScroll",(t=>{t.isPageChanged&&this.invokeScroll(t)})),dG(this,"invokePagesRead",(t=>{this.invokeMethodAsync(this.options.jsinterop.onPagesRead,{pagesCount:t.pagesCount})})),dG(this,"invokePagesLoad",(t=>{this.invokeMethodAsync(this.options.jsinterop.onPagesLoad,{pagesCount:t.pagesCount})})),dG(this,"invokePrintEnd",(()=>{this.invokeMethodAsync(this.options.jsinterop.onPrintEnd)})),dG(this,"invokeZoomStart",(t=>{this.invokeMethodAsync(this.options.jsinterop.onZoomStart,{zoomLevel:t.zoomLevel})})),dG(this,"invokeZoomEnd",(t=>{this.invokeMethodAsync(this.options.jsinterop.onZoomEnd,{zoomLevel:t.zoomLevel})})),dG(this,"invokeError",(t=>{this.invokeMethodAsync(this.options.jsinterop.onError,{message:t.message})})),dG(this,"invokeScroll",(t=>{this.invokeMethodAsync(this.options.jsinterop.onScroll,{page:t.pageNumber})})),this.extendOptions(e),this.wrapper=this.element,this.options.fileData=e.fileData,this.initWidget(),this.bindEvents(),this.loadFile({fileData:this.options.fileData})}destroy(){this.unbindEvents(),this.destroyWidget()}initWidget(){"pdfjs"===this.options.pdfServiceType&&(this.widget=this.createWidget(this.element,u(this.options,{zoomBeforePrint:!1,events:{pagesRead:this.onPagesRead,pagesLoad:this.onPagesLoad,printEnd:this.onPrintEnd,zoomStart:this.onZoomStart,zoomEnd:this.onZoomEnd,error:this.onError,scroll:this.onScroll}})))}destroyWidget(){this.widget&&(this.widget.destroy(),this.widget=null)}createWidget(t){return new pG(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}setOptions(t){this.widget&&(this.options=t,this.widget.setOptions(t))}bindEvents(){var t=this.wrapper.querySelector(mG);this.openFileButton=t?t.closest(".k-button"):null,this.openFileButton&&this.openFileButton.addEventListener(gG,this.onOpenFileClick)}unbindEvents(){this.openFileButton&&this.openFileButton.removeEventListener(gG,this.onOpenFileClick)}loadFile(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{fileData:[],page:1},e=t.fileData||{},i=t.page||1;e&&e.buffer instanceof fG?this.loadFileFromArrayBuffer(e.buffer,i):v(e)&&this.widget.loadFile({data:e,page:i})}loadFileFromArrayBuffer(t,e){this.widget&&t instanceof fG&&this.widget.loadFile({data:t,page:e})}getFileSelect(t){return re(t||this.options.fileSelect.dataId)}openSelectFileDialog(t){var e=this.getFileSelect(t);e&&e.openSelectFileDialog()}downloadFile(t){var{fileName:e}=t;this.widget.downloadFile(e)}activatePage(t){this.widget.activatePage(t)}zoom(t){this.widget.zoom(t)}print(){this.widget.print()}search(t){return this.widget.search(t).length}clearSearch(){return this.widget.clearSearch()}goToNextSearchMatch(){this.widget.goToNextSearchMatch()}goToPreviousSearchMatch(){this.widget.goToPreviousSearchMatch()}enableTextSelection(){this.widget.enableTextSelection()}disableTextSelection(){this.widget.disableTextSelection()}}function vG(t,e){Qt(yG,t,e)}const bG="bottom",wG="center",xG="middle",SG="left",kG="right",CG="top";const AG=function(t){var e=t.anchorRect,i=t.anchorAlign,r=t.elementRect,n=t.elementAlign,o=t.margin;void 0===o&&(o={});var s=i.horizontal,a=i.vertical,l=n.horizontal,c=n.vertical,h=o.horizontal||0,u=o.vertical||0,p=e.top,d=e.left;return a===bG&&(p+=e.height),a!==wG&&a!==xG||(p+=Math.round(e.height/2)),c===bG&&(p-=r.height,u*=-1),c!==wG&&c!==xG||(p-=Math.round(r.height/2),u*=-1),s===kG&&(d+=e.width),s!==wG&&s!==xG||(d+=Math.round(e.width/2)),l===kG&&(d-=r.width,h*=-1),l!==wG&&l!==xG||(d-=Math.round(r.width/2),h*=-1),{top:p+u,left:d+h}};function _G(t){return t.ownerDocument||t.document||t}const TG=function(t){return _G(t).documentElement};const OG=function(t){return _G(t).defaultView};function EG(t){var e=TG(t),i=OG(t);return{x:i.pageXOffset||e.scrollLeft||0,y:i.pageYOffset||e.scrollTop||0}}function MG(t){return t===(t.ownerDocument||{}).body?EG(t):{x:t.scrollLeft,y:t.scrollTop}}const PG=function(t){for(var e=t.offsetParent;e&&"static"===e.style.position;)e=e.offsetParent;return e||TG(t)};function IG(t,e){return t?MG(t):function(t){var e=PG(t);return e?MG(e):{x:0,y:0}}(e)}const DG=function(t){var e=t.getBoundingClientRect(),i=e.left,r=e.top;return e.height||e.width||(e=function(t){var e=t.style,i=e.display,r=e.left,n=e.position;t.style.display="",t.style.left="-10000px",t.style.position="absolute";var o=t.getBoundingClientRect();return t.style.display=i,t.style.left=r,t.style.position=n,o}(t)),{top:r,left:i,height:e.height,width:e.width}};const FG=function(t,e){var i=OG(t),r=i.getComputedStyle(t),n=DG(t),o=e||PG(t),s=t.ownerDocument,a=o!==s.body&&o!==s.documentElement,l={top:0,left:0};if("fixed"!==r.position&&a){var c=i.getComputedStyle(o);(l=DG(o)).top+=parseInt(c.borderTopWidth,10),l.left+=parseInt(c.borderLeftWidth,10)}return{top:n.top-l.top,left:n.left-l.left,height:n.height,width:n.width}};function RG(t,e,i){void 0===i&&(i=1);var r=e?PG(e):null,n=FG(t,r),o=n.top,s=n.left,a=n.height,l=n.width,c=IG(r,t),h=c.x,u=c.y,p=t.ownerDocument,d=r===p.body||r===p.documentElement?1:i;return{top:o+u*d,left:s+h*d,height:a,width:l}}function LG(t,e){return{top:t.top-e.y,left:t.left-e.x,height:t.height,width:t.width}}const NG="fit",BG="flip";var jG=function(t,e,i){var r=0;return t+e>i&&(r=i-(t+e)),t<0&&(r=-t),r},zG=function(t){var e=t.offset,i=t.size,r=t.anchorSize,n=t.viewPortSize,o=t.anchorAlignPoint,s=t.elementAlignPoint,a=0,l=2*t.margin;if(s!==o&&!(s===wG||s===xG)&&!(o===wG||o===xG)){var c=o===CG||o===SG;e<0&&c?e+(a=i+r+l)+i>n&&(a=0):e>=0&&!c&&(e+i>n&&(a+=-(r+i+l)),e+a<0&&(a=0))}return a};const UG=function(t){var e=t.anchorRect,i=t.anchorAlign,r=t.elementRect,n=t.elementAlign,o=t.collisions,s=t.viewPort,a=t.margin;void 0===a&&(a={});var l=r.top,c=r.left,h=r.height,u=r.width,p=s.height,d=s.width,f=a.horizontal||0,g=a.vertical||0,m=0,y=0,v=o.vertical===NG,b=o.horizontal===NG,w=o.vertical===BG,x=o.horizontal===BG;v&&(y+=jG(l,h,p)),b&&(m+=jG(c,u,d)),w&&(y+=zG({margin:g,offset:l,size:h,anchorSize:e.height,viewPortSize:p,anchorAlignPoint:i.vertical,elementAlignPoint:n.vertical})),x&&(m+=zG({margin:f,offset:c,size:u,anchorSize:e.width,viewPortSize:d,anchorAlignPoint:i.horizontal,elementAlignPoint:n.horizontal}));var S=w&&0!==y,k=x&&0!==m,C=v&&0!==y,A=b&&0!==m;return{flipped:k||S,fitted:C||A,flip:{horizontal:k,vertical:S},fit:{horizontal:A,vertical:C},offset:{left:m,top:y}}};function $G(t,e){for(var i=[],r=t.parentNode;r&&(i.push(r),r!==e);)r=r.parentNode;return i}function HG(t){for(var e=[],i=t.parentNode.firstElementChild;i;)i!==t&&e.push(i),i=i.nextElementSibling;return e}function VG(t,e){for(var i,r,n=$G(t),o=e;o&&(i=HG(o),!(r=n.reduce((function(t,e){return t.concat(i.filter((function(t){return t===e})))}),[])[0]));)o=o.parentElement;return r}qG=function(t){if(!GG())return!1;var e=t?t.ownerDocument:document;if(!e||!e.body)return!1;var i=e.createElement("div");i.style.transform="matrix(10, 0, 0, 10, 0, 0)",i.innerHTML='<div style="position: fixed; top: 10px;">child</div>',e.body.appendChild(i);var r=10!==i.children[0].getBoundingClientRect().top;return e.body.removeChild(i),r},XG=!1;var qG,WG,XG,GG=function(){return Boolean("undefined"!=typeof window&&window.document&&window.document.createElement)};var KG=0;function YG(){if(!KG&&"undefined"!=typeof document){var t=document.createElement("div");t.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",t.innerHTML="&nbsp;",document.body.appendChild(t),KG=t.offsetWidth-t.scrollWidth,document.body.removeChild(t)}return KG}function JG(t){var e=OG(t),i=TG(t),r={height:e.innerHeight,width:e.innerWidth};return i.scrollHeight-i.clientHeight>0&&(r.width-=YG()),r}function ZG(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var QG={x:0,y:0,width:0,height:0,top:0,right:0,bottom:0,left:0},tK=Array.from,eK="mouseleave",iK="mouseover",rK="mousedown",nK="pointerdown",oK="scroll",sK="resize";class aK extends V{constructor(t,e){if(super(t,e),ZG(this,"mouseHoverTimeout",null),ZG(this,"options",{dotNetInstance:null,anchorSelector:"",dynamicAnchors:!1,anchorRect:QG,toggleElementSelector:"",width:"",inheritAnchorWidth:!0,anchorAlign:{horizontal:"left",vertical:"bottom"},elementAlign:{horizontal:"left",vertical:"top"},openOn:"click",closeOn:"click",closeParentPopupsUntilSelector:"",jsinterop:{close:"",closeAsync:"",openAsync:"",positionSet:""}}),ZG(this,"toggle",(t=>{t.preventDefault(),this._visible?this.closeAsync():this.openAsync(t)})),ZG(this,"onCloseEvent",(t=>{!(this.toggleElements&&[...this.toggleElements].includes(t.target))&&t.target!==this.anchor||this.isChild(t.relatedTarget)||(this.mouseHoverTimeout=setTimeout((()=>{this.closeAsync()}),30))})),ZG(this,"onElementMouseOver",(()=>{this.mouseHoverTimeout&&clearTimeout(this.mouseHoverTimeout)})),ZG(this,"onMouseDown",(t=>{this.isChild(t.target)||this.closeAsync()})),ZG(this,"onElementMouseLeave",(t=>{var e=t.relatedTarget;if(!W(this.element,e)&&!W(this.anchor,e)){var i=e&&e.closest(".k-animation-container"),r=i&&(i.dataset.id===this.element.dataset.id||this.isChild(e));i&&r||t.target!==this.element||(this.mouseHoverTimeout=setTimeout((()=>{this.closeAsync(),this.options.closeParentPopupsUntilSelector&&this.closeParentPopups()}),30))}})),ZG(this,"onScroll",(t=>{this.isChild(t.target)||this.positionElement()})),ZG(this,"onResize",(()=>{this.close()})),ZG(this,"openAsync",((t,e,i)=>{this.mouseHoverTimeout&&clearTimeout(this.mouseHoverTimeout);var r=this.anchor;this.anchors.length>1&&this.anchors.forEach((e=>{W(e,t.target)&&(this.anchor=e)})),r!==this.anchor&&this.closeAsync(),this.options.anchorRect={top:i,left:e,width:0,height:0},this.invokeMethodAsync(this.options.jsinterop.openAsync)})),this.extendOptions(e),this.anchors=this.getAnchorsFromDocument(),this.anchor=this.anchors[0],this.anchors.length>1&&e.toggleElementSelector)throw new Error("Toggle element is not supported when you have more than one anchor");e.toggleElementSelector&&(this.toggleElements=tK(document.querySelectorAll(e.toggleElementSelector))),c()||this.createIntersectionObserver(),this.bindAnchorsEvents(),this.bindElementEvents(),this.initPosition()}destroy(){this.unbindElementEvents(),this.unbindEvents(),this.unbindAnchorsEvents(),this.destroyIntersectionObserver(),super.destroy(),this.toggleElements=null,this.anchor=null}getElementRect(t){var e=t?t.getBoundingClientRect():QG,i=document.body.getBoundingClientRect();return{top:e.top-i.top,left:e.left-i.left,width:e.width,height:e.height}}bindElementEvents(){this.options.closeOn===eK&&(this.element.addEventListener(eK,this.onElementMouseLeave),this.element.addEventListener(iK,this.onElementMouseOver))}unbindElementEvents(){this.element&&(this.element.removeEventListener(eK,this.onElementMouseLeave),this.element.removeEventListener(iK,this.onElementMouseOver))}bindAnchorsEvents(){this.toggleElements&&this.toggleElements.length?this.toggleElements.forEach((t=>{this.bindAnchorEvents(t)})):this.anchors.forEach((t=>{this.bindAnchorEvents(t)}))}unbindAnchorsEvents(){this.toggleElements&&this.toggleElements.forEach((t=>{this.unbindAnchorEvents(t)})),this.anchors.forEach((t=>{this.unbindAnchorEvents(t)}))}bindAnchorEvents(t){if(f(t)){var{openOn:e,closeOn:i}=this.options;e===i?t.addEventListener(e,this.toggle,!0):(t.addEventListener(e,this.openAsync,!0),t.addEventListener(i,this.onCloseEvent,!0))}}unbindAnchorEvents(t){if(f(t)){var{openOn:e,closeOn:i}=this.options;t.removeEventListener(e,this.toggle,!0),t.removeEventListener(e,this.openAsync,!0),t.removeEventListener(i,this.onCloseEvent,!0)}}bindEvents(){this.bound||(this.bound=!0,document.addEventListener(oK,this.onScroll,!0),c()||window.addEventListener(sK,this.onResize),window&&window.PointerEvent?document.addEventListener(nK,this.onMouseDown,!0):document.addEventListener(rK,this.onMouseDown,!0))}unbindEvents(){document.removeEventListener(oK,this.onScroll,!0),document.removeEventListener(rK,this.onMouseDown,!0),document.removeEventListener(nK,this.onMouseDown,!0),window.removeEventListener(sK,this.onResize,!0),this.bound=!1}closeParentPopups(){for(var t=this.element;t&&!t.querySelector(this.options.closeParentPopupsUntilSelector);){var e=re(t.getAttribute("data-id")),i=e.anchor;e.close(),t=i&&i.closest(".k-animation-container")}}onOpen(){this._visible=!0,this.bindEvents(),!this.options.width&&this.options.inheritAnchorWidth&&(this.element.style.width=this.getAnchorWidth()),this.anchor&&this.setZIndex(this.anchor),this.positionElement()}getAutoSizePosition(){var t=this.element.children[0];if(t){var e=t.style.display;t.style.visibility="hidden",t.style.display="block";var i=this.getPosition();return t.style.display=e,t.style.visibility="",i}return this.getPosition()}onClose(){this._visible=!1,this.unbindEvents()}initPosition(){this.element&&(this.element.style.left="-10000px",this.element.style.top="0px")}getPosition(){var t=this.getAnchorRect(),e=this.element.style.left,i=this.element.style.top;this.element.style.left="",this.element.style.top="";var r=this.getElementRect(this.element);this.element.style.left=e,this.element.style.top=i;var n=AG({anchorRect:t,elementRect:r,anchorAlign:this.options.anchorAlign,elementAlign:this.options.elementAlign,margin:this.options.margin});r.top=n.top,r.left=n.left,r=LG(r,EG(this.element));var o=UG({anchorRect:t,elementRect:r,anchorAlign:this.options.anchorAlign,elementAlign:this.options.elementAlign,collisions:{horizontal:"fit",vertical:"flip"},viewPort:JG(this.element)});return this.flipped=o.flipped,{top:"".concat(n.top+o.offset.top,"px"),left:"".concat(n.left+o.offset.left,"px"),flipped:o.flipped}}positionElement(){var t=this.getElementPosition();return this.element.style.top=t.top,this.element.style.left=t.left,this.invokePositionSet(),t}getElementPosition(){return!0===this.options.autoSize?this.getAutoSizePosition():this.getPosition()}getAnchorWidth(){if(!this.anchor)return"";var t=this.getElementRect(this.anchor);return"".concat(t.width,"px")}getAnchorRect(){return this.anchor?this.getElementRect(this.anchor):this.options.anchorRect}setZIndex(t){var e;this.element&&(t&&(e=function(t,e){if(!t||!e)return null;var i=VG(t,e);if(!i)return null;var r=[t].concat($G(t,i)).reduce((function(t,e){var i=e.style.zIndex||window.getComputedStyle(e).zIndex,r=parseInt(i,10);return r>t?r:t}),0);return r?r+1:null}(t,this.element)),this.element.style.zIndex=e||10002)}createIntersectionObserver(){this.destroyIntersectionObserver(),this.intersectionObserver=this.initIntersectionObserver(),this.anchors.forEach((t=>{this.observeIntersection(t)}))}initIntersectionObserver(){var t={threshold:this.getIntersectionThreshold()};return new window.IntersectionObserver((t=>{t.forEach((t=>{t.intersectionRatio>=0&&t.intersectionRatio<1&&this.onAnchorHide(t.target)}))}),t)}observeIntersection(t){this.canObserveIntersection(t)&&this.intersectionObserver.observe(t)}unobserveIntersection(t){this.canObserveIntersection(t)&&this.intersectionObserver.unobserve(t)}canObserveIntersection(t){return this.intersectionObserver&&f(t)}destroyIntersectionObserver(){this.intersectionObserver&&(this.anchors.forEach((t=>{this.unobserveIntersection(t)})),this.intersectionObserver.disconnect&&this.intersectionObserver.disconnect()),this.intersectionObserver=null}onAnchorHide(t){if(this.hasDynamicAnchors()&&this._ignoreFirstIntersectionCheck){if(W(this.anchor,t))return void(this._ignoreFirstIntersectionCheck=!1)}else this.close()}getIntersectionThreshold(){for(var t=[],e=0;e<=1;e+=.1)t.push(e);return t}isElementVisible(){return this.element&&this.element.getElementsByClassName("k-popup")[0]}isChild(t){var e=t;if(it(e,[this.element,this.anchor]))return!0;var i=e instanceof HTMLElement&&e.closest(".k-animation-container");if(i&&i!==this.element){var r=re(i.getAttribute("data-id")||i.id);return!!(r&&r.isParent(this.element))||this.isChildOfPopup(e,this.element)}return!1}isChildOfPopup(t,e){var i=t&&t.closest(".k-animation-container");if(i&&i===e)return!0;if(i&&i!==e){var r=re(i.getAttribute("data-id")||i.id);if(r)return this.isChildOfPopup(r.anchor,e)}return!1}isParent(t){return t&&q(t,this.anchor)}close(){this.invokeMethodAsync(this.options.jsinterop.close)}closeAsync(){this.invokeMethodAsync(this.options.jsinterop.closeAsync)}invokePositionSet(){this.options.jsinterop.positionSet&&this.invokeMethodAsync(this.options.jsinterop.positionSet)}get anchors(){return this.hasDynamicAnchors()&&(this.anchors=this.getAnchorsFromDocument()),this._anchors}set anchors(t){var e=this.hasAnyAnchorChanged(t);this.hasDynamicAnchors()&&e&&((this._anchors||[]).forEach((t=>{this.unobserveIntersection(t),this.unbindAnchorEvents(t)})),t.forEach((t=>{this.bindAnchorEvents(t)}))),this._anchors=t}get anchor(){return this._anchor||(this._anchor=this._anchors[0]),this._anchor}set anchor(t){this.unobserveIntersection(this._anchor),this.unbindAnchorEvents(this._anchor),this._anchor=t,this.hasDynamicAnchors()&&(this._ignoreFirstIntersectionCheck=!0,this.observeIntersection(this._anchor),this.bindAnchorEvents(this._anchor))}getAnchorsFromDocument(){return tK(document.querySelectorAll(this.options.anchorSelector))}hasAnyAnchorChanged(t){if(!this.hasDynamicAnchors())return!1;var e=tK(this._anchors||[]);if(!e||e.length!==t.length)return!0;for(var i=0;i<t.length;i++)if(!e.includes(t[i]))return!0;return!1}hasDynamicAnchors(){return this.options.dynamicAnchors}}function lK(t,e){Qt(aK,t,e)}function cK(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class hK extends V{constructor(t,e){super(t,e),cK(this,"options",{events:{removeFocus:null,keyDown:null},appointmentElementSelector:t=>".k-event[data-render-index='".concat(t,"']")}),cK(this,"onKeyDown",(t=>{[fe.ARROWRIGHT,fe.ARROWLEFT,fe.ARROWUP,fe.ARROWDOWN,fe.PAGE_DOWN,fe.PAGE_UP,fe.HOME,fe.END,fe.SPACE].includes(t.keyCode)&&tt("k-selected",t.target)&&t.target.matches("div.k-event")&&t.preventDefault(),this.trigger("keyDown",{key:t.key,shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.ctrlKey})})),cK(this,"onFocusOut",(t=>{!t.relatedTarget||this.element.querySelector(".k-scheduler-layout").contains(t.relatedTarget)||t.relatedTarget.closest(".k-window")||this.trigger("removeFocus")})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener("keydown",this.onKeyDown),this.element.addEventListener("focusout",this.onFocusOut)}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown),this.element.removeEventListener("focusout",this.onFocusOut)}focusAppointmentElement(t){var e=this.element.querySelector(this.options.appointmentElementSelector(t));e&&this.focusElement(e)}focusElement(t){t instanceof HTMLElement&&t!==document.activeElement&&t.focus()}}function uK(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class pK extends V{constructor(t,e){super(t,e),uK(this,"options",{dotNetInstance:null,jsinterop:{removeFocus:"",keyDown:""}}),uK(this,"onKeyDown",(t=>{this.invokeMethodAsync(this.options.jsinterop.keyDown,t)})),uK(this,"onRemoveFocus",(()=>{this.invokeMethodAsync(this.options.jsinterop.removeFocus)})),this.extendOptions(e),this.createNavigationService()}destroy(){this.destroyNavigationService(),super.destroy()}createNavigationService(){this.navigationService=new hK(this.element,{events:{keyDown:this.onKeyDown,removeFocus:this.onRemoveFocus}})}destroyNavigationService(){this.navigationService&&(this.navigationService.destroy(),this.navigationService=null)}focusAppointmentElement(t){this.navigationService.focusAppointmentElement(t)}focusElement(){this.navigationService.focusElement(this.element)}}function dK(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class fK extends V{constructor(t,e){super(t,e),dK(this,"options",{dotNetInstance:null,allowUpdate:!1,jsinterop:{resizeAppointments:""}}),dK(this,"onResize",(()=>{this.invokeResizeAppointments()})),dK(this,"renderMoveHints",(t=>{t&&t.length&&this.moveTarget&&(this.destroyHints(),t.forEach((t=>{var e=this.createHint(this.moveTarget);this.renderHintElement(e,t)})))})),dK(this,"renderHintElement",(()=>{throw new Error("You have to implement the method renderHintElement!")})),dK(this,"getSlotUnderCursor",(t=>{var e=We(t);if(!e)return null;var i=e.closest(".k-event");return i&&(J(i),e=this.getSlotUnderCursor(t),Y(i)),e.closest(".k-scheduler-cell.k-slot-cell")})),dK(this,"createHint",(t=>{var e=t.cloneNode();return e.className+=" k-event-drag-hint",e.style.zIndex="2",this.hints[this.hints.length]=e,e})),dK(this,"destroyHints",(()=>{this.hints.forEach((t=>{t.parentNode.removeChild(t)})),this.hints=[]})),this.extendOptions(e),this.options.allowUpdate&&(this.initResizeService(),this.createMovable()),this.hints=[],this.width=0}destroy(){this.bodyElement=null,this.destroyResizeService(),this.destroyMovable(),super.destroy()}setOptions(t){this.options.allowUpdate!==t.allowUpdate&&(t.allowUpdate?(this.initResizeService(),this.createMovable()):(this.destroyResizeService(),this.destroyMovable())),this.extendOptions(t)}initResizeService(){this.resizeService||(this.resizeService=new $i({element:this.element,onResize:this.onResize}))}destroyResizeService(){this.resizeService&&(this.resizeService.destroy(),this.resizeService=null)}invokeResizeAppointments(){this.invokeMethodAsync(this.options.jsinterop.resizeAppointments,this.getSlotMetrics())}refresh(){this.invokeResizeAppointments()}getSlotMetrics(){var t=this.getFirstCell(),e=this.getContentWidth();return this.setHeadersWidths(),this.slotMetrics={width:e-t.offsetLeft,height:t.offsetHeight,left:t.offsetLeft},this.slotMetrics}createMovable(){this.destroyMovable(),this.movable=new di({press:this.onMovableDragStart.bind(this),drag:this.onMovableDrag.bind(this),release:this.onMovableDrop.bind(this),mouseOnly:!0}),this.movable.bindTo(this.element)}destroyMovable(){this.movable&&this.movable.destroy&&this.movable.destroy(),this.moveTarget=null}onMovableDragStart(t){this.moveTarget=null,this.dragStarted=!1;var e=t.originalEvent.target;if(e&&e.closest(".k-event")){var i=this.getSlotUnderCursor(t);this.moveTarget=e.closest(".k-event"),this.resizeStart=Boolean(e.closest(".k-resize-n, .k-resize-w")),this.resizeEnd=Boolean(e.closest(".k-resize-s, .k-resize-e")),this.lastCellIndex=this.originalCellIndex=this.getCellIndex(i),this.lastRowIndex=this.originalRowIndex=this.getRowIndex(i),this.lastResourceIndex=this.originalResourceIndex=this.getResourceIndex(i)}}onMovableDrag(t){if(this.moveTarget)if(this.dragStarted){var e=this.getSlotUnderCursor(t);if(e){var i=tt("k-scheduler-alldays-slot",e),r=this.getCellIndex(e),n=this.getRowIndex(e),o=this.getResourceIndex(e),s=!1;r!==this.lastCellIndex&&(this.lastCellIndex=r,s=!0),n!==this.lastRowIndex&&(this.lastRowIndex=n,s=!0),o!==this.lastResourceIndex&&(this.resourceRowIndex=o,s=!0),s&&this.invokeMethodAsync(this.options.jsinterop.getMoveHint,{rowIndex:n,cellIndex:r,resourceIndex:o,originalCellIndex:this.originalCellIndex,originalRowIndex:this.originalRowIndex,originalResourceIndex:this.originalResourceIndex,resizeStart:this.resizeStart,resizeEnd:this.resizeEnd,isAllDay:i}).then(this.renderMoveHints)}}else this.dragStarted=!0}onMovableDrop(){this.destroyHints(),this.dragStarted&&this.invokeMethodAsync(this.options.jsinterop.moveAppointment),this.moveTarget=null,this.lastCellIndex=this.lastRowIndex=this.lastResourceIndex=0,this.originalCellIndex=this.originalRowIndex=this.originalResourceIndex=0}getFirstCell(){return this.element.querySelector(".k-first-cell")}getContentWidth(){return this.getBodyElement().offsetWidth}setHeadersWidths(){var t=Array.from(this.element.querySelectorAll(".k-heading-cell.k-group-cell,.k-heading-cell.k-resource-cell")),e=z(t,(t=>t.getAttribute("data-depth-index"))),i=function(t){var i=0;e[t].forEach((t=>{t.style.minWidth="",i=Math.max(t.offsetWidth,i)})),e[t].forEach((t=>{t.style.minWidth=i+"px"}))};for(var r in e)i(r)}getBodyElement(){return this.bodyElement||(this.bodyElement=this.element.querySelector(".k-scheduler-body")),this.bodyElement}getCellIndex(t){return this.getCellDataIndex(t,"data-cell-index")}getRowIndex(t){return this.getCellDataIndex(t,"data-row-index")}getResourceIndex(t){return this.getCellDataIndex(t,"data-resource-index")}getCellDataIndex(t,e){return t?parseInt(t.getAttribute(e),10):-1}getDropSettings(){return this.options.dropOptions}getDropPosition(t){return this.getSlotUnderCursor(t)?"over":"forbidden"}getDropItemIndex(t,e){var i=this.getSlotUnderCursor(e);if(!i)return"";var r=this.getCellIndex(i),n=this.getRowIndex(i),o=this.getResourceIndex(i);return"".concat(n,":").concat(r,":").concat(o)}getId(){return this.element.closest(".k-scheduler").id}}function gK(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class mK extends fK{constructor(t,e){super(t,e),gK(this,"options",{dropOptions:{dropClueTargetSelector:"",dropClueEmptySelector:"",allowDropOver:!1,offsetDropClue:!1},jsinterop:{getMoveHint:"",moveAppointment:""}}),gK(this,"renderHintElement",((t,e)=>{var i=this.getAllDayRowElement();t.style.left=e.left+"px",t.style.width=e.width+"px",e.isAllDay&&i?(t.style.top="0px",t.style.height="100%",i.appendChild(t)):(t.style.top=e.top+"px",t.style.height=e.height+"px",this.getBodyElement().appendChild(t))})),this.extendOptions(e)}destroy(){this.allDayRowElement=null,super.destroy()}getAllDayRowElement(){return this.allDayRowElement||(this.allDayRowElement=this.element.querySelector(".k-scheduler-all-day-row")),this.allDayRowElement}}function yK(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class vK extends fK{constructor(t,e){super(t,e),yK(this,"options",{dropOptions:{dropClueTargetSelector:"",dropClueEmptySelector:"",allowDropOver:!1,offsetDropClue:!1},jsinterop:{getMoveHint:"",moveAppointment:""}}),yK(this,"renderHintElement",((t,e)=>{t.style.left=e.left+"px",t.style.width=e.width+"px",t.style.top=e.top+"px",t.style.height=e.height+"px",this.getBodyElement().appendChild(t)})),this.extendOptions(e)}destroy(){super.destroy()}getFirstCell(){return this.element.querySelector(".k-slot-cell")}}function bK(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class wK extends fK{constructor(t,e){super(t,e),bK(this,"options",{dropOptions:{dropClueTargetSelector:"",dropClueEmptySelector:"",allowDropOver:!1,offsetDropClue:!1},jsinterop:{getMoveHint:"",moveAppointment:""}}),bK(this,"renderHintElement",((t,e)=>{t.style.left=e.left+"px",t.style.width=e.width+"px",t.style.top=e.top+"px",t.style.height=e.height+"px",this.getBodyElement().appendChild(t)})),this.extendOptions(e)}destroy(){super.destroy()}getFirstCell(){return this.element.querySelector(".k-slot-cell")}}function xK(t,e){Qt(pK,t,e)}function SK(t,e){Qt(mK,t,e)}function kK(t,e){Qt(vK,t,e)}function CK(t,e){Qt(wK,t,e)}function AK(t){var e=re(t);return e?e.getSlotMetrics():{width:0,height:0,left:0}}function _K(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var TK="focus",OK="blur";class EK extends wE{constructor(t,e,i,r){super(t,e,i,r),_K(this,"options",{dotNetInstance:null,hasParent:!1,parentDataId:"",value:"",exportScale:2,popupScale:3,scale:1,debounceDelay:150,jsinterop:{onValueChanged:"",onFocus:"",onBlur:""}}),_K(this,"onFocus",(()=>{this.invokeMethodAsync(this.options.jsinterop.onFocus)})),_K(this,"onBlur",(()=>{this.invokeMethodAsync(this.options.jsinterop.onBlur)})),_K(this,"onWidgetChange",(()=>{this.debouncedWidgetChange()})),_K(this,"onWidgetDrawStart",(()=>{})),_K(this,"onWidgetDrawEnd",(()=>{})),_K(this,"changeValue",(()=>{this.widget&&this.exportImageAsync().then((t=>{this.setValue(t),this.invokeValueChanged(t)}))})),_K(this,"invokeValueChanged",(t=>{this.invokeMethodAsync(this.options.jsinterop.onValueChanged,t)})),this.initDebouncedWidgetChange(),this.extendOptions(u(e,{onChange:this.onWidgetChange,onDraw:this.onWidgetDrawStart,onDrawEnd:this.onWidgetDrawEnd})),this.widgetElement=this.element.querySelector(".k-signature-canvas"),this.bindEvents(),this.resetState(),this.initWidget(this.widgetElement),this.reloadImage()}destroy(){this.unbindEvents(),super.destroy()}getWidgetConstructor(){return Xq}initWidget(t){var e=g({},this.options);if(this.options.hasParent&&(!this.options.color||!this.options.backgroundColor)){var i=this.getParentSignature();i&&(e.color=this.options.color||i.widget.options.color,e.backgroundColor=this.options.backgroundColor||i.widget.options.backgroundColor)}super.initWidget(t,e)}refresh(){this.setWidgetOptions(this.options),this.reloadImage()}readThemeColors(){var t,e;if("undefined"!=typeof document){var i=this.element.ownerDocument.defaultView.getComputedStyle(this.element);t=i.color,e=i.backgroundColor}return{themeColor:t,themeBackgroundColor:e}}areThemeColorsChanged(t){return this.state.themeColor!==t.themeColor||this.state.themeBackgroundColor!==t.themeBackgroundColor}setOptions(t){var e=this.state.value!==t.value,i=this.areOptionsChanged(t,{ignoreOptions:["dotNetInstance","jsinterop","onChange","onDraw","onDrawEnd","value"]});if(!i&&!e){var{themeColor:r,themeBackgroundColor:n}=this.readThemeColors();if(!this.areThemeColorsChanged({themeColor:r,themeBackgroundColor:n}))return;this.state.themeColor=r,this.state.themeBackgroundColor=n}this.extendOptions(t),this.setWidgetOptions(this.options),this.initDebouncedWidgetChange(),(i||e)&&this.reloadImage()}setWidgetOptions(t){var e=g({},t);if(!(this.options.hasParent||this.options.value||t.color&&t.backgroundColor)){var{themeColor:i,themeBackgroundColor:r}=this.readThemeColors();t.color||(e.color=i),t.backgroundColor||(e.backgroundColor=r)}this.widget.setOptions(e)}extendOptions(t){super.extendOptions(t),this.options.hasParent&&(this.options.scale=this.options.popupScale)}bindEvents(){this.widgetElement&&(this.widgetElement.addEventListener(TK,this.onFocus),this.widgetElement.addEventListener(OK,this.onBlur))}unbindEvents(){this.widgetElement&&(this.widgetElement.removeEventListener(TK,this.onFocus),this.widgetElement.removeEventListener(OK,this.onBlur))}setState(t){this.state=g(this.state||{},t)}resetState(){this.setState({value:""})}initDebouncedWidgetChange(){this.debouncedWidgetChange&&this.debouncedWidgetChange.stop&&this.debouncedWidgetChange.stop(),this.debouncedWidgetChange=ji(this.changeValue,this.options.debounceDelay)}exportImageAsync(){var t=this.widgetElement.getBoundingClientRect(),e=this.options.hasParent?this.options.popupScale:1;return this.widget.exportImage({width:t.width*this.options.exportScale*e,height:t.height*this.options.exportScale*e})}reloadImage(){this.widget&&this.loadImage(this.options.value)}loadImage(t){this.widget&&x(t)&&(this.setValue(t),this.widget.loadImage(this.options.value))}setValue(t){this.state.value=t,this.options.value=t}getParentSignature(){return re(this.options.parentDataId)}}function MK(t,e,i){xE({id:t,widgetOptions:e,componentOptions:i,services:{themeService:new bE,intlService:ys},componentConstructor:EK})}function PK(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var IK="blur",DK="focus",FK="click",RK=[ge.ARROWDOWN,ge.ARROWUP],LK=".k-button",NK=".k-split-button-arrow";class BK extends HI{constructor(t,e){super(t,e),PK(this,"onBlur",(t=>{var e=t.relatedTarget,i=e&&q(this.suggestionListElement,e),r=e&&e.closest(NK);i||r||this.invokeBlur()})),PK(this,"onFocus",(()=>{this.invokeFocus()})),PK(this,"onArrowButtonClick",(()=>{nt(this.button)})),this.button=this.element.querySelector(LK),this.arrowButton=this.element.querySelector(NK),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.button.addEventListener(IK,this.onBlur),this.button.addEventListener(DK,this.onFocus),this.arrowButton.addEventListener(FK,this.onArrowButtonClick),this.navigationService.bind(RK,this.invokeKeyDown),this.navigationService.bind("printableKey",this.invokeKeyDown)}unbindEvents(){this.arrowButton.removeEventListener(FK,this.onArrowButtonClick),this.button.removeEventListener(IK,this.onBlur),this.button.removeEventListener(DK,this.onBlur)}}class jK extends BK{constructor(t,e){super(t,e),this.extendOptions(e)}}function zK(t,e){Qt(jK,t,e)}function UK(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var $K=".k-splitbar",HK=".k-splitbar-draggable-horizontal",VK=".k-splitbar-draggable-vertical",qK="horizontal",WK=Number.MAX_SAFE_INTEGER,XK="k-pane-static",GK=".k-collapse-next",KK=".k-collapse-prev",YK=t=>/%$/.test(t),JK=(t,e)=>{var i=parseFloat(t);return YK(t)&&(i=e*i/100),i},ZK=(t,e,i)=>t?e===qK?t["".concat(i,"Width")]:t["".concat(i,"Height")]:0;class QK extends V{constructor(t,e){super(t,e),UK(this,"options",{dotNetInstance:null,orientation:qK,resizable:!0,keyboardResizeDelta:10,panes:[],jsinterop:{resizePane:""}}),UK(this,"onResizableResizeStart",(t=>{t.originalEvent.stopPropagation();var e=Bt(t.originalCurrentTarget,$K);this.resetPaneState(),this.addResizeOverlays(e)})),UK(this,"onResizableResize",(t=>{var e=Bt(t.originalCurrentTarget,$K),i=this.isHorizontal()?t.delta.x:t.delta.y;this.dragSplitterBar(e,i)})),UK(this,"onResizableResizeEnd",(()=>{this.removeResizeOverlays(),this.invokeResizePane()})),UK(this,"onElementKeyDown",(t=>{t.target.closest($K)&&this.onSplitterBarKeyDown(t)})),this.extendOptions(e),this.resetPaneState(),this.createResizable(),this.bindEvents()}destroy(){this.unbindEvents(),this.destroyResizable(),super.destroy()}setOptions(t){this.extendOptions(t);for(var e=0;e<this.options.panes.length;e++){if(this.options.panes[e].forceExpanded){var i=this.getPaneElement(e);Q(XK,i)}}}bindEvents(){this.element&&this.element.addEventListener("keydown",this.onElementKeyDown)}unbindEvents(){this.element&&this.element.removeEventListener("keydown",this.onElementKeyDown)}setState(t){this.state=u(this.state||{},t)}resetPaneState(){this.setState({resizedPanes:{}})}createResizable(){this.options.resizable&&(this.resizable=new bI(this.element,{draggable:{filter:[HK,VK].join(","),ignore:[KK,GK].join(",")},events:{resizeStart:this.onResizableResizeStart,resize:this.onResizableResize,resizeEnd:this.onResizableResizeEnd}}))}destroyResizable(){this.resizable&&(this.resizable.destroy(),this.resizable=null)}dragSplitterBar(t,e){var{leftPane:i,rightPane:r}=this.getAdjacentPanes(t),n=i.computedSize+e,o=n>i.min&&n<i.max,s=this.getPaneElements().filter((t=>!t.style["flex-basis"])),a=(i.size||r.size)&&s.length>1;i.size&&r.size||a?o&&(this.resizePane(i,e),this.resizePane(r,-e)):r.size?this.resizePane(r,-e):this.resizePane(i,e)}resizePane(t,e){var i=ue(t.computedSize+e,t.min,t.max),r="";if(YK(t.size)){var n=this.getElementClientSize();r="".concat(100*i/n,"%")}else r=(t=>"".concat(t,"px"))(i);this.setPaneSize(t.index,r)}isHorizontal(){return this.options.orientation===qK}getPane(t){return(this.options.panes||[])[t]}getPaneElements(){return Array.from(this.element.children||[]).filter((t=>tt("k-pane",t)))}getPaneElement(t){return this.getPaneElements()[t]}getAdjacentPanes(t){var e=t,i=t+1,r=this.getPaneElement(e),n=this.getPaneElement(i),o=this.getPane(e),s=this.getPane(i),a=this.getPaneOffsetSize(e),l=this.getPaneOffsetSize(i),c=a+l,h=this.getElementClientSize(),u=t=>JK(t,h),{leftPaneMaxSize:p,rightPaneMaxSize:d}=this.getAdjacentPanesMaxSize(t);return{leftPane:{index:e,computedSize:a,min:u(o.min)||c-u(s.max)||0,max:p,size:r.style["flex-basis"],collapsible:o.collapsible},rightPane:{index:i,computedSize:l,min:u(s.min)||c-u(o.max)||0,max:d,size:n.style["flex-basis"],collapsible:s.collapsible}}}getAdjacentPanesMaxSize(t){var{size:e,min:i,max:r}=this.getPaneSizes(t),{size:n,min:o,max:s}=this.getPaneSizes(t+1),a=e+n;return{leftPaneMaxSize:Math.min(r,a-o),rightPaneMaxSize:Math.min(s,a-i)}}getPaneSizes(t){var e=this.getElementClientSize(),i=this.getPane(t);return{size:this.getPaneOffsetSize(t),min:i.min?JK(i.min,e):0,max:i.max?JK(i.max,e):WK}}getPaneOffsetSize(t){var e=((t,e)=>{if(!t)return 0;var i=t.getBoundingClientRect();return e===qK?i.width:i.height})(this.getPaneElement(t),this.options.orientation);return e}getElementClientSize(){var t=((t,e)=>ZK(t,e,"client"))(this.element,this.options.orientation);return t}setPaneSize(t,e){var i=this.getPaneElement(t);i&&(this.state.resizedPanes[t]={index:t,size:e},(this.options.panes[t]||{}).forceExpanded||Z(XK,i),i.style["flex-basis"]=e)}addResizeOverlays(t){this.addResizeOverlay(t),this.addResizeOverlay(t+1)}addResizeOverlay(t){var e=this.getPaneElement(t);if(e){var i=j('<div class="k-splitter-overlay k-overlay"></div>');e.appendChild(i)}}removeResizeOverlays(){Array.from(this.element.querySelectorAll(".k-splitter-overlay")).forEach((t=>{t.remove()}))}invokeResizePane(){Object.values(this.state.resizedPanes).forEach((t=>{this.invokeMethodAsync(this.options.jsinterop.resizePane,{index:t.index,size:t.size})}))}isSplitterBarDraggable(t){return tt(HK.replace(".",""),t)||tt(VK.replace(".",""),t)}getSplitterBarIndex(t){return Bt(t,$K)}onSplitterBarKeyDown(t){var e=t.target.closest($K),i=t.key;if(this.isSplitterBarDraggable(e)){var r=Bt(e,$K),n=this.options.keyboardResizeDelta,o=this.isHorizontal(),s=i===ge.ARROWRIGHT&&o||i===ge.ARROWDOWN&&!o,a=i===ge.ARROWLEFT&&o||i===ge.ARROWUP&&!o,l=s?1:-1;(s||a)&&(t.preventDefault(),this.dragSplitterBar(r,l*n),this.invokeResizePane())}}}function tY(t,e){Qt(QK,t,e)}function eY(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var iY=".k-tilelayout-item";class rY extends V{constructor(t,e){super(t,e),eY(this,"options",{dotNetInstance:null,resizable:!1,reorderable:!1,jsinterop:{resizeItem:"",reorderItem:""}}),eY(this,"onResizableResizeStart",(t=>{var e=t.originalCurrentTarget.closest(iY),i=parseInt(e.style.gridColumnEnd.substring(5)),r=parseInt(e.style.gridRowEnd.substring(5)),n=Array.from(this.element.querySelectorAll(iY)).find((t=>"1"===t.style.order)),o=n.offsetTop-this.element.offsetTop,s=n.offsetLeft-this.element.offsetLeft,a=(e.offsetWidth-(i-1)*s)/i,l=(e.offsetHeight-(r-1)*o)/r,c=t.originalCurrentTarget.className;this.resizeState={item:e,columnWidth:a,columnHeight:l,segmentWidth:a+s,segmentHeight:l+o,totalWidth:this.element.offsetWidth,originalWidth:e.offsetWidth,originalHeight:e.offsetHeight,originalColSpan:i,originalRowSpan:r,maxWidth:this.element.offsetWidth-(e.offsetLeft+s),colSpanDelta:0,rowSpanDelta:0,resizeSide:c.indexOf("ew")>-1||c.indexOf("nwse")>-1,resizeDown:c.indexOf("ns")>-1||c.indexOf("nwse")>-1}})),eY(this,"onResizableResize",(t=>{this.pinContainer(this.resizeState.item),this.createResizeHint(this.resizeState.item);var e=()=>{this.resizeState.item.style.top=this.hint.offsetTop+"px",this.resizeState.item.style.left=this.hint.offsetLeft+"px"};if(this.resizeState.resizeSide){var i=this.resizeState.originalWidth+t.initialDelta.x;i<=this.resizeState.maxWidth&&i>=this.resizeState.columnWidth&&(this.resizeState.item.style.width=i+"px",this.resizeState.colSpanDelta=Math.floor((t.initialDelta.x+this.resizeState.segmentWidth/2)/this.resizeState.segmentWidth),this.hint.style.gridColumnEnd="span "+(this.resizeState.originalColSpan+this.resizeState.colSpanDelta),this.resizeState.item.style.gridColumnEnd="span "+(this.resizeState.originalColSpan+this.resizeState.colSpanDelta),e(),this.resizeState.resizeDown||(this.resizeState.item.style.height=this.hint.offsetHeight+"px"))}if(this.resizeState.resizeDown){var r=this.resizeState.originalHeight+t.initialDelta.y;r>=this.resizeState.columnHeight&&(this.resizeState.item.style.height=r+"px",this.resizeState.rowSpanDelta=Math.floor((t.initialDelta.y+this.resizeState.segmentHeight/2)/this.resizeState.segmentHeight),this.hint.style.gridRowEnd="span "+(this.resizeState.originalRowSpan+this.resizeState.rowSpanDelta),this.resizeState.item.style.gridRowEnd="span "+(this.resizeState.originalRowSpan+this.resizeState.rowSpanDelta),e())}})),eY(this,"onResizableResizeEnd",(()=>{(this.resizeState.colSpanDelta||this.resizeState.rowSpanDelta)&&this.invokeMethodAsync(this.options.jsinterop.resizeItem,{order:parseInt(this.resizeState.item.style.order),colSpan:this.resizeState.originalColSpan+this.resizeState.colSpanDelta,rowSpan:this.resizeState.originalRowSpan+this.resizeState.rowSpanDelta}),this.unpinContainer(this.resizeState.item),this.destroyResizeHint(),this.resizeState=null})),eY(this,"onReorderableDragStart",(t=>{var e=t.originalCurrentTarget.closest(iY),i=parseInt(e.style.order);this.reorderState={item:e,left:e.offsetLeft,top:e.offsetTop,order:i,originalOrder:i}})),eY(this,"onReorderableDrag",(t=>{this.pinContainer(this.reorderState.item),this.createResizeHint(this.reorderState.item),this.reorderState.item.style.left=this.reorderState.left+t.initialDelta.x+"px",this.reorderState.item.style.top=this.reorderState.top+t.initialDelta.y+"px";var e=this.getItemUnderCursor(t,this.reorderState.item);if(e){var i,r,n,o=e.getBoundingClientRect(),s=t.clientX<o.left+o.width/2,a=parseInt(e.style.order),l=a+(s?0:1);if(e===this.reorderState.lastItemUnderCursor&&s===this.reorderState.lastIsLeftOfMiddle)return;if(a>this.reorderState.order?(i=this.reorderState.order+1,r=l,n=-1,this.reorderState.order=l-1):a<this.reorderState.order&&(i=l,r=this.reorderState.order,n=1,this.reorderState.order=l),r>i){this.shiftItemsOrder(i,r,n),this.hint.style.order=this.reorderState.order,this.reorderState.item.style.order=this.reorderState.order;var c=this.getItemUnderCursor(t,this.reorderState.item);if(this.reorderState.lastItemUnderCursor=c,c){var h=c.getBoundingClientRect(),u=t.clientX<h.left+h.width/2;this.reorderState.lastIsLeftOfMiddle=u}}}})),eY(this,"onReorderableDragEnd",(()=>{this.reorderState.order!==this.reorderState.originalOrder&&this.invokeMethodAsync(this.options.jsinterop.reorderItem,{fromOrder:this.reorderState.originalOrder,toOrder:this.reorderState.order}),this.destroyResizeHint(),this.unpinContainer(this.reorderState.item),this.reorderState=null})),eY(this,"pinContainer",(t=>{if("absolute"!==t.style.position){var e=t.offsetLeft,i=t.offsetTop,r=t.offsetWidth,n=t.offsetHeight;t.style.position="absolute",t.style.left=e+"px",t.style.top=i+"px",t.style.width=r+"px",t.style.height=n+"px",t.style.zIndex=2}})),eY(this,"unpinContainer",(t=>{t.style.position="",t.style.left="",t.style.top="",t.style.width="",t.style.height="",t.style.zIndex=""})),eY(this,"createResizeHint",(t=>{this.hint||(this.hint=document.createElement("div"),this.hint.className="k-layout-item-hint k-layout-item-hint-resize",this.hint.style.order=t.style.order,this.hint.style.gridColumnEnd=t.style.gridColumnEnd,this.hint.style.gridRowEnd=t.style.gridRowEnd,this.element.appendChild(this.hint))})),eY(this,"destroyResizeHint",(()=>{this.hint&&(this.element.removeChild(this.hint),this.hint=null)})),eY(this,"getElementUnderCursor",((t,e)=>{var i=We(t);return e&&e.contains(i)&&(J(e),i=We(t),Y(e)),i})),eY(this,"getItemUnderCursor",((t,e)=>{var i=this.getElementUnderCursor(t,e);return i?i.closest(iY):null})),eY(this,"shiftItemsOrder",((t,e,i)=>{for(var r=this.element.querySelectorAll(iY),n=0;n<r.length;n++){var o=r[n],s=parseInt(o.style.order);s>=t&&s<e&&(o.style.order=s+i)}})),this.extendOptions(e),this.options.resizable&&this.createResizable(),this.options.reorderable&&this.createReorderable(),this.bindEvents()}destroy(){this.destroyResizable(),this.destroyReorderable(),this.unbindEvents(),super.destroy()}bindEvents(){}unbindEvents(){}setOptions(t){this.options.resizable!==t.resizable&&(t.resizable?this.createResizable():this.destroyResizable()),this.options.reorderable!==t.reorderable&&(t.reorderable?this.createReorderable():this.destroyReorderable()),this.extendOptions(t)}createResizable(){this.resizable=new bI(this.element,{draggable:{filter:".k-resize-handle"},events:{resizeStart:this.onResizableResizeStart,resize:this.onResizableResize,resizeEnd:this.onResizableResizeEnd}})}destroyResizable(){this.resizable&&(this.resizable.destroy(),this.resizable=null,this.destroyResizeHint())}createReorderable(){this.reorderable=new bI(this.element,{draggable:{filter:".k-tilelayout-item-header"},events:{resizeStart:this.onReorderableDragStart,resize:this.onReorderableDrag,resizeEnd:this.onReorderableDragEnd}})}destroyReorderable(){this.reorderable&&(this.reorderable.destroy(),this.reorderable=null)}}function nY(t,e){Qt(rY,t,e)}function oY(t){te(t)}function sY(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var aY="k-active";class lY extends V{constructor(t,e){super(t,e),sY(this,"options",{dotNetInstance:null}),sY(this,"setActive",(()=>(this.element&&!this.element.classList.contains(aY)&&this.element.classList.add(aY),!0))),sY(this,"removeActive",(()=>(this.element&&this.element.classList.contains(aY)&&this.element.classList.remove(aY),!0))),this.extendOptions(e),this.bindEvents()}destroy(){this.navigationService.destroy(),this.unbindEvents(),super.destroy()}bindEvents(){this.initNavigationService(),this.element.addEventListener("mousedown",this.setActive),this.element.addEventListener("mouseleave",this.removeActive)}unbindEvents(){this.element.removeEventListener("mousedown",this.setActive),this.element.removeEventListener("mouseleave",this.removeActive)}initNavigationService(){this.navigationService=new we(this.element),this.navigationService.bind(ge.SPACE,this.setActive)}}function cY(t,e){Qt(lY,t,e)}function hY(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var uY="k-callout-n",pY="k-callout-s",dY="hover",fY="bottom",gY="mouseenter",mY="mouseleave",yY="mousedown",vY="click",bY="data-telerik-tooltip-id";class wY extends V{constructor(t,e){super(t,e),hY(this,"options",{dotNetInstance:null,showOn:"",targetSelector:"",popupId:"",jsinterop:{open:"",close:""}}),hY(this,"onMouseDown",(t=>{var e=this.getPopupComponent();e.anchor&&!e.isChild(t.target)&&this.close(e.anchor)})),hY(this,"onClick",(t=>{var e=t.target;if(!this.shouldSkipAnchor(e)){var i=this.getClosestMatchingAnchor(e);this.open(i)}})),hY(this,"onAnyTargetMouseEnter",(t=>{var e=t.target;if(!this.shouldSkipAnchor(e)){var i=this.getClosestMatchingAnchor(e);this.removeTitle(i)}})),hY(this,"onMouseEnter",(t=>{this.onAnyTargetMouseEnter(t);var e=this.getClosestMatchingAnchor(t.target);this.open(e)})),hY(this,"onMouseLeave",(t=>{var e=t.target;if(!this.shouldSkipAnchor(e)){var i=this.getPopupComponent(),r=t.relatedTarget;if(!W(i.anchor,r)){var n=this.getClosestMatchingAnchor(e);this.close(n)}}})),hY(this,"open",(t=>{if(f(t)&&!this.shouldSkipAnchor(t)){var e=this.getDataAttributes(t),i=this.getPopupComponent();i.anchors.forEach((e=>{W(e,t)&&(i.anchor=e)})),this.invokeMethodAsync(this.options.jsinterop.open,e)}})),hY(this,"close",(t=>{f(t)&&(this.restoreTitle(t),this.invokeMethodAsync(this.options.jsinterop.close))})),this.id=m(),this.options=e,this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){var t=window.document.documentElement;t&&(this.options.showOn===dY?(t.addEventListener(gY,this.onMouseEnter,!0),t.addEventListener(mY,this.onMouseLeave,!0)):(t.addEventListener(gY,this.onAnyTargetMouseEnter,!0),t.addEventListener(vY,this.onClick,!0)),t.addEventListener(yY,this.onMouseDown,!0))}unbindEvents(){var t=window.document.documentElement;t&&(this.options.showOn===dY?(t.removeEventListener(gY,this.onMouseEnter,!0),t.removeEventListener(mY,this.onMouseLeave,!0)):(t.removeEventListener(gY,this.onAnyTargetMouseEnter,!0),t.removeEventListener(vY,this.onClick,!0)),t.removeEventListener(yY,this.onMouseDown,!0))}getDataAttributes(t){var e=t.getAttribute("title")||t.getAttribute("data-title"),i=t.getAttribute("alt")||e;return i&&t.setAttribute("data-title",i),t.removeAttribute("title"),t.dataset}restoreTitle(t){if(f(t)){var e=t.getAttribute("data-title")||t.getAttribute("title");e&&t.setAttribute("title",e),t.removeAttribute("data-title"),this.untrackAnchor(t)}}removeTitle(t){if(f(t)){this.trackAnchor(t);var e=t.getAttribute("title")||t.getAttribute("data-title");e&&t.setAttribute("data-title",e),t.removeAttribute("title")}}flipCallout(t){var e=this.getPopupComponent();if(e.flipped){var i=e.element.querySelector(".k-callout");"top"===t?(Q(pY,i),Z(uY,i)):t===fY&&(Q(uY,i),Z(pY,i))}}correctCalloutPosition(){var t=this.getPopupComponent(),e=t.getElementRect(t.anchor),i=t.getElementRect(t.element),r=e.left-i.left+.5*e.width,n=t.element.querySelector(".k-callout");n&&(n.style.left=r+"px")}positionCallout(t){this.flipCallout(t),"top"!==t&&t!==fY||this.correctCalloutPosition()}getCalloutSize(){var t=document.createElement("div");t.className="k-callout ".concat(uY),t.style.visibility="hidden",document.body.appendChild(t);var e=window.getComputedStyle(t),i=e.borderWidth||e.borderTopWidth,r=parseFloat(i);return document.body.removeChild(t),r}getPopupComponent(){return re(this.options.popupId)}shouldSkipAnchor(t){var e=this.isAnchorTracked(t),i=this.ownsAnchorBySelector(t);return!e&&!i}trackAnchor(t){f(t)&&t.setAttribute(bY,this.id)}untrackAnchor(t){f(t)&&t.removeAttribute(bY)}isAnchorTracked(t){return f(t)&&t.getAttribute(bY)===this.id}ownsAnchorBySelector(t){return f(t)&&Boolean(t.closest(this.options.targetSelector))}getClosestMatchingAnchor(t){var e=this.getClosestTrackedAnchor(t);return e||this.getClosestAnchorBySelector(t)}getClosestTrackedAnchor(t){return f(t)?t.closest(R(bY,this.id)):null}getClosestAnchorBySelector(t){return f(t)?t.closest(this.options.targetSelector):null}repositionPopup(){var t=this.getPopupComponent();t&&t.positionElement()}}function xY(t,e){re(t)||oe(t,new wY(null,e))}function SY(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class kY extends Ri{constructor(t,e){super(t,e),SY(this,"options",{dotNetInstance:null,rowDraggable:!1,draggedItemsHint:"",rowDraggableOptions:{allowDropOver:!0},dropOptions:{dropClueTargetSelector:".k-grid-content tr.k-master-row",dropClueEmptySelector:".k-grid-norecords",allowDropOver:!0,offsetDropClue:!1},componentSelector:".k-treelist",jsinterop:{removeFocus:"",blur:"",rowDrop:""}}),this.extendOptions(e)}destroy(){super.destroy()}}function CY(t,e){Qt(kY,t,e)}function AY(t){te(t)}var _Y=Array.from,TY=t=>null!=t,OY=t=>{var e=t.match(/\.([^\.]+)$/);return e?e[0]:""};function EY(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function MY(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var PY="error",IY=()=>({}),DY=function(t){return y(t)?t:IY},FY=(t,e)=>{var i=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?EY(Object(i),!0).forEach((function(e){MY(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):EY(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({request:RY(t)},e);return i},RY=t=>({status:t.status,statusText:t.statusText,responseText:t.responseText,responseType:t.responseType});class LY{static send(t){var{url:e,method:i,data:r,withCredentials:n=!1,headers:o={},success:s,error:a,progress:l}=t,c=new XMLHttpRequest,h=DY(s),u=DY(a),p=DY(l);return c.withCredentials=n,c.addEventListener("load",(()=>{c.status>=200&&c.status<300?h(FY(c)):u(FY(c))})),c.addEventListener(PY,(()=>{u(FY(c))})),c.upload.addEventListener(PY,(()=>{u(FY(c))})),c.upload.addEventListener("progress",(t=>{p(FY(c,{progress:Math.round(100*t.loaded/t.total)}))})),c.open(i,e,!0),Object.entries(o).forEach((t=>{var[e,i]=t;c.setRequestHeader(e,i)})),c.send(r),c}}var NY=0,BY=1;function jY(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class zY extends V{constructor(t){super(null,t),jY(this,"options",{saveUrl:"",saveMethod:"POST",saveField:"files",removeUrl:null,removeMethod:"POST",removeField:"files",withCredentials:!1,events:{uploadProgress:null,uploadSuccess:null,uploadError:null}}),jY(this,"onUploadProgress",(t=>{this.trigger("uploadProgress",t)})),jY(this,"onUploadSuccess",(t=>{this.trigger("uploadSuccess",t)})),jY(this,"onUploadError",(t=>{this.trigger("uploadError",t)})),jY(this,"onRemoveSuccess",(t=>{this.trigger("removeSuccess",t)})),jY(this,"onRemoveError",(t=>{this.trigger("removeError",t)})),this.extendOptions(t),this.resetState()}setOptions(t){this.extendOptions(t)}resetState(){this.setState({fileRequests:{}})}setState(t){this.state=u(this.state||{},t)}uploadFiles(t,e){_Y(t).forEach((t=>{this.uploadFile(t,e)}))}uploadFile(t,e){this.sendUploadRequest(t,e)}cancelFile(t){var e=this.state.fileRequests[t];e&&(this.untrackUploadRequest(t),e.abort())}removeFile(t,e){this.sendRemoveRequest(t,e)}sendUploadRequest(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options.saveUrl){var i=t.id,r=this.getFileUploadFormData(t.rawFile,e.data),n=LY.send({url:this.options.saveUrl,method:this.options.saveMethod,withCredentials:this.options.withCredentials,data:r,headers:e.headers,success:t=>{this.onUploadSuccess({operation:NY,request:t.request,file:{id:i}})},error:t=>{this.onUploadError({operation:NY,request:t.request,file:{id:i}})},progress:t=>{this.onUploadProgress({file:{id:i,progress:t.progress}})}});this.trackUploadRequest(i,n)}}sendRemoveRequest(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options.removeUrl){var i=t.id,r=this.getFileRemoveFormData(t,e.data);LY.send({url:this.options.removeUrl,method:this.options.removeMethod,withCredentials:this.options.withCredentials,data:r,headers:e.headers,success:t=>{this.onRemoveSuccess({operation:BY,request:t.request,file:{id:i}})},error:t=>{this.onRemoveError({operation:BY,request:t.request,file:{id:i}})}})}}trackUploadRequest(t,e){this.state.fileRequests[t]=e}untrackUploadRequest(t){this.state.fileRequests[t]=null}getFileUploadFormData(t,e){return this.getFormData({field:this.options.saveField,data:t,additionalData:e})}getFileRemoveFormData(t,e){return this.getFormData({field:this.options.removeField,data:t.name,additionalData:e})}getFormData(t){var{data:e,field:i,additionalData:r={}}=t,n=new FormData;return Object.keys(r).forEach((t=>{n.append(t,r[t])})),n.append(i,e),n}}var UY=0,$Y=1,HY=2,VY=3;class qY{validateFile(t,e){var{allowedExtensions:i,minFileSize:r,maxFileSize:n}=e;return{validExtension:this.isValidFileExtension(t.extension,i),validMinFileSize:this.isValidMinFileSize(t.size,r),validMaxFileSize:this.isValidMaxFileSize(t.size,n)}}isValidFileExtension(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return!TY(e)||e.map((t=>t.toLowerCase())).includes(t.toLowerCase())}isValidMinFileSize(t,e){return!TY(e)||t>e}isValidMaxFileSize(t,e){return!TY(e)||t<e}}class WY{constructor(t){this.id=m(),this.name=_(t.name),this.size=t.size,this.extension=t.extension,this.progress=t.progress||0,this.rawFile=t.rawFile,this.status=t.status||UY,this.invalidExtension=t.invalidExtension||!1,this.invalidMinFileSize=t.invalidMinSize||!1,this.invalidMaxFileSize=t.invalidMaxFileSize||!1}isValid(){return!this.invalidExtension&&!this.invalidMinFileSize&&!this.invalidMaxFileSize}}function XY(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var GY="change",KY="keydown",YY="focusout",JY=[ge.ARROWLEFT,ge.ARROWRIGHT,ge.ARROWUP,ge.ARROWDOWN],ZY=t=>t?parseInt(t.getAttribute("data-index"),10):null;class QY extends V{constructor(t,e){super(t,e),XY(this,"options",{dotNetInstance:null,allowedExtensions:[],minFileSize:null,maxFileSize:null,multiple:!1,jsinterop:{onSelect:null,focusout:null}}),XY(this,"onInputChange",(t=>{var e=this.getFilesInfo(t.target.files);navigator.userAgent.match(/webkit/i)&&(t.target.type="",t.target.type="file"),this.options.multiple||this.clearFiles(),this.addFiles(e),this.triggerFileSelect(e)})),XY(this,"onKeyDown",(t=>{JY.includes(t.key)&&t.preventDefault()})),XY(this,"onFocusOut",(t=>{var e=t.target.closest(".k-file"),i=ZY(e),r=t.relatedTarget?t.relatedTarget.closest(".k-file"):null,n=ZY(r);this.invokeFocusOut(i,n)})),this.extendOptions(e),this.inputElement=this.element.querySelector("input[type='file']"),this.initValidator(),this.resetState(),this.bindEvents()}destroy(){this.unbindEvents(),this.inputElement=null,this.destroyValidator(),super.destroy()}bindEvents(){this.inputElement&&this.inputElement.addEventListener(GY,this.onInputChange),this.element.addEventListener(KY,this.onKeyDown),this.element.addEventListener(YY,this.onFocusOut)}unbindEvents(){this.inputElement&&this.inputElement.removeEventListener(GY,this.onInputChange),this.element.removeEventListener(KY,this.onKeyDown),this.element.removeEventListener(YY,this.onFocusOut)}resetState(){this.setState({files:[]})}setState(t){this.state=u(this.state||{},t)}initValidator(){this.validator=new qY}destroyValidator(){this.validator=null}triggerFileSelect(t){return this.invokeMethodAsync(this.options.jsinterop.onSelect,t)}addFiles(t){_Y(t).forEach((t=>{this.addFile(t)}))}addFile(t){this.getFile(t.id)||(this.validateFile(t),this.state.files.push(t))}removeFileFromState(t){var e=this.state.files.filter((e=>e.id!==t));this.setState({files:e})}getFiles(){return this.state.files}getFile(t){return this.state.files.find((e=>e.id===t))}getFileInfo(t){var e=(t=>({name:t.name,size:t.size,extension:OY(t.name),rawFile:t}))(t);return new WY(e)}getFilesInfo(t){return _Y(t).map(this.getFileInfo)}clearFiles(){this.setState({files:[]})}validateFile(t){if(this.validator){var e=this.validator.validateFile(t,{allowedExtensions:this.options.allowedExtensions,minFileSize:this.options.minFileSize,maxFileSize:this.options.maxFileSize});t.invalidExtension=!e.validExtension,t.invalidMinFileSize=!e.validMinFileSize,t.invalidMaxFileSize=!e.validMaxFileSize}}invokeFocusOut(t,e){var i;null!==(i=t)&&i>=0&&setTimeout((()=>{this.invokeMethodAsync(this.options.jsinterop.focusout,{relatedTargetFileIndex:e})}),1)}focusFile(t){var e=Array.from(this.element.querySelectorAll(".k-file")||[])[t];this.focusElement(e)}focusInput(){this.focusElement(this.inputElement)}focusElement(t){t instanceof HTMLElement&&nt(t)}openSelectFileDialog(){this.inputElement&&this.inputElement.click&&this.inputElement.click()}}function tJ(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class eJ extends QY{constructor(t,e){super(t,e),tJ(this,"options",{saveUrl:null,saveField:"files",removeUrl:null,removeField:"files",withCredentials:!1,autoUpload:!1,jsinterop:{onProgress:null,onSuccess:null,onError:null}}),tJ(this,"onProgress",(t=>{var e=this.getFile(t.file.id);TY(e)&&(e.progress=t.file.progress,this.invokeMethodAsync(this.options.jsinterop.onProgress,{files:[e],progress:t.file.progress}))})),tJ(this,"onSuccess",(t=>{var e=[this.getFile(t.file.id)];t.operation===BY?this.removeFileFromState(t.file.id):this.setFileStatus(e,$Y),this.invokeMethodAsync(this.options.jsinterop.onSuccess,{operation:t.operation,files:e,request:t.request})})),tJ(this,"onError",(t=>{var e=[this.getFile(t.file.id)];t.operation===NY&&this.setFileStatus(e,VY),this.invokeMethodAsync(this.options.jsinterop.onError,{operation:t.operation,files:e,request:t.request})})),this.extendOptions(e),this.initOrUpdateUploadService(this.options)}destroy(){this.destroyUploadService(),super.destroy()}setOptions(t){this.extendOptions(t),this.initOrUpdateUploadService(this.options)}initOrUpdateUploadService(t){this.uploadService?this.uploadService.setOptions(t):this.uploadService=this.initUploadService(t)}initUploadService(t){return new zY({saveUrl:t.saveUrl,saveField:t.saveField,removeUrl:t.removeUrl,removeField:t.removeField,withCredentials:t.withCredentials,events:{uploadProgress:this.onProgress,uploadSuccess:this.onSuccess,uploadError:this.onError,removeSuccess:this.onSuccess,removeError:this.onError}})}destroyUploadService(){this.uploadService&&this.uploadService.destroy()}deleteFile(t){var{fileId:e,options:i}=t;this.removeFile(e,i)}removeFile(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.getFile(t);i&&(i.status===$Y?this.uploadService.removeFile(i,{headers:e.requestHeaders,data:e.requestData}):this.removeFileFromState(t))}uploadFiles(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(t.files||[]).length>0?t.files:this.getFiles(),i=this.getFilesForUpload(e);this.setFileStatus(i,HY),this.uploadService.uploadFiles(i,{headers:t.requestHeaders,data:t.requestData})}retryFile(t){var{fileId:e,options:i={}}=t,r=this.getFile(e);r&&r.status===VY&&this.uploadService.uploadFile(r,{headers:i.requestHeaders,data:i.requestData})}cancelFile(t){this.getFile(t)&&(this.uploadService.cancelFile(t),this.removeFile(t))}focusClearButton(){var t=this.element.querySelector(".k-clear-selected");this.focusElement(t)}focusUploadButton(){var t=this.element.querySelector(".k-upload-selected");this.focusElement(t)}getFilesForUpload(){var t=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((e=>{var i=this.getFile(e.id);this.isFileForUpload(i)&&t.push(i)})),t}isFileForUpload(t){return t.isValid()&&t.status===UY}setFileStatus(t,e){(Array.isArray(t)?t:[t]).forEach((t=>{TY(t)&&(t.status=e)}))}openFileSelect(){this.inputElement&&this.inputElement.click()}}class iJ extends QY{constructor(t,e){super(t,e),this.extendOptions(e)}destroy(){super.destroy()}setOptions(t){this.extendOptions(t)}deleteFile(t){this.removeFileFromState(t)}readBlob(t){return function(t){return new Promise((function(e,i){var r=new FileReader;r.onerror=function(){r.abort(),i("Error reading file.")},r.onload=function(){e(r.result)},t&&r.readAsArrayBuffer(t.rawFile)}))}(t)}readBytes(t){var e=this.getFile(t[0].fileId);return this.readBlob(e).then((function(e){var i=new Uint8Array(e,t[0].start,Math.min(e.byteLength,t[0].count));return btoa(String.fromCharCode.apply(null,i))}))}triggerFileSelect(t){return this.invokeMethodAsync(this.options.jsinterop.onSelect,t)}}function rJ(t,e){Qt(eJ,t,e)}function nJ(t,e){Qt(iJ,t,e)}function oJ(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var sJ=F("data-col-index"),aJ=Array.from;class lJ extends V{constructor(t,e){super(t,e),oJ(this,"options",{dotNetInstance:null,tableSelector:".k-grid-table",debounceDelay:180,headerSelector:"k-grid-header",contentSelector:"k-grid-content",footerSelector:"k-grid-footer",jsinterop:{onScroll:""}}),oJ(this,"detectScrollTopChanged",(t=>{this.state.scrollTopChanged=this.state.scrollTop!==t.target.scrollTop,this.state.scrollTop=t.target.scrollTop})),oJ(this,"onScroll",(t=>{if(!this.state.scrollTopChanged){var e=document.activeElement?document.activeElement.closest(sJ):null,i=e?e.closest(L("k-focused"))||e:null,r=i?i.closest([L(this.options.headerSelector),L(this.options.contentSelector),L(this.options.footerSelector)].join(",")):null,n=k(i),o=Pt(i,r),s=0;if(i){var a=i.getBoundingClientRect().width,l=i.closest("tr"),c=(l?aJ(l.querySelectorAll(sJ)):[]).filter(De);s=c.reduce(((t,e)=>t+e.getBoundingClientRect().width),0),c.length&&s+a>this.element.clientWidth&&(o=!0)}this.invokeScroll({scrollLeft:t.target.scrollLeft,containsActiveElement:n,isActiveCellInView:o})}})),this.extendOptions(e),this.bindEvents(),this.setState({scrollTop:0,scrollTopChanged:!1,scrollLeft:0})}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.debouncedScroll=ji((t=>{this.onScroll(t)}),this.options.debounceDelay).bind(this),this.element.addEventListener("scroll",this.detectScrollTopChanged),this.element.addEventListener("scroll",this.debouncedScroll)}unbindEvents(){this.element.removeEventListener("scroll",this.detectScrollTopChanged),this.element.removeEventListener("scroll",this.debouncedScroll),this.debouncedScroll=null}setState(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state=u(this.state||{},t)}invokeScroll(t){var{scrollLeft:e,containsActiveElement:i,isActiveCellInView:r}=t;this.invokeMethodAsync(this.options.jsinterop.onScroll,{scrollLeft:e,containsActiveElement:i,isActiveCellInView:r})}}function cJ(t,e){Qt(lJ,le(t,"VirtualColumnScroller"),e)}function hJ(t){te(le(t,"VirtualColumnScroller"))}function uJ(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class pJ extends V{constructor(t,e){super(t,e),uJ(this,"options",{skip:0,itemHeight:0,loadingItems:!1,jsinterop:{scroll:""}}),uJ(this,"onElementScroll",(()=>{var t=this.options,e=Math.floor(this.element.scrollTop);if(this.scrollTop===e||this.manualSet)this.manualSet=!1;else{clearTimeout(this.timeout),t.loadingItems&&this.scrollLoadingItems(),this.scrollTop=e;var i=Math.floor(e/t.itemHeight);this.timeout=setTimeout((()=>{this.invokeMethodAsync(t.jsinterop.scroll,i)}),66)}})),this.extendOptions(e),this.timeout,this.contentElement=this.element.querySelector(".k-virtual-scroller-content"),this.total=parseInt(this.contentElement.getAttribute("data-total")),this.setScrollbarSize(),this.setPosition(e.skip),this.bindEvents()}destroy(){clearTimeout(this.timeout),this.unbindEvents(),this.contentElement=null,super.destroy()}bindEvents(){this.element.addEventListener("scroll",this.onElementScroll)}unbindEvents(){this.element.removeEventListener("scroll",this.onElementScroll)}setScrollbarSize(){jt()}setPosition(t){this.manualSet=!0,this.scrollTop=Math.floor(this.options.itemHeight*t);var e=this.getDisplayNoneSelectors(),i=Yt(this.element,e);this.setDisplayStyle(i,""),this.element.scrollTop=this.scrollTop,this.setDisplayStyle(i,"none")}setPositionToIndex(t){this.manualSet=!0;var e=t*this.options.itemHeight,i=e+this.options.itemHeight,r=Math.floor(this.element.scrollTop),n=Ct(this.element),o=r+(this.element.offsetHeight-n);i>o?(this.scrollTop+=i-o,this.element.scrollTop=this.scrollTop):i<r&&(this.scrollTop=e,this.element.scrollTop=this.scrollTop)}scrollLoadingItems(){var t=this.options,e=Math.floor(this.element.scrollTop),i=Ct(this.element),r=this.element.offsetHeight-i,n=this.contentElement.children[0].offsetHeight,o=2*t.itemHeight,s=parseFloat(this.contentElement.getAttribute("data-translate")),a=s;e<s?a=e-e%o:n+s<r+e&&(a=Math.ceil((r+e-n)/o)*o),this.contentElement.style.setProperty("transform","translateY("+a+"px)")}setDisplayStyle(t,e){t.map((t=>{t.style.display=e}))}getDisplayNoneSelectors(){return['[style*="display: none;"]','[style*="display: none"]','[style*="display:none;"]','[style*="display:none"]']}}function dJ(t,e){Qt(pJ,t,e)}function fJ(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var gJ="width",mJ="height",yJ="k-resize-",vJ="n",bJ="w",wJ=[vJ,"e","s",bJ,"ne","nw","se","sw"].map((t=>"".concat(yJ).concat(t))),xJ=[".k-grid",".k-gantt",".k-treelist",".k-scheduler"].join(",");class SJ extends V{constructor(t,e){super(t,e),fJ(this,"options",{dotNetInstance:null,jsinterop:{keydown:"",dragEnd:"",resizeEnd:"",focusin:""},navigable:!1,draggable:!0,resizable:!0,modal:!1}),fJ(this,"onFocusIn",(()=>{this.invokeMethodAsync(this.options.jsinterop.focusin)})),fJ(this,"onKeyDown",(t=>{t.keyCode===fe.ESCAPE&&t.target.closest(xJ)||this.element!==t.target&&t.keyCode!==fe.ESCAPE||this.invokeKeyDown(t)})),fJ(this,"onDragStart",(t=>{this.resetDragState();var e=this.allowedDrag(t);e&&(this.setFixedPosition(),this.initWidth(),ri(t),this.setState({dragging:{dragStarted:e,initialTop:this.state.top,initialLeft:this.state.left,cursorOffset:{top:t.pageY-this.state.top,left:t.pageX-this.state.left}}}),this.element.focus())})),fJ(this,"onDrag",(t=>{if(!this.state.dragging.dragStarted)return!0;var e=t.pageY-this.state.dragging.cursorOffset.top,i=t.pageX-this.state.dragging.cursorOffset.left;this.setPosition(e,i)})),fJ(this,"onDragEnd",(()=>{this.state.dragging.dragStarted&&(this.state.dragging.initialTop===this.state.top&&this.state.dragging.initialLeft===this.state.left||this.invokeMethodAsync(this.options.jsinterop.dragEnd,{top:U(this.state.top),left:U(this.state.left)}))})),fJ(this,"onResizeStart",(t=>{this.resetResizeState(),this.setFixedPosition();var e=Array.from(t.originalCurrentTarget.classList).find((t=>wJ.includes(t))).replace(yJ,""),{currentWidth:i,currentHeight:r}=this.getDimensions()||{};i&&r&&this.setState({resizing:{initialWidth:i,initialHeight:r,targetedWidth:i,targetedHeight:r,direction:e}})})),fJ(this,"onResize",(t=>{var e=this.state.resizing.targetedWidth,i=this.state.resizing.targetedHeight,r=t.delta.y,n=t.delta.x;this.state.resizing.direction.includes(vJ)&&(r=this.constrainDelta(vJ,r),(this.state.top>=0||r>0)&&(i-=r,this.tryApplyNewDimension(mJ,i)&&this.setPosition(Number(this.state.top)+r,this.state.left)));(this.state.resizing.direction.includes("e")&&(e+=n,this.tryApplyNewDimension(gJ,e)),this.state.resizing.direction.includes("s")&&(i+=r,this.tryApplyNewDimension(mJ,i)),this.state.resizing.direction.includes(bJ))&&(n=this.constrainDelta(bJ,n),(this.state.left>=0||n>0)&&(e-=n,this.tryApplyNewDimension(gJ,e)&&this.setPosition(this.state.top,Number(this.state.left)+n)))})),fJ(this,"onResizeEnd",(()=>{de(this.state.resizing.initialWidth,this.state.resizing.targetedWidth,{decimals:2})&&de(this.state.resizing.initialHeight,this.state.resizing.targetedHeight,{decimals:2})||this.invokeMethodAsync(this.options.jsinterop.resizeEnd,{width:U(this.state.resizing.targetedWidth),height:U(this.state.resizing.targetedHeight),top:U(this.state.top),left:U(this.state.left)})})),this.extendOptions(e),this.titleBar=this.element.querySelector(".k-window-titlebar"),this.bindEvents(),this.options.navigable&&this.enableTabKeyTrap(),this.resetState()}destroy(){this.unbindEvents(),this.options.navigable&&this.disableTabKeyTrap(),this.destroyDraggable(),this.destroyResizable(),super.destroy(),this.content=this.titleBar=null}bindEvents(){this.element.addEventListener("keydown",this.onKeyDown),this.element.addEventListener("focusin",this.onFocusIn)}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown),this.element.removeEventListener("focusin",this.onFocusIn)}onAfterShow(t){t.length&&this.setOptions(t[0]),this.unbindEvents(),this.destroyDraggable(),this.destroyResizable();var e=this.element.getAttribute("data-id");this.element=K(e),this.element&&(this.titleBar=this.element.querySelector(".k-window-titlebar"),this.content=this.element.querySelector(".k-window-content"),this.bindEvents(),this.initDraggable(),this.initResizable(),this.formKeyTrap&&(this.formKeyTrap.destroy(),this.enableTabKeyTrap()),this.focusElement())}onAfterClose(){this.restoreFocus()}focusElement(){this.options.modal&&(this.state.elementToFocusOnClose=document.activeElement),this.options.navigable?dt(this.content.id):this.element.focus()}restoreFocus(){this.state.elementToFocusOnClose&&(this.state.elementToFocusOnClose.focus(),this.state.elementToFocusOnClose=null)}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,{type:t.type,key:t.key,code:t.keyCode,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey})}enableTabKeyTrap(){this.options.modal&&(this.formKeyTrap=new _e(this.content),this.formKeyTrap.enableKeyTrap())}disableTabKeyTrap(){this.formKeyTrap&&this.formKeyTrap.disableTabKeyTrap()}initDraggable(){this.options.draggable&&this.createDraggable()}createDraggable(){this.titleBar&&(this.draggable=new bi(this.titleBar,{filter:".k-window-titlebar",ignore:".k-window-actions",events:{dragStart:this.onDragStart,drag:this.onDrag,dragEnd:this.onDragEnd}}))}destroyDraggable(){this.draggable&&(this.draggable.destroy(),this.draggable=null)}allowedDrag(){return!this.isMaximized()}initResizable(){this.options.resizable&&this.createResizable()}createResizable(){this.resizable=new bI(this.element,{draggable:{filter:".k-window > .k-resize-handle"},events:{resizeStart:this.onResizeStart,resize:this.onResize,resizeEnd:this.onResizeEnd}})}destroyResizable(){this.resizable&&(this.resizable.destroy(),this.resizable=null)}tryApplyNewDimension(t,e){this.setDimension(t,e);var{currentWidth:i,currentHeight:r}=this.getDimensions()||{};return t===gJ&&i?de(e,i,{decimals:2})?(this.state.resizing.targetedWidth=e,!0):(this.setDimension(t,this.state.resizing.targetedWidth),!1):t===mJ&&r?de(e,r,{decimals:2})?(this.state.resizing.targetedHeight=e,!0):(this.setDimension(t,this.state.resizing.targetedHeight),!1):void 0}constrainDelta(t,e){var i=e;if(t===vJ){var r=Number(this.state.top)+e;r<0&&(i-=r)}else if(t===bJ){var n=Number(this.state.left)+e;n<0&&(i-=n)}return i}setFixedPosition(){var t={top:0,left:0};if(this.options.modal){var e=this.element.getBoundingClientRect();t={top:e.top,left:e.left}}else t=RG(this.element,this.element.parentElement);Q("k-centered",this.element),this.setPosition(t.top,t.left)}setPosition(t,e){this.setState({top:(Math.round(10*t)/10).toFixed(1),left:(Math.round(10*e)/10).toFixed(1)}),this.element&&(this.element.style.top=U(t),this.element.style.left=U(e))}isMaximized(){if(this.element)return"100%"===this.element.style.width&&"100%"===this.element.style.height}getDimensions(){if(this.element){var{width:t,height:e}=this.element.getBoundingClientRect();return{currentWidth:t,currentHeight:e}}}setDimension(t,e){this.element&&(t===gJ?this.element.style.width=U(e):t===mJ&&(this.element.style.height=U(e)))}setState(t){this.state=u(this.state||{},t)}resetState(){this.setState({elementToFocusOnClose:null,top:"",left:"",resizing:{initialWidth:"",initialHeight:"",targetedWidth:"",targetedHeight:"",direction:""},dragging:{dragStarted:"",initialTop:"",initialLeft:"",cursorOffset:{top:"",left:""}}})}resetDragState(){this.setState({dragging:{}})}resetResizeState(){this.setState({resizing:{}})}initWidth(){if(this.element&&!Boolean(this.element.style.width)){var t=this.element.offsetWidth;this.setDimension(gJ,t)}}}function kJ(t,e){Qt(SJ,t,e)}function CJ(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var AJ="keydown",_J=[fe.ARROWLEFT,fe.ARROWRIGHT];class TJ extends V{constructor(t,e){super(t,e),CJ(this,"onKeyDown",(t=>{this.invokeKeyDown(t)})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(AJ,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(AJ,this.onKeyDown)}invokeKeyDown(t){t.keyCode===fe.SPACE&&t.preventDefault(),this.element.closest(".k-chip-list")&&_J.includes(t.keyCode)&&t.preventDefault(),this.invokeMethodAsync(this.options.jsinterop.keydown,t.key)}}function OJ(t,e){Qt(TJ,t,e)}class EJ extends V{constructor(t,e){super(t,e)}focusChip(t){var e=this.element.getElementsByClassName("k-chip")[t];e&&e.focus()}}function MJ(t){Qt(EJ,t)}})(),__webpack_exports__})()));